var Y8e=Object.defineProperty;var K8e=(e,t,n)=>t in e?Y8e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var nl=(e,t,n)=>K8e(e,typeof t!="symbol"?t+"":t,n);function X8e(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var dd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function su(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function h1e(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var A8={exports:{}},MT={},I8={exports:{}},vr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aoe;function Q8e(){if(aoe)return vr;aoe=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),d=Symbol.iterator;function f(V){return V===null||typeof V!="object"?null:(V=d&&V[d]||V["@@iterator"],typeof V=="function"?V:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function y(V,X,H){this.props=V,this.context=X,this.refs=m,this.updater=H||h}y.prototype.isReactComponent={},y.prototype.setState=function(V,X){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,X,"setState")},y.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function v(){}v.prototype=y.prototype;function w(V,X,H){this.props=V,this.context=X,this.refs=m,this.updater=H||h}var x=w.prototype=new v;x.constructor=w,p(x,y.prototype),x.isPureReactComponent=!0;var S=Array.isArray,E=Object.prototype.hasOwnProperty,T={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function I(V,X,H){var Q,Z={},ne=null,ue=null;if(X!=null)for(Q in X.ref!==void 0&&(ue=X.ref),X.key!==void 0&&(ne=""+X.key),X)E.call(X,Q)&&!A.hasOwnProperty(Q)&&(Z[Q]=X[Q]);var le=arguments.length-2;if(le===1)Z.children=H;else if(1<le){for(var ce=Array(le),ge=0;ge<le;ge++)ce[ge]=arguments[ge+2];Z.children=ce}if(V&&V.defaultProps)for(Q in le=V.defaultProps,le)Z[Q]===void 0&&(Z[Q]=le[Q]);return{$$typeof:e,type:V,key:ne,ref:ue,props:Z,_owner:T.current}}function k(V,X){return{$$typeof:e,type:V.type,key:X,ref:V.ref,props:V.props,_owner:V._owner}}function D(V){return typeof V=="object"&&V!==null&&V.$$typeof===e}function M(V){var X={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(H){return X[H]})}var z=/\/+/g;function O(V,X){return typeof V=="object"&&V!==null&&V.key!=null?M(""+V.key):X.toString(36)}function $(V,X,H,Q,Z){var ne=typeof V;(ne==="undefined"||ne==="boolean")&&(V=null);var ue=!1;if(V===null)ue=!0;else switch(ne){case"string":case"number":ue=!0;break;case"object":switch(V.$$typeof){case e:case t:ue=!0}}if(ue)return ue=V,Z=Z(ue),V=Q===""?"."+O(ue,0):Q,S(Z)?(H="",V!=null&&(H=V.replace(z,"$&/")+"/"),$(Z,X,H,"",function(ge){return ge})):Z!=null&&(D(Z)&&(Z=k(Z,H+(!Z.key||ue&&ue.key===Z.key?"":(""+Z.key).replace(z,"$&/")+"/")+V)),X.push(Z)),1;if(ue=0,Q=Q===""?".":Q+":",S(V))for(var le=0;le<V.length;le++){ne=V[le];var ce=Q+O(ne,le);ue+=$(ne,X,H,ce,Z)}else if(ce=f(V),typeof ce=="function")for(V=ce.call(V),le=0;!(ne=V.next()).done;)ne=ne.value,ce=Q+O(ne,le++),ue+=$(ne,X,H,ce,Z);else if(ne==="object")throw X=String(V),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return ue}function F(V,X,H){if(V==null)return V;var Q=[],Z=0;return $(V,Q,"","",function(ne){return X.call(H,ne,Z++)}),Q}function B(V){if(V._status===-1){var X=V._result;X=X(),X.then(function(H){(V._status===0||V._status===-1)&&(V._status=1,V._result=H)},function(H){(V._status===0||V._status===-1)&&(V._status=2,V._result=H)}),V._status===-1&&(V._status=0,V._result=X)}if(V._status===1)return V._result.default;throw V._result}var q={current:null},G={transition:null},K={ReactCurrentDispatcher:q,ReactCurrentBatchConfig:G,ReactCurrentOwner:T};function L(){throw Error("act(...) is not supported in production builds of React.")}return vr.Children={map:F,forEach:function(V,X,H){F(V,function(){X.apply(this,arguments)},H)},count:function(V){var X=0;return F(V,function(){X++}),X},toArray:function(V){return F(V,function(X){return X})||[]},only:function(V){if(!D(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},vr.Component=y,vr.Fragment=n,vr.Profiler=i,vr.PureComponent=w,vr.StrictMode=r,vr.Suspense=u,vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,vr.act=L,vr.cloneElement=function(V,X,H){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var Q=p({},V.props),Z=V.key,ne=V.ref,ue=V._owner;if(X!=null){if(X.ref!==void 0&&(ne=X.ref,ue=T.current),X.key!==void 0&&(Z=""+X.key),V.type&&V.type.defaultProps)var le=V.type.defaultProps;for(ce in X)E.call(X,ce)&&!A.hasOwnProperty(ce)&&(Q[ce]=X[ce]===void 0&&le!==void 0?le[ce]:X[ce])}var ce=arguments.length-2;if(ce===1)Q.children=H;else if(1<ce){le=Array(ce);for(var ge=0;ge<ce;ge++)le[ge]=arguments[ge+2];Q.children=le}return{$$typeof:e,type:V.type,key:Z,ref:ne,props:Q,_owner:ue}},vr.createContext=function(V){return V={$$typeof:o,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:s,_context:V},V.Consumer=V},vr.createElement=I,vr.createFactory=function(V){var X=I.bind(null,V);return X.type=V,X},vr.createRef=function(){return{current:null}},vr.forwardRef=function(V){return{$$typeof:a,render:V}},vr.isValidElement=D,vr.lazy=function(V){return{$$typeof:c,_payload:{_status:-1,_result:V},_init:B}},vr.memo=function(V,X){return{$$typeof:l,type:V,compare:X===void 0?null:X}},vr.startTransition=function(V){var X=G.transition;G.transition={};try{V()}finally{G.transition=X}},vr.unstable_act=L,vr.useCallback=function(V,X){return q.current.useCallback(V,X)},vr.useContext=function(V){return q.current.useContext(V)},vr.useDebugValue=function(){},vr.useDeferredValue=function(V){return q.current.useDeferredValue(V)},vr.useEffect=function(V,X){return q.current.useEffect(V,X)},vr.useId=function(){return q.current.useId()},vr.useImperativeHandle=function(V,X,H){return q.current.useImperativeHandle(V,X,H)},vr.useInsertionEffect=function(V,X){return q.current.useInsertionEffect(V,X)},vr.useLayoutEffect=function(V,X){return q.current.useLayoutEffect(V,X)},vr.useMemo=function(V,X){return q.current.useMemo(V,X)},vr.useReducer=function(V,X,H){return q.current.useReducer(V,X,H)},vr.useRef=function(V){return q.current.useRef(V)},vr.useState=function(V){return q.current.useState(V)},vr.useSyncExternalStore=function(V,X,H){return q.current.useSyncExternalStore(V,X,H)},vr.useTransition=function(){return q.current.useTransition()},vr.version="18.3.1",vr}var uoe;function mL(){return uoe||(uoe=1,I8.exports=Q8e()),I8.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var loe;function J8e(){if(loe)return MT;loe=1;var e=mL(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,u,l){var c,d={},f=null,h=null;l!==void 0&&(f=""+l),u.key!==void 0&&(f=""+u.key),u.ref!==void 0&&(h=u.ref);for(c in u)r.call(u,c)&&!s.hasOwnProperty(c)&&(d[c]=u[c]);if(a&&a.defaultProps)for(c in u=a.defaultProps,u)d[c]===void 0&&(d[c]=u[c]);return{$$typeof:t,type:a,key:f,ref:h,props:d,_owner:i.current}}return MT.Fragment=n,MT.jsx=o,MT.jsxs=o,MT}var coe;function Z8e(){return coe||(coe=1,A8.exports=J8e()),A8.exports}var _=Z8e(),P=mL();const Is=su(P),lM=X8e({__proto__:null,default:Is},[P]);var MP={},R8={exports:{}},rl={},k8={exports:{}},P8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var doe;function eBe(){return doe||(doe=1,function(e){function t(G,K){var L=G.length;G.push(K);e:for(;0<L;){var V=L-1>>>1,X=G[V];if(0<i(X,K))G[V]=K,G[L]=X,L=V;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var K=G[0],L=G.pop();if(L!==K){G[0]=L;e:for(var V=0,X=G.length,H=X>>>1;V<H;){var Q=2*(V+1)-1,Z=G[Q],ne=Q+1,ue=G[ne];if(0>i(Z,L))ne<X&&0>i(ue,Z)?(G[V]=ue,G[ne]=L,V=ne):(G[V]=Z,G[Q]=L,V=Q);else if(ne<X&&0>i(ue,L))G[V]=ue,G[ne]=L,V=ne;else break e}}return K}function i(G,K){var L=G.sortIndex-K.sortIndex;return L!==0?L:G.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,d=null,f=3,h=!1,p=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(G){for(var K=n(l);K!==null;){if(K.callback===null)r(l);else if(K.startTime<=G)r(l),K.sortIndex=K.expirationTime,t(u,K);else break;K=n(l)}}function S(G){if(m=!1,x(G),!p)if(n(u)!==null)p=!0,B(E);else{var K=n(l);K!==null&&q(S,K.startTime-G)}}function E(G,K){p=!1,m&&(m=!1,v(I),I=-1),h=!0;var L=f;try{for(x(K),d=n(u);d!==null&&(!(d.expirationTime>K)||G&&!M());){var V=d.callback;if(typeof V=="function"){d.callback=null,f=d.priorityLevel;var X=V(d.expirationTime<=K);K=e.unstable_now(),typeof X=="function"?d.callback=X:d===n(u)&&r(u),x(K)}else r(u);d=n(u)}if(d!==null)var H=!0;else{var Q=n(l);Q!==null&&q(S,Q.startTime-K),H=!1}return H}finally{d=null,f=L,h=!1}}var T=!1,A=null,I=-1,k=5,D=-1;function M(){return!(e.unstable_now()-D<k)}function z(){if(A!==null){var G=e.unstable_now();D=G;var K=!0;try{K=A(!0,G)}finally{K?O():(T=!1,A=null)}}else T=!1}var O;if(typeof w=="function")O=function(){w(z)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,F=$.port2;$.port1.onmessage=z,O=function(){F.postMessage(null)}}else O=function(){y(z,0)};function B(G){A=G,T||(T=!0,O())}function q(G,K){I=y(function(){G(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,B(E))},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(G){switch(f){case 1:case 2:case 3:var K=3;break;default:K=f}var L=f;f=K;try{return G()}finally{f=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(G,K){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var L=f;f=G;try{return K()}finally{f=L}},e.unstable_scheduleCallback=function(G,K,L){var V=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?V+L:V):L=V,G){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=L+X,G={id:c++,callback:K,priorityLevel:G,startTime:L,expirationTime:X,sortIndex:-1},L>V?(G.sortIndex=L,t(l,G),n(u)===null&&G===n(l)&&(m?(v(I),I=-1):m=!0,q(S,L-V))):(G.sortIndex=X,t(u,G),p||h||(p=!0,B(E))),G},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(G){var K=f;return function(){var L=f;f=K;try{return G.apply(this,arguments)}finally{f=L}}}}(P8)),P8}var foe;function tBe(){return foe||(foe=1,k8.exports=eBe()),k8.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hoe;function nBe(){if(hoe)return rl;hoe=1;var e=mL(),t=tBe();function n(g){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+g,C=1;C<arguments.length;C++)b+="&args[]="+encodeURIComponent(arguments[C]);return"Minified React error #"+g+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(g,b){o(g,b),o(g+"Capture",b)}function o(g,b){for(i[g]=b,g=0;g<b.length;g++)r.add(b[g])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,l=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},d={};function f(g){return u.call(d,g)?!0:u.call(c,g)?!1:l.test(g)?d[g]=!0:(c[g]=!0,!1)}function h(g,b,C,N){if(C!==null&&C.type===0)return!1;switch(typeof b){case"function":case"symbol":return!0;case"boolean":return N?!1:C!==null?!C.acceptsBooleans:(g=g.toLowerCase().slice(0,5),g!=="data-"&&g!=="aria-");default:return!1}}function p(g,b,C,N){if(b===null||typeof b>"u"||h(g,b,C,N))return!0;if(N)return!1;if(C!==null)switch(C.type){case 3:return!b;case 4:return b===!1;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function m(g,b,C,N,U,Y,ee){this.acceptsBooleans=b===2||b===3||b===4,this.attributeName=N,this.attributeNamespace=U,this.mustUseProperty=C,this.propertyName=g,this.type=b,this.sanitizeURL=Y,this.removeEmptyString=ee}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(g){y[g]=new m(g,0,!1,g,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(g){var b=g[0];y[b]=new m(b,1,!1,g[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(g){y[g]=new m(g,2,!1,g.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(g){y[g]=new m(g,2,!1,g,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(g){y[g]=new m(g,3,!1,g.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(g){y[g]=new m(g,3,!0,g,null,!1,!1)}),["capture","download"].forEach(function(g){y[g]=new m(g,4,!1,g,null,!1,!1)}),["cols","rows","size","span"].forEach(function(g){y[g]=new m(g,6,!1,g,null,!1,!1)}),["rowSpan","start"].forEach(function(g){y[g]=new m(g,5,!1,g.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function w(g){return g[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(g){var b=g.replace(v,w);y[b]=new m(b,1,!1,g,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(g){var b=g.replace(v,w);y[b]=new m(b,1,!1,g,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(g){var b=g.replace(v,w);y[b]=new m(b,1,!1,g,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(g){y[g]=new m(g,1,!1,g.toLowerCase(),null,!1,!1)}),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(g){y[g]=new m(g,1,!1,g.toLowerCase(),null,!0,!0)});function x(g,b,C,N){var U=y.hasOwnProperty(b)?y[b]:null;(U!==null?U.type!==0:N||!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(p(b,C,U,N)&&(C=null),N||U===null?f(b)&&(C===null?g.removeAttribute(b):g.setAttribute(b,""+C)):U.mustUseProperty?g[U.propertyName]=C===null?U.type===3?!1:"":C:(b=U.attributeName,N=U.attributeNamespace,C===null?g.removeAttribute(b):(U=U.type,C=U===3||U===4&&C===!0?"":""+C,N?g.setAttributeNS(N,b,C):g.setAttribute(b,C))))}var S=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),T=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),M=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),q=Symbol.for("react.offscreen"),G=Symbol.iterator;function K(g){return g===null||typeof g!="object"?null:(g=G&&g[G]||g["@@iterator"],typeof g=="function"?g:null)}var L=Object.assign,V;function X(g){if(V===void 0)try{throw Error()}catch(C){var b=C.stack.trim().match(/\n( *(at )?)/);V=b&&b[1]||""}return`
`+V+g}var H=!1;function Q(g,b){if(!g||H)return"";H=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error()},Object.defineProperty(b.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(b,[])}catch(Ke){var N=Ke}Reflect.construct(g,[],b)}else{try{b.call()}catch(Ke){N=Ke}g.call(b.prototype)}else{try{throw Error()}catch(Ke){N=Ke}g()}}catch(Ke){if(Ke&&N&&typeof Ke.stack=="string"){for(var U=Ke.stack.split(`
`),Y=N.stack.split(`
`),ee=U.length-1,me=Y.length-1;1<=ee&&0<=me&&U[ee]!==Y[me];)me--;for(;1<=ee&&0<=me;ee--,me--)if(U[ee]!==Y[me]){if(ee!==1||me!==1)do if(ee--,me--,0>me||U[ee]!==Y[me]){var Ae=`
`+U[ee].replace(" at new "," at ");return g.displayName&&Ae.includes("<anonymous>")&&(Ae=Ae.replace("<anonymous>",g.displayName)),Ae}while(1<=ee&&0<=me);break}}}finally{H=!1,Error.prepareStackTrace=C}return(g=g?g.displayName||g.name:"")?X(g):""}function Z(g){switch(g.tag){case 5:return X(g.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return g=Q(g.type,!1),g;case 11:return g=Q(g.type.render,!1),g;case 1:return g=Q(g.type,!0),g;default:return""}}function ne(g){if(g==null)return null;if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case A:return"Fragment";case T:return"Portal";case k:return"Profiler";case I:return"StrictMode";case O:return"Suspense";case $:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case M:return(g.displayName||"Context")+".Consumer";case D:return(g._context.displayName||"Context")+".Provider";case z:var b=g.render;return g=g.displayName,g||(g=b.displayName||b.name||"",g=g!==""?"ForwardRef("+g+")":"ForwardRef"),g;case F:return b=g.displayName||null,b!==null?b:ne(g.type)||"Memo";case B:b=g._payload,g=g._init;try{return ne(g(b))}catch{}}return null}function ue(g){var b=g.type;switch(g.tag){case 24:return"Cache";case 9:return(b.displayName||"Context")+".Consumer";case 10:return(b._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return g=b.render,g=g.displayName||g.name||"",b.displayName||(g!==""?"ForwardRef("+g+")":"ForwardRef");case 7:return"Fragment";case 5:return b;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(b);case 8:return b===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof b=="function")return b.displayName||b.name||null;if(typeof b=="string")return b}return null}function le(g){switch(typeof g){case"boolean":case"number":case"string":case"undefined":return g;case"object":return g;default:return""}}function ce(g){var b=g.type;return(g=g.nodeName)&&g.toLowerCase()==="input"&&(b==="checkbox"||b==="radio")}function ge(g){var b=ce(g)?"checked":"value",C=Object.getOwnPropertyDescriptor(g.constructor.prototype,b),N=""+g[b];if(!g.hasOwnProperty(b)&&typeof C<"u"&&typeof C.get=="function"&&typeof C.set=="function"){var U=C.get,Y=C.set;return Object.defineProperty(g,b,{configurable:!0,get:function(){return U.call(this)},set:function(ee){N=""+ee,Y.call(this,ee)}}),Object.defineProperty(g,b,{enumerable:C.enumerable}),{getValue:function(){return N},setValue:function(ee){N=""+ee},stopTracking:function(){g._valueTracker=null,delete g[b]}}}}function se(g){g._valueTracker||(g._valueTracker=ge(g))}function te(g){if(!g)return!1;var b=g._valueTracker;if(!b)return!0;var C=b.getValue(),N="";return g&&(N=ce(g)?g.checked?"true":"false":g.value),g=N,g!==C?(b.setValue(g),!0):!1}function Ee(g){if(g=g||(typeof document<"u"?document:void 0),typeof g>"u")return null;try{return g.activeElement||g.body}catch{return g.body}}function we(g,b){var C=b.checked;return L({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:C??g._wrapperState.initialChecked})}function De(g,b){var C=b.defaultValue==null?"":b.defaultValue,N=b.checked!=null?b.checked:b.defaultChecked;C=le(b.value!=null?b.value:C),g._wrapperState={initialChecked:N,initialValue:C,controlled:b.type==="checkbox"||b.type==="radio"?b.checked!=null:b.value!=null}}function Le(g,b){b=b.checked,b!=null&&x(g,"checked",b,!1)}function Ne(g,b){Le(g,b);var C=le(b.value),N=b.type;if(C!=null)N==="number"?(C===0&&g.value===""||g.value!=C)&&(g.value=""+C):g.value!==""+C&&(g.value=""+C);else if(N==="submit"||N==="reset"){g.removeAttribute("value");return}b.hasOwnProperty("value")?qe(g,b.type,C):b.hasOwnProperty("defaultValue")&&qe(g,b.type,le(b.defaultValue)),b.checked==null&&b.defaultChecked!=null&&(g.defaultChecked=!!b.defaultChecked)}function Te(g,b,C){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var N=b.type;if(!(N!=="submit"&&N!=="reset"||b.value!==void 0&&b.value!==null))return;b=""+g._wrapperState.initialValue,C||b===g.value||(g.value=b),g.defaultValue=b}C=g.name,C!==""&&(g.name=""),g.defaultChecked=!!g._wrapperState.initialChecked,C!==""&&(g.name=C)}function qe(g,b,C){(b!=="number"||Ee(g.ownerDocument)!==g)&&(C==null?g.defaultValue=""+g._wrapperState.initialValue:g.defaultValue!==""+C&&(g.defaultValue=""+C))}var Qe=Array.isArray;function Ue(g,b,C,N){if(g=g.options,b){b={};for(var U=0;U<C.length;U++)b["$"+C[U]]=!0;for(C=0;C<g.length;C++)U=b.hasOwnProperty("$"+g[C].value),g[C].selected!==U&&(g[C].selected=U),U&&N&&(g[C].defaultSelected=!0)}else{for(C=""+le(C),b=null,U=0;U<g.length;U++){if(g[U].value===C){g[U].selected=!0,N&&(g[U].defaultSelected=!0);return}b!==null||g[U].disabled||(b=g[U])}b!==null&&(b.selected=!0)}}function Ve(g,b){if(b.dangerouslySetInnerHTML!=null)throw Error(n(91));return L({},b,{value:void 0,defaultValue:void 0,children:""+g._wrapperState.initialValue})}function Se(g,b){var C=b.value;if(C==null){if(C=b.children,b=b.defaultValue,C!=null){if(b!=null)throw Error(n(92));if(Qe(C)){if(1<C.length)throw Error(n(93));C=C[0]}b=C}b==null&&(b=""),C=b}g._wrapperState={initialValue:le(C)}}function it(g,b){var C=le(b.value),N=le(b.defaultValue);C!=null&&(C=""+C,C!==g.value&&(g.value=C),b.defaultValue==null&&g.defaultValue!==C&&(g.defaultValue=C)),N!=null&&(g.defaultValue=""+N)}function It(g){var b=g.textContent;b===g._wrapperState.initialValue&&b!==""&&b!==null&&(g.value=b)}function Re(g){switch(g){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ge(g,b){return g==null||g==="http://www.w3.org/1999/xhtml"?Re(b):g==="http://www.w3.org/2000/svg"&&b==="foreignObject"?"http://www.w3.org/1999/xhtml":g}var ot,ct=function(g){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(b,C,N,U){MSApp.execUnsafeLocalFunction(function(){return g(b,C,N,U)})}:g}(function(g,b){if(g.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in g)g.innerHTML=b;else{for(ot=ot||document.createElement("div"),ot.innerHTML="<svg>"+b.valueOf().toString()+"</svg>",b=ot.firstChild;g.firstChild;)g.removeChild(g.firstChild);for(;b.firstChild;)g.appendChild(b.firstChild)}});function Mt(g,b){if(b){var C=g.firstChild;if(C&&C===g.lastChild&&C.nodeType===3){C.nodeValue=b;return}}g.textContent=b}var Nn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rr=["Webkit","ms","Moz","O"];Object.keys(Nn).forEach(function(g){Rr.forEach(function(b){b=b+g.charAt(0).toUpperCase()+g.substring(1),Nn[b]=Nn[g]})});function xr(g,b,C){return b==null||typeof b=="boolean"||b===""?"":C||typeof b!="number"||b===0||Nn.hasOwnProperty(g)&&Nn[g]?(""+b).trim():b+"px"}function Mr(g,b){g=g.style;for(var C in b)if(b.hasOwnProperty(C)){var N=C.indexOf("--")===0,U=xr(C,b[C],N);C==="float"&&(C="cssFloat"),N?g.setProperty(C,U):g[C]=U}}var fn=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qn(g,b){if(b){if(fn[g]&&(b.children!=null||b.dangerouslySetInnerHTML!=null))throw Error(n(137,g));if(b.dangerouslySetInnerHTML!=null){if(b.children!=null)throw Error(n(60));if(typeof b.dangerouslySetInnerHTML!="object"||!("__html"in b.dangerouslySetInnerHTML))throw Error(n(61))}if(b.style!=null&&typeof b.style!="object")throw Error(n(62))}}function lr(g,b){if(g.indexOf("-")===-1)return typeof b.is=="string";switch(g){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cr=null;function bs(g){return g=g.target||g.srcElement||window,g.correspondingUseElement&&(g=g.correspondingUseElement),g.nodeType===3?g.parentNode:g}var Ai=null,ci=null,Wn=null;function or(g){if(g=_T(g)){if(typeof Ai!="function")throw Error(n(280));var b=g.stateNode;b&&(b=Xk(b),Ai(g.stateNode,g.type,b))}}function Wi(g){ci?Wn?Wn.push(g):Wn=[g]:ci=g}function qu(){if(ci){var g=ci,b=Wn;if(Wn=ci=null,or(g),b)for(g=0;g<b.length;g++)or(b[g])}}function $o(g,b){return g(b)}function lu(){}var Rt=!1;function yi(g,b,C){if(Rt)return g(b,C);Rt=!0;try{return $o(g,b,C)}finally{Rt=!1,(ci!==null||Wn!==null)&&(lu(),qu())}}function xn(g,b){var C=g.stateNode;if(C===null)return null;var N=Xk(C);if(N===null)return null;C=N[b];e:switch(b){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(N=!N.disabled)||(g=g.type,N=!(g==="button"||g==="input"||g==="select"||g==="textarea")),g=!N;break e;default:g=!1}if(g)return null;if(C&&typeof C!="function")throw Error(n(231,b,typeof C));return C}var $r=!1;if(a)try{var Vr={};Object.defineProperty(Vr,"passive",{get:function(){$r=!0}}),window.addEventListener("test",Vr,Vr),window.removeEventListener("test",Vr,Vr)}catch{$r=!1}function vi(g,b,C,N,U,Y,ee,me,Ae){var Ke=Array.prototype.slice.call(arguments,3);try{b.apply(C,Ke)}catch(gt){this.onError(gt)}}var ve=!1,he=null,xe=!1,We=null,Ye={onError:function(g){ve=!0,he=g}};function St(g,b,C,N,U,Y,ee,me,Ae){ve=!1,he=null,vi.apply(Ye,arguments)}function Ht(g,b,C,N,U,Y,ee,me,Ae){if(St.apply(this,arguments),ve){if(ve){var Ke=he;ve=!1,he=null}else throw Error(n(198));xe||(xe=!0,We=Ke)}}function sn(g){var b=g,C=g;if(g.alternate)for(;b.return;)b=b.return;else{g=b;do b=g,(b.flags&4098)!==0&&(C=b.return),g=b.return;while(g)}return b.tag===3?C:null}function ar(g){if(g.tag===13){var b=g.memoizedState;if(b===null&&(g=g.alternate,g!==null&&(b=g.memoizedState)),b!==null)return b.dehydrated}return null}function dr(g){if(sn(g)!==g)throw Error(n(188))}function Gn(g){var b=g.alternate;if(!b){if(b=sn(g),b===null)throw Error(n(188));return b!==g?null:g}for(var C=g,N=b;;){var U=C.return;if(U===null)break;var Y=U.alternate;if(Y===null){if(N=U.return,N!==null){C=N;continue}break}if(U.child===Y.child){for(Y=U.child;Y;){if(Y===C)return dr(U),g;if(Y===N)return dr(U),b;Y=Y.sibling}throw Error(n(188))}if(C.return!==N.return)C=U,N=Y;else{for(var ee=!1,me=U.child;me;){if(me===C){ee=!0,C=U,N=Y;break}if(me===N){ee=!0,N=U,C=Y;break}me=me.sibling}if(!ee){for(me=Y.child;me;){if(me===C){ee=!0,C=Y,N=U;break}if(me===N){ee=!0,N=Y,C=U;break}me=me.sibling}if(!ee)throw Error(n(189))}}if(C.alternate!==N)throw Error(n(190))}if(C.tag!==3)throw Error(n(188));return C.stateNode.current===C?g:b}function Er(g){return g=Gn(g),g!==null?Yr(g):null}function Yr(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){var b=Yr(g);if(b!==null)return b;g=g.sibling}return null}var dn=t.unstable_scheduleCallback,Sr=t.unstable_cancelCallback,bi=t.unstable_shouldYield,Tr=t.unstable_requestPaint,Yn=t.unstable_now,Ys=t.unstable_getCurrentPriorityLevel,di=t.unstable_ImmediatePriority,Ks=t.unstable_UserBlockingPriority,Oi=t.unstable_NormalPriority,ts=t.unstable_LowPriority,co=t.unstable_IdlePriority,Xs=null,_i=null;function Wu(g){if(_i&&typeof _i.onCommitFiberRoot=="function")try{_i.onCommitFiberRoot(Xs,g,void 0,(g.current.flags&128)===128)}catch{}}var _s=Math.clz32?Math.clz32:de,re=Math.log,_e=Math.LN2;function de(g){return g>>>=0,g===0?32:31-(re(g)/_e|0)|0}var Pe=64,Me=4194304;function Ie(g){switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return g&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return g}}function nt(g,b){var C=g.pendingLanes;if(C===0)return 0;var N=0,U=g.suspendedLanes,Y=g.pingedLanes,ee=C&268435455;if(ee!==0){var me=ee&~U;me!==0?N=Ie(me):(Y&=ee,Y!==0&&(N=Ie(Y)))}else ee=C&~U,ee!==0?N=Ie(ee):Y!==0&&(N=Ie(Y));if(N===0)return 0;if(b!==0&&b!==N&&(b&U)===0&&(U=N&-N,Y=b&-b,U>=Y||U===16&&(Y&4194240)!==0))return b;if((N&4)!==0&&(N|=C&16),b=g.entangledLanes,b!==0)for(g=g.entanglements,b&=N;0<b;)C=31-_s(b),U=1<<C,N|=g[C],b&=~U;return N}function ft(g,b){switch(g){case 1:case 2:case 4:return b+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pt(g,b){for(var C=g.suspendedLanes,N=g.pingedLanes,U=g.expirationTimes,Y=g.pendingLanes;0<Y;){var ee=31-_s(Y),me=1<<ee,Ae=U[ee];Ae===-1?((me&C)===0||(me&N)!==0)&&(U[ee]=ft(me,b)):Ae<=b&&(g.expiredLanes|=me),Y&=~me}}function ht(g){return g=g.pendingLanes&-1073741825,g!==0?g:g&1073741824?1073741824:0}function xt(){var g=Pe;return Pe<<=1,(Pe&4194240)===0&&(Pe=64),g}function Bt(g){for(var b=[],C=0;31>C;C++)b.push(g);return b}function On(g,b,C){g.pendingLanes|=b,b!==536870912&&(g.suspendedLanes=0,g.pingedLanes=0),g=g.eventTimes,b=31-_s(b),g[b]=C}function tn(g,b){var C=g.pendingLanes&~b;g.pendingLanes=b,g.suspendedLanes=0,g.pingedLanes=0,g.expiredLanes&=b,g.mutableReadLanes&=b,g.entangledLanes&=b,b=g.entanglements;var N=g.eventTimes;for(g=g.expirationTimes;0<C;){var U=31-_s(C),Y=1<<U;b[U]=0,N[U]=-1,g[U]=-1,C&=~Y}}function ur(g,b){var C=g.entangledLanes|=b;for(g=g.entanglements;C;){var N=31-_s(C),U=1<<N;U&b|g[N]&b&&(g[N]|=b),C&=~U}}var rn=0;function Kr(g){return g&=-g,1<g?4<g?(g&268435455)!==0?16:536870912:4:1}var fo,Gu,Fc,qg,ph,Wg=!1,na=[],cs=null,Lo=null,cu=null,mh=new Map,du=new Map,Yu=[],A_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jc(g,b){switch(g){case"focusin":case"focusout":cs=null;break;case"dragenter":case"dragleave":Lo=null;break;case"mouseover":case"mouseout":cu=null;break;case"pointerover":case"pointerout":mh.delete(b.pointerId);break;case"gotpointercapture":case"lostpointercapture":du.delete(b.pointerId)}}function Qs(g,b,C,N,U,Y){return g===null||g.nativeEvent!==Y?(g={blockedOn:b,domEventName:C,eventSystemFlags:N,nativeEvent:Y,targetContainers:[U]},b!==null&&(b=_T(b),b!==null&&Gu(b)),g):(g.eventSystemFlags|=N,b=g.targetContainers,U!==null&&b.indexOf(U)===-1&&b.push(U),g)}function lT(g,b,C,N,U){switch(b){case"focusin":return cs=Qs(cs,g,b,C,N,U),!0;case"dragenter":return Lo=Qs(Lo,g,b,C,N,U),!0;case"mouseover":return cu=Qs(cu,g,b,C,N,U),!0;case"pointerover":var Y=U.pointerId;return mh.set(Y,Qs(mh.get(Y)||null,g,b,C,N,U)),!0;case"gotpointercapture":return Y=U.pointerId,du.set(Y,Qs(du.get(Y)||null,g,b,C,N,U)),!0}return!1}function Dv(g){var b=Lv(g.target);if(b!==null){var C=sn(b);if(C!==null){if(b=C.tag,b===13){if(b=ar(C),b!==null){g.blockedOn=b,ph(g.priority,function(){Fc(C)});return}}else if(b===3&&C.stateNode.current.memoizedState.isDehydrated){g.blockedOn=C.tag===3?C.stateNode.containerInfo:null;return}}}g.blockedOn=null}function Bc(g){if(g.blockedOn!==null)return!1;for(var b=g.targetContainers;0<b.length;){var C=Lr(g.domEventName,g.eventSystemFlags,b[0],g.nativeEvent);if(C===null){C=g.nativeEvent;var N=new C.constructor(C.type,C);cr=N,C.target.dispatchEvent(N),cr=null}else return b=_T(C),b!==null&&Gu(b),g.blockedOn=C,!1;b.shift()}return!0}function gh(g,b,C){Bc(g)&&C.delete(b)}function I_(){Wg=!1,cs!==null&&Bc(cs)&&(cs=null),Lo!==null&&Bc(Lo)&&(Lo=null),cu!==null&&Bc(cu)&&(cu=null),mh.forEach(gh),du.forEach(gh)}function Hl(g,b){g.blockedOn===b&&(g.blockedOn=null,Wg||(Wg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,I_)))}function Ku(g){function b(U){return Hl(U,g)}if(0<na.length){Hl(na[0],g);for(var C=1;C<na.length;C++){var N=na[C];N.blockedOn===g&&(N.blockedOn=null)}}for(cs!==null&&Hl(cs,g),Lo!==null&&Hl(Lo,g),cu!==null&&Hl(cu,g),mh.forEach(b),du.forEach(b),C=0;C<Yu.length;C++)N=Yu[C],N.blockedOn===g&&(N.blockedOn=null);for(;0<Yu.length&&(C=Yu[0],C.blockedOn===null);)Dv(C),C.blockedOn===null&&Yu.shift()}var Ud=S.ReactCurrentBatchConfig,pe=!0;function Ce(g,b,C,N){var U=rn,Y=Ud.transition;Ud.transition=null;try{rn=1,qt(g,b,C,N)}finally{rn=U,Ud.transition=Y}}function Xe(g,b,C,N){var U=rn,Y=Ud.transition;Ud.transition=null;try{rn=4,qt(g,b,C,N)}finally{rn=U,Ud.transition=Y}}function qt(g,b,C,N){if(pe){var U=Lr(g,b,C,N);if(U===null)y5(g,b,N,tr,C),jc(g,N);else if(lT(U,g,b,C,N))N.stopPropagation();else if(jc(g,N),b&4&&-1<A_.indexOf(g)){for(;U!==null;){var Y=_T(U);if(Y!==null&&fo(Y),Y=Lr(g,b,C,N),Y===null&&y5(g,b,N,tr,C),Y===U)break;U=Y}U!==null&&N.stopPropagation()}else y5(g,b,N,null,C)}}var tr=null;function Lr(g,b,C,N){if(tr=null,g=bs(N),g=Lv(g),g!==null)if(b=sn(g),b===null)g=null;else if(C=b.tag,C===13){if(g=ar(b),g!==null)return g;g=null}else if(C===3){if(b.stateNode.current.memoizedState.isDehydrated)return b.tag===3?b.stateNode.containerInfo:null;g=null}else b!==g&&(g=null);return tr=g,null}function fi(g){switch(g){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ys()){case di:return 1;case Ks:return 4;case Oi:case ts:return 16;case co:return 536870912;default:return 16}default:return 16}}var Kn=null,si=null,Li=null;function ho(){if(Li)return Li;var g,b=si,C=b.length,N,U="value"in Kn?Kn.value:Kn.textContent,Y=U.length;for(g=0;g<C&&b[g]===U[g];g++);var ee=C-g;for(N=1;N<=ee&&b[C-N]===U[Y-N];N++);return Li=U.slice(g,1<N?1-N:void 0)}function zc(g){var b=g.keyCode;return"charCode"in g?(g=g.charCode,g===0&&b===13&&(g=13)):g=b,g===10&&(g=13),32<=g||g===13?g:0}function Xu(){return!0}function em(){return!1}function Js(g){function b(C,N,U,Y,ee){this._reactName=C,this._targetInst=U,this.type=N,this.nativeEvent=Y,this.target=ee,this.currentTarget=null;for(var me in g)g.hasOwnProperty(me)&&(C=g[me],this[me]=C?C(Y):Y[me]);return this.isDefaultPrevented=(Y.defaultPrevented!=null?Y.defaultPrevented:Y.returnValue===!1)?Xu:em,this.isPropagationStopped=em,this}return L(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var C=this.nativeEvent;C&&(C.preventDefault?C.preventDefault():typeof C.returnValue!="unknown"&&(C.returnValue=!1),this.isDefaultPrevented=Xu)},stopPropagation:function(){var C=this.nativeEvent;C&&(C.stopPropagation?C.stopPropagation():typeof C.cancelBubble!="unknown"&&(C.cancelBubble=!0),this.isPropagationStopped=Xu)},persist:function(){},isPersistent:Xu}),b}var Vd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(g){return g.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},R_=Js(Vd),yh=L({},Vd,{view:0,detail:0}),a5=Js(yh),k_,tm,Gg,Mv=L({},yh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vh,button:0,buttons:0,relatedTarget:function(g){return g.relatedTarget===void 0?g.fromElement===g.srcElement?g.toElement:g.fromElement:g.relatedTarget},movementX:function(g){return"movementX"in g?g.movementX:(g!==Gg&&(Gg&&g.type==="mousemove"?(k_=g.screenX-Gg.screenX,tm=g.screenY-Gg.screenY):tm=k_=0,Gg=g),k_)},movementY:function(g){return"movementY"in g?g.movementY:tm}}),P_=Js(Mv),cT=L({},Mv,{dataTransfer:0}),$k=Js(cT),N_=L({},yh,{relatedTarget:0}),O_=Js(N_),Lk=L({},Vd,{animationName:0,elapsedTime:0,pseudoElement:0}),nm=Js(Lk),Fk=L({},Vd,{clipboardData:function(g){return"clipboardData"in g?g.clipboardData:window.clipboardData}}),jk=Js(Fk),Bk=L({},Vd,{data:0}),dT=Js(Bk),D_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uk(g){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(g):(g=zk[g])?!!b[g]:!1}function vh(){return Uk}var R=L({},yh,{key:function(g){if(g.key){var b=D_[g.key]||g.key;if(b!=="Unidentified")return b}return g.type==="keypress"?(g=zc(g),g===13?"Enter":String.fromCharCode(g)):g.type==="keydown"||g.type==="keyup"?fu[g.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vh,charCode:function(g){return g.type==="keypress"?zc(g):0},keyCode:function(g){return g.type==="keydown"||g.type==="keyup"?g.keyCode:0},which:function(g){return g.type==="keypress"?zc(g):g.type==="keydown"||g.type==="keyup"?g.keyCode:0}}),W=Js(R),J=L({},Mv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ae=Js(J),Fe=L({},yh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vh}),Ze=Js(Fe),Pt=L({},Vd,{propertyName:0,elapsedTime:0,pseudoElement:0}),wi=Js(Pt),po=L({},Mv,{deltaX:function(g){return"deltaX"in g?g.deltaX:"wheelDeltaX"in g?-g.wheelDeltaX:0},deltaY:function(g){return"deltaY"in g?g.deltaY:"wheelDeltaY"in g?-g.wheelDeltaY:"wheelDelta"in g?-g.wheelDelta:0},deltaZ:0,deltaMode:0}),Fr=Js(po),Fo=[9,13,27,32],Zs=a&&"CompositionEvent"in window,Uc=null;a&&"documentMode"in document&&(Uc=document.documentMode);var ql=a&&"TextEvent"in window&&!Uc,$v=a&&(!Zs||Uc&&8<Uc&&11>=Uc),M_=" ",tie=!1;function nie(g,b){switch(g){case"keyup":return Fo.indexOf(b.keyCode)!==-1;case"keydown":return b.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rie(g){return g=g.detail,typeof g=="object"&&"data"in g?g.data:null}var $_=!1;function q5e(g,b){switch(g){case"compositionend":return rie(b);case"keypress":return b.which!==32?null:(tie=!0,M_);case"textInput":return g=b.data,g===M_&&tie?null:g;default:return null}}function W5e(g,b){if($_)return g==="compositionend"||!Zs&&nie(g,b)?(g=ho(),Li=si=Kn=null,$_=!1,g):null;switch(g){case"paste":return null;case"keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case"compositionend":return $v&&b.locale!=="ko"?null:b.data;default:return null}}var G5e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iie(g){var b=g&&g.nodeName&&g.nodeName.toLowerCase();return b==="input"?!!G5e[g.type]:b==="textarea"}function sie(g,b,C,N){Wi(N),b=Gk(b,"onChange"),0<b.length&&(C=new R_("onChange","change",null,C,N),g.push({event:C,listeners:b}))}var fT=null,hT=null;function Y5e(g){Eie(g,0)}function Vk(g){var b=z_(g);if(te(b))return g}function K5e(g,b){if(g==="change")return b}var oie=!1;if(a){var u5;if(a){var l5="oninput"in document;if(!l5){var aie=document.createElement("div");aie.setAttribute("oninput","return;"),l5=typeof aie.oninput=="function"}u5=l5}else u5=!1;oie=u5&&(!document.documentMode||9<document.documentMode)}function uie(){fT&&(fT.detachEvent("onpropertychange",lie),hT=fT=null)}function lie(g){if(g.propertyName==="value"&&Vk(hT)){var b=[];sie(b,hT,g,bs(g)),yi(Y5e,b)}}function X5e(g,b,C){g==="focusin"?(uie(),fT=b,hT=C,fT.attachEvent("onpropertychange",lie)):g==="focusout"&&uie()}function Q5e(g){if(g==="selectionchange"||g==="keyup"||g==="keydown")return Vk(hT)}function J5e(g,b){if(g==="click")return Vk(b)}function Z5e(g,b){if(g==="input"||g==="change")return Vk(b)}function e8e(g,b){return g===b&&(g!==0||1/g===1/b)||g!==g&&b!==b}var Hd=typeof Object.is=="function"?Object.is:e8e;function pT(g,b){if(Hd(g,b))return!0;if(typeof g!="object"||g===null||typeof b!="object"||b===null)return!1;var C=Object.keys(g),N=Object.keys(b);if(C.length!==N.length)return!1;for(N=0;N<C.length;N++){var U=C[N];if(!u.call(b,U)||!Hd(g[U],b[U]))return!1}return!0}function cie(g){for(;g&&g.firstChild;)g=g.firstChild;return g}function die(g,b){var C=cie(g);g=0;for(var N;C;){if(C.nodeType===3){if(N=g+C.textContent.length,g<=b&&N>=b)return{node:C,offset:b-g};g=N}e:{for(;C;){if(C.nextSibling){C=C.nextSibling;break e}C=C.parentNode}C=void 0}C=cie(C)}}function fie(g,b){return g&&b?g===b?!0:g&&g.nodeType===3?!1:b&&b.nodeType===3?fie(g,b.parentNode):"contains"in g?g.contains(b):g.compareDocumentPosition?!!(g.compareDocumentPosition(b)&16):!1:!1}function hie(){for(var g=window,b=Ee();b instanceof g.HTMLIFrameElement;){try{var C=typeof b.contentWindow.location.href=="string"}catch{C=!1}if(C)g=b.contentWindow;else break;b=Ee(g.document)}return b}function c5(g){var b=g&&g.nodeName&&g.nodeName.toLowerCase();return b&&(b==="input"&&(g.type==="text"||g.type==="search"||g.type==="tel"||g.type==="url"||g.type==="password")||b==="textarea"||g.contentEditable==="true")}function t8e(g){var b=hie(),C=g.focusedElem,N=g.selectionRange;if(b!==C&&C&&C.ownerDocument&&fie(C.ownerDocument.documentElement,C)){if(N!==null&&c5(C)){if(b=N.start,g=N.end,g===void 0&&(g=b),"selectionStart"in C)C.selectionStart=b,C.selectionEnd=Math.min(g,C.value.length);else if(g=(b=C.ownerDocument||document)&&b.defaultView||window,g.getSelection){g=g.getSelection();var U=C.textContent.length,Y=Math.min(N.start,U);N=N.end===void 0?Y:Math.min(N.end,U),!g.extend&&Y>N&&(U=N,N=Y,Y=U),U=die(C,Y);var ee=die(C,N);U&&ee&&(g.rangeCount!==1||g.anchorNode!==U.node||g.anchorOffset!==U.offset||g.focusNode!==ee.node||g.focusOffset!==ee.offset)&&(b=b.createRange(),b.setStart(U.node,U.offset),g.removeAllRanges(),Y>N?(g.addRange(b),g.extend(ee.node,ee.offset)):(b.setEnd(ee.node,ee.offset),g.addRange(b)))}}for(b=[],g=C;g=g.parentNode;)g.nodeType===1&&b.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<b.length;C++)g=b[C],g.element.scrollLeft=g.left,g.element.scrollTop=g.top}}var n8e=a&&"documentMode"in document&&11>=document.documentMode,L_=null,d5=null,mT=null,f5=!1;function pie(g,b,C){var N=C.window===C?C.document:C.nodeType===9?C:C.ownerDocument;f5||L_==null||L_!==Ee(N)||(N=L_,"selectionStart"in N&&c5(N)?N={start:N.selectionStart,end:N.selectionEnd}:(N=(N.ownerDocument&&N.ownerDocument.defaultView||window).getSelection(),N={anchorNode:N.anchorNode,anchorOffset:N.anchorOffset,focusNode:N.focusNode,focusOffset:N.focusOffset}),mT&&pT(mT,N)||(mT=N,N=Gk(d5,"onSelect"),0<N.length&&(b=new R_("onSelect","select",null,b,C),g.push({event:b,listeners:N}),b.target=L_)))}function Hk(g,b){var C={};return C[g.toLowerCase()]=b.toLowerCase(),C["Webkit"+g]="webkit"+b,C["Moz"+g]="moz"+b,C}var F_={animationend:Hk("Animation","AnimationEnd"),animationiteration:Hk("Animation","AnimationIteration"),animationstart:Hk("Animation","AnimationStart"),transitionend:Hk("Transition","TransitionEnd")},h5={},mie={};a&&(mie=document.createElement("div").style,"AnimationEvent"in window||(delete F_.animationend.animation,delete F_.animationiteration.animation,delete F_.animationstart.animation),"TransitionEvent"in window||delete F_.transitionend.transition);function qk(g){if(h5[g])return h5[g];if(!F_[g])return g;var b=F_[g],C;for(C in b)if(b.hasOwnProperty(C)&&C in mie)return h5[g]=b[C];return g}var gie=qk("animationend"),yie=qk("animationiteration"),vie=qk("animationstart"),bie=qk("transitionend"),_ie=new Map,wie="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yg(g,b){_ie.set(g,b),s(b,[g])}for(var p5=0;p5<wie.length;p5++){var m5=wie[p5],r8e=m5.toLowerCase(),i8e=m5[0].toUpperCase()+m5.slice(1);Yg(r8e,"on"+i8e)}Yg(gie,"onAnimationEnd"),Yg(yie,"onAnimationIteration"),Yg(vie,"onAnimationStart"),Yg("dblclick","onDoubleClick"),Yg("focusin","onFocus"),Yg("focusout","onBlur"),Yg(bie,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gT="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),s8e=new Set("cancel close invalid load scroll toggle".split(" ").concat(gT));function xie(g,b,C){var N=g.type||"unknown-event";g.currentTarget=C,Ht(N,b,void 0,g),g.currentTarget=null}function Eie(g,b){b=(b&4)!==0;for(var C=0;C<g.length;C++){var N=g[C],U=N.event;N=N.listeners;e:{var Y=void 0;if(b)for(var ee=N.length-1;0<=ee;ee--){var me=N[ee],Ae=me.instance,Ke=me.currentTarget;if(me=me.listener,Ae!==Y&&U.isPropagationStopped())break e;xie(U,me,Ke),Y=Ae}else for(ee=0;ee<N.length;ee++){if(me=N[ee],Ae=me.instance,Ke=me.currentTarget,me=me.listener,Ae!==Y&&U.isPropagationStopped())break e;xie(U,me,Ke),Y=Ae}}}if(xe)throw g=We,xe=!1,We=null,g}function Gi(g,b){var C=b[E5];C===void 0&&(C=b[E5]=new Set);var N=g+"__bubble";C.has(N)||(Sie(b,g,2,!1),C.add(N))}function g5(g,b,C){var N=0;b&&(N|=4),Sie(C,g,N,b)}var Wk="_reactListening"+Math.random().toString(36).slice(2);function yT(g){if(!g[Wk]){g[Wk]=!0,r.forEach(function(C){C!=="selectionchange"&&(s8e.has(C)||g5(C,!1,g),g5(C,!0,g))});var b=g.nodeType===9?g:g.ownerDocument;b===null||b[Wk]||(b[Wk]=!0,g5("selectionchange",!1,b))}}function Sie(g,b,C,N){switch(fi(b)){case 1:var U=Ce;break;case 4:U=Xe;break;default:U=qt}C=U.bind(null,b,C,g),U=void 0,!$r||b!=="touchstart"&&b!=="touchmove"&&b!=="wheel"||(U=!0),N?U!==void 0?g.addEventListener(b,C,{capture:!0,passive:U}):g.addEventListener(b,C,!0):U!==void 0?g.addEventListener(b,C,{passive:U}):g.addEventListener(b,C,!1)}function y5(g,b,C,N,U){var Y=N;if((b&1)===0&&(b&2)===0&&N!==null)e:for(;;){if(N===null)return;var ee=N.tag;if(ee===3||ee===4){var me=N.stateNode.containerInfo;if(me===U||me.nodeType===8&&me.parentNode===U)break;if(ee===4)for(ee=N.return;ee!==null;){var Ae=ee.tag;if((Ae===3||Ae===4)&&(Ae=ee.stateNode.containerInfo,Ae===U||Ae.nodeType===8&&Ae.parentNode===U))return;ee=ee.return}for(;me!==null;){if(ee=Lv(me),ee===null)return;if(Ae=ee.tag,Ae===5||Ae===6){N=Y=ee;continue e}me=me.parentNode}}N=N.return}yi(function(){var Ke=Y,gt=bs(C),bt=[];e:{var mt=_ie.get(g);if(mt!==void 0){var Vt=R_,Yt=g;switch(g){case"keypress":if(zc(C)===0)break e;case"keydown":case"keyup":Vt=W;break;case"focusin":Yt="focus",Vt=O_;break;case"focusout":Yt="blur",Vt=O_;break;case"beforeblur":case"afterblur":Vt=O_;break;case"click":if(C.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Vt=P_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Vt=$k;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Vt=Ze;break;case gie:case yie:case vie:Vt=nm;break;case bie:Vt=wi;break;case"scroll":Vt=a5;break;case"wheel":Vt=Fr;break;case"copy":case"cut":case"paste":Vt=jk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Vt=ae}var Qt=(b&4)!==0,$s=!Qt&&g==="scroll",je=Qt?mt!==null?mt+"Capture":null:mt;Qt=[];for(var Oe=Ke,He;Oe!==null;){He=Oe;var At=He.stateNode;if(He.tag===5&&At!==null&&(He=At,je!==null&&(At=xn(Oe,je),At!=null&&Qt.push(vT(Oe,At,He)))),$s)break;Oe=Oe.return}0<Qt.length&&(mt=new Vt(mt,Yt,null,C,gt),bt.push({event:mt,listeners:Qt}))}}if((b&7)===0){e:{if(mt=g==="mouseover"||g==="pointerover",Vt=g==="mouseout"||g==="pointerout",mt&&C!==cr&&(Yt=C.relatedTarget||C.fromElement)&&(Lv(Yt)||Yt[rm]))break e;if((Vt||mt)&&(mt=gt.window===gt?gt:(mt=gt.ownerDocument)?mt.defaultView||mt.parentWindow:window,Vt?(Yt=C.relatedTarget||C.toElement,Vt=Ke,Yt=Yt?Lv(Yt):null,Yt!==null&&($s=sn(Yt),Yt!==$s||Yt.tag!==5&&Yt.tag!==6)&&(Yt=null)):(Vt=null,Yt=Ke),Vt!==Yt)){if(Qt=P_,At="onMouseLeave",je="onMouseEnter",Oe="mouse",(g==="pointerout"||g==="pointerover")&&(Qt=ae,At="onPointerLeave",je="onPointerEnter",Oe="pointer"),$s=Vt==null?mt:z_(Vt),He=Yt==null?mt:z_(Yt),mt=new Qt(At,Oe+"leave",Vt,C,gt),mt.target=$s,mt.relatedTarget=He,At=null,Lv(gt)===Ke&&(Qt=new Qt(je,Oe+"enter",Yt,C,gt),Qt.target=He,Qt.relatedTarget=$s,At=Qt),$s=At,Vt&&Yt)t:{for(Qt=Vt,je=Yt,Oe=0,He=Qt;He;He=j_(He))Oe++;for(He=0,At=je;At;At=j_(At))He++;for(;0<Oe-He;)Qt=j_(Qt),Oe--;for(;0<He-Oe;)je=j_(je),He--;for(;Oe--;){if(Qt===je||je!==null&&Qt===je.alternate)break t;Qt=j_(Qt),je=j_(je)}Qt=null}else Qt=null;Vt!==null&&Tie(bt,mt,Vt,Qt,!1),Yt!==null&&$s!==null&&Tie(bt,$s,Yt,Qt,!0)}}e:{if(mt=Ke?z_(Ke):window,Vt=mt.nodeName&&mt.nodeName.toLowerCase(),Vt==="select"||Vt==="input"&&mt.type==="file")var nn=K5e;else if(iie(mt))if(oie)nn=Z5e;else{nn=Q5e;var vn=X5e}else(Vt=mt.nodeName)&&Vt.toLowerCase()==="input"&&(mt.type==="checkbox"||mt.type==="radio")&&(nn=J5e);if(nn&&(nn=nn(g,Ke))){sie(bt,nn,C,gt);break e}vn&&vn(g,mt,Ke),g==="focusout"&&(vn=mt._wrapperState)&&vn.controlled&&mt.type==="number"&&qe(mt,"number",mt.value)}switch(vn=Ke?z_(Ke):window,g){case"focusin":(iie(vn)||vn.contentEditable==="true")&&(L_=vn,d5=Ke,mT=null);break;case"focusout":mT=d5=L_=null;break;case"mousedown":f5=!0;break;case"contextmenu":case"mouseup":case"dragend":f5=!1,pie(bt,C,gt);break;case"selectionchange":if(n8e)break;case"keydown":case"keyup":pie(bt,C,gt)}var bn;if(Zs)e:{switch(g){case"compositionstart":var $n="onCompositionStart";break e;case"compositionend":$n="onCompositionEnd";break e;case"compositionupdate":$n="onCompositionUpdate";break e}$n=void 0}else $_?nie(g,C)&&($n="onCompositionEnd"):g==="keydown"&&C.keyCode===229&&($n="onCompositionStart");$n&&($v&&C.locale!=="ko"&&($_||$n!=="onCompositionStart"?$n==="onCompositionEnd"&&$_&&(bn=ho()):(Kn=gt,si="value"in Kn?Kn.value:Kn.textContent,$_=!0)),vn=Gk(Ke,$n),0<vn.length&&($n=new dT($n,g,null,C,gt),bt.push({event:$n,listeners:vn}),bn?$n.data=bn:(bn=rie(C),bn!==null&&($n.data=bn)))),(bn=ql?q5e(g,C):W5e(g,C))&&(Ke=Gk(Ke,"onBeforeInput"),0<Ke.length&&(gt=new dT("onBeforeInput","beforeinput",null,C,gt),bt.push({event:gt,listeners:Ke}),gt.data=bn))}Eie(bt,b)})}function vT(g,b,C){return{instance:g,listener:b,currentTarget:C}}function Gk(g,b){for(var C=b+"Capture",N=[];g!==null;){var U=g,Y=U.stateNode;U.tag===5&&Y!==null&&(U=Y,Y=xn(g,C),Y!=null&&N.unshift(vT(g,Y,U)),Y=xn(g,b),Y!=null&&N.push(vT(g,Y,U))),g=g.return}return N}function j_(g){if(g===null)return null;do g=g.return;while(g&&g.tag!==5);return g||null}function Tie(g,b,C,N,U){for(var Y=b._reactName,ee=[];C!==null&&C!==N;){var me=C,Ae=me.alternate,Ke=me.stateNode;if(Ae!==null&&Ae===N)break;me.tag===5&&Ke!==null&&(me=Ke,U?(Ae=xn(C,Y),Ae!=null&&ee.unshift(vT(C,Ae,me))):U||(Ae=xn(C,Y),Ae!=null&&ee.push(vT(C,Ae,me)))),C=C.return}ee.length!==0&&g.push({event:b,listeners:ee})}var o8e=/\r\n?/g,a8e=/\u0000|\uFFFD/g;function Cie(g){return(typeof g=="string"?g:""+g).replace(o8e,`
`).replace(a8e,"")}function Yk(g,b,C){if(b=Cie(b),Cie(g)!==b&&C)throw Error(n(425))}function Kk(){}var v5=null,b5=null;function _5(g,b){return g==="textarea"||g==="noscript"||typeof b.children=="string"||typeof b.children=="number"||typeof b.dangerouslySetInnerHTML=="object"&&b.dangerouslySetInnerHTML!==null&&b.dangerouslySetInnerHTML.__html!=null}var w5=typeof setTimeout=="function"?setTimeout:void 0,u8e=typeof clearTimeout=="function"?clearTimeout:void 0,Aie=typeof Promise=="function"?Promise:void 0,l8e=typeof queueMicrotask=="function"?queueMicrotask:typeof Aie<"u"?function(g){return Aie.resolve(null).then(g).catch(c8e)}:w5;function c8e(g){setTimeout(function(){throw g})}function x5(g,b){var C=b,N=0;do{var U=C.nextSibling;if(g.removeChild(C),U&&U.nodeType===8)if(C=U.data,C==="/$"){if(N===0){g.removeChild(U),Ku(b);return}N--}else C!=="$"&&C!=="$?"&&C!=="$!"||N++;C=U}while(C);Ku(b)}function Kg(g){for(;g!=null;g=g.nextSibling){var b=g.nodeType;if(b===1||b===3)break;if(b===8){if(b=g.data,b==="$"||b==="$!"||b==="$?")break;if(b==="/$")return null}}return g}function Iie(g){g=g.previousSibling;for(var b=0;g;){if(g.nodeType===8){var C=g.data;if(C==="$"||C==="$!"||C==="$?"){if(b===0)return g;b--}else C==="/$"&&b++}g=g.previousSibling}return null}var B_=Math.random().toString(36).slice(2),bh="__reactFiber$"+B_,bT="__reactProps$"+B_,rm="__reactContainer$"+B_,E5="__reactEvents$"+B_,d8e="__reactListeners$"+B_,f8e="__reactHandles$"+B_;function Lv(g){var b=g[bh];if(b)return b;for(var C=g.parentNode;C;){if(b=C[rm]||C[bh]){if(C=b.alternate,b.child!==null||C!==null&&C.child!==null)for(g=Iie(g);g!==null;){if(C=g[bh])return C;g=Iie(g)}return b}g=C,C=g.parentNode}return null}function _T(g){return g=g[bh]||g[rm],!g||g.tag!==5&&g.tag!==6&&g.tag!==13&&g.tag!==3?null:g}function z_(g){if(g.tag===5||g.tag===6)return g.stateNode;throw Error(n(33))}function Xk(g){return g[bT]||null}var S5=[],U_=-1;function Xg(g){return{current:g}}function Yi(g){0>U_||(g.current=S5[U_],S5[U_]=null,U_--)}function Fi(g,b){U_++,S5[U_]=g.current,g.current=b}var Qg={},Ra=Xg(Qg),Qu=Xg(!1),Fv=Qg;function V_(g,b){var C=g.type.contextTypes;if(!C)return Qg;var N=g.stateNode;if(N&&N.__reactInternalMemoizedUnmaskedChildContext===b)return N.__reactInternalMemoizedMaskedChildContext;var U={},Y;for(Y in C)U[Y]=b[Y];return N&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=b,g.__reactInternalMemoizedMaskedChildContext=U),U}function Ju(g){return g=g.childContextTypes,g!=null}function Qk(){Yi(Qu),Yi(Ra)}function Rie(g,b,C){if(Ra.current!==Qg)throw Error(n(168));Fi(Ra,b),Fi(Qu,C)}function kie(g,b,C){var N=g.stateNode;if(b=b.childContextTypes,typeof N.getChildContext!="function")return C;N=N.getChildContext();for(var U in N)if(!(U in b))throw Error(n(108,ue(g)||"Unknown",U));return L({},C,N)}function Jk(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||Qg,Fv=Ra.current,Fi(Ra,g),Fi(Qu,Qu.current),!0}function Pie(g,b,C){var N=g.stateNode;if(!N)throw Error(n(169));C?(g=kie(g,b,Fv),N.__reactInternalMemoizedMergedChildContext=g,Yi(Qu),Yi(Ra),Fi(Ra,g)):Yi(Qu),Fi(Qu,C)}var im=null,Zk=!1,T5=!1;function Nie(g){im===null?im=[g]:im.push(g)}function h8e(g){Zk=!0,Nie(g)}function Jg(){if(!T5&&im!==null){T5=!0;var g=0,b=rn;try{var C=im;for(rn=1;g<C.length;g++){var N=C[g];do N=N(!0);while(N!==null)}im=null,Zk=!1}catch(U){throw im!==null&&(im=im.slice(g+1)),dn(di,Jg),U}finally{rn=b,T5=!1}}return null}var H_=[],q_=0,eP=null,tP=0,Vc=[],Hc=0,jv=null,sm=1,om="";function Bv(g,b){H_[q_++]=tP,H_[q_++]=eP,eP=g,tP=b}function Oie(g,b,C){Vc[Hc++]=sm,Vc[Hc++]=om,Vc[Hc++]=jv,jv=g;var N=sm;g=om;var U=32-_s(N)-1;N&=~(1<<U),C+=1;var Y=32-_s(b)+U;if(30<Y){var ee=U-U%5;Y=(N&(1<<ee)-1).toString(32),N>>=ee,U-=ee,sm=1<<32-_s(b)+U|C<<U|N,om=Y+g}else sm=1<<Y|C<<U|N,om=g}function C5(g){g.return!==null&&(Bv(g,1),Oie(g,1,0))}function A5(g){for(;g===eP;)eP=H_[--q_],H_[q_]=null,tP=H_[--q_],H_[q_]=null;for(;g===jv;)jv=Vc[--Hc],Vc[Hc]=null,om=Vc[--Hc],Vc[Hc]=null,sm=Vc[--Hc],Vc[Hc]=null}var Wl=null,Gl=null,ns=!1,qd=null;function Die(g,b){var C=Yc(5,null,null,0);C.elementType="DELETED",C.stateNode=b,C.return=g,b=g.deletions,b===null?(g.deletions=[C],g.flags|=16):b.push(C)}function Mie(g,b){switch(g.tag){case 5:var C=g.type;return b=b.nodeType!==1||C.toLowerCase()!==b.nodeName.toLowerCase()?null:b,b!==null?(g.stateNode=b,Wl=g,Gl=Kg(b.firstChild),!0):!1;case 6:return b=g.pendingProps===""||b.nodeType!==3?null:b,b!==null?(g.stateNode=b,Wl=g,Gl=null,!0):!1;case 13:return b=b.nodeType!==8?null:b,b!==null?(C=jv!==null?{id:sm,overflow:om}:null,g.memoizedState={dehydrated:b,treeContext:C,retryLane:1073741824},C=Yc(18,null,null,0),C.stateNode=b,C.return=g,g.child=C,Wl=g,Gl=null,!0):!1;default:return!1}}function I5(g){return(g.mode&1)!==0&&(g.flags&128)===0}function R5(g){if(ns){var b=Gl;if(b){var C=b;if(!Mie(g,b)){if(I5(g))throw Error(n(418));b=Kg(C.nextSibling);var N=Wl;b&&Mie(g,b)?Die(N,C):(g.flags=g.flags&-4097|2,ns=!1,Wl=g)}}else{if(I5(g))throw Error(n(418));g.flags=g.flags&-4097|2,ns=!1,Wl=g}}}function $ie(g){for(g=g.return;g!==null&&g.tag!==5&&g.tag!==3&&g.tag!==13;)g=g.return;Wl=g}function nP(g){if(g!==Wl)return!1;if(!ns)return $ie(g),ns=!0,!1;var b;if((b=g.tag!==3)&&!(b=g.tag!==5)&&(b=g.type,b=b!=="head"&&b!=="body"&&!_5(g.type,g.memoizedProps)),b&&(b=Gl)){if(I5(g))throw Lie(),Error(n(418));for(;b;)Die(g,b),b=Kg(b.nextSibling)}if($ie(g),g.tag===13){if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(n(317));e:{for(g=g.nextSibling,b=0;g;){if(g.nodeType===8){var C=g.data;if(C==="/$"){if(b===0){Gl=Kg(g.nextSibling);break e}b--}else C!=="$"&&C!=="$!"&&C!=="$?"||b++}g=g.nextSibling}Gl=null}}else Gl=Wl?Kg(g.stateNode.nextSibling):null;return!0}function Lie(){for(var g=Gl;g;)g=Kg(g.nextSibling)}function W_(){Gl=Wl=null,ns=!1}function k5(g){qd===null?qd=[g]:qd.push(g)}var p8e=S.ReactCurrentBatchConfig;function wT(g,b,C){if(g=C.ref,g!==null&&typeof g!="function"&&typeof g!="object"){if(C._owner){if(C=C._owner,C){if(C.tag!==1)throw Error(n(309));var N=C.stateNode}if(!N)throw Error(n(147,g));var U=N,Y=""+g;return b!==null&&b.ref!==null&&typeof b.ref=="function"&&b.ref._stringRef===Y?b.ref:(b=function(ee){var me=U.refs;ee===null?delete me[Y]:me[Y]=ee},b._stringRef=Y,b)}if(typeof g!="string")throw Error(n(284));if(!C._owner)throw Error(n(290,g))}return g}function rP(g,b){throw g=Object.prototype.toString.call(b),Error(n(31,g==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":g))}function Fie(g){var b=g._init;return b(g._payload)}function jie(g){function b(je,Oe){if(g){var He=je.deletions;He===null?(je.deletions=[Oe],je.flags|=16):He.push(Oe)}}function C(je,Oe){if(!g)return null;for(;Oe!==null;)b(je,Oe),Oe=Oe.sibling;return null}function N(je,Oe){for(je=new Map;Oe!==null;)Oe.key!==null?je.set(Oe.key,Oe):je.set(Oe.index,Oe),Oe=Oe.sibling;return je}function U(je,Oe){return je=o0(je,Oe),je.index=0,je.sibling=null,je}function Y(je,Oe,He){return je.index=He,g?(He=je.alternate,He!==null?(He=He.index,He<Oe?(je.flags|=2,Oe):He):(je.flags|=2,Oe)):(je.flags|=1048576,Oe)}function ee(je){return g&&je.alternate===null&&(je.flags|=2),je}function me(je,Oe,He,At){return Oe===null||Oe.tag!==6?(Oe=w8(He,je.mode,At),Oe.return=je,Oe):(Oe=U(Oe,He),Oe.return=je,Oe)}function Ae(je,Oe,He,At){var nn=He.type;return nn===A?gt(je,Oe,He.props.children,At,He.key):Oe!==null&&(Oe.elementType===nn||typeof nn=="object"&&nn!==null&&nn.$$typeof===B&&Fie(nn)===Oe.type)?(At=U(Oe,He.props),At.ref=wT(je,Oe,He),At.return=je,At):(At=AP(He.type,He.key,He.props,null,je.mode,At),At.ref=wT(je,Oe,He),At.return=je,At)}function Ke(je,Oe,He,At){return Oe===null||Oe.tag!==4||Oe.stateNode.containerInfo!==He.containerInfo||Oe.stateNode.implementation!==He.implementation?(Oe=x8(He,je.mode,At),Oe.return=je,Oe):(Oe=U(Oe,He.children||[]),Oe.return=je,Oe)}function gt(je,Oe,He,At,nn){return Oe===null||Oe.tag!==7?(Oe=Yv(He,je.mode,At,nn),Oe.return=je,Oe):(Oe=U(Oe,He),Oe.return=je,Oe)}function bt(je,Oe,He){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number")return Oe=w8(""+Oe,je.mode,He),Oe.return=je,Oe;if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case E:return He=AP(Oe.type,Oe.key,Oe.props,null,je.mode,He),He.ref=wT(je,null,Oe),He.return=je,He;case T:return Oe=x8(Oe,je.mode,He),Oe.return=je,Oe;case B:var At=Oe._init;return bt(je,At(Oe._payload),He)}if(Qe(Oe)||K(Oe))return Oe=Yv(Oe,je.mode,He,null),Oe.return=je,Oe;rP(je,Oe)}return null}function mt(je,Oe,He,At){var nn=Oe!==null?Oe.key:null;if(typeof He=="string"&&He!==""||typeof He=="number")return nn!==null?null:me(je,Oe,""+He,At);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case E:return He.key===nn?Ae(je,Oe,He,At):null;case T:return He.key===nn?Ke(je,Oe,He,At):null;case B:return nn=He._init,mt(je,Oe,nn(He._payload),At)}if(Qe(He)||K(He))return nn!==null?null:gt(je,Oe,He,At,null);rP(je,He)}return null}function Vt(je,Oe,He,At,nn){if(typeof At=="string"&&At!==""||typeof At=="number")return je=je.get(He)||null,me(Oe,je,""+At,nn);if(typeof At=="object"&&At!==null){switch(At.$$typeof){case E:return je=je.get(At.key===null?He:At.key)||null,Ae(Oe,je,At,nn);case T:return je=je.get(At.key===null?He:At.key)||null,Ke(Oe,je,At,nn);case B:var vn=At._init;return Vt(je,Oe,He,vn(At._payload),nn)}if(Qe(At)||K(At))return je=je.get(He)||null,gt(Oe,je,At,nn,null);rP(Oe,At)}return null}function Yt(je,Oe,He,At){for(var nn=null,vn=null,bn=Oe,$n=Oe=0,zo=null;bn!==null&&$n<He.length;$n++){bn.index>$n?(zo=bn,bn=null):zo=bn.sibling;var Xr=mt(je,bn,He[$n],At);if(Xr===null){bn===null&&(bn=zo);break}g&&bn&&Xr.alternate===null&&b(je,bn),Oe=Y(Xr,Oe,$n),vn===null?nn=Xr:vn.sibling=Xr,vn=Xr,bn=zo}if($n===He.length)return C(je,bn),ns&&Bv(je,$n),nn;if(bn===null){for(;$n<He.length;$n++)bn=bt(je,He[$n],At),bn!==null&&(Oe=Y(bn,Oe,$n),vn===null?nn=bn:vn.sibling=bn,vn=bn);return ns&&Bv(je,$n),nn}for(bn=N(je,bn);$n<He.length;$n++)zo=Vt(bn,je,$n,He[$n],At),zo!==null&&(g&&zo.alternate!==null&&bn.delete(zo.key===null?$n:zo.key),Oe=Y(zo,Oe,$n),vn===null?nn=zo:vn.sibling=zo,vn=zo);return g&&bn.forEach(function(a0){return b(je,a0)}),ns&&Bv(je,$n),nn}function Qt(je,Oe,He,At){var nn=K(He);if(typeof nn!="function")throw Error(n(150));if(He=nn.call(He),He==null)throw Error(n(151));for(var vn=nn=null,bn=Oe,$n=Oe=0,zo=null,Xr=He.next();bn!==null&&!Xr.done;$n++,Xr=He.next()){bn.index>$n?(zo=bn,bn=null):zo=bn.sibling;var a0=mt(je,bn,Xr.value,At);if(a0===null){bn===null&&(bn=zo);break}g&&bn&&a0.alternate===null&&b(je,bn),Oe=Y(a0,Oe,$n),vn===null?nn=a0:vn.sibling=a0,vn=a0,bn=zo}if(Xr.done)return C(je,bn),ns&&Bv(je,$n),nn;if(bn===null){for(;!Xr.done;$n++,Xr=He.next())Xr=bt(je,Xr.value,At),Xr!==null&&(Oe=Y(Xr,Oe,$n),vn===null?nn=Xr:vn.sibling=Xr,vn=Xr);return ns&&Bv(je,$n),nn}for(bn=N(je,bn);!Xr.done;$n++,Xr=He.next())Xr=Vt(bn,je,$n,Xr.value,At),Xr!==null&&(g&&Xr.alternate!==null&&bn.delete(Xr.key===null?$n:Xr.key),Oe=Y(Xr,Oe,$n),vn===null?nn=Xr:vn.sibling=Xr,vn=Xr);return g&&bn.forEach(function(G8e){return b(je,G8e)}),ns&&Bv(je,$n),nn}function $s(je,Oe,He,At){if(typeof He=="object"&&He!==null&&He.type===A&&He.key===null&&(He=He.props.children),typeof He=="object"&&He!==null){switch(He.$$typeof){case E:e:{for(var nn=He.key,vn=Oe;vn!==null;){if(vn.key===nn){if(nn=He.type,nn===A){if(vn.tag===7){C(je,vn.sibling),Oe=U(vn,He.props.children),Oe.return=je,je=Oe;break e}}else if(vn.elementType===nn||typeof nn=="object"&&nn!==null&&nn.$$typeof===B&&Fie(nn)===vn.type){C(je,vn.sibling),Oe=U(vn,He.props),Oe.ref=wT(je,vn,He),Oe.return=je,je=Oe;break e}C(je,vn);break}else b(je,vn);vn=vn.sibling}He.type===A?(Oe=Yv(He.props.children,je.mode,At,He.key),Oe.return=je,je=Oe):(At=AP(He.type,He.key,He.props,null,je.mode,At),At.ref=wT(je,Oe,He),At.return=je,je=At)}return ee(je);case T:e:{for(vn=He.key;Oe!==null;){if(Oe.key===vn)if(Oe.tag===4&&Oe.stateNode.containerInfo===He.containerInfo&&Oe.stateNode.implementation===He.implementation){C(je,Oe.sibling),Oe=U(Oe,He.children||[]),Oe.return=je,je=Oe;break e}else{C(je,Oe);break}else b(je,Oe);Oe=Oe.sibling}Oe=x8(He,je.mode,At),Oe.return=je,je=Oe}return ee(je);case B:return vn=He._init,$s(je,Oe,vn(He._payload),At)}if(Qe(He))return Yt(je,Oe,He,At);if(K(He))return Qt(je,Oe,He,At);rP(je,He)}return typeof He=="string"&&He!==""||typeof He=="number"?(He=""+He,Oe!==null&&Oe.tag===6?(C(je,Oe.sibling),Oe=U(Oe,He),Oe.return=je,je=Oe):(C(je,Oe),Oe=w8(He,je.mode,At),Oe.return=je,je=Oe),ee(je)):C(je,Oe)}return $s}var G_=jie(!0),Bie=jie(!1),iP=Xg(null),sP=null,Y_=null,P5=null;function N5(){P5=Y_=sP=null}function O5(g){var b=iP.current;Yi(iP),g._currentValue=b}function D5(g,b,C){for(;g!==null;){var N=g.alternate;if((g.childLanes&b)!==b?(g.childLanes|=b,N!==null&&(N.childLanes|=b)):N!==null&&(N.childLanes&b)!==b&&(N.childLanes|=b),g===C)break;g=g.return}}function K_(g,b){sP=g,P5=Y_=null,g=g.dependencies,g!==null&&g.firstContext!==null&&((g.lanes&b)!==0&&(Zu=!0),g.firstContext=null)}function qc(g){var b=g._currentValue;if(P5!==g)if(g={context:g,memoizedValue:b,next:null},Y_===null){if(sP===null)throw Error(n(308));Y_=g,sP.dependencies={lanes:0,firstContext:g}}else Y_=Y_.next=g;return b}var zv=null;function M5(g){zv===null?zv=[g]:zv.push(g)}function zie(g,b,C,N){var U=b.interleaved;return U===null?(C.next=C,M5(b)):(C.next=U.next,U.next=C),b.interleaved=C,am(g,N)}function am(g,b){g.lanes|=b;var C=g.alternate;for(C!==null&&(C.lanes|=b),C=g,g=g.return;g!==null;)g.childLanes|=b,C=g.alternate,C!==null&&(C.childLanes|=b),C=g,g=g.return;return C.tag===3?C.stateNode:null}var Zg=!1;function $5(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uie(g,b){g=g.updateQueue,b.updateQueue===g&&(b.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function um(g,b){return{eventTime:g,lane:b,tag:0,payload:null,callback:null,next:null}}function e0(g,b,C){var N=g.updateQueue;if(N===null)return null;if(N=N.shared,(Hr&2)!==0){var U=N.pending;return U===null?b.next=b:(b.next=U.next,U.next=b),N.pending=b,am(g,C)}return U=N.interleaved,U===null?(b.next=b,M5(N)):(b.next=U.next,U.next=b),N.interleaved=b,am(g,C)}function oP(g,b,C){if(b=b.updateQueue,b!==null&&(b=b.shared,(C&4194240)!==0)){var N=b.lanes;N&=g.pendingLanes,C|=N,b.lanes=C,ur(g,C)}}function Vie(g,b){var C=g.updateQueue,N=g.alternate;if(N!==null&&(N=N.updateQueue,C===N)){var U=null,Y=null;if(C=C.firstBaseUpdate,C!==null){do{var ee={eventTime:C.eventTime,lane:C.lane,tag:C.tag,payload:C.payload,callback:C.callback,next:null};Y===null?U=Y=ee:Y=Y.next=ee,C=C.next}while(C!==null);Y===null?U=Y=b:Y=Y.next=b}else U=Y=b;C={baseState:N.baseState,firstBaseUpdate:U,lastBaseUpdate:Y,shared:N.shared,effects:N.effects},g.updateQueue=C;return}g=C.lastBaseUpdate,g===null?C.firstBaseUpdate=b:g.next=b,C.lastBaseUpdate=b}function aP(g,b,C,N){var U=g.updateQueue;Zg=!1;var Y=U.firstBaseUpdate,ee=U.lastBaseUpdate,me=U.shared.pending;if(me!==null){U.shared.pending=null;var Ae=me,Ke=Ae.next;Ae.next=null,ee===null?Y=Ke:ee.next=Ke,ee=Ae;var gt=g.alternate;gt!==null&&(gt=gt.updateQueue,me=gt.lastBaseUpdate,me!==ee&&(me===null?gt.firstBaseUpdate=Ke:me.next=Ke,gt.lastBaseUpdate=Ae))}if(Y!==null){var bt=U.baseState;ee=0,gt=Ke=Ae=null,me=Y;do{var mt=me.lane,Vt=me.eventTime;if((N&mt)===mt){gt!==null&&(gt=gt.next={eventTime:Vt,lane:0,tag:me.tag,payload:me.payload,callback:me.callback,next:null});e:{var Yt=g,Qt=me;switch(mt=b,Vt=C,Qt.tag){case 1:if(Yt=Qt.payload,typeof Yt=="function"){bt=Yt.call(Vt,bt,mt);break e}bt=Yt;break e;case 3:Yt.flags=Yt.flags&-65537|128;case 0:if(Yt=Qt.payload,mt=typeof Yt=="function"?Yt.call(Vt,bt,mt):Yt,mt==null)break e;bt=L({},bt,mt);break e;case 2:Zg=!0}}me.callback!==null&&me.lane!==0&&(g.flags|=64,mt=U.effects,mt===null?U.effects=[me]:mt.push(me))}else Vt={eventTime:Vt,lane:mt,tag:me.tag,payload:me.payload,callback:me.callback,next:null},gt===null?(Ke=gt=Vt,Ae=bt):gt=gt.next=Vt,ee|=mt;if(me=me.next,me===null){if(me=U.shared.pending,me===null)break;mt=me,me=mt.next,mt.next=null,U.lastBaseUpdate=mt,U.shared.pending=null}}while(!0);if(gt===null&&(Ae=bt),U.baseState=Ae,U.firstBaseUpdate=Ke,U.lastBaseUpdate=gt,b=U.shared.interleaved,b!==null){U=b;do ee|=U.lane,U=U.next;while(U!==b)}else Y===null&&(U.shared.lanes=0);Hv|=ee,g.lanes=ee,g.memoizedState=bt}}function Hie(g,b,C){if(g=b.effects,b.effects=null,g!==null)for(b=0;b<g.length;b++){var N=g[b],U=N.callback;if(U!==null){if(N.callback=null,N=C,typeof U!="function")throw Error(n(191,U));U.call(N)}}}var xT={},_h=Xg(xT),ET=Xg(xT),ST=Xg(xT);function Uv(g){if(g===xT)throw Error(n(174));return g}function L5(g,b){switch(Fi(ST,b),Fi(ET,g),Fi(_h,xT),g=b.nodeType,g){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:Ge(null,"");break;default:g=g===8?b.parentNode:b,b=g.namespaceURI||null,g=g.tagName,b=Ge(b,g)}Yi(_h),Fi(_h,b)}function X_(){Yi(_h),Yi(ET),Yi(ST)}function qie(g){Uv(ST.current);var b=Uv(_h.current),C=Ge(b,g.type);b!==C&&(Fi(ET,g),Fi(_h,C))}function F5(g){ET.current===g&&(Yi(_h),Yi(ET))}var ds=Xg(0);function uP(g){for(var b=g;b!==null;){if(b.tag===13){var C=b.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||C.data==="$?"||C.data==="$!"))return b}else if(b.tag===19&&b.memoizedProps.revealOrder!==void 0){if((b.flags&128)!==0)return b}else if(b.child!==null){b.child.return=b,b=b.child;continue}if(b===g)break;for(;b.sibling===null;){if(b.return===null||b.return===g)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}return null}var j5=[];function B5(){for(var g=0;g<j5.length;g++)j5[g]._workInProgressVersionPrimary=null;j5.length=0}var lP=S.ReactCurrentDispatcher,z5=S.ReactCurrentBatchConfig,Vv=0,fs=null,mo=null,jo=null,cP=!1,TT=!1,CT=0,m8e=0;function ka(){throw Error(n(321))}function U5(g,b){if(b===null)return!1;for(var C=0;C<b.length&&C<g.length;C++)if(!Hd(g[C],b[C]))return!1;return!0}function V5(g,b,C,N,U,Y){if(Vv=Y,fs=b,b.memoizedState=null,b.updateQueue=null,b.lanes=0,lP.current=g===null||g.memoizedState===null?b8e:_8e,g=C(N,U),TT){Y=0;do{if(TT=!1,CT=0,25<=Y)throw Error(n(301));Y+=1,jo=mo=null,b.updateQueue=null,lP.current=w8e,g=C(N,U)}while(TT)}if(lP.current=hP,b=mo!==null&&mo.next!==null,Vv=0,jo=mo=fs=null,cP=!1,b)throw Error(n(300));return g}function H5(){var g=CT!==0;return CT=0,g}function wh(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jo===null?fs.memoizedState=jo=g:jo=jo.next=g,jo}function Wc(){if(mo===null){var g=fs.alternate;g=g!==null?g.memoizedState:null}else g=mo.next;var b=jo===null?fs.memoizedState:jo.next;if(b!==null)jo=b,mo=g;else{if(g===null)throw Error(n(310));mo=g,g={memoizedState:mo.memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},jo===null?fs.memoizedState=jo=g:jo=jo.next=g}return jo}function AT(g,b){return typeof b=="function"?b(g):b}function q5(g){var b=Wc(),C=b.queue;if(C===null)throw Error(n(311));C.lastRenderedReducer=g;var N=mo,U=N.baseQueue,Y=C.pending;if(Y!==null){if(U!==null){var ee=U.next;U.next=Y.next,Y.next=ee}N.baseQueue=U=Y,C.pending=null}if(U!==null){Y=U.next,N=N.baseState;var me=ee=null,Ae=null,Ke=Y;do{var gt=Ke.lane;if((Vv&gt)===gt)Ae!==null&&(Ae=Ae.next={lane:0,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null}),N=Ke.hasEagerState?Ke.eagerState:g(N,Ke.action);else{var bt={lane:gt,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null};Ae===null?(me=Ae=bt,ee=N):Ae=Ae.next=bt,fs.lanes|=gt,Hv|=gt}Ke=Ke.next}while(Ke!==null&&Ke!==Y);Ae===null?ee=N:Ae.next=me,Hd(N,b.memoizedState)||(Zu=!0),b.memoizedState=N,b.baseState=ee,b.baseQueue=Ae,C.lastRenderedState=N}if(g=C.interleaved,g!==null){U=g;do Y=U.lane,fs.lanes|=Y,Hv|=Y,U=U.next;while(U!==g)}else U===null&&(C.lanes=0);return[b.memoizedState,C.dispatch]}function W5(g){var b=Wc(),C=b.queue;if(C===null)throw Error(n(311));C.lastRenderedReducer=g;var N=C.dispatch,U=C.pending,Y=b.memoizedState;if(U!==null){C.pending=null;var ee=U=U.next;do Y=g(Y,ee.action),ee=ee.next;while(ee!==U);Hd(Y,b.memoizedState)||(Zu=!0),b.memoizedState=Y,b.baseQueue===null&&(b.baseState=Y),C.lastRenderedState=Y}return[Y,N]}function Wie(){}function Gie(g,b){var C=fs,N=Wc(),U=b(),Y=!Hd(N.memoizedState,U);if(Y&&(N.memoizedState=U,Zu=!0),N=N.queue,G5(Xie.bind(null,C,N,g),[g]),N.getSnapshot!==b||Y||jo!==null&&jo.memoizedState.tag&1){if(C.flags|=2048,IT(9,Kie.bind(null,C,N,U,b),void 0,null),Bo===null)throw Error(n(349));(Vv&30)!==0||Yie(C,b,U)}return U}function Yie(g,b,C){g.flags|=16384,g={getSnapshot:b,value:C},b=fs.updateQueue,b===null?(b={lastEffect:null,stores:null},fs.updateQueue=b,b.stores=[g]):(C=b.stores,C===null?b.stores=[g]:C.push(g))}function Kie(g,b,C,N){b.value=C,b.getSnapshot=N,Qie(b)&&Jie(g)}function Xie(g,b,C){return C(function(){Qie(b)&&Jie(g)})}function Qie(g){var b=g.getSnapshot;g=g.value;try{var C=b();return!Hd(g,C)}catch{return!0}}function Jie(g){var b=am(g,1);b!==null&&Kd(b,g,1,-1)}function Zie(g){var b=wh();return typeof g=="function"&&(g=g()),b.memoizedState=b.baseState=g,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:AT,lastRenderedState:g},b.queue=g,g=g.dispatch=v8e.bind(null,fs,g),[b.memoizedState,g]}function IT(g,b,C,N){return g={tag:g,create:b,destroy:C,deps:N,next:null},b=fs.updateQueue,b===null?(b={lastEffect:null,stores:null},fs.updateQueue=b,b.lastEffect=g.next=g):(C=b.lastEffect,C===null?b.lastEffect=g.next=g:(N=C.next,C.next=g,g.next=N,b.lastEffect=g)),g}function ese(){return Wc().memoizedState}function dP(g,b,C,N){var U=wh();fs.flags|=g,U.memoizedState=IT(1|b,C,void 0,N===void 0?null:N)}function fP(g,b,C,N){var U=Wc();N=N===void 0?null:N;var Y=void 0;if(mo!==null){var ee=mo.memoizedState;if(Y=ee.destroy,N!==null&&U5(N,ee.deps)){U.memoizedState=IT(b,C,Y,N);return}}fs.flags|=g,U.memoizedState=IT(1|b,C,Y,N)}function tse(g,b){return dP(8390656,8,g,b)}function G5(g,b){return fP(2048,8,g,b)}function nse(g,b){return fP(4,2,g,b)}function rse(g,b){return fP(4,4,g,b)}function ise(g,b){if(typeof b=="function")return g=g(),b(g),function(){b(null)};if(b!=null)return g=g(),b.current=g,function(){b.current=null}}function sse(g,b,C){return C=C!=null?C.concat([g]):null,fP(4,4,ise.bind(null,b,g),C)}function Y5(){}function ose(g,b){var C=Wc();b=b===void 0?null:b;var N=C.memoizedState;return N!==null&&b!==null&&U5(b,N[1])?N[0]:(C.memoizedState=[g,b],g)}function ase(g,b){var C=Wc();b=b===void 0?null:b;var N=C.memoizedState;return N!==null&&b!==null&&U5(b,N[1])?N[0]:(g=g(),C.memoizedState=[g,b],g)}function use(g,b,C){return(Vv&21)===0?(g.baseState&&(g.baseState=!1,Zu=!0),g.memoizedState=C):(Hd(C,b)||(C=xt(),fs.lanes|=C,Hv|=C,g.baseState=!0),b)}function g8e(g,b){var C=rn;rn=C!==0&&4>C?C:4,g(!0);var N=z5.transition;z5.transition={};try{g(!1),b()}finally{rn=C,z5.transition=N}}function lse(){return Wc().memoizedState}function y8e(g,b,C){var N=i0(g);if(C={lane:N,action:C,hasEagerState:!1,eagerState:null,next:null},cse(g))dse(b,C);else if(C=zie(g,b,C,N),C!==null){var U=pu();Kd(C,g,N,U),fse(C,b,N)}}function v8e(g,b,C){var N=i0(g),U={lane:N,action:C,hasEagerState:!1,eagerState:null,next:null};if(cse(g))dse(b,U);else{var Y=g.alternate;if(g.lanes===0&&(Y===null||Y.lanes===0)&&(Y=b.lastRenderedReducer,Y!==null))try{var ee=b.lastRenderedState,me=Y(ee,C);if(U.hasEagerState=!0,U.eagerState=me,Hd(me,ee)){var Ae=b.interleaved;Ae===null?(U.next=U,M5(b)):(U.next=Ae.next,Ae.next=U),b.interleaved=U;return}}catch{}finally{}C=zie(g,b,U,N),C!==null&&(U=pu(),Kd(C,g,N,U),fse(C,b,N))}}function cse(g){var b=g.alternate;return g===fs||b!==null&&b===fs}function dse(g,b){TT=cP=!0;var C=g.pending;C===null?b.next=b:(b.next=C.next,C.next=b),g.pending=b}function fse(g,b,C){if((C&4194240)!==0){var N=b.lanes;N&=g.pendingLanes,C|=N,b.lanes=C,ur(g,C)}}var hP={readContext:qc,useCallback:ka,useContext:ka,useEffect:ka,useImperativeHandle:ka,useInsertionEffect:ka,useLayoutEffect:ka,useMemo:ka,useReducer:ka,useRef:ka,useState:ka,useDebugValue:ka,useDeferredValue:ka,useTransition:ka,useMutableSource:ka,useSyncExternalStore:ka,useId:ka,unstable_isNewReconciler:!1},b8e={readContext:qc,useCallback:function(g,b){return wh().memoizedState=[g,b===void 0?null:b],g},useContext:qc,useEffect:tse,useImperativeHandle:function(g,b,C){return C=C!=null?C.concat([g]):null,dP(4194308,4,ise.bind(null,b,g),C)},useLayoutEffect:function(g,b){return dP(4194308,4,g,b)},useInsertionEffect:function(g,b){return dP(4,2,g,b)},useMemo:function(g,b){var C=wh();return b=b===void 0?null:b,g=g(),C.memoizedState=[g,b],g},useReducer:function(g,b,C){var N=wh();return b=C!==void 0?C(b):b,N.memoizedState=N.baseState=b,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:b},N.queue=g,g=g.dispatch=y8e.bind(null,fs,g),[N.memoizedState,g]},useRef:function(g){var b=wh();return g={current:g},b.memoizedState=g},useState:Zie,useDebugValue:Y5,useDeferredValue:function(g){return wh().memoizedState=g},useTransition:function(){var g=Zie(!1),b=g[0];return g=g8e.bind(null,g[1]),wh().memoizedState=g,[b,g]},useMutableSource:function(){},useSyncExternalStore:function(g,b,C){var N=fs,U=wh();if(ns){if(C===void 0)throw Error(n(407));C=C()}else{if(C=b(),Bo===null)throw Error(n(349));(Vv&30)!==0||Yie(N,b,C)}U.memoizedState=C;var Y={value:C,getSnapshot:b};return U.queue=Y,tse(Xie.bind(null,N,Y,g),[g]),N.flags|=2048,IT(9,Kie.bind(null,N,Y,C,b),void 0,null),C},useId:function(){var g=wh(),b=Bo.identifierPrefix;if(ns){var C=om,N=sm;C=(N&~(1<<32-_s(N)-1)).toString(32)+C,b=":"+b+"R"+C,C=CT++,0<C&&(b+="H"+C.toString(32)),b+=":"}else C=m8e++,b=":"+b+"r"+C.toString(32)+":";return g.memoizedState=b},unstable_isNewReconciler:!1},_8e={readContext:qc,useCallback:ose,useContext:qc,useEffect:G5,useImperativeHandle:sse,useInsertionEffect:nse,useLayoutEffect:rse,useMemo:ase,useReducer:q5,useRef:ese,useState:function(){return q5(AT)},useDebugValue:Y5,useDeferredValue:function(g){var b=Wc();return use(b,mo.memoizedState,g)},useTransition:function(){var g=q5(AT)[0],b=Wc().memoizedState;return[g,b]},useMutableSource:Wie,useSyncExternalStore:Gie,useId:lse,unstable_isNewReconciler:!1},w8e={readContext:qc,useCallback:ose,useContext:qc,useEffect:G5,useImperativeHandle:sse,useInsertionEffect:nse,useLayoutEffect:rse,useMemo:ase,useReducer:W5,useRef:ese,useState:function(){return W5(AT)},useDebugValue:Y5,useDeferredValue:function(g){var b=Wc();return mo===null?b.memoizedState=g:use(b,mo.memoizedState,g)},useTransition:function(){var g=W5(AT)[0],b=Wc().memoizedState;return[g,b]},useMutableSource:Wie,useSyncExternalStore:Gie,useId:lse,unstable_isNewReconciler:!1};function Wd(g,b){if(g&&g.defaultProps){b=L({},b),g=g.defaultProps;for(var C in g)b[C]===void 0&&(b[C]=g[C]);return b}return b}function K5(g,b,C,N){b=g.memoizedState,C=C(N,b),C=C==null?b:L({},b,C),g.memoizedState=C,g.lanes===0&&(g.updateQueue.baseState=C)}var pP={isMounted:function(g){return(g=g._reactInternals)?sn(g)===g:!1},enqueueSetState:function(g,b,C){g=g._reactInternals;var N=pu(),U=i0(g),Y=um(N,U);Y.payload=b,C!=null&&(Y.callback=C),b=e0(g,Y,U),b!==null&&(Kd(b,g,U,N),oP(b,g,U))},enqueueReplaceState:function(g,b,C){g=g._reactInternals;var N=pu(),U=i0(g),Y=um(N,U);Y.tag=1,Y.payload=b,C!=null&&(Y.callback=C),b=e0(g,Y,U),b!==null&&(Kd(b,g,U,N),oP(b,g,U))},enqueueForceUpdate:function(g,b){g=g._reactInternals;var C=pu(),N=i0(g),U=um(C,N);U.tag=2,b!=null&&(U.callback=b),b=e0(g,U,N),b!==null&&(Kd(b,g,N,C),oP(b,g,N))}};function hse(g,b,C,N,U,Y,ee){return g=g.stateNode,typeof g.shouldComponentUpdate=="function"?g.shouldComponentUpdate(N,Y,ee):b.prototype&&b.prototype.isPureReactComponent?!pT(C,N)||!pT(U,Y):!0}function pse(g,b,C){var N=!1,U=Qg,Y=b.contextType;return typeof Y=="object"&&Y!==null?Y=qc(Y):(U=Ju(b)?Fv:Ra.current,N=b.contextTypes,Y=(N=N!=null)?V_(g,U):Qg),b=new b(C,Y),g.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=pP,g.stateNode=b,b._reactInternals=g,N&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=U,g.__reactInternalMemoizedMaskedChildContext=Y),b}function mse(g,b,C,N){g=b.state,typeof b.componentWillReceiveProps=="function"&&b.componentWillReceiveProps(C,N),typeof b.UNSAFE_componentWillReceiveProps=="function"&&b.UNSAFE_componentWillReceiveProps(C,N),b.state!==g&&pP.enqueueReplaceState(b,b.state,null)}function X5(g,b,C,N){var U=g.stateNode;U.props=C,U.state=g.memoizedState,U.refs={},$5(g);var Y=b.contextType;typeof Y=="object"&&Y!==null?U.context=qc(Y):(Y=Ju(b)?Fv:Ra.current,U.context=V_(g,Y)),U.state=g.memoizedState,Y=b.getDerivedStateFromProps,typeof Y=="function"&&(K5(g,b,Y,C),U.state=g.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(b=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),b!==U.state&&pP.enqueueReplaceState(U,U.state,null),aP(g,C,U,N),U.state=g.memoizedState),typeof U.componentDidMount=="function"&&(g.flags|=4194308)}function Q_(g,b){try{var C="",N=b;do C+=Z(N),N=N.return;while(N);var U=C}catch(Y){U=`
Error generating stack: `+Y.message+`
`+Y.stack}return{value:g,source:b,stack:U,digest:null}}function Q5(g,b,C){return{value:g,source:null,stack:C??null,digest:b??null}}function J5(g,b){try{console.error(b.value)}catch(C){setTimeout(function(){throw C})}}var x8e=typeof WeakMap=="function"?WeakMap:Map;function gse(g,b,C){C=um(-1,C),C.tag=3,C.payload={element:null};var N=b.value;return C.callback=function(){wP||(wP=!0,h8=N),J5(g,b)},C}function yse(g,b,C){C=um(-1,C),C.tag=3;var N=g.type.getDerivedStateFromError;if(typeof N=="function"){var U=b.value;C.payload=function(){return N(U)},C.callback=function(){J5(g,b)}}var Y=g.stateNode;return Y!==null&&typeof Y.componentDidCatch=="function"&&(C.callback=function(){J5(g,b),typeof N!="function"&&(n0===null?n0=new Set([this]):n0.add(this));var ee=b.stack;this.componentDidCatch(b.value,{componentStack:ee!==null?ee:""})}),C}function vse(g,b,C){var N=g.pingCache;if(N===null){N=g.pingCache=new x8e;var U=new Set;N.set(b,U)}else U=N.get(b),U===void 0&&(U=new Set,N.set(b,U));U.has(C)||(U.add(C),g=$8e.bind(null,g,b,C),b.then(g,g))}function bse(g){do{var b;if((b=g.tag===13)&&(b=g.memoizedState,b=b!==null?b.dehydrated!==null:!0),b)return g;g=g.return}while(g!==null);return null}function _se(g,b,C,N,U){return(g.mode&1)===0?(g===b?g.flags|=65536:(g.flags|=128,C.flags|=131072,C.flags&=-52805,C.tag===1&&(C.alternate===null?C.tag=17:(b=um(-1,1),b.tag=2,e0(C,b,1))),C.lanes|=1),g):(g.flags|=65536,g.lanes=U,g)}var E8e=S.ReactCurrentOwner,Zu=!1;function hu(g,b,C,N){b.child=g===null?Bie(b,null,C,N):G_(b,g.child,C,N)}function wse(g,b,C,N,U){C=C.render;var Y=b.ref;return K_(b,U),N=V5(g,b,C,N,Y,U),C=H5(),g!==null&&!Zu?(b.updateQueue=g.updateQueue,b.flags&=-2053,g.lanes&=~U,lm(g,b,U)):(ns&&C&&C5(b),b.flags|=1,hu(g,b,N,U),b.child)}function xse(g,b,C,N,U){if(g===null){var Y=C.type;return typeof Y=="function"&&!_8(Y)&&Y.defaultProps===void 0&&C.compare===null&&C.defaultProps===void 0?(b.tag=15,b.type=Y,Ese(g,b,Y,N,U)):(g=AP(C.type,null,N,b,b.mode,U),g.ref=b.ref,g.return=b,b.child=g)}if(Y=g.child,(g.lanes&U)===0){var ee=Y.memoizedProps;if(C=C.compare,C=C!==null?C:pT,C(ee,N)&&g.ref===b.ref)return lm(g,b,U)}return b.flags|=1,g=o0(Y,N),g.ref=b.ref,g.return=b,b.child=g}function Ese(g,b,C,N,U){if(g!==null){var Y=g.memoizedProps;if(pT(Y,N)&&g.ref===b.ref)if(Zu=!1,b.pendingProps=N=Y,(g.lanes&U)!==0)(g.flags&131072)!==0&&(Zu=!0);else return b.lanes=g.lanes,lm(g,b,U)}return Z5(g,b,C,N,U)}function Sse(g,b,C){var N=b.pendingProps,U=N.children,Y=g!==null?g.memoizedState:null;if(N.mode==="hidden")if((b.mode&1)===0)b.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fi(Z_,Yl),Yl|=C;else{if((C&1073741824)===0)return g=Y!==null?Y.baseLanes|C:C,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:g,cachePool:null,transitions:null},b.updateQueue=null,Fi(Z_,Yl),Yl|=g,null;b.memoizedState={baseLanes:0,cachePool:null,transitions:null},N=Y!==null?Y.baseLanes:C,Fi(Z_,Yl),Yl|=N}else Y!==null?(N=Y.baseLanes|C,b.memoizedState=null):N=C,Fi(Z_,Yl),Yl|=N;return hu(g,b,U,C),b.child}function Tse(g,b){var C=b.ref;(g===null&&C!==null||g!==null&&g.ref!==C)&&(b.flags|=512,b.flags|=2097152)}function Z5(g,b,C,N,U){var Y=Ju(C)?Fv:Ra.current;return Y=V_(b,Y),K_(b,U),C=V5(g,b,C,N,Y,U),N=H5(),g!==null&&!Zu?(b.updateQueue=g.updateQueue,b.flags&=-2053,g.lanes&=~U,lm(g,b,U)):(ns&&N&&C5(b),b.flags|=1,hu(g,b,C,U),b.child)}function Cse(g,b,C,N,U){if(Ju(C)){var Y=!0;Jk(b)}else Y=!1;if(K_(b,U),b.stateNode===null)gP(g,b),pse(b,C,N),X5(b,C,N,U),N=!0;else if(g===null){var ee=b.stateNode,me=b.memoizedProps;ee.props=me;var Ae=ee.context,Ke=C.contextType;typeof Ke=="object"&&Ke!==null?Ke=qc(Ke):(Ke=Ju(C)?Fv:Ra.current,Ke=V_(b,Ke));var gt=C.getDerivedStateFromProps,bt=typeof gt=="function"||typeof ee.getSnapshotBeforeUpdate=="function";bt||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(me!==N||Ae!==Ke)&&mse(b,ee,N,Ke),Zg=!1;var mt=b.memoizedState;ee.state=mt,aP(b,N,ee,U),Ae=b.memoizedState,me!==N||mt!==Ae||Qu.current||Zg?(typeof gt=="function"&&(K5(b,C,gt,N),Ae=b.memoizedState),(me=Zg||hse(b,C,me,N,mt,Ae,Ke))?(bt||typeof ee.UNSAFE_componentWillMount!="function"&&typeof ee.componentWillMount!="function"||(typeof ee.componentWillMount=="function"&&ee.componentWillMount(),typeof ee.UNSAFE_componentWillMount=="function"&&ee.UNSAFE_componentWillMount()),typeof ee.componentDidMount=="function"&&(b.flags|=4194308)):(typeof ee.componentDidMount=="function"&&(b.flags|=4194308),b.memoizedProps=N,b.memoizedState=Ae),ee.props=N,ee.state=Ae,ee.context=Ke,N=me):(typeof ee.componentDidMount=="function"&&(b.flags|=4194308),N=!1)}else{ee=b.stateNode,Uie(g,b),me=b.memoizedProps,Ke=b.type===b.elementType?me:Wd(b.type,me),ee.props=Ke,bt=b.pendingProps,mt=ee.context,Ae=C.contextType,typeof Ae=="object"&&Ae!==null?Ae=qc(Ae):(Ae=Ju(C)?Fv:Ra.current,Ae=V_(b,Ae));var Vt=C.getDerivedStateFromProps;(gt=typeof Vt=="function"||typeof ee.getSnapshotBeforeUpdate=="function")||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(me!==bt||mt!==Ae)&&mse(b,ee,N,Ae),Zg=!1,mt=b.memoizedState,ee.state=mt,aP(b,N,ee,U);var Yt=b.memoizedState;me!==bt||mt!==Yt||Qu.current||Zg?(typeof Vt=="function"&&(K5(b,C,Vt,N),Yt=b.memoizedState),(Ke=Zg||hse(b,C,Ke,N,mt,Yt,Ae)||!1)?(gt||typeof ee.UNSAFE_componentWillUpdate!="function"&&typeof ee.componentWillUpdate!="function"||(typeof ee.componentWillUpdate=="function"&&ee.componentWillUpdate(N,Yt,Ae),typeof ee.UNSAFE_componentWillUpdate=="function"&&ee.UNSAFE_componentWillUpdate(N,Yt,Ae)),typeof ee.componentDidUpdate=="function"&&(b.flags|=4),typeof ee.getSnapshotBeforeUpdate=="function"&&(b.flags|=1024)):(typeof ee.componentDidUpdate!="function"||me===g.memoizedProps&&mt===g.memoizedState||(b.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||me===g.memoizedProps&&mt===g.memoizedState||(b.flags|=1024),b.memoizedProps=N,b.memoizedState=Yt),ee.props=N,ee.state=Yt,ee.context=Ae,N=Ke):(typeof ee.componentDidUpdate!="function"||me===g.memoizedProps&&mt===g.memoizedState||(b.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||me===g.memoizedProps&&mt===g.memoizedState||(b.flags|=1024),N=!1)}return e8(g,b,C,N,Y,U)}function e8(g,b,C,N,U,Y){Tse(g,b);var ee=(b.flags&128)!==0;if(!N&&!ee)return U&&Pie(b,C,!1),lm(g,b,Y);N=b.stateNode,E8e.current=b;var me=ee&&typeof C.getDerivedStateFromError!="function"?null:N.render();return b.flags|=1,g!==null&&ee?(b.child=G_(b,g.child,null,Y),b.child=G_(b,null,me,Y)):hu(g,b,me,Y),b.memoizedState=N.state,U&&Pie(b,C,!0),b.child}function Ase(g){var b=g.stateNode;b.pendingContext?Rie(g,b.pendingContext,b.pendingContext!==b.context):b.context&&Rie(g,b.context,!1),L5(g,b.containerInfo)}function Ise(g,b,C,N,U){return W_(),k5(U),b.flags|=256,hu(g,b,C,N),b.child}var t8={dehydrated:null,treeContext:null,retryLane:0};function n8(g){return{baseLanes:g,cachePool:null,transitions:null}}function Rse(g,b,C){var N=b.pendingProps,U=ds.current,Y=!1,ee=(b.flags&128)!==0,me;if((me=ee)||(me=g!==null&&g.memoizedState===null?!1:(U&2)!==0),me?(Y=!0,b.flags&=-129):(g===null||g.memoizedState!==null)&&(U|=1),Fi(ds,U&1),g===null)return R5(b),g=b.memoizedState,g!==null&&(g=g.dehydrated,g!==null)?((b.mode&1)===0?b.lanes=1:g.data==="$!"?b.lanes=8:b.lanes=1073741824,null):(ee=N.children,g=N.fallback,Y?(N=b.mode,Y=b.child,ee={mode:"hidden",children:ee},(N&1)===0&&Y!==null?(Y.childLanes=0,Y.pendingProps=ee):Y=IP(ee,N,0,null),g=Yv(g,N,C,null),Y.return=b,g.return=b,Y.sibling=g,b.child=Y,b.child.memoizedState=n8(C),b.memoizedState=t8,g):r8(b,ee));if(U=g.memoizedState,U!==null&&(me=U.dehydrated,me!==null))return S8e(g,b,ee,N,me,U,C);if(Y){Y=N.fallback,ee=b.mode,U=g.child,me=U.sibling;var Ae={mode:"hidden",children:N.children};return(ee&1)===0&&b.child!==U?(N=b.child,N.childLanes=0,N.pendingProps=Ae,b.deletions=null):(N=o0(U,Ae),N.subtreeFlags=U.subtreeFlags&14680064),me!==null?Y=o0(me,Y):(Y=Yv(Y,ee,C,null),Y.flags|=2),Y.return=b,N.return=b,N.sibling=Y,b.child=N,N=Y,Y=b.child,ee=g.child.memoizedState,ee=ee===null?n8(C):{baseLanes:ee.baseLanes|C,cachePool:null,transitions:ee.transitions},Y.memoizedState=ee,Y.childLanes=g.childLanes&~C,b.memoizedState=t8,N}return Y=g.child,g=Y.sibling,N=o0(Y,{mode:"visible",children:N.children}),(b.mode&1)===0&&(N.lanes=C),N.return=b,N.sibling=null,g!==null&&(C=b.deletions,C===null?(b.deletions=[g],b.flags|=16):C.push(g)),b.child=N,b.memoizedState=null,N}function r8(g,b){return b=IP({mode:"visible",children:b},g.mode,0,null),b.return=g,g.child=b}function mP(g,b,C,N){return N!==null&&k5(N),G_(b,g.child,null,C),g=r8(b,b.pendingProps.children),g.flags|=2,b.memoizedState=null,g}function S8e(g,b,C,N,U,Y,ee){if(C)return b.flags&256?(b.flags&=-257,N=Q5(Error(n(422))),mP(g,b,ee,N)):b.memoizedState!==null?(b.child=g.child,b.flags|=128,null):(Y=N.fallback,U=b.mode,N=IP({mode:"visible",children:N.children},U,0,null),Y=Yv(Y,U,ee,null),Y.flags|=2,N.return=b,Y.return=b,N.sibling=Y,b.child=N,(b.mode&1)!==0&&G_(b,g.child,null,ee),b.child.memoizedState=n8(ee),b.memoizedState=t8,Y);if((b.mode&1)===0)return mP(g,b,ee,null);if(U.data==="$!"){if(N=U.nextSibling&&U.nextSibling.dataset,N)var me=N.dgst;return N=me,Y=Error(n(419)),N=Q5(Y,N,void 0),mP(g,b,ee,N)}if(me=(ee&g.childLanes)!==0,Zu||me){if(N=Bo,N!==null){switch(ee&-ee){case 4:U=2;break;case 16:U=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:U=32;break;case 536870912:U=268435456;break;default:U=0}U=(U&(N.suspendedLanes|ee))!==0?0:U,U!==0&&U!==Y.retryLane&&(Y.retryLane=U,am(g,U),Kd(N,g,U,-1))}return b8(),N=Q5(Error(n(421))),mP(g,b,ee,N)}return U.data==="$?"?(b.flags|=128,b.child=g.child,b=L8e.bind(null,g),U._reactRetry=b,null):(g=Y.treeContext,Gl=Kg(U.nextSibling),Wl=b,ns=!0,qd=null,g!==null&&(Vc[Hc++]=sm,Vc[Hc++]=om,Vc[Hc++]=jv,sm=g.id,om=g.overflow,jv=b),b=r8(b,N.children),b.flags|=4096,b)}function kse(g,b,C){g.lanes|=b;var N=g.alternate;N!==null&&(N.lanes|=b),D5(g.return,b,C)}function i8(g,b,C,N,U){var Y=g.memoizedState;Y===null?g.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:N,tail:C,tailMode:U}:(Y.isBackwards=b,Y.rendering=null,Y.renderingStartTime=0,Y.last=N,Y.tail=C,Y.tailMode=U)}function Pse(g,b,C){var N=b.pendingProps,U=N.revealOrder,Y=N.tail;if(hu(g,b,N.children,C),N=ds.current,(N&2)!==0)N=N&1|2,b.flags|=128;else{if(g!==null&&(g.flags&128)!==0)e:for(g=b.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&kse(g,C,b);else if(g.tag===19)kse(g,C,b);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===b)break e;for(;g.sibling===null;){if(g.return===null||g.return===b)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}N&=1}if(Fi(ds,N),(b.mode&1)===0)b.memoizedState=null;else switch(U){case"forwards":for(C=b.child,U=null;C!==null;)g=C.alternate,g!==null&&uP(g)===null&&(U=C),C=C.sibling;C=U,C===null?(U=b.child,b.child=null):(U=C.sibling,C.sibling=null),i8(b,!1,U,C,Y);break;case"backwards":for(C=null,U=b.child,b.child=null;U!==null;){if(g=U.alternate,g!==null&&uP(g)===null){b.child=U;break}g=U.sibling,U.sibling=C,C=U,U=g}i8(b,!0,C,null,Y);break;case"together":i8(b,!1,null,null,void 0);break;default:b.memoizedState=null}return b.child}function gP(g,b){(b.mode&1)===0&&g!==null&&(g.alternate=null,b.alternate=null,b.flags|=2)}function lm(g,b,C){if(g!==null&&(b.dependencies=g.dependencies),Hv|=b.lanes,(C&b.childLanes)===0)return null;if(g!==null&&b.child!==g.child)throw Error(n(153));if(b.child!==null){for(g=b.child,C=o0(g,g.pendingProps),b.child=C,C.return=b;g.sibling!==null;)g=g.sibling,C=C.sibling=o0(g,g.pendingProps),C.return=b;C.sibling=null}return b.child}function T8e(g,b,C){switch(b.tag){case 3:Ase(b),W_();break;case 5:qie(b);break;case 1:Ju(b.type)&&Jk(b);break;case 4:L5(b,b.stateNode.containerInfo);break;case 10:var N=b.type._context,U=b.memoizedProps.value;Fi(iP,N._currentValue),N._currentValue=U;break;case 13:if(N=b.memoizedState,N!==null)return N.dehydrated!==null?(Fi(ds,ds.current&1),b.flags|=128,null):(C&b.child.childLanes)!==0?Rse(g,b,C):(Fi(ds,ds.current&1),g=lm(g,b,C),g!==null?g.sibling:null);Fi(ds,ds.current&1);break;case 19:if(N=(C&b.childLanes)!==0,(g.flags&128)!==0){if(N)return Pse(g,b,C);b.flags|=128}if(U=b.memoizedState,U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),Fi(ds,ds.current),N)break;return null;case 22:case 23:return b.lanes=0,Sse(g,b,C)}return lm(g,b,C)}var Nse,s8,Ose,Dse;Nse=function(g,b){for(var C=b.child;C!==null;){if(C.tag===5||C.tag===6)g.appendChild(C.stateNode);else if(C.tag!==4&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===b)break;for(;C.sibling===null;){if(C.return===null||C.return===b)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},s8=function(){},Ose=function(g,b,C,N){var U=g.memoizedProps;if(U!==N){g=b.stateNode,Uv(_h.current);var Y=null;switch(C){case"input":U=we(g,U),N=we(g,N),Y=[];break;case"select":U=L({},U,{value:void 0}),N=L({},N,{value:void 0}),Y=[];break;case"textarea":U=Ve(g,U),N=Ve(g,N),Y=[];break;default:typeof U.onClick!="function"&&typeof N.onClick=="function"&&(g.onclick=Kk)}qn(C,N);var ee;C=null;for(Ke in U)if(!N.hasOwnProperty(Ke)&&U.hasOwnProperty(Ke)&&U[Ke]!=null)if(Ke==="style"){var me=U[Ke];for(ee in me)me.hasOwnProperty(ee)&&(C||(C={}),C[ee]="")}else Ke!=="dangerouslySetInnerHTML"&&Ke!=="children"&&Ke!=="suppressContentEditableWarning"&&Ke!=="suppressHydrationWarning"&&Ke!=="autoFocus"&&(i.hasOwnProperty(Ke)?Y||(Y=[]):(Y=Y||[]).push(Ke,null));for(Ke in N){var Ae=N[Ke];if(me=U!=null?U[Ke]:void 0,N.hasOwnProperty(Ke)&&Ae!==me&&(Ae!=null||me!=null))if(Ke==="style")if(me){for(ee in me)!me.hasOwnProperty(ee)||Ae&&Ae.hasOwnProperty(ee)||(C||(C={}),C[ee]="");for(ee in Ae)Ae.hasOwnProperty(ee)&&me[ee]!==Ae[ee]&&(C||(C={}),C[ee]=Ae[ee])}else C||(Y||(Y=[]),Y.push(Ke,C)),C=Ae;else Ke==="dangerouslySetInnerHTML"?(Ae=Ae?Ae.__html:void 0,me=me?me.__html:void 0,Ae!=null&&me!==Ae&&(Y=Y||[]).push(Ke,Ae)):Ke==="children"?typeof Ae!="string"&&typeof Ae!="number"||(Y=Y||[]).push(Ke,""+Ae):Ke!=="suppressContentEditableWarning"&&Ke!=="suppressHydrationWarning"&&(i.hasOwnProperty(Ke)?(Ae!=null&&Ke==="onScroll"&&Gi("scroll",g),Y||me===Ae||(Y=[])):(Y=Y||[]).push(Ke,Ae))}C&&(Y=Y||[]).push("style",C);var Ke=Y;(b.updateQueue=Ke)&&(b.flags|=4)}},Dse=function(g,b,C,N){C!==N&&(b.flags|=4)};function RT(g,b){if(!ns)switch(g.tailMode){case"hidden":b=g.tail;for(var C=null;b!==null;)b.alternate!==null&&(C=b),b=b.sibling;C===null?g.tail=null:C.sibling=null;break;case"collapsed":C=g.tail;for(var N=null;C!==null;)C.alternate!==null&&(N=C),C=C.sibling;N===null?b||g.tail===null?g.tail=null:g.tail.sibling=null:N.sibling=null}}function Pa(g){var b=g.alternate!==null&&g.alternate.child===g.child,C=0,N=0;if(b)for(var U=g.child;U!==null;)C|=U.lanes|U.childLanes,N|=U.subtreeFlags&14680064,N|=U.flags&14680064,U.return=g,U=U.sibling;else for(U=g.child;U!==null;)C|=U.lanes|U.childLanes,N|=U.subtreeFlags,N|=U.flags,U.return=g,U=U.sibling;return g.subtreeFlags|=N,g.childLanes=C,b}function C8e(g,b,C){var N=b.pendingProps;switch(A5(b),b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pa(b),null;case 1:return Ju(b.type)&&Qk(),Pa(b),null;case 3:return N=b.stateNode,X_(),Yi(Qu),Yi(Ra),B5(),N.pendingContext&&(N.context=N.pendingContext,N.pendingContext=null),(g===null||g.child===null)&&(nP(b)?b.flags|=4:g===null||g.memoizedState.isDehydrated&&(b.flags&256)===0||(b.flags|=1024,qd!==null&&(g8(qd),qd=null))),s8(g,b),Pa(b),null;case 5:F5(b);var U=Uv(ST.current);if(C=b.type,g!==null&&b.stateNode!=null)Ose(g,b,C,N,U),g.ref!==b.ref&&(b.flags|=512,b.flags|=2097152);else{if(!N){if(b.stateNode===null)throw Error(n(166));return Pa(b),null}if(g=Uv(_h.current),nP(b)){N=b.stateNode,C=b.type;var Y=b.memoizedProps;switch(N[bh]=b,N[bT]=Y,g=(b.mode&1)!==0,C){case"dialog":Gi("cancel",N),Gi("close",N);break;case"iframe":case"object":case"embed":Gi("load",N);break;case"video":case"audio":for(U=0;U<gT.length;U++)Gi(gT[U],N);break;case"source":Gi("error",N);break;case"img":case"image":case"link":Gi("error",N),Gi("load",N);break;case"details":Gi("toggle",N);break;case"input":De(N,Y),Gi("invalid",N);break;case"select":N._wrapperState={wasMultiple:!!Y.multiple},Gi("invalid",N);break;case"textarea":Se(N,Y),Gi("invalid",N)}qn(C,Y),U=null;for(var ee in Y)if(Y.hasOwnProperty(ee)){var me=Y[ee];ee==="children"?typeof me=="string"?N.textContent!==me&&(Y.suppressHydrationWarning!==!0&&Yk(N.textContent,me,g),U=["children",me]):typeof me=="number"&&N.textContent!==""+me&&(Y.suppressHydrationWarning!==!0&&Yk(N.textContent,me,g),U=["children",""+me]):i.hasOwnProperty(ee)&&me!=null&&ee==="onScroll"&&Gi("scroll",N)}switch(C){case"input":se(N),Te(N,Y,!0);break;case"textarea":se(N),It(N);break;case"select":case"option":break;default:typeof Y.onClick=="function"&&(N.onclick=Kk)}N=U,b.updateQueue=N,N!==null&&(b.flags|=4)}else{ee=U.nodeType===9?U:U.ownerDocument,g==="http://www.w3.org/1999/xhtml"&&(g=Re(C)),g==="http://www.w3.org/1999/xhtml"?C==="script"?(g=ee.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild)):typeof N.is=="string"?g=ee.createElement(C,{is:N.is}):(g=ee.createElement(C),C==="select"&&(ee=g,N.multiple?ee.multiple=!0:N.size&&(ee.size=N.size))):g=ee.createElementNS(g,C),g[bh]=b,g[bT]=N,Nse(g,b,!1,!1),b.stateNode=g;e:{switch(ee=lr(C,N),C){case"dialog":Gi("cancel",g),Gi("close",g),U=N;break;case"iframe":case"object":case"embed":Gi("load",g),U=N;break;case"video":case"audio":for(U=0;U<gT.length;U++)Gi(gT[U],g);U=N;break;case"source":Gi("error",g),U=N;break;case"img":case"image":case"link":Gi("error",g),Gi("load",g),U=N;break;case"details":Gi("toggle",g),U=N;break;case"input":De(g,N),U=we(g,N),Gi("invalid",g);break;case"option":U=N;break;case"select":g._wrapperState={wasMultiple:!!N.multiple},U=L({},N,{value:void 0}),Gi("invalid",g);break;case"textarea":Se(g,N),U=Ve(g,N),Gi("invalid",g);break;default:U=N}qn(C,U),me=U;for(Y in me)if(me.hasOwnProperty(Y)){var Ae=me[Y];Y==="style"?Mr(g,Ae):Y==="dangerouslySetInnerHTML"?(Ae=Ae?Ae.__html:void 0,Ae!=null&&ct(g,Ae)):Y==="children"?typeof Ae=="string"?(C!=="textarea"||Ae!=="")&&Mt(g,Ae):typeof Ae=="number"&&Mt(g,""+Ae):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(i.hasOwnProperty(Y)?Ae!=null&&Y==="onScroll"&&Gi("scroll",g):Ae!=null&&x(g,Y,Ae,ee))}switch(C){case"input":se(g),Te(g,N,!1);break;case"textarea":se(g),It(g);break;case"option":N.value!=null&&g.setAttribute("value",""+le(N.value));break;case"select":g.multiple=!!N.multiple,Y=N.value,Y!=null?Ue(g,!!N.multiple,Y,!1):N.defaultValue!=null&&Ue(g,!!N.multiple,N.defaultValue,!0);break;default:typeof U.onClick=="function"&&(g.onclick=Kk)}switch(C){case"button":case"input":case"select":case"textarea":N=!!N.autoFocus;break e;case"img":N=!0;break e;default:N=!1}}N&&(b.flags|=4)}b.ref!==null&&(b.flags|=512,b.flags|=2097152)}return Pa(b),null;case 6:if(g&&b.stateNode!=null)Dse(g,b,g.memoizedProps,N);else{if(typeof N!="string"&&b.stateNode===null)throw Error(n(166));if(C=Uv(ST.current),Uv(_h.current),nP(b)){if(N=b.stateNode,C=b.memoizedProps,N[bh]=b,(Y=N.nodeValue!==C)&&(g=Wl,g!==null))switch(g.tag){case 3:Yk(N.nodeValue,C,(g.mode&1)!==0);break;case 5:g.memoizedProps.suppressHydrationWarning!==!0&&Yk(N.nodeValue,C,(g.mode&1)!==0)}Y&&(b.flags|=4)}else N=(C.nodeType===9?C:C.ownerDocument).createTextNode(N),N[bh]=b,b.stateNode=N}return Pa(b),null;case 13:if(Yi(ds),N=b.memoizedState,g===null||g.memoizedState!==null&&g.memoizedState.dehydrated!==null){if(ns&&Gl!==null&&(b.mode&1)!==0&&(b.flags&128)===0)Lie(),W_(),b.flags|=98560,Y=!1;else if(Y=nP(b),N!==null&&N.dehydrated!==null){if(g===null){if(!Y)throw Error(n(318));if(Y=b.memoizedState,Y=Y!==null?Y.dehydrated:null,!Y)throw Error(n(317));Y[bh]=b}else W_(),(b.flags&128)===0&&(b.memoizedState=null),b.flags|=4;Pa(b),Y=!1}else qd!==null&&(g8(qd),qd=null),Y=!0;if(!Y)return b.flags&65536?b:null}return(b.flags&128)!==0?(b.lanes=C,b):(N=N!==null,N!==(g!==null&&g.memoizedState!==null)&&N&&(b.child.flags|=8192,(b.mode&1)!==0&&(g===null||(ds.current&1)!==0?go===0&&(go=3):b8())),b.updateQueue!==null&&(b.flags|=4),Pa(b),null);case 4:return X_(),s8(g,b),g===null&&yT(b.stateNode.containerInfo),Pa(b),null;case 10:return O5(b.type._context),Pa(b),null;case 17:return Ju(b.type)&&Qk(),Pa(b),null;case 19:if(Yi(ds),Y=b.memoizedState,Y===null)return Pa(b),null;if(N=(b.flags&128)!==0,ee=Y.rendering,ee===null)if(N)RT(Y,!1);else{if(go!==0||g!==null&&(g.flags&128)!==0)for(g=b.child;g!==null;){if(ee=uP(g),ee!==null){for(b.flags|=128,RT(Y,!1),N=ee.updateQueue,N!==null&&(b.updateQueue=N,b.flags|=4),b.subtreeFlags=0,N=C,C=b.child;C!==null;)Y=C,g=N,Y.flags&=14680066,ee=Y.alternate,ee===null?(Y.childLanes=0,Y.lanes=g,Y.child=null,Y.subtreeFlags=0,Y.memoizedProps=null,Y.memoizedState=null,Y.updateQueue=null,Y.dependencies=null,Y.stateNode=null):(Y.childLanes=ee.childLanes,Y.lanes=ee.lanes,Y.child=ee.child,Y.subtreeFlags=0,Y.deletions=null,Y.memoizedProps=ee.memoizedProps,Y.memoizedState=ee.memoizedState,Y.updateQueue=ee.updateQueue,Y.type=ee.type,g=ee.dependencies,Y.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),C=C.sibling;return Fi(ds,ds.current&1|2),b.child}g=g.sibling}Y.tail!==null&&Yn()>ew&&(b.flags|=128,N=!0,RT(Y,!1),b.lanes=4194304)}else{if(!N)if(g=uP(ee),g!==null){if(b.flags|=128,N=!0,C=g.updateQueue,C!==null&&(b.updateQueue=C,b.flags|=4),RT(Y,!0),Y.tail===null&&Y.tailMode==="hidden"&&!ee.alternate&&!ns)return Pa(b),null}else 2*Yn()-Y.renderingStartTime>ew&&C!==1073741824&&(b.flags|=128,N=!0,RT(Y,!1),b.lanes=4194304);Y.isBackwards?(ee.sibling=b.child,b.child=ee):(C=Y.last,C!==null?C.sibling=ee:b.child=ee,Y.last=ee)}return Y.tail!==null?(b=Y.tail,Y.rendering=b,Y.tail=b.sibling,Y.renderingStartTime=Yn(),b.sibling=null,C=ds.current,Fi(ds,N?C&1|2:C&1),b):(Pa(b),null);case 22:case 23:return v8(),N=b.memoizedState!==null,g!==null&&g.memoizedState!==null!==N&&(b.flags|=8192),N&&(b.mode&1)!==0?(Yl&1073741824)!==0&&(Pa(b),b.subtreeFlags&6&&(b.flags|=8192)):Pa(b),null;case 24:return null;case 25:return null}throw Error(n(156,b.tag))}function A8e(g,b){switch(A5(b),b.tag){case 1:return Ju(b.type)&&Qk(),g=b.flags,g&65536?(b.flags=g&-65537|128,b):null;case 3:return X_(),Yi(Qu),Yi(Ra),B5(),g=b.flags,(g&65536)!==0&&(g&128)===0?(b.flags=g&-65537|128,b):null;case 5:return F5(b),null;case 13:if(Yi(ds),g=b.memoizedState,g!==null&&g.dehydrated!==null){if(b.alternate===null)throw Error(n(340));W_()}return g=b.flags,g&65536?(b.flags=g&-65537|128,b):null;case 19:return Yi(ds),null;case 4:return X_(),null;case 10:return O5(b.type._context),null;case 22:case 23:return v8(),null;case 24:return null;default:return null}}var yP=!1,Na=!1,I8e=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function J_(g,b){var C=g.ref;if(C!==null)if(typeof C=="function")try{C(null)}catch(N){ws(g,b,N)}else C.current=null}function o8(g,b,C){try{C()}catch(N){ws(g,b,N)}}var Mse=!1;function R8e(g,b){if(v5=pe,g=hie(),c5(g)){if("selectionStart"in g)var C={start:g.selectionStart,end:g.selectionEnd};else e:{C=(C=g.ownerDocument)&&C.defaultView||window;var N=C.getSelection&&C.getSelection();if(N&&N.rangeCount!==0){C=N.anchorNode;var U=N.anchorOffset,Y=N.focusNode;N=N.focusOffset;try{C.nodeType,Y.nodeType}catch{C=null;break e}var ee=0,me=-1,Ae=-1,Ke=0,gt=0,bt=g,mt=null;t:for(;;){for(var Vt;bt!==C||U!==0&&bt.nodeType!==3||(me=ee+U),bt!==Y||N!==0&&bt.nodeType!==3||(Ae=ee+N),bt.nodeType===3&&(ee+=bt.nodeValue.length),(Vt=bt.firstChild)!==null;)mt=bt,bt=Vt;for(;;){if(bt===g)break t;if(mt===C&&++Ke===U&&(me=ee),mt===Y&&++gt===N&&(Ae=ee),(Vt=bt.nextSibling)!==null)break;bt=mt,mt=bt.parentNode}bt=Vt}C=me===-1||Ae===-1?null:{start:me,end:Ae}}else C=null}C=C||{start:0,end:0}}else C=null;for(b5={focusedElem:g,selectionRange:C},pe=!1,Wt=b;Wt!==null;)if(b=Wt,g=b.child,(b.subtreeFlags&1028)!==0&&g!==null)g.return=b,Wt=g;else for(;Wt!==null;){b=Wt;try{var Yt=b.alternate;if((b.flags&1024)!==0)switch(b.tag){case 0:case 11:case 15:break;case 1:if(Yt!==null){var Qt=Yt.memoizedProps,$s=Yt.memoizedState,je=b.stateNode,Oe=je.getSnapshotBeforeUpdate(b.elementType===b.type?Qt:Wd(b.type,Qt),$s);je.__reactInternalSnapshotBeforeUpdate=Oe}break;case 3:var He=b.stateNode.containerInfo;He.nodeType===1?He.textContent="":He.nodeType===9&&He.documentElement&&He.removeChild(He.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(At){ws(b,b.return,At)}if(g=b.sibling,g!==null){g.return=b.return,Wt=g;break}Wt=b.return}return Yt=Mse,Mse=!1,Yt}function kT(g,b,C){var N=b.updateQueue;if(N=N!==null?N.lastEffect:null,N!==null){var U=N=N.next;do{if((U.tag&g)===g){var Y=U.destroy;U.destroy=void 0,Y!==void 0&&o8(b,C,Y)}U=U.next}while(U!==N)}}function vP(g,b){if(b=b.updateQueue,b=b!==null?b.lastEffect:null,b!==null){var C=b=b.next;do{if((C.tag&g)===g){var N=C.create;C.destroy=N()}C=C.next}while(C!==b)}}function a8(g){var b=g.ref;if(b!==null){var C=g.stateNode;switch(g.tag){case 5:g=C;break;default:g=C}typeof b=="function"?b(g):b.current=g}}function $se(g){var b=g.alternate;b!==null&&(g.alternate=null,$se(b)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(b=g.stateNode,b!==null&&(delete b[bh],delete b[bT],delete b[E5],delete b[d8e],delete b[f8e])),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}function Lse(g){return g.tag===5||g.tag===3||g.tag===4}function Fse(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||Lse(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.flags&2||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(g.flags&2))return g.stateNode}}function u8(g,b,C){var N=g.tag;if(N===5||N===6)g=g.stateNode,b?C.nodeType===8?C.parentNode.insertBefore(g,b):C.insertBefore(g,b):(C.nodeType===8?(b=C.parentNode,b.insertBefore(g,C)):(b=C,b.appendChild(g)),C=C._reactRootContainer,C!=null||b.onclick!==null||(b.onclick=Kk));else if(N!==4&&(g=g.child,g!==null))for(u8(g,b,C),g=g.sibling;g!==null;)u8(g,b,C),g=g.sibling}function l8(g,b,C){var N=g.tag;if(N===5||N===6)g=g.stateNode,b?C.insertBefore(g,b):C.appendChild(g);else if(N!==4&&(g=g.child,g!==null))for(l8(g,b,C),g=g.sibling;g!==null;)l8(g,b,C),g=g.sibling}var ra=null,Gd=!1;function t0(g,b,C){for(C=C.child;C!==null;)jse(g,b,C),C=C.sibling}function jse(g,b,C){if(_i&&typeof _i.onCommitFiberUnmount=="function")try{_i.onCommitFiberUnmount(Xs,C)}catch{}switch(C.tag){case 5:Na||J_(C,b);case 6:var N=ra,U=Gd;ra=null,t0(g,b,C),ra=N,Gd=U,ra!==null&&(Gd?(g=ra,C=C.stateNode,g.nodeType===8?g.parentNode.removeChild(C):g.removeChild(C)):ra.removeChild(C.stateNode));break;case 18:ra!==null&&(Gd?(g=ra,C=C.stateNode,g.nodeType===8?x5(g.parentNode,C):g.nodeType===1&&x5(g,C),Ku(g)):x5(ra,C.stateNode));break;case 4:N=ra,U=Gd,ra=C.stateNode.containerInfo,Gd=!0,t0(g,b,C),ra=N,Gd=U;break;case 0:case 11:case 14:case 15:if(!Na&&(N=C.updateQueue,N!==null&&(N=N.lastEffect,N!==null))){U=N=N.next;do{var Y=U,ee=Y.destroy;Y=Y.tag,ee!==void 0&&((Y&2)!==0||(Y&4)!==0)&&o8(C,b,ee),U=U.next}while(U!==N)}t0(g,b,C);break;case 1:if(!Na&&(J_(C,b),N=C.stateNode,typeof N.componentWillUnmount=="function"))try{N.props=C.memoizedProps,N.state=C.memoizedState,N.componentWillUnmount()}catch(me){ws(C,b,me)}t0(g,b,C);break;case 21:t0(g,b,C);break;case 22:C.mode&1?(Na=(N=Na)||C.memoizedState!==null,t0(g,b,C),Na=N):t0(g,b,C);break;default:t0(g,b,C)}}function Bse(g){var b=g.updateQueue;if(b!==null){g.updateQueue=null;var C=g.stateNode;C===null&&(C=g.stateNode=new I8e),b.forEach(function(N){var U=F8e.bind(null,g,N);C.has(N)||(C.add(N),N.then(U,U))})}}function Yd(g,b){var C=b.deletions;if(C!==null)for(var N=0;N<C.length;N++){var U=C[N];try{var Y=g,ee=b,me=ee;e:for(;me!==null;){switch(me.tag){case 5:ra=me.stateNode,Gd=!1;break e;case 3:ra=me.stateNode.containerInfo,Gd=!0;break e;case 4:ra=me.stateNode.containerInfo,Gd=!0;break e}me=me.return}if(ra===null)throw Error(n(160));jse(Y,ee,U),ra=null,Gd=!1;var Ae=U.alternate;Ae!==null&&(Ae.return=null),U.return=null}catch(Ke){ws(U,b,Ke)}}if(b.subtreeFlags&12854)for(b=b.child;b!==null;)zse(b,g),b=b.sibling}function zse(g,b){var C=g.alternate,N=g.flags;switch(g.tag){case 0:case 11:case 14:case 15:if(Yd(b,g),xh(g),N&4){try{kT(3,g,g.return),vP(3,g)}catch(Qt){ws(g,g.return,Qt)}try{kT(5,g,g.return)}catch(Qt){ws(g,g.return,Qt)}}break;case 1:Yd(b,g),xh(g),N&512&&C!==null&&J_(C,C.return);break;case 5:if(Yd(b,g),xh(g),N&512&&C!==null&&J_(C,C.return),g.flags&32){var U=g.stateNode;try{Mt(U,"")}catch(Qt){ws(g,g.return,Qt)}}if(N&4&&(U=g.stateNode,U!=null)){var Y=g.memoizedProps,ee=C!==null?C.memoizedProps:Y,me=g.type,Ae=g.updateQueue;if(g.updateQueue=null,Ae!==null)try{me==="input"&&Y.type==="radio"&&Y.name!=null&&Le(U,Y),lr(me,ee);var Ke=lr(me,Y);for(ee=0;ee<Ae.length;ee+=2){var gt=Ae[ee],bt=Ae[ee+1];gt==="style"?Mr(U,bt):gt==="dangerouslySetInnerHTML"?ct(U,bt):gt==="children"?Mt(U,bt):x(U,gt,bt,Ke)}switch(me){case"input":Ne(U,Y);break;case"textarea":it(U,Y);break;case"select":var mt=U._wrapperState.wasMultiple;U._wrapperState.wasMultiple=!!Y.multiple;var Vt=Y.value;Vt!=null?Ue(U,!!Y.multiple,Vt,!1):mt!==!!Y.multiple&&(Y.defaultValue!=null?Ue(U,!!Y.multiple,Y.defaultValue,!0):Ue(U,!!Y.multiple,Y.multiple?[]:"",!1))}U[bT]=Y}catch(Qt){ws(g,g.return,Qt)}}break;case 6:if(Yd(b,g),xh(g),N&4){if(g.stateNode===null)throw Error(n(162));U=g.stateNode,Y=g.memoizedProps;try{U.nodeValue=Y}catch(Qt){ws(g,g.return,Qt)}}break;case 3:if(Yd(b,g),xh(g),N&4&&C!==null&&C.memoizedState.isDehydrated)try{Ku(b.containerInfo)}catch(Qt){ws(g,g.return,Qt)}break;case 4:Yd(b,g),xh(g);break;case 13:Yd(b,g),xh(g),U=g.child,U.flags&8192&&(Y=U.memoizedState!==null,U.stateNode.isHidden=Y,!Y||U.alternate!==null&&U.alternate.memoizedState!==null||(f8=Yn())),N&4&&Bse(g);break;case 22:if(gt=C!==null&&C.memoizedState!==null,g.mode&1?(Na=(Ke=Na)||gt,Yd(b,g),Na=Ke):Yd(b,g),xh(g),N&8192){if(Ke=g.memoizedState!==null,(g.stateNode.isHidden=Ke)&&!gt&&(g.mode&1)!==0)for(Wt=g,gt=g.child;gt!==null;){for(bt=Wt=gt;Wt!==null;){switch(mt=Wt,Vt=mt.child,mt.tag){case 0:case 11:case 14:case 15:kT(4,mt,mt.return);break;case 1:J_(mt,mt.return);var Yt=mt.stateNode;if(typeof Yt.componentWillUnmount=="function"){N=mt,C=mt.return;try{b=N,Yt.props=b.memoizedProps,Yt.state=b.memoizedState,Yt.componentWillUnmount()}catch(Qt){ws(N,C,Qt)}}break;case 5:J_(mt,mt.return);break;case 22:if(mt.memoizedState!==null){Hse(bt);continue}}Vt!==null?(Vt.return=mt,Wt=Vt):Hse(bt)}gt=gt.sibling}e:for(gt=null,bt=g;;){if(bt.tag===5){if(gt===null){gt=bt;try{U=bt.stateNode,Ke?(Y=U.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none"):(me=bt.stateNode,Ae=bt.memoizedProps.style,ee=Ae!=null&&Ae.hasOwnProperty("display")?Ae.display:null,me.style.display=xr("display",ee))}catch(Qt){ws(g,g.return,Qt)}}}else if(bt.tag===6){if(gt===null)try{bt.stateNode.nodeValue=Ke?"":bt.memoizedProps}catch(Qt){ws(g,g.return,Qt)}}else if((bt.tag!==22&&bt.tag!==23||bt.memoizedState===null||bt===g)&&bt.child!==null){bt.child.return=bt,bt=bt.child;continue}if(bt===g)break e;for(;bt.sibling===null;){if(bt.return===null||bt.return===g)break e;gt===bt&&(gt=null),bt=bt.return}gt===bt&&(gt=null),bt.sibling.return=bt.return,bt=bt.sibling}}break;case 19:Yd(b,g),xh(g),N&4&&Bse(g);break;case 21:break;default:Yd(b,g),xh(g)}}function xh(g){var b=g.flags;if(b&2){try{e:{for(var C=g.return;C!==null;){if(Lse(C)){var N=C;break e}C=C.return}throw Error(n(160))}switch(N.tag){case 5:var U=N.stateNode;N.flags&32&&(Mt(U,""),N.flags&=-33);var Y=Fse(g);l8(g,Y,U);break;case 3:case 4:var ee=N.stateNode.containerInfo,me=Fse(g);u8(g,me,ee);break;default:throw Error(n(161))}}catch(Ae){ws(g,g.return,Ae)}g.flags&=-3}b&4096&&(g.flags&=-4097)}function k8e(g,b,C){Wt=g,Use(g)}function Use(g,b,C){for(var N=(g.mode&1)!==0;Wt!==null;){var U=Wt,Y=U.child;if(U.tag===22&&N){var ee=U.memoizedState!==null||yP;if(!ee){var me=U.alternate,Ae=me!==null&&me.memoizedState!==null||Na;me=yP;var Ke=Na;if(yP=ee,(Na=Ae)&&!Ke)for(Wt=U;Wt!==null;)ee=Wt,Ae=ee.child,ee.tag===22&&ee.memoizedState!==null?qse(U):Ae!==null?(Ae.return=ee,Wt=Ae):qse(U);for(;Y!==null;)Wt=Y,Use(Y),Y=Y.sibling;Wt=U,yP=me,Na=Ke}Vse(g)}else(U.subtreeFlags&8772)!==0&&Y!==null?(Y.return=U,Wt=Y):Vse(g)}}function Vse(g){for(;Wt!==null;){var b=Wt;if((b.flags&8772)!==0){var C=b.alternate;try{if((b.flags&8772)!==0)switch(b.tag){case 0:case 11:case 15:Na||vP(5,b);break;case 1:var N=b.stateNode;if(b.flags&4&&!Na)if(C===null)N.componentDidMount();else{var U=b.elementType===b.type?C.memoizedProps:Wd(b.type,C.memoizedProps);N.componentDidUpdate(U,C.memoizedState,N.__reactInternalSnapshotBeforeUpdate)}var Y=b.updateQueue;Y!==null&&Hie(b,Y,N);break;case 3:var ee=b.updateQueue;if(ee!==null){if(C=null,b.child!==null)switch(b.child.tag){case 5:C=b.child.stateNode;break;case 1:C=b.child.stateNode}Hie(b,ee,C)}break;case 5:var me=b.stateNode;if(C===null&&b.flags&4){C=me;var Ae=b.memoizedProps;switch(b.type){case"button":case"input":case"select":case"textarea":Ae.autoFocus&&C.focus();break;case"img":Ae.src&&(C.src=Ae.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(b.memoizedState===null){var Ke=b.alternate;if(Ke!==null){var gt=Ke.memoizedState;if(gt!==null){var bt=gt.dehydrated;bt!==null&&Ku(bt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Na||b.flags&512&&a8(b)}catch(mt){ws(b,b.return,mt)}}if(b===g){Wt=null;break}if(C=b.sibling,C!==null){C.return=b.return,Wt=C;break}Wt=b.return}}function Hse(g){for(;Wt!==null;){var b=Wt;if(b===g){Wt=null;break}var C=b.sibling;if(C!==null){C.return=b.return,Wt=C;break}Wt=b.return}}function qse(g){for(;Wt!==null;){var b=Wt;try{switch(b.tag){case 0:case 11:case 15:var C=b.return;try{vP(4,b)}catch(Ae){ws(b,C,Ae)}break;case 1:var N=b.stateNode;if(typeof N.componentDidMount=="function"){var U=b.return;try{N.componentDidMount()}catch(Ae){ws(b,U,Ae)}}var Y=b.return;try{a8(b)}catch(Ae){ws(b,Y,Ae)}break;case 5:var ee=b.return;try{a8(b)}catch(Ae){ws(b,ee,Ae)}}}catch(Ae){ws(b,b.return,Ae)}if(b===g){Wt=null;break}var me=b.sibling;if(me!==null){me.return=b.return,Wt=me;break}Wt=b.return}}var P8e=Math.ceil,bP=S.ReactCurrentDispatcher,c8=S.ReactCurrentOwner,Gc=S.ReactCurrentBatchConfig,Hr=0,Bo=null,eo=null,ia=0,Yl=0,Z_=Xg(0),go=0,PT=null,Hv=0,_P=0,d8=0,NT=null,el=null,f8=0,ew=1/0,cm=null,wP=!1,h8=null,n0=null,xP=!1,r0=null,EP=0,OT=0,p8=null,SP=-1,TP=0;function pu(){return(Hr&6)!==0?Yn():SP!==-1?SP:SP=Yn()}function i0(g){return(g.mode&1)===0?1:(Hr&2)!==0&&ia!==0?ia&-ia:p8e.transition!==null?(TP===0&&(TP=xt()),TP):(g=rn,g!==0||(g=window.event,g=g===void 0?16:fi(g.type)),g)}function Kd(g,b,C,N){if(50<OT)throw OT=0,p8=null,Error(n(185));On(g,C,N),((Hr&2)===0||g!==Bo)&&(g===Bo&&((Hr&2)===0&&(_P|=C),go===4&&s0(g,ia)),tl(g,N),C===1&&Hr===0&&(b.mode&1)===0&&(ew=Yn()+500,Zk&&Jg()))}function tl(g,b){var C=g.callbackNode;pt(g,b);var N=nt(g,g===Bo?ia:0);if(N===0)C!==null&&Sr(C),g.callbackNode=null,g.callbackPriority=0;else if(b=N&-N,g.callbackPriority!==b){if(C!=null&&Sr(C),b===1)g.tag===0?h8e(Gse.bind(null,g)):Nie(Gse.bind(null,g)),l8e(function(){(Hr&6)===0&&Jg()}),C=null;else{switch(Kr(N)){case 1:C=di;break;case 4:C=Ks;break;case 16:C=Oi;break;case 536870912:C=co;break;default:C=Oi}C=toe(C,Wse.bind(null,g))}g.callbackPriority=b,g.callbackNode=C}}function Wse(g,b){if(SP=-1,TP=0,(Hr&6)!==0)throw Error(n(327));var C=g.callbackNode;if(tw()&&g.callbackNode!==C)return null;var N=nt(g,g===Bo?ia:0);if(N===0)return null;if((N&30)!==0||(N&g.expiredLanes)!==0||b)b=CP(g,N);else{b=N;var U=Hr;Hr|=2;var Y=Kse();(Bo!==g||ia!==b)&&(cm=null,ew=Yn()+500,Wv(g,b));do try{D8e();break}catch(me){Yse(g,me)}while(!0);N5(),bP.current=Y,Hr=U,eo!==null?b=0:(Bo=null,ia=0,b=go)}if(b!==0){if(b===2&&(U=ht(g),U!==0&&(N=U,b=m8(g,U))),b===1)throw C=PT,Wv(g,0),s0(g,N),tl(g,Yn()),C;if(b===6)s0(g,N);else{if(U=g.current.alternate,(N&30)===0&&!N8e(U)&&(b=CP(g,N),b===2&&(Y=ht(g),Y!==0&&(N=Y,b=m8(g,Y))),b===1))throw C=PT,Wv(g,0),s0(g,N),tl(g,Yn()),C;switch(g.finishedWork=U,g.finishedLanes=N,b){case 0:case 1:throw Error(n(345));case 2:Gv(g,el,cm);break;case 3:if(s0(g,N),(N&130023424)===N&&(b=f8+500-Yn(),10<b)){if(nt(g,0)!==0)break;if(U=g.suspendedLanes,(U&N)!==N){pu(),g.pingedLanes|=g.suspendedLanes&U;break}g.timeoutHandle=w5(Gv.bind(null,g,el,cm),b);break}Gv(g,el,cm);break;case 4:if(s0(g,N),(N&4194240)===N)break;for(b=g.eventTimes,U=-1;0<N;){var ee=31-_s(N);Y=1<<ee,ee=b[ee],ee>U&&(U=ee),N&=~Y}if(N=U,N=Yn()-N,N=(120>N?120:480>N?480:1080>N?1080:1920>N?1920:3e3>N?3e3:4320>N?4320:1960*P8e(N/1960))-N,10<N){g.timeoutHandle=w5(Gv.bind(null,g,el,cm),N);break}Gv(g,el,cm);break;case 5:Gv(g,el,cm);break;default:throw Error(n(329))}}}return tl(g,Yn()),g.callbackNode===C?Wse.bind(null,g):null}function m8(g,b){var C=NT;return g.current.memoizedState.isDehydrated&&(Wv(g,b).flags|=256),g=CP(g,b),g!==2&&(b=el,el=C,b!==null&&g8(b)),g}function g8(g){el===null?el=g:el.push.apply(el,g)}function N8e(g){for(var b=g;;){if(b.flags&16384){var C=b.updateQueue;if(C!==null&&(C=C.stores,C!==null))for(var N=0;N<C.length;N++){var U=C[N],Y=U.getSnapshot;U=U.value;try{if(!Hd(Y(),U))return!1}catch{return!1}}}if(C=b.child,b.subtreeFlags&16384&&C!==null)C.return=b,b=C;else{if(b===g)break;for(;b.sibling===null;){if(b.return===null||b.return===g)return!0;b=b.return}b.sibling.return=b.return,b=b.sibling}}return!0}function s0(g,b){for(b&=~d8,b&=~_P,g.suspendedLanes|=b,g.pingedLanes&=~b,g=g.expirationTimes;0<b;){var C=31-_s(b),N=1<<C;g[C]=-1,b&=~N}}function Gse(g){if((Hr&6)!==0)throw Error(n(327));tw();var b=nt(g,0);if((b&1)===0)return tl(g,Yn()),null;var C=CP(g,b);if(g.tag!==0&&C===2){var N=ht(g);N!==0&&(b=N,C=m8(g,N))}if(C===1)throw C=PT,Wv(g,0),s0(g,b),tl(g,Yn()),C;if(C===6)throw Error(n(345));return g.finishedWork=g.current.alternate,g.finishedLanes=b,Gv(g,el,cm),tl(g,Yn()),null}function y8(g,b){var C=Hr;Hr|=1;try{return g(b)}finally{Hr=C,Hr===0&&(ew=Yn()+500,Zk&&Jg())}}function qv(g){r0!==null&&r0.tag===0&&(Hr&6)===0&&tw();var b=Hr;Hr|=1;var C=Gc.transition,N=rn;try{if(Gc.transition=null,rn=1,g)return g()}finally{rn=N,Gc.transition=C,Hr=b,(Hr&6)===0&&Jg()}}function v8(){Yl=Z_.current,Yi(Z_)}function Wv(g,b){g.finishedWork=null,g.finishedLanes=0;var C=g.timeoutHandle;if(C!==-1&&(g.timeoutHandle=-1,u8e(C)),eo!==null)for(C=eo.return;C!==null;){var N=C;switch(A5(N),N.tag){case 1:N=N.type.childContextTypes,N!=null&&Qk();break;case 3:X_(),Yi(Qu),Yi(Ra),B5();break;case 5:F5(N);break;case 4:X_();break;case 13:Yi(ds);break;case 19:Yi(ds);break;case 10:O5(N.type._context);break;case 22:case 23:v8()}C=C.return}if(Bo=g,eo=g=o0(g.current,null),ia=Yl=b,go=0,PT=null,d8=_P=Hv=0,el=NT=null,zv!==null){for(b=0;b<zv.length;b++)if(C=zv[b],N=C.interleaved,N!==null){C.interleaved=null;var U=N.next,Y=C.pending;if(Y!==null){var ee=Y.next;Y.next=U,N.next=ee}C.pending=N}zv=null}return g}function Yse(g,b){do{var C=eo;try{if(N5(),lP.current=hP,cP){for(var N=fs.memoizedState;N!==null;){var U=N.queue;U!==null&&(U.pending=null),N=N.next}cP=!1}if(Vv=0,jo=mo=fs=null,TT=!1,CT=0,c8.current=null,C===null||C.return===null){go=1,PT=b,eo=null;break}e:{var Y=g,ee=C.return,me=C,Ae=b;if(b=ia,me.flags|=32768,Ae!==null&&typeof Ae=="object"&&typeof Ae.then=="function"){var Ke=Ae,gt=me,bt=gt.tag;if((gt.mode&1)===0&&(bt===0||bt===11||bt===15)){var mt=gt.alternate;mt?(gt.updateQueue=mt.updateQueue,gt.memoizedState=mt.memoizedState,gt.lanes=mt.lanes):(gt.updateQueue=null,gt.memoizedState=null)}var Vt=bse(ee);if(Vt!==null){Vt.flags&=-257,_se(Vt,ee,me,Y,b),Vt.mode&1&&vse(Y,Ke,b),b=Vt,Ae=Ke;var Yt=b.updateQueue;if(Yt===null){var Qt=new Set;Qt.add(Ae),b.updateQueue=Qt}else Yt.add(Ae);break e}else{if((b&1)===0){vse(Y,Ke,b),b8();break e}Ae=Error(n(426))}}else if(ns&&me.mode&1){var $s=bse(ee);if($s!==null){($s.flags&65536)===0&&($s.flags|=256),_se($s,ee,me,Y,b),k5(Q_(Ae,me));break e}}Y=Ae=Q_(Ae,me),go!==4&&(go=2),NT===null?NT=[Y]:NT.push(Y),Y=ee;do{switch(Y.tag){case 3:Y.flags|=65536,b&=-b,Y.lanes|=b;var je=gse(Y,Ae,b);Vie(Y,je);break e;case 1:me=Ae;var Oe=Y.type,He=Y.stateNode;if((Y.flags&128)===0&&(typeof Oe.getDerivedStateFromError=="function"||He!==null&&typeof He.componentDidCatch=="function"&&(n0===null||!n0.has(He)))){Y.flags|=65536,b&=-b,Y.lanes|=b;var At=yse(Y,me,b);Vie(Y,At);break e}}Y=Y.return}while(Y!==null)}Qse(C)}catch(nn){b=nn,eo===C&&C!==null&&(eo=C=C.return);continue}break}while(!0)}function Kse(){var g=bP.current;return bP.current=hP,g===null?hP:g}function b8(){(go===0||go===3||go===2)&&(go=4),Bo===null||(Hv&268435455)===0&&(_P&268435455)===0||s0(Bo,ia)}function CP(g,b){var C=Hr;Hr|=2;var N=Kse();(Bo!==g||ia!==b)&&(cm=null,Wv(g,b));do try{O8e();break}catch(U){Yse(g,U)}while(!0);if(N5(),Hr=C,bP.current=N,eo!==null)throw Error(n(261));return Bo=null,ia=0,go}function O8e(){for(;eo!==null;)Xse(eo)}function D8e(){for(;eo!==null&&!bi();)Xse(eo)}function Xse(g){var b=eoe(g.alternate,g,Yl);g.memoizedProps=g.pendingProps,b===null?Qse(g):eo=b,c8.current=null}function Qse(g){var b=g;do{var C=b.alternate;if(g=b.return,(b.flags&32768)===0){if(C=C8e(C,b,Yl),C!==null){eo=C;return}}else{if(C=A8e(C,b),C!==null){C.flags&=32767,eo=C;return}if(g!==null)g.flags|=32768,g.subtreeFlags=0,g.deletions=null;else{go=6,eo=null;return}}if(b=b.sibling,b!==null){eo=b;return}eo=b=g}while(b!==null);go===0&&(go=5)}function Gv(g,b,C){var N=rn,U=Gc.transition;try{Gc.transition=null,rn=1,M8e(g,b,C,N)}finally{Gc.transition=U,rn=N}return null}function M8e(g,b,C,N){do tw();while(r0!==null);if((Hr&6)!==0)throw Error(n(327));C=g.finishedWork;var U=g.finishedLanes;if(C===null)return null;if(g.finishedWork=null,g.finishedLanes=0,C===g.current)throw Error(n(177));g.callbackNode=null,g.callbackPriority=0;var Y=C.lanes|C.childLanes;if(tn(g,Y),g===Bo&&(eo=Bo=null,ia=0),(C.subtreeFlags&2064)===0&&(C.flags&2064)===0||xP||(xP=!0,toe(Oi,function(){return tw(),null})),Y=(C.flags&15990)!==0,(C.subtreeFlags&15990)!==0||Y){Y=Gc.transition,Gc.transition=null;var ee=rn;rn=1;var me=Hr;Hr|=4,c8.current=null,R8e(g,C),zse(C,g),t8e(b5),pe=!!v5,b5=v5=null,g.current=C,k8e(C),Tr(),Hr=me,rn=ee,Gc.transition=Y}else g.current=C;if(xP&&(xP=!1,r0=g,EP=U),Y=g.pendingLanes,Y===0&&(n0=null),Wu(C.stateNode),tl(g,Yn()),b!==null)for(N=g.onRecoverableError,C=0;C<b.length;C++)U=b[C],N(U.value,{componentStack:U.stack,digest:U.digest});if(wP)throw wP=!1,g=h8,h8=null,g;return(EP&1)!==0&&g.tag!==0&&tw(),Y=g.pendingLanes,(Y&1)!==0?g===p8?OT++:(OT=0,p8=g):OT=0,Jg(),null}function tw(){if(r0!==null){var g=Kr(EP),b=Gc.transition,C=rn;try{if(Gc.transition=null,rn=16>g?16:g,r0===null)var N=!1;else{if(g=r0,r0=null,EP=0,(Hr&6)!==0)throw Error(n(331));var U=Hr;for(Hr|=4,Wt=g.current;Wt!==null;){var Y=Wt,ee=Y.child;if((Wt.flags&16)!==0){var me=Y.deletions;if(me!==null){for(var Ae=0;Ae<me.length;Ae++){var Ke=me[Ae];for(Wt=Ke;Wt!==null;){var gt=Wt;switch(gt.tag){case 0:case 11:case 15:kT(8,gt,Y)}var bt=gt.child;if(bt!==null)bt.return=gt,Wt=bt;else for(;Wt!==null;){gt=Wt;var mt=gt.sibling,Vt=gt.return;if($se(gt),gt===Ke){Wt=null;break}if(mt!==null){mt.return=Vt,Wt=mt;break}Wt=Vt}}}var Yt=Y.alternate;if(Yt!==null){var Qt=Yt.child;if(Qt!==null){Yt.child=null;do{var $s=Qt.sibling;Qt.sibling=null,Qt=$s}while(Qt!==null)}}Wt=Y}}if((Y.subtreeFlags&2064)!==0&&ee!==null)ee.return=Y,Wt=ee;else e:for(;Wt!==null;){if(Y=Wt,(Y.flags&2048)!==0)switch(Y.tag){case 0:case 11:case 15:kT(9,Y,Y.return)}var je=Y.sibling;if(je!==null){je.return=Y.return,Wt=je;break e}Wt=Y.return}}var Oe=g.current;for(Wt=Oe;Wt!==null;){ee=Wt;var He=ee.child;if((ee.subtreeFlags&2064)!==0&&He!==null)He.return=ee,Wt=He;else e:for(ee=Oe;Wt!==null;){if(me=Wt,(me.flags&2048)!==0)try{switch(me.tag){case 0:case 11:case 15:vP(9,me)}}catch(nn){ws(me,me.return,nn)}if(me===ee){Wt=null;break e}var At=me.sibling;if(At!==null){At.return=me.return,Wt=At;break e}Wt=me.return}}if(Hr=U,Jg(),_i&&typeof _i.onPostCommitFiberRoot=="function")try{_i.onPostCommitFiberRoot(Xs,g)}catch{}N=!0}return N}finally{rn=C,Gc.transition=b}}return!1}function Jse(g,b,C){b=Q_(C,b),b=gse(g,b,1),g=e0(g,b,1),b=pu(),g!==null&&(On(g,1,b),tl(g,b))}function ws(g,b,C){if(g.tag===3)Jse(g,g,C);else for(;b!==null;){if(b.tag===3){Jse(b,g,C);break}else if(b.tag===1){var N=b.stateNode;if(typeof b.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(n0===null||!n0.has(N))){g=Q_(C,g),g=yse(b,g,1),b=e0(b,g,1),g=pu(),b!==null&&(On(b,1,g),tl(b,g));break}}b=b.return}}function $8e(g,b,C){var N=g.pingCache;N!==null&&N.delete(b),b=pu(),g.pingedLanes|=g.suspendedLanes&C,Bo===g&&(ia&C)===C&&(go===4||go===3&&(ia&130023424)===ia&&500>Yn()-f8?Wv(g,0):d8|=C),tl(g,b)}function Zse(g,b){b===0&&((g.mode&1)===0?b=1:(b=Me,Me<<=1,(Me&130023424)===0&&(Me=4194304)));var C=pu();g=am(g,b),g!==null&&(On(g,b,C),tl(g,C))}function L8e(g){var b=g.memoizedState,C=0;b!==null&&(C=b.retryLane),Zse(g,C)}function F8e(g,b){var C=0;switch(g.tag){case 13:var N=g.stateNode,U=g.memoizedState;U!==null&&(C=U.retryLane);break;case 19:N=g.stateNode;break;default:throw Error(n(314))}N!==null&&N.delete(b),Zse(g,C)}var eoe;eoe=function(g,b,C){if(g!==null)if(g.memoizedProps!==b.pendingProps||Qu.current)Zu=!0;else{if((g.lanes&C)===0&&(b.flags&128)===0)return Zu=!1,T8e(g,b,C);Zu=(g.flags&131072)!==0}else Zu=!1,ns&&(b.flags&1048576)!==0&&Oie(b,tP,b.index);switch(b.lanes=0,b.tag){case 2:var N=b.type;gP(g,b),g=b.pendingProps;var U=V_(b,Ra.current);K_(b,C),U=V5(null,b,N,g,U,C);var Y=H5();return b.flags|=1,typeof U=="object"&&U!==null&&typeof U.render=="function"&&U.$$typeof===void 0?(b.tag=1,b.memoizedState=null,b.updateQueue=null,Ju(N)?(Y=!0,Jk(b)):Y=!1,b.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,$5(b),U.updater=pP,b.stateNode=U,U._reactInternals=b,X5(b,N,g,C),b=e8(null,b,N,!0,Y,C)):(b.tag=0,ns&&Y&&C5(b),hu(null,b,U,C),b=b.child),b;case 16:N=b.elementType;e:{switch(gP(g,b),g=b.pendingProps,U=N._init,N=U(N._payload),b.type=N,U=b.tag=B8e(N),g=Wd(N,g),U){case 0:b=Z5(null,b,N,g,C);break e;case 1:b=Cse(null,b,N,g,C);break e;case 11:b=wse(null,b,N,g,C);break e;case 14:b=xse(null,b,N,Wd(N.type,g),C);break e}throw Error(n(306,N,""))}return b;case 0:return N=b.type,U=b.pendingProps,U=b.elementType===N?U:Wd(N,U),Z5(g,b,N,U,C);case 1:return N=b.type,U=b.pendingProps,U=b.elementType===N?U:Wd(N,U),Cse(g,b,N,U,C);case 3:e:{if(Ase(b),g===null)throw Error(n(387));N=b.pendingProps,Y=b.memoizedState,U=Y.element,Uie(g,b),aP(b,N,null,C);var ee=b.memoizedState;if(N=ee.element,Y.isDehydrated)if(Y={element:N,isDehydrated:!1,cache:ee.cache,pendingSuspenseBoundaries:ee.pendingSuspenseBoundaries,transitions:ee.transitions},b.updateQueue.baseState=Y,b.memoizedState=Y,b.flags&256){U=Q_(Error(n(423)),b),b=Ise(g,b,N,C,U);break e}else if(N!==U){U=Q_(Error(n(424)),b),b=Ise(g,b,N,C,U);break e}else for(Gl=Kg(b.stateNode.containerInfo.firstChild),Wl=b,ns=!0,qd=null,C=Bie(b,null,N,C),b.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling;else{if(W_(),N===U){b=lm(g,b,C);break e}hu(g,b,N,C)}b=b.child}return b;case 5:return qie(b),g===null&&R5(b),N=b.type,U=b.pendingProps,Y=g!==null?g.memoizedProps:null,ee=U.children,_5(N,U)?ee=null:Y!==null&&_5(N,Y)&&(b.flags|=32),Tse(g,b),hu(g,b,ee,C),b.child;case 6:return g===null&&R5(b),null;case 13:return Rse(g,b,C);case 4:return L5(b,b.stateNode.containerInfo),N=b.pendingProps,g===null?b.child=G_(b,null,N,C):hu(g,b,N,C),b.child;case 11:return N=b.type,U=b.pendingProps,U=b.elementType===N?U:Wd(N,U),wse(g,b,N,U,C);case 7:return hu(g,b,b.pendingProps,C),b.child;case 8:return hu(g,b,b.pendingProps.children,C),b.child;case 12:return hu(g,b,b.pendingProps.children,C),b.child;case 10:e:{if(N=b.type._context,U=b.pendingProps,Y=b.memoizedProps,ee=U.value,Fi(iP,N._currentValue),N._currentValue=ee,Y!==null)if(Hd(Y.value,ee)){if(Y.children===U.children&&!Qu.current){b=lm(g,b,C);break e}}else for(Y=b.child,Y!==null&&(Y.return=b);Y!==null;){var me=Y.dependencies;if(me!==null){ee=Y.child;for(var Ae=me.firstContext;Ae!==null;){if(Ae.context===N){if(Y.tag===1){Ae=um(-1,C&-C),Ae.tag=2;var Ke=Y.updateQueue;if(Ke!==null){Ke=Ke.shared;var gt=Ke.pending;gt===null?Ae.next=Ae:(Ae.next=gt.next,gt.next=Ae),Ke.pending=Ae}}Y.lanes|=C,Ae=Y.alternate,Ae!==null&&(Ae.lanes|=C),D5(Y.return,C,b),me.lanes|=C;break}Ae=Ae.next}}else if(Y.tag===10)ee=Y.type===b.type?null:Y.child;else if(Y.tag===18){if(ee=Y.return,ee===null)throw Error(n(341));ee.lanes|=C,me=ee.alternate,me!==null&&(me.lanes|=C),D5(ee,C,b),ee=Y.sibling}else ee=Y.child;if(ee!==null)ee.return=Y;else for(ee=Y;ee!==null;){if(ee===b){ee=null;break}if(Y=ee.sibling,Y!==null){Y.return=ee.return,ee=Y;break}ee=ee.return}Y=ee}hu(g,b,U.children,C),b=b.child}return b;case 9:return U=b.type,N=b.pendingProps.children,K_(b,C),U=qc(U),N=N(U),b.flags|=1,hu(g,b,N,C),b.child;case 14:return N=b.type,U=Wd(N,b.pendingProps),U=Wd(N.type,U),xse(g,b,N,U,C);case 15:return Ese(g,b,b.type,b.pendingProps,C);case 17:return N=b.type,U=b.pendingProps,U=b.elementType===N?U:Wd(N,U),gP(g,b),b.tag=1,Ju(N)?(g=!0,Jk(b)):g=!1,K_(b,C),pse(b,N,U),X5(b,N,U,C),e8(null,b,N,!0,g,C);case 19:return Pse(g,b,C);case 22:return Sse(g,b,C)}throw Error(n(156,b.tag))};function toe(g,b){return dn(g,b)}function j8e(g,b,C,N){this.tag=g,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=b,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yc(g,b,C,N){return new j8e(g,b,C,N)}function _8(g){return g=g.prototype,!(!g||!g.isReactComponent)}function B8e(g){if(typeof g=="function")return _8(g)?1:0;if(g!=null){if(g=g.$$typeof,g===z)return 11;if(g===F)return 14}return 2}function o0(g,b){var C=g.alternate;return C===null?(C=Yc(g.tag,b,g.key,g.mode),C.elementType=g.elementType,C.type=g.type,C.stateNode=g.stateNode,C.alternate=g,g.alternate=C):(C.pendingProps=b,C.type=g.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=g.flags&14680064,C.childLanes=g.childLanes,C.lanes=g.lanes,C.child=g.child,C.memoizedProps=g.memoizedProps,C.memoizedState=g.memoizedState,C.updateQueue=g.updateQueue,b=g.dependencies,C.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext},C.sibling=g.sibling,C.index=g.index,C.ref=g.ref,C}function AP(g,b,C,N,U,Y){var ee=2;if(N=g,typeof g=="function")_8(g)&&(ee=1);else if(typeof g=="string")ee=5;else e:switch(g){case A:return Yv(C.children,U,Y,b);case I:ee=8,U|=8;break;case k:return g=Yc(12,C,b,U|2),g.elementType=k,g.lanes=Y,g;case O:return g=Yc(13,C,b,U),g.elementType=O,g.lanes=Y,g;case $:return g=Yc(19,C,b,U),g.elementType=$,g.lanes=Y,g;case q:return IP(C,U,Y,b);default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case D:ee=10;break e;case M:ee=9;break e;case z:ee=11;break e;case F:ee=14;break e;case B:ee=16,N=null;break e}throw Error(n(130,g==null?g:typeof g,""))}return b=Yc(ee,C,b,U),b.elementType=g,b.type=N,b.lanes=Y,b}function Yv(g,b,C,N){return g=Yc(7,g,N,b),g.lanes=C,g}function IP(g,b,C,N){return g=Yc(22,g,N,b),g.elementType=q,g.lanes=C,g.stateNode={isHidden:!1},g}function w8(g,b,C){return g=Yc(6,g,null,b),g.lanes=C,g}function x8(g,b,C){return b=Yc(4,g.children!==null?g.children:[],g.key,b),b.lanes=C,b.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},b}function z8e(g,b,C,N,U){this.tag=b,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bt(0),this.expirationTimes=Bt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bt(0),this.identifierPrefix=N,this.onRecoverableError=U,this.mutableSourceEagerHydrationData=null}function E8(g,b,C,N,U,Y,ee,me,Ae){return g=new z8e(g,b,C,me,Ae),b===1?(b=1,Y===!0&&(b|=8)):b=0,Y=Yc(3,null,null,b),g.current=Y,Y.stateNode=g,Y.memoizedState={element:N,isDehydrated:C,cache:null,transitions:null,pendingSuspenseBoundaries:null},$5(Y),g}function U8e(g,b,C){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:N==null?null:""+N,children:g,containerInfo:b,implementation:C}}function noe(g){if(!g)return Qg;g=g._reactInternals;e:{if(sn(g)!==g||g.tag!==1)throw Error(n(170));var b=g;do{switch(b.tag){case 3:b=b.stateNode.context;break e;case 1:if(Ju(b.type)){b=b.stateNode.__reactInternalMemoizedMergedChildContext;break e}}b=b.return}while(b!==null);throw Error(n(171))}if(g.tag===1){var C=g.type;if(Ju(C))return kie(g,C,b)}return b}function roe(g,b,C,N,U,Y,ee,me,Ae){return g=E8(C,N,!0,g,U,Y,ee,me,Ae),g.context=noe(null),C=g.current,N=pu(),U=i0(C),Y=um(N,U),Y.callback=b??null,e0(C,Y,U),g.current.lanes=U,On(g,U,N),tl(g,N),g}function RP(g,b,C,N){var U=b.current,Y=pu(),ee=i0(U);return C=noe(C),b.context===null?b.context=C:b.pendingContext=C,b=um(Y,ee),b.payload={element:g},N=N===void 0?null:N,N!==null&&(b.callback=N),g=e0(U,b,ee),g!==null&&(Kd(g,U,ee,Y),oP(g,U,ee)),ee}function kP(g){if(g=g.current,!g.child)return null;switch(g.child.tag){case 5:return g.child.stateNode;default:return g.child.stateNode}}function ioe(g,b){if(g=g.memoizedState,g!==null&&g.dehydrated!==null){var C=g.retryLane;g.retryLane=C!==0&&C<b?C:b}}function S8(g,b){ioe(g,b),(g=g.alternate)&&ioe(g,b)}function V8e(){return null}var soe=typeof reportError=="function"?reportError:function(g){console.error(g)};function T8(g){this._internalRoot=g}PP.prototype.render=T8.prototype.render=function(g){var b=this._internalRoot;if(b===null)throw Error(n(409));RP(g,b,null,null)},PP.prototype.unmount=T8.prototype.unmount=function(){var g=this._internalRoot;if(g!==null){this._internalRoot=null;var b=g.containerInfo;qv(function(){RP(null,g,null,null)}),b[rm]=null}};function PP(g){this._internalRoot=g}PP.prototype.unstable_scheduleHydration=function(g){if(g){var b=qg();g={blockedOn:null,target:g,priority:b};for(var C=0;C<Yu.length&&b!==0&&b<Yu[C].priority;C++);Yu.splice(C,0,g),C===0&&Dv(g)}};function C8(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)}function NP(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11&&(g.nodeType!==8||g.nodeValue!==" react-mount-point-unstable "))}function ooe(){}function H8e(g,b,C,N,U){if(U){if(typeof N=="function"){var Y=N;N=function(){var Ke=kP(ee);Y.call(Ke)}}var ee=roe(b,N,g,0,null,!1,!1,"",ooe);return g._reactRootContainer=ee,g[rm]=ee.current,yT(g.nodeType===8?g.parentNode:g),qv(),ee}for(;U=g.lastChild;)g.removeChild(U);if(typeof N=="function"){var me=N;N=function(){var Ke=kP(Ae);me.call(Ke)}}var Ae=E8(g,0,!1,null,null,!1,!1,"",ooe);return g._reactRootContainer=Ae,g[rm]=Ae.current,yT(g.nodeType===8?g.parentNode:g),qv(function(){RP(b,Ae,C,N)}),Ae}function OP(g,b,C,N,U){var Y=C._reactRootContainer;if(Y){var ee=Y;if(typeof U=="function"){var me=U;U=function(){var Ae=kP(ee);me.call(Ae)}}RP(b,ee,g,U)}else ee=H8e(C,b,g,U,N);return kP(ee)}fo=function(g){switch(g.tag){case 3:var b=g.stateNode;if(b.current.memoizedState.isDehydrated){var C=Ie(b.pendingLanes);C!==0&&(ur(b,C|1),tl(b,Yn()),(Hr&6)===0&&(ew=Yn()+500,Jg()))}break;case 13:qv(function(){var N=am(g,1);if(N!==null){var U=pu();Kd(N,g,1,U)}}),S8(g,1)}},Gu=function(g){if(g.tag===13){var b=am(g,134217728);if(b!==null){var C=pu();Kd(b,g,134217728,C)}S8(g,134217728)}},Fc=function(g){if(g.tag===13){var b=i0(g),C=am(g,b);if(C!==null){var N=pu();Kd(C,g,b,N)}S8(g,b)}},qg=function(){return rn},ph=function(g,b){var C=rn;try{return rn=g,b()}finally{rn=C}},Ai=function(g,b,C){switch(b){case"input":if(Ne(g,C),b=C.name,C.type==="radio"&&b!=null){for(C=g;C.parentNode;)C=C.parentNode;for(C=C.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]'),b=0;b<C.length;b++){var N=C[b];if(N!==g&&N.form===g.form){var U=Xk(N);if(!U)throw Error(n(90));te(N),Ne(N,U)}}}break;case"textarea":it(g,C);break;case"select":b=C.value,b!=null&&Ue(g,!!C.multiple,b,!1)}},$o=y8,lu=qv;var q8e={usingClientEntryPoint:!1,Events:[_T,z_,Xk,Wi,qu,y8]},DT={findFiberByHostInstance:Lv,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},W8e={bundleType:DT.bundleType,version:DT.version,rendererPackageName:DT.rendererPackageName,rendererConfig:DT.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:S.ReactCurrentDispatcher,findHostInstanceByFiber:function(g){return g=Er(g),g===null?null:g.stateNode},findFiberByHostInstance:DT.findFiberByHostInstance||V8e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var DP=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!DP.isDisabled&&DP.supportsFiber)try{Xs=DP.inject(W8e),_i=DP}catch{}}return rl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q8e,rl.createPortal=function(g,b){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!C8(b))throw Error(n(200));return U8e(g,b,null,C)},rl.createRoot=function(g,b){if(!C8(g))throw Error(n(299));var C=!1,N="",U=soe;return b!=null&&(b.unstable_strictMode===!0&&(C=!0),b.identifierPrefix!==void 0&&(N=b.identifierPrefix),b.onRecoverableError!==void 0&&(U=b.onRecoverableError)),b=E8(g,1,!1,null,null,C,!1,N,U),g[rm]=b.current,yT(g.nodeType===8?g.parentNode:g),new T8(b)},rl.findDOMNode=function(g){if(g==null)return null;if(g.nodeType===1)return g;var b=g._reactInternals;if(b===void 0)throw typeof g.render=="function"?Error(n(188)):(g=Object.keys(g).join(","),Error(n(268,g)));return g=Er(b),g=g===null?null:g.stateNode,g},rl.flushSync=function(g){return qv(g)},rl.hydrate=function(g,b,C){if(!NP(b))throw Error(n(200));return OP(null,g,b,!0,C)},rl.hydrateRoot=function(g,b,C){if(!C8(g))throw Error(n(405));var N=C!=null&&C.hydratedSources||null,U=!1,Y="",ee=soe;if(C!=null&&(C.unstable_strictMode===!0&&(U=!0),C.identifierPrefix!==void 0&&(Y=C.identifierPrefix),C.onRecoverableError!==void 0&&(ee=C.onRecoverableError)),b=roe(b,null,g,1,C??null,U,!1,Y,ee),g[rm]=b.current,yT(g),N)for(g=0;g<N.length;g++)C=N[g],U=C._getVersion,U=U(C._source),b.mutableSourceEagerHydrationData==null?b.mutableSourceEagerHydrationData=[C,U]:b.mutableSourceEagerHydrationData.push(C,U);return new PP(b)},rl.render=function(g,b,C){if(!NP(b))throw Error(n(200));return OP(null,g,b,!1,C)},rl.unmountComponentAtNode=function(g){if(!NP(g))throw Error(n(40));return g._reactRootContainer?(qv(function(){OP(null,null,g,!1,function(){g._reactRootContainer=null,g[rm]=null})}),!0):!1},rl.unstable_batchedUpdates=y8,rl.unstable_renderSubtreeIntoContainer=function(g,b,C,N){if(!NP(C))throw Error(n(200));if(g==null||g._reactInternals===void 0)throw Error(n(38));return OP(g,b,C,!1,N)},rl.version="18.3.1-next-f1338f8080-20240426",rl}var poe;function p1e(){if(poe)return R8.exports;poe=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),R8.exports=nBe(),R8.exports}var moe;function rBe(){if(moe)return MP;moe=1;var e=p1e();return MP.createRoot=e.createRoot,MP.hydrateRoot=e.hydrateRoot,MP}var iBe=rBe();const sBe=su(iBe);var Fh=function(){return Fh=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Fh.apply(this,arguments)};function zI(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Am(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function goe(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function oBe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Nr(e){return this instanceof Nr?(this.v=e,this):new Nr(e)}function O1(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,d)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(y,v){s.push([h,m,y,v])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){f(s[0][3],m)}}function l(h){h.value instanceof Nr?Promise.resolve(h.value.v).then(c,d):f(s[0][2],h)}function c(h){u("next",h)}function d(h){u("throw",h)}function f(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function N8(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Nr(e[i](o)),done:!1}:s?s(o):o}:s}}function AA(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof goe=="function"?goe(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var eD="right-scroll-bar-position",tD="width-before-scroll-bar",aBe="with-scroll-bars-hidden",uBe="--removed-body-scroll-bar-size";function O8(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function lBe(e,t){var n=P.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var cBe=typeof window<"u"?P.useLayoutEffect:P.useEffect,yoe=new WeakMap;function dBe(e,t){var n=lBe(null,function(r){return e.forEach(function(i){return O8(i,r)})});return cBe(function(){var r=yoe.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||O8(a,null)}),s.forEach(function(a){i.has(a)||O8(a,o)})}yoe.set(n,e)},[e]),n}function fBe(e){return e}function hBe(e,t){t===void 0&&(t=fBe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function pBe(e){e===void 0&&(e={});var t=hBe(null);return t.options=Fh({async:!0,ssr:!1},e),t}var m1e=function(e){var t=e.sideCar,n=zI(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return P.createElement(r,Fh({},n))};m1e.isSideCarExport=!0;function mBe(e,t){return e.useMedium(t),m1e}var g1e=pBe(),D8=function(){},gL=P.forwardRef(function(e,t){var n=P.useRef(null),r=P.useState({onScrollCapture:D8,onWheelCapture:D8,onTouchMoveCapture:D8}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,d=e.shards,f=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,y=e.as,v=y===void 0?"div":y,w=e.gapMode,x=zI(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=f,E=dBe([n,t]),T=Fh(Fh({},x),i);return P.createElement(P.Fragment,null,c&&P.createElement(S,{sideCar:g1e,removeScrollBar:l,shards:d,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:w}),o?P.cloneElement(P.Children.only(a),Fh(Fh({},T),{ref:E})):P.createElement(v,Fh({},T,{className:u,ref:E}),a))});gL.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};gL.classNames={fullWidth:tD,zeroRight:eD};var gBe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function yBe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=gBe();return t&&e.setAttribute("nonce",t),e}function vBe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function bBe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var _Be=function(){var e=0,t=null;return{add:function(n){e==0&&(t=yBe())&&(vBe(t,n),bBe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},wBe=function(){var e=_Be();return function(t,n){P.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},y1e=function(){var e=wBe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},xBe={left:0,top:0,right:0,gap:0},M8=function(e){return parseInt(e||"",10)||0},EBe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[M8(n),M8(r),M8(i)]},SBe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return xBe;var t=EBe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},TBe=y1e(),dx="data-scroll-locked",CBe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(aBe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(dx,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(eD,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(tD,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(eD," .").concat(eD,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(tD," .").concat(tD,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(dx,`] {
    `).concat(uBe,": ").concat(a,`px;
  }
`)},voe=function(){var e=parseInt(document.body.getAttribute(dx)||"0",10);return isFinite(e)?e:0},ABe=function(){P.useEffect(function(){return document.body.setAttribute(dx,(voe()+1).toString()),function(){var e=voe()-1;e<=0?document.body.removeAttribute(dx):document.body.setAttribute(dx,e.toString())}},[])},IBe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;ABe();var s=P.useMemo(function(){return SBe(i)},[i]);return P.createElement(TBe,{styles:CBe(s,!t,i,n?"":"!important")})},jU=!1;if(typeof window<"u")try{var $P=Object.defineProperty({},"passive",{get:function(){return jU=!0,!0}});window.addEventListener("test",$P,$P),window.removeEventListener("test",$P,$P)}catch{jU=!1}var nw=jU?{passive:!1}:!1,RBe=function(e){return e.tagName==="TEXTAREA"},v1e=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!RBe(e)&&n[t]==="visible")},kBe=function(e){return v1e(e,"overflowY")},PBe=function(e){return v1e(e,"overflowX")},boe=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=b1e(e,r);if(i){var s=_1e(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},NBe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},OBe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},b1e=function(e,t){return e==="v"?kBe(t):PBe(t)},_1e=function(e,t){return e==="v"?NBe(t):OBe(t)},DBe=function(e,t){return e==="h"&&t==="rtl"?-1:1},MBe=function(e,t,n,r,i){var s=DBe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,d=0,f=0;do{var h=_1e(e,a),p=h[0],m=h[1],y=h[2],v=m-y-s*p;(p||v)&&b1e(e,a)&&(d+=v,f+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&Math.abs(d)<1||!c&&Math.abs(f)<1)&&(l=!0),l},LP=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},_oe=function(e){return[e.deltaX,e.deltaY]},woe=function(e){return e&&"current"in e?e.current:e},$Be=function(e,t){return e[0]===t[0]&&e[1]===t[1]},LBe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},FBe=0,rw=[];function jBe(e){var t=P.useRef([]),n=P.useRef([0,0]),r=P.useRef(),i=P.useState(FBe++)[0],s=P.useState(y1e)[0],o=P.useRef(e);P.useEffect(function(){o.current=e},[e]),P.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=oBe([e.lockRef.current],(e.shards||[]).map(woe),!0).filter(Boolean);return m.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=P.useCallback(function(m,y){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var v=LP(m),w=n.current,x="deltaX"in m?m.deltaX:w[0]-v[0],S="deltaY"in m?m.deltaY:w[1]-v[1],E,T=m.target,A=Math.abs(x)>Math.abs(S)?"h":"v";if("touches"in m&&A==="h"&&T.type==="range")return!1;var I=boe(A,T);if(!I)return!0;if(I?E=A:(E=A==="v"?"h":"v",I=boe(A,T)),!I)return!1;if(!r.current&&"changedTouches"in m&&(x||S)&&(r.current=E),!E)return!0;var k=r.current||E;return MBe(k,y,m,k==="h"?x:S)},[]),u=P.useCallback(function(m){var y=m;if(!(!rw.length||rw[rw.length-1]!==s)){var v="deltaY"in y?_oe(y):LP(y),w=t.current.filter(function(E){return E.name===y.type&&(E.target===y.target||y.target===E.shadowParent)&&$Be(E.delta,v)})[0];if(w&&w.should){y.cancelable&&y.preventDefault();return}if(!w){var x=(o.current.shards||[]).map(woe).filter(Boolean).filter(function(E){return E.contains(y.target)}),S=x.length>0?a(y,x[0]):!o.current.noIsolation;S&&y.cancelable&&y.preventDefault()}}},[]),l=P.useCallback(function(m,y,v,w){var x={name:m,delta:y,target:v,should:w,shadowParent:BBe(v)};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(S){return S!==x})},1)},[]),c=P.useCallback(function(m){n.current=LP(m),r.current=void 0},[]),d=P.useCallback(function(m){l(m.type,_oe(m),m.target,a(m,e.lockRef.current))},[]),f=P.useCallback(function(m){l(m.type,LP(m),m.target,a(m,e.lockRef.current))},[]);P.useEffect(function(){return rw.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",u,nw),document.addEventListener("touchmove",u,nw),document.addEventListener("touchstart",c,nw),function(){rw=rw.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,nw),document.removeEventListener("touchmove",u,nw),document.removeEventListener("touchstart",c,nw)}},[]);var h=e.removeScrollBar,p=e.inert;return P.createElement(P.Fragment,null,p?P.createElement(s,{styles:LBe(i)}):null,h?P.createElement(IBe,{gapMode:e.gapMode}):null)}function BBe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const zBe=mBe(g1e,jBe);var yL=P.forwardRef(function(e,t){return P.createElement(gL,Fh({},e,{ref:t,sideCar:zBe}))});yL.classNames=gL.classNames;function ms(e){return Object.keys(e)}function $8(e){return e&&typeof e=="object"&&!Array.isArray(e)}function AW(e,t){const n={...e},r=t;return $8(e)&&$8(t)&&Object.keys(t).forEach(i=>{$8(r[i])&&i in e?n[i]=AW(n[i],r[i]):n[i]=r[i]}),n}function UBe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function VBe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function BU(e){const t=VBe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function L8(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function w1e(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?L8(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?L8(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?L8(s):s}}return r}return n}const ze=w1e("rem",{shouldScale:!0}),cM=w1e("em");function eS(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function x1e(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function xg(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==P.Fragment:!1}function lo(e){const t=P.createContext(null);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>{const i=P.useContext(t);if(i===null)throw new Error(e);return i}]}function qb(e=null){const t=P.createContext(e);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>P.useContext(t)]}function dM(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function fM(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function HBe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function qBe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function WBe(e,t,n){return fM(e,n)===fM(t,n)}function IW({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=fM(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>WBe(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=qBe(l,u,r),d=HBe(l,u,r),f=s==="rtl"?d:c,h=s==="rtl"?c:d;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const GBe={app:100,modal:200,popover:300,overlay:400,max:9999};function Nd(e){return GBe[e]}const YBe=()=>{};function KBe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||YBe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function wn(e,t="size",n=!0){if(e!==void 0)return x1e(e)?n?ze(e):e:`var(--${t}-${e})`}function Cl(e){return wn(e,"mantine-spacing")}function ii(e){return e===void 0?"var(--mantine-radius-default)":wn(e,"mantine-radius")}function Io(e){return wn(e,"mantine-font-size")}function E1e(e){return wn(e,"mantine-line-height",!1)}function RW(e){if(e)return wn(e,"mantine-shadow",!1)}function ya(e,t){return n=>{e==null||e(n),t==null||t(n)}}function kW(e,t){return e in t.breakpoints?BU(t.breakpoints[e]):BU(e)}function hM(e,t){const n=e.map(r=>({value:r,px:kW(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function NC(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function XBe(e,t,n){var r;return n?Array.from(((r=fM(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function QBe(){const[e,t]=P.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function fd(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function IA(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function P0(e){const t=P.useRef(e);return P.useEffect(()=>{t.current=e}),P.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function vL(e,t){const n=P0(e),r=P.useRef(0);return P.useEffect(()=>()=>window.clearTimeout(r.current),[]),P.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const xoe=["mousedown","touchstart"];function JBe(e,t,n){const r=P.useRef();return P.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||xoe).forEach(s=>document.addEventListener(s,i)),()=>{(t||xoe).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function ZBe({timeout:e=2e3}={}){const[t,n]=P.useState(null),[r,i]=P.useState(!1),[s,o]=P.useState(null),a=c=>{window.clearTimeout(s),o(window.setTimeout(()=>i(!1),e)),i(c)};return{copy:c=>{"clipboard"in navigator?navigator.clipboard.writeText(c).then(()=>a(!0)).catch(d=>n(d)):n(new Error("useClipboard: navigator.clipboard is not supported"))},reset:()=>{i(!1),n(null),window.clearTimeout(s)},error:t,copied:r}}function e9e(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function t9e(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function d2(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=P.useState(n?t:t9e(e)),s=P.useRef();return P.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),e9e(s.current,o=>i(o.matches))},[e]),r}function n9e(e,t){return d2("(prefers-color-scheme: dark)",e==="dark",t)?"dark":"light"}function S1e(e,t,n={leading:!1}){const[r,i]=P.useState(e),s=P.useRef(!1),o=P.useRef(null),a=P.useRef(!1),u=()=>window.clearTimeout(o.current);return P.useEffect(()=>{s.current&&(!a.current&&n.leading?(a.current=!0,i(e)):(u(),o.current=window.setTimeout(()=>{a.current=!1,i(e)},t)))},[e,n.leading,t]),P.useEffect(()=>(s.current=!0,u),[]),[r,u]}const Wb=typeof document<"u"?P.useLayoutEffect:P.useEffect;function bc(e,t){const n=P.useRef(!1);P.useEffect(()=>()=>{n.current=!1},[]),P.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function T1e({opened:e,shouldReturnFocus:t=!0}){const n=P.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return bc(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function r9e(e,t="body > :not(script)"){const n=IA(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const i9e=/input|select|textarea|button|object/,C1e="a, input, select, textarea, button, object, [tabindex]";function s9e(e){return e.style.display==="none"}function o9e(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(s9e(n))return!1;n=n.parentNode}return!0}function A1e(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function zU(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(A1e(e));return(i9e.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&o9e(e)}function I1e(e){const t=A1e(e);return(Number.isNaN(t)||t>=0)&&zU(e)}function a9e(e){return Array.from(e.querySelectorAll(C1e)).filter(I1e)}function u9e(e,t){const n=a9e(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function l9e(e=!0){const t=P.useRef(),n=P.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(C1e));o=a.find(I1e)||a.find(zU)||null,!o&&zU(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=P.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=r9e(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return P.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&u9e(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const c9e=Is.useId||(()=>{});function d9e(){const e=c9e();return e?`mantine-${e.replace(/:/g,"")}`:""}function ou(e){const t=d9e(),[n,r]=P.useState(t);return Wb(()=>{r(IA())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function R1e(e,t,n){P.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function PW(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function k1e(...e){return t=>{e.forEach(n=>PW(n,t))}}function Ds(...e){return P.useCallback(k1e(...e),e)}function P1e(e){return{x:fd(e.x,0,1),y:fd(e.y,0,1)}}function bL(e,t,n="ltr"){const r=P.useRef(null),i=P.useRef(!1),s=P.useRef(!1),o=P.useRef(0),[a,u]=P.useState(!1);return P.useEffect(()=>{i.current=!0},[]),P.useEffect(()=>{var w,x;const l=({x:S,y:E})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const T=r.current.getBoundingClientRect();if(T.width&&T.height){const A=fd((S-T.left)/T.width,0,1);e({x:n==="ltr"?A:1-A,y:fd((E-T.top)/T.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",v),document.addEventListener("touchend",h)},d=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",h)},f=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),d(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=S=>{f(),S.preventDefault(),m(S)},m=S=>l({x:S.clientX,y:S.clientY}),y=S=>{S.cancelable&&S.preventDefault(),f(),v(S)},v=S=>{S.cancelable&&S.preventDefault(),l({x:S.changedTouches[0].clientX,y:S.changedTouches[0].clientY})};return(w=r.current)==null||w.addEventListener("mousedown",p),(x=r.current)==null||x.addEventListener("touchstart",y,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",y))}},[n,e]),{ref:r,active:a}}function gs({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=P.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function u0(e,t){const n=t-e+1;return Array.from({length:n},(r,i)=>i+e)}const FP="dots";function f9e({total:e,siblings:t=1,boundaries:n=1,page:r,initialPage:i=1,onChange:s}){const o=Math.max(Math.trunc(e),0),[a,u]=gs({value:r,onChange:s,defaultValue:i,finalValue:i}),l=m=>{m<=0?u(1):m>o?u(o):u(m)},c=()=>l(a+1),d=()=>l(a-1),f=()=>l(1),h=()=>l(o);return{range:P.useMemo(()=>{if(t*2+3+n*2>=o)return u0(1,o);const y=Math.max(a-t,n),v=Math.min(a+t,o-n),w=y>n+2,x=v<o-(n+1);if(!w&&x){const S=t*2+n+2;return[...u0(1,S),FP,...u0(o-(n-1),o)]}if(w&&!x){const S=n+1+2*t;return[...u0(1,n),FP,...u0(o-S,o)]}return[...u0(1,n),FP,...u0(y,v),FP,...u0(o-n+1,o)]},[o,t,a]),active:a,setPage:l,next:c,previous:d,first:f,last:h}}function NW(e,t){return d2("(prefers-reduced-motion: reduce)",e,t)}const h9e={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function _L(e){const t=P.useRef(0),n=P.useRef(null),[r,i]=P.useState(h9e),s=P.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return P.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function p9e(){const[e,t]=P.useState(!1),n=P.useRef(null),r=P.useCallback(()=>t(!0),[]),i=P.useCallback(()=>t(!1),[]);return P.useEffect(()=>{if(n.current)return n.current.addEventListener("mouseenter",r),n.current.addEventListener("mouseleave",i),()=>{var s,o;(s=n.current)==null||s.removeEventListener("mouseenter",r),(o=n.current)==null||o.removeEventListener("mouseleave",i)}},[]),{ref:n,hovered:e}}function W1(e=!1,t){const{onOpen:n,onClose:r}=t||{},[i,s]=P.useState(e),o=P.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=P.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=P.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function m9e(e,t,n={autoInvoke:!1}){const r=P.useRef(null),i=P.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=P.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return P.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function g9e(e){const t=P.useRef();return P.useEffect(()=>{t.current=e},[e]),t.current}function y9e(e,t,n){const r=P.useRef(),i=P.useRef(null);return P.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function v9e(){const[e,t]=P.useState(!1);return P.useEffect(()=>t(!0),[]),e}function b9e(e,t){const n=P0(e),r=P.useRef(),i=P.useRef(),s=P.useRef(!0),o=P.useRef(t),a=P.useRef(-1),u=()=>window.clearTimeout(a.current),l=P.useCallback((...f)=>{n(...f),r.current=f,i.current=f,s.current=!1},[n]),c=P.useCallback(()=>{r.current&&r.current!==i.current?(l(...r.current),a.current=window.setTimeout(c,o.current)):s.current=!0},[l]),d=P.useCallback((...f)=>{s.current?(l(...f),a.current=window.setTimeout(c,o.current)):r.current=f},[l,c]);return P.useEffect(()=>{o.current=t},[t]),[d,u]}function _9e(e,t){const[n,r]=P.useState(e),[i,s]=b9e(r,t);return P.useEffect(()=>s,[]),[n,i]}function w9e(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function x9e(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});Wb(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>w9e(`${e}:${String(r)}`,i[0])}return[t,n]}var E9e={};function N1e(){return typeof process<"u"&&E9e?"production":"development"}function O1e(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=O1e(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Dt(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=O1e(e))&&(r&&(r+=" "),r+=t);return r}const S9e={};function T9e(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=Dt(t[r],i):t[r]=i})}),t}function wL({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||S9e);return T9e(s)}function pM({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const OW=P.createContext(null);function nv(){const e=P.useContext(OW);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function C9e(){return nv().cssVariablesResolver}function A9e(){return nv().classNamesPrefix}function xL(){return nv().getStyleNonce}function I9e(){return nv().withStaticClasses}function R9e(){return nv().headless}function k9e(){var e;return(e=nv().stylesTransform)==null?void 0:e.sx}function P9e(){var e;return(e=nv().stylesTransform)==null?void 0:e.styles}function N9e(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function O9e(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function D9e(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function M9e(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let d,f,h;return u>=0&&u<1?(d=a,f=l,h=0):u>=1&&u<2?(d=l,f=a,h=0):u>=2&&u<3?(d=0,f=a,h=l):u>=3&&u<4?(d=0,f=l,h=a):u>=4&&u<5?(d=l,f=0,h=a):(d=a,f=0,h=l),{r:Math.round((d+c)*255),g:Math.round((f+c)*255),b:Math.round((h+c)*255),a:o||1}}function EL(e){return N9e(e)?O9e(e):e.startsWith("rgb")?D9e(e):e.startsWith("hsl")?M9e(e):{r:0,g:0,b:0,a:1}}function OC(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=EL(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function f2(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function F8(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function $9e(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function L9e(e){if(e.startsWith("oklch("))return($9e(e)||0)/100;const{r:t,g:n,b:r}=EL(e),i=t/255,s=n/255,o=r/255,a=F8(i),u=F8(s),l=F8(o);return .2126*a+.7152*u+.0722*l}function $T(e,t=.179){return e.startsWith("var(")?!1:L9e(e)>t}function _c({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:$T(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:$T(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:$T(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][f2(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:$T(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:$T(e,t.luminanceThreshold),shade:s,variable:void 0}}function mi(e,t){const n=_c({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function UU(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=mi(n.from,t),i=mi(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function td(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=EL(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const iw=td,F9e=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=_c({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${ze(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${ze(1)} solid transparent`}:{background:e,hover:OC(e,.1),color:a,border:`${ze(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${ze(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:td(a,.1),hover:td(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${ze(1)} solid transparent`}}return{background:td(e,.1),hover:td(e,.12),color:e,border:`${ze(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${ze(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:td(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${ze(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:td(e,.05),color:e,border:`${ze(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${ze(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:td(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${ze(1)} solid transparent`}}return{background:"transparent",hover:td(e,.12),color:e,border:`${ze(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${ze(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${ze(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${ze(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:OC(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${ze(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:OC(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${ze(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:OC(t.white,.01),color:e,border:`${ze(1)} solid transparent`}:n==="gradient"?{background:UU(r,t),hover:UU(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${ze(1)} solid var(--mantine-color-default-border)`}:{}},j9e={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},Eoe="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",DW={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:j9e,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:F9e,autoContrast:!1,luminanceThreshold:.3,fontFamily:Eoe,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:Eoe,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:ze(34),lineHeight:"1.3"},h2:{fontSize:ze(26),lineHeight:"1.35"},h3:{fontSize:ze(22),lineHeight:"1.4"},h4:{fontSize:ze(18),lineHeight:"1.45"},h5:{fontSize:ze(16),lineHeight:"1.5"},h6:{fontSize:ze(14),lineHeight:"1.5"}}},fontSizes:{xs:ze(12),sm:ze(14),md:ze(16),lg:ze(18),xl:ze(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:ze(2),sm:ze(4),md:ze(8),lg:ze(16),xl:ze(32)},spacing:{xs:ze(10),sm:ze(12),md:ze(16),lg:ze(20),xl:ze(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), 0 ${ze(1)} ${ze(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ze(10)} ${ze(15)} ${ze(-5)}, rgba(0, 0, 0, 0.04) 0 ${ze(7)} ${ze(7)} ${ze(-5)}`,md:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ze(20)} ${ze(25)} ${ze(-5)}, rgba(0, 0, 0, 0.04) 0 ${ze(10)} ${ze(10)} ${ze(-5)}`,lg:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ze(28)} ${ze(23)} ${ze(-7)}, rgba(0, 0, 0, 0.04) 0 ${ze(12)} ${ze(12)} ${ze(-7)}`,xl:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ze(36)} ${ze(28)} ${ze(-7)}, rgba(0, 0, 0, 0.04) 0 ${ze(17)} ${ze(17)} ${ze(-7)}`},other:{},components:{}};function Soe(e){return e==="auto"||e==="dark"||e==="light"}function B9e({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return Soe(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&Soe(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const z9e="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",Toe="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function j8(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function Coe(e){if(!(e.primaryColor in e.colors))throw new Error(z9e);if(typeof e.primaryShade=="object"&&(!j8(e.primaryShade.dark)||!j8(e.primaryShade.light)))throw new Error(Toe);if(typeof e.primaryShade=="number"&&!j8(e.primaryShade))throw new Error(Toe)}function U9e(e,t){var r;if(!t)return Coe(e),e;const n=AW(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),Coe(n),n}const MW=P.createContext(null),V9e=()=>P.useContext(MW)||DW;function qs(){const e=P.useContext(MW);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function D1e({theme:e,children:t,inherit:n=!0}){const r=V9e(),i=P.useMemo(()=>U9e(n?r:DW,e),[e,r,n]);return _.jsx(MW.Provider,{value:i,children:t})}D1e.displayName="@mantine/core/MantineThemeProvider";function H9e(){const e=qs(),t=xL(),n=ms(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=BU(e.breakpoints[i]),a=s?`${o-.1}px`:cM(o-.1),u=s?`${o}px`:cM(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return _.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function B8(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function LT(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function q9e(e,t){const n=B8(e.variables),r=n?LT(t,n):"",i=B8(e.dark),s=B8(e.light),o=i?LT(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,i):"",a=s?LT(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,s):"";return`${r}${o}${a}`}function Pp({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&_c({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function Aoe(e,t){return Pp({color:e.colors[e.primaryColor][f2(e,t)],theme:e,autoContrast:null})}function jP({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=f2(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:iw(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:iw(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:iw(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=f2(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:iw(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:iw(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:iw(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function W9e(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function sw(e,t,n){ms(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const M1e=e=>{const t=f2(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:ze(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":Aoe(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":Aoe(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};sw(r.variables,e.breakpoints,"breakpoint"),sw(r.variables,e.spacing,"spacing"),sw(r.variables,e.fontSizes,"font-size"),sw(r.variables,e.lineHeights,"line-height"),sw(r.variables,e.shadows,"shadow"),sw(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),ms(e.colors).forEach(s=>{const o=e.colors[s];if(W9e(o)){Object.assign(r.light,jP({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,jP({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,jP({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,jP({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return ms(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function G9e({theme:e,generator:t}){const n=M1e(e),r=t==null?void 0:t(e);return r?AW(n,r):n}const z8=M1e(DW);function Y9e(e){const t={variables:{},light:{},dark:{}};return ms(e.variables).forEach(n=>{z8.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),ms(e.light).forEach(n=>{z8.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),ms(e.dark).forEach(n=>{z8.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function K9e(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function $1e({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=qs(),r=xL(),i=C9e(),s=G9e({theme:n,generator:i}),o=e===":root"&&t,a=o?Y9e(s):s,u=q9e(a,e);return u?_.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":K9e(e)}`}}):null}$1e.displayName="@mantine/CssVariables";function X9e(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function ow(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function Q9e({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=P.useRef(),[s,o]=P.useState(()=>e.get(t)),a=r||s,u=P.useCallback(c=>{r||(ow(c,n),o(c),e.set(c))},[e.set,a,r]),l=P.useCallback(()=>{o(t),ow(t,n),e.clear()},[e.clear,t]);return P.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),Wb(()=>{ow(e.get(t),n)},[]),P.useEffect(()=>{var d;if(r)return ow(r,n),()=>{};r===void 0&&ow(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=f=>{s==="auto"&&ow(f.matches?"dark":"light",n)};return(d=i.current)==null||d.addEventListener("change",c),()=>{var f;return(f=i.current)==null?void 0:f.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function J9e({respectReducedMotion:e,getRootElement:t}){Wb(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}X9e();function L1e({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=B9e(),defaultColorScheme:c="light",getRootElement:d=()=>document.documentElement,cssVariablesResolver:f,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:y,clearColorScheme:v}=Q9e({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:d});return J9e({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:d}),_.jsx(OW.Provider,{value:{colorScheme:m,setColorScheme:y,clearColorScheme:v,getRootElement:d,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:f,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:_.jsxs(D1e,{theme:e,children:[o&&_.jsx($1e,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&_.jsx(H9e,{}),t]})})}L1e.displayName="@mantine/core/MantineProvider";function Np({classNames:e,styles:t,props:n,stylesCtx:r}){const i=qs();return{resolvedClassNames:wL({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:pM({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const Z9e={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function eze({theme:e,options:t,unstyled:n}){return Dt((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||Z9e[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function tze({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return wL({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function Ioe({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return wL({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function nze({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function rze({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function ize({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function sze({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=wL({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function oze({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function aze({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:d,withStaticClasses:f,headless:h,transformedStyles:p}){return Dt(eze({theme:e,options:t,unstyled:a||h}),sze({theme:e,themeName:n,selector:r,props:c,stylesCtx:d}),oze({options:t,classes:o,selector:r,unstyled:a}),Ioe({selector:r,stylesCtx:d,theme:e,classNames:s,props:c}),Ioe({selector:r,stylesCtx:d,theme:e,classNames:p,props:c}),tze({selector:r,stylesCtx:d,options:t,props:c,theme:e}),nze({rootSelector:l,selector:r,className:u}),rze({selector:r,classes:o,unstyled:a||h}),f&&!h&&ize({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function uze({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return pM({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function VU({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...VU({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function lze(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...eS(n[r])}}),t),{})}function cze({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=lze([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,d,f;return(f=(d=(c=n.components)==null?void 0:c[l])==null?void 0:d.vars)==null?void 0:f.call(d,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function dze({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:d,withStylesTransform:f}){return{...!f&&uze({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!f&&pM({theme:e,styles:a,props:i,stylesCtx:s})[n],...!f&&pM({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...cze({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:d}),...o===n?VU({style:u,theme:e}):null,...VU({style:r==null?void 0:r.style,theme:e})}}function fze({props:e,stylesCtx:t,themeName:n}){var o;const r=qs(),i=(o=P9e())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function Ot({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:d}){const f=qs(),h=A9e(),p=I9e(),m=R9e(),y=(Array.isArray(e)?e:[e]).filter(x=>x),{withStylesTransform:v,getTransformedStyles:w}=fze({props:n,stylesCtx:r,themeName:y});return(x,S)=>({className:aze({theme:f,options:S,themeName:y,selector:x,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:w([S==null?void 0:S.styles,l])}),style:dze({theme:f,themeName:y,selector:x,options:S,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:d,headless:m,withStylesTransform:v})})}function hze(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, white ${t*100}%)`;const{r:n,g:r,b:i,a:s}=EL(e),o=a=>Math.round(a+(255-a)*t);return`rgba(${o(n)}, ${o(r)}, ${o(i)}, ${s})`}function rv(e,t){return typeof e=="boolean"?e:t.autoContrast}function Roe(e){const t=document.createElement("style");return t.setAttribute("data-mantine-styles","inline"),t.innerHTML="*, *::before, *::after {transition: none !important;}",t.setAttribute("data-mantine-disable-transition","true"),e&&t.setAttribute("nonce",e),document.head.appendChild(t),()=>document.querySelectorAll("[data-mantine-disable-transition]").forEach(r=>r.remove())}function pze({keepTransitions:e}={}){const t=P.useRef(),n=P.useRef(),r=P.useContext(OW),i=xL(),s=P.useRef(i==null?void 0:i());if(!r)throw new Error("[@mantine/core] MantineProvider was not found in tree");const o=d=>{r.setColorScheme(d),t.current=e?()=>{}:Roe(s.current),window.clearTimeout(n.current),n.current=window.setTimeout(()=>{var f;(f=t.current)==null||f.call(t)},10)},a=()=>{r.clearColorScheme(),t.current=e?()=>{}:Roe(s.current),window.clearTimeout(n.current),n.current=window.setTimeout(()=>{var d;(d=t.current)==null||d.call(t)},10)},u=n9e("light",{getInitialValueInEffect:!1}),l=r.colorScheme==="auto"?u:r.colorScheme,c=P.useCallback(()=>o(l==="light"?"dark":"light"),[o,l]);return P.useEffect(()=>()=>{var d;(d=t.current)==null||d.call(t),window.clearTimeout(n.current)},[]),{colorScheme:r.colorScheme,setColorScheme:o,clearColorScheme:a,toggleColorScheme:c}}function $e(e,t,n){var o;const r=qs(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...eS(n)}}function U8(e){return ms(e).reduce((t,n)=>e[n]!==void 0?`${t}${UBe(n)}:${e[n]};`:t,"").trim()}function mze({selector:e,styles:t,media:n,container:r}){const i=t?U8(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${U8(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${U8(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function UI(e){const t=xL();return _.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:mze(e)}})}function Gb(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:d,py:f,pt:h,pb:p,pl:m,pr:y,pe:v,ps:w,bd:x,bg:S,c:E,opacity:T,ff:A,fz:I,fw:k,lts:D,ta:M,lh:z,fs:O,tt:$,td:F,w:B,miw:q,maw:G,h:K,mih:L,mah:V,bgsz:X,bgp:H,bgr:Q,bga:Z,pos:ne,top:ue,left:le,bottom:ce,right:ge,inset:se,display:te,flex:Ee,hiddenFrom:we,visibleFrom:De,lightHidden:Le,darkHidden:Ne,sx:Te,...qe}=e;return{styleProps:eS({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:d,py:f,pt:h,pb:p,pl:m,pr:y,pe:v,ps:w,bd:x,bg:S,c:E,opacity:T,ff:A,fz:I,fw:k,lts:D,ta:M,lh:z,fs:O,tt:$,td:F,w:B,miw:q,maw:G,h:K,mih:L,mah:V,bgsz:X,bgp:H,bgr:Q,bga:Z,pos:ne,top:ue,left:le,bottom:ce,right:ge,inset:se,display:te,flex:Ee,hiddenFrom:we,visibleFrom:De,lightHidden:Le,darkHidden:Ne,sx:Te}),rest:qe}}const gze={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function $W(e,t){const n=_c({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function yze(e,t){const n=_c({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:$W(e,t)}function vze(e,t){if(typeof e=="number")return ze(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${ze(n)}`;return r&&(s+=` ${r}`),i.length>0&&(s+=` ${$W(i.join(" "),t)}`),s.trim()}return e}const koe={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function bze(e){return typeof e=="string"&&e in koe?koe[e]:e}const _ze=["h1","h2","h3","h4","h5","h6"];function wze(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&_ze.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?ze(e):e}function xze(e){return e}const Eze=["h1","h2","h3","h4","h5","h6"];function Sze(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&Eze.includes(e)?`var(--mantine-${e}-line-height)`:e}function Tze(e){return typeof e=="number"?ze(e):e}function Cze(e,t){if(typeof e=="number")return ze(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return ze(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const V8={color:$W,textColor:yze,fontSize:wze,spacing:Cze,identity:xze,size:Tze,lineHeight:Sze,fontFamily:bze,border:vze};function Poe(e){return e.replace("(min-width: ","").replace("em)","")}function Aze({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(Poe(i))-Number(Poe(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function Ize(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function Rze(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function kze(e){return typeof e=="object"&&e!==null?ms(e).filter(t=>t!=="base"):[]}function Pze(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function F1e({styleProps:e,data:t,theme:n}){return Aze(ms(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=Rze(e[i]);if(!Ize(e[i]))return o.forEach(l=>{r.inlineStyles[l]=V8[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=kze(e[i]);return o.forEach(l=>{a&&(r.styles[l]=V8[s.type](a,n)),u.forEach(c=>{const d=`(min-width: ${n.breakpoints[c]})`;r.media[d]={...r.media[d],[l]:V8[s.type](Pze(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function SL(){return`__m__-${P.useId().replace(/:/g,"")}`}function LW(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...LW(r,t)}),{}):typeof e=="function"?e(t):e??{}}function j1e(e){return e.startsWith("data-")?e:`data-${e}`}function Nze(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[j1e(n)]=e[n]),t},{})}function B1e(e){return e?typeof e=="string"?{[j1e(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...B1e(n)}),{}):Nze(e):null}function HU(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...HU(r,t)}),{}):typeof e=="function"?e(t):e??{}}function Oze({theme:e,style:t,vars:n,styleProps:r}){const i=HU(t,e),s=HU(n,e);return{...i,...s,...r}}const z1e=P.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:d,__size:f,...h},p)=>{var I;const m=qs(),y=e||"div",{styleProps:v,rest:w}=Gb(h),x=k9e(),S=(I=x==null?void 0:x())==null?void 0:I(v.sx),E=SL(),T=F1e({styleProps:v,theme:m,data:gze}),A={ref:p,style:Oze({theme:m,style:t,vars:n,styleProps:T.inlineStyles}),className:Dt(r,S,{[E]:T.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":x1e(o)?void 0:o||void 0,size:f,...B1e(s),...w};return _.jsxs(_.Fragment,{children:[T.hasResponsiveStyles&&_.jsx(UI,{selector:`.${E}`,styles:T.styles,media:T.media}),typeof d=="function"?d(A):_.jsx(y,{...A})]})});z1e.displayName="@mantine/core/Box";const ke=z1e;function U1e(e){return e}function tt(e){const t=P.forwardRef(e);return t.extend=U1e,t.withProps=n=>{const r=P.forwardRef((i,s)=>_.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t}function Ws(e){const t=P.forwardRef(e);return t.withProps=n=>{const r=P.forwardRef((i,s)=>_.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t.extend=U1e,t}const Dze=P.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Bu(){return P.useContext(Dze)}var VI=p1e();const Mze=su(VI);function $ze(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function H8(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const FT=typeof window<"u"&&window.requestAnimationFrame;function Lze({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=P.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=P.useState(r?{}:o),l=p=>{VI.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function d(p){const m=e||$ze(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}bc(()=>{typeof FT=="function"&&FT(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),FT(()=>{const p=H8(i);c({...d(p),height:p})})}:()=>{const p=H8(i);c({...d(p),willChange:"height",height:p}),FT(()=>c({height:s,overflow:"hidden"}))})},[r]);const f=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=H8(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...y}={}){const v=y[m];return{"aria-hidden":!r,...y,[m]:k1e(i,v),onTransitionEnd:f,style:{boxSizing:"border-box",...p,...a}}}return h}const Fze={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},iv=tt((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=$e("Collapse",Fze,e),c=qs(),d=NW(),h=(c.respectReducedMotion?d:!1)?0:i,p=Lze({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?_.jsx(ke,{...l,children:n}):null:_.jsx(ke,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...LW(o,c)},ref:t,...l}),children:n})});iv.displayName="@mantine/core/Collapse";const[jze,Od]=lo("ScrollArea.Root component was not found in tree");function zx(e,t){const n=P0(t);Wb(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const Bze=P.forwardRef((e,t)=>{const{style:n,...r}=e,i=Od(),[s,o]=P.useState(0),[a,u]=P.useState(0),l=!!(s&&a);return zx(i.scrollbarX,()=>{var d;const c=((d=i.scrollbarX)==null?void 0:d.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),zx(i.scrollbarY,()=>{var d;const c=((d=i.scrollbarY)==null?void 0:d.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?_.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),zze=P.forwardRef((e,t)=>{const n=Od(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?_.jsx(Bze,{...e,ref:t}):null}),Uze={scrollHideDelay:1e3,type:"hover"},V1e=P.forwardRef((e,t)=>{const n=$e("ScrollAreaRoot",Uze,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=P.useState(null),[l,c]=P.useState(null),[d,f]=P.useState(null),[h,p]=P.useState(null),[m,y]=P.useState(null),[v,w]=P.useState(0),[x,S]=P.useState(0),[E,T]=P.useState(!1),[A,I]=P.useState(!1),k=Ds(t,D=>u(D));return _.jsx(jze,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:d,onContentChange:f,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:T,scrollbarY:m,onScrollbarYChange:y,scrollbarYEnabled:A,onScrollbarYEnabledChange:I,onCornerWidthChange:w,onCornerHeightChange:S},children:_.jsx(ke,{...o,ref:k,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${v}px`,"--sa-corner-height":s!=="xy"?"0px":`${x}px`}})})});V1e.displayName="@mantine/core/ScrollAreaRoot";function H1e(e,t){const n=e/t;return Number.isNaN(n)?0:n}function TL(e){const t=H1e(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function q1e(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Vze(e,[t,n]){return Math.min(n,Math.max(t,e))}function Noe(e,t,n="ltr"){const r=TL(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=Vze(e,u);return q1e([0,o],[0,a])(l)}function Hze(e,t,n,r="ltr"){const i=TL(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,d=r==="ltr"?[0,c]:[c*-1,0];return q1e([u,l],d)(e)}function W1e(e,t){return e>0&&e<t}function mM(e){return e?parseInt(e,10):0}function G1(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[qze,G1e]=lo("ScrollAreaScrollbar was not found in tree"),Y1e=P.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...d}=e,f=Od(),[h,p]=P.useState(null),m=Ds(t,I=>p(I)),y=P.useRef(null),v=P.useRef(""),{viewport:w}=f,x=n.content-n.viewport,S=P0(l),E=P0(a),T=vL(c,10),A=I=>{if(y.current){const k=I.clientX-y.current.left,D=I.clientY-y.current.top;u({x:k,y:D})}};return P.useEffect(()=>{const I=k=>{const D=k.target;(h==null?void 0:h.contains(D))&&S(k,x)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[w,h,x,S]),P.useEffect(E,[n,E]),zx(h,T),zx(f.content,T),_.jsx(qze,{value:{scrollbar:h,hasThumb:r,onThumbChange:P0(i),onThumbPointerUp:P0(s),onThumbPositionChange:E,onThumbPointerDown:P0(o)},children:_.jsx("div",{...d,ref:m,style:{position:"absolute",...d.style},onPointerDown:G1(e.onPointerDown,I=>{I.preventDefault(),I.button===0&&(I.target.setPointerCapture(I.pointerId),y.current=h.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",document.body.style.pointerEvents="none",A(I))}),onPointerMove:G1(e.onPointerMove,A),onPointerUp:G1(e.onPointerUp,I=>{I.preventDefault();const k=I.target;k.hasPointerCapture(I.pointerId)&&k.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=v.current,document.body.style.pointerEvents="auto",y.current=null})})})}),Wze=P.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Od(),[a,u]=P.useState(),l=P.useRef(null),c=Ds(t,l,o.onScrollbarXChange);return P.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),_.jsx(Y1e,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${TL(n)}px`},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(o.viewport){const h=o.viewport.scrollLeft+d.deltaX;e.onWheelScroll(h),W1e(h,f)&&d.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:mM(a.paddingLeft),paddingEnd:mM(a.paddingRight)}})}})}),Gze=P.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Od(),[a,u]=P.useState(),l=P.useRef(null),c=Ds(t,l,o.onScrollbarYChange);return P.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),_.jsx(Y1e,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${TL(n)}px`,...i},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(o.viewport){const h=o.viewport.scrollTop+d.deltaY;e.onWheelScroll(h),W1e(h,f)&&d.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:mM(a.paddingTop),paddingEnd:mM(a.paddingBottom)}})}})}),FW=P.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=Bu(),s=Od(),o=P.useRef(null),a=P.useRef(0),[u,l]=P.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=H1e(u.viewport,u.content),d={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},f=(h,p)=>Hze(h,a.current,u,p);return n==="horizontal"?_.jsx(Wze,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=Noe(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=f(h,i))}}):n==="vertical"?_.jsx(Gze,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=Noe(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=f(h))}}):null}),K1e=P.forwardRef((e,t)=>{const n=Od(),{forceMount:r,...i}=e,[s,o]=P.useState(!1),a=e.orientation==="horizontal",u=vL(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return zx(n.viewport,u),zx(n.content,u),r||s?_.jsx(FW,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),Yze=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Od(),[s,o]=P.useState(!1);return P.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?_.jsx(K1e,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),Kze=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Od(),s=e.orientation==="horizontal",[o,a]=P.useState("hidden"),u=vL(()=>a("idle"),100);return P.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),P.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let d=l[c];const f=()=>{const h=l[c];d!==h&&(a("scrolling"),u()),d=h};return l.addEventListener("scroll",f),()=>l.removeEventListener("scroll",f)}},[i.viewport,s,u]),n||o!=="hidden"?_.jsx(FW,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:G1(e.onPointerEnter,()=>a("interacting")),onPointerLeave:G1(e.onPointerLeave,()=>a("idle"))}):null}),Ooe=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Od(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return P.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?_.jsx(Yze,{...r,ref:t,forceMount:n}):i.type==="scroll"?_.jsx(Kze,{...r,ref:t,forceMount:n}):i.type==="auto"?_.jsx(K1e,{...r,ref:t,forceMount:n}):i.type==="always"?_.jsx(FW,{...r,ref:t}):null});function Xze(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const Qze=P.forwardRef((e,t)=>{const{style:n,...r}=e,i=Od(),s=G1e(),{onThumbPositionChange:o}=s,a=Ds(t,c=>s.onThumbChange(c)),u=P.useRef(),l=vL(()=>{u.current&&(u.current(),u.current=void 0)},100);return P.useEffect(()=>{const{viewport:c}=i;if(c){const d=()=>{if(l(),!u.current){const f=Xze(c,o);u.current=f,o()}};return o(),c.addEventListener("scroll",d),()=>c.removeEventListener("scroll",d)}},[i.viewport,l,o]),_.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:G1(e.onPointerDownCapture,c=>{const f=c.target.getBoundingClientRect(),h=c.clientX-f.left,p=c.clientY-f.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:G1(e.onPointerUp,s.onThumbPointerUp)})}),Doe=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=G1e();return n||i.hasThumb?_.jsx(Qze,{ref:t,...r}):null}),X1e=P.forwardRef(({children:e,style:t,...n},r)=>{const i=Od(),s=Ds(r,i.onViewportChange);return _.jsx(ke,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:_.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});X1e.displayName="@mantine/core/ScrollAreaViewport";var jW={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const Q1e={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},Jze=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":ze(t)}}),sv=tt((e,t)=>{const n=$e("ScrollArea",Q1e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:d,viewportProps:f,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:y,scrollbars:v,...w}=n,[x,S]=P.useState(!1),E=Ot({name:"ScrollArea",props:n,classes:jW,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Jze});return _.jsxs(V1e,{type:c==="never"?"always":c,scrollHideDelay:d,ref:t,scrollbars:v,...E("root"),...w,children:[_.jsx(X1e,{...f,...E("viewport",{style:f==null?void 0:f.style}),ref:h,"data-offset-scrollbars":y===!0?"xy":y||void 0,"data-scrollbars":v||void 0,onScroll:T=>{var A;(A=f==null?void 0:f.onScroll)==null||A.call(f,T),p==null||p({x:T.currentTarget.scrollLeft,y:T.currentTarget.scrollTop})},children:m}),(v==="xy"||v==="x")&&_.jsx(Ooe,{...E("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1),children:_.jsx(Doe,{...E("thumb")})}),(v==="xy"||v==="y")&&_.jsx(Ooe,{...E("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1),children:_.jsx(Doe,{...E("thumb")})}),_.jsx(zze,{...E("corner"),"data-hovered":x||void 0,"data-hidden":c==="never"||void 0})]})});sv.displayName="@mantine/core/ScrollArea";const BW=tt((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:d,unstyled:f,variant:h,viewportProps:p,scrollbars:m,style:y,vars:v,...w}=$e("ScrollAreaAutosize",Q1e,e);return _.jsx(ke,{...w,ref:t,style:[{display:"flex",overflow:"auto"},y],children:_.jsx(ke,{style:{display:"flex",flexDirection:"column",flex:1},children:_.jsx(sv,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:d,unstyled:f,variant:h,viewportProps:p,vars:v,scrollbars:m,children:n})})})});sv.classes=jW;BW.displayName="@mantine/core/ScrollAreaAutosize";BW.classes=jW;sv.Autosize=BW;var J1e={root:"m_87cf2631"};const Zze={__staticSelector:"UnstyledButton"},Ps=Ws((e,t)=>{const n=$e("UnstyledButton",Zze,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,d=Ot({name:s,props:n,classes:J1e,className:r,style:l,classNames:a,styles:u,unstyled:o});return _.jsx(ke,{...d("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});Ps.classes=J1e;Ps.displayName="@mantine/core/UnstyledButton";var Z1e={root:"m_515a97f8"};const eUe={},zW=tt((e,t)=>{const n=$e("VisuallyHidden",eUe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=Ot({name:"VisuallyHidden",classes:Z1e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return _.jsx(ke,{component:"span",ref:t,...c("root"),...l})});zW.classes=Z1e;zW.displayName="@mantine/core/VisuallyHidden";var ebe={root:"m_1b7284a3"};const tUe={},nUe=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:ii(t),"--paper-shadow":RW(n)}}),ub=Ws((e,t)=>{const n=$e("Paper",tUe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:d,variant:f,mod:h,...p}=n,m=Ot({name:"Paper",props:n,classes:ebe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:nUe});return _.jsx(ke,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:f,...p})});ub.classes=ebe;ub.displayName="@mantine/core/Paper";function tS(e){return tbe(e)?(e.nodeName||"").toLowerCase():"#document"}function _l(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Eg(e){var t;return(t=(tbe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function tbe(e){return e instanceof Node||e instanceof _l(e).Node}function os(e){return e instanceof Element||e instanceof _l(e).Element}function wc(e){return e instanceof HTMLElement||e instanceof _l(e).HTMLElement}function qU(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof _l(e).ShadowRoot}function HI(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=wd(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function rUe(e){return["table","td","th"].includes(tS(e))}function CL(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function UW(e){const t=VW(),n=wd(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function iUe(e){let t=eg(e);for(;wc(t)&&!yy(t);){if(CL(t))return null;if(UW(t))return t;t=eg(t)}return null}function VW(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function yy(e){return["html","body","#document"].includes(tS(e))}function wd(e){return _l(e).getComputedStyle(e)}function AL(e){return os(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function eg(e){if(tS(e)==="html")return e;const t=e.assignedSlot||e.parentNode||qU(e)&&e.host||Eg(e);return qU(t)?t.host:t}function nbe(e){const t=eg(e);return yy(t)?e.ownerDocument?e.ownerDocument.body:e.body:wc(t)&&HI(t)?t:nbe(t)}function Um(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=nbe(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=_l(i);return s?t.concat(o,o.visualViewport||[],HI(i)?i:[],o.frameElement&&n?Um(o.frameElement):[]):t.concat(i,Um(i,[],n))}function Moe(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function h2(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&qU(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function rbe(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function ibe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function sUe(e){return uUe()?!1:!$oe()&&e.width===0&&e.height===0||$oe()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function oUe(){return/apple/i.test(navigator.vendor)}function $oe(){const e=/android/i;return e.test(rbe())||e.test(ibe())}function aUe(){return rbe().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function uUe(){return ibe().includes("jsdom/")}function WU(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function lUe(e){return"nativeEvent"in e}function cUe(e){return e.matches("html,body")}function D1(e){return(e==null?void 0:e.ownerDocument)||document}function q8(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function Ow(e){return"composedPath"in e?e.composedPath()[0]:e.target}const dUe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function fUe(e){return wc(e)&&e.matches(dUe)}const ac=Math.min,Ha=Math.max,gM=Math.round,BP=Math.floor,vy=e=>({x:e,y:e}),hUe={left:"right",right:"left",bottom:"top",top:"bottom"},pUe={start:"end",end:"start"};function GU(e,t,n){return Ha(e,ac(t,n))}function tg(e,t){return typeof e=="function"?e(t):e}function $f(e){return e.split("-")[0]}function nS(e){return e.split("-")[1]}function HW(e){return e==="x"?"y":"x"}function qW(e){return e==="y"?"height":"width"}function ng(e){return["top","bottom"].includes($f(e))?"y":"x"}function WW(e){return HW(ng(e))}function mUe(e,t,n){n===void 0&&(n=!1);const r=nS(e),i=WW(e),s=qW(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=yM(o)),[o,yM(o)]}function gUe(e){const t=yM(e);return[YU(e),t,YU(t)]}function YU(e){return e.replace(/start|end/g,t=>pUe[t])}function yUe(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function vUe(e,t,n,r){const i=nS(e);let s=yUe($f(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(YU)))),s}function yM(e){return e.replace(/left|right|bottom|top/g,t=>hUe[t])}function bUe(e){return{top:0,right:0,bottom:0,left:0,...e}}function GW(e){return typeof e!="number"?bUe(e):{top:e,right:e,bottom:e,left:e}}function Ux(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Loe(e,t,n){let{reference:r,floating:i}=e;const s=ng(t),o=WW(t),a=qW(o),u=$f(t),l=s==="y",c=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(nS(t)){case"start":h[o]-=f*(n&&l?-1:1);break;case"end":h[o]+=f*(n&&l?-1:1);break}return h}const _Ue=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:d}=Loe(l,r,u),f=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:y,fn:v}=a[m],{x:w,y:x,data:S,reset:E}=await v({x:c,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=w??c,d=x??d,h={...h,[y]:{...h[y],...S}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(f=E.placement),E.rects&&(l=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:d}=Loe(l,f,u)),m=-1)}return{x:c,y:d,placement:f,strategy:i,middlewareData:h}};async function YW(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=tg(t,e),p=GW(h),y=a[f?d==="floating"?"reference":"floating":d],v=Ux(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(y)))==null||n?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),w=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),S=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},E=Ux(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:x,strategy:u}):w);return{top:(v.top-E.top+p.top)/S.y,bottom:(E.bottom-v.bottom+p.bottom)/S.y,left:(v.left-E.left+p.left)/S.x,right:(E.right-v.right+p.right)/S.x}}const wUe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=tg(e,t)||{};if(l==null)return{};const d=GW(c),f={x:n,y:r},h=WW(i),p=qW(h),m=await o.getDimensions(l),y=h==="y",v=y?"top":"left",w=y?"bottom":"right",x=y?"clientHeight":"clientWidth",S=s.reference[p]+s.reference[h]-f[h]-s.floating[p],E=f[h]-s.reference[h],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let A=T?T[x]:0;(!A||!await(o.isElement==null?void 0:o.isElement(T)))&&(A=a.floating[x]||s.floating[p]);const I=S/2-E/2,k=A/2-m[p]/2-1,D=ac(d[v],k),M=ac(d[w],k),z=D,O=A-m[p]-M,$=A/2-m[p]/2+I,F=GU(z,$,O),B=!u.arrow&&nS(i)!=null&&$!==F&&s.reference[p]/2-($<z?D:M)-m[p]/2<0,q=B?$<z?$-z:$-O:0;return{[h]:f[h]+q,data:{[h]:F,centerOffset:$-F-q,...B&&{alignmentOffset:q}},reset:B}}}),xUe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...y}=tg(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=$f(i),w=ng(a),x=$f(a)===a,S=await(u.isRTL==null?void 0:u.isRTL(l.floating)),E=f||(x||!m?[yM(a)]:gUe(a)),T=p!=="none";!f&&T&&E.push(...vUe(a,m,p,S));const A=[a,...E],I=await YW(t,y),k=[];let D=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&k.push(I[v]),d){const $=mUe(i,o,S);k.push(I[$[0]],I[$[1]])}if(D=[...D,{placement:i,overflows:k}],!k.every($=>$<=0)){var M,z;const $=(((M=s.flip)==null?void 0:M.index)||0)+1,F=A[$];if(F)return{data:{index:$,overflows:D},reset:{placement:F}};let B=(z=D.filter(q=>q.overflows[0]<=0).sort((q,G)=>q.overflows[1]-G.overflows[1])[0])==null?void 0:z.placement;if(!B)switch(h){case"bestFit":{var O;const q=(O=D.filter(G=>{if(T){const K=ng(G.placement);return K===w||K==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(K=>K>0).reduce((K,L)=>K+L,0)]).sort((G,K)=>G[1]-K[1])[0])==null?void 0:O[0];q&&(B=q);break}case"initialPlacement":B=a;break}if(i!==B)return{reset:{placement:B}}}return{}}}};function sbe(e){const t=ac(...e.map(s=>s.left)),n=ac(...e.map(s=>s.top)),r=Ha(...e.map(s=>s.right)),i=Ha(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function EUe(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>Ux(sbe(i)))}const SUe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=tg(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),d=EUe(c),f=Ux(sbe(c)),h=GW(a);function p(){if(d.length===2&&d[0].left>d[1].right&&u!=null&&l!=null)return d.find(y=>u>y.left-h.left&&u<y.right+h.right&&l>y.top-h.top&&l<y.bottom+h.bottom)||f;if(d.length>=2){if(ng(n)==="y"){const D=d[0],M=d[d.length-1],z=$f(n)==="top",O=D.top,$=M.bottom,F=z?D.left:M.left,B=z?D.right:M.right,q=B-F,G=$-O;return{top:O,bottom:$,left:F,right:B,width:q,height:G,x:F,y:O}}const y=$f(n)==="left",v=Ha(...d.map(D=>D.right)),w=ac(...d.map(D=>D.left)),x=d.filter(D=>y?D.left===w:D.right===v),S=x[0].top,E=x[x.length-1].bottom,T=w,A=v,I=A-T,k=E-S;return{top:S,bottom:E,left:T,right:A,width:I,height:k,x:T,y:S}}return f}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function TUe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=$f(n),a=nS(n),u=ng(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,d=tg(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:f*l}:{x:f*l,y:h*c}}const CUe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await TUe(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},AUe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:v,y:w}=y;return{x:v,y:w}}},...u}=tg(e,t),l={x:n,y:r},c=await YW(t,u),d=ng($f(i)),f=HW(d);let h=l[f],p=l[d];if(s){const y=f==="y"?"top":"left",v=f==="y"?"bottom":"right",w=h+c[y],x=h-c[v];h=GU(w,h,x)}if(o){const y=d==="y"?"top":"left",v=d==="y"?"bottom":"right",w=p+c[y],x=p-c[v];p=GU(w,p,x)}const m=a.fn({...t,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},IUe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=tg(e,t),c={x:n,y:r},d=ng(i),f=HW(d);let h=c[f],p=c[d];const m=tg(a,t),y=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const x=f==="y"?"height":"width",S=s.reference[f]-s.floating[x]+y.mainAxis,E=s.reference[f]+s.reference[x]-y.mainAxis;h<S?h=S:h>E&&(h=E)}if(l){var v,w;const x=f==="y"?"width":"height",S=["top","left"].includes($f(i)),E=s.reference[d]-s.floating[x]+(S&&((v=o.offset)==null?void 0:v[d])||0)+(S?0:y.crossAxis),T=s.reference[d]+s.reference[x]+(S?0:((w=o.offset)==null?void 0:w[d])||0)-(S?y.crossAxis:0);p<E?p=E:p>T&&(p=T)}return{[f]:h,[d]:p}}}},RUe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=tg(e,t),u=await YW(t,a),l=$f(n),c=nS(n),d=ng(n)==="y",{width:f,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const y=h-u.top-u.bottom,v=f-u.left-u.right,w=ac(h-u[p],y),x=ac(f-u[m],v),S=!t.middlewareData.shift;let E=w,T=x;if(d?T=c||S?ac(x,v):v:E=c||S?ac(w,y):y,S&&!c){const I=Ha(u.left,0),k=Ha(u.right,0),D=Ha(u.top,0),M=Ha(u.bottom,0);d?T=f-2*(I!==0||k!==0?I+k:Ha(u.left,u.right)):E=h-2*(D!==0||M!==0?D+M:Ha(u.top,u.bottom))}await o({...t,availableWidth:T,availableHeight:E});const A=await i.getDimensions(s.floating);return f!==A.width||h!==A.height?{reset:{rects:!0}}:{}}}};function obe(e){const t=wd(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=wc(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=gM(n)!==s||gM(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function KW(e){return os(e)?e:e.contextElement}function fx(e){const t=KW(e);if(!wc(t))return vy(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=obe(t);let o=(s?gM(n.width):n.width)/r,a=(s?gM(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const kUe=vy(0);function abe(e){const t=_l(e);return!VW()||!t.visualViewport?kUe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function PUe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==_l(e)?!1:t}function lb(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=KW(e);let o=vy(1);t&&(r?os(r)&&(o=fx(r)):o=fx(e));const a=PUe(s,n,r)?abe(s):vy(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,d=i.height/o.y;if(s){const f=_l(s),h=r&&os(r)?_l(r):r;let p=f,m=p.frameElement;for(;m&&r&&h!==p;){const y=fx(m),v=m.getBoundingClientRect(),w=wd(m),x=v.left+(m.clientLeft+parseFloat(w.paddingLeft))*y.x,S=v.top+(m.clientTop+parseFloat(w.paddingTop))*y.y;u*=y.x,l*=y.y,c*=y.x,d*=y.y,u+=x,l+=S,p=_l(m),m=p.frameElement}}return Ux({width:c,height:d,x:u,y:l})}function NUe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=Eg(r),a=t?CL(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=vy(1);const c=vy(0),d=wc(r);if((d||!d&&!s)&&((tS(r)!=="body"||HI(o))&&(u=AL(r)),wc(r))){const f=lb(r);l=fx(r),c.x=f.x+r.clientLeft,c.y=f.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function OUe(e){return Array.from(e.getClientRects())}function ube(e){return lb(Eg(e)).left+AL(e).scrollLeft}function DUe(e){const t=Eg(e),n=AL(e),r=e.ownerDocument.body,i=Ha(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Ha(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+ube(e);const a=-n.scrollTop;return wd(r).direction==="rtl"&&(o+=Ha(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function MUe(e,t){const n=_l(e),r=Eg(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=VW();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function $Ue(e,t){const n=lb(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=wc(e)?fx(e):vy(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function Foe(e,t,n){let r;if(t==="viewport")r=MUe(e,n);else if(t==="document")r=DUe(Eg(e));else if(os(t))r=$Ue(t,n);else{const i=abe(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return Ux(r)}function lbe(e,t){const n=eg(e);return n===t||!os(n)||yy(n)?!1:wd(n).position==="fixed"||lbe(n,t)}function LUe(e,t){const n=t.get(e);if(n)return n;let r=Um(e,[],!1).filter(a=>os(a)&&tS(a)!=="body"),i=null;const s=wd(e).position==="fixed";let o=s?eg(e):e;for(;os(o)&&!yy(o);){const a=wd(o),u=UW(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||HI(o)&&!u&&lbe(e,o))?r=r.filter(c=>c!==o):i=a,o=eg(o)}return t.set(e,r),r}function FUe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?CL(t)?[]:LUe(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const d=Foe(t,c,i);return l.top=Ha(d.top,l.top),l.right=ac(d.right,l.right),l.bottom=ac(d.bottom,l.bottom),l.left=Ha(d.left,l.left),l},Foe(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function jUe(e){const{width:t,height:n}=obe(e);return{width:t,height:n}}function BUe(e,t,n){const r=wc(t),i=Eg(t),s=n==="fixed",o=lb(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=vy(0);if(r||!r&&!s)if((tS(t)!=="body"||HI(i))&&(a=AL(t)),r){const d=lb(t,!0,s,t);u.x=d.x+t.clientLeft,u.y=d.y+t.clientTop}else i&&(u.x=ube(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function W8(e){return wd(e).position==="static"}function joe(e,t){return!wc(e)||wd(e).position==="fixed"?null:t?t(e):e.offsetParent}function cbe(e,t){const n=_l(e);if(CL(e))return n;if(!wc(e)){let i=eg(e);for(;i&&!yy(i);){if(os(i)&&!W8(i))return i;i=eg(i)}return n}let r=joe(e,t);for(;r&&rUe(r)&&W8(r);)r=joe(r,t);return r&&yy(r)&&W8(r)&&!UW(r)?n:r||iUe(e)||n}const zUe=async function(e){const t=this.getOffsetParent||cbe,n=this.getDimensions,r=await n(e.floating);return{reference:BUe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function UUe(e){return wd(e).direction==="rtl"}const VUe={convertOffsetParentRelativeRectToViewportRelativeRect:NUe,getDocumentElement:Eg,getClippingRect:FUe,getOffsetParent:cbe,getElementRects:zUe,getClientRects:OUe,getDimensions:jUe,getScale:fx,isElement:os,isRTL:UUe};function HUe(e,t){let n=null,r;const i=Eg(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:d,height:f}=e.getBoundingClientRect();if(a||t(),!d||!f)return;const h=BP(c),p=BP(i.clientWidth-(l+d)),m=BP(i.clientHeight-(c+f)),y=BP(l),w={rootMargin:-h+"px "+-p+"px "+-m+"px "+-y+"px",threshold:Ha(0,ac(1,u))||1};let x=!0;function S(E){const T=E[0].intersectionRatio;if(T!==u){if(!x)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}x=!1}try{n=new IntersectionObserver(S,{...w,root:i.ownerDocument})}catch{n=new IntersectionObserver(S,w)}n.observe(e)}return o(!0),s}function qUe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=KW(e),c=i||s?[...l?Um(l):[],...Um(t)]:[];c.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=l&&a?HUe(l,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(v=>{let[w]=v;w&&w.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var x;(x=h)==null||x.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?lb(e):null;u&&y();function y(){const v=lb(e);m&&(v.x!==m.x||v.y!==m.y||v.width!==m.width||v.height!==m.height)&&n(),m=v,p=requestAnimationFrame(y)}return n(),()=>{var v;c.forEach(w=>{i&&w.removeEventListener("scroll",n),s&&w.removeEventListener("resize",n)}),d==null||d(),(v=h)==null||v.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const WUe=CUe,GUe=AUe,YUe=xUe,KUe=RUe,Boe=wUe,XUe=SUe,QUe=IUe,JUe=(e,t,n)=>{const r=new Map,i={platform:VUe,...n},s={...i.platform,_c:r};return _Ue(e,t,{...i,platform:s})};var nD=typeof document<"u"?P.useLayoutEffect:P.useEffect;function vM(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!vM(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!vM(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function dbe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function zoe(e,t){const n=dbe(e);return Math.round(t*n)/n}function Uoe(e){const t=P.useRef(e);return nD(()=>{t.current=e}),t}function ZUe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,d]=P.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,h]=P.useState(r);vM(f,r)||h(r);const[p,m]=P.useState(null),[y,v]=P.useState(null),w=P.useCallback(q=>{q!==T.current&&(T.current=q,m(q))},[]),x=P.useCallback(q=>{q!==A.current&&(A.current=q,v(q))},[]),S=s||p,E=o||y,T=P.useRef(null),A=P.useRef(null),I=P.useRef(c),k=u!=null,D=Uoe(u),M=Uoe(i),z=P.useCallback(()=>{if(!T.current||!A.current)return;const q={placement:t,strategy:n,middleware:f};M.current&&(q.platform=M.current),JUe(T.current,A.current,q).then(G=>{const K={...G,isPositioned:!0};O.current&&!vM(I.current,K)&&(I.current=K,VI.flushSync(()=>{d(K)}))})},[f,t,n,M]);nD(()=>{l===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,d(q=>({...q,isPositioned:!1})))},[l]);const O=P.useRef(!1);nD(()=>(O.current=!0,()=>{O.current=!1}),[]),nD(()=>{if(S&&(T.current=S),E&&(A.current=E),S&&E){if(D.current)return D.current(S,E,z);z()}},[S,E,z,D,k]);const $=P.useMemo(()=>({reference:T,floating:A,setReference:w,setFloating:x}),[w,x]),F=P.useMemo(()=>({reference:S,floating:E}),[S,E]),B=P.useMemo(()=>{const q={position:n,left:0,top:0};if(!F.floating)return q;const G=zoe(F.floating,c.x),K=zoe(F.floating,c.y);return a?{...q,transform:"translate("+G+"px, "+K+"px)",...dbe(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:G,top:K}},[n,a,F.floating,c.x,c.y]);return P.useMemo(()=>({...c,update:z,refs:$,elements:F,floatingStyles:B}),[c,z,$,F,B])}const e7e=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Boe({element:r.current,padding:i}).fn(n):{}:r?Boe({element:r,padding:i}).fn(n):{}}}},fbe=(e,t)=>({...WUe(e),options:[e,t]}),XW=(e,t)=>({...GUe(e),options:[e,t]}),Voe=(e,t)=>({...QUe(e),options:[e,t]}),KU=(e,t)=>({...YUe(e),options:[e,t]}),t7e=(e,t)=>({...KUe(e),options:[e,t]}),XU=(e,t)=>({...XUe(e),options:[e,t]}),hbe=(e,t)=>({...e7e(e),options:[e,t]}),pbe={...lM},n7e=pbe.useInsertionEffect,r7e=n7e||(e=>e());function N0(e){const t=P.useRef(()=>{});return r7e(()=>{t.current=e}),P.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Zh=typeof document<"u"?P.useLayoutEffect:P.useEffect;let Hoe=!1,i7e=0;const qoe=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+i7e++;function s7e(){const[e,t]=P.useState(()=>Hoe?qoe():void 0);return Zh(()=>{e==null&&t(qoe())},[]),P.useEffect(()=>{Hoe=!0},[]),e}const o7e=pbe.useId,mbe=o7e||s7e;function a7e(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const u7e=P.createContext(null),l7e=P.createContext(null),QW=()=>{var e;return((e=P.useContext(u7e))==null?void 0:e.id)||null},JW=()=>P.useContext(l7e);function ZW(e){return"data-floating-ui-"+e}function G8(e){const t=P.useRef(e);return Zh(()=>{t.current=e}),t}const Woe=ZW("safe-polygon");function rD(e,t,n){return n&&!WU(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function c7e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:o}=e,{enabled:a=!0,delay:u=0,handleClose:l=null,mouseOnly:c=!1,restMs:d=0,move:f=!0}=t,h=JW(),p=QW(),m=G8(l),y=G8(u),v=G8(n),w=P.useRef(),x=P.useRef(-1),S=P.useRef(),E=P.useRef(-1),T=P.useRef(!0),A=P.useRef(!1),I=P.useRef(()=>{}),k=P.useCallback(()=>{var F;const B=(F=i.current.openEvent)==null?void 0:F.type;return(B==null?void 0:B.includes("mouse"))&&B!=="mousedown"},[i]);P.useEffect(()=>{if(!a)return;function F(B){let{open:q}=B;q||(clearTimeout(x.current),clearTimeout(E.current),T.current=!0)}return s.on("openchange",F),()=>{s.off("openchange",F)}},[a,s]),P.useEffect(()=>{if(!a||!m.current||!n)return;function F(q){k()&&r(!1,q,"hover")}const B=D1(o.floating).documentElement;return B.addEventListener("mouseleave",F),()=>{B.removeEventListener("mouseleave",F)}},[o.floating,n,r,a,m,k]);const D=P.useCallback(function(F,B,q){B===void 0&&(B=!0),q===void 0&&(q="hover");const G=rD(y.current,"close",w.current);G&&!S.current?(clearTimeout(x.current),x.current=window.setTimeout(()=>r(!1,F,q),G)):B&&(clearTimeout(x.current),r(!1,F,q))},[y,r]),M=N0(()=>{I.current(),S.current=void 0}),z=N0(()=>{if(A.current){const F=D1(o.floating).body;F.style.pointerEvents="",F.removeAttribute(Woe),A.current=!1}});P.useEffect(()=>{if(!a)return;function F(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function B(L){if(clearTimeout(x.current),T.current=!1,c&&!WU(w.current)||d>0&&!rD(y.current,"open"))return;const V=rD(y.current,"open",w.current);V?x.current=window.setTimeout(()=>{v.current||r(!0,L,"hover")},V):r(!0,L,"hover")}function q(L){if(F())return;I.current();const V=D1(o.floating);if(clearTimeout(E.current),m.current&&i.current.floatingContext){n||clearTimeout(x.current),S.current=m.current({...i.current.floatingContext,tree:h,x:L.clientX,y:L.clientY,onClose(){z(),M(),D(L,!0,"safe-polygon")}});const H=S.current;V.addEventListener("mousemove",H),I.current=()=>{V.removeEventListener("mousemove",H)};return}(w.current==="touch"?!h2(o.floating,L.relatedTarget):!0)&&D(L)}function G(L){F()||i.current.floatingContext&&(m.current==null||m.current({...i.current.floatingContext,tree:h,x:L.clientX,y:L.clientY,onClose(){z(),M(),D(L)}})(L))}if(os(o.domReference)){var K;const L=o.domReference;return n&&L.addEventListener("mouseleave",G),(K=o.floating)==null||K.addEventListener("mouseleave",G),f&&L.addEventListener("mousemove",B,{once:!0}),L.addEventListener("mouseenter",B),L.addEventListener("mouseleave",q),()=>{var V;n&&L.removeEventListener("mouseleave",G),(V=o.floating)==null||V.removeEventListener("mouseleave",G),f&&L.removeEventListener("mousemove",B),L.removeEventListener("mouseenter",B),L.removeEventListener("mouseleave",q)}}},[o,a,e,c,d,f,D,M,z,r,n,v,h,y,m,i]),Zh(()=>{var F;if(a&&n&&(F=m.current)!=null&&F.__options.blockPointerEvents&&k()){const q=D1(o.floating).body;q.setAttribute(Woe,""),q.style.pointerEvents="none",A.current=!0;const G=o.floating;if(os(o.domReference)&&G){var B;const K=o.domReference,L=h==null||(B=h.nodesRef.current.find(V=>V.id===p))==null||(B=B.context)==null?void 0:B.elements.floating;return L&&(L.style.pointerEvents=""),K.style.pointerEvents="auto",G.style.pointerEvents="auto",()=>{K.style.pointerEvents="",G.style.pointerEvents=""}}}},[a,n,p,o,h,m,k]),Zh(()=>{n||(w.current=void 0,M(),z())},[n,M,z]),P.useEffect(()=>()=>{M(),clearTimeout(x.current),clearTimeout(E.current),z()},[a,o.domReference,M,z]);const O=P.useMemo(()=>{function F(B){w.current=B.pointerType}return{onPointerDown:F,onPointerEnter:F,onMouseMove(B){const{nativeEvent:q}=B;function G(){!T.current&&!v.current&&r(!0,q,"hover")}c&&!WU(w.current)||n||d===0||(clearTimeout(E.current),w.current==="touch"?G():E.current=window.setTimeout(G,d))}}},[c,r,n,v,d]),$=P.useMemo(()=>({onMouseEnter(){clearTimeout(x.current)},onMouseLeave(F){D(F.nativeEvent,!1)}}),[D]);return P.useMemo(()=>a?{reference:O,floating:$}:{},[a,O,$])}const QU=()=>{},gbe=P.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:QU,setState:QU,isInstantPhase:!1}),ybe=()=>P.useContext(gbe);function d7e(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=P.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=P.useRef(null),a=P.useCallback(u=>{s({currentId:u})},[]);return Zh(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),P.createElement(gbe.Provider,{value:P.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function f7e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=ybe(),{currentId:u,setCurrentId:l,initialDelay:c,setState:d,timeoutMs:f}=a;return Zh(()=>{u&&(d({delay:{open:1,close:rD(c,"close")}}),u!==o&&r(!1))},[o,r,d,u,c]),Zh(()=>{function h(){r(!1),d({delay:c,currentId:null})}if(u&&!n&&u===o){if(f){const p=window.setTimeout(h,f);return()=>{clearTimeout(p)}}h()}},[n,d,u,o,r,c,f]),Zh(()=>{l===QU||!n||l(o)},[n,l,o]),a}function Y8(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const h7e={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},p7e={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Goe=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function m7e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=e,{enabled:o=!0,escapeKey:a=!0,outsidePress:u=!0,outsidePressEvent:l="pointerdown",referencePress:c=!1,referencePressEvent:d="pointerdown",ancestorScroll:f=!1,bubbles:h,capture:p}=t,m=JW(),y=N0(typeof u=="function"?u:()=>!1),v=typeof u=="function"?y:u,w=P.useRef(!1),x=P.useRef(!1),{escapeKey:S,outsidePress:E}=Goe(h),{escapeKey:T,outsidePress:A}=Goe(p),I=N0($=>{var F;if(!n||!o||!a||$.key!=="Escape")return;const B=(F=s.current.floatingContext)==null?void 0:F.nodeId,q=m?Y8(m.nodesRef.current,B):[];if(!S&&($.stopPropagation(),q.length>0)){let G=!0;if(q.forEach(K=>{var L;if((L=K.context)!=null&&L.open&&!K.context.dataRef.current.__escapeKeyBubbles){G=!1;return}}),!G)return}r(!1,lUe($)?$.nativeEvent:$,"escape-key")}),k=N0($=>{var F;const B=()=>{var q;I($),(q=Ow($))==null||q.removeEventListener("keydown",B)};(F=Ow($))==null||F.addEventListener("keydown",B)}),D=N0($=>{var F;const B=w.current;w.current=!1;const q=x.current;if(x.current=!1,l==="click"&&q||B||typeof v=="function"&&!v($))return;const G=Ow($),K="["+ZW("inert")+"]",L=D1(i.floating).querySelectorAll(K);let V=os(G)?G:null;for(;V&&!yy(V);){const Z=eg(V);if(yy(Z)||!os(Z))break;V=Z}if(L.length&&os(G)&&!cUe(G)&&!h2(G,i.floating)&&Array.from(L).every(Z=>!h2(V,Z)))return;if(wc(G)&&O){const Z=G.clientWidth>0&&G.scrollWidth>G.clientWidth,ne=G.clientHeight>0&&G.scrollHeight>G.clientHeight;let ue=ne&&$.offsetX>G.clientWidth;if(ne&&wd(G).direction==="rtl"&&(ue=$.offsetX<=G.offsetWidth-G.clientWidth),ue||Z&&$.offsetY>G.clientHeight)return}const X=(F=s.current.floatingContext)==null?void 0:F.nodeId,H=m&&Y8(m.nodesRef.current,X).some(Z=>{var ne;return q8($,(ne=Z.context)==null?void 0:ne.elements.floating)});if(q8($,i.floating)||q8($,i.domReference)||H)return;const Q=m?Y8(m.nodesRef.current,X):[];if(Q.length>0){let Z=!0;if(Q.forEach(ne=>{var ue;if((ue=ne.context)!=null&&ue.open&&!ne.context.dataRef.current.__outsidePressBubbles){Z=!1;return}}),!Z)return}r(!1,$,"outside-press")}),M=N0($=>{var F;const B=()=>{var q;D($),(q=Ow($))==null||q.removeEventListener(l,B)};(F=Ow($))==null||F.addEventListener(l,B)});P.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=S,s.current.__outsidePressBubbles=E;function $(q){r(!1,q,"ancestor-scroll")}const F=D1(i.floating);a&&F.addEventListener("keydown",T?k:I,T),v&&F.addEventListener(l,A?M:D,A);let B=[];return f&&(os(i.domReference)&&(B=Um(i.domReference)),os(i.floating)&&(B=B.concat(Um(i.floating))),!os(i.reference)&&i.reference&&i.reference.contextElement&&(B=B.concat(Um(i.reference.contextElement)))),B=B.filter(q=>{var G;return q!==((G=F.defaultView)==null?void 0:G.visualViewport)}),B.forEach(q=>{q.addEventListener("scroll",$,{passive:!0})}),()=>{a&&F.removeEventListener("keydown",T?k:I,T),v&&F.removeEventListener(l,A?M:D,A),B.forEach(q=>{q.removeEventListener("scroll",$)})}},[s,i,a,v,l,n,r,f,o,S,E,I,T,k,D,A,M]),P.useEffect(()=>{w.current=!1},[v,l]);const z=P.useMemo(()=>({onKeyDown:I,[h7e[d]]:$=>{c&&r(!1,$.nativeEvent,"reference-press")}}),[I,r,c,d]),O=P.useMemo(()=>({onKeyDown:I,onMouseDown(){x.current=!0},onMouseUp(){x.current=!0},[p7e[l]]:()=>{w.current=!0}}),[I,l]);return P.useMemo(()=>o?{reference:z,floating:O}:{},[o,z,O])}function g7e(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=mbe(),s=P.useRef({}),[o]=P.useState(()=>a7e()),a=QW()!=null,[u,l]=P.useState(r.reference),c=N0((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),d=P.useMemo(()=>({setPositionReference:l}),[]),f=P.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return P.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:f,events:o,floatingId:i,refs:d}),[t,c,f,o,i,d])}function eG(e){e===void 0&&(e={});const{nodeId:t}=e,n=g7e({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=P.useState(null),[a,u]=P.useState(null),c=(i==null?void 0:i.reference)||s,d=P.useRef(null),f=JW();Zh(()=>{c&&(d.current=c)},[c]);const h=ZUe({...e,elements:{...i,...a&&{reference:a}}}),p=P.useCallback(x=>{const S=os(x)?{getBoundingClientRect:()=>x.getBoundingClientRect(),contextElement:x}:x;u(S),h.refs.setReference(S)},[h.refs]),m=P.useCallback(x=>{(os(x)||x===null)&&(d.current=x,o(x)),(os(h.refs.reference.current)||h.refs.reference.current===null||x!==null&&!os(x))&&h.refs.setReference(x)},[h.refs]),y=P.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:d}),[h.refs,m,p]),v=P.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),w=P.useMemo(()=>({...h,...r,refs:y,elements:v,nodeId:t}),[h,y,v,t,r]);return Zh(()=>{r.dataRef.current.floatingContext=w;const x=f==null?void 0:f.nodesRef.current.find(S=>S.id===t);x&&(x.context=w)}),P.useMemo(()=>({...h,context:w,refs:y,elements:v}),[h,y,v,w])}function y7e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:o}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=P.useRef(!1),c=P.useRef(),d=P.useRef(!0);P.useEffect(()=>{if(!a)return;const h=_l(o.domReference);function p(){!n&&wc(o.domReference)&&o.domReference===Moe(D1(o.domReference))&&(l.current=!0)}function m(){d.current=!0}return h.addEventListener("blur",p),h.addEventListener("keydown",m,!0),()=>{h.removeEventListener("blur",p),h.removeEventListener("keydown",m,!0)}},[o.domReference,n,a]),P.useEffect(()=>{if(!a)return;function h(p){let{reason:m}=p;(m==="reference-press"||m==="escape-key")&&(l.current=!0)}return i.on("openchange",h),()=>{i.off("openchange",h)}},[i,a]),P.useEffect(()=>()=>{clearTimeout(c.current)},[]);const f=P.useMemo(()=>({onPointerDown(h){sUe(h.nativeEvent)||(d.current=!1)},onMouseLeave(){l.current=!1},onFocus(h){if(l.current)return;const p=Ow(h.nativeEvent);if(u&&os(p))try{if(oUe()&&aUe())throw Error();if(!p.matches(":focus-visible"))return}catch{if(!d.current&&!fUe(p))return}r(!0,h.nativeEvent,"focus")},onBlur(h){l.current=!1;const p=h.relatedTarget,m=h.nativeEvent,y=os(p)&&p.hasAttribute(ZW("focus-guard"))&&p.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var v;const w=Moe(o.domReference?o.domReference.ownerDocument:document);!p&&w===o.domReference||h2((v=s.current.floatingContext)==null?void 0:v.refs.floating.current,w)||h2(o.domReference,w)||y||r(!1,m,"focus")})}}),[s,o.domReference,r,u]);return P.useMemo(()=>a?{reference:f}:{},[a,f])}const Yoe="active",Koe="selected";function K8(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Yoe]:o,[Koe]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[Yoe,Koe].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var d;(d=r.get(l))==null||d.push(c),o[l]=function(){for(var f,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(f=r.get(l))==null?void 0:f.map(y=>y(...p)).find(y=>y!==void 0)}}}else o[l]=c}),o),{})}}function v7e(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),i=P.useCallback(a=>K8(a,e,"reference"),t),s=P.useCallback(a=>K8(a,e,"floating"),n),o=P.useCallback(a=>K8(a,e,"item"),r);return P.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}const b7e=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function _7e(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=b7e.get(o))!=null?n:o,u=mbe(),c=QW()!=null,d=P.useMemo(()=>a==="tooltip"||o==="label"?{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},[a,i,c,r,u,o]),f=P.useMemo(()=>{const p={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?p:{...p,...a==="menu"&&{"aria-labelledby":u}}},[a,i,u,o]),h=P.useCallback(p=>{let{active:m,selected:y}=p;const v={role:"option",...m&&{id:i+"-option"}};switch(o){case"select":return{...v,"aria-selected":m&&y};case"combobox":return{...v,...m&&{"aria-selected":!0}}}return{}},[i,o]);return P.useMemo(()=>s?{reference:d,floating:f,item:h}:{},[s,d,f,h])}function vbe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function Xoe(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Qoe(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const w7e={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function x7e({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[w7e[u]]:r},d=-t/2;return u==="left"?{...c,...Xoe(l,o,n,i),right:d,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...Xoe(l,o,n,i),left:d,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...Qoe(l,s,n,i,a),bottom:d,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...Qoe(l,s,n,i,a),top:d,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const tG=P.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:d}=Bu();return s?_.jsx("div",{...l,ref:c,style:{...u,...x7e({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:d,arrowX:o,arrowY:a})}}):null});tG.displayName="@mantine/core/FloatingArrow";const[E7e,bbe]=lo("Popover component was not found in the tree");function IL({children:e,active:t=!0,refProp:n="ref"}){const r=l9e(t),i=Ds(r,e==null?void 0:e.ref);return xg(e)?P.cloneElement(e,{[n]:i}):e}function _be(e){return _.jsx(zW,{tabIndex:-1,"data-autofocus":!0,...e})}IL.displayName="@mantine/core/FocusTrap";_be.displayName="@mantine/core/FocusTrapInitialFocus";IL.InitialFocus=_be;function S7e(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const T7e={},wbe=P.forwardRef((e,t)=>{const{children:n,target:r,...i}=$e("Portal",T7e,e),[s,o]=P.useState(!1),a=P.useRef(null);return Wb(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:S7e(i),PW(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:VI.createPortal(_.jsx(_.Fragment,{children:n}),a.current)});wbe.displayName="@mantine/core/Portal";function qI({withinPortal:e=!0,children:t,...n}){return e?_.jsx(wbe,{...n,children:t}):_.jsx(_.Fragment,{children:t})}qI.displayName="@mantine/core/OptionalPortal";const jT=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${ze(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),zP={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${ze(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${ze(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${ze(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${ze(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${ze(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${ze(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${ze(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${ze(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...jT("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...jT("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...jT("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...jT("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...jT("top"),common:{transformOrigin:"top right"}}},Joe={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function C7e({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in zP?{transitionProperty:zP[e].transitionProperty,...i,...zP[e].common,...zP[e][Joe[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[Joe[t]]}}function A7e({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a,enterDelay:u,exitDelay:l}){const c=qs(),d=NW(),f=c.respectReducedMotion?d:!1,[h,p]=P.useState(f?0:e),[m,y]=P.useState(r?"entered":"exited"),v=P.useRef(-1),w=P.useRef(-1),x=P.useRef(-1),S=T=>{const A=T?i:s,I=T?o:a;window.clearTimeout(v.current);const k=f?0:T?e:t;p(k),k===0?(typeof A=="function"&&A(),typeof I=="function"&&I(),y(T?"entered":"exited")):x.current=requestAnimationFrame(()=>{Mze.flushSync(()=>{y(T?"pre-entering":"pre-exiting")}),x.current=requestAnimationFrame(()=>{typeof A=="function"&&A(),y(T?"entering":"exiting"),v.current=window.setTimeout(()=>{typeof I=="function"&&I(),y(T?"entered":"exited")},k)})})},E=T=>{if(window.clearTimeout(w.current),typeof(T?u:l)!="number"){S(T);return}w.current=window.setTimeout(()=>{S(T)},T?u:l)};return bc(()=>{E(r)},[r]),P.useEffect(()=>()=>{window.clearTimeout(v.current),cancelAnimationFrame(x.current)},[]),{transitionDuration:h,transitionStatus:m,transitionTimingFunction:n||"ease"}}function Jf({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c,enterDelay:d,exitDelay:f}){const{transitionDuration:h,transitionStatus:p,transitionTimingFunction:m}=A7e({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c,enterDelay:d,exitDelay:f});return h===0?i?_.jsx(_.Fragment,{children:s({})}):e?s({display:"none"}):null:p==="exited"?e?s({display:"none"}):null:_.jsx(_.Fragment,{children:s(C7e({transition:t,duration:h,state:p,timingFunction:m}))})}Jf.displayName="@mantine/core/Transition";var xbe={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const I7e={},nG=tt((e,t)=>{var y,v,w,x;const n=$e("PopoverDropdown",I7e,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...d}=n,f=bbe(),h=T1e({opened:f.opened,shouldReturnFocus:f.returnFocus}),p=f.withRoles?{"aria-labelledby":f.getTargetId(),id:f.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=Ds(t,f.floating);return f.disabled?null:_.jsx(qI,{...f.portalProps,withinPortal:f.withinPortal,children:_.jsx(Jf,{mounted:f.opened,...f.transitionProps,transition:((y=f.transitionProps)==null?void 0:y.transition)||"fade",duration:((v=f.transitionProps)==null?void 0:v.duration)??150,keepMounted:f.keepMounted,exitDuration:typeof((w=f.transitionProps)==null?void 0:w.exitDuration)=="number"?f.transitionProps.exitDuration:(x=f.transitionProps)==null?void 0:x.duration,children:S=>_.jsx(IL,{active:f.trapFocus,children:_.jsxs(ke,{...p,...d,variant:u,ref:m,onKeyDownCapture:KBe(f.onClose,{active:f.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":f.placement,"data-fixed":f.floatingStrategy==="fixed"||void 0,...f.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...S,zIndex:f.zIndex,top:f.y??0,left:f.x??0,width:f.width==="target"?void 0:ze(f.width)},i]}),children:[o,_.jsx(tG,{ref:f.arrowRef,arrowX:f.arrowX,arrowY:f.arrowY,visible:f.withArrow,position:f.placement,arrowSize:f.arrowSize,arrowRadius:f.arrowRadius,arrowOffset:f.arrowOffset,arrowPosition:f.arrowPosition,...f.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});nG.classes=xbe;nG.displayName="@mantine/core/PopoverDropdown";const R7e={refProp:"ref",popupType:"dialog"},Ebe=tt((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=$e("PopoverTarget",R7e,e);if(!xg(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=bbe(),u=Ds(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return P.cloneElement(n,{...o,...l,...a.targetProps,className:Dt(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});Ebe.displayName="@mantine/core/PopoverTarget";function Sbe({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=P.useState(0);P.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return qUe(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),bc(()=>{t.update()},r),bc(()=>{s(o=>o+1)},[e])}function k7e(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function P7e(e,t){const n=k7e(e.middlewares),r=[fbe(e.offset)];return n.shift&&r.push(XW(typeof n.shift=="boolean"?{limiter:Voe(),padding:5}:{limiter:Voe(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?KU():KU(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?XU():XU(n.inline)),r.push(hbe({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(t7e({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function N7e(e){const[t,n]=gs({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=eG({strategy:e.strategy,placement:e.position,middleware:P7e(e,()=>s)});return Sbe({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),bc(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),bc(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const O7e={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Nd("popover"),__staticSelector:"Popover",width:"max-content"},D7e=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:ii(t),"--popover-shadow":RW(n)}});function Ln(e){var Ne,Te,qe,Qe,Ue,Ve;const t=$e("Popover",O7e,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:d,arrowSize:f,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:y,classNames:v,styles:w,closeOnClickOutside:x,withinPortal:S,portalProps:E,closeOnEscape:T,clickOutsideEvents:A,trapFocus:I,onClose:k,onOpen:D,onChange:M,zIndex:z,radius:O,shadow:$,id:F,defaultOpened:B,__staticSelector:q,withRoles:G,disabled:K,returnFocus:L,variant:V,keepMounted:X,vars:H,floatingStrategy:Q,...Z}=t,ne=Ot({name:q,props:t,classes:xbe,classNames:v,styles:w,unstyled:y,rootSelector:"dropdown",vars:H,varsResolver:D7e}),ue=P.useRef(null),[le,ce]=P.useState(null),[ge,se]=P.useState(null),{dir:te}=Bu(),Ee=ou(F),we=N7e({middlewares:c,width:l,position:vbe(te,r),offset:typeof i=="number"?i+(d?f/2:0):i,arrowRef:ue,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:B,onChange:M,onOpen:D,onClose:k,strategy:Q});JBe(()=>x&&we.onClose(),A,[le,ge]);const De=P.useCallback(Se=>{ce(Se),we.floating.refs.setReference(Se)},[we.floating.refs.setReference]),Le=P.useCallback(Se=>{se(Se),we.floating.refs.setFloating(Se)},[we.floating.refs.setFloating]);return _.jsx(E7e,{value:{returnFocus:L,disabled:K,controlled:we.controlled,reference:De,floating:Le,x:we.floating.x,y:we.floating.y,arrowX:(qe=(Te=(Ne=we.floating)==null?void 0:Ne.middlewareData)==null?void 0:Te.arrow)==null?void 0:qe.x,arrowY:(Ve=(Ue=(Qe=we.floating)==null?void 0:Qe.middlewareData)==null?void 0:Ue.arrow)==null?void 0:Ve.y,opened:we.opened,arrowRef:ue,transitionProps:u,width:l,withArrow:d,arrowSize:f,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:we.floating.placement,trapFocus:I,withinPortal:S,portalProps:E,zIndex:z,radius:O,shadow:$,closeOnEscape:T,onClose:we.onClose,onToggle:we.onToggle,getTargetId:()=>`${Ee}-target`,getDropdownId:()=>`${Ee}-dropdown`,withRoles:G,targetProps:Z,__staticSelector:q,classNames:v,styles:w,unstyled:y,variant:V,keepMounted:X,getStyles:ne,floatingStrategy:Q},children:n})}Ln.Target=Ebe;Ln.Dropdown=nG;Ln.displayName="@mantine/core/Popover";Ln.extend=e=>e;var vf={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const M7e=P.forwardRef(({className:e,...t},n)=>_.jsxs(ke,{component:"span",className:Dt(vf.barsLoader,e),...t,ref:n,children:[_.jsx("span",{className:vf.bar}),_.jsx("span",{className:vf.bar}),_.jsx("span",{className:vf.bar})]})),$7e=P.forwardRef(({className:e,...t},n)=>_.jsxs(ke,{component:"span",className:Dt(vf.dotsLoader,e),...t,ref:n,children:[_.jsx("span",{className:vf.dot}),_.jsx("span",{className:vf.dot}),_.jsx("span",{className:vf.dot})]})),L7e=P.forwardRef(({className:e,...t},n)=>_.jsx(ke,{component:"span",className:Dt(vf.ovalLoader,e),...t,ref:n})),Tbe={bars:M7e,oval:L7e,dots:$7e},F7e={loaders:Tbe,type:"oval"},j7e=(e,{size:t,color:n})=>({root:{"--loader-size":wn(t,"loader-size"),"--loader-color":n?mi(n,e):void 0}}),io=tt((e,t)=>{const n=$e("Loader",F7e,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:d,loaders:f,variant:h,children:p,...m}=n,y=Ot({name:"Loader",props:n,classes:vf,className:a,style:u,classNames:l,styles:c,unstyled:d,vars:o,varsResolver:j7e});return p?_.jsx(ke,{...y("root"),ref:t,...m,children:p}):_.jsx(ke,{...y("root"),ref:t,component:f[s],variant:h,size:r,...m})});io.defaultLoaders=Tbe;io.classes=vf;io.displayName="@mantine/core/Loader";var RL={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const Zoe={orientation:"horizontal"},B7e=(e,{borderWidth:t})=>({group:{"--ai-border-width":ze(t)}}),rG=tt((e,t)=>{const n=$e("ActionIconGroup",Zoe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:d,mod:f,...h}=$e("ActionIconGroup",Zoe,e),p=Ot({name:"ActionIconGroup",props:n,classes:RL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:B7e,rootSelector:"group"});return _.jsx(ke,{...p("group"),ref:t,variant:d,mod:[{"data-orientation":u},f],role:"group",...h})});rG.classes=RL;rG.displayName="@mantine/core/ActionIconGroup";const z7e={},U7e=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":wn(t,"ai-size"),"--ai-radius":n===void 0?void 0:ii(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},mr=Ws((e,t)=>{const n=$e("ActionIcon",z7e,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:d,color:f,radius:h,__staticSelector:p,gradient:m,vars:y,children:v,disabled:w,"data-disabled":x,autoContrast:S,mod:E,...T}=n,A=Ot({name:["ActionIcon",p],props:n,className:r,style:u,classes:RL,classNames:o,styles:a,unstyled:i,vars:y,varsResolver:U7e});return _.jsxs(Ps,{...A("root",{active:!w&&!l&&!x}),...T,unstyled:i,variant:s,size:d,disabled:w||l,ref:t,mod:[{loading:l,disabled:w||x},E],children:[_.jsx(Jf,{mounted:!!l,transition:"slide-down",duration:150,children:I=>_.jsx(ke,{component:"span",...A("loader",{style:I}),"aria-hidden":!0,children:_.jsx(io,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),_.jsx(ke,{component:"span",mod:{loading:l},...A("icon"),children:v})]})});mr.classes=RL;mr.displayName="@mantine/core/ActionIcon";mr.Group=rG;const Cbe=P.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>_.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:_.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));Cbe.displayName="@mantine/core/CloseIcon";var Abe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const V7e={variant:"subtle"},H7e=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":wn(t,"cb-size"),"--cb-radius":n===void 0?void 0:ii(n),"--cb-icon-size":ze(r)}}),Sg=Ws((e,t)=>{const n=$e("CloseButton",V7e,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:d,"data-disabled":f,disabled:h,variant:p,icon:m,mod:y,...v}=n,w=Ot({name:"CloseButton",props:n,className:a,style:l,classes:Abe,classNames:u,styles:c,unstyled:d,vars:s,varsResolver:H7e});return _.jsxs(Ps,{ref:t,...v,unstyled:d,variant:p,disabled:h,mod:[{disabled:h||f},y],...w("root",{variant:p,active:!h&&!f}),children:[m||_.jsx(Cbe,{}),i]})});Sg.classes=Abe;Sg.displayName="@mantine/core/CloseButton";function q7e(e){return P.Children.toArray(e).filter(Boolean)}var Ibe={root:"m_4081bf90"};const W7e={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},G7e=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":Cl(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),gr=tt((e,t)=>{const n=$e("Group",W7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:d,wrap:f,grow:h,preventGrowOverflow:p,vars:m,variant:y,__size:v,mod:w,...x}=n,S=q7e(u),E=S.length,T=Cl(l??"md"),I={childWidth:`calc(${100/E}% - (${T} - ${T} / ${E}))`},k=Ot({name:"Group",props:n,stylesCtx:I,className:i,style:s,classes:Ibe,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:G7e});return _.jsx(ke,{...k("root"),ref:t,variant:y,mod:[{grow:h},w],size:v,...x,children:S})});gr.classes=Ibe;gr.displayName="@mantine/core/Group";var Rbe={root:"m_9814e45f"};const Y7e={zIndex:Nd("modal")},K7e=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&td(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${ze(i)})`:void 0,"--overlay-radius":s===void 0?void 0:ii(s),"--overlay-z-index":o==null?void 0:o.toString()}}),p2=Ws((e,t)=>{const n=$e("Overlay",Y7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:d,radius:f,zIndex:h,gradient:p,blur:m,color:y,backgroundOpacity:v,mod:w,...x}=n,S=Ot({name:"Overlay",props:n,classes:Rbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:K7e});return _.jsx(ke,{ref:t,...S("root"),mod:[{center:c,fixed:l},w],...x,children:d})});p2.classes=Rbe;p2.displayName="@mantine/core/Overlay";const[X7e,Tg]=lo("ModalBase component was not found in tree");function Q7e({opened:e,transitionDuration:t}){const[n,r]=P.useState(e),i=P.useRef(),o=NW()?0:t;return P.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function J7e({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=ou(e),[u,l]=P.useState(!1),[c,d]=P.useState(!1),f=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=Q7e({opened:n,transitionDuration:f});return R1e("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),T1e({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:d}}const kbe=P.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:d,children:f,zIndex:h,shadow:p,padding:m,__vars:y,unstyled:v,removeScrollProps:w,...x},S)=>{const{_id:E,titleMounted:T,bodyMounted:A,shouldLockScroll:I,setTitleMounted:k,setBodyMounted:D}=J7e({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a}),{key:M,...z}=w||{};return _.jsx(qI,{...c,withinPortal:l,children:_.jsx(X7e,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${E}-title`,getBodyId:()=>`${E}-body`,titleMounted:T,bodyMounted:A,setTitleMounted:k,setBodyMounted:D,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:v},children:_.jsx(yL,{enabled:I&&d,...z,children:_.jsx(ke,{ref:S,...x,__vars:{...y,"--mb-z-index":(h||Nd("modal")).toString(),"--mb-shadow":RW(p),"--mb-padding":Cl(m)},children:f})},M)})})});function Z7e(){const e=Tg();return P.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var Vx={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const iG=P.forwardRef(({className:e,...t},n)=>{const r=Z7e(),i=Tg();return _.jsx(ke,{ref:n,...t,id:r,className:Dt({[Vx.body]:!i.unstyled},e)})});iG.displayName="@mantine/core/ModalBaseBody";const sG=P.forwardRef(({className:e,onClick:t,...n},r)=>{const i=Tg();return _.jsx(Sg,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:Dt({[Vx.close]:!i.unstyled},e),unstyled:i.unstyled})});sG.displayName="@mantine/core/ModalBaseCloseButton";const Pbe=P.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=Tg();return _.jsx(Jf,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>_.jsx("div",{...n,className:Dt({[Vx.inner]:!a.unstyled},n.className),children:_.jsx(IL,{active:a.opened&&a.trapFocus,children:_.jsx(ub,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:Dt({[Vx.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),oG=P.forwardRef(({className:e,...t},n)=>{const r=Tg();return _.jsx(ke,{component:"header",ref:n,className:Dt({[Vx.header]:!r.unstyled},e),...t})});oG.displayName="@mantine/core/ModalBaseHeader";const eVe={duration:200,timingFunction:"ease",transition:"fade"};function tVe(e){const t=Tg();return{...eVe,...t.transitionProps,...e}}const aG=P.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=Tg(),o=tVe(t);return _.jsx(Jf,{mounted:s.opened,...o,transition:"fade",children:a=>_.jsx(p2,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});aG.displayName="@mantine/core/ModalBaseOverlay";function nVe(){const e=Tg();return P.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const uG=P.forwardRef(({className:e,...t},n)=>{const r=nVe(),i=Tg();return _.jsx(ke,{component:"h2",ref:n,className:Dt({[Vx.title]:!i.unstyled},e),...t,id:r})});uG.displayName="@mantine/core/ModalBaseTitle";function Nbe({children:e}){return _.jsx(_.Fragment,{children:e})}const[rVe,rS]=qb({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Dd={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const eae={},iVe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${Io(t)} - ${ze(2)})`}}),kL=tt((e,t)=>{const n=$e("InputDescription",eae,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:d=!0,variant:f,...h}=$e("InputDescription",eae,n),p=rS(),m=Ot({name:["InputWrapper",c],props:n,classes:Dd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:iVe}),y=d&&(p==null?void 0:p.getStyles)||m;return _.jsx(ke,{component:"p",ref:t,variant:f,size:l,...y("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});kL.classes=Dd;kL.displayName="@mantine/core/InputDescription";const sVe={},oVe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${Io(t)} - ${ze(2)})`}}),PL=tt((e,t)=>{const n=$e("InputError",sVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:d=!0,variant:f,...h}=n,p=Ot({name:["InputWrapper",c],props:n,classes:Dd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:oVe}),m=rS(),y=d&&(m==null?void 0:m.getStyles)||p;return _.jsx(ke,{component:"p",ref:t,variant:f,size:l,...y("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});PL.classes=Dd;PL.displayName="@mantine/core/InputError";const tae={labelElement:"label"},aVe=(e,{size:t})=>({label:{"--input-label-size":Io(t),"--input-asterisk-color":void 0}}),NL=tt((e,t)=>{const n=$e("InputLabel",tae,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:d,htmlFor:f,onMouseDown:h,children:p,__staticSelector:m,variant:y,mod:v,...w}=$e("InputLabel",tae,n),x=Ot({name:["InputWrapper",m],props:n,classes:Dd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:aVe}),S=rS(),E=(S==null?void 0:S.getStyles)||x;return _.jsxs(ke,{...E("label",S!=null&&S.getStyles?{className:i,style:s}:void 0),component:l,variant:y,size:c,ref:t,htmlFor:l==="label"?f:void 0,mod:[{required:d},v],onMouseDown:T=>{h==null||h(T),!T.defaultPrevented&&T.detail>1&&T.preventDefault()},...w,children:[p,d&&_.jsx("span",{...E("required"),"aria-hidden":!0,children:" *"})]})});NL.classes=Dd;NL.displayName="@mantine/core/InputLabel";const nae={},lG=tt((e,t)=>{const n=$e("InputPlaceholder",nae,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:d,mod:f,...h}=$e("InputPlaceholder",nae,n),p=Ot({name:["InputPlaceholder",l],props:n,classes:Dd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return _.jsx(ke,{...p("placeholder"),mod:[{error:!!d},f],component:"span",variant:c,ref:t,...h})});lG.classes=Dd;lG.displayName="@mantine/core/InputPlaceholder";function uVe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const lVe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},cVe=(e,{size:t})=>({label:{"--input-label-size":Io(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${Io(t)} - ${ze(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${Io(t)} - ${ze(2)})`}}),cG=tt((e,t)=>{const n=$e("InputWrapper",lVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:d,inputContainer:f,inputWrapperOrder:h,label:p,error:m,description:y,labelProps:v,descriptionProps:w,errorProps:x,labelElement:S,children:E,withAsterisk:T,id:A,required:I,__stylesApiProps:k,mod:D,...M}=n,z=Ot({name:["InputWrapper",d],props:k||n,classes:Dd,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:cVe}),O={size:l,variant:c,__staticSelector:d},$=ou(A),F=typeof T=="boolean"?T:I,B=(x==null?void 0:x.id)||`${$}-error`,q=(w==null?void 0:w.id)||`${$}-description`,G=$,K=!!m&&typeof m!="boolean",L=!!y,V=`${K?B:""} ${L?q:""}`,X=V.trim().length>0?V.trim():void 0,H=(v==null?void 0:v.id)||`${$}-label`,Q=p&&_.jsx(NL,{labelElement:S,id:H,htmlFor:G,required:F,...O,...v,children:p},"label"),Z=L&&_.jsx(kL,{...w,...O,size:(w==null?void 0:w.size)||O.size,id:(w==null?void 0:w.id)||q,children:y},"description"),ne=_.jsx(P.Fragment,{children:f(E)},"input"),ue=K&&P.createElement(PL,{...x,...O,size:(x==null?void 0:x.size)||O.size,key:"error",id:(x==null?void 0:x.id)||B},m),le=h.map(ce=>{switch(ce){case"label":return Q;case"input":return ne;case"description":return Z;case"error":return ue;default:return null}});return _.jsx(rVe,{value:{getStyles:z,describedBy:X,inputId:G,labelId:H,...uVe(h,{hasDescription:L,hasError:K})},children:_.jsx(ke,{ref:t,variant:c,size:l,mod:[{error:!!m},D],...z("root"),...M,children:le})})});cG.classes=Dd;cG.displayName="@mantine/core/InputWrapper";const dVe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},fVe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":wn(t.size,"input-height"),"--input-fz":Io(t.size),"--input-radius":t.radius===void 0?void 0:ii(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?ze(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?ze(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?wn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),Ti=Ws((e,t)=>{const n=$e("Input",dVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:d,wrapperProps:f,error:h,disabled:p,leftSection:m,leftSectionProps:y,leftSectionWidth:v,rightSection:w,rightSectionProps:x,rightSectionWidth:S,rightSectionPointerEvents:E,leftSectionPointerEvents:T,variant:A,vars:I,pointer:k,multiline:D,radius:M,id:z,withAria:O,withErrorStyles:$,mod:F,inputSize:B,...q}=n,{styleProps:G,rest:K}=Gb(q),L=rS(),V={offsetBottom:L==null?void 0:L.offsetBottom,offsetTop:L==null?void 0:L.offsetTop},X=Ot({name:["Input",l],props:c||n,classes:Dd,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:V,rootSelector:"wrapper",vars:I,varsResolver:fVe}),H=O?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":L==null?void 0:L.describedBy,id:(L==null?void 0:L.inputId)||z}:{};return _.jsxs(ke,{...X("wrapper"),...G,...f,mod:[{error:!!h&&$,pointer:k,disabled:p,multiline:D,"data-with-right-section":!!w,"data-with-left-section":!!m},F],variant:A,size:d,children:[m&&_.jsx("div",{...y,"data-position":"left",...X("section",{className:y==null?void 0:y.className,style:y==null?void 0:y.style}),children:m}),_.jsx(ke,{component:"input",...K,...H,ref:t,required:u,mod:{disabled:p,error:!!h&&$},variant:A,__size:B,...X("input")}),w&&_.jsx("div",{...x,"data-position":"right",...X("section",{className:x==null?void 0:x.className,style:x==null?void 0:x.style}),children:w})]})});Ti.classes=Dd;Ti.Wrapper=cG;Ti.Label=NL;Ti.Error=PL;Ti.Description=kL;Ti.Placeholder=lG;Ti.displayName="@mantine/core/Input";function dG(e,t,n){const r=$e(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:d,__staticSelector:f,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:y,wrapperProps:v,id:w,size:x,style:S,inputContainer:E,inputWrapperOrder:T,withAsterisk:A,variant:I,vars:k,mod:D,...M}=r,{styleProps:z,rest:O}=Gb(M),$={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:f,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:y,unstyled:d,styles:l,size:x,style:S,inputContainer:E,inputWrapperOrder:T,withAsterisk:A,variant:I,id:w,mod:D,...v};return{...O,classNames:u,styles:l,unstyled:d,wrapperProps:{...$,...z},inputProps:{required:a,classNames:u,styles:l,unstyled:d,size:x,__staticSelector:f,__stylesApiProps:h||r,error:o,variant:I,id:w}}}const hVe={__staticSelector:"InputBase",withAria:!0},jl=Ws((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=dG("InputBase",hVe,e);return _.jsx(Ti.Wrapper,{...r,children:_.jsx(Ti,{...n,...i,ref:t})})});jl.classes={...Ti.classes,...Ti.Wrapper.classes};jl.displayName="@mantine/core/InputBase";const pVe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var Obe={root:"m_8bffd616"};const mVe={},Gt=Ws((e,t)=>{const n=$e("Flex",mVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:d,align:f,justify:h,wrap:p,direction:m,...y}=n,v=Ot({name:"Flex",classes:Obe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),w=qs(),x=SL(),S=F1e({styleProps:{gap:l,rowGap:c,columnGap:d,align:f,justify:h,wrap:p,direction:m},theme:w,data:pVe});return _.jsxs(_.Fragment,{children:[S.hasResponsiveStyles&&_.jsx(UI,{selector:`.${x}`,styles:S.styles,media:S.media}),_.jsx(ke,{ref:t,...v("root",{className:x,style:eS(S.inlineStyles)}),...y})]})});Gt.classes=Obe;Gt.displayName="@mantine/core/Flex";function gVe(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function yVe({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=P.useRef(),[s,o]=P.useState(!1),[a,u]=P.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},d=P.useRef(),f=P.useRef();return P.useEffect(()=>{if(l(),e)return d.current=new ResizeObserver(c),d.current.observe(e),t&&(f.current=new ResizeObserver(c),f.current.observe(t)),()=>{var h,p;(h=d.current)==null||h.disconnect(),(p=f.current)==null||p.disconnect()}},[t,e]),P.useEffect(()=>{if(t){const h=p=>{gVe(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),m9e(()=>{N1e()!=="test"&&o(!0)},20,{autoInvoke:!0}),y9e(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var Dbe={root:"m_96b553a6"};const vVe={},bVe=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),fG=tt((e,t)=>{const n=$e("FloatingIndicator",vVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:d,mod:f,displayAfterTransitionEnd:h,...p}=n,m=Ot({name:"FloatingIndicator",classes:Dbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:bVe}),y=P.useRef(null),{initialized:v,hidden:w}=yVe({target:l,parent:c,ref:y,displayAfterTransitionEnd:h}),x=Ds(t,y);return!l||!c?null:_.jsx(ke,{ref:x,mod:[{initialized:v,hidden:w},f],...m("root"),...p})});fG.displayName="@mantine/core/FloatingIndicator";fG.classes=Dbe;const[_Ve,hG]=lo("Accordion component was not found in the tree");function Hx({style:e,size:t=16,...n}){return _.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:ze(t),height:ze(t),display:"block"},...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}Hx.displayName="@mantine/core/AccordionChevron";const[wVe,Mbe]=lo("Accordion.Item component was not found in the tree");var WI={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const xVe={},pG=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:d,disabled:f,mod:h,...p}=$e("AccordionControl",xVe,e),{value:m}=Mbe(),y=hG(),v=y.isItemActive(m),w=typeof y.order=="number",x=`h${y.order}`,S=_.jsxs(Ps,{...p,...y.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:y.variant}),unstyled:y.unstyled,mod:["accordion-control",{active:v,"chevron-position":y.chevronPosition,disabled:f},h],ref:t,onClick:E=>{l==null||l(E),y.onChange(m)},type:"button",disabled:f,"aria-expanded":v,"aria-controls":y.getRegionId(m),id:y.getControlId(m),onKeyDown:IW({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:y.loop,orientation:"vertical",onKeyDown:c}),children:[_.jsx(ke,{component:"span",mod:{rotate:!y.disableChevronRotation&&v,position:y.chevronPosition},...y.getStyles("chevron",{classNames:n,styles:s}),children:a||y.chevron}),_.jsx("span",{...y.getStyles("label",{classNames:n,styles:s}),children:d}),u&&_.jsx(ke,{component:"span",mod:{"chevron-position":y.chevronPosition},...y.getStyles("icon",{classNames:n,styles:s}),children:u})]});return w?_.jsx(x,{...y.getStyles("itemTitle",{classNames:n,styles:s}),children:S}):S});pG.displayName="@mantine/core/AccordionControl";pG.classes=WI;const EVe={},mG=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=$e("AccordionItem",EVe,e),c=hG();return _.jsx(wVe,{value:{value:a},children:_.jsx(ke,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});mG.displayName="@mantine/core/AccordionItem";mG.classes=WI;const SVe={},gG=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=$e("AccordionPanel",SVe,e),{value:l}=Mbe(),c=hG();return _.jsx(iv,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:_.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});gG.displayName="@mantine/core/AccordionPanel";gG.classes=WI;const TVe={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:_.jsx(Hx,{})},CVe=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:ze(n),"--accordion-radius":r===void 0?void 0:ii(r)}});function ll(e){const t=$e("Accordion",TVe,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:d,onChange:f,id:h,loop:p,transitionDuration:m,disableChevronRotation:y,chevronPosition:v,chevronSize:w,order:x,chevron:S,variant:E,radius:T,...A}=t,I=ou(h),[k,D]=gs({value:c,defaultValue:d,finalValue:l?[]:null,onChange:f}),M=$=>Array.isArray(k)?k.includes($):$===k,z=$=>{const F=Array.isArray(k)?k.includes($)?k.filter(B=>B!==$):[...k,$]:$===k?null:$;D(F)},O=Ot({name:"Accordion",classes:WI,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:CVe});return _.jsx(_Ve,{value:{isItemActive:M,onChange:z,getControlId:dM(`${I}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:dM(`${I}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:y,chevronPosition:v,order:x,chevron:S,loop:p,getStyles:O,variant:E,unstyled:o},children:_.jsx(ke,{...O("root"),id:I,...A,variant:E,"data-accordion":!0,children:u})})}const AVe=e=>e;ll.extend=AVe;ll.classes=WI;ll.displayName="@mantine/core/Accordion";ll.Item=mG;ll.Panel=gG;ll.Control=pG;ll.Chevron=Hx;var $be={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const IVe={},RVe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:ii(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},iS=tt((e,t)=>{const n=$e("Alert",IVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:d,children:f,id:h,icon:p,withCloseButton:m,onClose:y,closeButtonLabel:v,variant:w,autoContrast:x,...S}=n,E=Ot({name:"Alert",classes:$be,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:RVe}),T=ou(h),A=d&&`${T}-title`||void 0,I=`${T}-body`;return _.jsx(ke,{id:T,...E("root",{variant:w}),variant:w,ref:t,...S,role:"alert","aria-describedby":I,"aria-labelledby":A,children:_.jsxs("div",{...E("wrapper"),children:[p&&_.jsx("div",{...E("icon"),children:p}),_.jsxs("div",{...E("body"),children:[d&&_.jsx("div",{...E("title"),"data-with-close-button":m||void 0,children:_.jsx("span",{id:A,...E("label"),children:d})}),f&&_.jsx("div",{id:I,...E("message"),"data-variant":w,children:f})]}),m&&_.jsx(Sg,{...E("closeButton"),onClick:y,variant:"transparent",size:16,iconSize:16,"aria-label":v,unstyled:a})]})})});iS.classes=$be;iS.displayName="@mantine/core/Alert";var Lbe={root:"m_b6d8b162"};function kVe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const PVe={inherit:!1},NVe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":Io(i),"--text-lh":E1e(i),"--text-gradient":t==="gradient"?UU(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?mi(s,e):void 0}}),dt=Ws((e,t)=>{const n=$e("Text",PVe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:d,style:f,classNames:h,styles:p,unstyled:m,variant:y,mod:v,size:w,...x}=n,S=Ot({name:["Text",l],props:n,classes:Lbe,className:d,style:f,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:NVe});return _.jsx(ke,{...S("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:y,mod:[{"data-truncate":kVe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},v],size:w,...x})});dt.classes=Lbe;dt.displayName="@mantine/core/Text";var Fbe={root:"m_849cf0da"};const OVe={underline:"hover"},Yb=Ws((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=$e("Anchor",OVe,e);return _.jsx(dt,{component:"a",ref:t,className:Dt({[Fbe.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});Yb.classes=Fbe;Yb.displayName="@mantine/core/Anchor";const[DVe,sS]=lo("AppShell was not found in tree");var ov={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const MVe={},yG=tt((e,t)=>{const n=$e("AppShellAside",MVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:d,...f}=n,h=sS();return h.disabled?null:_.jsx(ke,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},d],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});yG.classes=ov;yG.displayName="@mantine/core/AppShellAside";const $Ve={},vG=tt((e,t)=>{var p;const n=$e("AppShellFooter",$Ve,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:d,...f}=n,h=sS();return h.disabled?null:_.jsx(ke,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},d],...h.getStyles("footer",{className:Dt({[yL.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});vG.classes=ov;vG.displayName="@mantine/core/AppShellFooter";const LVe={},bG=tt((e,t)=>{var p;const n=$e("AppShellHeader",LVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:d,...f}=n,h=sS();return h.disabled?null:_.jsx(ke,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},d],...h.getStyles("header",{className:Dt({[yL.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});bG.classes=ov;bG.displayName="@mantine/core/AppShellHeader";const FVe={},_G=tt((e,t)=>{const n=$e("AppShellMain",FVe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=sS();return _.jsx(ke,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});_G.classes=ov;_G.displayName="@mantine/core/AppShellMain";function GI(e){return typeof e=="object"?e.base:e}function YI(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function KI(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function jVe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),YI(s)){const d=ze(GI(s));e["--app-shell-aside-width"]=d,e["--app-shell-aside-offset"]=d}if(KI(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=ze(s.base),e["--app-shell-aside-offset"]=ze(s.base)),ms(s).forEach(d=>{d!=="base"&&(t[d]=t[d]||{},t[d]["--app-shell-aside-width"]=ze(s[d]),t[d]["--app-shell-aside-offset"]=ze(s[d]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const d=r.breakpoint;t[d]=t[d]||{},t[d]["--app-shell-aside-transform"]=o,t[d]["--app-shell-aside-transform-rtl"]=a,t[d]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const d=kW(r.breakpoint,i)-.1;n[d]=n[d]||{},n[d]["--app-shell-aside-width"]="100%",n[d]["--app-shell-aside-offset"]="0px",n[d]["--app-shell-aside-transform"]=o,n[d]["--app-shell-aside-transform-rtl"]=a}}function BVe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(YI(r)){const o=ze(GI(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}KI(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=ze(r.base),s&&(e["--app-shell-footer-offset"]=ze(r.base))),ms(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=ze(r[o]),s&&(t[o]["--app-shell-footer-offset"]=ze(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function zVe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(YI(r)){const o=ze(GI(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}KI(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=ze(r.base),s&&(e["--app-shell-header-offset"]=ze(r.base))),ms(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=ze(r[o]),s&&(t[o]["--app-shell-header-offset"]=ze(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function UVe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),YI(s)){const d=ze(GI(s));e["--app-shell-navbar-width"]=d,e["--app-shell-navbar-offset"]=d}if(KI(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=ze(s.base),e["--app-shell-navbar-offset"]=ze(s.base)),ms(s).forEach(d=>{d!=="base"&&(t[d]=t[d]||{},t[d]["--app-shell-navbar-width"]=ze(s[d]),t[d]["--app-shell-navbar-offset"]=ze(s[d]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const d=r.breakpoint;t[d]=t[d]||{},t[d]["--app-shell-navbar-transform"]=o,t[d]["--app-shell-navbar-transform-rtl"]=a,t[d]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const d=kW(r.breakpoint,i)-.1;n[d]=n[d]||{},n[d]["--app-shell-navbar-width"]="100%",n[d]["--app-shell-navbar-offset"]="0px",n[d]["--app-shell-navbar-transform"]=o,n[d]["--app-shell-navbar-transform-rtl"]=a}}function X8(e){return Number(e)===0?"0px":Cl(e)}function VVe({padding:e,baseStyles:t,minMediaStyles:n}){YI(e)&&(t["--app-shell-padding"]=X8(GI(e))),KI(e)&&(e.base&&(t["--app-shell-padding"]=X8(e.base)),ms(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=X8(e[r]))}))}function HVe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};UVe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),jVe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),zVe({baseStyles:u,minMediaStyles:o,header:t}),BVe({baseStyles:u,minMediaStyles:o,footer:n}),VVe({baseStyles:u,minMediaStyles:o,padding:i});const l=hM(ms(o),s).map(f=>({query:`(min-width: ${cM(f.px)})`,styles:o[f.value]})),c=hM(ms(a),s).map(f=>({query:`(max-width: ${cM(f.px)})`,styles:a[f.value]})),d=[...l,...c];return{baseStyles:u,media:d}}function qVe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=qs(),o=nv(),{media:a,baseStyles:u}=HVe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return _.jsx(UI,{media:a,styles:u,selector:o.cssVariablesSelector})}const WVe={},wG=tt((e,t)=>{const n=$e("AppShellNavbar",WVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:d,...f}=n,h=sS();return h.disabled?null:_.jsx(ke,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},d],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});wG.classes=ov;wG.displayName="@mantine/core/AppShellNavbar";const GVe={},xG=Ws((e,t)=>{const n=$e("AppShellSection",GVe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,d=sS();return _.jsx(ke,{ref:t,mod:[{grow:u},l],...d.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});xG.classes=ov;xG.displayName="@mantine/core/AppShellSection";function YVe({transitionDuration:e,disabled:t}){const[n,r]=P.useState(!0),i=P.useRef(),s=P.useRef();return R1e("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),Wb(()=>{P.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const KVe={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:Nd("app")},XVe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),ei=tt((e,t)=>{const n=$e("AppShell",KVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:d,transitionDuration:f,transitionTimingFunction:h,header:p,zIndex:m,layout:y,disabled:v,aside:w,footer:x,offsetScrollbars:S,mod:E,...T}=n,A=Ot({name:"AppShell",classes:ov,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:XVe}),I=YVe({disabled:v,transitionDuration:f});return _.jsxs(DVe,{value:{getStyles:A,withBorder:c,zIndex:m,disabled:v,offsetScrollbars:S},children:[_.jsx(qVe,{navbar:l,header:p,aside:w,footer:x,padding:d}),_.jsx(ke,{ref:t,...A("root"),mod:[{resizing:I,layout:y,disabled:v},E],...T})]})});ei.classes=ov;ei.displayName="@mantine/core/AppShell";ei.Navbar=wG;ei.Header=bG;ei.Main=_G;ei.Aside=yG;ei.Footer=vG;ei.Section=xG;function jbe(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>jbe(t))}:e}function EG(e){return e?e.map(t=>jbe(t)):[]}function OL(e){return e.reduce((t,n)=>"group"in n?{...t,...OL(n.items)}:(t[n.value]=n,t),{})}var Al={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const QVe={error:null},JVe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":wn(t,"combobox-chevron-size")}}),SG=tt((e,t)=>{const n=$e("ComboboxChevron",QVe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:d,...f}=n,h=Ot({name:"ComboboxChevron",classes:Al,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:JVe,rootSelector:"chevron"});return _.jsx(ke,{component:"svg",...f,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},d],ref:t,children:_.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});SG.classes=Al;SG.displayName="@mantine/core/ComboboxChevron";const[ZVe,Md]=lo("Combobox component was not found in tree"),Bbe=P.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>_.jsx(Sg,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));Bbe.displayName="@mantine/core/ComboboxClearButton";const eHe={},TG=tt((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=$e("ComboboxDropdown",eHe,e),u=Md();return _.jsx(Ln.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});TG.classes=Al;TG.displayName="@mantine/core/ComboboxDropdown";const tHe={refProp:"ref"},zbe=tt((e,t)=>{const{children:n,refProp:r}=$e("ComboboxDropdownTarget",tHe,e);if(Md(),!xg(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return _.jsx(Ln.Target,{ref:t,refProp:r,children:n})});zbe.displayName="@mantine/core/ComboboxDropdownTarget";const nHe={},CG=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=$e("ComboboxEmpty",nHe,e),u=Md();return _.jsx(ke,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});CG.classes=Al;CG.displayName="@mantine/core/ComboboxEmpty";function AG({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=Md(),[a,u]=P.useState(null),l=d=>{if(e==null||e(d),!o.readOnly&&t){if(d.nativeEvent.isComposing)return;if(d.nativeEvent.code==="ArrowDown"&&(d.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),d.nativeEvent.code==="ArrowUp"&&(d.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),d.nativeEvent.code==="Enter"||d.nativeEvent.code==="NumpadEnter"){if(d.nativeEvent.keyCode===229)return;const f=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&f!==-1?(d.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(d.preventDefault(),o.store.openDropdown("keyboard"))}d.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),d.nativeEvent.code==="Space"&&i==="button"&&(d.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const rHe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},Ube=tt((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=$e("ComboboxEventsTarget",rHe,e);if(!xg(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Md(),d=AG({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return P.cloneElement(n,{...d,...l,[r]:Ds(t,c.store.targetRef,n==null?void 0:n.ref)})});Ube.displayName="@mantine/core/ComboboxEventsTarget";const iHe={},IG=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=$e("ComboboxFooter",iHe,e),u=Md();return _.jsx(ke,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:l=>{l.preventDefault()}})});IG.classes=Al;IG.displayName="@mantine/core/ComboboxFooter";const sHe={},RG=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=$e("ComboboxGroup",sHe,e),c=Md();return _.jsxs(ke,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&_.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});RG.classes=Al;RG.displayName="@mantine/core/ComboboxGroup";const oHe={},kG=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=$e("ComboboxHeader",oHe,e),u=Md();return _.jsx(ke,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:l=>{l.preventDefault()}})});kG.classes=Al;kG.displayName="@mantine/core/ComboboxHeader";function Vbe({value:e,valuesDivider:t=",",...n}){return _.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}Vbe.displayName="@mantine/core/ComboboxHiddenInput";const aHe={},PG=tt((e,t)=>{const n=$e("ComboboxOption",aHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:d,onMouseOver:f,disabled:h,selected:p,mod:m,...y}=n,v=Md(),w=P.useId(),x=l||w;return _.jsx(ke,{...v.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...y,ref:t,id:x,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:S=>{var E;h?S.preventDefault():((E=v.onOptionSubmit)==null||E.call(v,n.value,n),u==null||u(S))},onMouseDown:S=>{S.preventDefault(),d==null||d(S)},onMouseOver:S=>{v.resetSelectionOnOptionHover&&v.store.resetSelectedOption(),f==null||f(S)}})});PG.classes=Al;PG.displayName="@mantine/core/ComboboxOption";const uHe={},NG=tt((e,t)=>{const n=$e("ComboboxOptions",uHe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,d=Md(),f=ou(a);return P.useEffect(()=>{d.store.setListId(f)},[f]),_.jsx(ke,{ref:t,...d.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:f,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});NG.classes=Al;NG.displayName="@mantine/core/ComboboxOptions";const lHe={withAriaAttributes:!0,withKeyboardNavigation:!0},OG=tt((e,t)=>{const n=$e("ComboboxSearch",lHe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...d}=n,f=Md(),h=f.getStyles("search"),p=AG({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return _.jsx(Ti,{ref:Ds(t,f.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||f.size,...p,...d,__staticSelector:"Combobox"})});OG.classes=Al;OG.displayName="@mantine/core/ComboboxSearch";const cHe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},Hbe=tt((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=$e("ComboboxTarget",cHe,e);if(!xg(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Md(),d=AG({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),f=P.cloneElement(n,{...d,...l});return _.jsx(Ln.Target,{ref:Ds(t,c.store.targetRef),children:f})});Hbe.displayName="@mantine/core/ComboboxTarget";function dHe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function fHe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function hHe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function XI({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=gs({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=P.useRef(null),c=P.useRef(-1),d=P.useRef(null),f=P.useRef(null),h=P.useRef(-1),p=P.useRef(-1),m=P.useRef(-1),y=P.useCallback((B="unknown")=>{a||(u(!0),i==null||i(B))},[u,i,a]),v=P.useCallback((B="unknown")=>{a&&(u(!1),r==null||r(B))},[u,r,a]),w=P.useCallback((B="unknown")=>{a?v(B):y(B)},[v,y,a]),x=P.useCallback(()=>{const B=document.querySelector(`#${l.current} [data-combobox-selected]`);B==null||B.removeAttribute("data-combobox-selected"),B==null||B.removeAttribute("aria-selected")},[]),S=P.useCallback(B=>{const q=document.getElementById(l.current),G=q==null?void 0:q.querySelectorAll("[data-combobox-option]");if(!G)return null;const K=B>=G.length?0:B<0?G.length-1:B;return c.current=K,G!=null&&G[K]&&!G[K].hasAttribute("data-combobox-disabled")?(x(),G[K].setAttribute("data-combobox-selected","true"),G[K].setAttribute("aria-selected","true"),G[K].scrollIntoView({block:"nearest",behavior:o}),G[K].id):null},[o,x]),E=P.useCallback(()=>{const B=document.querySelector(`#${l.current} [data-combobox-active]`);if(B){const q=document.querySelectorAll(`#${l.current} [data-combobox-option]`),G=Array.from(q).findIndex(K=>K===B);return S(G)}return S(0)},[S]),T=P.useCallback(()=>S(fHe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[S,s]),A=P.useCallback(()=>S(dHe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[S,s]),I=P.useCallback(()=>S(hHe(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[S]),k=P.useCallback((B="selected",q)=>{m.current=window.setTimeout(()=>{var L;const G=document.querySelectorAll(`#${l.current} [data-combobox-option]`),K=Array.from(G).findIndex(V=>V.hasAttribute(`data-combobox-${B}`));c.current=K,q!=null&&q.scrollIntoView&&((L=G[K])==null||L.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),D=P.useCallback(()=>{c.current=-1,x()},[x]),M=P.useCallback(()=>{const B=document.querySelectorAll(`#${l.current} [data-combobox-option]`),q=B==null?void 0:B[c.current];q==null||q.click()},[]),z=P.useCallback(B=>{l.current=B},[]),O=P.useCallback(()=>{h.current=window.setTimeout(()=>d.current.focus(),0)},[]),$=P.useCallback(()=>{p.current=window.setTimeout(()=>f.current.focus(),0)},[]),F=P.useCallback(()=>c.current,[]);return P.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:y,closeDropdown:v,toggleDropdown:w,selectedOptionIndex:c.current,getSelectedOptionIndex:F,selectOption:S,selectFirstOption:I,selectActiveOption:E,selectNextOption:T,selectPreviousOption:A,resetSelectedOption:D,updateSelectedOptionIndex:k,listId:l.current,setListId:z,clickSelectedOption:M,searchRef:d,focusSearchInput:O,targetRef:f,focusTarget:$}}const pHe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},mHe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":Io(t),"--combobox-option-padding":wn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:ze(n),"--combobox-option-fz":Io(t),"--combobox-option-padding":wn(t,"combobox-option-padding")}});function An(e){const t=$e("Combobox",pHe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:d,resetSelectionOnOptionHover:f,__staticSelector:h,readOnly:p,...m}=t,y=XI(),v=o||y,w=Ot({name:h||"Combobox",classes:Al,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:mHe}),x=()=>{l==null||l(),v.closeDropdown()};return _.jsx(ZVe,{value:{getStyles:w,store:v,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:f,readOnly:p},children:_.jsx(Ln,{opened:v.dropdownOpened,...m,onClose:x,withRoles:!1,unstyled:i,children:s})})}const gHe=e=>e;An.extend=gHe;An.classes=Al;An.displayName="@mantine/core/Combobox";An.Target=Hbe;An.Dropdown=TG;An.Options=NG;An.Option=PG;An.Search=OG;An.Empty=CG;An.Chevron=SG;An.Footer=IG;An.Header=kG;An.EventsTarget=Ube;An.DropdownTarget=zbe;An.Group=RG;An.ClearButton=Bbe;An.HiddenInput=Vbe;var qbe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const Wbe=qbe,DL=P.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:d,size:f,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:y,style:v,vars:w,mod:x,...S},E)=>{const T=Ot({name:e,props:t,className:n,style:v,classes:qbe,classNames:r,styles:i,unstyled:s});return _.jsx(ke,{...T("root"),ref:E,__vars:{"--label-fz":Io(f),"--label-lh":wn(f,"label-lh")},mod:[{"label-position":h},x],variant:y,size:f,...S,children:_.jsxs(ke,{component:p,htmlFor:p==="label"?l:void 0,...T("body"),children:[o,_.jsxs("div",{...T("labelWrapper"),"data-disabled":c||void 0,children:[a&&_.jsx(ke,{component:m,htmlFor:m==="label"?l:void 0,...T("label"),"data-disabled":c||void 0,children:a}),u&&_.jsx(Ti.Description,{size:f,__inheritStyles:!1,...T("description"),children:u}),d&&typeof d!="boolean"&&_.jsx(Ti.Error,{size:f,__inheritStyles:!1,...T("error"),children:d})]})]})})});DL.displayName="@mantine/core/InlineInput";const Gbe=P.createContext(null),yHe=Gbe.Provider,Ybe=()=>P.useContext(Gbe),[vHe,bHe]=qb();var Kbe={card:"m_26775b0a"};const _He={withBorder:!0},wHe=(e,{radius:t})=>({card:{"--card-radius":ii(t)}}),DG=tt((e,t)=>{const n=$e("CheckboxCard",_He,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:d,value:f,onClick:h,...p}=n,m=Ot({name:"CheckboxCard",classes:Kbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:wHe,rootSelector:"card"}),y=Ybe(),v=typeof l=="boolean"?l:(y==null?void 0:y.value.includes(f||""))||!1;return _.jsx(vHe,{value:{checked:v},children:_.jsx(Ps,{ref:t,mod:[{"with-border":d,checked:v},c],...m("card"),...p,role:"checkbox","aria-checked":v,onClick:w=>{h==null||h(w),y==null||y.onChange(f||"")}})})});DG.displayName="@mantine/core/CheckboxCard";DG.classes=Kbe;function MG({children:e,role:t}){const n=rS();return n?_.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):_.jsx(_.Fragment,{children:e})}const xHe={},$G=tt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=$e("CheckboxGroup",xHe,e),[c,d]=gs({value:n,defaultValue:r,finalValue:[],onChange:i}),f=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&d(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(yHe,{value:{value:c,onChange:f,size:s},children:_.jsx(Ti.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:_.jsx(MG,{role:"group",children:a})})})});$G.classes=Ti.Wrapper.classes;$G.displayName="@mantine/core/CheckboxGroup";function Xbe({size:e,style:t,...n}){const r=e!==void 0?{width:ze(e),height:ze(e),...t}:t;return _.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:_.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Qbe({indeterminate:e,...t}){return e?_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:_.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):_.jsx(Xbe,{...t})}var Jbe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const EHe={icon:Qbe},SHe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=_c({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":wn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:ii(t),"--checkbox-color":s==="outline"?u:mi(n,e),"--checkbox-icon-color":i?mi(i,e):rv(o,e)?Pp({color:n,theme:e,autoContrast:o}):void 0}}},LG=tt((e,t)=>{const n=$e("CheckboxIndicator",EHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:d,color:f,iconColor:h,autoContrast:p,checked:m,mod:y,variant:v,disabled:w,...x}=n,S=l,E=Ot({name:"CheckboxIndicator",classes:Jbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:SHe,rootSelector:"indicator"}),T=bHe(),A=typeof m=="boolean"||typeof c=="boolean"?m||c:(T==null?void 0:T.checked)||!1;return _.jsx(ke,{ref:t,...E("indicator",{variant:v}),variant:v,mod:[{checked:A,disabled:w},y],...x,children:_.jsx(S,{indeterminate:c,...E("icon")})})});LG.displayName="@mantine/core/CheckboxIndicator";LG.classes=Jbe;var Zbe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const THe={labelPosition:"right",icon:Qbe},CHe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=_c({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":wn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:ii(t),"--checkbox-color":s==="outline"?u:mi(n,e),"--checkbox-icon-color":i?mi(i,e):rv(o,e)?Pp({color:n,theme:e,autoContrast:o}):void 0}}},Lf=tt((e,t)=>{const n=$e("Checkbox",THe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:d,size:f,radius:h,wrapperProps:p,children:m,checked:y,labelPosition:v,description:w,error:x,disabled:S,variant:E,indeterminate:T,icon:A,rootRef:I,iconColor:k,onChange:D,autoContrast:M,mod:z,...O}=n,$=Ybe(),F=f||($==null?void 0:$.size),B=A,q=Ot({name:"Checkbox",props:n,classes:Zbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:CHe}),{styleProps:G,rest:K}=Gb(O),L=ou(d),V=$?{checked:$.value.includes(K.value),onChange:X=>{$.onChange(X),D==null||D(X)}}:{};return _.jsx(DL,{...q("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:L,size:F,labelPosition:v,label:c,description:w,error:x,disabled:S,classNames:r,styles:o,unstyled:a,"data-checked":V.checked||y||void 0,variant:E,ref:I,mod:z,...G,...p,children:_.jsxs(ke,{...q("inner"),mod:{"data-label-position":v},children:[_.jsx(ke,{component:"input",id:L,ref:t,checked:y,disabled:S,mod:{error:!!x,indeterminate:T},...q("input",{focusable:!0,variant:E}),onChange:D,...K,...V,type:"checkbox"}),_.jsx(B,{indeterminate:T,...q("icon")})]})})});Lf.classes={...Zbe,...Wbe};Lf.displayName="@mantine/core/Checkbox";Lf.Group=$G;Lf.Indicator=LG;Lf.Card=DG;function qx(e){return"group"in e}function e_e({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;qx(o)&&i.push({group:o.group,items:e_e({options:o.items,search:t,limit:n-i.length})}),qx(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function AHe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function t_e(e,t=new Set){if(Array.isArray(e))for(const n of e)if(qx(n))t_e(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function IHe(e,t){return Array.isArray(e)?e.includes(t):e===t}function n_e({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!qx(e)){const a=IHe(n,e.value),u=t&&a&&_.jsx(Xbe,{className:Al.optionsDropdownCheckIcon}),l=_.jsxs(_.Fragment,{children:[r==="left"&&u,_.jsx("span",{children:e.label}),r==="right"&&u]});return _.jsx(An.Option,{value:e.value,disabled:e.disabled,className:Dt({[Al.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>_.jsx(n_e,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return _.jsx(An.Group,{label:e.group,children:o})}function FG({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:d,nothingFoundMessage:f,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:y,"aria-label":v}){t_e(e);const x=typeof i=="string"?(r||e_e)({options:e,search:u?i:"",limit:s??1/0}):e,S=AHe(x),E=x.map(T=>_.jsx(n_e,{data:T,withCheckIcon:l,value:c,checkIconPosition:d,unstyled:h,renderOption:m},qx(T)?T.group:T.value));return _.jsx(An.Dropdown,{hidden:t||n&&S,children:_.jsxs(An.Options,{labelledBy:p,"aria-label":v,children:[a?_.jsx(sv.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...y,children:E}):E,S&&f&&_.jsx(An.Empty,{children:f})]})})}const RHe={},jG=tt((e,t)=>{const n=$e("Autocomplete",RHe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:d,onBlur:f,onClick:h,onChange:p,data:m,value:y,defaultValue:v,selectFirstOptionOnChange:w,onOptionSubmit:x,comboboxProps:S,readOnly:E,disabled:T,filter:A,limit:I,withScrollArea:k,maxDropdownHeight:D,size:M,id:z,renderOption:O,autoComplete:$,scrollAreaProps:F,...B}=n,q=ou(z),G=EG(m),K=OL(G),[L,V]=gs({value:y,defaultValue:v,finalValue:"",onChange:p}),X=XI({opened:a,defaultOpened:u,onDropdownOpen:c,onDropdownClose:()=>{l==null||l(),X.resetSelectedOption()}}),{resolvedClassNames:H,resolvedStyles:Q}=Np({props:n,styles:i,classNames:r});return P.useEffect(()=>{w&&X.selectFirstOption()},[w,L]),_.jsxs(An,{store:X,__staticSelector:"Autocomplete",classNames:H,styles:Q,unstyled:s,readOnly:E,onOptionSubmit:Z=>{x==null||x(Z),V(K[Z].label),X.closeDropdown()},size:M,...S,children:[_.jsx(An.Target,{autoComplete:$,children:_.jsx(jl,{ref:t,...B,size:M,__staticSelector:"Autocomplete",disabled:T,readOnly:E,value:L,onChange:Z=>{V(Z.currentTarget.value),X.openDropdown(),w&&X.selectFirstOption()},onFocus:Z=>{X.openDropdown(),d==null||d(Z)},onBlur:Z=>{X.closeDropdown(),f==null||f(Z)},onClick:Z=>{X.openDropdown(),h==null||h(Z)},classNames:H,styles:Q,unstyled:s,id:q})}),_.jsx(FG,{data:G,hidden:E||T,filter:A,search:L,limit:I,hiddenWhenEmpty:!0,withScrollArea:k,maxDropdownHeight:D,unstyled:s,labelId:B.label?`${q}-label`:void 0,"aria-label":B.label?void 0:B["aria-label"],renderOption:O,scrollAreaProps:F})]})});jG.classes={...jl.classes,...An.classes};jG.displayName="@mantine/core/Autocomplete";var r_e={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const kHe={},PHe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":wn(s,"badge-height"),"--badge-padding-x":wn(s,"badge-padding-x"),"--badge-fz":wn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:ii(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?mi(n,e):void 0}}},Tf=Ws((e,t)=>{const n=$e("Badge",kHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:d,leftSection:f,rightSection:h,children:p,variant:m,fullWidth:y,autoContrast:v,circle:w,mod:x,...S}=n,E=Ot({name:"Badge",props:n,classes:r_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:PHe});return _.jsxs(ke,{variant:m,mod:[{block:y,circle:w},x],...E("root",{variant:m}),ref:t,...S,children:[f&&_.jsx("span",{...E("section"),"data-position":"left",children:f}),_.jsx("span",{...E("label"),children:p}),h&&_.jsx("span",{...E("section"),"data-position":"right",children:h})]})});Tf.classes=r_e;Tf.displayName="@mantine/core/Badge";var i_e={root:"m_ddec01c0",icon:"m_dde7bd57",cite:"m_dde51a35"};const NHe={iconSize:48},OHe=(e,{color:t,iconSize:n,radius:r})=>{const i=_c({color:t||e.primaryColor,theme:e,colorScheme:"dark"}),s=_c({color:t||e.primaryColor,theme:e,colorScheme:"light"});return{root:{"--bq-bg-light":td(s.value,.07),"--bq-bg-dark":td(i.value,.06),"--bq-bd":mi(t,e),"--bq-icon-size":ze(n),"--bq-radius":ii(r)}}},BG=tt((e,t)=>{const n=$e("Blockquote",NHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,icon:c,iconSize:d,cite:f,...h}=n,p=Ot({name:"Blockquote",classes:i_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:OHe});return _.jsxs(ke,{component:"blockquote",ref:t,...p("root"),...h,children:[c&&_.jsx("span",{...p("icon"),children:c}),l,f&&_.jsx("cite",{...p("cite"),children:f})]})});BG.classes=i_e;BG.displayName="@mantine/core/Blockquote";var s_e={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const DHe={},MHe=(e,{color:t,size:n,lineSize:r,transitionDuration:i,transitionTimingFunction:s})=>({root:{"--burger-color":t?mi(t,e):void 0,"--burger-size":wn(n,"burger-size"),"--burger-line-size":r?ze(r):void 0,"--burger-transition-duration":i===void 0?void 0:`${i}ms`,"--burger-transition-timing-function":s}}),zG=tt((e,t)=>{const n=$e("Burger",DHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,children:c,transitionDuration:d,transitionTimingFunction:f,...h}=n,p=Ot({name:"Burger",classes:s_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:MHe});return _.jsxs(Ps,{...p("root"),ref:t,...h,children:[_.jsx(ke,{mod:["reduce-motion",{opened:l}],...p("burger")}),c]})});zG.classes=s_e;zG.displayName="@mantine/core/Burger";var ML={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const rae={orientation:"horizontal"},$He=(e,{borderWidth:t})=>({group:{"--button-border-width":ze(t)}}),UG=tt((e,t)=>{const n=$e("ButtonGroup",rae,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:d,mod:f,...h}=$e("ButtonGroup",rae,e),p=Ot({name:"ButtonGroup",props:n,classes:ML,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:$He,rootSelector:"group"});return _.jsx(ke,{...p("group"),ref:t,variant:d,mod:[{"data-orientation":u},f],role:"group",...h})});UG.classes=ML;UG.displayName="@mantine/core/ButtonGroup";const LHe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${ze(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},FHe={},jHe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":wn(s,"button-height"),"--button-padding-x":wn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?Io(s.replace("compact-","")):Io(s),"--button-radius":t===void 0?void 0:ii(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},Zn=Ws((e,t)=>{const n=$e("Button",FHe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:d,variant:f,radius:h,loading:p,loaderProps:m,gradient:y,classNames:v,styles:w,unstyled:x,"data-disabled":S,autoContrast:E,mod:T,...A}=n,I=Ot({name:"Button",props:n,classes:ML,className:s,style:r,classNames:v,styles:w,unstyled:x,vars:i,varsResolver:jHe}),k=!!l,D=!!c;return _.jsxs(Ps,{ref:t,...I("root",{active:!a&&!p&&!S}),unstyled:x,variant:f,disabled:a||p,mod:[{disabled:a||S,loading:p,block:d,"with-left-section":k,"with-right-section":D},T],...A,children:[_.jsx(Jf,{mounted:!!p,transition:LHe,duration:150,children:M=>_.jsx(ke,{component:"span",...I("loader",{style:M}),"aria-hidden":!0,children:_.jsx(io,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),_.jsxs("span",{...I("inner"),children:[l&&_.jsx(ke,{component:"span",...I("section"),mod:{position:"left"},children:l}),_.jsx(ke,{component:"span",mod:{loading:p},...I("label"),children:u}),c&&_.jsx(ke,{component:"span",...I("section"),mod:{position:"right"},children:c})]})]})});Zn.classes=ML;Zn.displayName="@mantine/core/Button";Zn.Group=UG;const[BHe,zHe]=lo("Card component was not found in tree");var VG={root:"m_e615b15f",section:"m_599a2148"};const UHe={},$L=Ws((e,t)=>{const n=$e("CardSection",UHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...d}=n,f=zHe();return _.jsx(ke,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...f.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...d})});$L.classes=VG;$L.displayName="@mantine/core/CardSection";const VHe={},HHe=(e,{padding:t})=>({root:{"--card-padding":Cl(t)}}),Kb=Ws((e,t)=>{const n=$e("Card",VHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...d}=n,f=Ot({name:"Card",props:n,classes:VG,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:HHe}),h=P.Children.toArray(l),p=h.map((m,y)=>typeof m=="object"&&m&&"type"in m&&m.type===$L?P.cloneElement(m,{"data-first-section":y===0||void 0,"data-last-section":y===h.length-1||void 0}):m);return _.jsx(BHe,{value:{getStyles:f},children:_.jsx(ub,{ref:t,unstyled:a,...f("root"),...d,children:p})})});Kb.classes=VG;Kb.displayName="@mantine/core/Card";Kb.Section=$L;var o_e={root:"m_4451eb3a"};const qHe={},Il=Ws((e,t)=>{const n=$e("Center",qHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...d}=n,f=Ot({name:"Center",props:n,classes:o_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return _.jsx(ke,{ref:t,mod:[{inline:l},c],...f("root"),...d})});Il.classes=o_e;Il.displayName="@mantine/core/Center";var a_e={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const iae={withShadow:!0},WHe=(e,{radius:t,size:n})=>({root:{"--cs-radius":t===void 0?void 0:ii(t),"--cs-size":ze(n)}}),ep=Ws((e,t)=>{const n=$e("ColorSwatch",iae,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,size:c,radius:d,withShadow:f,children:h,variant:p,...m}=$e("ColorSwatch",iae,n),y=Ot({name:"ColorSwatch",props:n,classes:a_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:WHe});return _.jsxs(ke,{ref:t,variant:p,size:c,...y("root",{focusable:!0}),...m,children:[_.jsx("span",{...y("alphaOverlay")}),f&&_.jsx("span",{...y("shadowOverlay")}),_.jsx("span",{...y("colorOverlay",{style:{backgroundColor:l}})}),_.jsx("span",{...y("childrenOverlay"),children:h})]})});ep.classes=a_e;ep.displayName="@mantine/core/ColorSwatch";const[GHe,HG]=qb(null),qG=P.forwardRef(({position:e,...t},n)=>_.jsx(ke,{ref:n,__vars:{"--thumb-y-offset":`${e.y*100}%`,"--thumb-x-offset":`${e.x*100}%`},...t}));qG.displayName="@mantine/core/ColorPickerThumb";var WG={wrapper:"m_fee9c77",preview:"m_9dddfbac",body:"m_bffecc3e",sliders:"m_3283bb96",thumb:"m_40d572ba",swatch:"m_d8ee6fd8",swatches:"m_5711e686",saturation:"m_202a296e",saturationOverlay:"m_11b3db02",slider:"m_d856d47d",sliderOverlay:"m_8f327113"};const YHe={},GG=tt((e,t)=>{var G;const n=$e("ColorSlider",YHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onChange:l,onChangeEnd:c,maxValue:d,round:f,size:h="md",focusable:p=!0,value:m,overlays:y,thumbColor:v="transparent",onScrubStart:w,onScrubEnd:x,__staticSelector:S="ColorPicker",...E}=n,T=Ot({name:S,classes:WG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a}),I=((G=HG())==null?void 0:G.getStyles)||T,k=qs(),[D,M]=P.useState({y:0,x:m/d}),z=P.useRef(D),O=K=>f?Math.round(K*d):K*d,{ref:$}=bL(({x:K,y:L})=>{z.current={x:K,y:L},l==null||l(O(K))},{onScrubEnd:()=>{const{x:K}=z.current;c==null||c(O(K)),x==null||x()},onScrubStart:w});bc(()=>{M({y:0,x:m/d})},[m]);const F=(K,L)=>{K.preventDefault();const V=P1e(L);l==null||l(O(V.x)),c==null||c(O(V.x))},B=K=>{switch(K.key){case"ArrowRight":{F(K,{x:D.x+.05,y:D.y});break}case"ArrowLeft":{F(K,{x:D.x-.05,y:D.y});break}}},q=y.map((K,L)=>P.createElement("div",{...I("sliderOverlay"),style:K,key:L}));return _.jsxs(ke,{...E,ref:Ds($,t),...I("slider"),role:"slider","aria-valuenow":m,"aria-valuemax":d,"aria-valuemin":0,tabIndex:p?0:-1,onKeyDown:B,"data-focus-ring":k.focusRing,__vars:{"--cp-thumb-size":`var(--cp-thumb-size-${h})`},children:[q,_.jsx(qG,{position:D,...I("thumb",{style:{top:ze(1),background:v}})})]})});GG.displayName="@mantine/core/ColorSlider";function hd(e,t=0,n=10**t){return Math.round(n*e)/n}function KHe({h:e,s:t,l:n,a:r}){const i=t*((n<50?n:100-n)/100);return{h:e,s:i>0?2*i/(n+i)*100:0,v:n+i,a:r}}const XHe={grad:360/400,turn:360,rad:360/(Math.PI*2)};function QHe(e,t="deg"){return Number(e)*(XHe[t]||1)}const JHe=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function sae(e){const t=JHe.exec(e);return t?KHe({h:QHe(t[1],t[2]),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)}):{h:0,s:0,v:0,a:1}}function JU({r:e,g:t,b:n,a:r}){const i=Math.max(e,t,n),s=i-Math.min(e,t,n),o=s?i===e?(t-n)/s:i===t?2+(n-e)/s:4+(e-t)/s:0;return{h:hd(60*(o<0?o+6:o),3),s:hd(i?s/i*100:0,3),v:hd(i/255*100,3),a:r}}function ZU(e){const t=e[0]==="#"?e.slice(1):e;return t.length===3?JU({r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:1}):JU({r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:1})}function ZHe(e){const t=e[0]==="#"?e.slice(1):e,n=o=>hd(parseInt(o,16)/255,3);if(t.length===4){const o=t.slice(0,3),a=n(t[3]+t[3]);return{...ZU(o),a}}const r=t.slice(0,6),i=n(t.slice(6,8));return{...ZU(r),a:i}}const eqe=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function oae(e){const t=eqe.exec(e);return t?JU({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):{h:0,s:0,v:0,a:1}}const u_e={hex:/^#?([0-9A-F]{3}){1,2}$/i,hexa:/^#?([0-9A-F]{4}){1,2}$/i,rgb:/^rgb\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,rgba:/^rgba\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,hsl:/hsl\(\s*(\d+)\s*,\s*(\d+(?:\.\d+)?%)\s*,\s*(\d+(?:\.\d+)?%)\)/i,hsla:/^hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*(\d*(?:\.\d+)?)\)$/i},tqe={hex:ZU,hexa:ZHe,rgb:oae,rgba:oae,hsl:sae,hsla:sae};function nqe(e){for(const[,t]of Object.entries(u_e))if(t.test(e))return!0;return!1}function UP(e){if(typeof e!="string")return{h:0,s:0,v:0,a:1};if(e==="transparent")return{h:0,s:0,v:0,a:0};const t=e.trim();for(const[n,r]of Object.entries(u_e))if(r.test(t))return tqe[n](t);return{h:0,s:0,v:0,a:1}}const rqe={},l_e=P.forwardRef((e,t)=>{const{value:n,onChange:r,onChangeEnd:i,color:s,...o}=$e("AlphaSlider",rqe,e);return _.jsx(GG,{...o,ref:t,value:n,onChange:a=>r==null?void 0:r(hd(a,2)),onChangeEnd:a=>i==null?void 0:i(hd(a,2)),maxValue:1,round:!1,"data-alpha":!0,overlays:[{backgroundImage:"linear-gradient(45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(-45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(45deg, transparent 75%, var(--slider-checkers) 75%), linear-gradient(-45deg, var(--mantine-color-body) 75%, var(--slider-checkers) 75%)",backgroundSize:`${ze(8)} ${ze(8)}`,backgroundPosition:`0 0, 0 ${ze(4)}, ${ze(4)} ${ze(-4)}, ${ze(-4)} 0`},{backgroundImage:`linear-gradient(90deg, transparent, ${s})`},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${ze(1)} inset, rgb(0, 0, 0, .15) 0 0 ${ze(4)} inset`}]})});l_e.displayName="@mantine/core/AlphaSlider";function c_e({h:e,s:t,v:n,a:r}){const i=e/360*6,s=t/100,o=n/100,a=Math.floor(i),u=o*(1-s),l=o*(1-(i-a)*s),c=o*(1-(1-i+a)*s),d=a%6;return{r:hd([o,l,u,u,c,o][d]*255),g:hd([c,o,o,l,u,u][d]*255),b:hd([u,u,c,o,o,l][d]*255),a:hd(r,2)}}function aae(e,t){const{r:n,g:r,b:i,a:s}=c_e(e);return t?`rgba(${n}, ${r}, ${i}, ${hd(s,2)})`:`rgb(${n}, ${r}, ${i})`}function uae({h:e,s:t,v:n,a:r},i){const s=(200-t)*n/100,o={h:Math.round(e),s:Math.round(s>0&&s<200?t*n/100/(s<=100?s:200-s)*100:0),l:Math.round(s/2)};return i?`hsla(${o.h}, ${o.s}%, ${o.l}%, ${hd(r,2)})`:`hsl(${o.h}, ${o.s}%, ${o.l}%)`}function iD(e){const t=e.toString(16);return t.length<2?`0${t}`:t}function d_e(e){const{r:t,g:n,b:r}=c_e(e);return`#${iD(t)}${iD(n)}${iD(r)}`}function iqe(e){const t=Math.round(e.a*255);return`${d_e(e)}${iD(t)}`}const Q8={hex:d_e,hexa:e=>iqe(e),rgb:e=>aae(e,!1),rgba:e=>aae(e,!0),hsl:e=>uae(e,!1),hsla:e=>uae(e,!0)};function g0(e,t){return t?e in Q8?Q8[e](t):Q8.hex(t):"#000000"}const f_e=P.forwardRef((e,t)=>{const{value:n,onChange:r,onChangeEnd:i,color:s,...o}=$e("HueSlider",{},e);return _.jsx(GG,{...o,ref:t,value:n,onChange:r,onChangeEnd:i,maxValue:360,thumbColor:`hsl(${n}, 100%, 50%)`,round:!0,"data-hue":!0,overlays:[{backgroundImage:"linear-gradient(to right,hsl(0,100%,50%),hsl(60,100%,50%),hsl(120,100%,50%),hsl(170,100%,50%),hsl(240,100%,50%),hsl(300,100%,50%),hsl(360,100%,50%))"},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${ze(1)} inset, rgb(0, 0, 0, .15) 0 0 ${ze(4)} inset`}]})});f_e.displayName="@mantine/core/HueSlider";function h_e({className:e,onChange:t,onChangeEnd:n,value:r,saturationLabel:i,focusable:s=!0,size:o,color:a,onScrubStart:u,onScrubEnd:l,...c}){const{getStyles:d}=HG(),[f,h]=P.useState({x:r.s/100,y:1-r.v/100}),p=P.useRef(f),{ref:m}=bL(({x:w,y:x})=>{p.current={x:w,y:x},t({s:Math.round(w*100),v:Math.round((1-x)*100)})},{onScrubEnd:()=>{const{x:w,y:x}=p.current;n({s:Math.round(w*100),v:Math.round((1-x)*100)}),l==null||l()},onScrubStart:u});P.useEffect(()=>{h({x:r.s/100,y:1-r.v/100})},[r.s,r.v]);const y=(w,x)=>{w.preventDefault();const S=P1e(x);t({s:Math.round(S.x*100),v:Math.round((1-S.y)*100)}),n({s:Math.round(S.x*100),v:Math.round((1-S.y)*100)})},v=w=>{switch(w.key){case"ArrowUp":{y(w,{y:f.y-.05,x:f.x});break}case"ArrowDown":{y(w,{y:f.y+.05,x:f.x});break}case"ArrowRight":{y(w,{x:f.x+.05,y:f.y});break}case"ArrowLeft":{y(w,{x:f.x-.05,y:f.y});break}}};return _.jsxs(ke,{...d("saturation"),ref:m,...c,role:"slider","aria-label":i,"aria-valuenow":f.x,"aria-valuetext":g0("rgba",r),tabIndex:s?0:-1,onKeyDown:v,children:[_.jsx("div",{...d("saturationOverlay",{style:{backgroundColor:`hsl(${r.h}, 100%, 50%)`}})}),_.jsx("div",{...d("saturationOverlay",{style:{backgroundImage:"linear-gradient(90deg, #fff, transparent)"}})}),_.jsx("div",{...d("saturationOverlay",{style:{backgroundImage:"linear-gradient(0deg, #000, transparent)"}})}),_.jsx(qG,{position:f,...d("thumb",{style:{backgroundColor:a}})})]})}h_e.displayName="@mantine/core/Saturation";const p_e=P.forwardRef(({className:e,datatype:t,setValue:n,onChangeEnd:r,size:i,focusable:s,data:o,swatchesPerRow:a,...u},l)=>{const c=HG(),d=o.map((f,h)=>P.createElement(ep,{...c.getStyles("swatch"),unstyled:c.unstyled,component:"button",type:"button",color:f,key:h,radius:"sm",onClick:()=>{n(f),r==null||r(f)},"aria-label":f,tabIndex:s?0:-1,"data-swatch":!0}));return _.jsx(ke,{...c.getStyles("swatches"),ref:l,...u,children:d})});p_e.displayName="@mantine/core/Swatches";const sqe={swatchesPerRow:7,withPicker:!0,focusable:!0,size:"md",__staticSelector:"ColorPicker"},oqe=(e,{size:t,swatchesPerRow:n})=>({wrapper:{"--cp-preview-size":wn(t,"cp-preview-size"),"--cp-width":wn(t,"cp-width"),"--cp-body-spacing":Cl(t),"--cp-swatch-size":`${100/n}%`,"--cp-thumb-size":wn(t,"cp-thumb-size"),"--cp-saturation-height":wn(t,"cp-saturation-height")}}),YG=tt((e,t)=>{const n=$e("ColorPicker",sqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,format:l,value:c,defaultValue:d,onChange:f,onChangeEnd:h,withPicker:p,size:m,saturationLabel:y,hueLabel:v,alphaLabel:w,focusable:x,swatches:S,swatchesPerRow:E,fullWidth:T,onColorSwatchClick:A,__staticSelector:I,mod:k,...D}=n,M=Ot({name:I,props:n,classes:WG,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"wrapper",vars:u,varsResolver:oqe}),z=P.useRef(l),O=P.useRef(),$=P.useRef(-1),F=P.useRef(!1),B=l==="hexa"||l==="rgba"||l==="hsla",[q,G,K]=gs({value:c,defaultValue:d,finalValue:"#FFFFFF",onChange:f}),[L,V]=P.useState(UP(q)),X=()=>{window.clearTimeout($.current),F.current=!0},H=()=>{window.clearTimeout($.current),$.current=window.setTimeout(()=>{F.current=!1},200)},Q=Z=>{V(ne=>{const ue={...ne,...Z};return O.current=g0(z.current,ue),ue}),G(O.current)};return bc(()=>{nqe(c)&&!F.current&&V(UP(c))},[c]),bc(()=>{z.current=l,G(g0(l,L))},[l]),_.jsx(GHe,{value:{getStyles:M,unstyled:a},children:_.jsxs(ke,{ref:t,...M("wrapper"),size:m,mod:[{"full-width":T},k],...D,children:[p&&_.jsxs(_.Fragment,{children:[_.jsx(h_e,{value:L,onChange:Q,onChangeEnd:({s:Z,v:ne})=>h==null?void 0:h(g0(z.current,{...L,s:Z,v:ne})),color:q,size:m,focusable:x,saturationLabel:y,onScrubStart:X,onScrubEnd:H}),_.jsxs("div",{...M("body"),children:[_.jsxs("div",{...M("sliders"),children:[_.jsx(f_e,{value:L.h,onChange:Z=>Q({h:Z}),onChangeEnd:Z=>h==null?void 0:h(g0(z.current,{...L,h:Z})),size:m,focusable:x,"aria-label":v,onScrubStart:X,onScrubEnd:H}),B&&_.jsx(l_e,{value:L.a,onChange:Z=>Q({a:Z}),onChangeEnd:Z=>{h==null||h(g0(z.current,{...L,a:Z}))},size:m,color:g0("hex",L),focusable:x,"aria-label":w,onScrubStart:X,onScrubEnd:H})]}),B&&_.jsx(ep,{color:q,radius:"sm",size:"var(--cp-preview-size)",...M("preview")})]})]}),Array.isArray(S)&&_.jsx(p_e,{data:S,swatchesPerRow:E,focusable:x,setValue:G,onChangeEnd:Z=>{const ne=g0(l,UP(Z));A==null||A(ne),h==null||h(ne),K||V(UP(Z))}})]})})});YG.classes=WG;YG.displayName="@mantine/core/ColorPicker";var m_e={root:"m_7485cace"};const aqe={},uqe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:wn(t,"container-size")}}),Zf=tt((e,t)=>{const n=$e("Container",aqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...d}=n,f=Ot({name:"Container",classes:m_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:uqe});return _.jsx(ke,{ref:t,mod:[{fluid:l},c],...f("root"),...d})});Zf.classes=m_e;Zf.displayName="@mantine/core/Container";const lqe={timeout:1e3};function g_e(e){const{children:t,timeout:n,value:r,...i}=$e("CopyButton",lqe,e),s=ZBe({timeout:n}),o=()=>s.copy(r);return _.jsx(_.Fragment,{children:t({copy:o,copied:s.copied,...i})})}g_e.displayName="@mantine/core/CopyButton";var y_e={root:"m_3eebeb36",label:"m_9e365f20"};const cqe={orientation:"horizontal"},dqe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?mi(t,e):void 0,"--divider-border-style":n,"--divider-size":wn(r,"divider-size")}}),ty=tt((e,t)=>{const n=$e("Divider",cqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:d,labelPosition:f,mod:h,...p}=n,m=Ot({name:"Divider",classes:y_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:dqe});return _.jsx(ke,{ref:t,mod:[{orientation:c,"with-label":!!d},h],...m("root"),...p,role:"separator",children:d&&_.jsx(ke,{component:"span",mod:{position:f},...m("label"),children:d})})});ty.classes=y_e;ty.displayName="@mantine/core/Divider";const[fqe,oS]=lo("Drawer component was not found in tree");var Cg={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const hqe={},LL=tt((e,t)=>{const n=$e("DrawerBody",hqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=oS();return _.jsx(iG,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});LL.classes=Cg;LL.displayName="@mantine/core/DrawerBody";const pqe={},FL=tt((e,t)=>{const n=$e("DrawerCloseButton",pqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=oS();return _.jsx(sG,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});FL.classes=Cg;FL.displayName="@mantine/core/DrawerCloseButton";const mqe={},jL=tt((e,t)=>{const n=$e("DrawerContent",mqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,radius:l,...c}=n,d=oS(),f=d.scrollAreaComponent||Nbe;return _.jsx(Pbe,{...d.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:d.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:l||d.radius||0,children:_.jsx(f,{style:{height:"100vh"},children:u})})});jL.classes=Cg;jL.displayName="@mantine/core/DrawerContent";const gqe={},BL=tt((e,t)=>{const n=$e("DrawerHeader",gqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=oS();return _.jsx(oG,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});BL.classes=Cg;BL.displayName="@mantine/core/DrawerHeader";const yqe={},zL=tt((e,t)=>{const n=$e("DrawerOverlay",yqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=oS();return _.jsx(aG,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});zL.classes=Cg;zL.displayName="@mantine/core/DrawerOverlay";function vqe(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function bqe(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const _qe={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},wqe={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},xqe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Nd("modal"),position:"left"},Eqe=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":wn(n,"drawer-size"),"--drawer-flex":bqe(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":vqe(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":ze(r)}}),UL=tt((e,t)=>{const n=$e("DrawerRoot",xqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,scrollAreaComponent:l,position:c,transitionProps:d,radius:f,...h}=n,{dir:p}=Bu(),m=Ot({name:"Drawer",classes:Cg,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Eqe}),y=(p==="rtl"?wqe:_qe)[c];return _.jsx(fqe,{value:{scrollAreaComponent:l,getStyles:m,radius:f},children:_.jsx(kbe,{ref:t,...m("root"),transitionProps:{transition:y,...d},unstyled:a,...h})})});UL.classes=Cg;UL.displayName="@mantine/core/DrawerRoot";const Sqe={},VL=tt((e,t)=>{const n=$e("DrawerTitle",Sqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=oS();return _.jsx(uG,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});VL.classes=Cg;VL.displayName="@mantine/core/DrawerTitle";const Tqe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Nd("modal"),withOverlay:!0,withCloseButton:!0},Op=tt((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...u}=$e("Drawer",Tqe,e),l=!!n||s;return _.jsxs(UL,{ref:t,...u,children:[r&&_.jsx(zL,{...i}),_.jsxs(jL,{children:[l&&_.jsxs(BL,{children:[n&&_.jsx(VL,{children:n}),s&&_.jsx(FL,{...o})]}),_.jsx(LL,{children:a})]})]})});Op.classes=Cg;Op.displayName="@mantine/core/Drawer";Op.Root=UL;Op.Overlay=zL;Op.Content=jL;Op.Body=LL;Op.Header=BL;Op.Title=VL;Op.CloseButton=FL;function v_e({open:e,close:t,openDelay:n,closeDelay:r}){const i=P.useRef(-1),s=P.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return P.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[Cqe,b_e]=lo("Grid component was not found in tree"),e7=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,lae=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":e7(e,t),cae=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},dae=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function Aqe({span:e,order:t,offset:n,selector:r}){var f;const i=qs(),s=b_e(),a=NC(e)===void 0?12:NC(e),u=eS({"--col-order":(f=NC(t))==null?void 0:f.toString(),"--col-flex-grow":cae(a,s.grow),"--col-flex-basis":e7(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":lae(a,s.columns,s.grow),"--col-offset":dae(NC(n),s.columns)}),l=ms(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=cae(e[p],s.grow),h[p]["--col-flex-basis"]=e7(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=lae(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=dae(n[p],s.columns)),h},{}),d=hM(ms(l),i).filter(h=>ms(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return _.jsx(UI,{styles:u,media:d,selector:r})}var KG={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const Iqe={span:12},XG=tt((e,t)=>{const n=$e("GridCol",Iqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...d}=n,f=b_e(),h=SL();return _.jsxs(_.Fragment,{children:[_.jsx(Aqe,{selector:`.${h}`,span:u,order:l,offset:c}),_.jsx(ke,{ref:t,...f.getStyles("col",{className:Dt(i,h),style:s,classNames:r,styles:o}),...d})]})});XG.classes=KG;XG.displayName="@mantine/core/GridCol";function Rqe({gutter:e,selector:t}){const n=qs(),r=eS({"--grid-gutter":Cl(NC(e))}),i=ms(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=Cl(e[u])),a),{}),o=hM(ms(i),n).filter(a=>ms(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return _.jsx(UI,{styles:r,media:o,selector:t})}const kqe={gutter:"md",grow:!1,columns:12},Pqe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),Au=tt((e,t)=>{const n=$e("Grid",kqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:d,align:f,justify:h,children:p,...m}=n,y=Ot({name:"Grid",classes:KG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Pqe}),v=SL();return _.jsxs(Cqe,{value:{getStyles:y,grow:l,columns:d},children:[_.jsx(Rqe,{selector:`.${v}`,...n}),_.jsx(ke,{ref:t,...y("root",{className:v}),...m,children:_.jsx("div",{...y("inner"),children:p})})]})});Au.classes=KG;Au.displayName="@mantine/core/Grid";Au.Col=XG;function fae({color:e,theme:t,defaultShade:n}){const r=_c({color:e,theme:t});return r.isThemeColor?r.shade===void 0?`var(--mantine-color-${r.color}-${n})`:`var(${r.variable})`:e}var __e={root:"m_bcb3f3c2"};const Nqe={color:"yellow"},Oqe=(e,{color:t})=>({root:{"--mark-bg-dark":fae({color:t,theme:e,defaultShade:5}),"--mark-bg-light":fae({color:t,theme:e,defaultShade:2})}}),QG=tt((e,t)=>{const n=$e("Mark",Nqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,variant:c,...d}=n,f=Ot({name:"Mark",props:n,className:i,style:s,classes:__e,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Oqe});return _.jsx(ke,{component:"mark",ref:t,variant:c,...f("root"),...d})});QG.classes=__e;QG.displayName="@mantine/core/Mark";function hae(e){return e.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&")}function Dqe(e,t){if(t==null)return[{chunk:e,highlighted:!1}];const n=Array.isArray(t)?t.map(hae):hae(t);if(!(Array.isArray(n)?n.filter(a=>a.trim().length>0).length>0:n.trim()!==""))return[{chunk:e,highlighted:!1}];const i=typeof n=="string"?n.trim():n.filter(a=>a.trim().length!==0).map(a=>a.trim()).sort((a,u)=>u.length-a.length).join("|"),s=new RegExp(`(${i})`,"gi");return e.split(s).map(a=>({chunk:a,highlighted:s.test(a)})).filter(({chunk:a})=>a)}const Mqe={},JG=Ws((e,t)=>{const{unstyled:n,children:r,highlight:i,highlightStyles:s,color:o,...a}=$e("Highlight",Mqe,e),u=Dqe(r,i);return _.jsx(dt,{unstyled:n,ref:t,...a,__staticSelector:"Highlight",children:u.map(({chunk:l,highlighted:c},d)=>c?_.jsx(QG,{unstyled:n,color:o,style:s,"data-highlight":l,children:l},d):_.jsx("span",{children:l},d))})});JG.classes=dt.classes;JG.displayName="@mantine/core/Highlight";const[$qe,w_e]=lo("HoverCard component was not found in the tree"),Lqe={};function x_e(e){const{children:t,onMouseEnter:n,onMouseLeave:r,...i}=$e("HoverCardDropdown",Lqe,e),s=w_e(),o=ya(n,s.openDropdown),a=ya(r,s.closeDropdown);return _.jsx(Ln.Dropdown,{onMouseEnter:o,onMouseLeave:a,...i,children:t})}x_e.displayName="@mantine/core/HoverCardDropdown";const Fqe={refProp:"ref"},E_e=P.forwardRef((e,t)=>{const{children:n,refProp:r,eventPropsWrapperName:i,...s}=$e("HoverCardTarget",Fqe,e);if(!xg(n))throw new Error("HoverCard.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=w_e(),a=ya(n.props.onMouseEnter,o.openDropdown),u=ya(n.props.onMouseLeave,o.closeDropdown),l={onMouseEnter:a,onMouseLeave:u};return _.jsx(Ln.Target,{refProp:r,ref:t,...s,children:P.cloneElement(n,i?{[i]:l}:l)})});E_e.displayName="@mantine/core/HoverCardTarget";const jqe={openDelay:0,closeDelay:150,initiallyOpened:!1};function Y1(e){const{children:t,onOpen:n,onClose:r,openDelay:i,closeDelay:s,initiallyOpened:o,...a}=$e("HoverCard",jqe,e),[u,{open:l,close:c}]=W1(o,{onClose:r,onOpen:n}),{openDropdown:d,closeDropdown:f}=v_e({open:l,close:c,openDelay:i,closeDelay:s});return _.jsx($qe,{value:{openDropdown:d,closeDropdown:f},children:_.jsx(Ln,{...a,opened:u,__staticSelector:"HoverCard",children:t})})}Y1.displayName="@mantine/core/HoverCard";Y1.Target=E_e;Y1.Dropdown=x_e;Y1.extend=e=>e;var S_e={root:"m_9e117634"};const Bqe={},zqe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:ii(t),"--image-object-fit":n}}),av=Ws((e,t)=>{const n=$e("Image",Bqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:d,fit:f,fallbackSrc:h,mod:p,...m}=n,[y,v]=P.useState(!c);P.useEffect(()=>v(!c),[c]);const w=Ot({name:"Image",classes:S_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:zqe});return y&&h?_.jsx(ke,{component:"img",ref:t,src:h,...w("root"),onError:l,mod:["fallback",p],...m}):_.jsx(ke,{component:"img",ref:t,...w("root"),src:c,onError:x=>{l==null||l(x),v(!0)},mod:p,...m})});av.classes=S_e;av.displayName="@mantine/core/Image";function Uqe(e="top-end",t=0){const n={"--indicator-top":void 0,"--indicator-bottom":void 0,"--indicator-left":void 0,"--indicator-right":void 0,"--indicator-translate-x":void 0,"--indicator-translate-y":void 0},r=ze(t),[i,s]=e.split("-");return i==="top"&&(n["--indicator-top"]=r,n["--indicator-translate-y"]="-50%"),i==="middle"&&(n["--indicator-top"]="50%",n["--indicator-translate-y"]="-50%"),i==="bottom"&&(n["--indicator-bottom"]=r,n["--indicator-translate-y"]="50%"),s==="start"&&(n["--indicator-left"]=r,n["--indicator-translate-x"]="-50%"),s==="center"&&(n["--indicator-left"]="50%",n["--indicator-translate-x"]="-50%"),s==="end"&&(n["--indicator-right"]=r,n["--indicator-translate-x"]="50%"),n}var T_e={root:"m_e5262200",indicator:"m_760d1fb1",processing:"m_885901b1"};const Vqe={position:"top-end",offset:0,inline:!1,withBorder:!1,disabled:!1,processing:!1},Hqe=(e,{color:t,position:n,offset:r,size:i,radius:s,zIndex:o,autoContrast:a})=>({root:{"--indicator-color":t?mi(t,e):void 0,"--indicator-text-color":rv(a,e)?Pp({color:t,theme:e,autoContrast:a}):void 0,"--indicator-size":ze(i),"--indicator-radius":s===void 0?void 0:ii(s),"--indicator-z-index":o==null?void 0:o.toString(),...Uqe(n,r)}}),ZG=tt((e,t)=>{const n=$e("Indicator",Vqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,position:c,offset:d,inline:f,label:h,radius:p,color:m,withBorder:y,disabled:v,processing:w,zIndex:x,autoContrast:S,mod:E,...T}=n,A=Ot({name:"Indicator",classes:T_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Hqe});return _.jsxs(ke,{ref:t,...A("root"),mod:[{inline:f},E],...T,children:[!v&&_.jsx(_.Fragment,{children:_.jsx(ke,{mod:{"with-label":!!h,"with-border":y,processing:w},...A("indicator"),children:h})}),l]})});ZG.classes=T_e;ZG.displayName="@mantine/core/Indicator";function t7(){return t7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t7.apply(null,arguments)}function qqe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Wqe=P.useLayoutEffect,Gqe=function(t){var n=P.useRef(t);return Wqe(function(){n.current=t}),n},pae=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},Yqe=function(t,n){var r=P.useRef();return P.useCallback(function(i){t.current=i,r.current&&pae(r.current,null),r.current=n,n&&pae(n,i)},[n])},mae={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Kqe=function(t){Object.keys(mae).forEach(function(n){t.style.setProperty(n,mae[n],"important")})},gae=Kqe,mu=null,yae=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function Xqe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),mu||(mu=document.createElement("textarea"),mu.setAttribute("tabindex","-1"),mu.setAttribute("aria-hidden","true"),gae(mu)),mu.parentNode===null&&document.body.appendChild(mu);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(f){var h=f;mu.style[h]=o[h]}),gae(mu),mu.value=t;var u=yae(mu,e);mu.value=t,u=yae(mu,e),mu.value="x";var l=mu.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var d=l*r;return a==="border-box"&&(d=d+i+s),u=Math.min(d,u),[u,l]}var vae=function(){},Qqe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},Jqe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],Zqe=!!document.documentElement.currentStyle,eWe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=Qqe(Jqe,n),i=r.boxSizing;if(i==="")return null;Zqe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},tWe=eWe;function C_e(e,t,n){var r=Gqe(n);P.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var nWe=function(t){C_e(window,"resize",t)},rWe=function(t){C_e(document.fonts,"loadingdone",t)},iWe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],sWe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?vae:o,u=t.onHeightChange,l=u===void 0?vae:u,c=qqe(t,iWe),d=c.value!==void 0,f=P.useRef(null),h=Yqe(f,n),p=P.useRef(0),m=P.useRef(),y=function(){var x=f.current,S=r&&m.current?m.current:tWe(x);if(S){m.current=S;var E=Xqe(S,x.value||x.placeholder||"x",s,i),T=E[0],A=E[1];p.current!==T&&(p.current=T,x.style.setProperty("height",T+"px","important"),l(T,{rowHeight:A}))}},v=function(x){d||y(),a(x)};return P.useLayoutEffect(y),nWe(y),rWe(y),P.createElement("textarea",t7({},c,{onChange:v,ref:h}))},oWe=P.forwardRef(sWe);const aWe={},m2=tt((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=$e("Textarea",aWe,e),u=n&&N1e()!=="test",l=u?{maxRows:r,minRows:i}:{};return _.jsx(jl,{component:u?oWe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});m2.classes=jl.classes;m2.displayName="@mantine/core/Textarea";const[uWe,lWe]=lo("List component was not found in tree");var eY={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const cWe={},tY=tt((e,t)=>{const n=$e("ListItem",cWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...d}=n,f=lWe(),h=u||f.icon,p={classNames:r,styles:o};return _.jsx(ke,{...f.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:f.center},c],ref:t,...d,children:_.jsxs("div",{...f.getStyles("itemWrapper",p),children:[h&&_.jsx("span",{...f.getStyles("itemIcon",p),children:h}),_.jsx("span",{...f.getStyles("itemLabel",p),children:l})]})})});tY.classes=eY;tY.displayName="@mantine/core/ListItem";const dWe={type:"unordered"},fWe=(e,{size:t,spacing:n})=>({root:{"--list-fz":Io(t),"--list-lh":E1e(t),"--list-spacing":Cl(n)}}),Cf=tt((e,t)=>{const n=$e("List",dWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:d,icon:f,spacing:h,center:p,listStyleType:m,mod:y,...v}=n,w=Ot({name:"List",classes:eY,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fWe});return _.jsx(uWe,{value:{center:p,icon:f,getStyles:w},children:_.jsx(ke,{...w("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":d},y],ref:t,...v,children:l})})});Cf.classes=eY;Cf.displayName="@mantine/core/List";Cf.Item=tY;var A_e={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const bae={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Nd("overlay")},hWe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),xc=tt((e,t)=>{const n=$e("LoadingOverlay",bae,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:d,visible:f,zIndex:h,...p}=n,m=qs(),y=Ot({name:"LoadingOverlay",classes:A_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:hWe}),v={...bae.overlayProps,...d};return _.jsx(Jf,{transition:"fade",...l,mounted:!!f,children:w=>_.jsxs(ke,{...y("root",{style:w}),ref:t,...p,children:[_.jsx(io,{...y("loader"),unstyled:a,...c}),_.jsx(p2,{...v,...y("overlay"),darkHidden:!0,unstyled:a,color:(d==null?void 0:d.color)||m.white}),_.jsx(p2,{...v,...y("overlay"),lightHidden:!0,unstyled:a,color:(d==null?void 0:d.color)||m.colors.dark[5]})]})})});xc.classes=A_e;xc.displayName="@mantine/core/LoadingOverlay";const[pWe,QI]=lo("Menu component was not found in the tree");var aS={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const mWe={},nY=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=$e("MenuDivider",mWe,e),u=QI();return _.jsx(ke,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});nY.classes=aS;nY.displayName="@mantine/core/MenuDivider";const gWe={},rY=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=$e("MenuDropdown",gWe,e),d=P.useRef(null),f=QI(),h=y=>{var v,w;(y.key==="ArrowUp"||y.key==="ArrowDown")&&(y.preventDefault(),(w=(v=d.current)==null?void 0:v.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||w.focus())},p=ya(a,()=>(f.trigger==="hover"||f.trigger==="click-hover")&&f.openDropdown()),m=ya(u,()=>(f.trigger==="hover"||f.trigger==="click-hover")&&f.closeDropdown());return _.jsxs(Ln.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:Ds(t,d),...f.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[_.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});rY.classes=aS;rY.displayName="@mantine/core/MenuDropdown";const yWe={},g2=Ws((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:d,disabled:f,...h}=$e("MenuItem",yWe,e),p=QI(),m=qs(),{dir:y}=Bu(),v=P.useRef(),w=p.getItemIndex(v.current),x=h,S=ya(x.onMouseLeave,()=>p.setHovered(-1)),E=ya(x.onMouseEnter,()=>p.setHovered(p.getItemIndex(v.current))),T=ya(x.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),A=ya(x.onFocus,()=>p.setHovered(p.getItemIndex(v.current))),I=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,k=a?_c({color:a,theme:m}):null;return _.jsxs(Ps,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:A,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:Ds(v,t),role:"menuitem",disabled:f,"data-menu-item":!0,"data-disabled":f||void 0,"data-hovered":p.hovered===w?!0:void 0,onMouseEnter:E,onMouseLeave:S,onClick:T,onKeyDown:IW({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:y,orientation:"vertical",onKeyDown:x.onKeydown}),__vars:{"--menu-item-color":k!=null&&k.isThemeColor&&(k==null?void 0:k.shade)===void 0?`var(--mantine-color-${k.color}-6)`:I==null?void 0:I.color,"--menu-item-hover":I==null?void 0:I.hover},children:[l&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),d&&_.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:d}),c&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});g2.classes=aS;g2.displayName="@mantine/core/MenuItem";const vWe={},iY=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=$e("MenuLabel",vWe,e),u=QI();return _.jsx(ke,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});iY.classes=aS;iY.displayName="@mantine/core/MenuLabel";const bWe={refProp:"ref"},I_e=P.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=$e("MenuTarget",bWe,e);if(!xg(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=QI(),o=ya(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=ya(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=ya(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return _.jsx(Ln.Target,{refProp:r,popupType:"menu",ref:t,...i,children:P.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});I_e.displayName="@mantine/core/MenuTarget";const _We={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Dn(e){const t=$e("Menu",_We,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:d,trigger:f,openDelay:h,closeDelay:p,classNames:m,styles:y,unstyled:v,variant:w,vars:x,menuItemTabIndex:S,keepMounted:E,...T}=t,A=Ot({name:"Menu",classes:aS,props:t,classNames:m,styles:y,unstyled:v}),[I,{setHovered:k,resetHovered:D}]=QBe(),[M,z]=gs({value:s,defaultValue:o,finalValue:!1,onChange:u}),[O,$]=P.useState(!1),F=()=>{z(!1),$(!1),M&&(i==null||i())},B=()=>{z(!0),!M&&(r==null||r())},q=()=>{M?F():B()},{openDropdown:G,closeDropdown:K}=v_e({open:B,close:F,closeDelay:p,openDelay:h}),L=H=>XBe("[data-menu-item]","[data-menu-dropdown]",H),{resolvedClassNames:V,resolvedStyles:X}=Np({classNames:m,styles:y,props:t});return bc(()=>{D()},[M]),_.jsx(pWe,{value:{getStyles:A,opened:M,toggleDropdown:q,getItemIndex:L,hovered:I,setHovered:k,openedViaClick:O,setOpenedViaClick:$,closeOnItemClick:l,closeDropdown:f==="click"?F:K,openDropdown:f==="click"?B:G,closeDropdownImmediately:F,loop:c,trigger:f,unstyled:v,menuItemTabIndex:S},children:_.jsx(Ln,{...T,opened:M,onChange:q,defaultOpened:o,trapFocus:E?!1:a,closeOnEscape:d,__staticSelector:"Menu",classNames:V,styles:X,unstyled:v,variant:w,keepMounted:E,children:n})})}Dn.extend=e=>e;Dn.classes=aS;Dn.displayName="@mantine/core/Menu";Dn.Item=g2;Dn.Label=iY;Dn.Dropdown=rY;Dn.Target=I_e;Dn.Divider=nY;const[wWe,uS]=lo("Modal component was not found in tree");var Ag={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const xWe={},HL=tt((e,t)=>{const n=$e("ModalBody",xWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=uS();return _.jsx(iG,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});HL.classes=Ag;HL.displayName="@mantine/core/ModalBody";const EWe={},qL=tt((e,t)=>{const n=$e("ModalCloseButton",EWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=uS();return _.jsx(sG,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});qL.classes=Ag;qL.displayName="@mantine/core/ModalCloseButton";const SWe={},WL=tt((e,t)=>{const n=$e("ModalContent",SWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=uS(),d=c.scrollAreaComponent||Nbe;return _.jsx(Pbe,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:_.jsx(d,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${ze(c.yOffset)} * 2))`},children:u})})});WL.classes=Ag;WL.displayName="@mantine/core/ModalContent";const TWe={},GL=tt((e,t)=>{const n=$e("ModalHeader",TWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=uS();return _.jsx(oG,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});GL.classes=Ag;GL.displayName="@mantine/core/ModalHeader";const CWe={},YL=tt((e,t)=>{const n=$e("ModalOverlay",CWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=uS();return _.jsx(aG,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});YL.classes=Ag;YL.displayName="@mantine/core/ModalOverlay";const AWe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Nd("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},IWe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:ii(t),"--modal-size":wn(n,"modal-size"),"--modal-y-offset":ze(r),"--modal-x-offset":ze(i)}}),KL=tt((e,t)=>{const n=$e("ModalRoot",AWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:d,fullScreen:f,centered:h,xOffset:p,__staticSelector:m,...y}=n,v=Ot({name:m,classes:Ag,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:IWe});return _.jsx(wWe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:v,fullScreen:f},children:_.jsx(kbe,{ref:t,...v("root"),"data-full-screen":f||void 0,"data-centered":h||void 0,unstyled:a,...y})})});KL.classes=Ag;KL.displayName="@mantine/core/ModalRoot";const RWe={},XL=tt((e,t)=>{const n=$e("ModalTitle",RWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=uS();return _.jsx(uG,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});XL.classes=Ag;XL.displayName="@mantine/core/ModalTitle";const kWe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Nd("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},zs=tt((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=$e("Modal",kWe,e),c=!!n||s;return _.jsxs(KL,{ref:t,radius:u,...l,children:[r&&_.jsx(YL,{...i}),_.jsxs(WL,{radius:u,children:[c&&_.jsxs(GL,{children:[n&&_.jsx(XL,{children:n}),s&&_.jsx(qL,{...o})]}),_.jsx(HL,{children:a})]})]})});zs.classes=Ag;zs.displayName="@mantine/core/Modal";zs.Root=KL;zs.Overlay=YL;zs.Content=WL;zs.Body=HL;zs.Header=GL;zs.Title=XL;zs.CloseButton=qL;const[PWe,sY]=qb(),[NWe,OWe]=qb();var QL={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const DWe={},MWe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?wn(t):wn(n,"pg-gap")}}),oY=tt((e,t)=>{const n=$e("PillGroup",DWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...d}=n,f=sY(),h=(f==null?void 0:f.size)||l||void 0,p=Ot({name:"PillGroup",classes:QL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:MWe,stylesCtx:{size:h},rootSelector:"group"});return _.jsx(NWe,{value:{size:h,disabled:c},children:_.jsx(ke,{ref:t,size:h,...p("group"),...d})})});oY.classes=QL;oY.displayName="@mantine/core/PillGroup";const $We={variant:"default"},LWe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":wn(n,"pill-fz"),"--pill-height":wn(n,"pill-height"),"--pill-radius":t===void 0?void 0:ii(t)}}),cb=tt((e,t)=>{const n=$e("Pill",$We,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:d,onRemove:f,removeButtonProps:h,radius:p,size:m,disabled:y,mod:v,...w}=n,x=OWe(),S=sY(),E=m||(x==null?void 0:x.size)||void 0,T=(S==null?void 0:S.variant)==="filled"?"contrast":l||"default",A=Ot({name:"Pill",classes:QL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:LWe,stylesCtx:{size:E}});return _.jsxs(ke,{component:"span",ref:t,variant:T,size:E,...A("root",{variant:T}),mod:[{"with-remove":d&&!y,disabled:y||(x==null?void 0:x.disabled)},v],...w,children:[_.jsx("span",{...A("label"),children:c}),d&&_.jsx(Sg,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...A("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:I=>{var k;I.preventDefault(),I.stopPropagation(),(k=h==null?void 0:h.onMouseDown)==null||k.call(h,I)},onClick:I=>{var k;I.stopPropagation(),f==null||f(),(k=h==null?void 0:h.onClick)==null||k.call(h,I)}})]})});cb.classes=QL;cb.displayName="@mantine/core/Pill";cb.Group=oY;var R_e={field:"m_45c4369d"};const FWe={type:"visible"},aY=tt((e,t)=>{const n=$e("PillsInputField",FWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:d,pointer:f,mod:h,...p}=n,m=sY(),y=rS(),v=Ot({name:"PillsInputField",classes:R_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),w=c||(m==null?void 0:m.disabled);return _.jsx(ke,{component:"input",ref:Ds(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:w,mod:[{disabled:w,pointer:f},h],...v("field"),...p,id:(y==null?void 0:y.inputId)||d,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":y==null?void 0:y.describedBy,type:"text",onMouseDown:x=>!f&&x.stopPropagation()})});aY.classes=R_e;aY.displayName="@mantine/core/PillsInputField";const jWe={},Wx=tt((e,t)=>{const n=$e("PillsInput",jWe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...d}=n,f=P.useRef();return _.jsx(PWe,{value:{fieldRef:f,size:o,disabled:a,hasError:!!l,variant:c},children:_.jsx(jl,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=f.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=f.current)==null||p.focus()},...d,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});Wx.displayName="@mantine/core/PillsInput";Wx.Field=aY;function BWe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(qx(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const zWe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},JL=tt((e,t)=>{const n=$e("MultiSelect",zWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:d,onChange:f,onKeyDown:h,variant:p,data:m,dropdownOpened:y,defaultDropdownOpened:v,onDropdownOpen:w,onDropdownClose:x,selectFirstOptionOnChange:S,onOptionSubmit:E,comboboxProps:T,filter:A,limit:I,withScrollArea:k,maxDropdownHeight:D,searchValue:M,defaultSearchValue:z,onSearchChange:O,readOnly:$,disabled:F,onFocus:B,onBlur:q,onPaste:G,radius:K,rightSection:L,rightSectionWidth:V,rightSectionPointerEvents:X,rightSectionProps:H,leftSection:Q,leftSectionWidth:Z,leftSectionPointerEvents:ne,leftSectionProps:ue,inputContainer:le,inputWrapperOrder:ce,withAsterisk:ge,labelProps:se,descriptionProps:te,errorProps:Ee,wrapperProps:we,description:De,label:Le,error:Ne,maxValues:Te,searchable:qe,nothingFoundMessage:Qe,withCheckIcon:Ue,checkIconPosition:Ve,hidePickedOptions:Se,withErrorStyles:it,name:It,form:Re,id:Ge,clearable:ot,clearButtonProps:ct,hiddenInputProps:Mt,placeholder:Nn,hiddenInputValuesDivider:Rr,required:xr,mod:Mr,renderOption:fn,onRemove:qn,onClear:lr,scrollAreaProps:cr,...bs}=n,Ai=ou(Ge),ci=EG(m),Wn=OL(ci),or=XI({opened:y,defaultOpened:v,onDropdownOpen:w,onDropdownClose:()=>{x==null||x(),or.resetSelectedOption()}}),{styleProps:Wi,rest:{type:qu,autoComplete:$o,...lu}}=Gb(bs),[Rt,yi]=gs({value:c,defaultValue:d,finalValue:[],onChange:f}),[xn,$r]=gs({value:M,defaultValue:z,finalValue:"",onChange:O}),Vr=Ot({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:vi,resolvedStyles:ve}=Np({props:n,styles:o,classNames:r}),he=St=>{h==null||h(St),St.key===" "&&!qe&&(St.preventDefault(),or.toggleDropdown()),St.key==="Backspace"&&xn.length===0&&Rt.length>0&&(qn==null||qn(Rt[Rt.length-1]),yi(Rt.slice(0,Rt.length-1)))},xe=Rt.map((St,Ht)=>{var sn,ar;return _.jsx(cb,{withRemoveButton:!$&&!((sn=Wn[St])!=null&&sn.disabled),onRemove:()=>{yi(Rt.filter(dr=>St!==dr)),qn==null||qn(St)},unstyled:a,disabled:F,...Vr("pill"),children:((ar=Wn[St])==null?void 0:ar.label)||St},`${St}-${Ht}`)});P.useEffect(()=>{S&&or.selectFirstOption()},[S,Rt]);const We=ot&&Rt.length>0&&!F&&!$&&_.jsx(An.ClearButton,{size:l,...ct,onClear:()=>{lr==null||lr(),yi([]),$r("")}}),Ye=BWe({data:ci,value:Rt});return _.jsxs(_.Fragment,{children:[_.jsxs(An,{store:or,classNames:vi,styles:ve,unstyled:a,size:l,readOnly:$,__staticSelector:"MultiSelect",onOptionSubmit:St=>{E==null||E(St),$r(""),or.updateSelectedOptionIndex("selected"),Rt.includes(Wn[St].value)?(yi(Rt.filter(Ht=>Ht!==Wn[St].value)),qn==null||qn(Wn[St].value)):Rt.length<Te&&yi([...Rt,Wn[St].value])},...T,children:[_.jsx(An.DropdownTarget,{children:_.jsx(Wx,{...Wi,__staticSelector:"MultiSelect",classNames:vi,styles:ve,unstyled:a,size:l,className:i,style:s,variant:p,disabled:F,radius:K,rightSection:L||We||_.jsx(An.Chevron,{size:l,error:Ne,unstyled:a}),rightSectionPointerEvents:X||(We?"all":"none"),rightSectionWidth:V,rightSectionProps:H,leftSection:Q,leftSectionWidth:Z,leftSectionPointerEvents:ne,leftSectionProps:ue,inputContainer:le,inputWrapperOrder:ce,withAsterisk:ge,labelProps:se,descriptionProps:te,errorProps:Ee,wrapperProps:we,description:De,label:Le,error:Ne,multiline:!0,withErrorStyles:it,__stylesApiProps:{...n,rightSectionPointerEvents:X||(We?"all":"none"),multiline:!0},pointer:!qe,onClick:()=>qe?or.openDropdown():or.toggleDropdown(),"data-expanded":or.dropdownOpened||void 0,id:Ai,required:xr,mod:Mr,children:_.jsxs(cb.Group,{disabled:F,unstyled:a,...Vr("pillsList"),children:[xe,_.jsx(An.EventsTarget,{autoComplete:$o,children:_.jsx(Wx.Field,{...lu,ref:t,id:Ai,placeholder:Nn,type:!qe&&!Nn?"hidden":"visible",...Vr("inputField"),unstyled:a,onFocus:St=>{B==null||B(St),qe&&or.openDropdown()},onBlur:St=>{q==null||q(St),or.closeDropdown(),$r("")},onKeyDown:he,value:xn,onChange:St=>{$r(St.currentTarget.value),qe&&or.openDropdown(),S&&or.selectFirstOption()},disabled:F,readOnly:$||!qe,pointer:!qe})})]})})}),_.jsx(FG,{data:Se?Ye:ci,hidden:$||F,filter:A,search:xn,limit:I,hiddenWhenEmpty:!Qe,withScrollArea:k,maxDropdownHeight:D,filterOptions:qe,value:Rt,checkIconPosition:Ve,withCheckIcon:Ue,nothingFoundMessage:Qe,unstyled:a,labelId:Le?`${Ai}-label`:void 0,"aria-label":Le?void 0:bs["aria-label"],renderOption:fn,scrollAreaProps:cr})]}),_.jsx(An.HiddenInput,{name:It,valuesDivider:Rr,value:Rt,form:Re,disabled:F,...Mt})]})});JL.classes={...jl.classes,...An.classes};JL.displayName="@mantine/core/MultiSelect";var k_e={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const UWe={},VWe=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":Cl(r)}}},ZL=Ws((e,t)=>{const n=$e("NavLink",UWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:d,children:f,onClick:h,active:p,disabled:m,leftSection:y,rightSection:v,label:w,description:x,disableRightSectionRotation:S,noWrap:E,childrenOffset:T,onKeyDown:A,autoContrast:I,mod:k,...D}=n,M=Ot({name:"NavLink",props:n,classes:k_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:VWe}),[z,O]=gs({value:l,defaultValue:c,finalValue:!1,onChange:d}),$=!!f,F=B=>{h==null||h(B),$&&(B.preventDefault(),O(!z))};return _.jsxs(_.Fragment,{children:[_.jsxs(Ps,{...M("root"),component:"a",ref:t,onClick:F,onKeyDown:B=>{A==null||A(B),B.nativeEvent.code==="Space"&&$&&(B.preventDefault(),O(!z))},unstyled:a,mod:[{disabled:m,active:p,expanded:z},k],...D,children:[y&&_.jsx(ke,{component:"span",...M("section"),mod:{position:"left"},children:y}),_.jsxs(ke,{...M("body"),mod:{"no-wrap":E},children:[_.jsx(ke,{component:"span",...M("label"),children:w}),_.jsx(ke,{component:"span",mod:{active:p},...M("description"),children:x})]}),($||v)&&_.jsx(ke,{...M("section"),component:"span",mod:{rotate:z&&!S,position:"right"},children:$?v||_.jsx(Hx,{...M("chevron")}):v})]}),_.jsx(iv,{in:z,...M("collapse"),children:_.jsx("div",{...M("children"),children:f})})]})});ZL.classes=k_e;ZL.displayName="@mantine/core/NavLink";function P_e(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var y2;(function(e){e.event="event",e.props="prop"})(y2||(y2={}));function O0(){}function HWe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function v2(e){return!!(e||"").match(/\d/)}function hx(e){return e==null}function qWe(e){return typeof e=="number"&&isNaN(e)}function N_e(e){return hx(e)||qWe(e)||typeof e=="number"&&!isFinite(e)}function O_e(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function WWe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function GWe(e,t,n){var r=WWe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function YWe(e){var t=P.useRef(e);t.current=e;var n=P.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function uY(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function KWe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function D_e(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function _ae(e,t){return Array(t+1).join(e)}function M_e(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+_ae("0",Math.abs(o))+i:o>=a?i=i+_ae("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function wae(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=uY(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),d=s;s&&Number(c[0])&&(d=s.split("").reverse().reduce(function(m,y,v){return m.length>v?(Number(m[0])+Number(y)).toString()+m.substring(1,m.length):y+m},c[0]));var f=D_e(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+d+p+f}function S1(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var $_e=HWe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),XWe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function QWe(e,t,n){return Math.min(Math.max(e,t),n)}function J8(e){return Math.max(e.selectionStart,e.selectionEnd)}function JWe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function ZWe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function eGe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function tGe(e,t,n,r,i,s,o){o===void 0&&(o=eGe);var a=i.findIndex(function(S){return S}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,d={},f=new Array(l),h=0;h<l;h++){f[h]=-1;for(var p=0,m=c;p<m;p++){var y=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(y&&d[p]!==!0){f[h]=p,d[p]=!0;break}}}for(var v=r;v<l&&(f[v]===-1||!s(n[v]));)v++;var w=v===l||f[v]===-1?c:f[v];for(v=r-1;v>0&&f[v]===-1;)v--;var x=v===-1||f[v]===-1?0:f[v]+1;return x>w?w:r-x<w-r?x:w}function xae(e,t,n,r){var i=e.length;if(t=QWe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function nGe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(v2(e[n])||v2(e[n-1]));return t}function L_e(e,t,n,r,i,s){s===void 0&&(s=O0);var o=YWe(function(p,m){var y,v;return N_e(p)?(v="",y=""):typeof p=="number"||m?(v=typeof p=="number"?M_e(p):p,y=r(v)):(v=i(p,void 0),y=r(v)),{formattedValue:y,numAsString:v}}),a=P.useState(function(){return o(hx(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},d=e,f=n;hx(e)&&(d=u.numAsString,f=!0);var h=o(d,f);return P.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function rGe(e){return e.replace(/[^0-9]/g,"")}function iGe(e){return e}function sGe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=iGe);var a=e.removeFormatting;a===void 0&&(a=rGe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,d=e.isAllowed,f=e.onChange;f===void 0&&(f=O0);var h=e.onKeyDown;h===void 0&&(h=O0);var p=e.onMouseUp;p===void 0&&(p=O0);var m=e.onFocus;m===void 0&&(m=O0);var y=e.onBlur;y===void 0&&(y=O0);var v=e.value,w=e.getCaretBoundary;w===void 0&&(w=nGe);var x=e.isValidInputCharacter;x===void 0&&(x=v2);var S=e.isCharacterSame,E=P_e(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),T=L_e(v,u,!!l,o,a,c),A=T[0],I=A.formattedValue,k=A.numAsString,D=T[1],M=P.useRef(),z=P.useRef({formattedValue:I,numAsString:k}),O=function(Ne,Te){z.current={formattedValue:Ne.formattedValue,numAsString:Ne.value},D(Ne,Te)},$=P.useState(!1),F=$[0],B=$[1],q=P.useRef(null),G=P.useRef({setCaretTimeout:null,focusTimeout:null});P.useEffect(function(){return B(!0),function(){clearTimeout(G.current.setCaretTimeout),clearTimeout(G.current.focusTimeout)}},[]);var K=o,L=function(Ne,Te){var qe=parseFloat(Te);return{formattedValue:Ne,value:Te,floatValue:isNaN(qe)?void 0:qe}},V=function(Ne,Te,qe){Ne.selectionStart===0&&Ne.selectionEnd===Ne.value.length||(S1(Ne,Te),G.current.setCaretTimeout=setTimeout(function(){Ne.value===qe&&Ne.selectionStart!==Te&&S1(Ne,Te)},0))},X=function(Ne,Te,qe){return xae(Ne,Te,w(Ne),qe)},H=function(Ne,Te,qe){var Qe=w(Te),Ue=tGe(Te,I,Ne,qe,Qe,x,S);return Ue=xae(Te,Ue,Qe),Ue},Q=function(Ne){var Te=Ne.formattedValue;Te===void 0&&(Te="");var qe=Ne.input,Qe=Ne.source,Ue=Ne.event,Ve=Ne.numAsString,Se;if(qe){var it=Ne.inputValue||qe.value,It=J8(qe);qe.value=Te,Se=H(it,Te,It),Se!==void 0&&V(qe,Se,Te)}Te!==I&&O(L(Te,Ve),{event:Ue,source:Qe})};P.useEffect(function(){var Ne=z.current,Te=Ne.formattedValue,qe=Ne.numAsString;(I!==Te||k!==qe)&&O(L(I,k),{event:void 0,source:y2.props})},[I,k]);var Z=q.current?J8(q.current):void 0,ne=typeof window<"u"?P.useLayoutEffect:P.useEffect;ne(function(){var Ne=q.current;if(I!==z.current.formattedValue&&Ne){var Te=H(z.current.formattedValue,I,Z);Ne.value=I,V(Ne,Te,I)}},[I]);var ue=function(Ne,Te,qe){var Qe=Te.target,Ue=M.current?XWe(M.current,Qe.selectionEnd):$_e(I,Ne),Ve=Object.assign(Object.assign({},Ue),{lastValue:I}),Se=a(Ne,Ve),it=K(Se);if(Se=a(it,void 0),d&&!d(L(it,Se))){var It=Te.target,Re=J8(It),Ge=H(Ne,I,Re);return It.value=I,V(It,Ge,I),!1}return Q({formattedValue:it,numAsString:Se,inputValue:Ne,event:Te,source:qe,input:Te.target}),!0},le=function(Ne,Te){Te===void 0&&(Te=0);var qe=Ne.selectionStart,Qe=Ne.selectionEnd;M.current={selectionStart:qe,selectionEnd:Qe+Te}},ce=function(Ne){var Te=Ne.target,qe=Te.value,Qe=ue(qe,Ne,y2.event);Qe&&f(Ne),M.current=void 0},ge=function(Ne){var Te=Ne.target,qe=Ne.key,Qe=Te.selectionStart,Ue=Te.selectionEnd,Ve=Te.value;Ve===void 0&&(Ve="");var Se;qe==="ArrowLeft"||qe==="Backspace"?Se=Math.max(Qe-1,0):qe==="ArrowRight"?Se=Math.min(Qe+1,Ve.length):qe==="Delete"&&(Se=Qe);var it=0;qe==="Delete"&&Qe===Ue&&(it=1);var It=qe==="ArrowLeft"||qe==="ArrowRight";if(Se===void 0||Qe!==Ue&&!It){h(Ne),le(Te,it);return}var Re=Se;if(It){var Ge=qe==="ArrowLeft"?"left":"right";Re=X(Ve,Se,Ge),Re!==Se&&Ne.preventDefault()}else qe==="Delete"&&!x(Ve[Se])?Re=X(Ve,Se,"right"):qe==="Backspace"&&!x(Ve[Se])&&(Re=X(Ve,Se,"left"));Re!==Se&&V(Te,Re,Ve),h(Ne),le(Te,it)},se=function(Ne){var Te=Ne.target,qe=function(){var Qe=Te.selectionStart,Ue=Te.selectionEnd,Ve=Te.value;if(Ve===void 0&&(Ve=""),Qe===Ue){var Se=X(Ve,Qe);Se!==Qe&&V(Te,Se,Ve)}};qe(),requestAnimationFrame(function(){qe()}),p(Ne),le(Te)},te=function(Ne){Ne.persist&&Ne.persist();var Te=Ne.target,qe=Ne.currentTarget;q.current=Te,G.current.focusTimeout=setTimeout(function(){var Qe=Te.selectionStart,Ue=Te.selectionEnd,Ve=Te.value;Ve===void 0&&(Ve="");var Se=X(Ve,Qe);Se!==Qe&&!(Qe===0&&Ue===Ve.length)&&V(Te,Se,Ve),m(Object.assign(Object.assign({},Ne),{currentTarget:qe}))},0)},Ee=function(Ne){q.current=null,clearTimeout(G.current.focusTimeout),clearTimeout(G.current.setCaretTimeout),y(Ne)},we=F&&JWe()?"numeric":void 0,De=Object.assign({inputMode:we},E,{type:t,value:I,onChange:ce,onKeyDown:ge,onMouseUp:se,onFocus:te,onBlur:Ee});if(n==="text")return i?Is.createElement(Is.Fragment,null,i(I,E)||null):Is.createElement("span",Object.assign({},E,{ref:s}),I);if(r){var Le=r;return Is.createElement(Le,Object.assign({},De,{ref:s}))}return Is.createElement("input",Object.assign({},De,{ref:s}))}function Eae(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=eF(t),l=u.thousandSeparator,c=u.decimalSeparator,d=n!==0&&e.indexOf(".")!==-1||n&&r,f=uY(e,o),h=f.beforeDecimal,p=f.afterDecimal,m=f.addNegation;return n!==void 0&&(p=D_e(p,n,!!r)),l&&(h=GWe(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(d&&c||"")+p,e}function eF(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function oGe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function aGe(e,t){return new RegExp("(^-)|[0-9]|"+O_e(e),"g")}function uGe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function lGe(e,t,n){var r;t===void 0&&(t=ZWe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,d=l.end,f=eF(n),h=f.allowedDecimalSeparators,p=f.decimalSeparator,m=e[d]===p;if(v2(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(d-c===1&&h.indexOf(e[c])!==-1){var y=a===0?"":p;e=e.substring(0,c)+y+e.substring(c+1,e.length)}var v=function(q,G,K){var L=!1,V=!1;s.startsWith("-")?L=!1:q.startsWith("--")?(L=!1,V=!0):o.startsWith("-")&&q.length===o.length?L=!1:q[0]==="-"&&(L=!0);var X=L?1:0;return V&&(X=2),X&&(q=q.substring(X),G-=X,K-=X),{value:q,start:G,end:K,hasNegation:L}},w=v(e,c,d),x=w.hasNegation;r=w,e=r.value,c=r.start,d=r.end;var S=v(t.lastValue,u.start,u.end),E=S.start,T=S.end,A=S.value,I=e.substring(c,d);e.length&&A.length&&(E>A.length-o.length||T<s.length)&&!(I&&o.startsWith(I))&&(e=A);var k=0;e.startsWith(s)?k+=s.length:c<s.length&&(k=c),e=e.substring(k),d-=k;var D=e.length,M=e.length-o.length;e.endsWith(o)?D=M:(d>M||d>e.length-o.length)&&(D=d),e=e.substring(0,D),e=oGe(x?"-"+e:e,i),e=(e.match(aGe(p))||[]).join("");var z=e.indexOf(p);e=e.replace(new RegExp(O_e(p),"g"),function(q,G){return G===z?".":""});var O=uY(e,i),$=O.beforeDecimal,F=O.afterDecimal,B=O.addNegation;return l.end-l.start<u.end-u.start&&$===""&&m&&!parseFloat(F)&&(e=B?"-":""),e}function cGe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function dGe(e){var t=eF(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function fGe(e){e=dGe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=O0);var s=e.onBlur;s===void 0&&(s=O0);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,d=e.value,f=e.valueIsNumericString,h=e.onValueChange,p=P_e(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=eF(e),y=m.decimalSeparator,v=m.allowedDecimalSeparators,w=function(B){return Eae(B,e)},x=function(B,q){return lGe(B,q,e)},S=hx(d)?c:d,E=f??uGe(S,l,t);hx(d)?hx(c)||(E=E||typeof c=="number"):E=E||typeof d=="number";var T=function(B){return N_e(B)?B:(typeof B=="number"&&(B=M_e(B)),E&&typeof a=="number"?wae(B,a,!!u):B)},A=L_e(T(d),T(c),!!E,w,x,h),I=A[0],k=I.numAsString,D=I.formattedValue,M=A[1],z=function(B){var q=B.target,G=B.key,K=q.selectionStart,L=q.selectionEnd,V=q.value;if(V===void 0&&(V=""),(G==="Backspace"||G==="Delete")&&L<l.length){B.preventDefault();return}if(K!==L){i(B);return}G==="Backspace"&&V[0]==="-"&&K===l.length+1&&n&&S1(q,1),a&&u&&(G==="Backspace"&&V[K-1]===y?(S1(q,K-1),B.preventDefault()):G==="Delete"&&V[K]===y&&B.preventDefault()),v!=null&&v.includes(G)&&V[K]===y&&S1(q,K+1);var X=o===!0?",":o;G==="Backspace"&&V[K-1]===X&&S1(q,K-1),G==="Delete"&&V[K]===X&&S1(q,K+1),i(B)},O=function(B){var q=k;if(q.match(/\d/g)||(q=""),r||(q=KWe(q)),u&&a&&(q=wae(q,a,u)),q!==k){var G=Eae(q,e);M({formattedValue:G,value:q,floatValue:parseFloat(q)},{event:B,source:y2.event})}s(B)},$=function(B){return B===y?!0:v2(B)},F=function(B){var q=B.currentValue,G=B.lastValue,K=B.formattedValue,L=B.currentValueIndex,V=B.formattedValueIndex,X=q[L],H=K[V],Q=$_e(G,q),Z=Q.to;return L>=Z.start&&L<Z.end&&v&&v.includes(X)&&H===y?!0:X===H};return Object.assign(Object.assign({},p),{value:D,valueIsNumericString:!1,isValidInputCharacter:$,isCharacterSame:F,onValueChange:M,format:w,removeFormatting:x,getCaretBoundary:function(B){return cGe(B,e)},onKeyDown:z,onBlur:O})}function hGe(e){var t=fGe(e);return Is.createElement(sGe,Object.assign({},t))}function Sae({direction:e,style:t,...n}){return _.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var n7={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const pGe=/^(0\.0*|-0(\.0*)?)$/,mGe=/^-?0\d+(\.\d+)?\.?$/;function gGe(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function Tae(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const yGe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},vGe=(e,{size:t})=>({controls:{"--ni-chevron-size":wn(t,"ni-chevron-size")}}),lY=tt((e,t)=>{const n=$e("NumberInput",yGe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:d,max:f,min:h,step:p,hideControls:m,rightSection:y,isAllowed:v,clampBehavior:w,onBlur:x,allowDecimal:S,decimalScale:E,onKeyDown:T,onKeyDownCapture:A,handlersRef:I,startValue:k,disabled:D,rightSectionPointerEvents:M,allowNegative:z,readOnly:O,size:$,rightSectionWidth:F,stepHoldInterval:B,stepHoldDelay:q,allowLeadingZeros:G,withKeyboardEvents:K,trimLeadingZeroesOnBlur:L,...V}=n,X=Ot({name:"NumberInput",classes:n7,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:vGe}),{resolvedClassNames:H,resolvedStyles:Q}=Np({classNames:i,styles:s,props:n}),[Z,ne]=gs({value:c,defaultValue:d,onChange:u}),ue=q!==void 0&&B!==void 0,le=P.useRef(null),ce=P.useRef(null),ge=P.useRef(0),se=(Se,it)=>{it.source==="event"&&ne(gGe(Se.floatValue)&&!pGe.test(Se.value)&&!(G&&mGe.test(Se.value))?Se.floatValue:Se.value),l==null||l(Se,it)},te=Se=>{const it=String(Se).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return it?Math.max(0,(it[1]?it[1].length:0)-(it[2]?+it[2]:0)):0},Ee=Se=>{le.current&&typeof Se<"u"&&le.current.setSelectionRange(Se,Se)},we=P.useRef();we.current=()=>{let Se;const it=te(Z),It=te(p),Re=Math.max(it,It),Ge=10**Re;if(typeof Z!="number"||Number.isNaN(Z))Se=fd(k,h,f);else if(f!==void 0){const ct=(Math.round(Z*Ge)+Math.round(p*Ge))/Ge;Se=ct<=f?ct:f}else Se=(Math.round(Z*Ge)+Math.round(p*Ge))/Ge;const ot=Se.toFixed(Re);ne(parseFloat(ot)),l==null||l({floatValue:parseFloat(ot),formattedValue:ot,value:ot},{source:"increment"}),setTimeout(()=>{var ct;return Ee((ct=le.current)==null?void 0:ct.value.length)},0)};const De=P.useRef();De.current=()=>{let Se;const it=h!==void 0?h:z?Number.MIN_SAFE_INTEGER:0,It=te(Z),Re=te(p),Ge=Math.max(It,Re),ot=10**Ge;if(typeof Z!="number"||Number.isNaN(Z))Se=fd(k,it,f);else{const Mt=(Math.round(Z*ot)-Math.round(p*ot))/ot;Se=it!==void 0&&Mt<it?it:Mt}const ct=Se.toFixed(Ge);ne(parseFloat(ct)),l==null||l({floatValue:parseFloat(ct),formattedValue:ct,value:ct},{source:"decrement"}),setTimeout(()=>{var Mt;return Ee((Mt=le.current)==null?void 0:Mt.value.length)},0)};const Le=Se=>{T==null||T(Se),!(O||!K)&&(Se.key==="ArrowUp"&&(Se.preventDefault(),we.current()),Se.key==="ArrowDown"&&(Se.preventDefault(),De.current()))},Ne=Se=>{if(A==null||A(Se),Se.key==="Backspace"){const it=le.current;it.selectionStart===0&&it.selectionStart===it.selectionEnd&&(Se.preventDefault(),window.setTimeout(()=>Ee(0),0))}};PW(I,{increment:we.current,decrement:De.current});const Te=Se=>{Se?we.current():De.current(),ge.current+=1},qe=Se=>{if(Te(Se),ue){const it=typeof B=="number"?B:B(ge.current);ce.current=window.setTimeout(()=>qe(Se),it)}},Qe=(Se,it)=>{var It;Se.preventDefault(),(It=le.current)==null||It.focus(),Te(it),ue&&(ce.current=window.setTimeout(()=>qe(it),q))},Ue=()=>{ce.current&&window.clearTimeout(ce.current),ce.current=null,ge.current=0},Ve=_.jsxs("div",{...X("controls"),children:[_.jsx(Ps,{...X("control"),tabIndex:-1,"aria-hidden":!0,disabled:D||typeof Z=="number"&&f!==void 0&&Z>=f,mod:{direction:"up"},onMouseDown:Se=>Se.preventDefault(),onPointerDown:Se=>{Qe(Se,!0)},onPointerUp:Ue,onPointerLeave:Ue,children:_.jsx(Sae,{direction:"up"})}),_.jsx(Ps,{...X("control"),tabIndex:-1,"aria-hidden":!0,disabled:D||typeof Z=="number"&&h!==void 0&&Z<=h,mod:{direction:"down"},onMouseDown:Se=>Se.preventDefault(),onPointerDown:Se=>{Qe(Se,!1)},onPointerUp:Ue,onPointerLeave:Ue,children:_.jsx(Sae,{direction:"down"})})]});return _.jsx(jl,{component:hGe,allowNegative:z,className:Dt(n7.root,r),size:$,...V,readOnly:O,disabled:D,value:Z,getInputRef:Ds(t,le),onValueChange:se,rightSection:m||O?y:y||Ve,classNames:H,styles:Q,unstyled:o,__staticSelector:"NumberInput",decimalScale:S?E:0,onKeyDown:Le,onKeyDownCapture:Ne,rightSectionPointerEvents:M??(D?"none":void 0),rightSectionWidth:F??`var(--ni-right-section-width-${$||"sm"})`,allowLeadingZeros:G,onBlur:Se=>{if(x==null||x(Se),w==="blur"&&typeof Z=="number"&&fd(Z,h,f)!==Z&&ne(fd(Z,h,f)),L&&typeof Z=="string"){const it=Z.replace(/^0+/,""),It=parseFloat(it);ne(Number.isNaN(It)||It>Number.MAX_SAFE_INTEGER?it:It)}},isAllowed:Se=>w==="strict"?v?v(Se)&&Tae(Se.floatValue,h,f):Tae(Se.floatValue,h,f):v?v(Se):!0})});lY.classes={...jl.classes,...n7};lY.displayName="@mantine/core/NumberInput";const[bGe,tF]=lo("Pagination.Root component was not found in tree");var JI={root:"m_4addd315",control:"m_326d024a",dots:"m_4ad7767d"};const _Ge={withPadding:!0},ZI=tt((e,t)=>{const n=$e("PaginationControl",_Ge,e),{classNames:r,className:i,style:s,styles:o,vars:a,active:u,disabled:l,withPadding:c,mod:d,...f}=n,h=tF(),p=l||h.disabled;return _.jsx(Ps,{ref:t,disabled:p,mod:[{active:u,disabled:p,"with-padding":c},d],...h.getStyles("control",{className:i,style:s,classNames:r,styles:o,active:!p}),...f})});ZI.classes=JI;ZI.displayName="@mantine/core/PaginationControl";function eR({style:e,children:t,path:n,...r}){return _.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)",...e},...r,children:_.jsx("path",{d:n,fill:"currentColor"})})}const wGe=e=>_.jsx(eR,{...e,path:"M8.781 8l-3.3-3.3.943-.943L10.667 8l-4.243 4.243-.943-.943 3.3-3.3z"}),xGe=e=>_.jsx(eR,{...e,path:"M7.219 8l3.3 3.3-.943.943L5.333 8l4.243-4.243.943.943-3.3 3.3z"}),EGe=e=>_.jsx(eR,{...e,path:"M6.85355 3.85355C7.04882 3.65829 7.04882 3.34171 6.85355 3.14645C6.65829 2.95118 6.34171 2.95118 6.14645 3.14645L2.14645 7.14645C1.95118 7.34171 1.95118 7.65829 2.14645 7.85355L6.14645 11.8536C6.34171 12.0488 6.65829 12.0488 6.85355 11.8536C7.04882 11.6583 7.04882 11.3417 6.85355 11.1464L3.20711 7.5L6.85355 3.85355ZM12.8536 3.85355C13.0488 3.65829 13.0488 3.34171 12.8536 3.14645C12.6583 2.95118 12.3417 2.95118 12.1464 3.14645L8.14645 7.14645C7.95118 7.34171 7.95118 7.65829 8.14645 7.85355L12.1464 11.8536C12.3417 12.0488 12.6583 12.0488 12.8536 11.8536C13.0488 11.6583 13.0488 11.3417 12.8536 11.1464L9.20711 7.5L12.8536 3.85355Z"}),SGe=e=>_.jsx(eR,{...e,path:"M2.14645 11.1464C1.95118 11.3417 1.95118 11.6583 2.14645 11.8536C2.34171 12.0488 2.65829 12.0488 2.85355 11.8536L6.85355 7.85355C7.04882 7.65829 7.04882 7.34171 6.85355 7.14645L2.85355 3.14645C2.65829 2.95118 2.34171 2.95118 2.14645 3.14645C1.95118 3.34171 1.95118 3.65829 2.14645 3.85355L5.79289 7.5L2.14645 11.1464ZM8.14645 11.1464C7.95118 11.3417 7.95118 11.6583 8.14645 11.8536C8.34171 12.0488 8.65829 12.0488 8.85355 11.8536L12.8536 7.85355C13.0488 7.65829 13.0488 7.34171 12.8536 7.14645L8.85355 3.14645C8.65829 2.95118 8.34171 2.95118 8.14645 3.14645C7.95118 3.34171 7.95118 3.65829 8.14645 3.85355L11.7929 7.5L8.14645 11.1464Z"}),TGe=e=>_.jsx(eR,{...e,path:"M2 8c0-.733.6-1.333 1.333-1.333.734 0 1.334.6 1.334 1.333s-.6 1.333-1.334 1.333C2.6 9.333 2 8.733 2 8zm9.333 0c0-.733.6-1.333 1.334-1.333C13.4 6.667 14 7.267 14 8s-.6 1.333-1.333 1.333c-.734 0-1.334-.6-1.334-1.333zM6.667 8c0-.733.6-1.333 1.333-1.333s1.333.6 1.333 1.333S8.733 9.333 8 9.333 6.667 8.733 6.667 8z"}),CGe={icon:TGe},nF=tt((e,t)=>{const n=$e("PaginationDots",CGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,...l}=n,c=tF(),d=u;return _.jsx(ke,{ref:t,...c.getStyles("dots",{className:i,style:s,styles:o,classNames:r}),...l,children:_.jsx(d,{style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)"}})})});nF.classes=JI;nF.displayName="@mantine/core/PaginationDots";function rF({icon:e,name:t,action:n,type:r}){const i={icon:e},s=P.forwardRef((o,a)=>{const{icon:u,...l}=$e(t,i,o),c=u,d=tF(),f=r==="next"?d.active===d.total:d.active===1;return _.jsx(ZI,{disabled:d.disabled||f,ref:a,onClick:d[n],withPadding:!1,...l,children:_.jsx(c,{className:"mantine-rotate-rtl",style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)"}})})});return s.displayName=`@mantine/core/${t}`,s}const F_e=rF({icon:wGe,name:"PaginationNext",action:"onNext",type:"next"}),j_e=rF({icon:xGe,name:"PaginationPrevious",action:"onPrevious",type:"previous"}),B_e=rF({icon:EGe,name:"PaginationFirst",action:"onFirst",type:"previous"}),z_e=rF({icon:SGe,name:"PaginationLast",action:"onLast",type:"next"});function cY({dotsIcon:e}){const t=tF(),n=t.range.map((r,i)=>{var s;return r==="dots"?_.jsx(nF,{icon:e},i):_.jsx(ZI,{active:r===t.active,"aria-current":r===t.active?"page":void 0,onClick:()=>t.onChange(r),disabled:t.disabled,...(s=t.getItemProps)==null?void 0:s.call(t,r),children:r},i)});return _.jsx(_.Fragment,{children:n})}cY.displayName="@mantine/core/PaginationItems";const AGe={siblings:1,boundaries:1},IGe=(e,{size:t,radius:n,color:r,autoContrast:i})=>({root:{"--pagination-control-radius":n===void 0?void 0:ii(n),"--pagination-control-size":wn(t,"pagination-control-size"),"--pagination-control-fz":Io(t),"--pagination-active-bg":r?mi(r,e):void 0,"--pagination-active-color":rv(i,e)?Pp({color:r,theme:e,autoContrast:i}):void 0}}),iF=tt((e,t)=>{const n=$e("PaginationRoot",AGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,total:l,value:c,defaultValue:d,onChange:f,disabled:h,siblings:p,boundaries:m,color:y,radius:v,onNextPage:w,onPreviousPage:x,onFirstPage:S,onLastPage:E,getItemProps:T,autoContrast:A,...I}=n,k=Ot({name:"Pagination",classes:JI,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:IGe}),{range:D,setPage:M,next:z,previous:O,active:$,first:F,last:B}=f9e({page:c,initialPage:d,onChange:f,total:l,siblings:p,boundaries:m}),q=ya(w,z),G=ya(x,O),K=ya(S,F),L=ya(E,B);return _.jsx(bGe,{value:{total:l,range:D,active:$,disabled:h,getItemProps:T,onChange:M,onNext:q,onPrevious:G,onFirst:K,onLast:L,getStyles:k},children:_.jsx(ke,{ref:t,...k("root"),...I})})});iF.classes=JI;iF.displayName="@mantine/core/PaginationRoot";const RGe={withControls:!0,siblings:1,boundaries:1,gap:8},eh=tt((e,t)=>{const n=$e("Pagination",RGe,e),{withEdges:r,withControls:i,getControlProps:s,nextIcon:o,previousIcon:a,lastIcon:u,firstIcon:l,dotsIcon:c,total:d,gap:f,hideWithOnePage:h,...p}=n;return d<=0||h&&d===1?null:_.jsx(iF,{ref:t,total:d,...p,children:_.jsxs(gr,{gap:f,children:[r&&_.jsx(B_e,{icon:l,...s==null?void 0:s("first")}),i&&_.jsx(j_e,{icon:a,...s==null?void 0:s("previous")}),_.jsx(cY,{dotsIcon:c}),i&&_.jsx(F_e,{icon:o,...s==null?void 0:s("next")}),r&&_.jsx(z_e,{icon:u,...s==null?void 0:s("last")})]})})});eh.classes=JI;eh.displayName="@mantine/core/Pagination";eh.Root=iF;eh.Control=ZI;eh.Dots=nF;eh.First=B_e;eh.Last=z_e;eh.Next=F_e;eh.Previous=j_e;eh.Items=cY;const[kGe,U_e]=lo("Progress.Root component was not found in tree");var tR={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const PGe={},dY=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=$e("ProgressLabel",PGe,e),u=U_e();return _.jsx(ke,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});dY.classes=tR;dY.displayName="@mantine/core/ProgressLabel";const NGe={},OGe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":wn(t,"progress-size"),"--progress-radius":n===void 0?void 0:ii(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),sF=tt((e,t)=>{const n=$e("ProgressRoot",NGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...d}=n,f=Ot({name:"Progress",classes:tR,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:OGe});return _.jsx(kGe,{value:{getStyles:f,autoContrast:l},children:_.jsx(ke,{ref:t,...f("root"),...d})})});sF.classes=tR;sF.displayName="@mantine/core/ProgressRoot";const DGe={withAria:!0},oF=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:d,mod:f,...h}=$e("ProgressSection",DGe,e),p=U_e(),m=qs(),y=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return _.jsx(ke,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...y,mod:[{striped:c||d,animated:d},f],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":mi(l,m),"--progress-label-color":rv(p.autoContrast,m)?Pp({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});oF.classes=tR;oF.displayName="@mantine/core/ProgressSection";const MGe={},Xb=tt((e,t)=>{const n=$e("Progress",MGe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...d}=n,{resolvedClassNames:f,resolvedStyles:h}=Np({classNames:i,styles:s,props:n});return _.jsx(sF,{ref:t,classNames:f,styles:h,vars:o,...d,children:_.jsx(oF,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});Xb.classes=tR;Xb.displayName="@mantine/core/Progress";Xb.Section=oF;Xb.Root=sF;Xb.Label=dY;const[$Ge,V_e]=qb(),[LGe,FGe]=qb();var H_e={card:"m_9dc8ae12"};const jGe={withBorder:!0},BGe=(e,{radius:t})=>({card:{"--card-radius":ii(t)}}),fY=tt((e,t)=>{const n=$e("RadioCard",jGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:d,value:f,onClick:h,name:p,onKeyDown:m,...y}=n,v=Ot({name:"RadioCard",classes:H_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:BGe,rootSelector:"card"}),{dir:w}=Bu(),x=V_e(),S=typeof l=="boolean"?l:(x==null?void 0:x.value)===f||!1,E=p||(x==null?void 0:x.name),T=A=>{if(m==null||m(A),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(A.nativeEvent.code)){A.preventDefault();const I=Array.from(document.querySelectorAll(`[role="radio"][name="${E||"__mantine"}"]`)),k=I.findIndex(z=>z===A.target),D=k+1>=I.length?0:k+1,M=k-1<0?I.length-1:k-1;A.nativeEvent.code==="ArrowDown"&&(I[D].focus(),I[D].click()),A.nativeEvent.code==="ArrowUp"&&(I[M].focus(),I[M].click()),A.nativeEvent.code==="ArrowLeft"&&(I[w==="ltr"?M:D].focus(),I[w==="ltr"?M:D].click()),A.nativeEvent.code==="ArrowRight"&&(I[w==="ltr"?D:M].focus(),I[w==="ltr"?D:M].click())}};return _.jsx(LGe,{value:{checked:S},children:_.jsx(Ps,{ref:t,mod:[{"with-border":d,checked:S},c],...v("card"),...y,role:"radio","aria-checked":S,name:E,onClick:A=>{h==null||h(A),x==null||x.onChange(f||"")},onKeyDown:T})})});fY.displayName="@mantine/core/RadioCard";fY.classes=H_e;const zGe={},hY=tt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=$e("RadioGroup",zGe,e),d=ou(u),[f,h]=gs({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return _.jsx($Ge,{value:{value:f,onChange:p,size:s,name:d},children:_.jsx(Ti.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:_.jsx(MG,{role:"radiogroup",children:a})})})});hY.classes=Ti.Wrapper.classes;hY.displayName="@mantine/core/RadioGroup";function q_e({size:e,style:t,...n}){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:ze(e),height:ze(e),...t},"aria-hidden":!0,...n,children:_.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var W_e={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const UGe={icon:q_e},VGe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=_c({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":wn(r,"radio-size"),"--radio-radius":t===void 0?void 0:ii(t),"--radio-color":s==="outline"?u:mi(n,e),"--radio-icon-size":wn(r,"radio-icon-size"),"--radio-icon-color":i?mi(i,e):rv(o,e)?Pp({color:n,theme:e,autoContrast:o}):void 0}}},pY=tt((e,t)=>{const n=$e("RadioIndicator",UGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:d,iconColor:f,autoContrast:h,checked:p,mod:m,variant:y,disabled:v,...w}=n,x=l,S=Ot({name:"RadioIndicator",classes:W_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:VGe,rootSelector:"indicator"}),E=FGe(),T=typeof p=="boolean"?p:(E==null?void 0:E.checked)||!1;return _.jsx(ke,{ref:t,...S("indicator",{variant:y}),variant:y,mod:[{checked:T,disabled:v},m],...w,children:_.jsx(x,{...S("icon")})})});pY.displayName="@mantine/core/RadioIndicator";pY.classes=W_e;var G_e={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const HGe={labelPosition:"right"},qGe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=_c({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":wn(t,"radio-size"),"--radio-radius":n===void 0?void 0:ii(n),"--radio-color":s==="outline"?u:mi(r,e),"--radio-icon-color":i?mi(i,e):rv(o,e)?Pp({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":wn(t,"radio-icon-size")}}},by=tt((e,t)=>{const n=$e("Radio",HGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:d,labelPosition:f,description:h,error:p,radius:m,color:y,variant:v,disabled:w,wrapperProps:x,icon:S=q_e,rootRef:E,iconColor:T,onChange:A,mod:I,...k}=n,D=Ot({name:"Radio",classes:G_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:qGe}),M=V_e(),z=(M==null?void 0:M.size)??c,O=n.size?c:z,{styleProps:$,rest:F}=Gb(k),B=ou(l),q=M?{checked:M.value===F.value,name:F.name??M.name,onChange:G=>{M.onChange(G),A==null||A(G)}}:{};return _.jsx(DL,{...D("root"),__staticSelector:"Radio",__stylesApiProps:n,id:B,size:O,labelPosition:f,label:d,description:h,error:p,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":q.checked||void 0,variant:v,ref:E,mod:I,...$,...x,children:_.jsxs(ke,{...D("inner"),mod:{"label-position":f},children:[_.jsx(ke,{...D("radio",{focusable:!0,variant:v}),onChange:A,...F,...q,component:"input",mod:{error:!!p},ref:t,id:B,disabled:w,type:"radio"}),_.jsx(S,{...D("icon"),"aria-hidden":!0})]})})});by.classes=G_e;by.displayName="@mantine/core/Radio";by.Group=hY;by.Card=fY;by.Indicator=pY;const WGe={duration:100,transition:"fade"};function GGe(e,t){return{...WGe,...t,...e}}function YGe({offset:e,position:t,defaultOpened:n}){const[r,i]=P.useState(n),s=P.useRef(),{x:o,y:a,elements:u,refs:l,update:c,placement:d}=eG({placement:t,middleware:[XW({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=d.includes("right")?e:t.includes("left")?e*-1:0,h=d.includes("bottom")?e:t.includes("top")?e*-1:0,p=P.useCallback(({clientX:m,clientY:y})=>{l.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:m,y,left:m+f,top:y+h,right:m,bottom:y}}})},[u.reference]);return P.useEffect(()=>{if(l.floating.current){const m=s.current;m.addEventListener("mousemove",p);const y=Um(l.floating.current);return y.forEach(v=>{v.addEventListener("scroll",c)}),()=>{m.removeEventListener("mousemove",p),y.forEach(v=>{v.removeEventListener("scroll",c)})}}},[u.reference,l.floating.current,c,p,r]),{handleMouseMove:p,x:o,y:a,opened:r,setOpened:i,boundaryRef:s,floating:l.setFloating}}var aF={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const KGe={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:Nd("popover")},XGe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:ii(t),"--tooltip-bg":n?mi(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),mY=tt((e,t)=>{const n=$e("TooltipFloating",KGe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:d,color:f,label:h,offset:p,position:m,multiline:y,zIndex:v,disabled:w,defaultOpened:x,variant:S,vars:E,portalProps:T,...A}=n,I=qs(),k=Ot({name:"TooltipFloating",props:n,classes:aF,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:E,varsResolver:XGe}),{handleMouseMove:D,x:M,y:z,opened:O,boundaryRef:$,floating:F,setOpened:B}=YGe({offset:p,position:m,defaultOpened:x});if(!xg(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const q=Ds($,r.ref,t),G=L=>{var V,X;(X=(V=r.props).onMouseEnter)==null||X.call(V,L),D(L),B(!0)},K=L=>{var V,X;(X=(V=r.props).onMouseLeave)==null||X.call(V,L),B(!1)};return _.jsxs(_.Fragment,{children:[_.jsx(qI,{...T,withinPortal:s,children:_.jsx(ke,{...A,...k("tooltip",{style:{...LW(o,I),zIndex:v,display:!w&&O?"block":"none",top:(z&&Math.round(z))??"",left:(M&&Math.round(M))??""}}),variant:S,ref:F,mod:{multiline:y},children:h})}),P.cloneElement(r,{...r.props,[i]:q,onMouseEnter:G,onMouseLeave:K})]})});mY.classes=aF;mY.displayName="@mantine/core/TooltipFloating";const Y_e=P.createContext(!1),QGe=Y_e.Provider,JGe=()=>P.useContext(Y_e),ZGe={openDelay:0,closeDelay:0};function K_e(e){const{openDelay:t,closeDelay:n,children:r}=$e("TooltipGroup",ZGe,e);return _.jsx(QGe,{value:!0,children:_.jsx(d7e,{delay:{open:t,close:n},children:r})})}K_e.displayName="@mantine/core/TooltipGroup";function eYe(e){var T,A,I;const[t,n]=P.useState(e.defaultOpened),i=typeof e.opened=="boolean"?e.opened:t,s=JGe(),o=ou(),{delay:a,currentId:u,setCurrentId:l}=ybe(),c=P.useCallback(k=>{n(k),k&&l(o)},[l,o]),{x:d,y:f,context:h,refs:p,update:m,placement:y,middlewareData:{arrow:{x:v,y:w}={}}}=eG({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[fbe(e.offset),XW({padding:8}),KU(),hbe({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[XU()]:[]]}),{getReferenceProps:x,getFloatingProps:S}=v7e([c7e(h,{enabled:(T=e.events)==null?void 0:T.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((A=e.events)!=null&&A.touch)}),y7e(h,{enabled:(I=e.events)==null?void 0:I.focus,visibleOnly:!0}),_7e(h,{role:"tooltip"}),m7e(h,{enabled:typeof e.opened>"u"}),f7e(h,{id:o})]);Sbe({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),bc(()=>{var k;(k=e.onPositionChange)==null||k.call(e,y)},[y]);const E=i&&u&&u!==o;return{x:d,y:f,arrowX:v,arrowY:w,reference:p.setReference,floating:p.setFloating,getFloatingProps:S,getReferenceProps:x,isGroupPhase:E,opened:i,placement:y}}const Cae={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Nd("popover"),positionDependencies:[]},tYe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:ii(t),"--tooltip-bg":n?mi(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),jn=tt((e,t)=>{const n=$e("Tooltip",Cae,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,defaultOpened:d,withinPortal:f,radius:h,color:p,classNames:m,styles:y,unstyled:v,style:w,className:x,withArrow:S,arrowSize:E,arrowOffset:T,arrowRadius:A,arrowPosition:I,offset:k,transitionProps:D,multiline:M,events:z,zIndex:O,disabled:$,positionDependencies:F,onClick:B,onMouseEnter:q,onMouseLeave:G,inline:K,variant:L,keepMounted:V,vars:X,portalProps:H,mod:Q,floatingStrategy:Z,...ne}=$e("Tooltip",Cae,n),{dir:ue}=Bu(),le=P.useRef(null),ce=eYe({position:vbe(ue,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,defaultOpened:d,events:z,arrowRef:le,arrowOffset:T,offset:typeof k=="number"?k+(S?E/2:0):k,positionDependencies:[...F,r],inline:K,strategy:Z}),ge=Ot({name:"Tooltip",props:n,classes:aF,className:x,style:w,classNames:m,styles:y,unstyled:v,rootSelector:"tooltip",vars:X,varsResolver:tYe});if(!xg(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const se=Ds(ce.reference,r.ref,t),te=GGe(D,{duration:100,transition:"fade"});return _.jsxs(_.Fragment,{children:[_.jsx(qI,{...H,withinPortal:f,children:_.jsx(Jf,{...te,keepMounted:V,mounted:!$&&!!ce.opened,duration:ce.isGroupPhase?10:te.duration,children:Ee=>_.jsxs(ke,{...ne,variant:L,mod:[{multiline:M},Q],...ce.getFloatingProps({ref:ce.floating,className:ge("tooltip").className,style:{...ge("tooltip").style,...Ee,zIndex:O,top:ce.y??0,left:ce.x??0}}),children:[o,_.jsx(tG,{ref:le,arrowX:ce.arrowX,arrowY:ce.arrowY,visible:S,position:ce.placement,arrowSize:E,arrowOffset:T,arrowRadius:A,arrowPosition:I,...ge("arrow")})]})})}),P.cloneElement(r,ce.getReferenceProps({onClick:B,onMouseEnter:q,onMouseLeave:G,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:se,className:Dt(x,r.props.className),...r.props}))]})});jn.classes=aF;jn.displayName="@mantine/core/Tooltip";jn.Floating=mY;jn.Group=K_e;var X_e={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const nYe={withItemsBorders:!0},rYe=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:ii(t),"--sc-color":n?mi(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":wn(i,"sc-padding"),"--sc-font-size":Io(i)}}),bM=tt((e,t)=>{var ne,ue;const n=$e("SegmentedControl",nYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:d,onChange:f,size:h,name:p,disabled:m,readOnly:y,fullWidth:v,orientation:w,radius:x,color:S,transitionDuration:E,transitionTimingFunction:T,variant:A,autoContrast:I,withItemsBorders:k,mod:D,...M}=n,z=Ot({name:"SegmentedControl",props:n,classes:X_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:rYe}),O=qs(),$=l.map(le=>typeof le=="string"?{label:le,value:le}:le),F=v9e(),[B,q]=P.useState(null),[G,K]=P.useState({}),L=(le,ce)=>{G[ce]=le,K(G)},[V,X]=gs({value:c,defaultValue:d,finalValue:Array.isArray(l)?((ne=$.find(le=>!le.disabled))==null?void 0:ne.value)??((ue=l[0])==null?void 0:ue.value)??null:null,onChange:f}),H=ou(p),Q=$.map(le=>P.createElement(ke,{...z("control"),mod:{active:V===le.value,orientation:w},key:le.value},P.createElement("input",{...z("input"),disabled:m||le.disabled,type:"radio",name:H,value:le.value,id:`${H}-${le.value}`,checked:V===le.value,onChange:()=>!y&&X(le.value),"data-focus-ring":O.focusRing,key:`${le.value}-input`}),P.createElement(ke,{component:"label",...z("label"),mod:{active:V===le.value&&!(m||le.disabled),disabled:m||le.disabled,"read-only":y},htmlFor:`${H}-${le.value}`,ref:ce=>L(ce,le.value),__vars:{"--sc-label-color":S!==void 0?Pp({color:S,theme:O,autoContrast:I}):void 0},key:`${le.value}-label`},_.jsx("span",{...z("innerLabel"),children:le.label})))),Z=Ds(t,le=>q(le));return l.length===0?null:_.jsxs(ke,{...z("root"),variant:A,size:h,ref:Z,mod:[{"full-width":v,orientation:w,initialized:F,"with-items-borders":k},D],...M,role:"radiogroup",children:[typeof V=="string"&&_.jsx(fG,{target:G[V],parent:B,component:"span",transitionDuration:"var(--sc-transition-duration)",...z("indicator")}),Q]})});bM.classes=X_e;bM.displayName="@mantine/core/SegmentedControl";const iYe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},mp=tt((e,t)=>{const n=$e("Select",iYe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:d,onBlur:f,onClick:h,onChange:p,data:m,value:y,defaultValue:v,selectFirstOptionOnChange:w,onOptionSubmit:x,comboboxProps:S,readOnly:E,disabled:T,filter:A,limit:I,withScrollArea:k,maxDropdownHeight:D,size:M,searchable:z,rightSection:O,checkIconPosition:$,withCheckIcon:F,nothingFoundMessage:B,name:q,form:G,searchValue:K,defaultSearchValue:L,onSearchChange:V,allowDeselect:X,error:H,rightSectionPointerEvents:Q,id:Z,clearable:ne,clearButtonProps:ue,hiddenInputProps:le,renderOption:ce,onClear:ge,autoComplete:se,scrollAreaProps:te,...Ee}=n,we=P.useMemo(()=>EG(m),[m]),De=P.useMemo(()=>OL(we),[we]),Le=ou(Z),[Ne,Te,qe]=gs({value:y,defaultValue:v,finalValue:null,onChange:p}),Qe=typeof Ne=="string"?De[Ne]:void 0,Ue=g9e(Qe),[Ve,Se]=gs({value:K,defaultValue:L,finalValue:Qe?Qe.label:"",onChange:V}),it=XI({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),it.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),it.resetSelectedOption()}}),{resolvedClassNames:It,resolvedStyles:Re}=Np({props:n,styles:i,classNames:r});P.useEffect(()=>{w&&it.selectFirstOption()},[w,Ne]),P.useEffect(()=>{y===null&&Se(""),typeof y=="string"&&Qe&&((Ue==null?void 0:Ue.value)!==Qe.value||(Ue==null?void 0:Ue.label)!==Qe.label)&&Se(Qe.label)},[y,Qe]);const Ge=ne&&!!Ne&&!T&&!E&&_.jsx(An.ClearButton,{size:M,...ue,onClear:()=>{Te(null,null),Se(""),ge==null||ge()}});return _.jsxs(_.Fragment,{children:[_.jsxs(An,{store:it,__staticSelector:"Select",classNames:It,styles:Re,unstyled:s,readOnly:E,onOptionSubmit:ot=>{x==null||x(ot);const ct=X&&De[ot].value===Ne?null:De[ot],Mt=ct?ct.value:null;Mt!==Ne&&Te(Mt,ct),!qe&&Se(typeof Mt=="string"&&(ct==null?void 0:ct.label)||""),it.closeDropdown()},size:M,...S,children:[_.jsx(An.Target,{targetType:z?"input":"button",autoComplete:se,children:_.jsx(jl,{id:Le,ref:t,rightSection:O||Ge||_.jsx(An.Chevron,{size:M,error:H,unstyled:s}),rightSectionPointerEvents:Q||(Ge?"all":"none"),...Ee,size:M,__staticSelector:"Select",disabled:T,readOnly:E||!z,value:Ve,onChange:ot=>{Se(ot.currentTarget.value),it.openDropdown(),w&&it.selectFirstOption()},onFocus:ot=>{z&&it.openDropdown(),d==null||d(ot)},onBlur:ot=>{var ct;z&&it.closeDropdown(),Se(Ne!=null&&((ct=De[Ne])==null?void 0:ct.label)||""),f==null||f(ot)},onClick:ot=>{z?it.openDropdown():it.toggleDropdown(),h==null||h(ot)},classNames:It,styles:Re,unstyled:s,pointer:!z,error:H})}),_.jsx(FG,{data:we,hidden:E||T,filter:A,search:Ve,limit:I,hiddenWhenEmpty:!B,withScrollArea:k,maxDropdownHeight:D,filterOptions:z&&(Qe==null?void 0:Qe.label)!==Ve,value:Ne,checkIconPosition:$,withCheckIcon:F,nothingFoundMessage:B,unstyled:s,labelId:Ee.label?`${Le}-label`:void 0,"aria-label":Ee.label?void 0:Ee["aria-label"],renderOption:ce,scrollAreaProps:te})]}),_.jsx(An.HiddenInput,{value:Ne,name:q,form:G,disabled:T,...le})]})});mp.classes={...jl.classes,...An.classes};mp.displayName="@mantine/core/Select";var Q_e={root:"m_18320242","skeleton-fade":"m_299c329c"};const sYe={visible:!0,animate:!0},oYe=(e,{width:t,height:n,radius:r,circle:i})=>({root:{"--skeleton-height":ze(n),"--skeleton-width":ze(i?n:t),"--skeleton-radius":i?"1000px":r===void 0?void 0:ii(r)}}),gY=tt((e,t)=>{const n=$e("Skeleton",sYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,width:l,height:c,circle:d,visible:f,radius:h,animate:p,mod:m,...y}=n,v=Ot({name:"Skeleton",classes:Q_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:oYe});return _.jsx(ke,{ref:t,...v("root"),mod:[{visible:f,animate:p},m],...y})});gY.classes=Q_e;gY.displayName="@mantine/core/Skeleton";const[J_e,uF]=lo("SliderProvider was not found in tree"),yY=P.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=uF();return _.jsx(ke,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});yY.displayName="@mantine/core/SliderRoot";const _M=P.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:d,onBlur:f,showLabelOnHover:h,isHovered:p,children:m=null,disabled:y},v)=>{const{getStyles:w}=uF(),[x,S]=P.useState(!1),E=l||s||x||h&&p;return _.jsxs(ke,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:v,__vars:{"--slider-thumb-offset":`${r}%`},...w("thumb",{focusable:!0}),mod:{dragging:s,disabled:y},onFocus:()=>{S(!0),typeof d=="function"&&d()},onBlur:()=>{S(!1),typeof f=="function"&&f()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:T=>T.stopPropagation(),children:[m,_.jsx(Jf,{mounted:i!=null&&!!E,transition:"fade",duration:0,...u,children:T=>_.jsx("div",{...w("label",{style:T}),children:i})})]})});_M.displayName="@mantine/core/SliderThumb";function wM({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function aYe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function Z_e({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=uF();if(!e)return null;const u=e.map((l,c)=>P.createElement(ke,{...a("markWrapper"),__vars:{"--mark-offset":`${wM({value:l.value,min:t,max:n})}%`},key:c},_.jsx(ke,{...a("mark"),mod:{filled:aYe({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&_.jsx("div",{...a("markLabel"),children:l.label})));return _.jsx("div",{children:u})}Z_e.displayName="@mantine/core/SliderMarks";function vY({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=uF();return _.jsx(_.Fragment,{children:_.jsx(ke,{...u("trackContainer"),mod:{disabled:r},...o,children:_.jsxs(ke,{...u("track"),mod:{inverted:s,disabled:r},children:[_.jsx(ke,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,_.jsx(Z_e,{...a,offset:i,disabled:r,inverted:s})]})})})}vY.displayName="@mantine/core/SliderTrack";function r7({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function nd(e,t){return parseFloat(e.toFixed(t))}function ewe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var lF={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const uYe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},lYe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":wn(t,"slider-size"),"--slider-color":n?mi(n,e):void 0,"--slider-radius":i===void 0?void 0:ii(i),"--slider-thumb-size":r!==void 0?ze(r):"calc(var(--slider-size) * 2)"}}),bY=tt((e,t)=>{const n=$e("Slider",uYe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:d,precision:f,defaultValue:h,name:p,marks:m,label:y,labelTransitionProps:v,labelAlwaysOn:w,thumbLabel:x,showLabelOnHover:S,thumbChildren:E,disabled:T,unstyled:A,scale:I,inverted:k,className:D,style:M,vars:z,hiddenInputProps:O,...$}=n,F=Ot({name:"Slider",props:n,classes:lF,classNames:r,className:D,styles:i,style:M,vars:z,varsResolver:lYe,unstyled:A}),{dir:B}=Bu(),[q,G]=P.useState(!1),[K,L]=gs({value:typeof s=="number"?fd(s,l,c):s,defaultValue:typeof h=="number"?fd(h,l,c):h,finalValue:fd(0,l,c),onChange:o}),V=P.useRef(K),X=P.useRef(),H=P.useRef(),Q=wM({value:K,min:l,max:c}),Z=I(K),ne=typeof y=="function"?y(Z):y,ue=f??ewe(d),le=P.useCallback(({x:te})=>{if(!T){const Ee=r7({value:te,min:l,max:c,step:d,precision:ue});L(Ee),V.current=Ee}},[T,l,c,d,ue,L]),{ref:ce,active:ge}=bL(le,{onScrubEnd:()=>a==null?void 0:a(V.current)},B),se=te=>{var Ee,we,De,Le,Ne,Te;if(!T)switch(te.key){case"ArrowUp":{te.preventDefault(),(Ee=H.current)==null||Ee.focus();const qe=nd(Math.min(Math.max(K+d,l),c),ue);L(qe),a==null||a(qe);break}case"ArrowRight":{te.preventDefault(),(we=H.current)==null||we.focus();const qe=nd(Math.min(Math.max(B==="rtl"?K-d:K+d,l),c),ue);L(qe),a==null||a(qe);break}case"ArrowDown":{te.preventDefault(),(De=H.current)==null||De.focus();const qe=nd(Math.min(Math.max(K-d,l),c),ue);L(qe),a==null||a(qe);break}case"ArrowLeft":{te.preventDefault(),(Le=H.current)==null||Le.focus();const qe=nd(Math.min(Math.max(B==="rtl"?K+d:K-d,l),c),ue);L(qe),a==null||a(qe);break}case"Home":{te.preventDefault(),(Ne=H.current)==null||Ne.focus(),L(l),a==null||a(l);break}case"End":{te.preventDefault(),(Te=H.current)==null||Te.focus(),L(c),a==null||a(c);break}}};return _.jsx(J_e,{value:{getStyles:F},children:_.jsxs(yY,{...$,ref:Ds(t,X),onKeyDownCapture:se,onMouseDownCapture:()=>{var te;return(te=X.current)==null?void 0:te.focus()},size:u,disabled:T,children:[_.jsx(vY,{inverted:k,offset:0,filled:Q,marks:m,min:l,max:c,value:Z,disabled:T,containerProps:{ref:ce,onMouseEnter:S?()=>G(!0):void 0,onMouseLeave:S?()=>G(!1):void 0},children:_.jsx(_M,{max:c,min:l,value:Z,position:Q,dragging:ge,label:ne,ref:H,labelTransitionProps:v,labelAlwaysOn:w,thumbLabel:x,showLabelOnHover:S,isHovered:q,disabled:T,children:E})}),_.jsx("input",{type:"hidden",name:p,value:Z,...O})]})})});bY.classes=lF;bY.displayName="@mantine/core/Slider";function cYe(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const dYe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":wn(t,"slider-size"),"--slider-color":n?mi(n,e):void 0,"--slider-radius":i===void 0?void 0:ii(i),"--slider-thumb-size":r!==void 0?ze(r):"calc(var(--slider-size) * 2)"}}),fYe={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},cF=tt((e,t)=>{const n=$e("RangeSlider",fYe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:d,maxRange:f,step:h,precision:p,defaultValue:m,name:y,marks:v,label:w,labelTransitionProps:x,labelAlwaysOn:S,thumbFromLabel:E,thumbToLabel:T,showLabelOnHover:A,thumbChildren:I,disabled:k,unstyled:D,scale:M,inverted:z,className:O,style:$,vars:F,hiddenInputProps:B,...q}=n,G=Ot({name:"Slider",props:n,classes:lF,classNames:r,className:O,styles:i,style:$,vars:F,varsResolver:dYe,unstyled:D}),{dir:K}=Bu(),[L,V]=P.useState(-1),[X,H]=P.useState(!1),[Q,Z]=gs({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),ne=P.useRef(Q),ue=P.useRef([]),le=P.useRef(void 0),ce=[wM({value:Q[0],min:l,max:c}),wM({value:Q[1],min:l,max:c})],ge=p??ewe(h),se=Ve=>{Z(Ve),ne.current=Ve};P.useEffect(()=>{Array.isArray(s)&&(ne.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const te=(Ve,Se,it)=>{const It=[...ne.current];It[Se]=Ve,Se===0&&(Ve>It[1]-(d-1e-9)&&(It[1]=Math.min(Ve+d,c)),Ve>(c-(d-1e-9)||l)&&(It[Se]=ne.current[Se]),It[1]-Ve>f&&(It[1]=Ve+f)),Se===1&&(Ve<It[0]+d&&(It[0]=Math.max(Ve-d,l)),Ve<It[0]+d&&(It[Se]=ne.current[Se]),Ve-It[0]>f&&(It[0]=Ve-f)),It[0]=nd(It[0],ge),It[1]=nd(It[1],ge),se(It),it&&(a==null||a(ne.current))},Ee=Ve=>{if(!k){const Se=r7({value:Ve,min:l,max:c,step:h,precision:ge});te(Se,le.current,!1)}},{ref:we,active:De}=bL(({x:Ve})=>Ee(Ve),{onScrubEnd:()=>a==null?void 0:a(ne.current)},K);function Le(Ve){le.current=Ve}const Ne=Ve=>{we.current.focus();const Se=we.current.getBoundingClientRect(),it=cYe(Ve.nativeEvent),It=r7({value:it-Se.left,max:c,min:l,step:h,containerWidth:Se.width}),Re=Math.abs(Q[0]-It)>Math.abs(Q[1]-It)?1:0,Ge=K==="ltr"?Re:Re===1?0:1;le.current=Ge},Te=()=>L!==1&&L!==0?(V(0),0):L,qe=Ve=>{if(!k)switch(Ve.key){case"ArrowUp":{Ve.preventDefault();const Se=Te();ue.current[Se].focus(),te(nd(Math.min(Math.max(ne.current[Se]+h,l),c),ge),Se,!0);break}case"ArrowRight":{Ve.preventDefault();const Se=Te();ue.current[Se].focus(),te(nd(Math.min(Math.max(K==="rtl"?ne.current[Se]-h:ne.current[Se]+h,l),c),ge),Se,!0);break}case"ArrowDown":{Ve.preventDefault();const Se=Te();ue.current[Se].focus(),te(nd(Math.min(Math.max(ne.current[Se]-h,l),c),ge),Se,!0);break}case"ArrowLeft":{Ve.preventDefault();const Se=Te();ue.current[Se].focus(),te(nd(Math.min(Math.max(K==="rtl"?ne.current[Se]+h:ne.current[Se]-h,l),c),ge),Se,!0);break}}},Qe={max:c,min:l,size:u,labelTransitionProps:x,labelAlwaysOn:S,onBlur:()=>V(-1)},Ue=Array.isArray(I);return _.jsx(J_e,{value:{getStyles:G},children:_.jsxs(yY,{...q,size:u,ref:t,disabled:k,children:[_.jsxs(vY,{offset:ce[0],marksOffset:Q[0],filled:ce[1]-ce[0],marks:v,inverted:z,min:l,max:c,value:Q[1],disabled:k,containerProps:{ref:we,onMouseEnter:A?()=>H(!0):void 0,onMouseLeave:A?()=>H(!1):void 0,onTouchStartCapture:Ne,onTouchEndCapture:()=>{le.current=-1},onMouseDownCapture:Ne,onMouseUpCapture:()=>{le.current=-1},onKeyDownCapture:qe},children:[_.jsx(_M,{...Qe,value:M(Q[0]),position:ce[0],dragging:De,label:typeof w=="function"?w(nd(M(Q[0]),ge)):w,ref:Ve=>{ue.current[0]=Ve},thumbLabel:E,onMouseDown:()=>Le(0),onFocus:()=>V(0),showLabelOnHover:A,isHovered:X,disabled:k,children:Ue?I[0]:I}),_.jsx(_M,{...Qe,thumbLabel:T,value:M(Q[1]),position:ce[1],dragging:De,label:typeof w=="function"?w(nd(M(Q[1]),ge)):w,ref:Ve=>{ue.current[1]=Ve},onMouseDown:()=>Le(1),onFocus:()=>V(1),showLabelOnHover:A,isHovered:X,disabled:k,children:Ue?I[1]:I})]}),_.jsx("input",{type:"hidden",name:`${y}_from`,value:Q[0],...B}),_.jsx("input",{type:"hidden",name:`${y}_to`,value:Q[1],...B})]})})});cF.classes=lF;cF.displayName="@mantine/core/RangeSlider";const hYe={},vd=tt((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=$e("Space",hYe,e);return _.jsx(ke,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});vd.displayName="@mantine/core/Space";var twe={root:"m_6d731127"};const pYe={gap:"md",align:"stretch",justify:"flex-start"},mYe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":Cl(t),"--stack-align":n,"--stack-justify":r}}),ao=tt((e,t)=>{const n=$e("Stack",pYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:d,variant:f,...h}=n,p=Ot({name:"Stack",props:n,classes:twe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:mYe});return _.jsx(ke,{ref:t,...p("root"),variant:f,...h})});ao.classes=twe;ao.displayName="@mantine/core/Stack";const nwe=P.createContext(null),gYe=nwe.Provider,yYe=()=>P.useContext(nwe),vYe={},_Y=tt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=$e("SwitchGroup",vYe,e),[c,d]=gs({value:n,defaultValue:r,finalValue:[],onChange:i}),f=h=>{const p=h.currentTarget.value;!u&&d(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(gYe,{value:{value:c,onChange:f,size:s},children:_.jsx(Ti.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:_.jsx(MG,{role:"group",children:a})})})});_Y.classes=Ti.Wrapper.classes;_Y.displayName="@mantine/core/SwitchGroup";var rwe={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const bYe={labelPosition:"right"},_Ye=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:ii(t),"--switch-height":wn(r,"switch-height"),"--switch-width":wn(r,"switch-width"),"--switch-thumb-size":wn(r,"switch-thumb-size"),"--switch-label-font-size":wn(r,"switch-label-font-size"),"--switch-track-label-padding":wn(r,"switch-track-label-padding"),"--switch-color":n?mi(n,e):void 0}}),ny=tt((e,t)=>{const n=$e("Switch",bYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:d,onLabel:f,id:h,size:p,radius:m,wrapperProps:y,children:v,thumbIcon:w,checked:x,defaultChecked:S,onChange:E,labelPosition:T,description:A,error:I,disabled:k,variant:D,rootRef:M,mod:z,...O}=n,$=yYe(),F=p||($==null?void 0:$.size),B=Ot({name:"Switch",props:n,classes:rwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_Ye}),{styleProps:q,rest:G}=Gb(O),K=ou(h),L=$?{checked:$.value.includes(G.value),onChange:$.onChange}:{},[V,X]=gs({value:L.checked??x,defaultValue:S,finalValue:!1});return _.jsxs(DL,{...B("root"),__staticSelector:"Switch",__stylesApiProps:n,id:K,size:F,labelPosition:T,label:c,description:A,error:I,disabled:k,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":L.checked||void 0,variant:D,ref:M,mod:z,...q,...y,children:[_.jsx("input",{...G,disabled:k,checked:V,onChange:H=>{var Q;$?(Q=L.onChange)==null||Q.call(L,H):E==null||E(H),X(H.currentTarget.checked)},id:K,ref:t,type:"checkbox",role:"switch",...B("input")}),_.jsxs(ke,{"aria-hidden":"true",mod:{error:I,"label-position":T},...B("track"),children:[_.jsx(ke,{component:"span",mod:"reduce-motion",...B("thumb"),children:w}),_.jsx("span",{...B("trackLabel"),children:V?f:d})]})]})});ny.classes={...rwe,...Wbe};ny.displayName="@mantine/core/Switch";ny.Group=_Y;const[wYe,xYe]=lo("Table component was not found in the tree");var nR={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function EYe(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function Qb(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=tt((i,s)=>{const o=$e(n,{},i),{classNames:a,className:u,style:l,styles:c,...d}=o,f=xYe();return _.jsx(ke,{component:e,ref:s,...EYe(f,t),...f.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...d})});return r.displayName=`@mantine/core/${n}`,r.classes=nR,r}const Gx=Qb("th",{columnBorder:!0}),dF=Qb("td",{columnBorder:!0}),Vm=Qb("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),wY=Qb("thead",{stickyHeader:!0}),RA=Qb("tbody"),xY=Qb("tfoot"),iwe=Qb("caption",{captionSide:!0});function EY({data:e}){return _.jsxs(_.Fragment,{children:[e.caption&&_.jsx(iwe,{children:e.caption}),e.head&&_.jsx(wY,{children:_.jsx(Vm,{children:e.head.map((t,n)=>_.jsx(Gx,{children:t},n))})}),e.body&&_.jsx(RA,{children:e.body.map((t,n)=>_.jsx(Vm,{children:t.map((r,i)=>_.jsx(dF,{children:r},i))},n))}),e.foot&&_.jsx(xY,{children:_.jsx(Vm,{children:e.foot.map((t,n)=>_.jsx(Gx,{children:t},n))})})]})}EY.displayName="@mantine/core/TableDataRenderer";const SYe={type:"scrollarea"},TYe=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":ze(t),"--table-overflow":n==="native"?"auto":void 0}}),SY=tt((e,t)=>{const n=$e("TableScrollContainer",SYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:d,...f}=n,h=Ot({name:"TableScrollContainer",classes:nR,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:TYe,rootSelector:"scrollContainer"});return _.jsx(ke,{component:d==="scrollarea"?sv:"div",...d==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...f,children:_.jsx("div",{...h("scrollContainerInner"),children:l})})});SY.classes=nR;SY.displayName="@mantine/core/TableScrollContainer";const CYe={withRowBorders:!0,verticalSpacing:7},AYe=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:d})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":Cl(r),"--table-vertical-spacing":Cl(i),"--table-border-color":s?mi(s,e):void 0,"--table-striped-color":u&&o?mi(o,e):void 0,"--table-highlight-on-hover-color":l&&a?mi(a,e):void 0,"--table-sticky-header-offset":d?ze(c):void 0}}),_o=tt((e,t)=>{const n=$e("Table",CYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:d,stripedColor:f,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:y,withRowBorders:v,withTableBorder:w,borderColor:x,layout:S,variant:E,data:T,children:A,stickyHeader:I,stickyHeaderOffset:k,mod:D,...M}=n,z=Ot({name:"Table",props:n,className:i,style:s,classes:nR,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:AYe});return _.jsx(wYe,{value:{getStyles:z,stickyHeader:I,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:y,withRowBorders:v,captionSide:d||"bottom"},children:_.jsx(ke,{component:"table",variant:E,ref:t,mod:[{"data-with-table-border":w},D],...z("table"),...M,children:A||!!T&&_.jsx(EY,{data:T})})})});_o.classes=nR;_o.displayName="@mantine/core/Table";_o.Td=dF;_o.Th=Gx;_o.Tr=Vm;_o.Thead=wY;_o.Tbody=RA;_o.Tfoot=xY;_o.Caption=iwe;_o.ScrollContainer=SY;_o.DataRenderer=EY;const[IYe,TY]=lo("Tabs component was not found in the tree");var rR={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const RYe={},CY=tt((e,t)=>{const n=$e("TabsList",RYe,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...d}=n,f=TY();return _.jsx(ke,{...d,...f.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:f.variant}),ref:t,role:"tablist",variant:f.variant,mod:[{grow:s,orientation:f.orientation,placement:f.orientation==="vertical"&&f.placement,inverted:f.inverted},c],"aria-orientation":f.orientation,__vars:{"--tabs-justify":o},children:r})});CY.classes=rR;CY.displayName="@mantine/core/TabsList";const kYe={},AY=tt((e,t)=>{const n=$e("TabsPanel",kYe,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,d=TY(),f=d.value===s,h=d.keepMounted||n.keepMounted||f?r:null;return _.jsx(ke,{...c,...d.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,f?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:d.orientation},l],role:"tabpanel",id:d.getPanelId(s),"aria-labelledby":d.getTabId(s),children:h})});AY.classes=rR;AY.displayName="@mantine/core/TabsPanel";const PYe={},IY=tt((e,t)=>{const n=$e("TabsTab",PYe,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:d,style:f,classNames:h,styles:p,vars:m,mod:y,...v}=n,w=qs(),{dir:x}=Bu(),S=TY(),E=a===S.value,T=I=>{S.onChange(S.allowTabDeactivation&&a===S.value?null:a),u==null||u(I)},A={classNames:h,styles:p,props:n};return _.jsxs(Ps,{...v,...S.getStyles("tab",{className:r,style:f,variant:S.variant,...A}),disabled:c,unstyled:S.unstyled,variant:S.variant,mod:[{active:E,disabled:c,orientation:S.orientation,inverted:S.inverted,placement:S.orientation==="vertical"&&S.placement},y],ref:t,role:"tab",id:S.getTabId(a),"aria-selected":E,tabIndex:E||S.value===null?0:-1,"aria-controls":S.getPanelId(a),onClick:T,__vars:{"--tabs-color":d?mi(d,w):void 0},onKeyDown:IW({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:S.activateTabWithKeyboard,loop:S.loop,orientation:S.orientation||"horizontal",dir:x,onKeyDown:l}),children:[o&&_.jsx("span",{...S.getStyles("tabSection",A),"data-position":"left",children:o}),i&&_.jsx("span",{...S.getStyles("tabLabel",A),children:i}),s&&_.jsx("span",{...S.getStyles("tabSection",A),"data-position":"right",children:s})]})});IY.classes=rR;IY.displayName="@mantine/core/TabsTab";const Aae="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",NYe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},OYe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":ii(t),"--tabs-color":mi(n,e),"--tabs-text-color":rv(r,e)?Pp({color:n,theme:e,autoContrast:r}):void 0}}),Fs=tt((e,t)=>{const n=$e("Tabs",NYe,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:d,variant:f,color:h,radius:p,inverted:m,placement:y,keepMounted:v,classNames:w,styles:x,unstyled:S,className:E,style:T,vars:A,autoContrast:I,mod:k,...D}=n,M=ou(l),[z,O]=gs({value:i,defaultValue:r,finalValue:null,onChange:s}),$=Ot({name:"Tabs",props:n,classes:rR,className:E,style:T,classNames:w,styles:x,unstyled:S,vars:A,varsResolver:OYe});return _.jsx(IYe,{value:{placement:y,value:z,orientation:o,id:M,loop:u,activateTabWithKeyboard:c,getTabId:dM(`${M}-tab`,Aae),getPanelId:dM(`${M}-panel`,Aae),onChange:O,allowTabDeactivation:d,variant:f,color:h,radius:p,inverted:m,keepMounted:v,unstyled:S,getStyles:$},children:_.jsx(ke,{ref:t,id:M,variant:f,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&y},k],...$("root"),...D,children:a})})});Fs.classes=rR;Fs.displayName="@mantine/core/Tabs";Fs.Tab=IY;Fs.Panel=AY;Fs.List=CY;const DYe={},Af=tt((e,t)=>{const n=$e("TextInput",DYe,e);return _.jsx(jl,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});Af.classes=jl.classes;Af.displayName="@mantine/core/TextInput";const MYe=["h1","h2","h3","h4","h5","h6"];function $Ye(e,t){const n=t!==void 0?t:`h${e}`;return MYe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:ze(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var swe={root:"m_8a5d1357"};const LYe={order:1},FYe=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=$Ye(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},Ki=tt((e,t)=>{const n=$e("Title",LYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:d,lineClamp:f,textWrap:h,mod:p,...m}=n,y=Ot({name:"Title",props:n,classes:swe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:FYe});return[1,2,3,4,5,6].includes(u)?_.jsx(ke,{...y("root"),component:`h${u}`,variant:d,ref:t,mod:[{order:u,"data-line-clamp":typeof f=="number"},p],size:c,...m}):null});Ki.classes=swe;Ki.displayName="@mantine/core/Title";var owe={root:"m_d6493fad"};const jYe={},Xw=tt((e,t)=>{const n=$e("TypographyStylesProvider",jYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,...u}=n,l=Ot({name:"TypographyStylesProvider",classes:owe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return _.jsx(ke,{ref:t,...l("root"),...u})});Xw.classes=owe;Xw.displayName="@mantine/core/TypographyStylesProvider";const awe=P.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),Zi=()=>P.useContext(awe);function BYe({children:e}){const[t,n]=Is.useState(void 0),r=Is.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return _.jsx(awe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.17.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function b2(){return b2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b2.apply(this,arguments)}var z0;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(z0||(z0={}));const Iae="popstate";function zYe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return i7("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:xM(i)}return VYe(t,n,null,e)}function Us(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function uwe(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function UYe(){return Math.random().toString(36).substr(2,8)}function Rae(e,t){return{usr:e.state,key:e.key,idx:t}}function i7(e,t,n,r){return n===void 0&&(n=null),b2({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?lS(t):t,{state:n,key:t&&t.key||r||UYe()})}function xM(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function lS(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function VYe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=z0.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(b2({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function d(){a=z0.Pop;let y=c(),v=y==null?null:y-l;l=y,u&&u({action:a,location:m.location,delta:v})}function f(y,v){a=z0.Push;let w=i7(m.location,y,v);l=c()+1;let x=Rae(w,l),S=m.createHref(w);try{o.pushState(x,"",S)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(S)}s&&u&&u({action:a,location:m.location,delta:1})}function h(y,v){a=z0.Replace;let w=i7(m.location,y,v);l=c();let x=Rae(w,l),S=m.createHref(w);o.replaceState(x,"",S),s&&u&&u({action:a,location:m.location,delta:0})}function p(y){let v=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof y=="string"?y:xM(y);return w=w.replace(/ $/,"%20"),Us(v,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,v)}let m={get action(){return a},get location(){return e(i,o)},listen(y){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Iae,d),u=y,()=>{i.removeEventListener(Iae,d),u=null}},createHref(y){return t(i,y)},createURL:p,encodeLocation(y){let v=p(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:h,go(y){return o.go(y)}};return m}var kae;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(kae||(kae={}));function HYe(e,t,n){return n===void 0&&(n="/"),qYe(e,t,n)}function qYe(e,t,n,r){let i=typeof t=="string"?lS(t):t,s=RY(i.pathname||"/",n);if(s==null)return null;let o=lwe(e);WYe(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let l=iKe(s);a=tKe(o[u],l)}return a}function lwe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Us(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=ry([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(Us(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),lwe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:ZYe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of cwe(s.path))i(s,o,u)}),t}function cwe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=cwe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function WYe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:eKe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const GYe=/^:[\w-]+$/,YYe=3,KYe=2,XYe=1,QYe=10,JYe=-2,Pae=e=>e==="*";function ZYe(e,t){let n=e.split("/"),r=n.length;return n.some(Pae)&&(r+=JYe),t&&(r+=KYe),n.filter(i=>!Pae(i)).reduce((i,s)=>i+(GYe.test(s)?YYe:s===""?XYe:QYe),r)}function eKe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function tKe(e,t,n){let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],l=a===r.length-1,c=s==="/"?t:t.slice(s.length)||"/",d=nKe({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},c),f=u.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:ry([s,d.pathname]),pathnameBase:uKe(ry([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=ry([s,d.pathnameBase]))}return o}function nKe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=rKe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,d)=>{let{paramName:f,isOptional:h}=c;if(f==="*"){let m=a[d]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[d];return h&&!p?l[f]=void 0:l[f]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function rKe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),uwe(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function iKe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return uwe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function RY(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function sKe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?lS(e):e;return{pathname:n?n.startsWith("/")?n:oKe(n,t):t,search:lKe(r),hash:cKe(i)}}function oKe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Z8(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function aKe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function kY(e,t){let n=aKe(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function PY(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=lS(e):(i=b2({},e),Us(!i.pathname||!i.pathname.includes("?"),Z8("?","pathname","search",i)),Us(!i.pathname||!i.pathname.includes("#"),Z8("#","pathname","hash",i)),Us(!i.search||!i.search.includes("#"),Z8("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=t.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?t[d]:"/"}let u=sKe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const ry=e=>e.join("/").replace(/\/\/+/g,"/"),uKe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),lKe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,cKe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function dKe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const dwe=["post","put","patch","delete"];new Set(dwe);const fKe=["get",...dwe];new Set(fKe);/**
 * React Router v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _2(){return _2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_2.apply(this,arguments)}const NY=P.createContext(null),hKe=P.createContext(null),uv=P.createContext(null),fF=P.createContext(null),Dp=P.createContext({outlet:null,matches:[],isDataRoute:!1}),fwe=P.createContext(null);function OY(e,t){let{relative:n}=t===void 0?{}:t;cS()||Us(!1);let{basename:r,navigator:i}=P.useContext(uv),{hash:s,pathname:o,search:a}=pwe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:ry([r,o])),i.createHref({pathname:u,search:a,hash:s})}function cS(){return P.useContext(fF)!=null}function Ig(){return cS()||Us(!1),P.useContext(fF).location}function hwe(e){P.useContext(uv).static||P.useLayoutEffect(e)}function Mc(){let{isDataRoute:e}=P.useContext(Dp);return e?AKe():pKe()}function pKe(){cS()||Us(!1);let e=P.useContext(NY),{basename:t,future:n,navigator:r}=P.useContext(uv),{matches:i}=P.useContext(Dp),{pathname:s}=Ig(),o=JSON.stringify(kY(i,n.v7_relativeSplatPath)),a=P.useRef(!1);return hwe(()=>{a.current=!0}),P.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=PY(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:ry([t,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[t,r,o,s,e])}const mKe=P.createContext(null);function gKe(e){let t=P.useContext(Dp).outlet;return t&&P.createElement(mKe.Provider,{value:e},t)}function Ff(){let{matches:e}=P.useContext(Dp),t=e[e.length-1];return t?t.params:{}}function pwe(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=P.useContext(uv),{matches:i}=P.useContext(Dp),{pathname:s}=Ig(),o=JSON.stringify(kY(i,r.v7_relativeSplatPath));return P.useMemo(()=>PY(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function mwe(e,t){return yKe(e,t)}function yKe(e,t,n,r){cS()||Us(!1);let{navigator:i}=P.useContext(uv),{matches:s}=P.useContext(Dp),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=Ig(),c;if(t){var d;let y=typeof t=="string"?lS(t):t;u==="/"||(d=y.pathname)!=null&&d.startsWith(u)||Us(!1),c=y}else c=l;let f=c.pathname||"/",h=f;if(u!=="/"){let y=u.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=HYe(e,{pathname:h}),m=xKe(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:ry([u,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:ry([u,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,n,r);return t&&m?P.createElement(fF.Provider,{value:{location:_2({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:z0.Pop}},m):m}function vKe(){let e=CKe(),t=dKe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),n?P.createElement("pre",{style:i},n):null,null)}const bKe=P.createElement(vKe,null);class _Ke extends P.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?P.createElement(Dp.Provider,{value:this.props.routeContext},P.createElement(fwe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wKe(e){let{routeContext:t,match:n,children:r}=e,i=P.useContext(NY);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(Dp.Provider,{value:t},r)}function xKe(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);c>=0||Us(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:f,errors:h}=n,p=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,d,f)=>{let h,p=!1,m=null,y=null;n&&(h=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||bKe,u&&(l<0&&f===0?(IKe("route-fallback"),p=!0,y=null):l===f&&(p=!0,y=d.route.hydrateFallbackElement||null)));let v=t.concat(o.slice(0,f+1)),w=()=>{let x;return h?x=m:p?x=y:d.route.Component?x=P.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=c,P.createElement(wKe,{match:d,routeContext:{outlet:c,matches:v,isDataRoute:n!=null},children:x})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?P.createElement(_Ke,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:w(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):w()},null)}var gwe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(gwe||{}),ywe=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ywe||{});function EKe(e){let t=P.useContext(NY);return t||Us(!1),t}function SKe(e){let t=P.useContext(hKe);return t||Us(!1),t}function TKe(e){let t=P.useContext(Dp);return t||Us(!1),t}function vwe(e){let t=TKe(),n=t.matches[t.matches.length-1];return n.route.id||Us(!1),n.route.id}function CKe(){var e;let t=P.useContext(fwe),n=SKe(),r=vwe();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function AKe(){let{router:e}=EKe(gwe.UseNavigateStable),t=vwe(ywe.UseNavigateStable),n=P.useRef(!1);return hwe(()=>{n.current=!0}),P.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,_2({fromRouteId:t},s)))},[e,t])}const Nae={};function IKe(e,t,n){Nae[e]||(Nae[e]=!0)}function DY(e){let{to:t,replace:n,state:r,relative:i}=e;cS()||Us(!1);let{future:s,static:o}=P.useContext(uv),{matches:a}=P.useContext(Dp),{pathname:u}=Ig(),l=Mc(),c=PY(t,kY(a,s.v7_relativeSplatPath),u,i==="path"),d=JSON.stringify(c);return P.useEffect(()=>l(JSON.parse(d),{replace:n,state:r,relative:i}),[l,d,i,n,r]),null}function RKe(e){return gKe(e.context)}function bm(e){Us(!1)}function kKe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=z0.Pop,navigator:s,static:o=!1,future:a}=e;cS()&&Us(!1);let u=t.replace(/^\/*/,"/"),l=P.useMemo(()=>({basename:u,navigator:s,static:o,future:_2({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=lS(r));let{pathname:c="/",search:d="",hash:f="",state:h=null,key:p="default"}=r,m=P.useMemo(()=>{let y=RY(c,u);return y==null?null:{location:{pathname:y,search:d,hash:f,state:h,key:p},navigationType:i}},[u,c,d,f,h,p,i]);return m==null?null:P.createElement(uv.Provider,{value:l},P.createElement(fF.Provider,{children:n,value:m}))}function PKe(e){let{children:t,location:n}=e;return mwe(s7(t),n)}new Promise(()=>{});function s7(e,t){t===void 0&&(t=[]);let n=[];return P.Children.forEach(e,(r,i)=>{if(!P.isValidElement(r))return;let s=[...t,i];if(r.type===P.Fragment){n.push.apply(n,s7(r.props.children,s));return}r.type!==bm&&Us(!1),!r.props.index||!r.props.children||Us(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=s7(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function o7(){return o7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o7.apply(this,arguments)}function NKe(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function OKe(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function DKe(e,t){return e.button===0&&(!t||t==="_self")&&!OKe(e)}function a7(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function MKe(e,t){let n=a7(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const $Ke=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],LKe="6";try{window.__reactRouterVersion=LKe}catch{}const FKe="startTransition",Oae=lM[FKe];function jKe(e){let{basename:t,children:n,future:r,window:i}=e,s=P.useRef();s.current==null&&(s.current=zYe({window:i,v5Compat:!0}));let o=s.current,[a,u]=P.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=P.useCallback(d=>{l&&Oae?Oae(()=>u(d)):u(d)},[u,l]);return P.useLayoutEffect(()=>o.listen(c),[o,c]),P.createElement(kKe,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const BKe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zKe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,MY=P.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:u,to:l,preventScrollReset:c,unstable_viewTransition:d}=t,f=NKe(t,$Ke),{basename:h}=P.useContext(uv),p,m=!1;if(typeof l=="string"&&zKe.test(l)&&(p=l,BKe))try{let x=new URL(window.location.href),S=l.startsWith("//")?new URL(x.protocol+l):new URL(l),E=RY(S.pathname,h);S.origin===x.origin&&E!=null?l=E+S.search+S.hash:m=!0}catch{}let y=OY(l,{relative:i}),v=UKe(l,{replace:o,state:a,target:u,preventScrollReset:c,relative:i,unstable_viewTransition:d});function w(x){r&&r(x),x.defaultPrevented||v(x)}return P.createElement("a",o7({},f,{href:p||y,onClick:m||s?r:w,ref:n,target:u}))});var Dae;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Dae||(Dae={}));var Mae;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Mae||(Mae={}));function UKe(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=t===void 0?{}:t,u=Mc(),l=Ig(),c=pwe(e,{relative:o});return P.useCallback(d=>{if(DKe(d,n)){d.preventDefault();let f=r!==void 0?r:xM(l)===xM(c);u(e,{replace:f,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[l,u,c,r,i,n,e,s,o,a])}function $Y(e){let t=P.useRef(a7(e)),n=P.useRef(!1),r=Ig(),i=P.useMemo(()=>MKe(r.search,n.current?null:t.current),[r.search]),s=Mc(),o=P.useCallback((a,u)=>{const l=a7(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const LY=P.createContext(null);LY.displayName="@mantine/modals/ModalsContext";function VKe(){const e=P.useContext(LY);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function HKe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:d}=r,f=VKe(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&f.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&f.closeModal(e)};return _.jsxs(_.Fragment,{children:[l&&_.jsx(ke,{mb:"md",children:l}),_.jsxs(gr,{mt:l?0:"md",justify:"flex-end",...o,children:[_.jsx(Zn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),_.jsx(Zn,{...n,onClick:p,children:(n==null?void 0:n.children)||d})]})]})}const[qKe,hF]=x9e("mantine-modals");hF("openModal");hF("closeModal");hF("closeAllModals");const $ae=hF("openConfirmModal");function Lae(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function WKe(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;Lae(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{Lae(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function GKe(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...d}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...d}}}function YKe({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=P.useReducer(WKe,{modals:[],current:null}),o=P.useRef(i);o.current=i;const a=P.useCallback(y=>{s({type:"CLOSE_ALL",canceled:y})},[o,s]),u=P.useCallback(({modalId:y,...v})=>{const w=y||IA();return s({type:"OPEN",modal:{id:w,type:"content",props:v}}),w},[s]),l=P.useCallback(({modalId:y,...v})=>{const w=y||IA();return s({type:"OPEN",modal:{id:w,type:"confirm",props:v}}),w},[s]),c=P.useCallback((y,{modalId:v,...w})=>{const x=v||IA();return s({type:"OPEN",modal:{id:x,type:"context",props:w,ctx:y}}),x},[s]),d=P.useCallback((y,v)=>{s({type:"CLOSE",modalId:y,canceled:v})},[o,s]);qKe({openModal:u,openConfirmModal:l,openContextModal:({modal:y,...v})=>c(y,v),closeModal:d,closeContextModal:d,closeAllModals:a});const f={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:d,closeContextModal:d,closeAll:a},h=()=>{const y=o.current.current;switch(y==null?void 0:y.type){case"context":{const{innerProps:v,...w}=y.props,x=r[y.ctx];return{modalProps:w,content:_.jsx(x,{innerProps:v,context:f,id:y.id})}}case"confirm":{const{modalProps:v,confirmProps:w}=GKe(y.props);return{modalProps:v,content:_.jsx(HKe,{...w,id:y.id,labels:y.props.labels||n})}}case"content":{const{children:v,...w}=y.props;return{modalProps:w,content:_.jsx(_.Fragment,{children:v})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return _.jsxs(LY.Provider,{value:f,children:[_.jsx(zs,{zIndex:Nd("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var y;return d((y=i.current)==null?void 0:y.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var KKe={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=(e,t,n,r)=>{const i=P.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,title:u,className:l,children:c,...d},f)=>P.createElement("svg",{ref:f,...KKe[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,l].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...d},[u&&P.createElement("title",{key:"svg-title"},u),...r.map(([h,p])=>P.createElement(h,p)),...Array.isArray(c)?c:[c]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var XKe=Kt("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fae=Kt("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var QKe=Kt("outline","arrow-autofit-content","IconArrowAutofitContent",[["path",{d:"M6 4l-3 3l3 3",key:"svg-0"}],["path",{d:"M18 4l3 3l-3 3",key:"svg-1"}],["path",{d:"M4 14m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-2"}],["path",{d:"M10 7h-7",key:"svg-3"}],["path",{d:"M21 7h-7",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var JKe=Kt("outline","arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZKe=Kt("outline","arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var eXe=Kt("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tXe=Kt("outline","arrows-sort","IconArrowsSort",[["path",{d:"M3 9l4 -4l4 4m-4 -4v14",key:"svg-0"}],["path",{d:"M21 15l-4 4l-4 -4m4 4v-14",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nXe=Kt("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rXe=Kt("outline","baseline-density-large","IconBaselineDensityLarge",[["path",{d:"M4 4h16",key:"svg-0"}],["path",{d:"M4 20h16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var iXe=Kt("outline","baseline-density-medium","IconBaselineDensityMedium",[["path",{d:"M4 20h16",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M4 4h16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sXe=Kt("outline","baseline-density-small","IconBaselineDensitySmall",[["path",{d:"M4 3h16",key:"svg-0"}],["path",{d:"M4 9h16",key:"svg-1"}],["path",{d:"M4 15h16",key:"svg-2"}],["path",{d:"M4 21h16",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oXe=Kt("outline","box-multiple","IconBoxMultiple",[["path",{d:"M7 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M17 17v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var aXe=Kt("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uXe=Kt("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lXe=Kt("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cXe=Kt("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dXe=Kt("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fXe=Kt("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hXe=Kt("outline","chevron-left-pipe","IconChevronLeftPipe",[["path",{d:"M7 6v12",key:"svg-0"}],["path",{d:"M18 6l-6 6l6 6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pXe=Kt("outline","chevron-left","IconChevronLeft",[["path",{d:"M15 6l-6 6l6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mXe=Kt("outline","chevron-right-pipe","IconChevronRightPipe",[["path",{d:"M6 6l6 6l-6 6",key:"svg-0"}],["path",{d:"M17 5v13",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gXe=Kt("outline","chevron-right","IconChevronRight",[["path",{d:"M9 6l6 6l-6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yXe=Kt("outline","chevrons-down","IconChevronsDown",[["path",{d:"M7 7l5 5l5 -5",key:"svg-0"}],["path",{d:"M7 13l5 5l5 -5",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vXe=Kt("outline","circle-x","IconCircleX",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M10 10l4 4m0 -4l-4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bXe=Kt("outline","clear-all","IconClearAll",[["path",{d:"M8 6h12",key:"svg-0"}],["path",{d:"M6 12h12",key:"svg-1"}],["path",{d:"M4 18h12",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _Xe=Kt("outline","columns","IconColumns",[["path",{d:"M4 6l5.5 0",key:"svg-0"}],["path",{d:"M4 10l5.5 0",key:"svg-1"}],["path",{d:"M4 14l5.5 0",key:"svg-2"}],["path",{d:"M4 18l5.5 0",key:"svg-3"}],["path",{d:"M14.5 6l5.5 0",key:"svg-4"}],["path",{d:"M14.5 10l5.5 0",key:"svg-5"}],["path",{d:"M14.5 14l5.5 0",key:"svg-6"}],["path",{d:"M14.5 18l5.5 0",key:"svg-7"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wXe=Kt("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xXe=Kt("outline","device-floppy","IconDeviceFloppy",[["path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M14 4l0 4l-6 0l0 -4",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bwe=Kt("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var EXe=Kt("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _we=Kt("outline","edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var SXe=Kt("outline","eye-off","IconEyeOff",[["path",{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828",key:"svg-0"}],["path",{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var TXe=Kt("outline","file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var CXe=Kt("outline","filter-cog","IconFilterCog",[["path",{d:"M12 20l-3 1v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v1.5",key:"svg-0"}],["path",{d:"M19.001 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M19.001 15.5v1.5",key:"svg-2"}],["path",{d:"M19.001 21v1.5",key:"svg-3"}],["path",{d:"M22.032 17.25l-1.299 .75",key:"svg-4"}],["path",{d:"M17.27 20l-1.3 .75",key:"svg-5"}],["path",{d:"M15.97 17.25l1.3 .75",key:"svg-6"}],["path",{d:"M20.733 20l1.3 .75",key:"svg-7"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var AXe=Kt("outline","filter-off","IconFilterOff",[["path",{d:"M8 4h12v2.172a2 2 0 0 1 -.586 1.414l-3.914 3.914m-.5 3.5v4l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227",key:"svg-0"}],["path",{d:"M3 3l18 18",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IXe=Kt("outline","filter","IconFilter",[["path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var RXe=Kt("outline","grip-horizontal","IconGripHorizontal",[["path",{d:"M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}],["path",{d:"M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-3"}],["path",{d:"M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-4"}],["path",{d:"M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wwe=Kt("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kXe=Kt("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var PXe=Kt("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var NXe=Kt("outline","maximize","IconMaximize",[["path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2",key:"svg-0"}],["path",{d:"M4 16v2a2 2 0 0 0 2 2h2",key:"svg-1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v2",key:"svg-2"}],["path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var OXe=Kt("outline","minimize","IconMinimize",[["path",{d:"M15 19v-2a2 2 0 0 1 2 -2h2",key:"svg-0"}],["path",{d:"M15 5v2a2 2 0 0 0 2 2h2",key:"svg-1"}],["path",{d:"M5 15h2a2 2 0 0 1 2 2v2",key:"svg-2"}],["path",{d:"M5 9h2a2 2 0 0 0 2 -2v-2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var DXe=Kt("outline","pinned-off","IconPinnedOff",[["path",{d:"M3 3l18 18",key:"svg-0"}],["path",{d:"M15 4.5l-3.249 3.249m-2.57 1.433l-2.181 .818l-1.5 1.5l7 7l1.5 -1.5l.82 -2.186m1.43 -2.563l3.25 -3.251",key:"svg-1"}],["path",{d:"M9 15l-4.5 4.5",key:"svg-2"}],["path",{d:"M14.5 4l5.5 5.5",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var MXe=Kt("outline","pinned","IconPinned",[["path",{d:"M9 4v6l-2 4v2h10v-2l-2 -4v-6",key:"svg-0"}],["path",{d:"M12 16l0 5",key:"svg-1"}],["path",{d:"M8 4l8 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jae=Kt("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $Xe=Kt("outline","plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var LXe=Kt("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var FXe=Kt("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jXe=Kt("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var BXe=Kt("outline","search-off","IconSearchOff",[["path",{d:"M5.039 5.062a7 7 0 0 0 9.91 9.89m1.584 -2.434a7 7 0 0 0 -9.038 -9.057",key:"svg-0"}],["path",{d:"M3 3l18 18",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zXe=Kt("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xwe=Kt("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var UXe=Kt("outline","sort-ascending","IconSortAscending",[["path",{d:"M4 6l7 0",key:"svg-0"}],["path",{d:"M4 12l7 0",key:"svg-1"}],["path",{d:"M4 18l9 0",key:"svg-2"}],["path",{d:"M15 9l3 -3l3 3",key:"svg-3"}],["path",{d:"M18 6l0 12",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var VXe=Kt("outline","sort-descending","IconSortDescending",[["path",{d:"M4 6l9 0",key:"svg-0"}],["path",{d:"M4 12l7 0",key:"svg-1"}],["path",{d:"M4 18l7 0",key:"svg-2"}],["path",{d:"M15 15l3 3l3 -3",key:"svg-3"}],["path",{d:"M18 6l0 12",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var HXe=Kt("outline","sticker-2","IconSticker2",[["path",{d:"M6 4h12a2 2 0 0 1 2 2v7h-5a2 2 0 0 0 -2 2v5h-7a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2z",key:"svg-0"}],["path",{d:"M20 13v.172a2 2 0 0 1 -.586 1.414l-4.828 4.828a2 2 0 0 1 -1.414 .586h-.172",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ewe=Kt("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qXe=Kt("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Swe=Kt("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var FY=Kt("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jY=Kt("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var WXe=Kt("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var GXe=Kt("filled","player-pause-filled","IconPlayerPauseFilled",[["path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-0"}],["path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var YXe=Kt("filled","player-play-filled","IconPlayerPlayFilled",[["path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",key:"svg-0"}]]);function Twe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const $c="/ThinkAloud/";function Bae(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function Cwe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const KXe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,XXe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,QXe={};function zae(e,t){return(QXe.jsx?XXe:KXe).test(e)}const JXe=/[ \t\n\f\r]/g;function ZXe(e){return typeof e=="object"?e.type==="text"?Uae(e.value):!1:Uae(e)}function Uae(e){return e.replace(JXe,"")===""}let iR=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};iR.prototype.property={};iR.prototype.normal={};iR.prototype.space=null;function Awe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new iR(n,r,t)}function w2(e){return e.toLowerCase()}let $d=class{constructor(t,n){this.property=t,this.attribute=n}};$d.prototype.space=null;$d.prototype.boolean=!1;$d.prototype.booleanish=!1;$d.prototype.overloadedBoolean=!1;$d.prototype.number=!1;$d.prototype.commaSeparated=!1;$d.prototype.spaceSeparated=!1;$d.prototype.commaOrSpaceSeparated=!1;$d.prototype.mustUseProperty=!1;$d.prototype.defined=!1;let eQe=0;const nr=Jb(),no=Jb(),Iwe=Jb(),Tt=Jb(),zi=Jb(),px=Jb(),Ql=Jb();function Jb(){return 2**++eQe}const u7=Object.freeze(Object.defineProperty({__proto__:null,boolean:nr,booleanish:no,commaOrSpaceSeparated:Ql,commaSeparated:px,number:Tt,overloadedBoolean:Iwe,spaceSeparated:zi},Symbol.toStringTag,{value:"Module"})),eB=Object.keys(u7);class BY extends $d{constructor(t,n,r,i){let s=-1;if(super(t,n),Vae(this,"space",i),typeof r=="number")for(;++s<eB.length;){const o=eB[s];Vae(this,eB[s],(r&u7[o])===u7[o])}}}BY.prototype.defined=!0;function Vae(e,t,n){n&&(e[t]=n)}const tQe={}.hasOwnProperty;function dS(e){const t={},n={};let r;for(r in e.properties)if(tQe.call(e.properties,r)){const i=e.properties[r],s=new BY(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[w2(r)]=r,n[w2(s.attribute)]=r}return new iR(t,n,e.space)}const Rwe=dS({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),kwe=dS({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Pwe(e,t){return t in e?e[t]:t}function Nwe(e,t){return Pwe(e,t.toLowerCase())}const Owe=dS({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Nwe,properties:{xmlns:null,xmlnsXLink:null}}),Dwe=dS({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:no,ariaAutoComplete:null,ariaBusy:no,ariaChecked:no,ariaColCount:Tt,ariaColIndex:Tt,ariaColSpan:Tt,ariaControls:zi,ariaCurrent:null,ariaDescribedBy:zi,ariaDetails:null,ariaDisabled:no,ariaDropEffect:zi,ariaErrorMessage:null,ariaExpanded:no,ariaFlowTo:zi,ariaGrabbed:no,ariaHasPopup:null,ariaHidden:no,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:zi,ariaLevel:Tt,ariaLive:null,ariaModal:no,ariaMultiLine:no,ariaMultiSelectable:no,ariaOrientation:null,ariaOwns:zi,ariaPlaceholder:null,ariaPosInSet:Tt,ariaPressed:no,ariaReadOnly:no,ariaRelevant:null,ariaRequired:no,ariaRoleDescription:zi,ariaRowCount:Tt,ariaRowIndex:Tt,ariaRowSpan:Tt,ariaSelected:no,ariaSetSize:Tt,ariaSort:null,ariaValueMax:Tt,ariaValueMin:Tt,ariaValueNow:Tt,ariaValueText:null,role:null}}),nQe=dS({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Nwe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:px,acceptCharset:zi,accessKey:zi,action:null,allow:null,allowFullScreen:nr,allowPaymentRequest:nr,allowUserMedia:nr,alt:null,as:null,async:nr,autoCapitalize:null,autoComplete:zi,autoFocus:nr,autoPlay:nr,blocking:zi,capture:null,charSet:null,checked:nr,cite:null,className:zi,cols:Tt,colSpan:null,content:null,contentEditable:no,controls:nr,controlsList:zi,coords:Tt|px,crossOrigin:null,data:null,dateTime:null,decoding:null,default:nr,defer:nr,dir:null,dirName:null,disabled:nr,download:Iwe,draggable:no,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:nr,formTarget:null,headers:zi,height:Tt,hidden:nr,high:Tt,href:null,hrefLang:null,htmlFor:zi,httpEquiv:zi,id:null,imageSizes:null,imageSrcSet:null,inert:nr,inputMode:null,integrity:null,is:null,isMap:nr,itemId:null,itemProp:zi,itemRef:zi,itemScope:nr,itemType:zi,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:nr,low:Tt,manifest:null,max:null,maxLength:Tt,media:null,method:null,min:null,minLength:Tt,multiple:nr,muted:nr,name:null,nonce:null,noModule:nr,noValidate:nr,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:nr,optimum:Tt,pattern:null,ping:zi,placeholder:null,playsInline:nr,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:nr,referrerPolicy:null,rel:zi,required:nr,reversed:nr,rows:Tt,rowSpan:Tt,sandbox:zi,scope:null,scoped:nr,seamless:nr,selected:nr,shadowRootClonable:nr,shadowRootDelegatesFocus:nr,shadowRootMode:null,shape:null,size:Tt,sizes:null,slot:null,span:Tt,spellCheck:no,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Tt,step:null,style:null,tabIndex:Tt,target:null,title:null,translate:null,type:null,typeMustMatch:nr,useMap:null,value:no,width:Tt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:zi,axis:null,background:null,bgColor:null,border:Tt,borderColor:null,bottomMargin:Tt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:nr,declare:nr,event:null,face:null,frame:null,frameBorder:null,hSpace:Tt,leftMargin:Tt,link:null,longDesc:null,lowSrc:null,marginHeight:Tt,marginWidth:Tt,noResize:nr,noHref:nr,noShade:nr,noWrap:nr,object:null,profile:null,prompt:null,rev:null,rightMargin:Tt,rules:null,scheme:null,scrolling:no,standby:null,summary:null,text:null,topMargin:Tt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Tt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:nr,disableRemotePlayback:nr,prefix:null,property:null,results:Tt,security:null,unselectable:null}}),rQe=dS({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Pwe,properties:{about:Ql,accentHeight:Tt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Tt,amplitude:Tt,arabicForm:null,ascent:Tt,attributeName:null,attributeType:null,azimuth:Tt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Tt,by:null,calcMode:null,capHeight:Tt,className:zi,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Tt,diffuseConstant:Tt,direction:null,display:null,dur:null,divisor:Tt,dominantBaseline:null,download:nr,dx:null,dy:null,edgeMode:null,editable:null,elevation:Tt,enableBackground:null,end:null,event:null,exponent:Tt,externalResourcesRequired:null,fill:null,fillOpacity:Tt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:px,g2:px,glyphName:px,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Tt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Tt,horizOriginX:Tt,horizOriginY:Tt,id:null,ideographic:Tt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Tt,k:Tt,k1:Tt,k2:Tt,k3:Tt,k4:Tt,kernelMatrix:Ql,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Tt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Tt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Tt,overlineThickness:Tt,paintOrder:null,panose1:null,path:null,pathLength:Tt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:zi,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Tt,pointsAtY:Tt,pointsAtZ:Tt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ql,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ql,rev:Ql,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ql,requiredFeatures:Ql,requiredFonts:Ql,requiredFormats:Ql,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Tt,specularExponent:Tt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Tt,strikethroughThickness:Tt,string:null,stroke:null,strokeDashArray:Ql,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Tt,strokeOpacity:Tt,strokeWidth:null,style:null,surfaceScale:Tt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ql,tabIndex:Tt,tableValues:null,target:null,targetX:Tt,targetY:Tt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ql,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Tt,underlineThickness:Tt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Tt,values:null,vAlphabetic:Tt,vMathematical:Tt,vectorEffect:null,vHanging:Tt,vIdeographic:Tt,version:null,vertAdvY:Tt,vertOriginX:Tt,vertOriginY:Tt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Tt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),iQe=/^data[-\w.:]+$/i,Hae=/-[a-z]/g,sQe=/[A-Z]/g;function pF(e,t){const n=w2(t);let r=t,i=$d;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&iQe.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Hae,aQe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Hae.test(s)){let o=s.replace(sQe,oQe);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=BY}return new i(r,t)}function oQe(e){return"-"+e.toLowerCase()}function aQe(e){return e.charAt(1).toUpperCase()}const uQe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},sR=Awe([kwe,Rwe,Owe,Dwe,nQe],"html"),lv=Awe([kwe,Rwe,Owe,Dwe,rQe],"svg");function qae(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function Mwe(e){return e.join(" ").trim()}var aw={},tB,Wae;function lQe(){if(Wae)return tB;Wae=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,a=/^\s+|\s+$/g,u=`
`,l="/",c="*",d="",f="comment",h="declaration";tB=function(m,y){if(typeof m!="string")throw new TypeError("First argument must be a string");if(!m)return[];y=y||{};var v=1,w=1;function x(O){var $=O.match(t);$&&(v+=$.length);var F=O.lastIndexOf(u);w=~F?O.length-F:w+O.length}function S(){var O={line:v,column:w};return function($){return $.position=new E(O),I(),$}}function E(O){this.start=O,this.end={line:v,column:w},this.source=y.source}E.prototype.content=m;function T(O){var $=new Error(y.source+":"+v+":"+w+": "+O);if($.reason=O,$.filename=y.source,$.line=v,$.column=w,$.source=m,!y.silent)throw $}function A(O){var $=O.exec(m);if($){var F=$[0];return x(F),m=m.slice(F.length),$}}function I(){A(n)}function k(O){var $;for(O=O||[];$=D();)$!==!1&&O.push($);return O}function D(){var O=S();if(!(l!=m.charAt(0)||c!=m.charAt(1))){for(var $=2;d!=m.charAt($)&&(c!=m.charAt($)||l!=m.charAt($+1));)++$;if($+=2,d===m.charAt($-1))return T("End of comment missing");var F=m.slice(2,$-2);return w+=2,x(F),m=m.slice($),w+=2,O({type:f,comment:F})}}function M(){var O=S(),$=A(r);if($){if(D(),!A(i))return T("property missing ':'");var F=A(s),B=O({type:h,property:p($[0].replace(e,d)),value:F?p(F[0].replace(e,d)):d});return A(o),B}}function z(){var O=[];k(O);for(var $;$=M();)$!==!1&&(O.push($),k(O));return O}return I(),z()};function p(m){return m?m.replace(a,d):d}return tB}var Gae;function cQe(){if(Gae)return aw;Gae=1;var e=aw&&aw.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(aw,"__esModule",{value:!0});var t=e(lQe());function n(r,i){var s=null;if(!r||typeof r!="string")return s;var o=(0,t.default)(r),a=typeof i=="function";return o.forEach(function(u){if(u.type==="declaration"){var l=u.property,c=u.value;a?i(l,c,u):c&&(s=s||{},s[l]=c)}}),s}return aw.default=n,aw}var dQe=cQe();const Yae=su(dQe),fQe=Yae.default||Yae,mF=$we("end"),Mp=$we("start");function $we(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function hQe(e){const t=Mp(e),n=mF(e);if(t&&n)return{start:t,end:n}}function kA(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Kae(e.position):"start"in e||"end"in e?Kae(e):"line"in e||"column"in e?l7(e):""}function l7(e){return Xae(e&&e.line)+":"+Xae(e&&e.column)}function Kae(e){return l7(e&&e.start)+"-"+l7(e&&e.end)}function Xae(e){return e&&typeof e=="number"?e:1}class au extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=kA(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}au.prototype.file="";au.prototype.name="";au.prototype.reason="";au.prototype.message="";au.prototype.stack="";au.prototype.column=void 0;au.prototype.line=void 0;au.prototype.ancestors=void 0;au.prototype.cause=void 0;au.prototype.fatal=void 0;au.prototype.place=void 0;au.prototype.ruleId=void 0;au.prototype.source=void 0;const zY={}.hasOwnProperty,pQe=new Map,mQe=/[A-Z]/g,gQe=/-([a-z])/g,yQe=new Set(["table","tbody","thead","tfoot","tr"]),vQe=new Set(["td","th"]),Lwe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function bQe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=AQe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=CQe(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?lv:sR,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=Fwe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function Fwe(e,t,n){if(t.type==="element")return _Qe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return wQe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return EQe(e,t,n);if(t.type==="mdxjsEsm")return xQe(e,t);if(t.type==="root")return SQe(e,t,n);if(t.type==="text")return TQe(e,t)}function _Qe(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=lv,e.schema=i),e.ancestors.push(t);const s=Bwe(e,t.tagName,!1),o=IQe(e,t);let a=VY(e,t);return yQe.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!ZXe(u):!0})),jwe(e,o,s,t),UY(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function wQe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}x2(e,t.position)}function xQe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);x2(e,t.position)}function EQe(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=lv,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:Bwe(e,t.name,!0),o=RQe(e,t),a=VY(e,t);return jwe(e,o,s,t),UY(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function SQe(e,t,n){const r={};return UY(r,VY(e,t)),e.create(t,e.Fragment,r,n)}function TQe(e,t){return t.value}function jwe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function UY(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function CQe(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function AQe(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=Mp(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function IQe(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&zY.call(t.properties,i)){const s=kQe(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&vQe.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function RQe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else x2(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else x2(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function VY(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:pQe;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=Fwe(e,s,o);a!==void 0&&n.push(a)}return n}function kQe(e,t,n){const r=pF(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?Cwe(n):Mwe(n)),r.property==="style"){let i=typeof n=="object"?n:PQe(e,String(n));return e.stylePropertyNameCase==="css"&&(i=NQe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?uQe[r.property]||r.property:r.attribute,n]}}function PQe(e,t){const n={};try{fQe(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new au("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=Lwe+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(gQe,DQe)),n[o]=s}}function Bwe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=zae(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=zae(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return zY.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);x2(e)}function x2(e,t){const n=new au("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Lwe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function NQe(e){const t={};let n;for(n in e)zY.call(e,n)&&(t[OQe(n)]=e[n]);return t}function OQe(e){let t=e.replace(mQe,MQe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function DQe(e,t){return t.toUpperCase()}function MQe(e){return"-"+e.toLowerCase()}const nB={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},$Qe={};function LQe(e,t){const n=$Qe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return zwe(e,r,i)}function zwe(e,t,n){if(FQe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Qae(e.children,t,n)}return Array.isArray(e)?Qae(e,t,n):""}function Qae(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=zwe(e[i],t,n);return r.join("")}function FQe(e){return!!(e&&typeof e=="object")}const Jae=document.createElement("i");function HY(e){const t="&"+e+";";Jae.innerHTML=t;const n=Jae.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function rg(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function rd(e,t){return e.length>0?(rg(e,e.length,0,t),e):t}const Zae={}.hasOwnProperty;function jQe(e){const t={};let n=-1;for(;++n<e.length;)BQe(t,e[n]);return t}function BQe(e,t){let n;for(n in t){const i=(Zae.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){Zae.call(i,o)||(i[o]=[]);const a=s[o];zQe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function zQe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);rg(e,0,0,r)}function Uwe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function mx(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const jh=cv(/[A-Za-z]/),uc=cv(/[\dA-Za-z]/),UQe=cv(/[#-'*+\--9=?A-Z^-~]/);function c7(e){return e!==null&&(e<32||e===127)}const d7=cv(/\d/),VQe=cv(/[\dA-Fa-f]/),HQe=cv(/[!-/:-@[-`{-~]/);function Fn(e){return e!==null&&e<-2}function wl(e){return e!==null&&(e<0||e===32)}function ui(e){return e===-2||e===-1||e===32}const qQe=cv(new RegExp("\\p{P}|\\p{S}","u")),WQe=cv(/\s/);function cv(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function fS(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&uc(e.charCodeAt(n+1))&&uc(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Ui(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return ui(u)?(e.enter(n),a(u)):t(u)}function a(u){return ui(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const GQe={tokenize:YQe};function YQe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Ui(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Fn(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const KQe={tokenize:XQe},eue={tokenize:QQe};function XQe(e){const t=this,n=[];let r=0,i,s,o;return a;function a(x){if(r<n.length){const S=n[r];return t.containerState=S[1],e.attempt(S[0].continuation,u,l)(x)}return l(x)}function u(x){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&w();const S=t.events.length;let E=S,T;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){T=t.events[E][1].end;break}v(r);let A=S;for(;A<t.events.length;)t.events[A][1].end=Object.assign({},T),A++;return rg(t.events,E+1,0,t.events.slice(S)),t.events.length=A,l(x)}return a(x)}function l(x){if(r===n.length){if(!i)return f(x);if(i.currentConstruct&&i.currentConstruct.concrete)return p(x);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(eue,c,d)(x)}function c(x){return i&&w(),v(r),f(x)}function d(x){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(x)}function f(x){return t.containerState={},e.attempt(eue,h,p)(x)}function h(x){return r++,n.push([t.currentConstruct,t.containerState]),f(x)}function p(x){if(x===null){i&&w(),v(0),e.consume(x);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(x)}function m(x){if(x===null){y(e.exit("chunkFlow"),!0),v(0),e.consume(x);return}return Fn(x)?(e.consume(x),y(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(x),m)}function y(x,S){const E=t.sliceStream(x);if(S&&E.push(null),x.previous=s,s&&(s.next=x),s=x,i.defineSkip(x.start),i.write(E),t.parser.lazy[x.start.line]){let T=i.events.length;for(;T--;)if(i.events[T][1].start.offset<o&&(!i.events[T][1].end||i.events[T][1].end.offset>o))return;const A=t.events.length;let I=A,k,D;for(;I--;)if(t.events[I][0]==="exit"&&t.events[I][1].type==="chunkFlow"){if(k){D=t.events[I][1].end;break}k=!0}for(v(r),T=A;T<t.events.length;)t.events[T][1].end=Object.assign({},D),T++;rg(t.events,I+1,0,t.events.slice(A)),t.events.length=T}}function v(x){let S=n.length;for(;S-- >x;){const E=n[S];t.containerState=E[1],E[0].exit.call(t,e)}n.length=x}function w(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function QQe(e,t,n){return Ui(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function tue(e){if(e===null||wl(e)||WQe(e))return 1;if(qQe(e))return 2}function qY(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const f7={name:"attention",tokenize:ZQe,resolveAll:JQe};function JQe(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d=Object.assign({},e[r][1].end),f=Object.assign({},e[n][1].start);nue(d,-u),nue(f,u),o={type:u>1?"strongSequence":"emphasisSequence",start:d,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:f},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=rd(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=rd(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=rd(l,qY(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=rd(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=rd(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,rg(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function ZQe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=tue(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=tue(u),d=!c||c===2&&i||n.includes(u),f=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?d:d&&(i||!f)),l._close=!!(s===42?f:f&&(c||!d)),t(u)}}function nue(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const eJe={name:"autolink",tokenize:tJe};function tJe(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return jh(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||uc(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||uc(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||c7(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):UQe(h)?(e.consume(h),l):n(h)}function c(h){return uc(h)?d(h):n(h)}function d(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):f(h)}function f(h){if((h===45||uc(h))&&r++<63){const p=h===45?f:d;return e.consume(h),p}return n(h)}}const gF={tokenize:nJe,partial:!0};function nJe(e,t,n){return r;function r(s){return ui(s)?Ui(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||Fn(s)?t(s):n(s)}}const Vwe={name:"blockQuote",tokenize:rJe,continuation:{tokenize:iJe},exit:sJe};function rJe(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return ui(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function iJe(e,t,n){const r=this;return i;function i(o){return ui(o)?Ui(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(Vwe,t,n)(o)}}function sJe(e){e.exit("blockQuote")}const Hwe={name:"characterEscape",tokenize:oJe};function oJe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return HQe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const qwe={name:"characterReference",tokenize:aJe};function aJe(e,t,n){const r=this;let i=0,s,o;return a;function a(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),u}function u(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=uc,c(d))}function l(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=VQe,c):(e.enter("characterReferenceValue"),s=7,o=d7,c(d))}function c(d){if(d===59&&i){const f=e.exit("characterReferenceValue");return o===uc&&!HY(r.sliceSerialize(f))?n(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(d)&&i++<s?(e.consume(d),c):n(d)}}const rue={tokenize:lJe,partial:!0},iue={name:"codeFenced",tokenize:uJe,concrete:!0};function uJe(e,t,n){const r=this,i={tokenize:E,partial:!0};let s=0,o=0,a;return u;function u(T){return l(T)}function l(T){const A=r.events[r.events.length-1];return s=A&&A[1].type==="linePrefix"?A[2].sliceSerialize(A[1],!0).length:0,a=T,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(T)}function c(T){return T===a?(o++,e.consume(T),c):o<3?n(T):(e.exit("codeFencedFenceSequence"),ui(T)?Ui(e,d,"whitespace")(T):d(T))}function d(T){return T===null||Fn(T)?(e.exit("codeFencedFence"),r.interrupt?t(T):e.check(rue,m,S)(T)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(T))}function f(T){return T===null||Fn(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(T)):ui(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Ui(e,h,"whitespace")(T)):T===96&&T===a?n(T):(e.consume(T),f)}function h(T){return T===null||Fn(T)?d(T):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(T))}function p(T){return T===null||Fn(T)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(T)):T===96&&T===a?n(T):(e.consume(T),p)}function m(T){return e.attempt(i,S,y)(T)}function y(T){return e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),v}function v(T){return s>0&&ui(T)?Ui(e,w,"linePrefix",s+1)(T):w(T)}function w(T){return T===null||Fn(T)?e.check(rue,m,S)(T):(e.enter("codeFlowValue"),x(T))}function x(T){return T===null||Fn(T)?(e.exit("codeFlowValue"),w(T)):(e.consume(T),x)}function S(T){return e.exit("codeFenced"),t(T)}function E(T,A,I){let k=0;return D;function D(F){return T.enter("lineEnding"),T.consume(F),T.exit("lineEnding"),M}function M(F){return T.enter("codeFencedFence"),ui(F)?Ui(T,z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):z(F)}function z(F){return F===a?(T.enter("codeFencedFenceSequence"),O(F)):I(F)}function O(F){return F===a?(k++,T.consume(F),O):k>=o?(T.exit("codeFencedFenceSequence"),ui(F)?Ui(T,$,"whitespace")(F):$(F)):I(F)}function $(F){return F===null||Fn(F)?(T.exit("codeFencedFence"),A(F)):I(F)}}}function lJe(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const rB={name:"codeIndented",tokenize:dJe},cJe={tokenize:fJe,partial:!0};function dJe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),Ui(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):Fn(l)?e.attempt(cJe,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||Fn(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function fJe(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Fn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Ui(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Fn(o)?i(o):n(o)}}const hJe={name:"codeText",tokenize:gJe,resolve:pJe,previous:mJe};function pJe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function mJe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function gJe(e,t,n){let r=0,i,s;return o;function o(d){return e.enter("codeText"),e.enter("codeTextSequence"),a(d)}function a(d){return d===96?(e.consume(d),r++,a):(e.exit("codeTextSequence"),u(d))}function u(d){return d===null?n(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),u):d===96?(s=e.enter("codeTextSequence"),i=0,c(d)):Fn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(d))}function l(d){return d===null||d===32||d===96||Fn(d)?(e.exit("codeTextData"),u(d)):(e.consume(d),l)}function c(d){return d===96?(e.consume(d),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(s.type="codeTextData",l(d))}}class yJe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&BT(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),BT(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),BT(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);BT(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);BT(this.left,n.reverse())}}}function BT(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Wwe(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new yJe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,vJe(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return rg(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function vJe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,d,f=-1,h=n,p=0,m=0;const y=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),d&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=h,h=h.next}for(h=n;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(m=f+1,y.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):y.pop(),f=y.length;f--;){const v=a.slice(y[f],y[f+1]),w=s.pop();u.push([w,w+v.length-1]),e.splice(w,2,v)}for(u.reverse(),f=-1;++f<u.length;)l[p+u[f][0]]=p+u[f][1],p+=u[f][1]-u[f][0]-1;return l}const bJe={tokenize:xJe,resolve:wJe},_Je={tokenize:EJe,partial:!0};function wJe(e){return Wwe(e),e}function xJe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Fn(a)?e.check(_Je,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function EJe(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Ui(e,s,"linePrefix")}function s(o){if(o===null||Fn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function Gwe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return d;function d(v){return v===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(v),e.exit(s),f):v===null||v===32||v===41||c7(v)?n(v):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(v))}function f(v){return v===62?(e.enter(s),e.consume(v),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(v))}function h(v){return v===62?(e.exit("chunkString"),e.exit(a),f(v)):v===null||v===60||Fn(v)?n(v):(e.consume(v),v===92?p:h)}function p(v){return v===60||v===62||v===92?(e.consume(v),h):h(v)}function m(v){return!c&&(v===null||v===41||wl(v))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(v)):c<l&&v===40?(e.consume(v),c++,m):v===41?(e.consume(v),c--,m):v===null||v===32||v===40||c7(v)?n(v):(e.consume(v),v===92?y:m)}function y(v){return v===40||v===41||v===92?(e.consume(v),m):m(v)}}function Ywe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):Fn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),d(h))}function d(h){return h===null||h===91||h===93||Fn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!ui(h)),h===92?f:d)}function f(h){return h===91||h===92||h===93?(e.consume(h),a++,d):d(h)}}function Kwe(e,t,n,r,i,s){let o;return a;function a(f){return f===34||f===39||f===40?(e.enter(r),e.enter(i),e.consume(f),e.exit(i),o=f===40?41:f,u):n(f)}function u(f){return f===o?(e.enter(i),e.consume(f),e.exit(i),e.exit(r),t):(e.enter(s),l(f))}function l(f){return f===o?(e.exit(s),u(o)):f===null?n(f):Fn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),Ui(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(f))}function c(f){return f===o||f===null||Fn(f)?(e.exit("chunkString"),l(f)):(e.consume(f),f===92?d:c)}function d(f){return f===o||f===92?(e.consume(f),c):c(f)}}function PA(e,t){let n;return r;function r(i){return Fn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):ui(i)?Ui(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const SJe={name:"definition",tokenize:CJe},TJe={tokenize:AJe,partial:!0};function CJe(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return Ywe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=mx(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return wl(h)?PA(e,l)(h):l(h)}function l(h){return Gwe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(TJe,d,d)(h)}function d(h){return ui(h)?Ui(e,f,"whitespace")(h):f(h)}function f(h){return h===null||Fn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function AJe(e,t,n){return r;function r(a){return wl(a)?PA(e,i)(a):n(a)}function i(a){return Kwe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return ui(a)?Ui(e,o,"whitespace")(a):o(a)}function o(a){return a===null||Fn(a)?t(a):n(a)}}const IJe={name:"hardBreakEscape",tokenize:RJe};function RJe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return Fn(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const kJe={name:"headingAtx",tokenize:NJe,resolve:PJe};function PJe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},rg(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function NJe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||wl(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||Fn(c)?(e.exit("atxHeading"),t(c)):ui(c)?Ui(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||wl(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const OJe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],sue=["pre","script","style","textarea"],DJe={name:"htmlFlow",tokenize:FJe,resolveTo:LJe,concrete:!0},MJe={tokenize:BJe,partial:!0},$Je={tokenize:jJe,partial:!0};function LJe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function FJe(e,t,n){const r=this;let i,s,o,a,u;return l;function l(H){return c(H)}function c(H){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(H),d}function d(H){return H===33?(e.consume(H),f):H===47?(e.consume(H),s=!0,m):H===63?(e.consume(H),i=3,r.interrupt?t:L):jh(H)?(e.consume(H),o=String.fromCharCode(H),y):n(H)}function f(H){return H===45?(e.consume(H),i=2,h):H===91?(e.consume(H),i=5,a=0,p):jh(H)?(e.consume(H),i=4,r.interrupt?t:L):n(H)}function h(H){return H===45?(e.consume(H),r.interrupt?t:L):n(H)}function p(H){const Q="CDATA[";return H===Q.charCodeAt(a++)?(e.consume(H),a===Q.length?r.interrupt?t:z:p):n(H)}function m(H){return jh(H)?(e.consume(H),o=String.fromCharCode(H),y):n(H)}function y(H){if(H===null||H===47||H===62||wl(H)){const Q=H===47,Z=o.toLowerCase();return!Q&&!s&&sue.includes(Z)?(i=1,r.interrupt?t(H):z(H)):OJe.includes(o.toLowerCase())?(i=6,Q?(e.consume(H),v):r.interrupt?t(H):z(H)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(H):s?w(H):x(H))}return H===45||uc(H)?(e.consume(H),o+=String.fromCharCode(H),y):n(H)}function v(H){return H===62?(e.consume(H),r.interrupt?t:z):n(H)}function w(H){return ui(H)?(e.consume(H),w):D(H)}function x(H){return H===47?(e.consume(H),D):H===58||H===95||jh(H)?(e.consume(H),S):ui(H)?(e.consume(H),x):D(H)}function S(H){return H===45||H===46||H===58||H===95||uc(H)?(e.consume(H),S):E(H)}function E(H){return H===61?(e.consume(H),T):ui(H)?(e.consume(H),E):x(H)}function T(H){return H===null||H===60||H===61||H===62||H===96?n(H):H===34||H===39?(e.consume(H),u=H,A):ui(H)?(e.consume(H),T):I(H)}function A(H){return H===u?(e.consume(H),u=null,k):H===null||Fn(H)?n(H):(e.consume(H),A)}function I(H){return H===null||H===34||H===39||H===47||H===60||H===61||H===62||H===96||wl(H)?E(H):(e.consume(H),I)}function k(H){return H===47||H===62||ui(H)?x(H):n(H)}function D(H){return H===62?(e.consume(H),M):n(H)}function M(H){return H===null||Fn(H)?z(H):ui(H)?(e.consume(H),M):n(H)}function z(H){return H===45&&i===2?(e.consume(H),B):H===60&&i===1?(e.consume(H),q):H===62&&i===4?(e.consume(H),V):H===63&&i===3?(e.consume(H),L):H===93&&i===5?(e.consume(H),K):Fn(H)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(MJe,X,O)(H)):H===null||Fn(H)?(e.exit("htmlFlowData"),O(H)):(e.consume(H),z)}function O(H){return e.check($Je,$,X)(H)}function $(H){return e.enter("lineEnding"),e.consume(H),e.exit("lineEnding"),F}function F(H){return H===null||Fn(H)?O(H):(e.enter("htmlFlowData"),z(H))}function B(H){return H===45?(e.consume(H),L):z(H)}function q(H){return H===47?(e.consume(H),o="",G):z(H)}function G(H){if(H===62){const Q=o.toLowerCase();return sue.includes(Q)?(e.consume(H),V):z(H)}return jh(H)&&o.length<8?(e.consume(H),o+=String.fromCharCode(H),G):z(H)}function K(H){return H===93?(e.consume(H),L):z(H)}function L(H){return H===62?(e.consume(H),V):H===45&&i===2?(e.consume(H),L):z(H)}function V(H){return H===null||Fn(H)?(e.exit("htmlFlowData"),X(H)):(e.consume(H),V)}function X(H){return e.exit("htmlFlow"),t(H)}}function jJe(e,t,n){const r=this;return i;function i(o){return Fn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function BJe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(gF,t,n)}}const zJe={name:"htmlText",tokenize:UJe};function UJe(e,t,n){const r=this;let i,s,o;return a;function a(L){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(L),u}function u(L){return L===33?(e.consume(L),l):L===47?(e.consume(L),E):L===63?(e.consume(L),x):jh(L)?(e.consume(L),I):n(L)}function l(L){return L===45?(e.consume(L),c):L===91?(e.consume(L),s=0,p):jh(L)?(e.consume(L),w):n(L)}function c(L){return L===45?(e.consume(L),h):n(L)}function d(L){return L===null?n(L):L===45?(e.consume(L),f):Fn(L)?(o=d,q(L)):(e.consume(L),d)}function f(L){return L===45?(e.consume(L),h):d(L)}function h(L){return L===62?B(L):L===45?f(L):d(L)}function p(L){const V="CDATA[";return L===V.charCodeAt(s++)?(e.consume(L),s===V.length?m:p):n(L)}function m(L){return L===null?n(L):L===93?(e.consume(L),y):Fn(L)?(o=m,q(L)):(e.consume(L),m)}function y(L){return L===93?(e.consume(L),v):m(L)}function v(L){return L===62?B(L):L===93?(e.consume(L),v):m(L)}function w(L){return L===null||L===62?B(L):Fn(L)?(o=w,q(L)):(e.consume(L),w)}function x(L){return L===null?n(L):L===63?(e.consume(L),S):Fn(L)?(o=x,q(L)):(e.consume(L),x)}function S(L){return L===62?B(L):x(L)}function E(L){return jh(L)?(e.consume(L),T):n(L)}function T(L){return L===45||uc(L)?(e.consume(L),T):A(L)}function A(L){return Fn(L)?(o=A,q(L)):ui(L)?(e.consume(L),A):B(L)}function I(L){return L===45||uc(L)?(e.consume(L),I):L===47||L===62||wl(L)?k(L):n(L)}function k(L){return L===47?(e.consume(L),B):L===58||L===95||jh(L)?(e.consume(L),D):Fn(L)?(o=k,q(L)):ui(L)?(e.consume(L),k):B(L)}function D(L){return L===45||L===46||L===58||L===95||uc(L)?(e.consume(L),D):M(L)}function M(L){return L===61?(e.consume(L),z):Fn(L)?(o=M,q(L)):ui(L)?(e.consume(L),M):k(L)}function z(L){return L===null||L===60||L===61||L===62||L===96?n(L):L===34||L===39?(e.consume(L),i=L,O):Fn(L)?(o=z,q(L)):ui(L)?(e.consume(L),z):(e.consume(L),$)}function O(L){return L===i?(e.consume(L),i=void 0,F):L===null?n(L):Fn(L)?(o=O,q(L)):(e.consume(L),O)}function $(L){return L===null||L===34||L===39||L===60||L===61||L===96?n(L):L===47||L===62||wl(L)?k(L):(e.consume(L),$)}function F(L){return L===47||L===62||wl(L)?k(L):n(L)}function B(L){return L===62?(e.consume(L),e.exit("htmlTextData"),e.exit("htmlText"),t):n(L)}function q(L){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(L),e.exit("lineEnding"),G}function G(L){return ui(L)?Ui(e,K,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):K(L)}function K(L){return e.enter("htmlTextData"),o(L)}}const WY={name:"labelEnd",tokenize:YJe,resolveTo:GJe,resolveAll:WJe},VJe={tokenize:KJe},HJe={tokenize:XJe},qJe={tokenize:QJe};function WJe(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function GJe(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=rd(a,e.slice(s+1,s+r+3)),a=rd(a,[["enter",c,t]]),a=rd(a,qY(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=rd(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=rd(a,e.slice(o+1)),a=rd(a,[["exit",u,t]]),rg(e,s,e.length,a),e}function YJe(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(f){return s?s._inactive?d(f):(o=r.parser.defined.includes(mx(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelEnd"),u):n(f)}function u(f){return f===40?e.attempt(VJe,c,o?c:d)(f):f===91?e.attempt(HJe,c,o?l:d)(f):o?c(f):d(f)}function l(f){return e.attempt(qJe,c,d)(f)}function c(f){return t(f)}function d(f){return s._balanced=!0,n(f)}}function KJe(e,t,n){return r;function r(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),i}function i(d){return wl(d)?PA(e,s)(d):s(d)}function s(d){return d===41?c(d):Gwe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return wl(d)?PA(e,u)(d):c(d)}function a(d){return n(d)}function u(d){return d===34||d===39||d===40?Kwe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):c(d)}function l(d){return wl(d)?PA(e,c)(d):c(d)}function c(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):n(d)}}function XJe(e,t,n){const r=this;return i;function i(a){return Ywe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(mx(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function QJe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const JJe={name:"labelStartImage",tokenize:ZJe,resolveAll:WY.resolveAll};function ZJe(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const eZe={name:"labelStartLink",tokenize:tZe,resolveAll:WY.resolveAll};function tZe(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const iB={name:"lineEnding",tokenize:nZe};function nZe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Ui(e,t,"linePrefix")}}const sD={name:"thematicBreak",tokenize:rZe};function rZe(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||Fn(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),ui(l)?Ui(e,a,"whitespace")(l):a(l))}}const ol={name:"list",tokenize:oZe,continuation:{tokenize:aZe},exit:lZe},iZe={tokenize:cZe,partial:!0},sZe={tokenize:uZe,partial:!0};function oZe(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:d7(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(sD,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return d7(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(gF,r.interrupt?n:c,e.attempt(iZe,f,d))}function c(h){return r.containerState.initialBlankLine=!0,s++,f(h)}function d(h){return ui(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),f):n(h)}function f(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function aZe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(gF,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ui(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!ui(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(sZe,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ui(e,e.attempt(ol,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function uZe(e,t,n){const r=this;return Ui(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function lZe(e){e.exit(this.containerState.type)}function cZe(e,t,n){const r=this;return Ui(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!ui(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const oue={name:"setextUnderline",tokenize:fZe,resolveTo:dZe};function dZe(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function fZe(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,d;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){d=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),ui(l)?Ui(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||Fn(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const hZe={tokenize:pZe};function pZe(e){const t=this,n=e.attempt(gF,r,e.attempt(this.parser.constructs.flowInitial,i,Ui(e,e.attempt(this.parser.constructs.flow,i,e.attempt(bJe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const mZe={resolveAll:Qwe()},gZe=Xwe("string"),yZe=Xwe("text");function Xwe(e){return{tokenize:t,resolveAll:Qwe(e==="text"?vZe:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const d=i[c];let f=-1;if(d)for(;++f<d.length;){const h=d[f];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function Qwe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function vZe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function bZe(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:w,enter:x,exit:S,attempt:A(E),check:A(T),interrupt:A(T,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:f,now:p,defineSkip:m,write:d};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function d(M){return o=rd(o,M),y(),o[o.length-1]!==null?[]:(I(t,0),l.events=qY(s,l.events,l),l.events)}function f(M,z){return wZe(h(M),z)}function h(M){return _Ze(o,M)}function p(){const{line:M,column:z,offset:O,_index:$,_bufferIndex:F}=r;return{line:M,column:z,offset:O,_index:$,_bufferIndex:F}}function m(M){i[M.line]=M.column,D()}function y(){let M;for(;r._index<o.length;){const z=o[r._index];if(typeof z=="string")for(M=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===M&&r._bufferIndex<z.length;)v(z.charCodeAt(r._bufferIndex));else v(z)}}function v(M){c=c(M)}function w(M){Fn(M)?(r.line++,r.column=1,r.offset+=M===-3?2:1,D()):M!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=M}function x(M,z){const O=z||{};return O.type=M,O.start=p(),l.events.push(["enter",O,l]),a.push(O),O}function S(M){const z=a.pop();return z.end=p(),l.events.push(["exit",z,l]),z}function E(M,z){I(M,z.from)}function T(M,z){z.restore()}function A(M,z){return O;function O($,F,B){let q,G,K,L;return Array.isArray($)?X($):"tokenize"in $?X([$]):V($);function V(ne){return ue;function ue(le){const ce=le!==null&&ne[le],ge=le!==null&&ne.null,se=[...Array.isArray(ce)?ce:ce?[ce]:[],...Array.isArray(ge)?ge:ge?[ge]:[]];return X(se)(le)}}function X(ne){return q=ne,G=0,ne.length===0?B:H(ne[G])}function H(ne){return ue;function ue(le){return L=k(),K=ne,ne.partial||(l.currentConstruct=ne),ne.name&&l.parser.constructs.disable.null.includes(ne.name)?Z():ne.tokenize.call(z?Object.assign(Object.create(l),z):l,u,Q,Z)(le)}}function Q(ne){return M(K,L),F}function Z(ne){return L.restore(),++G<q.length?H(q[G]):B}}}function I(M,z){M.resolveAll&&!s.includes(M)&&s.push(M),M.resolve&&rg(l.events,z,l.events.length-z,M.resolve(l.events.slice(z),l)),M.resolveTo&&(l.events=M.resolveTo(l.events,l))}function k(){const M=p(),z=l.previous,O=l.currentConstruct,$=l.events.length,F=Array.from(a);return{restore:B,from:$};function B(){r=M,l.previous=z,l.currentConstruct=O,l.events.length=$,a=F,D()}}function D(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function _Ze(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function wZe(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const xZe={42:ol,43:ol,45:ol,48:ol,49:ol,50:ol,51:ol,52:ol,53:ol,54:ol,55:ol,56:ol,57:ol,62:Vwe},EZe={91:SJe},SZe={[-2]:rB,[-1]:rB,32:rB},TZe={35:kJe,42:sD,45:[oue,sD],60:DJe,61:oue,95:sD,96:iue,126:iue},CZe={38:qwe,92:Hwe},AZe={[-5]:iB,[-4]:iB,[-3]:iB,33:JJe,38:qwe,42:f7,60:[eJe,zJe],91:eZe,92:[IJe,Hwe],93:WY,95:f7,96:hJe},IZe={null:[f7,mZe]},RZe={null:[42,95]},kZe={null:[]},PZe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:RZe,contentInitial:EZe,disable:kZe,document:xZe,flow:TZe,flowInitial:SZe,insideSpan:IZe,string:CZe,text:AZe},Symbol.toStringTag,{value:"Module"}));function NZe(e){const n=jQe([PZe,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(GQe),document:i(KQe),flow:i(hZe),string:i(gZe),text:i(yZe)};return r;function i(s){return o;function o(a){return bZe(r,s,a)}}}function OZe(e){for(;!Wwe(e););return e}const aue=/[\0\t\n\r]/g;function DZe(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,d,f,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),d=0,t="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(aue.lastIndex=d,l=aue.exec(s),f=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(f),!l){t=s.slice(d);break}if(h===10&&d===f&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),d<f&&(u.push(s.slice(d,f)),e+=f-d),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}d=f+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const MZe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function $Ze(e){return e.replace(MZe,LZe)}function LZe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return Uwe(n.slice(s?2:1),s?16:10)}return HY(n)||e}const Jwe={}.hasOwnProperty;function FZe(e,t,n){return typeof t!="string"&&(n=t,t=void 0),jZe(n)(OZe(NZe(n).document().write(DZe()(e,t,!0))))}function jZe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(qe),autolinkProtocol:k,autolinkEmail:k,atxHeading:s(De),blockQuote:s(ge),characterEscape:k,characterReference:k,codeFenced:s(se),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(se,o),codeText:s(te,o),codeTextData:k,data:k,codeFlowValue:k,definition:s(Ee),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(we),hardBreakEscape:s(Le),hardBreakTrailing:s(Le),htmlFlow:s(Ne,o),htmlFlowData:k,htmlText:s(Ne,o),htmlTextData:k,image:s(Te),label:o,link:s(qe),listItem:s(Ue),listItemValue:f,listOrdered:s(Qe,d),listUnordered:s(Qe),paragraph:s(Ve),reference:H,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(De),strong:s(Se),thematicBreak:s(It)},exit:{atxHeading:u(),atxHeadingSequence:E,autolink:u(),autolinkEmail:ce,autolinkProtocol:le,blockQuote:u(),characterEscapeValue:D,characterReferenceMarkerHexadecimal:Z,characterReferenceMarkerNumeric:Z,characterReferenceValue:ne,characterReference:ue,codeFenced:u(y),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:D,codeIndented:u(v),codeText:u(F),codeTextData:D,data:D,definition:u(),definitionDestinationString:S,definitionLabelString:w,definitionTitleString:x,emphasis:u(),hardBreakEscape:u(z),hardBreakTrailing:u(z),htmlFlow:u(O),htmlFlowData:D,htmlText:u($),htmlTextData:D,image:u(q),label:K,labelText:G,lineEnding:M,link:u(B),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:Q,resourceDestinationString:L,resourceTitleString:V,resource:X,setextHeading:u(I),setextHeadingLineSequence:A,setextHeadingText:T,strong:u(),thematicBreak:u()}};Zwe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(Re){let Ge={type:"root",children:[]};const ot={stack:[Ge],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},ct=[];let Mt=-1;for(;++Mt<Re.length;)if(Re[Mt][1].type==="listOrdered"||Re[Mt][1].type==="listUnordered")if(Re[Mt][0]==="enter")ct.push(Mt);else{const Nn=ct.pop();Mt=i(Re,Nn,Mt)}for(Mt=-1;++Mt<Re.length;){const Nn=t[Re[Mt][0]];Jwe.call(Nn,Re[Mt][1].type)&&Nn[Re[Mt][1].type].call(Object.assign({sliceSerialize:Re[Mt][2].sliceSerialize},ot),Re[Mt][1])}if(ot.tokenStack.length>0){const Nn=ot.tokenStack[ot.tokenStack.length-1];(Nn[1]||uue).call(ot,void 0,Nn[0])}for(Ge.position={start:l0(Re.length>0?Re[0][1].start:{line:1,column:1,offset:0}),end:l0(Re.length>0?Re[Re.length-2][1].end:{line:1,column:1,offset:0})},Mt=-1;++Mt<t.transforms.length;)Ge=t.transforms[Mt](Ge)||Ge;return Ge}function i(Re,Ge,ot){let ct=Ge-1,Mt=-1,Nn=!1,Rr,xr,Mr,fn;for(;++ct<=ot;){const qn=Re[ct];switch(qn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{qn[0]==="enter"?Mt++:Mt--,fn=void 0;break}case"lineEndingBlank":{qn[0]==="enter"&&(Rr&&!fn&&!Mt&&!Mr&&(Mr=ct),fn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:fn=void 0}if(!Mt&&qn[0]==="enter"&&qn[1].type==="listItemPrefix"||Mt===-1&&qn[0]==="exit"&&(qn[1].type==="listUnordered"||qn[1].type==="listOrdered")){if(Rr){let lr=ct;for(xr=void 0;lr--;){const cr=Re[lr];if(cr[1].type==="lineEnding"||cr[1].type==="lineEndingBlank"){if(cr[0]==="exit")continue;xr&&(Re[xr][1].type="lineEndingBlank",Nn=!0),cr[1].type="lineEnding",xr=lr}else if(!(cr[1].type==="linePrefix"||cr[1].type==="blockQuotePrefix"||cr[1].type==="blockQuotePrefixWhitespace"||cr[1].type==="blockQuoteMarker"||cr[1].type==="listItemIndent"))break}Mr&&(!xr||Mr<xr)&&(Rr._spread=!0),Rr.end=Object.assign({},xr?Re[xr][1].start:qn[1].end),Re.splice(xr||ct,0,["exit",Rr,qn[2]]),ct++,ot++}if(qn[1].type==="listItemPrefix"){const lr={type:"listItem",_spread:!1,start:Object.assign({},qn[1].start),end:void 0};Rr=lr,Re.splice(ct,0,["enter",lr,qn[2]]),ct++,ot++,Mr=void 0,fn=!0}}}return Re[Ge][1]._spread=Nn,ot}function s(Re,Ge){return ot;function ot(ct){a.call(this,Re(ct),ct),Ge&&Ge.call(this,ct)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(Re,Ge,ot){this.stack[this.stack.length-1].children.push(Re),this.stack.push(Re),this.tokenStack.push([Ge,ot]),Re.position={start:l0(Ge.start),end:void 0}}function u(Re){return Ge;function Ge(ot){Re&&Re.call(this,ot),l.call(this,ot)}}function l(Re,Ge){const ot=this.stack.pop(),ct=this.tokenStack.pop();if(ct)ct[0].type!==Re.type&&(Ge?Ge.call(this,Re,ct[0]):(ct[1]||uue).call(this,Re,ct[0]));else throw new Error("Cannot close `"+Re.type+"` ("+kA({start:Re.start,end:Re.end})+"): its not open");ot.position.end=l0(Re.end)}function c(){return LQe(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function f(Re){if(this.data.expectingFirstListItemValue){const Ge=this.stack[this.stack.length-2];Ge.start=Number.parseInt(this.sliceSerialize(Re),10),this.data.expectingFirstListItemValue=void 0}}function h(){const Re=this.resume(),Ge=this.stack[this.stack.length-1];Ge.lang=Re}function p(){const Re=this.resume(),Ge=this.stack[this.stack.length-1];Ge.meta=Re}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const Re=this.resume(),Ge=this.stack[this.stack.length-1];Ge.value=Re.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const Re=this.resume(),Ge=this.stack[this.stack.length-1];Ge.value=Re.replace(/(\r?\n|\r)$/g,"")}function w(Re){const Ge=this.resume(),ot=this.stack[this.stack.length-1];ot.label=Ge,ot.identifier=mx(this.sliceSerialize(Re)).toLowerCase()}function x(){const Re=this.resume(),Ge=this.stack[this.stack.length-1];Ge.title=Re}function S(){const Re=this.resume(),Ge=this.stack[this.stack.length-1];Ge.url=Re}function E(Re){const Ge=this.stack[this.stack.length-1];if(!Ge.depth){const ot=this.sliceSerialize(Re).length;Ge.depth=ot}}function T(){this.data.setextHeadingSlurpLineEnding=!0}function A(Re){const Ge=this.stack[this.stack.length-1];Ge.depth=this.sliceSerialize(Re).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function k(Re){const ot=this.stack[this.stack.length-1].children;let ct=ot[ot.length-1];(!ct||ct.type!=="text")&&(ct=it(),ct.position={start:l0(Re.start),end:void 0},ot.push(ct)),this.stack.push(ct)}function D(Re){const Ge=this.stack.pop();Ge.value+=this.sliceSerialize(Re),Ge.position.end=l0(Re.end)}function M(Re){const Ge=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ot=Ge.children[Ge.children.length-1];ot.position.end=l0(Re.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Ge.type)&&(k.call(this,Re),D.call(this,Re))}function z(){this.data.atHardBreak=!0}function O(){const Re=this.resume(),Ge=this.stack[this.stack.length-1];Ge.value=Re}function $(){const Re=this.resume(),Ge=this.stack[this.stack.length-1];Ge.value=Re}function F(){const Re=this.resume(),Ge=this.stack[this.stack.length-1];Ge.value=Re}function B(){const Re=this.stack[this.stack.length-1];if(this.data.inReference){const Ge=this.data.referenceType||"shortcut";Re.type+="Reference",Re.referenceType=Ge,delete Re.url,delete Re.title}else delete Re.identifier,delete Re.label;this.data.referenceType=void 0}function q(){const Re=this.stack[this.stack.length-1];if(this.data.inReference){const Ge=this.data.referenceType||"shortcut";Re.type+="Reference",Re.referenceType=Ge,delete Re.url,delete Re.title}else delete Re.identifier,delete Re.label;this.data.referenceType=void 0}function G(Re){const Ge=this.sliceSerialize(Re),ot=this.stack[this.stack.length-2];ot.label=$Ze(Ge),ot.identifier=mx(Ge).toLowerCase()}function K(){const Re=this.stack[this.stack.length-1],Ge=this.resume(),ot=this.stack[this.stack.length-1];if(this.data.inReference=!0,ot.type==="link"){const ct=Re.children;ot.children=ct}else ot.alt=Ge}function L(){const Re=this.resume(),Ge=this.stack[this.stack.length-1];Ge.url=Re}function V(){const Re=this.resume(),Ge=this.stack[this.stack.length-1];Ge.title=Re}function X(){this.data.inReference=void 0}function H(){this.data.referenceType="collapsed"}function Q(Re){const Ge=this.resume(),ot=this.stack[this.stack.length-1];ot.label=Ge,ot.identifier=mx(this.sliceSerialize(Re)).toLowerCase(),this.data.referenceType="full"}function Z(Re){this.data.characterReferenceType=Re.type}function ne(Re){const Ge=this.sliceSerialize(Re),ot=this.data.characterReferenceType;let ct;ot?(ct=Uwe(Ge,ot==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ct=HY(Ge);const Mt=this.stack[this.stack.length-1];Mt.value+=ct}function ue(Re){const Ge=this.stack.pop();Ge.position.end=l0(Re.end)}function le(Re){D.call(this,Re);const Ge=this.stack[this.stack.length-1];Ge.url=this.sliceSerialize(Re)}function ce(Re){D.call(this,Re);const Ge=this.stack[this.stack.length-1];Ge.url="mailto:"+this.sliceSerialize(Re)}function ge(){return{type:"blockquote",children:[]}}function se(){return{type:"code",lang:null,meta:null,value:""}}function te(){return{type:"inlineCode",value:""}}function Ee(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function we(){return{type:"emphasis",children:[]}}function De(){return{type:"heading",depth:0,children:[]}}function Le(){return{type:"break"}}function Ne(){return{type:"html",value:""}}function Te(){return{type:"image",title:null,url:"",alt:null}}function qe(){return{type:"link",title:null,url:"",children:[]}}function Qe(Re){return{type:"list",ordered:Re.type==="listOrdered",start:null,spread:Re._spread,children:[]}}function Ue(Re){return{type:"listItem",spread:Re._spread,checked:null,children:[]}}function Ve(){return{type:"paragraph",children:[]}}function Se(){return{type:"strong",children:[]}}function it(){return{type:"text",value:""}}function It(){return{type:"thematicBreak"}}}function l0(e){return{line:e.line,column:e.column,offset:e.offset}}function Zwe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Zwe(e,r):BZe(e,r)}}function BZe(e,t){let n;for(n in t)if(Jwe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function uue(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+kA({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+kA({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+kA({start:t.start,end:t.end})+") is still open")}function zZe(e){const t=this;t.parser=n;function n(r){return FZe(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function UZe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function VZe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function HZe(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function qZe(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function WZe(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function GZe(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=fS(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function YZe(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function KZe(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function exe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function XZe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return exe(e,t);const i={src:fS(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function QZe(e,t){const n={src:fS(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function JZe(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function ZZe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return exe(e,t);const i={href:fS(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function eet(e,t){const n={href:fS(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function tet(e,t,n){const r=e.all(t),i=n?net(n):txe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let d;c&&c.type==="element"&&c.tagName==="p"?d=c:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function net(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=txe(n[r])}return t}function txe(e){const t=e.spread;return t??e.children.length>1}function ret(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function iet(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function set(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function oet(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function aet(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Mp(t.children[1]),u=mF(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function uet(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const d=t.children[u],f={},h=o?o[u]:void 0;h&&(f.align=h);let p={type:"element",tagName:s,properties:f,children:[]};d&&(p.children=e.all(d),e.patch(d,p),p=e.applyData(d,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function cet(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const lue=9,cue=32;function det(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(due(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(due(t.slice(i),i>0,!1)),s.join("")}function due(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===lue||s===cue;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===lue||s===cue;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function fet(e,t){const n={type:"text",value:det(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function het(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const pet={blockquote:UZe,break:VZe,code:HZe,delete:qZe,emphasis:WZe,footnoteReference:GZe,heading:YZe,html:KZe,imageReference:XZe,image:QZe,inlineCode:JZe,linkReference:ZZe,link:eet,listItem:tet,list:ret,paragraph:iet,root:set,strong:oet,table:aet,tableCell:cet,tableRow:uet,text:fet,thematicBreak:het,toml:VP,yaml:VP,definition:VP,footnoteDefinition:VP};function VP(){}const nxe=-1,yF=0,EM=1,SM=2,GY=3,YY=4,KY=5,XY=6,rxe=7,ixe=8,fue=typeof self=="object"?self:globalThis,met=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case yF:case nxe:return n(o,i);case EM:{const a=n([],i);for(const u of o)a.push(r(u));return a}case SM:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case GY:return n(new Date(o),i);case YY:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case KY:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case XY:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case rxe:{const{name:a,message:u}=o;return n(new fue[a](u),i)}case ixe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new fue[s](o),i)};return r},hue=e=>met(new Map,e)(0),uw="",{toString:get}={},{keys:yet}=Object,zT=e=>{const t=typeof e;if(t!=="object"||!e)return[yF,t];const n=get.call(e).slice(8,-1);switch(n){case"Array":return[EM,uw];case"Object":return[SM,uw];case"Date":return[GY,uw];case"RegExp":return[YY,uw];case"Map":return[KY,uw];case"Set":return[XY,uw]}return n.includes("Array")?[EM,n]:n.includes("Error")?[rxe,n]:[SM,n]},HP=([e,t])=>e===yF&&(t==="function"||t==="symbol"),vet=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=zT(o);switch(a){case yF:{let c=o;switch(u){case"bigint":a=ixe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([nxe],o)}return i([a,c],o)}case EM:{if(u)return i([u,[...o]],o);const c=[],d=i([a,c],o);for(const f of o)c.push(s(f));return d}case SM:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],d=i([a,c],o);for(const f of yet(o))(e||!HP(zT(o[f])))&&c.push([s(f),s(o[f])]);return d}case GY:return i([a,o.toISOString()],o);case YY:{const{source:c,flags:d}=o;return i([a,{source:c,flags:d}],o)}case KY:{const c=[],d=i([a,c],o);for(const[f,h]of o)(e||!(HP(zT(f))||HP(zT(h))))&&c.push([s(f),s(h)]);return d}case XY:{const c=[],d=i([a,c],o);for(const f of o)(e||!HP(zT(f)))&&c.push(s(f));return d}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},pue=(e,{json:t,lossy:n}={})=>{const r=[];return vet(!(t||n),!!t,new Map,r)(e),r},Yx=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?hue(pue(e,t)):structuredClone(e):(e,t)=>hue(pue(e,t));function bet(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function _et(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function wet(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||bet,r=e.options.footnoteBackLabel||_et,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),d=String(l.identifier).toUpperCase(),f=fS(d.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(d);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let w=typeof n=="string"?n:n(u,h);typeof w=="string"&&(w={type:"text",value:w}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+f+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(w)?w:[w]})}const y=c[c.length-1];if(y&&y.type==="element"&&y.tagName==="p"){const w=y.children[y.children.length-1];w&&w.type==="text"?w.value+=" ":y.children.push({type:"text",value:" "}),y.children.push(...p)}else c.push(...p);const v={type:"element",tagName:"li",properties:{id:t+"fn-"+f},children:e.wrap(c,!0)};e.patch(l,v),a.push(v)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Yx(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const sxe=function(e){if(e==null)return Cet;if(typeof e=="function")return vF(e);if(typeof e=="object")return Array.isArray(e)?xet(e):Eet(e);if(typeof e=="string")return Tet(e);throw new Error("Expected function, string, or object as test")};function xet(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=sxe(e[n]);return vF(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function Eet(e){const t=e;return vF(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function Tet(e){return vF(t);function t(n){return n&&n.type===e}}function vF(e){return t;function t(n,r,i){return!!(Aet(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Cet(){return!0}function Aet(e){return e!==null&&typeof e=="object"&&"type"in e}const oxe=[],Iet=!0,mue=!1,Ret="skip";function ket(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=sxe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const d=u&&typeof u=="object"?u:{};if(typeof d.type=="string"){const h=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return f;function f(){let h=oxe,p,m,y;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=Pet(n(u,c)),h[0]===mue))return h;if("children"in u&&u.children){const v=u;if(v.children&&h[0]!==Ret)for(m=(r?v.children.length:-1)+o,y=c.concat(v);m>-1&&m<v.children.length;){const w=v.children[m];if(p=a(w,m,y)(),p[0]===mue)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function Pet(e){return Array.isArray(e)?e:typeof e=="number"?[Iet,e]:e==null?oxe:[e]}function QY(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),ket(e,s,a,i);function a(u,l){const c=l[l.length-1],d=c?c.children.indexOf(u):void 0;return o(u,d,c)}}const h7={}.hasOwnProperty,Net={};function Oet(e,t){const n=t||Net,r=new Map,i=new Map,s=new Map,o={...pet,...n.handlers},a={all:l,applyData:Met,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:Det,wrap:Let};return QY(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const d=c.type==="definition"?r:i,f=String(c.identifier).toUpperCase();d.has(f)||d.set(f,c)}}),a;function u(c,d){const f=c.type,h=a.handlers[f];if(h7.call(a.handlers,f)&&h)return h(a,c,d);if(a.options.passThrough&&a.options.passThrough.includes(f)){if("children"in c){const{children:m,...y}=c,v=Yx(y);return v.children=a.all(c),v}return Yx(c)}return(a.options.unknownHandler||$et)(a,c,d)}function l(c){const d=[];if("children"in c){const f=c.children;let h=-1;for(;++h<f.length;){const p=a.one(f[h],c);if(p){if(h&&f[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=gue(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=gue(m.value))}Array.isArray(p)?d.push(...p):d.push(p)}}}return d}}function Det(e,t){e.position&&(t.position=hQe(e))}function Met(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Yx(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function $et(e,t){const n=t.data||{},r="value"in t&&!(h7.call(n,"hProperties")||h7.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Let(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function gue(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function yue(e,t){const n=Oet(e,t),r=n.one(e,void 0),i=wet(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Fet(e,t){return e&&"run"in e?async function(n,r){const i=yue(n,{file:r,...t});await e.run(i,r)}:function(n,r){return yue(n,{file:r,...t||e})}}function vue(e){if(e)throw e}var sB,bue;function jet(){if(bue)return sB;bue=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(l){return typeof Array.isArray=="function"?Array.isArray(l):t.call(l)==="[object Array]"},s=function(l){if(!l||t.call(l)!=="[object Object]")return!1;var c=e.call(l,"constructor"),d=l.constructor&&l.constructor.prototype&&e.call(l.constructor.prototype,"isPrototypeOf");if(l.constructor&&!c&&!d)return!1;var f;for(f in l);return typeof f>"u"||e.call(l,f)},o=function(l,c){n&&c.name==="__proto__"?n(l,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):l[c.name]=c.newValue},a=function(l,c){if(c==="__proto__")if(e.call(l,c)){if(r)return r(l,c).value}else return;return l[c]};return sB=function u(){var l,c,d,f,h,p,m=arguments[0],y=1,v=arguments.length,w=!1;for(typeof m=="boolean"&&(w=m,m=arguments[1]||{},y=2),(m==null||typeof m!="object"&&typeof m!="function")&&(m={});y<v;++y)if(l=arguments[y],l!=null)for(c in l)d=a(m,c),f=a(l,c),m!==f&&(w&&f&&(s(f)||(h=i(f)))?(h?(h=!1,p=d&&i(d)?d:[]):p=d&&s(d)?d:{},o(m,{name:c,newValue:u(w,p,f)})):typeof f<"u"&&o(m,{name:c,newValue:f}));return m},sB}var Bet=jet();const oB=su(Bet);function p7(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function zet(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let d=-1;if(u){o(u);return}for(;++d<i.length;)(l[d]===null||l[d]===void 0)&&(l[d]=i[d]);i=l,c?Uet(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Uet(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Rh={basename:Vet,dirname:Het,extname:qet,join:Wet,sep:"/"};function Vet(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');oR(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Het(e){if(oR(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function qet(e){oR(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Wet(...e){let t=-1,n;for(;++t<e.length;)oR(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Get(n)}function Get(e){oR(e);const t=e.codePointAt(0)===47;let n=Yet(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Yet(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function oR(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Ket={cwd:Xet};function Xet(){return"/"}function m7(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Qet(e){if(typeof e=="string")e=new URL(e);else if(!m7(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Jet(e)}function Jet(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const aB=["history","path","basename","stem","extname","dirname"];class axe{constructor(t){let n;t?m7(t)?n={path:t}:typeof t=="string"||Zet(t)?n={value:t}:n=t:n={},this.cwd=Ket.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<aB.length;){const s=aB[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)aB.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Rh.basename(this.path):void 0}set basename(t){lB(t,"basename"),uB(t,"basename"),this.path=Rh.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Rh.dirname(this.path):void 0}set dirname(t){_ue(this.basename,"dirname"),this.path=Rh.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Rh.extname(this.path):void 0}set extname(t){if(uB(t,"extname"),_ue(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Rh.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){m7(t)&&(t=Qet(t)),lB(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Rh.basename(this.path,this.extname):void 0}set stem(t){lB(t,"stem"),uB(t,"stem"),this.path=Rh.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new au(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function uB(e,t){if(e&&e.includes(Rh.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Rh.sep+"`")}function lB(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function _ue(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Zet(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const ett=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},ttt={}.hasOwnProperty;class JY extends ett{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=zet()}copy(){const t=new JY;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(oB(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(fB("data",this.frozen),this.namespace[t]=n,this):ttt.call(this.namespace,t)&&this.namespace[t]||void 0:t?(fB("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=qP(t),r=this.parser||this.Parser;return cB("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),cB("process",this.parser||this.Parser),dB("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=qP(t),u=r.parse(a);r.run(u,a,function(c,d,f){if(c||!d||!f)return l(c);const h=d,p=r.stringify(h,f);itt(p)?f.value=p:f.result=p,l(c,f)});function l(c,d){c||!d?o(c):s?s(d):n(void 0,d)}}}processSync(t){let n=!1,r;return this.freeze(),cB("processSync",this.parser||this.Parser),dB("processSync",this.compiler||this.Compiler),this.process(t,i),xue("processSync","process",n),r;function i(s,o){n=!0,vue(s),r=o}}run(t,n,r){wue(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=qP(n);i.run(t,u,l);function l(c,d,f){const h=d||t;c?a(c):o?o(h):r(void 0,h,f)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),xue("runSync","run",r),i;function s(o,a){vue(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=qP(n),i=this.compiler||this.Compiler;return dB("stringify",i),wue(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(fB("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...d]=l;u(c,d)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=oB(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const d=l[c];s(d)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let d=-1,f=-1;for(;++d<r.length;)if(r[d][0]===l){f=d;break}if(f===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[f][1];p7(m)&&p7(h)&&(h=oB(!0,m,h)),r[f]=[l,h,...p]}}}}const ntt=new JY().freeze();function cB(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function dB(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function fB(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function wue(e){if(!p7(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function xue(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function qP(e){return rtt(e)?e:new axe(e)}function rtt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function itt(e){return typeof e=="string"||stt(e)}function stt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const ott="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Eue=[],Sue={allowDangerousHtml:!0},att=/^(https?|ircs?|mailto|xmpp)$/i,utt=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function ltt(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||Eue,u=e.remarkPlugins||Eue,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Sue}:Sue,c=e.skipHtml,d=e.unwrapDisallowed,f=e.urlTransform||ctt,h=ntt().use(zZe).use(u).use(Fet,l).use(a),p=new axe;typeof r=="string"&&(p.value=r);for(const w of utt)Object.hasOwn(e,w.from)&&(""+w.from+(w.to?"use `"+w.to+"` instead":"remove it")+ott+w.id,void 0);const m=h.parse(p);let y=h.runSync(m,p);return i&&(y={type:"element",tagName:"div",properties:{className:i},children:y.type==="root"?y.children:[y]}),QY(y,v),bQe(y,{Fragment:_.Fragment,components:s,ignoreInvalidStyle:!0,jsx:_.jsx,jsxs:_.jsxs,passKeys:!0,passNode:!0});function v(w,x,S){if(w.type==="raw"&&S&&typeof x=="number")return c?S.children.splice(x,1):S.children[x]={type:"text",value:w.value},x;if(w.type==="element"){let E;for(E in nB)if(Object.hasOwn(nB,E)&&Object.hasOwn(w.properties,E)){const T=w.properties[E],A=nB[E];(A===null||A.includes(w.tagName))&&(w.properties[E]=f(String(T||""),E,w))}}if(w.type==="element"){let E=t?!t.includes(w.tagName):o?o.includes(w.tagName):!1;if(!E&&n&&typeof x=="number"&&(E=!n(w,x,S)),E&&S&&typeof x=="number")return d&&w.children?S.children.splice(x,1,...w.children):S.children.splice(x,1),x}}}function ctt(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||att.test(e.slice(0,t))?e:""}const Tue=/[#.]/g;function dtt(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){Tue.lastIndex=i;const a=Tue.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const ftt=new Set(["button","menu","reset","submit"]),g7={}.hasOwnProperty;function uxe(e,t,n){const r=n&&gtt(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=dtt(s,t),l.tagName=l.tagName.toLowerCase(),r&&g7.call(r,l.tagName)&&(l.tagName=r[l.tagName]),htt(o,l.tagName)){let c;for(c in o)g7.call(o,c)&&ptt(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)y7(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function htt(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?ftt.has(e.type.toLowerCase()):!("value"in e)}function ptt(e,t,n,r){const i=pF(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=qae(r):i.commaSeparated?o=Bae(r):i.commaOrSpaceSeparated?o=qae(Bae(r).join(" ")):o=Cue(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?mtt(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=Cue(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function y7(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)y7(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?y7(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Cue(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||w2(n)===w2(t)))return!0}return n}function mtt(e){const t=[];let n;for(n in e)g7.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function gtt(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const ytt=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],vtt=uxe(sR,"div"),btt=uxe(lv,"g",ytt),hB=/\r?\n|\r/g;function _tt(e){const t=String(e),n=[];for(hB.lastIndex=0;hB.test(t);)n.push(hB.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const M1={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},lxe={}.hasOwnProperty,wtt=Object.prototype;function xtt(e,t){const n=t||{};return ZY({file:n.file||void 0,location:!1,schema:n.space==="svg"?lv:sR,verbose:n.verbose||!1},e)}function ZY(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},oD(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:cxe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=_tt(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},oD(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},oD(e,r,n),n}default:return n=Ett(e,t),n}}function cxe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=ZY(e,t[n]);r.push(i)}return r}function Ett(e,t){const n=e.schema;e.schema=t.namespaceURI===M1.svg?lv:sR;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;lxe.call(wtt,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?btt:vtt)(t.tagName,i,cxe(e,t.childNodes));if(oD(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&Qw(u.startTag),c=u&&u.endTag&&Qw(u.endTag),d=ZY(e,a.content);l&&c&&e.file&&(d.position={start:l.end,end:c.start}),o.content=d}return e.schema=n,o}function oD(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=Stt(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function Stt(e,t,n){const r=Qw(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)lxe.call(n.attrs,o)&&(s[pF(e.schema,o).property]=Qw(n.attrs[o]));n.startTag;const a=Qw(n.startTag),u=n.endTag?Qw(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function Qw(e){const t=Aue({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=Aue({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function Aue(e){return e.line&&e.column?e:void 0}const Iue={}.hasOwnProperty;function dxe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&Iue.call(i,e)){const u=String(i[e]);o=Iue.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Ttt={},Ctt={}.hasOwnProperty,fxe=dxe("type",{handlers:{root:Itt,element:Ott,text:Ptt,comment:Ntt,doctype:ktt}});function Att(e,t){const r=(t||Ttt).space;return fxe(e,r==="svg"?lv:sR)}function Itt(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=eK(e.children,n,t),hS(e,n),n}function Rtt(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=eK(e.children,n,t),hS(e,n),n}function ktt(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return hS(e,t),t}function Ptt(e){const t={nodeName:"#text",value:e.value,parentNode:null};return hS(e,t),t}function Ntt(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return hS(e,t),t}function Ott(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=lv);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&Ctt.call(e.properties,s)){const u=Dtt(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:M1[o],childNodes:[],parentNode:null};return a.childNodes=eK(e.children,a,r),hS(e,a),e.tagName==="template"&&e.content&&(a.content=Rtt(e.content,r)),a}function Dtt(e,t,n){const r=pF(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?Cwe(n):Mwe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=M1[r.space]}return i}function eK(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=fxe(e[r],n);s.parentNode=t,i.push(s)}return i}function hS(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const Mtt=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],$tt=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),rs="";var oe;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(oe=oe||(oe={}));const il={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function hxe(e){return e>=55296&&e<=57343}function Ltt(e){return e>=56320&&e<=57343}function Ftt(e,t){return(e-55296)*1024+9216+t}function pxe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function mxe(e){return e>=64976&&e<=65007||$tt.has(e)}var Je;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Je=Je||(Je={}));const jtt=65536;class Btt{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=jtt,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(Ltt(n))return this.pos++,this._addGap(),Ftt(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,oe.EOF;return this._err(Je.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,oe.EOF;const r=this.html.charCodeAt(n);return r===oe.CARRIAGE_RETURN?oe.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,oe.EOF;let t=this.html.charCodeAt(this.pos);return t===oe.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,oe.LINE_FEED):t===oe.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,hxe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===oe.LINE_FEED||t===oe.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){pxe(t)?this._err(Je.controlCharacterInInputStream):mxe(t)&&this._err(Je.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var hr;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(hr=hr||(hr={}));function gxe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const y0=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),ztt=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var pB;const Utt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Vtt=(pB=String.fromCodePoint)!==null&&pB!==void 0?pB:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Htt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Utt.get(e))!==null&&t!==void 0?t:e}var qo;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(qo||(qo={}));const qtt=32;var Gh;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Gh||(Gh={}));function v7(e){return e>=qo.ZERO&&e<=qo.NINE}function Wtt(e){return e>=qo.UPPER_A&&e<=qo.UPPER_F||e>=qo.LOWER_A&&e<=qo.LOWER_F}function Gtt(e){return e>=qo.UPPER_A&&e<=qo.UPPER_Z||e>=qo.LOWER_A&&e<=qo.LOWER_Z||v7(e)}function Ytt(e){return e===qo.EQUALS||Gtt(e)}var Uo;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Uo||(Uo={}));var T1;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(T1||(T1={}));class Ktt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Uo.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=T1.Strict}startEntity(t){this.decodeMode=t,this.state=Uo.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Uo.EntityStart:return t.charCodeAt(n)===qo.NUM?(this.state=Uo.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Uo.NamedEntity,this.stateNamedEntity(t,n));case Uo.NumericStart:return this.stateNumericStart(t,n);case Uo.NumericDecimal:return this.stateNumericDecimal(t,n);case Uo.NumericHex:return this.stateNumericHex(t,n);case Uo.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|qtt)===qo.LOWER_X?(this.state=Uo.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Uo.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(v7(i)||Wtt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(v7(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===qo.SEMI)this.consumed+=1;else if(this.decodeMode===T1.Strict)return 0;return this.emitCodePoint(Htt(this.result),this.consumed),this.errors&&(t!==qo.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Gh.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=vxe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===T1.Attribute&&(s===0||Ytt(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Gh.VALUE_LENGTH)>>14,s!==0){if(o===qo.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==T1.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&Gh.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~Gh.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Uo.NamedEntity:return this.result!==0&&(this.decodeMode!==T1.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Uo.NumericDecimal:return this.emitNumericEntity(0,2);case Uo.NumericHex:return this.emitNumericEntity(0,3);case Uo.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Uo.EntityStart:return 0}}}function yxe(e){let t="";const n=new Ktt(e,r=>t+=Vtt(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function vxe(e,t,n,r){const i=(t&Gh.BRANCH_LENGTH)>>7,s=t&Gh.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}yxe(y0);yxe(ztt);var at;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(at=at||(at={}));var iy;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(iy=iy||(iy={}));var tc;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(tc=tc||(tc={}));var Be;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Be=Be||(Be={}));var j;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(j=j||(j={}));const Xtt=new Map([[Be.A,j.A],[Be.ADDRESS,j.ADDRESS],[Be.ANNOTATION_XML,j.ANNOTATION_XML],[Be.APPLET,j.APPLET],[Be.AREA,j.AREA],[Be.ARTICLE,j.ARTICLE],[Be.ASIDE,j.ASIDE],[Be.B,j.B],[Be.BASE,j.BASE],[Be.BASEFONT,j.BASEFONT],[Be.BGSOUND,j.BGSOUND],[Be.BIG,j.BIG],[Be.BLOCKQUOTE,j.BLOCKQUOTE],[Be.BODY,j.BODY],[Be.BR,j.BR],[Be.BUTTON,j.BUTTON],[Be.CAPTION,j.CAPTION],[Be.CENTER,j.CENTER],[Be.CODE,j.CODE],[Be.COL,j.COL],[Be.COLGROUP,j.COLGROUP],[Be.DD,j.DD],[Be.DESC,j.DESC],[Be.DETAILS,j.DETAILS],[Be.DIALOG,j.DIALOG],[Be.DIR,j.DIR],[Be.DIV,j.DIV],[Be.DL,j.DL],[Be.DT,j.DT],[Be.EM,j.EM],[Be.EMBED,j.EMBED],[Be.FIELDSET,j.FIELDSET],[Be.FIGCAPTION,j.FIGCAPTION],[Be.FIGURE,j.FIGURE],[Be.FONT,j.FONT],[Be.FOOTER,j.FOOTER],[Be.FOREIGN_OBJECT,j.FOREIGN_OBJECT],[Be.FORM,j.FORM],[Be.FRAME,j.FRAME],[Be.FRAMESET,j.FRAMESET],[Be.H1,j.H1],[Be.H2,j.H2],[Be.H3,j.H3],[Be.H4,j.H4],[Be.H5,j.H5],[Be.H6,j.H6],[Be.HEAD,j.HEAD],[Be.HEADER,j.HEADER],[Be.HGROUP,j.HGROUP],[Be.HR,j.HR],[Be.HTML,j.HTML],[Be.I,j.I],[Be.IMG,j.IMG],[Be.IMAGE,j.IMAGE],[Be.INPUT,j.INPUT],[Be.IFRAME,j.IFRAME],[Be.KEYGEN,j.KEYGEN],[Be.LABEL,j.LABEL],[Be.LI,j.LI],[Be.LINK,j.LINK],[Be.LISTING,j.LISTING],[Be.MAIN,j.MAIN],[Be.MALIGNMARK,j.MALIGNMARK],[Be.MARQUEE,j.MARQUEE],[Be.MATH,j.MATH],[Be.MENU,j.MENU],[Be.META,j.META],[Be.MGLYPH,j.MGLYPH],[Be.MI,j.MI],[Be.MO,j.MO],[Be.MN,j.MN],[Be.MS,j.MS],[Be.MTEXT,j.MTEXT],[Be.NAV,j.NAV],[Be.NOBR,j.NOBR],[Be.NOFRAMES,j.NOFRAMES],[Be.NOEMBED,j.NOEMBED],[Be.NOSCRIPT,j.NOSCRIPT],[Be.OBJECT,j.OBJECT],[Be.OL,j.OL],[Be.OPTGROUP,j.OPTGROUP],[Be.OPTION,j.OPTION],[Be.P,j.P],[Be.PARAM,j.PARAM],[Be.PLAINTEXT,j.PLAINTEXT],[Be.PRE,j.PRE],[Be.RB,j.RB],[Be.RP,j.RP],[Be.RT,j.RT],[Be.RTC,j.RTC],[Be.RUBY,j.RUBY],[Be.S,j.S],[Be.SCRIPT,j.SCRIPT],[Be.SECTION,j.SECTION],[Be.SELECT,j.SELECT],[Be.SOURCE,j.SOURCE],[Be.SMALL,j.SMALL],[Be.SPAN,j.SPAN],[Be.STRIKE,j.STRIKE],[Be.STRONG,j.STRONG],[Be.STYLE,j.STYLE],[Be.SUB,j.SUB],[Be.SUMMARY,j.SUMMARY],[Be.SUP,j.SUP],[Be.TABLE,j.TABLE],[Be.TBODY,j.TBODY],[Be.TEMPLATE,j.TEMPLATE],[Be.TEXTAREA,j.TEXTAREA],[Be.TFOOT,j.TFOOT],[Be.TD,j.TD],[Be.TH,j.TH],[Be.THEAD,j.THEAD],[Be.TITLE,j.TITLE],[Be.TR,j.TR],[Be.TRACK,j.TRACK],[Be.TT,j.TT],[Be.U,j.U],[Be.UL,j.UL],[Be.SVG,j.SVG],[Be.VAR,j.VAR],[Be.WBR,j.WBR],[Be.XMP,j.XMP]]);function pS(e){var t;return(t=Xtt.get(e))!==null&&t!==void 0?t:j.UNKNOWN}const _t=j,Qtt={[at.HTML]:new Set([_t.ADDRESS,_t.APPLET,_t.AREA,_t.ARTICLE,_t.ASIDE,_t.BASE,_t.BASEFONT,_t.BGSOUND,_t.BLOCKQUOTE,_t.BODY,_t.BR,_t.BUTTON,_t.CAPTION,_t.CENTER,_t.COL,_t.COLGROUP,_t.DD,_t.DETAILS,_t.DIR,_t.DIV,_t.DL,_t.DT,_t.EMBED,_t.FIELDSET,_t.FIGCAPTION,_t.FIGURE,_t.FOOTER,_t.FORM,_t.FRAME,_t.FRAMESET,_t.H1,_t.H2,_t.H3,_t.H4,_t.H5,_t.H6,_t.HEAD,_t.HEADER,_t.HGROUP,_t.HR,_t.HTML,_t.IFRAME,_t.IMG,_t.INPUT,_t.LI,_t.LINK,_t.LISTING,_t.MAIN,_t.MARQUEE,_t.MENU,_t.META,_t.NAV,_t.NOEMBED,_t.NOFRAMES,_t.NOSCRIPT,_t.OBJECT,_t.OL,_t.P,_t.PARAM,_t.PLAINTEXT,_t.PRE,_t.SCRIPT,_t.SECTION,_t.SELECT,_t.SOURCE,_t.STYLE,_t.SUMMARY,_t.TABLE,_t.TBODY,_t.TD,_t.TEMPLATE,_t.TEXTAREA,_t.TFOOT,_t.TH,_t.THEAD,_t.TITLE,_t.TR,_t.TRACK,_t.UL,_t.WBR,_t.XMP]),[at.MATHML]:new Set([_t.MI,_t.MO,_t.MN,_t.MS,_t.MTEXT,_t.ANNOTATION_XML]),[at.SVG]:new Set([_t.TITLE,_t.FOREIGN_OBJECT,_t.DESC]),[at.XLINK]:new Set,[at.XML]:new Set,[at.XMLNS]:new Set};function bxe(e){return e===_t.H1||e===_t.H2||e===_t.H3||e===_t.H4||e===_t.H5||e===_t.H6}Be.STYLE,Be.SCRIPT,Be.XMP,Be.IFRAME,Be.NOEMBED,Be.NOFRAMES,Be.PLAINTEXT;const Jtt=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var fe;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(fe||(fe={}));const Bs={DATA:fe.DATA,RCDATA:fe.RCDATA,RAWTEXT:fe.RAWTEXT,SCRIPT_DATA:fe.SCRIPT_DATA,PLAINTEXT:fe.PLAINTEXT,CDATA_SECTION:fe.CDATA_SECTION};function NA(e){return e>=oe.DIGIT_0&&e<=oe.DIGIT_9}function DC(e){return e>=oe.LATIN_CAPITAL_A&&e<=oe.LATIN_CAPITAL_Z}function Ztt(e){return e>=oe.LATIN_SMALL_A&&e<=oe.LATIN_SMALL_Z}function v0(e){return Ztt(e)||DC(e)}function b7(e){return v0(e)||NA(e)}function _xe(e){return e>=oe.LATIN_CAPITAL_A&&e<=oe.LATIN_CAPITAL_F}function wxe(e){return e>=oe.LATIN_SMALL_A&&e<=oe.LATIN_SMALL_F}function ent(e){return NA(e)||_xe(e)||wxe(e)}function WP(e){return e+32}function xxe(e){return e===oe.SPACE||e===oe.LINE_FEED||e===oe.TABULATION||e===oe.FORM_FEED}function tnt(e){return e===oe.EQUALS_SIGN||b7(e)}function Rue(e){return xxe(e)||e===oe.SOLIDUS||e===oe.GREATER_THAN_SIGN}class nnt{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=fe.DATA,this.returnState=fe.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Btt(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:hr.START_TAG,tagName:"",tagID:j.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:hr.END_TAG,tagName:"",tagID:j.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:hr.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:hr.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(gxe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Je.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=pS(t.tagName),t.type===hr.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Je.endTagWithAttributes),t.selfClosing&&this._err(Je.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case hr.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case hr.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case hr.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:hr.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=xxe(t)?hr.WHITESPACE_CHARACTER:t===oe.NULL?hr.NULL_CHARACTER:hr.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(hr.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=y0[0];s>=0&&(s=vxe(y0,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=y0[s];const a=o&Gh.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==oe.SEMICOLON&&this._isCharacterReferenceInAttribute()&&tnt(this.preprocessor.peek(1))?(n=[oe.AMPERSAND],s+=u):(n=u===0?[y0[s]&~Gh.VALUE_LENGTH]:u===1?[y0[++s]]:[y0[++s],y0[++s]],r=0,i=t!==oe.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Je.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===fe.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===fe.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===fe.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case fe.DATA:{this._stateData(t);break}case fe.RCDATA:{this._stateRcdata(t);break}case fe.RAWTEXT:{this._stateRawtext(t);break}case fe.SCRIPT_DATA:{this._stateScriptData(t);break}case fe.PLAINTEXT:{this._statePlaintext(t);break}case fe.TAG_OPEN:{this._stateTagOpen(t);break}case fe.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case fe.TAG_NAME:{this._stateTagName(t);break}case fe.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case fe.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case fe.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case fe.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case fe.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case fe.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case fe.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case fe.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case fe.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case fe.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case fe.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case fe.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case fe.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case fe.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case fe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case fe.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case fe.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case fe.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case fe.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case fe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case fe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case fe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case fe.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case fe.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case fe.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case fe.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case fe.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case fe.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case fe.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case fe.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case fe.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case fe.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case fe.BOGUS_COMMENT:{this._stateBogusComment(t);break}case fe.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case fe.COMMENT_START:{this._stateCommentStart(t);break}case fe.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case fe.COMMENT:{this._stateComment(t);break}case fe.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case fe.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case fe.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case fe.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case fe.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case fe.COMMENT_END:{this._stateCommentEnd(t);break}case fe.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case fe.DOCTYPE:{this._stateDoctype(t);break}case fe.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case fe.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case fe.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case fe.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case fe.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case fe.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case fe.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case fe.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case fe.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case fe.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case fe.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case fe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case fe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case fe.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case fe.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case fe.CDATA_SECTION:{this._stateCdataSection(t);break}case fe.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case fe.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case fe.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case fe.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case fe.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case fe.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case fe.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case fe.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case fe.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case fe.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case oe.LESS_THAN_SIGN:{this.state=fe.TAG_OPEN;break}case oe.AMPERSAND:{this.returnState=fe.DATA,this.state=fe.CHARACTER_REFERENCE;break}case oe.NULL:{this._err(Je.unexpectedNullCharacter),this._emitCodePoint(t);break}case oe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case oe.AMPERSAND:{this.returnState=fe.RCDATA,this.state=fe.CHARACTER_REFERENCE;break}case oe.LESS_THAN_SIGN:{this.state=fe.RCDATA_LESS_THAN_SIGN;break}case oe.NULL:{this._err(Je.unexpectedNullCharacter),this._emitChars(rs);break}case oe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case oe.LESS_THAN_SIGN:{this.state=fe.RAWTEXT_LESS_THAN_SIGN;break}case oe.NULL:{this._err(Je.unexpectedNullCharacter),this._emitChars(rs);break}case oe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case oe.LESS_THAN_SIGN:{this.state=fe.SCRIPT_DATA_LESS_THAN_SIGN;break}case oe.NULL:{this._err(Je.unexpectedNullCharacter),this._emitChars(rs);break}case oe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case oe.NULL:{this._err(Je.unexpectedNullCharacter),this._emitChars(rs);break}case oe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(v0(t))this._createStartTagToken(),this.state=fe.TAG_NAME,this._stateTagName(t);else switch(t){case oe.EXCLAMATION_MARK:{this.state=fe.MARKUP_DECLARATION_OPEN;break}case oe.SOLIDUS:{this.state=fe.END_TAG_OPEN;break}case oe.QUESTION_MARK:{this._err(Je.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=fe.BOGUS_COMMENT,this._stateBogusComment(t);break}case oe.EOF:{this._err(Je.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Je.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=fe.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(v0(t))this._createEndTagToken(),this.state=fe.TAG_NAME,this._stateTagName(t);else switch(t){case oe.GREATER_THAN_SIGN:{this._err(Je.missingEndTagName),this.state=fe.DATA;break}case oe.EOF:{this._err(Je.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Je.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=fe.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this.state=fe.BEFORE_ATTRIBUTE_NAME;break}case oe.SOLIDUS:{this.state=fe.SELF_CLOSING_START_TAG;break}case oe.GREATER_THAN_SIGN:{this.state=fe.DATA,this.emitCurrentTagToken();break}case oe.NULL:{this._err(Je.unexpectedNullCharacter),n.tagName+=rs;break}case oe.EOF:{this._err(Je.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(DC(t)?WP(t):t)}}_stateRcdataLessThanSign(t){t===oe.SOLIDUS?this.state=fe.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=fe.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){v0(t)?(this.state=fe.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=fe.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=fe.BEFORE_ATTRIBUTE_NAME,!1;case oe.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=fe.SELF_CLOSING_START_TAG,!1;case oe.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=fe.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=fe.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===oe.SOLIDUS?this.state=fe.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=fe.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){v0(t)?(this.state=fe.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=fe.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=fe.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case oe.SOLIDUS:{this.state=fe.SCRIPT_DATA_END_TAG_OPEN;break}case oe.EXCLAMATION_MARK:{this.state=fe.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=fe.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){v0(t)?(this.state=fe.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=fe.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=fe.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===oe.HYPHEN_MINUS?(this.state=fe.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=fe.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===oe.HYPHEN_MINUS?(this.state=fe.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=fe.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case oe.HYPHEN_MINUS:{this.state=fe.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case oe.LESS_THAN_SIGN:{this.state=fe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case oe.NULL:{this._err(Je.unexpectedNullCharacter),this._emitChars(rs);break}case oe.EOF:{this._err(Je.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case oe.HYPHEN_MINUS:{this.state=fe.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case oe.LESS_THAN_SIGN:{this.state=fe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case oe.NULL:{this._err(Je.unexpectedNullCharacter),this.state=fe.SCRIPT_DATA_ESCAPED,this._emitChars(rs);break}case oe.EOF:{this._err(Je.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=fe.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case oe.HYPHEN_MINUS:{this._emitChars("-");break}case oe.LESS_THAN_SIGN:{this.state=fe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case oe.GREATER_THAN_SIGN:{this.state=fe.SCRIPT_DATA,this._emitChars(">");break}case oe.NULL:{this._err(Je.unexpectedNullCharacter),this.state=fe.SCRIPT_DATA_ESCAPED,this._emitChars(rs);break}case oe.EOF:{this._err(Je.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=fe.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===oe.SOLIDUS?this.state=fe.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:v0(t)?(this._emitChars("<"),this.state=fe.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=fe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){v0(t)?(this.state=fe.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=fe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=fe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(il.SCRIPT,!1)&&Rue(this.preprocessor.peek(il.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<il.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=fe.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=fe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case oe.HYPHEN_MINUS:{this.state=fe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case oe.LESS_THAN_SIGN:{this.state=fe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case oe.NULL:{this._err(Je.unexpectedNullCharacter),this._emitChars(rs);break}case oe.EOF:{this._err(Je.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case oe.HYPHEN_MINUS:{this.state=fe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case oe.LESS_THAN_SIGN:{this.state=fe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case oe.NULL:{this._err(Je.unexpectedNullCharacter),this.state=fe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(rs);break}case oe.EOF:{this._err(Je.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=fe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case oe.HYPHEN_MINUS:{this._emitChars("-");break}case oe.LESS_THAN_SIGN:{this.state=fe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case oe.GREATER_THAN_SIGN:{this.state=fe.SCRIPT_DATA,this._emitChars(">");break}case oe.NULL:{this._err(Je.unexpectedNullCharacter),this.state=fe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(rs);break}case oe.EOF:{this._err(Je.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=fe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===oe.SOLIDUS?(this.state=fe.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=fe.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(il.SCRIPT,!1)&&Rue(this.preprocessor.peek(il.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<il.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=fe.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=fe.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.SOLIDUS:case oe.GREATER_THAN_SIGN:case oe.EOF:{this.state=fe.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case oe.EQUALS_SIGN:{this._err(Je.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=fe.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=fe.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:case oe.SOLIDUS:case oe.GREATER_THAN_SIGN:case oe.EOF:{this._leaveAttrName(),this.state=fe.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case oe.EQUALS_SIGN:{this._leaveAttrName(),this.state=fe.BEFORE_ATTRIBUTE_VALUE;break}case oe.QUOTATION_MARK:case oe.APOSTROPHE:case oe.LESS_THAN_SIGN:{this._err(Je.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case oe.NULL:{this._err(Je.unexpectedNullCharacter),this.currentAttr.name+=rs;break}default:this.currentAttr.name+=String.fromCodePoint(DC(t)?WP(t):t)}}_stateAfterAttributeName(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.SOLIDUS:{this.state=fe.SELF_CLOSING_START_TAG;break}case oe.EQUALS_SIGN:{this.state=fe.BEFORE_ATTRIBUTE_VALUE;break}case oe.GREATER_THAN_SIGN:{this.state=fe.DATA,this.emitCurrentTagToken();break}case oe.EOF:{this._err(Je.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=fe.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.QUOTATION_MARK:{this.state=fe.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{this.state=fe.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case oe.GREATER_THAN_SIGN:{this._err(Je.missingAttributeValue),this.state=fe.DATA,this.emitCurrentTagToken();break}default:this.state=fe.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case oe.QUOTATION_MARK:{this.state=fe.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case oe.AMPERSAND:{this.returnState=fe.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=fe.CHARACTER_REFERENCE;break}case oe.NULL:{this._err(Je.unexpectedNullCharacter),this.currentAttr.value+=rs;break}case oe.EOF:{this._err(Je.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case oe.APOSTROPHE:{this.state=fe.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case oe.AMPERSAND:{this.returnState=fe.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=fe.CHARACTER_REFERENCE;break}case oe.NULL:{this._err(Je.unexpectedNullCharacter),this.currentAttr.value+=rs;break}case oe.EOF:{this._err(Je.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this._leaveAttrValue(),this.state=fe.BEFORE_ATTRIBUTE_NAME;break}case oe.AMPERSAND:{this.returnState=fe.ATTRIBUTE_VALUE_UNQUOTED,this.state=fe.CHARACTER_REFERENCE;break}case oe.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=fe.DATA,this.emitCurrentTagToken();break}case oe.NULL:{this._err(Je.unexpectedNullCharacter),this.currentAttr.value+=rs;break}case oe.QUOTATION_MARK:case oe.APOSTROPHE:case oe.LESS_THAN_SIGN:case oe.EQUALS_SIGN:case oe.GRAVE_ACCENT:{this._err(Je.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case oe.EOF:{this._err(Je.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this._leaveAttrValue(),this.state=fe.BEFORE_ATTRIBUTE_NAME;break}case oe.SOLIDUS:{this._leaveAttrValue(),this.state=fe.SELF_CLOSING_START_TAG;break}case oe.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=fe.DATA,this.emitCurrentTagToken();break}case oe.EOF:{this._err(Je.eofInTag),this._emitEOFToken();break}default:this._err(Je.missingWhitespaceBetweenAttributes),this.state=fe.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case oe.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=fe.DATA,this.emitCurrentTagToken();break}case oe.EOF:{this._err(Je.eofInTag),this._emitEOFToken();break}default:this._err(Je.unexpectedSolidusInTag),this.state=fe.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case oe.GREATER_THAN_SIGN:{this.state=fe.DATA,this.emitCurrentComment(n);break}case oe.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case oe.NULL:{this._err(Je.unexpectedNullCharacter),n.data+=rs;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(il.DASH_DASH,!0)?(this._createCommentToken(il.DASH_DASH.length+1),this.state=fe.COMMENT_START):this._consumeSequenceIfMatch(il.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(il.DOCTYPE.length+1),this.state=fe.DOCTYPE):this._consumeSequenceIfMatch(il.CDATA_START,!0)?this.inForeignNode?this.state=fe.CDATA_SECTION:(this._err(Je.cdataInHtmlContent),this._createCommentToken(il.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=fe.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Je.incorrectlyOpenedComment),this._createCommentToken(2),this.state=fe.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case oe.HYPHEN_MINUS:{this.state=fe.COMMENT_START_DASH;break}case oe.GREATER_THAN_SIGN:{this._err(Je.abruptClosingOfEmptyComment),this.state=fe.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=fe.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case oe.HYPHEN_MINUS:{this.state=fe.COMMENT_END;break}case oe.GREATER_THAN_SIGN:{this._err(Je.abruptClosingOfEmptyComment),this.state=fe.DATA,this.emitCurrentComment(n);break}case oe.EOF:{this._err(Je.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=fe.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case oe.HYPHEN_MINUS:{this.state=fe.COMMENT_END_DASH;break}case oe.LESS_THAN_SIGN:{n.data+="<",this.state=fe.COMMENT_LESS_THAN_SIGN;break}case oe.NULL:{this._err(Je.unexpectedNullCharacter),n.data+=rs;break}case oe.EOF:{this._err(Je.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case oe.EXCLAMATION_MARK:{n.data+="!",this.state=fe.COMMENT_LESS_THAN_SIGN_BANG;break}case oe.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=fe.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===oe.HYPHEN_MINUS?this.state=fe.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=fe.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===oe.HYPHEN_MINUS?this.state=fe.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=fe.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==oe.GREATER_THAN_SIGN&&t!==oe.EOF&&this._err(Je.nestedComment),this.state=fe.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case oe.HYPHEN_MINUS:{this.state=fe.COMMENT_END;break}case oe.EOF:{this._err(Je.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=fe.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case oe.GREATER_THAN_SIGN:{this.state=fe.DATA,this.emitCurrentComment(n);break}case oe.EXCLAMATION_MARK:{this.state=fe.COMMENT_END_BANG;break}case oe.HYPHEN_MINUS:{n.data+="-";break}case oe.EOF:{this._err(Je.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=fe.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case oe.HYPHEN_MINUS:{n.data+="--!",this.state=fe.COMMENT_END_DASH;break}case oe.GREATER_THAN_SIGN:{this._err(Je.incorrectlyClosedComment),this.state=fe.DATA,this.emitCurrentComment(n);break}case oe.EOF:{this._err(Je.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=fe.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this.state=fe.BEFORE_DOCTYPE_NAME;break}case oe.GREATER_THAN_SIGN:{this.state=fe.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case oe.EOF:{this._err(Je.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Je.missingWhitespaceBeforeDoctypeName),this.state=fe.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(DC(t))this._createDoctypeToken(String.fromCharCode(WP(t))),this.state=fe.DOCTYPE_NAME;else switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.NULL:{this._err(Je.unexpectedNullCharacter),this._createDoctypeToken(rs),this.state=fe.DOCTYPE_NAME;break}case oe.GREATER_THAN_SIGN:{this._err(Je.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=fe.DATA;break}case oe.EOF:{this._err(Je.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=fe.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this.state=fe.AFTER_DOCTYPE_NAME;break}case oe.GREATER_THAN_SIGN:{this.state=fe.DATA,this.emitCurrentDoctype(n);break}case oe.NULL:{this._err(Je.unexpectedNullCharacter),n.name+=rs;break}case oe.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(DC(t)?WP(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.GREATER_THAN_SIGN:{this.state=fe.DATA,this.emitCurrentDoctype(n);break}case oe.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(il.PUBLIC,!1)?this.state=fe.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(il.SYSTEM,!1)?this.state=fe.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Je.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=fe.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this.state=fe.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case oe.QUOTATION_MARK:{this._err(Je.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=fe.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{this._err(Je.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=fe.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case oe.GREATER_THAN_SIGN:{this._err(Je.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=fe.DATA,this.emitCurrentDoctype(n);break}case oe.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Je.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=fe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.QUOTATION_MARK:{n.publicId="",this.state=fe.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{n.publicId="",this.state=fe.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case oe.GREATER_THAN_SIGN:{this._err(Je.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=fe.DATA,this.emitCurrentDoctype(n);break}case oe.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Je.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=fe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case oe.QUOTATION_MARK:{this.state=fe.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case oe.NULL:{this._err(Je.unexpectedNullCharacter),n.publicId+=rs;break}case oe.GREATER_THAN_SIGN:{this._err(Je.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=fe.DATA;break}case oe.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case oe.APOSTROPHE:{this.state=fe.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case oe.NULL:{this._err(Je.unexpectedNullCharacter),n.publicId+=rs;break}case oe.GREATER_THAN_SIGN:{this._err(Je.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=fe.DATA;break}case oe.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this.state=fe.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case oe.GREATER_THAN_SIGN:{this.state=fe.DATA,this.emitCurrentDoctype(n);break}case oe.QUOTATION_MARK:{this._err(Je.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=fe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{this._err(Je.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=fe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case oe.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Je.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=fe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=fe.DATA;break}case oe.QUOTATION_MARK:{n.systemId="",this.state=fe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{n.systemId="",this.state=fe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case oe.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Je.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=fe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this.state=fe.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case oe.QUOTATION_MARK:{this._err(Je.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=fe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{this._err(Je.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=fe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case oe.GREATER_THAN_SIGN:{this._err(Je.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=fe.DATA,this.emitCurrentDoctype(n);break}case oe.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Je.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=fe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.QUOTATION_MARK:{n.systemId="",this.state=fe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{n.systemId="",this.state=fe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case oe.GREATER_THAN_SIGN:{this._err(Je.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=fe.DATA,this.emitCurrentDoctype(n);break}case oe.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Je.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=fe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case oe.QUOTATION_MARK:{this.state=fe.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case oe.NULL:{this._err(Je.unexpectedNullCharacter),n.systemId+=rs;break}case oe.GREATER_THAN_SIGN:{this._err(Je.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=fe.DATA;break}case oe.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case oe.APOSTROPHE:{this.state=fe.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case oe.NULL:{this._err(Je.unexpectedNullCharacter),n.systemId+=rs;break}case oe.GREATER_THAN_SIGN:{this._err(Je.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=fe.DATA;break}case oe.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=fe.DATA;break}case oe.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Je.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=fe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case oe.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=fe.DATA;break}case oe.NULL:{this._err(Je.unexpectedNullCharacter);break}case oe.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case oe.RIGHT_SQUARE_BRACKET:{this.state=fe.CDATA_SECTION_BRACKET;break}case oe.EOF:{this._err(Je.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===oe.RIGHT_SQUARE_BRACKET?this.state=fe.CDATA_SECTION_END:(this._emitChars("]"),this.state=fe.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case oe.GREATER_THAN_SIGN:{this.state=fe.DATA;break}case oe.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=fe.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===oe.NUMBER_SIGN?this.state=fe.NUMERIC_CHARACTER_REFERENCE:b7(t)?(this.state=fe.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(oe.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(oe.AMPERSAND),this.state=fe.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){b7(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===oe.SEMICOLON&&this._err(Je.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===oe.LATIN_SMALL_X||t===oe.LATIN_CAPITAL_X?this.state=fe.HEXADEMICAL_CHARACTER_REFERENCE_START:NA(t)?(this.state=fe.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Je.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(oe.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(oe.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){ent(t)?(this.state=fe.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Je.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(oe.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(oe.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){_xe(t)?this.charRefCode=this.charRefCode*16+t-55:wxe(t)?this.charRefCode=this.charRefCode*16+t-87:NA(t)?this.charRefCode=this.charRefCode*16+t-48:t===oe.SEMICOLON?this.state=fe.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Je.missingSemicolonAfterCharacterReference),this.state=fe.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){NA(t)?this.charRefCode=this.charRefCode*10+t-48:t===oe.SEMICOLON?this.state=fe.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Je.missingSemicolonAfterCharacterReference),this.state=fe.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===oe.NULL)this._err(Je.nullCharacterReference),this.charRefCode=oe.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Je.characterReferenceOutsideUnicodeRange),this.charRefCode=oe.REPLACEMENT_CHARACTER;else if(hxe(this.charRefCode))this._err(Je.surrogateCharacterReference),this.charRefCode=oe.REPLACEMENT_CHARACTER;else if(mxe(this.charRefCode))this._err(Je.noncharacterCharacterReference);else if(pxe(this.charRefCode)||this.charRefCode===oe.CARRIAGE_RETURN){this._err(Je.controlCharacterReference);const n=Jtt.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const Exe=new Set([j.DD,j.DT,j.LI,j.OPTGROUP,j.OPTION,j.P,j.RB,j.RP,j.RT,j.RTC]),kue=new Set([...Exe,j.CAPTION,j.COLGROUP,j.TBODY,j.TD,j.TFOOT,j.TH,j.THEAD,j.TR]),GP=new Map([[j.APPLET,at.HTML],[j.CAPTION,at.HTML],[j.HTML,at.HTML],[j.MARQUEE,at.HTML],[j.OBJECT,at.HTML],[j.TABLE,at.HTML],[j.TD,at.HTML],[j.TEMPLATE,at.HTML],[j.TH,at.HTML],[j.ANNOTATION_XML,at.MATHML],[j.MI,at.MATHML],[j.MN,at.MATHML],[j.MO,at.MATHML],[j.MS,at.MATHML],[j.MTEXT,at.MATHML],[j.DESC,at.SVG],[j.FOREIGN_OBJECT,at.SVG],[j.TITLE,at.SVG]]),rnt=[j.H1,j.H2,j.H3,j.H4,j.H5,j.H6],int=[j.TR,j.TEMPLATE,j.HTML],snt=[j.TBODY,j.TFOOT,j.THEAD,j.TEMPLATE,j.HTML],ont=[j.TABLE,j.TEMPLATE,j.HTML],ant=[j.TD,j.TH];class unt{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=j.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===j.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===at.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==at.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(rnt,at.HTML)}popUntilTableCellPopped(){this.popUntilPopped(ant,at.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(ont,at.HTML)}clearBackToTableBodyContext(){this.clearBackTo(snt,at.HTML)}clearBackToTableRowContext(){this.clearBackTo(int,at.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===j.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===j.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===at.HTML)return!0;if(GP.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(bxe(n)&&r===at.HTML)return!0;if(GP.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===at.HTML)return!0;if((r===j.UL||r===j.OL)&&i===at.HTML||GP.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===at.HTML)return!0;if(r===j.BUTTON&&i===at.HTML||GP.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===at.HTML){if(r===t)return!0;if(r===j.TABLE||r===j.TEMPLATE||r===j.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===at.HTML){if(n===j.TBODY||n===j.THEAD||n===j.TFOOT)return!0;if(n===j.TABLE||n===j.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===at.HTML){if(r===t)return!0;if(r!==j.OPTION&&r!==j.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;Exe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;kue.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&kue.has(this.currentTagId);)this.pop()}}const mB=3;var df;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(df=df||(df={}));const Pue={type:df.Marker};class lnt{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===df.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<mB)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<mB)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=mB&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(Pue)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:df.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:df.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(Pue);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===df.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===df.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===df.Element&&n.element===t)}}function Nue(e){return{nodeName:"#text",value:e,parentNode:null}}const Dw={createDocument(){return{nodeName:"#document",mode:tc.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};Dw.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(Dw.isTextNode(n)){n.value+=t;return}}Dw.appendChild(e,Nue(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&Dw.isTextNode(r)?r.value+=t:Dw.insertBefore(e,Nue(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},Sxe="html",cnt="about:legacy-compat",dnt="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Txe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],fnt=[...Txe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],hnt=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),Cxe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],pnt=[...Cxe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Oue(e,t){return t.some(n=>e.startsWith(n))}function mnt(e){return e.name===Sxe&&e.publicId===null&&(e.systemId===null||e.systemId===cnt)}function gnt(e){if(e.name!==Sxe)return tc.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===dnt)return tc.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),hnt.has(n))return tc.QUIRKS;let r=t===null?fnt:Txe;if(Oue(n,r))return tc.QUIRKS;if(r=t===null?Cxe:pnt,Oue(n,r))return tc.LIMITED_QUIRKS}return tc.NO_QUIRKS}const Due={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},ynt="definitionurl",vnt="definitionURL",bnt=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),_nt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:at.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:at.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:at.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:at.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:at.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:at.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:at.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:at.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:at.XML}],["xml:space",{prefix:"xml",name:"space",namespace:at.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:at.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:at.XMLNS}]]),wnt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),xnt=new Set([j.B,j.BIG,j.BLOCKQUOTE,j.BODY,j.BR,j.CENTER,j.CODE,j.DD,j.DIV,j.DL,j.DT,j.EM,j.EMBED,j.H1,j.H2,j.H3,j.H4,j.H5,j.H6,j.HEAD,j.HR,j.I,j.IMG,j.LI,j.LISTING,j.MENU,j.META,j.NOBR,j.OL,j.P,j.PRE,j.RUBY,j.S,j.SMALL,j.SPAN,j.STRONG,j.STRIKE,j.SUB,j.SUP,j.TABLE,j.TT,j.U,j.UL,j.VAR]);function Ent(e){const t=e.tagID;return t===j.FONT&&e.attrs.some(({name:r})=>r===iy.COLOR||r===iy.SIZE||r===iy.FACE)||xnt.has(t)}function Axe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===ynt){e.attrs[t].name=vnt;break}}function Ixe(e){for(let t=0;t<e.attrs.length;t++){const n=bnt.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function tK(e){for(let t=0;t<e.attrs.length;t++){const n=_nt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function Snt(e){const t=wnt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=pS(e.tagName))}function Tnt(e,t){return t===at.MATHML&&(e===j.MI||e===j.MO||e===j.MN||e===j.MS||e===j.MTEXT)}function Cnt(e,t,n){if(t===at.MATHML&&e===j.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===iy.ENCODING){const i=n[r].value.toLowerCase();return i===Due.TEXT_HTML||i===Due.APPLICATION_XML}}return t===at.SVG&&(e===j.FOREIGN_OBJECT||e===j.DESC||e===j.TITLE)}function Ant(e,t,n,r){return(!r||r===at.HTML)&&Cnt(e,t,n)||(!r||r===at.MATHML)&&Tnt(e,t)}const Int="hidden",Rnt=8,knt=3;var be;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(be||(be={}));const Pnt={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},Rxe=new Set([j.TABLE,j.TBODY,j.TFOOT,j.THEAD,j.TR]),Mue={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Dw,onParseError:null};let $ue=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=be.INITIAL,this.originalInsertionMode=be.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Mue,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new nnt(this.options,this),this.activeFormattingElements=new lnt(this.treeAdapter),this.fragmentContextID=r?pS(this.treeAdapter.getTagName(r)):j.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new unt(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Mue,...n};t??(t=r.treeAdapter.createElement(Be.TEMPLATE,at.HTML,[]));const i=r.treeAdapter.createElement("documentmock",at.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===j.TEMPLATE&&s.tmplInsertionModeStack.unshift(be.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:Pnt,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===at.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,at.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=be.TEXT}switchToPlaintextParsing(){this.insertionMode=be.TEXT,this.originalInsertionMode=be.IN_BODY,this.tokenizer.state=Bs.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Be.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==at.HTML))switch(this.fragmentContextID){case j.TITLE:case j.TEXTAREA:{this.tokenizer.state=Bs.RCDATA;break}case j.STYLE:case j.XMP:case j.IFRAME:case j.NOEMBED:case j.NOFRAMES:case j.NOSCRIPT:{this.tokenizer.state=Bs.RAWTEXT;break}case j.SCRIPT:{this.tokenizer.state=Bs.SCRIPT_DATA;break}case j.PLAINTEXT:{this.tokenizer.state=Bs.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,at.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,at.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Be.HTML,at.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,j.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===hr.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===j.SVG&&this.treeAdapter.getTagName(n)===Be.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===at.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===j.MGLYPH||t.tagID===j.MALIGNMARK)&&!this._isIntegrationPoint(r,n,at.HTML)}_processToken(t){switch(t.type){case hr.CHARACTER:{this.onCharacter(t);break}case hr.NULL_CHARACTER:{this.onNullCharacter(t);break}case hr.COMMENT:{this.onComment(t);break}case hr.DOCTYPE:{this.onDoctype(t);break}case hr.START_TAG:{this._processStartTag(t);break}case hr.END_TAG:{this.onEndTag(t);break}case hr.EOF:{this.onEof(t);break}case hr.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return Ant(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===df.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=be.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(j.P),this.openElements.popUntilTagNamePopped(j.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case j.TR:{this.insertionMode=be.IN_ROW;return}case j.TBODY:case j.THEAD:case j.TFOOT:{this.insertionMode=be.IN_TABLE_BODY;return}case j.CAPTION:{this.insertionMode=be.IN_CAPTION;return}case j.COLGROUP:{this.insertionMode=be.IN_COLUMN_GROUP;return}case j.TABLE:{this.insertionMode=be.IN_TABLE;return}case j.BODY:{this.insertionMode=be.IN_BODY;return}case j.FRAMESET:{this.insertionMode=be.IN_FRAMESET;return}case j.SELECT:{this._resetInsertionModeForSelect(t);return}case j.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case j.HTML:{this.insertionMode=this.headElement?be.AFTER_HEAD:be.BEFORE_HEAD;return}case j.TD:case j.TH:{if(t>0){this.insertionMode=be.IN_CELL;return}break}case j.HEAD:{if(t>0){this.insertionMode=be.IN_HEAD;return}break}}this.insertionMode=be.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===j.TEMPLATE)break;if(r===j.TABLE){this.insertionMode=be.IN_SELECT_IN_TABLE;return}}this.insertionMode=be.IN_SELECT}_isElementCausesFosterParenting(t){return Rxe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case j.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===at.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case j.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return Qtt[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){ait(this,t);return}switch(this.insertionMode){case be.INITIAL:{UT(this,t);break}case be.BEFORE_HTML:{OA(this,t);break}case be.BEFORE_HEAD:{DA(this,t);break}case be.IN_HEAD:{MA(this,t);break}case be.IN_HEAD_NO_SCRIPT:{$A(this,t);break}case be.AFTER_HEAD:{LA(this,t);break}case be.IN_BODY:case be.IN_CAPTION:case be.IN_CELL:case be.IN_TEMPLATE:{Pxe(this,t);break}case be.TEXT:case be.IN_SELECT:case be.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case be.IN_TABLE:case be.IN_TABLE_BODY:case be.IN_ROW:{gB(this,t);break}case be.IN_TABLE_TEXT:{Lxe(this,t);break}case be.IN_COLUMN_GROUP:{TM(this,t);break}case be.AFTER_BODY:{CM(this,t);break}case be.AFTER_AFTER_BODY:{aD(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){oit(this,t);return}switch(this.insertionMode){case be.INITIAL:{UT(this,t);break}case be.BEFORE_HTML:{OA(this,t);break}case be.BEFORE_HEAD:{DA(this,t);break}case be.IN_HEAD:{MA(this,t);break}case be.IN_HEAD_NO_SCRIPT:{$A(this,t);break}case be.AFTER_HEAD:{LA(this,t);break}case be.TEXT:{this._insertCharacters(t);break}case be.IN_TABLE:case be.IN_TABLE_BODY:case be.IN_ROW:{gB(this,t);break}case be.IN_COLUMN_GROUP:{TM(this,t);break}case be.AFTER_BODY:{CM(this,t);break}case be.AFTER_AFTER_BODY:{aD(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){_7(this,t);return}switch(this.insertionMode){case be.INITIAL:case be.BEFORE_HTML:case be.BEFORE_HEAD:case be.IN_HEAD:case be.IN_HEAD_NO_SCRIPT:case be.AFTER_HEAD:case be.IN_BODY:case be.IN_TABLE:case be.IN_CAPTION:case be.IN_COLUMN_GROUP:case be.IN_TABLE_BODY:case be.IN_ROW:case be.IN_CELL:case be.IN_SELECT:case be.IN_SELECT_IN_TABLE:case be.IN_TEMPLATE:case be.IN_FRAMESET:case be.AFTER_FRAMESET:{_7(this,t);break}case be.IN_TABLE_TEXT:{VT(this,t);break}case be.AFTER_BODY:{Fnt(this,t);break}case be.AFTER_AFTER_BODY:case be.AFTER_AFTER_FRAMESET:{jnt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case be.INITIAL:{Bnt(this,t);break}case be.BEFORE_HEAD:case be.IN_HEAD:case be.IN_HEAD_NO_SCRIPT:case be.AFTER_HEAD:{this._err(t,Je.misplacedDoctype);break}case be.IN_TABLE_TEXT:{VT(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Je.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?uit(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case be.INITIAL:{UT(this,t);break}case be.BEFORE_HTML:{znt(this,t);break}case be.BEFORE_HEAD:{Vnt(this,t);break}case be.IN_HEAD:{th(this,t);break}case be.IN_HEAD_NO_SCRIPT:{Wnt(this,t);break}case be.AFTER_HEAD:{Ynt(this,t);break}case be.IN_BODY:{uu(this,t);break}case be.IN_TABLE:{Kx(this,t);break}case be.IN_TABLE_TEXT:{VT(this,t);break}case be.IN_CAPTION:{Hrt(this,t);break}case be.IN_COLUMN_GROUP:{iK(this,t);break}case be.IN_TABLE_BODY:{wF(this,t);break}case be.IN_ROW:{xF(this,t);break}case be.IN_CELL:{Grt(this,t);break}case be.IN_SELECT:{Bxe(this,t);break}case be.IN_SELECT_IN_TABLE:{Krt(this,t);break}case be.IN_TEMPLATE:{Qrt(this,t);break}case be.AFTER_BODY:{Zrt(this,t);break}case be.IN_FRAMESET:{eit(this,t);break}case be.AFTER_FRAMESET:{nit(this,t);break}case be.AFTER_AFTER_BODY:{iit(this,t);break}case be.AFTER_AFTER_FRAMESET:{sit(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?lit(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case be.INITIAL:{UT(this,t);break}case be.BEFORE_HTML:{Unt(this,t);break}case be.BEFORE_HEAD:{Hnt(this,t);break}case be.IN_HEAD:{qnt(this,t);break}case be.IN_HEAD_NO_SCRIPT:{Gnt(this,t);break}case be.AFTER_HEAD:{Knt(this,t);break}case be.IN_BODY:{_F(this,t);break}case be.TEXT:{Drt(this,t);break}case be.IN_TABLE:{E2(this,t);break}case be.IN_TABLE_TEXT:{VT(this,t);break}case be.IN_CAPTION:{qrt(this,t);break}case be.IN_COLUMN_GROUP:{Wrt(this,t);break}case be.IN_TABLE_BODY:{w7(this,t);break}case be.IN_ROW:{jxe(this,t);break}case be.IN_CELL:{Yrt(this,t);break}case be.IN_SELECT:{zxe(this,t);break}case be.IN_SELECT_IN_TABLE:{Xrt(this,t);break}case be.IN_TEMPLATE:{Jrt(this,t);break}case be.AFTER_BODY:{Vxe(this,t);break}case be.IN_FRAMESET:{tit(this,t);break}case be.AFTER_FRAMESET:{rit(this,t);break}case be.AFTER_AFTER_BODY:{aD(this,t);break}}}onEof(t){switch(this.insertionMode){case be.INITIAL:{UT(this,t);break}case be.BEFORE_HTML:{OA(this,t);break}case be.BEFORE_HEAD:{DA(this,t);break}case be.IN_HEAD:{MA(this,t);break}case be.IN_HEAD_NO_SCRIPT:{$A(this,t);break}case be.AFTER_HEAD:{LA(this,t);break}case be.IN_BODY:case be.IN_TABLE:case be.IN_CAPTION:case be.IN_COLUMN_GROUP:case be.IN_TABLE_BODY:case be.IN_ROW:case be.IN_CELL:case be.IN_SELECT:case be.IN_SELECT_IN_TABLE:{Mxe(this,t);break}case be.TEXT:{Mrt(this,t);break}case be.IN_TABLE_TEXT:{VT(this,t);break}case be.IN_TEMPLATE:{Uxe(this,t);break}case be.AFTER_BODY:case be.IN_FRAMESET:case be.AFTER_FRAMESET:case be.AFTER_AFTER_BODY:case be.AFTER_AFTER_FRAMESET:{rK(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===oe.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case be.IN_HEAD:case be.IN_HEAD_NO_SCRIPT:case be.AFTER_HEAD:case be.TEXT:case be.IN_COLUMN_GROUP:case be.IN_SELECT:case be.IN_SELECT_IN_TABLE:case be.IN_FRAMESET:case be.AFTER_FRAMESET:{this._insertCharacters(t);break}case be.IN_BODY:case be.IN_CAPTION:case be.IN_CELL:case be.IN_TEMPLATE:case be.AFTER_BODY:case be.AFTER_AFTER_BODY:case be.AFTER_AFTER_FRAMESET:{kxe(this,t);break}case be.IN_TABLE:case be.IN_TABLE_BODY:case be.IN_ROW:{gB(this,t);break}case be.IN_TABLE_TEXT:{$xe(this,t);break}}}};function Nnt(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):Dxe(e,t),n}function Ont(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function Dnt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=knt;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=Mnt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function Mnt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function $nt(e,t,n){const r=e.treeAdapter.getTagName(t),i=pS(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===j.TEMPLATE&&s===at.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Lnt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function nK(e,t){for(let n=0;n<Rnt;n++){const r=Nnt(e,t);if(!r)break;const i=Ont(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=Dnt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&$nt(e,o,s),Lnt(e,i,r)}}function _7(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function Fnt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function jnt(e,t){e._appendCommentNode(t,e.document)}function rK(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function Bnt(e,t){e._setDocumentType(t);const n=t.forceQuirks?tc.QUIRKS:gnt(t);mnt(t)||e._err(t,Je.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=be.BEFORE_HTML}function UT(e,t){e._err(t,Je.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,tc.QUIRKS),e.insertionMode=be.BEFORE_HTML,e._processToken(t)}function znt(e,t){t.tagID===j.HTML?(e._insertElement(t,at.HTML),e.insertionMode=be.BEFORE_HEAD):OA(e,t)}function Unt(e,t){const n=t.tagID;(n===j.HTML||n===j.HEAD||n===j.BODY||n===j.BR)&&OA(e,t)}function OA(e,t){e._insertFakeRootElement(),e.insertionMode=be.BEFORE_HEAD,e._processToken(t)}function Vnt(e,t){switch(t.tagID){case j.HTML:{uu(e,t);break}case j.HEAD:{e._insertElement(t,at.HTML),e.headElement=e.openElements.current,e.insertionMode=be.IN_HEAD;break}default:DA(e,t)}}function Hnt(e,t){const n=t.tagID;n===j.HEAD||n===j.BODY||n===j.HTML||n===j.BR?DA(e,t):e._err(t,Je.endTagWithoutMatchingOpenElement)}function DA(e,t){e._insertFakeElement(Be.HEAD,j.HEAD),e.headElement=e.openElements.current,e.insertionMode=be.IN_HEAD,e._processToken(t)}function th(e,t){switch(t.tagID){case j.HTML:{uu(e,t);break}case j.BASE:case j.BASEFONT:case j.BGSOUND:case j.LINK:case j.META:{e._appendElement(t,at.HTML),t.ackSelfClosing=!0;break}case j.TITLE:{e._switchToTextParsing(t,Bs.RCDATA);break}case j.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Bs.RAWTEXT):(e._insertElement(t,at.HTML),e.insertionMode=be.IN_HEAD_NO_SCRIPT);break}case j.NOFRAMES:case j.STYLE:{e._switchToTextParsing(t,Bs.RAWTEXT);break}case j.SCRIPT:{e._switchToTextParsing(t,Bs.SCRIPT_DATA);break}case j.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=be.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(be.IN_TEMPLATE);break}case j.HEAD:{e._err(t,Je.misplacedStartTagForHeadElement);break}default:MA(e,t)}}function qnt(e,t){switch(t.tagID){case j.HEAD:{e.openElements.pop(),e.insertionMode=be.AFTER_HEAD;break}case j.BODY:case j.BR:case j.HTML:{MA(e,t);break}case j.TEMPLATE:{Zb(e,t);break}default:e._err(t,Je.endTagWithoutMatchingOpenElement)}}function Zb(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==j.TEMPLATE&&e._err(t,Je.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(j.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Je.endTagWithoutMatchingOpenElement)}function MA(e,t){e.openElements.pop(),e.insertionMode=be.AFTER_HEAD,e._processToken(t)}function Wnt(e,t){switch(t.tagID){case j.HTML:{uu(e,t);break}case j.BASEFONT:case j.BGSOUND:case j.HEAD:case j.LINK:case j.META:case j.NOFRAMES:case j.STYLE:{th(e,t);break}case j.NOSCRIPT:{e._err(t,Je.nestedNoscriptInHead);break}default:$A(e,t)}}function Gnt(e,t){switch(t.tagID){case j.NOSCRIPT:{e.openElements.pop(),e.insertionMode=be.IN_HEAD;break}case j.BR:{$A(e,t);break}default:e._err(t,Je.endTagWithoutMatchingOpenElement)}}function $A(e,t){const n=t.type===hr.EOF?Je.openElementsLeftAfterEof:Je.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=be.IN_HEAD,e._processToken(t)}function Ynt(e,t){switch(t.tagID){case j.HTML:{uu(e,t);break}case j.BODY:{e._insertElement(t,at.HTML),e.framesetOk=!1,e.insertionMode=be.IN_BODY;break}case j.FRAMESET:{e._insertElement(t,at.HTML),e.insertionMode=be.IN_FRAMESET;break}case j.BASE:case j.BASEFONT:case j.BGSOUND:case j.LINK:case j.META:case j.NOFRAMES:case j.SCRIPT:case j.STYLE:case j.TEMPLATE:case j.TITLE:{e._err(t,Je.abandonedHeadElementChild),e.openElements.push(e.headElement,j.HEAD),th(e,t),e.openElements.remove(e.headElement);break}case j.HEAD:{e._err(t,Je.misplacedStartTagForHeadElement);break}default:LA(e,t)}}function Knt(e,t){switch(t.tagID){case j.BODY:case j.HTML:case j.BR:{LA(e,t);break}case j.TEMPLATE:{Zb(e,t);break}default:e._err(t,Je.endTagWithoutMatchingOpenElement)}}function LA(e,t){e._insertFakeElement(Be.BODY,j.BODY),e.insertionMode=be.IN_BODY,bF(e,t)}function bF(e,t){switch(t.type){case hr.CHARACTER:{Pxe(e,t);break}case hr.WHITESPACE_CHARACTER:{kxe(e,t);break}case hr.COMMENT:{_7(e,t);break}case hr.START_TAG:{uu(e,t);break}case hr.END_TAG:{_F(e,t);break}case hr.EOF:{Mxe(e,t);break}}}function kxe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function Pxe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function Xnt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function Qnt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function Jnt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,at.HTML),e.insertionMode=be.IN_FRAMESET)}function Znt(e,t){e.openElements.hasInButtonScope(j.P)&&e._closePElement(),e._insertElement(t,at.HTML)}function ert(e,t){e.openElements.hasInButtonScope(j.P)&&e._closePElement(),bxe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,at.HTML)}function trt(e,t){e.openElements.hasInButtonScope(j.P)&&e._closePElement(),e._insertElement(t,at.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function nrt(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(j.P)&&e._closePElement(),e._insertElement(t,at.HTML),n||(e.formElement=e.openElements.current))}function rrt(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===j.LI&&i===j.LI||(n===j.DD||n===j.DT)&&(i===j.DD||i===j.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==j.ADDRESS&&i!==j.DIV&&i!==j.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(j.P)&&e._closePElement(),e._insertElement(t,at.HTML)}function irt(e,t){e.openElements.hasInButtonScope(j.P)&&e._closePElement(),e._insertElement(t,at.HTML),e.tokenizer.state=Bs.PLAINTEXT}function srt(e,t){e.openElements.hasInScope(j.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(j.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,at.HTML),e.framesetOk=!1}function ort(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Be.A);n&&(nK(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,at.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function art(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,at.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function urt(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(j.NOBR)&&(nK(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,at.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function lrt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,at.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function crt(e,t){e.treeAdapter.getDocumentMode(e.document)!==tc.QUIRKS&&e.openElements.hasInButtonScope(j.P)&&e._closePElement(),e._insertElement(t,at.HTML),e.framesetOk=!1,e.insertionMode=be.IN_TABLE}function Nxe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,at.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Oxe(e){const t=gxe(e,iy.TYPE);return t!=null&&t.toLowerCase()===Int}function drt(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,at.HTML),Oxe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function frt(e,t){e._appendElement(t,at.HTML),t.ackSelfClosing=!0}function hrt(e,t){e.openElements.hasInButtonScope(j.P)&&e._closePElement(),e._appendElement(t,at.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function prt(e,t){t.tagName=Be.IMG,t.tagID=j.IMG,Nxe(e,t)}function mrt(e,t){e._insertElement(t,at.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Bs.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=be.TEXT}function grt(e,t){e.openElements.hasInButtonScope(j.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Bs.RAWTEXT)}function yrt(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Bs.RAWTEXT)}function Lue(e,t){e._switchToTextParsing(t,Bs.RAWTEXT)}function vrt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,at.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===be.IN_TABLE||e.insertionMode===be.IN_CAPTION||e.insertionMode===be.IN_TABLE_BODY||e.insertionMode===be.IN_ROW||e.insertionMode===be.IN_CELL?be.IN_SELECT_IN_TABLE:be.IN_SELECT}function brt(e,t){e.openElements.currentTagId===j.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,at.HTML)}function _rt(e,t){e.openElements.hasInScope(j.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,at.HTML)}function wrt(e,t){e.openElements.hasInScope(j.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(j.RTC),e._insertElement(t,at.HTML)}function xrt(e,t){e._reconstructActiveFormattingElements(),Axe(t),tK(t),t.selfClosing?e._appendElement(t,at.MATHML):e._insertElement(t,at.MATHML),t.ackSelfClosing=!0}function Ert(e,t){e._reconstructActiveFormattingElements(),Ixe(t),tK(t),t.selfClosing?e._appendElement(t,at.SVG):e._insertElement(t,at.SVG),t.ackSelfClosing=!0}function Fue(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,at.HTML)}function uu(e,t){switch(t.tagID){case j.I:case j.S:case j.B:case j.U:case j.EM:case j.TT:case j.BIG:case j.CODE:case j.FONT:case j.SMALL:case j.STRIKE:case j.STRONG:{art(e,t);break}case j.A:{ort(e,t);break}case j.H1:case j.H2:case j.H3:case j.H4:case j.H5:case j.H6:{ert(e,t);break}case j.P:case j.DL:case j.OL:case j.UL:case j.DIV:case j.DIR:case j.NAV:case j.MAIN:case j.MENU:case j.ASIDE:case j.CENTER:case j.FIGURE:case j.FOOTER:case j.HEADER:case j.HGROUP:case j.DIALOG:case j.DETAILS:case j.ADDRESS:case j.ARTICLE:case j.SECTION:case j.SUMMARY:case j.FIELDSET:case j.BLOCKQUOTE:case j.FIGCAPTION:{Znt(e,t);break}case j.LI:case j.DD:case j.DT:{rrt(e,t);break}case j.BR:case j.IMG:case j.WBR:case j.AREA:case j.EMBED:case j.KEYGEN:{Nxe(e,t);break}case j.HR:{hrt(e,t);break}case j.RB:case j.RTC:{_rt(e,t);break}case j.RT:case j.RP:{wrt(e,t);break}case j.PRE:case j.LISTING:{trt(e,t);break}case j.XMP:{grt(e,t);break}case j.SVG:{Ert(e,t);break}case j.HTML:{Xnt(e,t);break}case j.BASE:case j.LINK:case j.META:case j.STYLE:case j.TITLE:case j.SCRIPT:case j.BGSOUND:case j.BASEFONT:case j.TEMPLATE:{th(e,t);break}case j.BODY:{Qnt(e,t);break}case j.FORM:{nrt(e,t);break}case j.NOBR:{urt(e,t);break}case j.MATH:{xrt(e,t);break}case j.TABLE:{crt(e,t);break}case j.INPUT:{drt(e,t);break}case j.PARAM:case j.TRACK:case j.SOURCE:{frt(e,t);break}case j.IMAGE:{prt(e,t);break}case j.BUTTON:{srt(e,t);break}case j.APPLET:case j.OBJECT:case j.MARQUEE:{lrt(e,t);break}case j.IFRAME:{yrt(e,t);break}case j.SELECT:{vrt(e,t);break}case j.OPTION:case j.OPTGROUP:{brt(e,t);break}case j.NOEMBED:{Lue(e,t);break}case j.FRAMESET:{Jnt(e,t);break}case j.TEXTAREA:{mrt(e,t);break}case j.NOSCRIPT:{e.options.scriptingEnabled?Lue(e,t):Fue(e,t);break}case j.PLAINTEXT:{irt(e,t);break}case j.COL:case j.TH:case j.TD:case j.TR:case j.HEAD:case j.FRAME:case j.TBODY:case j.TFOOT:case j.THEAD:case j.CAPTION:case j.COLGROUP:break;default:Fue(e,t)}}function Srt(e,t){if(e.openElements.hasInScope(j.BODY)&&(e.insertionMode=be.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function Trt(e,t){e.openElements.hasInScope(j.BODY)&&(e.insertionMode=be.AFTER_BODY,Vxe(e,t))}function Crt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function Art(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(j.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(j.FORM):n&&e.openElements.remove(n))}function Irt(e){e.openElements.hasInButtonScope(j.P)||e._insertFakeElement(Be.P,j.P),e._closePElement()}function Rrt(e){e.openElements.hasInListItemScope(j.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(j.LI),e.openElements.popUntilTagNamePopped(j.LI))}function krt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function Prt(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function Nrt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function Ort(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Be.BR,j.BR),e.openElements.pop(),e.framesetOk=!1}function Dxe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==j.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function _F(e,t){switch(t.tagID){case j.A:case j.B:case j.I:case j.S:case j.U:case j.EM:case j.TT:case j.BIG:case j.CODE:case j.FONT:case j.NOBR:case j.SMALL:case j.STRIKE:case j.STRONG:{nK(e,t);break}case j.P:{Irt(e);break}case j.DL:case j.UL:case j.OL:case j.DIR:case j.DIV:case j.NAV:case j.PRE:case j.MAIN:case j.MENU:case j.ASIDE:case j.BUTTON:case j.CENTER:case j.FIGURE:case j.FOOTER:case j.HEADER:case j.HGROUP:case j.DIALOG:case j.ADDRESS:case j.ARTICLE:case j.DETAILS:case j.SECTION:case j.SUMMARY:case j.LISTING:case j.FIELDSET:case j.BLOCKQUOTE:case j.FIGCAPTION:{Crt(e,t);break}case j.LI:{Rrt(e);break}case j.DD:case j.DT:{krt(e,t);break}case j.H1:case j.H2:case j.H3:case j.H4:case j.H5:case j.H6:{Prt(e);break}case j.BR:{Ort(e);break}case j.BODY:{Srt(e,t);break}case j.HTML:{Trt(e,t);break}case j.FORM:{Art(e);break}case j.APPLET:case j.OBJECT:case j.MARQUEE:{Nrt(e,t);break}case j.TEMPLATE:{Zb(e,t);break}default:Dxe(e,t)}}function Mxe(e,t){e.tmplInsertionModeStack.length>0?Uxe(e,t):rK(e,t)}function Drt(e,t){var n;t.tagID===j.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function Mrt(e,t){e._err(t,Je.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function gB(e,t){if(Rxe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=be.IN_TABLE_TEXT,t.type){case hr.CHARACTER:{Lxe(e,t);break}case hr.WHITESPACE_CHARACTER:{$xe(e,t);break}}else aR(e,t)}function $rt(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,at.HTML),e.insertionMode=be.IN_CAPTION}function Lrt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,at.HTML),e.insertionMode=be.IN_COLUMN_GROUP}function Frt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Be.COLGROUP,j.COLGROUP),e.insertionMode=be.IN_COLUMN_GROUP,iK(e,t)}function jrt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,at.HTML),e.insertionMode=be.IN_TABLE_BODY}function Brt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Be.TBODY,j.TBODY),e.insertionMode=be.IN_TABLE_BODY,wF(e,t)}function zrt(e,t){e.openElements.hasInTableScope(j.TABLE)&&(e.openElements.popUntilTagNamePopped(j.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function Urt(e,t){Oxe(t)?e._appendElement(t,at.HTML):aR(e,t),t.ackSelfClosing=!0}function Vrt(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,at.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function Kx(e,t){switch(t.tagID){case j.TD:case j.TH:case j.TR:{Brt(e,t);break}case j.STYLE:case j.SCRIPT:case j.TEMPLATE:{th(e,t);break}case j.COL:{Frt(e,t);break}case j.FORM:{Vrt(e,t);break}case j.TABLE:{zrt(e,t);break}case j.TBODY:case j.TFOOT:case j.THEAD:{jrt(e,t);break}case j.INPUT:{Urt(e,t);break}case j.CAPTION:{$rt(e,t);break}case j.COLGROUP:{Lrt(e,t);break}default:aR(e,t)}}function E2(e,t){switch(t.tagID){case j.TABLE:{e.openElements.hasInTableScope(j.TABLE)&&(e.openElements.popUntilTagNamePopped(j.TABLE),e._resetInsertionMode());break}case j.TEMPLATE:{Zb(e,t);break}case j.BODY:case j.CAPTION:case j.COL:case j.COLGROUP:case j.HTML:case j.TBODY:case j.TD:case j.TFOOT:case j.TH:case j.THEAD:case j.TR:break;default:aR(e,t)}}function aR(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,bF(e,t),e.fosterParentingEnabled=n}function $xe(e,t){e.pendingCharacterTokens.push(t)}function Lxe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function VT(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)aR(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const Fxe=new Set([j.CAPTION,j.COL,j.COLGROUP,j.TBODY,j.TD,j.TFOOT,j.TH,j.THEAD,j.TR]);function Hrt(e,t){const n=t.tagID;Fxe.has(n)?e.openElements.hasInTableScope(j.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(j.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=be.IN_TABLE,Kx(e,t)):uu(e,t)}function qrt(e,t){const n=t.tagID;switch(n){case j.CAPTION:case j.TABLE:{e.openElements.hasInTableScope(j.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(j.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=be.IN_TABLE,n===j.TABLE&&E2(e,t));break}case j.BODY:case j.COL:case j.COLGROUP:case j.HTML:case j.TBODY:case j.TD:case j.TFOOT:case j.TH:case j.THEAD:case j.TR:break;default:_F(e,t)}}function iK(e,t){switch(t.tagID){case j.HTML:{uu(e,t);break}case j.COL:{e._appendElement(t,at.HTML),t.ackSelfClosing=!0;break}case j.TEMPLATE:{th(e,t);break}default:TM(e,t)}}function Wrt(e,t){switch(t.tagID){case j.COLGROUP:{e.openElements.currentTagId===j.COLGROUP&&(e.openElements.pop(),e.insertionMode=be.IN_TABLE);break}case j.TEMPLATE:{Zb(e,t);break}case j.COL:break;default:TM(e,t)}}function TM(e,t){e.openElements.currentTagId===j.COLGROUP&&(e.openElements.pop(),e.insertionMode=be.IN_TABLE,e._processToken(t))}function wF(e,t){switch(t.tagID){case j.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,at.HTML),e.insertionMode=be.IN_ROW;break}case j.TH:case j.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Be.TR,j.TR),e.insertionMode=be.IN_ROW,xF(e,t);break}case j.CAPTION:case j.COL:case j.COLGROUP:case j.TBODY:case j.TFOOT:case j.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=be.IN_TABLE,Kx(e,t));break}default:Kx(e,t)}}function w7(e,t){const n=t.tagID;switch(t.tagID){case j.TBODY:case j.TFOOT:case j.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=be.IN_TABLE);break}case j.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=be.IN_TABLE,E2(e,t));break}case j.BODY:case j.CAPTION:case j.COL:case j.COLGROUP:case j.HTML:case j.TD:case j.TH:case j.TR:break;default:E2(e,t)}}function xF(e,t){switch(t.tagID){case j.TH:case j.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,at.HTML),e.insertionMode=be.IN_CELL,e.activeFormattingElements.insertMarker();break}case j.CAPTION:case j.COL:case j.COLGROUP:case j.TBODY:case j.TFOOT:case j.THEAD:case j.TR:{e.openElements.hasInTableScope(j.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=be.IN_TABLE_BODY,wF(e,t));break}default:Kx(e,t)}}function jxe(e,t){switch(t.tagID){case j.TR:{e.openElements.hasInTableScope(j.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=be.IN_TABLE_BODY);break}case j.TABLE:{e.openElements.hasInTableScope(j.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=be.IN_TABLE_BODY,w7(e,t));break}case j.TBODY:case j.TFOOT:case j.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(j.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=be.IN_TABLE_BODY,w7(e,t));break}case j.BODY:case j.CAPTION:case j.COL:case j.COLGROUP:case j.HTML:case j.TD:case j.TH:break;default:E2(e,t)}}function Grt(e,t){const n=t.tagID;Fxe.has(n)?(e.openElements.hasInTableScope(j.TD)||e.openElements.hasInTableScope(j.TH))&&(e._closeTableCell(),xF(e,t)):uu(e,t)}function Yrt(e,t){const n=t.tagID;switch(n){case j.TD:case j.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=be.IN_ROW);break}case j.TABLE:case j.TBODY:case j.TFOOT:case j.THEAD:case j.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),jxe(e,t));break}case j.BODY:case j.CAPTION:case j.COL:case j.COLGROUP:case j.HTML:break;default:_F(e,t)}}function Bxe(e,t){switch(t.tagID){case j.HTML:{uu(e,t);break}case j.OPTION:{e.openElements.currentTagId===j.OPTION&&e.openElements.pop(),e._insertElement(t,at.HTML);break}case j.OPTGROUP:{e.openElements.currentTagId===j.OPTION&&e.openElements.pop(),e.openElements.currentTagId===j.OPTGROUP&&e.openElements.pop(),e._insertElement(t,at.HTML);break}case j.INPUT:case j.KEYGEN:case j.TEXTAREA:case j.SELECT:{e.openElements.hasInSelectScope(j.SELECT)&&(e.openElements.popUntilTagNamePopped(j.SELECT),e._resetInsertionMode(),t.tagID!==j.SELECT&&e._processStartTag(t));break}case j.SCRIPT:case j.TEMPLATE:{th(e,t);break}}}function zxe(e,t){switch(t.tagID){case j.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===j.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===j.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===j.OPTGROUP&&e.openElements.pop();break}case j.OPTION:{e.openElements.currentTagId===j.OPTION&&e.openElements.pop();break}case j.SELECT:{e.openElements.hasInSelectScope(j.SELECT)&&(e.openElements.popUntilTagNamePopped(j.SELECT),e._resetInsertionMode());break}case j.TEMPLATE:{Zb(e,t);break}}}function Krt(e,t){const n=t.tagID;n===j.CAPTION||n===j.TABLE||n===j.TBODY||n===j.TFOOT||n===j.THEAD||n===j.TR||n===j.TD||n===j.TH?(e.openElements.popUntilTagNamePopped(j.SELECT),e._resetInsertionMode(),e._processStartTag(t)):Bxe(e,t)}function Xrt(e,t){const n=t.tagID;n===j.CAPTION||n===j.TABLE||n===j.TBODY||n===j.TFOOT||n===j.THEAD||n===j.TR||n===j.TD||n===j.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(j.SELECT),e._resetInsertionMode(),e.onEndTag(t)):zxe(e,t)}function Qrt(e,t){switch(t.tagID){case j.BASE:case j.BASEFONT:case j.BGSOUND:case j.LINK:case j.META:case j.NOFRAMES:case j.SCRIPT:case j.STYLE:case j.TEMPLATE:case j.TITLE:{th(e,t);break}case j.CAPTION:case j.COLGROUP:case j.TBODY:case j.TFOOT:case j.THEAD:{e.tmplInsertionModeStack[0]=be.IN_TABLE,e.insertionMode=be.IN_TABLE,Kx(e,t);break}case j.COL:{e.tmplInsertionModeStack[0]=be.IN_COLUMN_GROUP,e.insertionMode=be.IN_COLUMN_GROUP,iK(e,t);break}case j.TR:{e.tmplInsertionModeStack[0]=be.IN_TABLE_BODY,e.insertionMode=be.IN_TABLE_BODY,wF(e,t);break}case j.TD:case j.TH:{e.tmplInsertionModeStack[0]=be.IN_ROW,e.insertionMode=be.IN_ROW,xF(e,t);break}default:e.tmplInsertionModeStack[0]=be.IN_BODY,e.insertionMode=be.IN_BODY,uu(e,t)}}function Jrt(e,t){t.tagID===j.TEMPLATE&&Zb(e,t)}function Uxe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(j.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):rK(e,t)}function Zrt(e,t){t.tagID===j.HTML?uu(e,t):CM(e,t)}function Vxe(e,t){var n;if(t.tagID===j.HTML){if(e.fragmentContext||(e.insertionMode=be.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===j.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else CM(e,t)}function CM(e,t){e.insertionMode=be.IN_BODY,bF(e,t)}function eit(e,t){switch(t.tagID){case j.HTML:{uu(e,t);break}case j.FRAMESET:{e._insertElement(t,at.HTML);break}case j.FRAME:{e._appendElement(t,at.HTML),t.ackSelfClosing=!0;break}case j.NOFRAMES:{th(e,t);break}}}function tit(e,t){t.tagID===j.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==j.FRAMESET&&(e.insertionMode=be.AFTER_FRAMESET))}function nit(e,t){switch(t.tagID){case j.HTML:{uu(e,t);break}case j.NOFRAMES:{th(e,t);break}}}function rit(e,t){t.tagID===j.HTML&&(e.insertionMode=be.AFTER_AFTER_FRAMESET)}function iit(e,t){t.tagID===j.HTML?uu(e,t):aD(e,t)}function aD(e,t){e.insertionMode=be.IN_BODY,bF(e,t)}function sit(e,t){switch(t.tagID){case j.HTML:{uu(e,t);break}case j.NOFRAMES:{th(e,t);break}}}function oit(e,t){t.chars=rs,e._insertCharacters(t)}function ait(e,t){e._insertCharacters(t),e.framesetOk=!1}function Hxe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==at.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function uit(e,t){if(Ent(t))Hxe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===at.MATHML?Axe(t):r===at.SVG&&(Snt(t),Ixe(t)),tK(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function lit(e,t){if(t.tagID===j.P||t.tagID===j.BR){Hxe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===at.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Be.AREA,Be.BASE,Be.BASEFONT,Be.BGSOUND,Be.BR,Be.COL,Be.EMBED,Be.FRAME,Be.HR,Be.IMG,Be.INPUT,Be.KEYGEN,Be.LINK,Be.META,Be.PARAM,Be.SOURCE,Be.TRACK,Be.WBR;const cit=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),jue={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function qxe(e,t){const n=_it(e),r=dxe("type",{handlers:{root:dit,element:fit,text:hit,comment:Gxe,doctype:pit,raw:git},unknown:yit}),i={parser:n?new $ue(jue):$ue.getFragmentParser(void 0,jue),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),mS(i,Mp());const s=n?i.parser.document:i.parser.getFragment(),o=xtt(s,{file:i.options.file});return i.stitches&&QY(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const d=l.children;return d[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function Wxe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function dit(e,t){Wxe(e.children,t)}function fit(e,t){vit(e,t),Wxe(e.children,t),bit(e,t)}function hit(e,t){t.parser.tokenizer.state>4&&(t.parser.tokenizer.state=0);const n={type:hr.CHARACTER,chars:e.value,location:uR(e)};mS(t,Mp(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function pit(e,t){const n={type:hr.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:uR(e)};mS(t,Mp(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function mit(e,t){t.stitches=!0;const n=wit(e);if("children"in e&&"children"in n){const r=qxe({type:"root",children:e.children},t.options);n.children=r.children}Gxe({type:"comment",value:{stitch:n}},t)}function Gxe(e,t){const n=e.value,r={type:hr.COMMENT,data:n,location:uR(e)};mS(t,Mp(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function git(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,Yxe(t,Mp(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function yit(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))mit(n,t);else{let r="";throw cit.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function mS(e,t){Yxe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=Bs.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function Yxe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function vit(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===Bs.PLAINTEXT)return;mS(t,Mp(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:M1.html;i===M1.html&&n==="svg"&&(i=M1.svg);const s=Att({...e,children:[]},{space:i===M1.svg?"svg":"html"}),o={type:hr.START_TAG,tagName:n,tagID:pS(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:uR(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function bit(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&Mtt.includes(n)||t.parser.tokenizer.state===Bs.PLAINTEXT)return;mS(t,mF(e));const r={type:hr.END_TAG,tagName:n,tagID:pS(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:uR(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===Bs.RCDATA||t.parser.tokenizer.state===Bs.RAWTEXT||t.parser.tokenizer.state===Bs.SCRIPT_DATA)&&(t.parser.tokenizer.state=Bs.DATA)}function _it(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function uR(e){const t=Mp(e)||{line:void 0,column:void 0,offset:void 0},n=mF(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function wit(e){return"children"in e?Yx({...e,children:[]}):Yx(e)}function xit(e){return function(t,n){return qxe(t,{...e,file:n})}}function Ou({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return _.jsx(av,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return _.jsx(dt,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return _.jsx(Ki,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return _.jsx(Ki,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return _.jsx(Ki,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return _.jsx(Ki,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return _.jsx(Ki,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return _.jsx(Ki,{...s,order:6,...s,pb:12})},a({node:i,...s}){return _.jsx(Yb,{...s,ref:void 0})},ul({node:i,...s}){return _.jsx(Cf,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return _.jsx(Cf,{type:"ordered",withPadding:!0,...o,pb:8})}};return _.jsx(ltt,{components:n,rehypePlugins:[xit],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function x7({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return _.jsx(Ou,{text:n})}const Eit="https://github.com/revisit-studies/study/tree/main/public/";function Sit({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=Mc();return _.jsx(ei.Main,{children:_.jsxs(Zf,{size:"xs",px:"xs",children:[_.jsx(av,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${$c}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),_.jsx(dt,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=Twe(i);return _.jsx(Ps,{onClick:()=>{r(`/${o}`)},my:"sm",style:{width:"100%"},children:_.jsxs(Kb,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(dt,{fw:"bold",children:i}),_.jsxs(Gt,{align:"center",direction:"row",children:[_.jsx(Fae,{color:"red"}),_.jsx(dt,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),_.jsx(x7,{issues:s.errors,type:"error"})]}):_.jsxs(_.Fragment,{children:[_.jsx(dt,{fw:"bold",children:s.studyMetadata.title}),_.jsxs(dt,{c:"dimmed",children:[_.jsx(dt,{span:!0,fw:500,children:"Authors: "}),s.studyMetadata.authors]}),_.jsx(dt,{c:"dimmed",children:s.studyMetadata.description}),_.jsx(dt,{c:"dimmed",ta:"right",style:{paddingRight:5},children:_.jsxs(Yb,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${Eit}${o}`,children:["View source:"," ",o]})})]}),s.warnings.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs(Gt,{align:"center",direction:"row",children:[_.jsx(Fae,{color:"orange"}),_.jsx(dt,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),_.jsx(x7,{issues:s.warnings,type:"warning"})]})]})},i)})]})})}var yB={exports:{}},vB={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bue;function Tit(){if(Bue)return vB;Bue=1;var e=mL();function t(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,o=e.useMemo,a=e.useDebugValue;return vB.useSyncExternalStoreWithSelector=function(u,l,c,d,f){var h=i(null);if(h.current===null){var p={hasValue:!1,value:null};h.current=p}else p=h.current;h=o(function(){function y(E){if(!v){if(v=!0,w=E,E=d(E),f!==void 0&&p.hasValue){var T=p.value;if(f(T,E))return x=T}return x=E}if(T=x,n(w,E))return T;var A=d(E);return f!==void 0&&f(T,A)?T:(w=E,x=A)}var v=!1,w,x,S=c===void 0?null:c;return[function(){return y(l())},S===null?void 0:function(){return y(S())}]},[l,c,d,f]);var m=r(u,h[0],h[1]);return s(function(){p.hasValue=!0,p.value=m},[m]),a(m),m},vB}var zue;function Cit(){return zue||(zue=1,yB.exports=Tit()),yB.exports}var Ait=Cit(),lc="default"in lM?Is:lM,Uue=Symbol.for("react-redux-context"),Vue=typeof globalThis<"u"?globalThis:{};function Iit(){if(!lc.createContext)return{};const e=Vue[Uue]??(Vue[Uue]=new Map);let t=e.get(lc.createContext);return t||(t=lc.createContext(null),e.set(lc.createContext,t)),t}var _y=Iit(),Rit=()=>{throw new Error("uSES not initialized!")};function sK(e=_y){return function(){return lc.useContext(e)}}var Kxe=sK(),Xxe=Rit,kit=e=>{Xxe=e},Pit=(e,t)=>e===t;function Nit(e=_y){const t=e===_y?Kxe:sK(e),n=(r,i={})=>{const{equalityFn:s=Pit,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:d}=t();lc.useRef(!0);const f=lc.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=Xxe(u.addNestedSub,a.getState,l||a.getState,f,s);return lc.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var Oit=Nit();function Dit(e){e()}function Mit(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Dit(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Hue={notify(){},get:()=>[]};function $it(e,t){let n,r=Hue,i=0,s=!1;function o(m){c();const y=r.subscribe(m);let v=!1;return()=>{v||(v=!0,y(),d())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=Mit())}function d(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Hue)}function f(){s||(s=!0,c())}function h(){s&&(s=!1,d())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:f,tryUnsubscribe:h,getListeners:()=>r};return p}var Lit=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Fit=typeof navigator<"u"&&navigator.product==="ReactNative",jit=Lit||Fit?lc.useLayoutEffect:lc.useEffect;function Bit({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=lc.useMemo(()=>{const l=$it(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=lc.useMemo(()=>e.getState(),[e]);jit(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||_y;return lc.createElement(u.Provider,{value:o},n)}var zit=Bit;function Qxe(e=_y){const t=e===_y?Kxe:sK(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var Uit=Qxe();function Vit(e=_y){const t=e===_y?Uit:Qxe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Jxe=Vit();kit(Ait.useSyncExternalStoreWithSelector);function da(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Hit=typeof Symbol=="function"&&Symbol.observable||"@@observable",que=Hit,bB=()=>Math.random().toString(36).substring(7).split("").join("."),qit={INIT:`@@redux/INIT${bB()}`,REPLACE:`@@redux/REPLACE${bB()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${bB()}`},AM=qit;function oK(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Zxe(e,t,n){if(typeof e!="function")throw new Error(da(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(da(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(da(1));return n(Zxe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((y,v)=>{o.set(v,y)}))}function c(){if(u)throw new Error(da(3));return i}function d(y){if(typeof y!="function")throw new Error(da(4));if(u)throw new Error(da(5));let v=!0;l();const w=a++;return o.set(w,y),function(){if(v){if(u)throw new Error(da(6));v=!1,l(),o.delete(w),s=null}}}function f(y){if(!oK(y))throw new Error(da(7));if(typeof y.type>"u")throw new Error(da(8));if(typeof y.type!="string")throw new Error(da(17));if(u)throw new Error(da(9));try{u=!0,i=r(i,y)}finally{u=!1}return(s=o).forEach(w=>{w()}),y}function h(y){if(typeof y!="function")throw new Error(da(10));r=y,f({type:AM.REPLACE})}function p(){const y=d;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(da(11));function w(){const S=v;S.next&&S.next(c())}return w(),{unsubscribe:y(w)}},[que](){return this}}}return f({type:AM.INIT}),{dispatch:f,subscribe:d,getState:c,replaceReducer:h,[que]:p}}function Wit(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:AM.INIT})>"u")throw new Error(da(12));if(typeof n(void 0,{type:AM.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(da(13))})}function Git(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{Wit(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const d=r[c],f=n[d],h=o[d],p=f(h,a);if(typeof p>"u")throw a&&a.type,new Error(da(14));l[d]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function IM(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Yit(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(da(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=IM(...a)(i.dispatch),{...i,dispatch:s}}}function Kit(e){return oK(e)&&"type"in e&&typeof e.type=="string"}var eEe=Symbol.for("immer-nothing"),Wue=Symbol.for("immer-draftable"),Ec=Symbol.for("immer-state");function hf(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Xx=Object.getPrototypeOf;function wy(e){return!!e&&!!e[Ec]}function ig(e){var t;return e?tEe(e)||Array.isArray(e)||!!e[Wue]||!!((t=e.constructor)!=null&&t[Wue])||SF(e)||TF(e):!1}var Xit=Object.prototype.constructor.toString();function tEe(e){if(!e||typeof e!="object")return!1;const t=Xx(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Xit}function RM(e,t){EF(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function EF(e){const t=e[Ec];return t?t.type_:Array.isArray(e)?1:SF(e)?2:TF(e)?3:0}function E7(e,t){return EF(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function nEe(e,t,n){const r=EF(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Qit(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function SF(e){return e instanceof Map}function TF(e){return e instanceof Set}function f1(e){return e.copy_||e.base_}function S7(e,t){if(SF(e))return new Map(e);if(TF(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=tEe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Ec];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(Xx(e),r)}else{const r=Xx(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function aK(e,t=!1){return CF(e)||wy(e)||!ig(e)||(EF(e)>1&&(e.set=e.add=e.clear=e.delete=Jit),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>aK(r,!0))),e}function Jit(){hf(2)}function CF(e){return Object.isFrozen(e)}var Zit={};function db(e){const t=Zit[e];return t||hf(0,e),t}var S2;function rEe(){return S2}function est(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Gue(e,t){t&&(db("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function T7(e){C7(e),e.drafts_.forEach(tst),e.drafts_=null}function C7(e){e===S2&&(S2=e.parent_)}function Yue(e){return S2=est(S2,e)}function tst(e){const t=e[Ec];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Kue(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Ec].modified_&&(T7(t),hf(4)),ig(e)&&(e=kM(t,e),t.parent_||PM(t,e)),t.patches_&&db("Patches").generateReplacementPatches_(n[Ec].base_,e,t.patches_,t.inversePatches_)):e=kM(t,n,[]),T7(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==eEe?e:void 0}function kM(e,t,n){if(CF(t))return t;const r=t[Ec];if(!r)return RM(t,(i,s)=>Xue(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return PM(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),RM(s,(a,u)=>Xue(e,r,i,a,u,n,o)),PM(e,i,!1),n&&e.patches_&&db("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Xue(e,t,n,r,i,s,o){if(wy(i)){const a=s&&t&&t.type_!==3&&!E7(t.assigned_,r)?s.concat(r):void 0,u=kM(e,i,a);if(nEe(n,r,u),wy(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(ig(i)&&!CF(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;kM(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&PM(e,i)}}function PM(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&aK(t,n)}function nst(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:rEe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=uK;n&&(i=[r],s=T2);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var uK={get(e,t){if(t===Ec)return e;const n=f1(e);if(!E7(n,t))return rst(e,n,t);const r=n[t];return e.finalized_||!ig(r)?r:r===_B(e.base_,t)?(wB(e),e.copy_[t]=I7(r,e)):r},has(e,t){return t in f1(e)},ownKeys(e){return Reflect.ownKeys(f1(e))},set(e,t,n){const r=iEe(f1(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=_B(f1(e),t),s=i==null?void 0:i[Ec];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Qit(n,i)&&(n!==void 0||E7(e.base_,t)))return!0;wB(e),A7(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return _B(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,wB(e),A7(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=f1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){hf(11)},getPrototypeOf(e){return Xx(e.base_)},setPrototypeOf(){hf(12)}},T2={};RM(uK,(e,t)=>{T2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});T2.deleteProperty=function(e,t){return T2.set.call(this,e,t,void 0)};T2.set=function(e,t,n){return uK.set.call(this,e[0],t,n,e[0])};function _B(e,t){const n=e[Ec];return(n?f1(n):e)[t]}function rst(e,t,n){var i;const r=iEe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function iEe(e,t){if(!(t in e))return;let n=Xx(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Xx(n)}}function A7(e){e.modified_||(e.modified_=!0,e.parent_&&A7(e.parent_))}function wB(e){e.copy_||(e.copy_=S7(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var ist=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&hf(6),r!==void 0&&typeof r!="function"&&hf(7);let i;if(ig(t)){const s=Yue(this),o=I7(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?T7(s):C7(s)}return Gue(s,r),Kue(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===eEe&&(i=void 0),this.autoFreeze_&&aK(i,!0),r){const s=[],o=[];db("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else hf(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ig(e)||hf(8),wy(e)&&(e=sEe(e));const t=Yue(this),n=I7(e,void 0);return n[Ec].isManual_=!0,C7(t),n}finishDraft(e,t){const n=e&&e[Ec];(!n||!n.isManual_)&&hf(9);const{scope_:r}=n;return Gue(r,t),Kue(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=db("Patches").applyPatches_;return wy(e)?r(e,t):this.produce(e,i=>r(i,t))}};function I7(e,t){const n=SF(e)?db("MapSet").proxyMap_(e,t):TF(e)?db("MapSet").proxySet_(e,t):nst(e,t);return(t?t.scope_:rEe()).drafts_.push(n),n}function sEe(e){return wy(e)||hf(10,e),oEe(e)}function oEe(e){if(!ig(e)||CF(e))return e;const t=e[Ec];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=S7(e,t.scope_.immer_.useStrictShallowCopy_)}else n=S7(e,!0);return RM(n,(r,i)=>{nEe(n,r,oEe(i))}),t&&(t.finalized_=!1),n}var Sc=new ist,aEe=Sc.produce;Sc.produceWithPatches.bind(Sc);Sc.setAutoFreeze.bind(Sc);Sc.setUseStrictShallowCopy.bind(Sc);Sc.applyPatches.bind(Sc);Sc.createDraft.bind(Sc);Sc.finishDraft.bind(Sc);function sst(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function ost(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function ast(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var Que=e=>Array.isArray(e)?e:[e];function ust(e){const t=Array.isArray(e[0])?e[0]:e;return ast(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function lst(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var cst=class{constructor(e){this.value=e}deref(){return this.value}},dst=typeof WeakRef<"u"?WeakRef:cst,fst=0,Jue=1;function YP(){return{s:fst,v:void 0,o:null,p:null}}function lK(e,t={}){let n=YP();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var d;let a=n;const{length:u}=arguments;for(let f=0,h=u;f<h;f++){const p=arguments[f];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const y=m.get(p);y===void 0?(a=YP(),m.set(p,a)):a=y}else{let m=a.p;m===null&&(a.p=m=new Map);const y=m.get(p);y===void 0?(a=YP(),m.set(p,a)):a=y}}const l=a;let c;if(a.s===Jue)c=a.v;else if(c=e.apply(null,arguments),s++,r){const f=((d=i==null?void 0:i.deref)==null?void 0:d.call(i))??i;f!=null&&r(f,c)&&(c=f,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new dst(c):c}return l.s=Jue,l.v=c,c}return o.clearCache=()=>{n=YP(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function uEe(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),sst(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:d,memoizeOptions:f=[],argsMemoize:h=lK,argsMemoizeOptions:p=[]}=c,m=Que(f),y=Que(p),v=ust(i),w=d(function(){return s++,l.apply(null,arguments)},...m),x=h(function(){o++;const E=lst(v,arguments);return a=w.apply(null,E),a},...y);return Object.assign(x,{resultFunc:l,memoizedResultFunc:w,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:d,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var hst=uEe(lK),pst=Object.assign((e,t=hst)=>{ost(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>pst});function lEe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var mst=lEe(),gst=lEe,yst=(...e)=>{const t=uEe(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(wy(o)?sEe(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};yst(lK);var vst=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?IM:IM.apply(null,arguments)};function Qx(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(xl(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>Kit(r)&&r.type===e,n}var cEe=class MC extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,MC.prototype)}static get[Symbol.species](){return MC}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new MC(...t[0].concat(this)):new MC(...t.concat(this))}};function Zue(e){return ig(e)?aEe(e,()=>{}):e}function ele(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(xl(10));const r=n.insert(t,e);return e.set(t,r),r}function bst(e){return typeof e=="boolean"}var _st=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new cEe;return n&&(bst(n)?o.push(mst):o.push(gst(n.extraArgument))),o},wst="RTK_autoBatch",dEe=e=>t=>{setTimeout(t,e)},xst=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:dEe(10),Est=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?xst:e.type==="callback"?e.queueNotification:dEe(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const d=()=>i&&c(),f=r.subscribe(d);return a.add(c),()=>{f(),a.delete(c)}},dispatch(c){var d;try{return i=!((d=c==null?void 0:c.meta)!=null&&d[wst]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},Sst=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new cEe(e);return r&&i.push(Est(typeof r=="object"?r:void 0)),i};function Tst(e){const t=_st(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(oK(n))a=Git(n);else throw new Error(xl(1));let u;typeof r=="function"?u=r(t):u=t();let l=IM;i&&(l=vst({trace:!1,...typeof i=="object"&&i}));const c=Yit(...u),d=Sst(c);let f=typeof o=="function"?o(d):d();const h=l(...f);return Zxe(a,s,h)}function fEe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(xl(28));if(a in t)throw new Error(xl(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function Cst(e){return typeof e=="function"}function Ast(e,t){let[n,r,i]=fEe(t),s;if(Cst(e))s=()=>Zue(e());else{const a=Zue(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,d)=>{if(d)if(wy(c)){const h=d(c,u);return h===void 0?c:h}else{if(ig(c))return aEe(c,f=>d(f,u));{const f=d(c,u);if(f===void 0){if(c===null)return c;throw new Error(xl(9))}return f}}return c},a)}return o.getInitialState=s,o}var Ist="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Rst=(e=21)=>{let t="",n=e;for(;n--;)t+=Ist[Math.random()*64|0];return t},kst=Symbol.for("rtk-slice-createasyncthunk");function Pst(e,t){return`${e}/${t}`}function Nst({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[kst];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(xl(11));const a=(typeof i.reducers=="function"?i.reducers(Mst()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(x,S){const E=typeof x=="string"?x:x.type;if(!E)throw new Error(xl(12));if(E in l.sliceCaseReducersByType)throw new Error(xl(13));return l.sliceCaseReducersByType[E]=S,c},addMatcher(x,S){return l.sliceMatchers.push({matcher:x,reducer:S}),c},exposeAction(x,S){return l.actionCreators[x]=S,c},exposeCaseReducer(x,S){return l.sliceCaseReducersByName[x]=S,c}};u.forEach(x=>{const S=a[x],E={reducerName:x,type:Pst(s,x),createNotation:typeof i.reducers=="function"};Lst(S)?jst(E,S,c,t):$st(E,S,c)});function d(){const[x={},S=[],E=void 0]=typeof i.extraReducers=="function"?fEe(i.extraReducers):[i.extraReducers],T={...x,...l.sliceCaseReducersByType};return Ast(i.initialState,A=>{for(let I in T)A.addCase(I,T[I]);for(let I of l.sliceMatchers)A.addMatcher(I.matcher,I.reducer);for(let I of S)A.addMatcher(I.matcher,I.reducer);E&&A.addDefaultCase(E)})}const f=x=>x,h=new Map;let p;function m(x,S){return p||(p=d()),p(x,S)}function y(){return p||(p=d()),p.getInitialState()}function v(x,S=!1){function E(A){let I=A[x];return typeof I>"u"&&S&&(I=y()),I}function T(A=f){const I=ele(h,S,{insert:()=>new WeakMap});return ele(I,A,{insert:()=>{const k={};for(const[D,M]of Object.entries(i.selectors??{}))k[D]=Ost(M,A,y,S);return k}})}return{reducerPath:x,getSelectors:T,get selectors(){return T(E)},selectSlice:E}}const w={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:y,...v(o),injectInto(x,{reducerPath:S,...E}={}){const T=S??o;return x.inject({reducerPath:T,reducer:m},E),{...w,...v(T,!0)}}};return w}}function Ost(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var Dst=Nst();function Mst(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function $st({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Fst(r))throw new Error(xl(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?Qx(e,o):Qx(e))}function Lst(e){return e._reducerDefinitionType==="asyncThunk"}function Fst(e){return e._reducerDefinitionType==="reducerWithPrepare"}function jst({type:e,reducerName:t},n,r,i){if(!i)throw new Error(xl(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,d=i(e,s,c);r.exposeAction(t,d),o&&r.addCase(d.fulfilled,o),a&&r.addCase(d.pending,a),u&&r.addCase(d.rejected,u),l&&r.addMatcher(d.settled,l),r.exposeCaseReducer(t,{fulfilled:o||KP,pending:a||KP,rejected:u||KP,settled:l||KP})}function KP(){}var Bst=(e,t)=>{if(typeof e!="function")throw new Error(xl(32))},cK="listenerMiddleware",zst=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=Qx(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(xl(21));return Bst(s),{predicate:i,type:t,effect:s}},Ust=Object.assign(e=>{const{type:t,predicate:n,effect:r}=zst(e);return{id:Rst(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(xl(22))}}},{withTypes:()=>Ust}),Vst=Object.assign(Qx(`${cK}/add`),{withTypes:()=>Vst});Qx(`${cK}/removeAll`);var Hst=Object.assign(Qx(`${cK}/remove`),{withTypes:()=>Hst});function xl(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Di={};function qst(e){return!!(e&&typeof e.then=="function")}function NM(e){return e||(e=0),new Promise(function(t){return setTimeout(t,e)})}function Wst(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function AF(){return Math.random().toString(36).substring(2)}var tle=0,xB=0;function IF(){var e=new Date().getTime();return e===tle?(xB++,e*1e3+xB):(tle=e,xB=0,e*1e3)}var lR=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",Gst=IF,Yst="native";function Kst(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(n){t.messagesCallback&&t.messagesCallback(n.data)},t}function Xst(e){e.bc.close(),e.subFns=[]}function Qst(e,t){try{return e.bc.postMessage(t,!1),Promise.resolve()}catch(n){return Promise.reject(n)}}function Jst(e,t){e.messagesCallback=t}function Zst(){if(lR&&typeof window>"u")return!1;if(typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function eot(){return 150}const tot={create:Kst,close:Xst,onMessage:Jst,postMessage:Qst,canBeUsed:Zst,type:Yst,averageResponseTime:eot,microSeconds:Gst};var hEe=function(){function e(t){this.ttl=t,this.set=new Set,this.timeMap=new Map}return e.prototype.has=function(t){return this.set.has(t)},e.prototype.add=function(t){var n=this;this.timeMap.set(t,pEe()),this.set.add(t),setTimeout(function(){not(n)},0)},e.prototype.clear=function(){this.set.clear(),this.timeMap.clear()},e}();function not(e){for(var t=pEe()-e.ttl,n=e.set[Symbol.iterator]();;){var r=n.next().value;if(!r)return;var i=e.timeMap.get(r);if(i<t)e.timeMap.delete(r),e.set.delete(r);else return}}function pEe(){return new Date().getTime()}function RF(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return typeof t.webWorkerSupport>"u"&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=1e3*45),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&typeof e.idb.onclose=="function"&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=1e3*60),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=1e3*60*2),typeof t.node.useFastPath>"u"&&(t.node.useFastPath=!0),t}var rot=IF,iot="pubkey.broadcast-channel-0-",sg="messages",sot="idb";function mEe(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function oot(e){var t=mEe(),n=iot+e,r=t.open(n,1);r.onupgradeneeded=function(s){var o=s.target.result;o.createObjectStore(sg,{keyPath:"id",autoIncrement:!0})};var i=new Promise(function(s,o){r.onerror=function(a){return o(a)},r.onsuccess=function(){s(r.result)}});return i}function aot(e,t,n){var r=new Date().getTime(),i={uuid:t,time:r,data:n},s=e.transaction([sg],"readwrite");return new Promise(function(o,a){s.oncomplete=function(){return o()},s.onerror=function(l){return a(l)};var u=s.objectStore(sg);u.add(i)})}function uot(e,t){var n=e.transaction(sg).objectStore(sg),r=[];function i(){try{var s=IDBKeyRange.bound(t+1,1/0);return n.openCursor(s)}catch{return n.openCursor()}}return new Promise(function(s){i().onsuccess=function(o){var a=o.target.result;a?a.value.id<t+1?a.continue(t+1):(r.push(a.value),a.continue()):s(r)}})}function lot(e,t){var n=e.transaction([sg],"readwrite").objectStore(sg).delete(t);return new Promise(function(r){n.onsuccess=function(){return r()}})}function cot(e,t){var n=new Date().getTime()-t,r=e.transaction(sg).objectStore(sg),i=[];return new Promise(function(s){r.openCursor().onsuccess=function(o){var a=o.target.result;if(a){var u=a.value;if(u.time<n)i.push(u),a.continue();else{s(i);return}}else s(i)}})}function dot(e,t){return cot(e,t).then(function(n){return Promise.all(n.map(function(r){return lot(e,r.id)}))})}function fot(e,t){return t=RF(t),oot(e).then(function(n){var r={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:AF(),eMIs:new hEe(t.idb.ttl*2),writeBlockPromise:Promise.resolve(),messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){r.closed=!0,t.idb.onclose&&t.idb.onclose()},gEe(r),r})}function gEe(e){e.closed||yEe(e).then(function(){return NM(e.options.idb.fallbackInterval)}).then(function(){return gEe(e)})}function hot(e,t){return!(e.uuid===t.uuid||t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime)}function yEe(e){return e.closed||!e.messagesCallback?Promise.resolve():uot(e.db,e.lastCursorId).then(function(t){var n=t.filter(function(r){return!!r}).map(function(r){return r.id>e.lastCursorId&&(e.lastCursorId=r.id),r}).filter(function(r){return hot(r,e)}).sort(function(r,i){return r.time-i.time});return n.forEach(function(r){e.messagesCallback&&(e.eMIs.add(r.id),e.messagesCallback(r.data))}),Promise.resolve()})}function pot(e){e.closed=!0,e.db.close()}function mot(e,t){return e.writeBlockPromise=e.writeBlockPromise.then(function(){return aot(e.db,e.uuid,t)}).then(function(){Wst(0,10)===0&&dot(e.db,e.options.idb.ttl)}),e.writeBlockPromise}function got(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,yEe(e)}function yot(){if(lR)return!1;var e=mEe();return!!e}function vot(e){return e.idb.fallbackInterval*2}const bot={create:fot,close:pot,onMessage:got,postMessage:mot,canBeUsed:yot,type:sot,averageResponseTime:vot,microSeconds:rot};var _ot=IF,wot="pubkey.broadcastChannel-",xot="localstorage";function vEe(){var e;if(typeof window>"u")return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return e}function bEe(e){return wot+e}function Eot(e,t){return new Promise(function(n){NM().then(function(){var r=bEe(e.channelName),i={token:AF(),time:new Date().getTime(),data:t,uuid:e.uuid},s=JSON.stringify(i);vEe().setItem(r,s);var o=document.createEvent("Event");o.initEvent("storage",!0,!0),o.key=r,o.newValue=s,window.dispatchEvent(o),n()})})}function Sot(e,t){var n=bEe(e),r=function(s){s.key===n&&t(JSON.parse(s.newValue))};return window.addEventListener("storage",r),r}function Tot(e){window.removeEventListener("storage",e)}function Cot(e,t){if(t=RF(t),!_Ee())throw new Error("BroadcastChannel: localstorage cannot be used");var n=AF(),r=new hEe(t.localstorage.removeTimeout),i={channelName:e,uuid:n,eMIs:r};return i.listener=Sot(e,function(s){i.messagesCallback&&s.uuid!==n&&(!s.token||r.has(s.token)||s.data.time&&s.data.time<i.messagesCallbackTime||(r.add(s.token),i.messagesCallback(s.data)))}),i}function Aot(e){Tot(e.listener)}function Iot(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t}function _Ee(){if(lR)return!1;var e=vEe();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch{return!1}return!0}function Rot(){var e=120,t=navigator.userAgent.toLowerCase();return t.includes("safari")&&!t.includes("chrome")?e*2:e}const kot={create:Cot,close:Aot,onMessage:Iot,postMessage:Eot,canBeUsed:_Ee,type:xot,averageResponseTime:Rot,microSeconds:_ot};var Pot=IF,Not="simulate",dK=new Set;function Oot(e){var t={name:e,messagesCallback:null};return dK.add(t),t}function Dot(e){dK.delete(e)}function Mot(e,t){return new Promise(function(n){return setTimeout(function(){var r=Array.from(dK);r.filter(function(i){return i.name===e.name}).filter(function(i){return i!==e}).filter(function(i){return!!i.messagesCallback}).forEach(function(i){return i.messagesCallback(t)}),n()},5)})}function $ot(e,t){e.messagesCallback=t}function Lot(){return!0}function Fot(){return 5}const jot={create:Oot,close:Dot,onMessage:$ot,postMessage:Mot,canBeUsed:Lot,type:Not,averageResponseTime:Fot,microSeconds:Pot};var R7=[tot,bot,kot];if(lR){var nle=require("../../src/methods/node.js");typeof nle.canBeUsed=="function"&&R7.push(nle)}function wEe(e){var t=[].concat(e.methods,R7).filter(Boolean);if(e.type){if(e.type==="simulate")return jot;var n=t.find(function(i){return i.type===e.type});if(n)return n;throw new Error("method-type "+e.type+" not found")}!e.webWorkerSupport&&!lR&&(t=t.filter(function(i){return i.type!=="idb"}));var r=t.find(function(i){return i.canBeUsed()});if(r)return r;throw new Error("No useable methode found:"+JSON.stringify(R7.map(function(i){return i.type})))}var fK=function(t,n){this.name=t,k7&&(n=k7),this.options=RF(n),this.method=wEe(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,Uot(this)};fK._pubkey=!0;function Bot(e){e=RF(e);var t=wEe(e);return t.type==="node"?t.clearNodeFolder().then(function(){return!0}):Promise.resolve(!1)}var k7;function zot(e){k7=e}fK.prototype={postMessage:function(t){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed");return rle(this,"message",t)},postInternal:function(t){return rle(this,"internal",t)},set onmessage(e){var t=this.method.microSeconds(),n={time:t,fn:e};sle(this,"message",this._onML),e&&typeof e=="function"?(this._onML=n,ile(this,"message",n)):this._onML=null},addEventListener:function(t,n){var r=this.method.microSeconds(),i={time:r,fn:n};ile(this,t,i)},removeEventListener:function(t,n){var r=this._addEL[t].find(function(i){return i.fn===n});sle(this,t,r)},close:function(){var t=this;if(!this.closed){this.closed=!0;var n=this._prepP?this._prepP:Promise.resolve();return this._onML=null,this._addEL.message=[],n.then(function(){return Promise.all(Array.from(t._uMP))}).then(function(){return Promise.all(t._befC.map(function(r){return r()}))}).then(function(){return t.method.close(t._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function rle(e,t,n){var r=e.method.microSeconds(),i={time:r,type:t,data:n},s=e._prepP?e._prepP:Promise.resolve();return s.then(function(){var o=e.method.postMessage(e._state,i);return e._uMP.add(o),o.catch().then(function(){return e._uMP.delete(o)}),o})}function Uot(e){var t=e.method.create(e.name,e.options);qst(t)?(e._prepP=t,t.then(function(n){e._state=n})):e._state=t}function xEe(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function ile(e,t,n){e._addEL[t].push(n),Vot(e)}function sle(e,t,n){e._addEL[t]=e._addEL[t].filter(function(r){return r!==n}),Hot(e)}function Vot(e){if(!e._iL&&xEe(e)){var t=function(i){e._addEL[i.type].forEach(function(s){i.time>=s.time&&s.fn(i.data)})},n=e.method.microSeconds();e._prepP?e._prepP.then(function(){e._iL=!0,e.method.onMessage(e._state,t,n)}):(e._iL=!0,e.method.onMessage(e._state,t,n))}}function Hot(e){if(e._iL&&!xEe(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}const qot=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";function Wot(e){if(!(typeof WorkerGlobalScope=="function"&&self instanceof WorkerGlobalScope)){if(typeof window.addEventListener!="function")return;window.addEventListener("beforeunload",function(){e()},!0),window.addEventListener("unload",function(){e()},!0)}}const Got={add:Wot},EEe={},Yot=Object.freeze(Object.defineProperty({__proto__:null,default:EEe},Symbol.toStringTag,{value:"Module"}));var Kot=qot?EEe:Got,K1=new Set,ole=!1;function Xot(){ole||(ole=!0,Kot.add(SEe))}function Qot(e){if(Xot(),typeof e!="function")throw new Error("Listener is no function");K1.add(e);var t={remove:function(){return K1.delete(e)},run:function(){return K1.delete(e),e()}};return t}function SEe(){var e=[];return K1.forEach(function(t){e.push(t()),K1.delete(t)}),Promise.all(e)}function Jot(){K1.clear()}function Zot(){return K1.size}const eat={add:Qot,runAll:SEe,removeAll:Jot,getSize:Zot};var TEe=function(t,n){this._channel=t,this._options=n,this.isLeader=!1,this.isDead=!1,this.token=AF(),this._isApl=!1,this._reApply=!1,this._unl=[],this._lstns=[],this._invs=[],this._dpL=function(){},this._dpLC=!1};TEe.prototype={applyOnce:function(){var t=this;if(this.isLeader||this.isDead)return Promise.resolve(!1);if(this._isApl)return this._reApply=!0,Promise.resolve(!1);this._isApl=!0;var n=!1,r=function(o){o.context==="leader"&&o.token!=t.token&&(o.action==="apply"&&o.token>t.token&&(n=!0),o.action==="tell"&&(n=!0))};this._channel.addEventListener("internal",r);var i=$1(this,"apply").then(function(){return NM(t._options.responseTime)}).then(function(){return n?Promise.reject(new Error):$1(t,"apply")}).then(function(){return NM(t._options.responseTime)}).then(function(){return n?Promise.reject(new Error):$1(t)}).then(function(){return CEe(t)}).then(function(){return!0}).catch(function(){return!1}).then(function(s){return t._channel.removeEventListener("internal",r),t._isApl=!1,!s&&t._reApply?(t._reApply=!1,t.applyOnce()):s});return i},awaitLeadership:function(){return this._aLP||(this._aLP=tat(this)),this._aLP},set onduplicate(e){this._dpL=e},die:function(){var t=this;if(!this.isDead)return this.isDead=!0,this._lstns.forEach(function(n){return t._channel.removeEventListener("internal",n)}),this._invs.forEach(function(n){return clearInterval(n)}),this._unl.forEach(function(n){n.remove()}),$1(this,"death")}};function tat(e){return e.isLeader?Promise.resolve():new Promise(function(t){var n=!1;function r(){n||(n=!0,clearInterval(i),e._channel.removeEventListener("internal",s),t(!0))}e.applyOnce().then(function(){e.isLeader&&r()});var i=setInterval(function(){e.applyOnce().then(function(){e.isLeader&&r()})},e._options.fallbackInterval);e._invs.push(i);var s=function(a){a.context==="leader"&&a.action==="death"&&e.applyOnce().then(function(){e.isLeader&&r()})};e._channel.addEventListener("internal",s),e._lstns.push(s)})}function $1(e,t){var n={context:"leader",action:t,token:e.token};return e._channel.postInternal(n)}function CEe(e){e.isLeader=!0;var t=eat.add(function(){return e.die()});e._unl.push(t);var n=function(i){i.context==="leader"&&i.action==="apply"&&$1(e,"tell"),i.context==="leader"&&i.action==="tell"&&!e._dpLC&&(e._dpLC=!0,e._dpL(),$1(e,"tell"))};return e._channel.addEventListener("internal",n),e._lstns.push(n),$1(e,"tell")}function nat(e,t){return e||(e={}),e=JSON.parse(JSON.stringify(e)),e.fallbackInterval||(e.fallbackInterval=3e3),e.responseTime||(e.responseTime=t.method.averageResponseTime(t.options)),e}function rat(e,t){if(e._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");t=nat(t,e);var n=new TEe(e,t);return e._befC.push(function(){return n.die()}),e._leaderElector=n,n}const iat=Object.freeze(Object.defineProperty({__proto__:null,BroadcastChannel:fK,beLeader:CEe,clearNodeFolder:Bot,createLeaderElection:rat,enforceOptions:zot},Symbol.toStringTag,{value:"Module"})),sat=h1e(iat);var ale;function oat(){if(ale)return Di;ale=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.initMessageListener=Di.initStateWithPrevTab=Di.withReduxStateSync=Di.createReduxStateSync=Di.createStateSyncMiddleware=Di.WINDOW_STATE_SYNC_ID=Di.INIT_MESSAGE_LISTENER=Di.RECEIVE_INIT_STATE=Di.SEND_INIT_STATE=Di.GET_INIT_STATE=void 0,Di.generateUuidForAction=p,Di.isActionAllowed=m,Di.isActionSynced=y,Di.MessageListener=v;var e=sat,t=0,n=Di.GET_INIT_STATE="&_GET_INIT_STATE",r=Di.SEND_INIT_STATE="&_SEND_INIT_STATE",i=Di.RECEIVE_INIT_STATE="&_RECEIVE_INIT_STATE",s=Di.INIT_MESSAGE_LISTENER="&_INIT_MESSAGE_LISTENER",o={channel:"redux_state_sync",predicate:null,blacklist:[],whitelist:[],broadcastChannelOption:void 0,prepareState:function(S){return S},receiveState:function(S,E){return E}},a=function(){return{type:n}},u=function(){return{type:r}},l=function(S){return{type:i,payload:S}},c=function(){return{type:s}};function d(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}function f(){return""+d()+d()+"-"+d()+"-"+d()+"-"+d()+"-"+d()+d()+d()}var h=Di.WINDOW_STATE_SYNC_ID=f();function p(x){var S=x;return S.$uuid=f(),S.$wuid=h,S}function m(x){var S=x.predicate,E=x.blacklist,T=x.whitelist,A=function(){return!0};return S&&typeof S=="function"?A=S:Array.isArray(E)?A=function(k){return E.indexOf(k.type)<0}:Array.isArray(T)&&(A=function(k){return T.indexOf(k.type)>=0}),A}function y(x){return!!x.$isSync}function v(x){var S=x.channel,E=x.dispatch,T=x.allowed,A=!1,I={};this.handleOnMessage=function(k){k.$wuid!==h&&k.type!==i&&k.$uuid&&k.$uuid!==t&&(k.type===n&&!I[k.$wuid]?(I[k.$wuid]=!0,E(u())):k.type===r&&!I[k.$wuid]?A||(A=!0,E(l(k.payload))):T(k)&&(t=k.$uuid,E(Object.assign(k,{$isSync:!0}))))},this.messageChannel=S,this.messageChannel.onmessage=this.handleOnMessage}Di.createStateSyncMiddleware=function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o,E=m(S),T=new e.BroadcastChannel(S.channel,S.broadcastChannelOption),A=S.prepareState||o.prepareState,I=null;return function(k){var D=k.getState,M=k.dispatch;return function(z){return function(O){if(I||(I=new v({channel:T,dispatch:M,allowed:E})),O&&!O.$uuid){var $=p(O);t=$.$uuid;try{if(O.type===r)return D()&&($.payload=A(D()),T.postMessage($)),z(O);(E($)||O.type===n)&&T.postMessage($)}catch{console.error("Your browser doesn't support cross tab communication")}}return z(Object.assign(O,{$isSync:typeof O.$isSync>"u"?!1:O.$isSync}))}}}};var w=Di.createReduxStateSync=function(S){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o.receiveState;return function(T,A){var I=T;return A.type===i&&(I=E(T,A.payload)),S(I,A)}};return Di.withReduxStateSync=w,Di.initStateWithPrevTab=function(S){var E=S.dispatch;E(a())},Di.initMessageListener=function(S){var E=S.dispatch;E(c())},Di}var XP=oat();function pc(e){return Array.isArray(e)?e:e.components.flatMap(t=>typeof t=="string"?t:pc(t))}function AEe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:AEe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function IEe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+pc(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+pc(e).length-1}];r+=1}else{const o=IEe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function aat(e,t){const n=IEe(e,t,0);return typeof n=="number"?null:n}function REe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=REe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function uat(e,t){const n=REe(e,t,0);return n.found?n.distance:-1}function kEe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...kEe(i,`${t}-${s}`))}),n}async function lat(e,t,n,r,i){const s=pc(n),o=Object.fromEntries(s.filter(h=>h!=="end").map((h,p)=>[`${h}_${p}`,{answer:{}}])),a=Object.assign({},...s.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),u=Object.assign({},...s.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),l={studyId:e,answers:Object.keys(i).length>0?i:o,isRecording:!1,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?u:a,iframeAnswers:{},iframeProvenance:null,metadata:r,analysisTrialName:null,analysisProvState:null,analysisParticipantName:null,analysisWaveformTime:0},c=Dst({name:"storeSlice",initialState:l,reducers:{setConfig(h,p){h.config=p.payload},setIsRecording(h,p){h.isRecording=p.payload},toggleStudyBrowser:h=>{h.showStudyBrowser=!h.showStudyBrowser},toggleShowHelpText:h=>{h.showHelpText=!h.showHelpText},setAlertModal:(h,p)=>{h.alertModal=p.payload},setIframeAnswers:(h,p)=>{h.iframeAnswers=p.payload},setAnalysisTrialName:(h,p)=>{h.analysisTrialName=p.payload},setAnalysisParticipantName:(h,p)=>{h.analysisParticipantName=p.payload},setAnalysisWaveformTime:(h,p)=>{h.analysisWaveformTime=p.payload},setIframeProvenance:(h,p)=>{h.iframeProvenance=p.payload},updateResponseBlockValidation:(h,{payload:p})=>{h.trialValidation[p.identifier]||(h.trialValidation[p.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),h.trialValidation[p.identifier][p.location]={valid:p.status,values:p.values},p.provenanceGraph&&(h.trialValidation[p.identifier].provenanceGraph=p.provenanceGraph)},saveAnalysisState(h,{payload:p}){h.analysisProvState=p},saveTrialAnswer(h,{payload:p}){const{identifier:m,answer:y,startTime:v,endTime:w,provenanceGraph:x,windowEvents:S}=p;h.answers[m]={answer:y,startTime:v,endTime:w,provenanceGraph:x,windowEvents:S}}}}),d=XP.createStateSyncMiddleware({}),f=Tst({reducer:XP.withReduxStateSync(c.reducer),preloadedState:l,middleware:h=>h().prepend(d)});return XP.initMessageListener(f),XP.initStateWithPrevTab(f),{store:f,actions:c.actions}}const PEe=P.createContext(null);function Rl(){return P.useContext(PEe).actions}const Tc=Jxe,Ea=Oit;function cat(e){return Ea(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function hK(){return Ea(e=>pc(e.sequence))}function e_(){const{studyId:e}=Ff();return`${e}`}function $p(){const{index:e}=Ff(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function nh(){const e=$p(),t=hK();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var $C={exports:{}};$C.exports;var ule;function dat(){return ule||(ule=1,function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",d="[object Date]",f="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",y="[object Number]",v="[object Null]",w="[object Object]",x="[object Proxy]",S="[object RegExp]",E="[object Set]",T="[object String]",A="[object Undefined]",I="[object WeakMap]",k="[object ArrayBuffer]",D="[object DataView]",M="[object Float32Array]",z="[object Float64Array]",O="[object Int8Array]",$="[object Int16Array]",F="[object Int32Array]",B="[object Uint8Array]",q="[object Uint8ClampedArray]",G="[object Uint16Array]",K="[object Uint32Array]",L=/[\\^$.*+?()[\]{}|]/g,V=/^\[object .+?Constructor\]$/,X=/^(?:0|[1-9]\d*)$/,H={};H[M]=H[z]=H[O]=H[$]=H[F]=H[B]=H[q]=H[G]=H[K]=!0,H[a]=H[u]=H[k]=H[c]=H[D]=H[d]=H[f]=H[h]=H[m]=H[y]=H[w]=H[S]=H[E]=H[T]=H[I]=!1;var Q=typeof dd=="object"&&dd&&dd.Object===Object&&dd,Z=typeof self=="object"&&self&&self.Object===Object&&self,ne=Q||Z||Function("return this")(),ue=t&&!t.nodeType&&t,le=ue&&!0&&e&&!e.nodeType&&e,ce=le&&le.exports===ue,ge=ce&&Q.process,se=function(){try{var pe=le&&le.require&&le.require("util").types;return pe||ge&&ge.binding&&ge.binding("util")}catch{}}(),te=se&&se.isTypedArray;function Ee(pe,Ce,Xe){switch(Xe.length){case 0:return pe.call(Ce);case 1:return pe.call(Ce,Xe[0]);case 2:return pe.call(Ce,Xe[0],Xe[1]);case 3:return pe.call(Ce,Xe[0],Xe[1],Xe[2])}return pe.apply(Ce,Xe)}function we(pe,Ce){for(var Xe=-1,qt=Array(pe);++Xe<pe;)qt[Xe]=Ce(Xe);return qt}function De(pe){return function(Ce){return pe(Ce)}}function Le(pe,Ce){return pe==null?void 0:pe[Ce]}function Ne(pe,Ce){return function(Xe){return pe(Ce(Xe))}}var Te=Array.prototype,qe=Function.prototype,Qe=Object.prototype,Ue=ne["__core-js_shared__"],Ve=qe.toString,Se=Qe.hasOwnProperty,it=function(){var pe=/[^.]+$/.exec(Ue&&Ue.keys&&Ue.keys.IE_PROTO||"");return pe?"Symbol(src)_1."+pe:""}(),It=Qe.toString,Re=Ve.call(Object),Ge=RegExp("^"+Ve.call(Se).replace(L,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ot=ce?ne.Buffer:void 0,ct=ne.Symbol,Mt=ne.Uint8Array;ot&&ot.allocUnsafe;var Nn=Ne(Object.getPrototypeOf,Object),Rr=Object.create,xr=Qe.propertyIsEnumerable,Mr=Te.splice,fn=ct?ct.toStringTag:void 0,qn=function(){try{var pe=pt(Object,"defineProperty");return pe({},"",{}),pe}catch{}}(),lr=ot?ot.isBuffer:void 0,cr=Math.max,bs=Date.now,Ai=pt(ne,"Map"),ci=pt(Object,"create"),Wn=function(){function pe(){}return function(Ce){if(!jc(Ce))return{};if(Rr)return Rr(Ce);pe.prototype=Ce;var Xe=new pe;return pe.prototype=void 0,Xe}}();function or(pe){var Ce=-1,Xe=pe==null?0:pe.length;for(this.clear();++Ce<Xe;){var qt=pe[Ce];this.set(qt[0],qt[1])}}function Wi(){this.__data__=ci?ci(null):{},this.size=0}function qu(pe){var Ce=this.has(pe)&&delete this.__data__[pe];return this.size-=Ce?1:0,Ce}function $o(pe){var Ce=this.__data__;if(ci){var Xe=Ce[pe];return Xe===r?void 0:Xe}return Se.call(Ce,pe)?Ce[pe]:void 0}function lu(pe){var Ce=this.__data__;return ci?Ce[pe]!==void 0:Se.call(Ce,pe)}function Rt(pe,Ce){var Xe=this.__data__;return this.size+=this.has(pe)?0:1,Xe[pe]=ci&&Ce===void 0?r:Ce,this}or.prototype.clear=Wi,or.prototype.delete=qu,or.prototype.get=$o,or.prototype.has=lu,or.prototype.set=Rt;function yi(pe){var Ce=-1,Xe=pe==null?0:pe.length;for(this.clear();++Ce<Xe;){var qt=pe[Ce];this.set(qt[0],qt[1])}}function xn(){this.__data__=[],this.size=0}function $r(pe){var Ce=this.__data__,Xe=Tr(Ce,pe);if(Xe<0)return!1;var qt=Ce.length-1;return Xe==qt?Ce.pop():Mr.call(Ce,Xe,1),--this.size,!0}function Vr(pe){var Ce=this.__data__,Xe=Tr(Ce,pe);return Xe<0?void 0:Ce[Xe][1]}function vi(pe){return Tr(this.__data__,pe)>-1}function ve(pe,Ce){var Xe=this.__data__,qt=Tr(Xe,pe);return qt<0?(++this.size,Xe.push([pe,Ce])):Xe[qt][1]=Ce,this}yi.prototype.clear=xn,yi.prototype.delete=$r,yi.prototype.get=Vr,yi.prototype.has=vi,yi.prototype.set=ve;function he(pe){var Ce=-1,Xe=pe==null?0:pe.length;for(this.clear();++Ce<Xe;){var qt=pe[Ce];this.set(qt[0],qt[1])}}function xe(){this.size=0,this.__data__={hash:new or,map:new(Ai||yi),string:new or}}function We(pe){var Ce=ft(this,pe).delete(pe);return this.size-=Ce?1:0,Ce}function Ye(pe){return ft(this,pe).get(pe)}function St(pe){return ft(this,pe).has(pe)}function Ht(pe,Ce){var Xe=ft(this,pe),qt=Xe.size;return Xe.set(pe,Ce),this.size+=Xe.size==qt?0:1,this}he.prototype.clear=xe,he.prototype.delete=We,he.prototype.get=Ye,he.prototype.has=St,he.prototype.set=Ht;function sn(pe){var Ce=this.__data__=new yi(pe);this.size=Ce.size}function ar(){this.__data__=new yi,this.size=0}function dr(pe){var Ce=this.__data__,Xe=Ce.delete(pe);return this.size=Ce.size,Xe}function Gn(pe){return this.__data__.get(pe)}function Er(pe){return this.__data__.has(pe)}function Yr(pe,Ce){var Xe=this.__data__;if(Xe instanceof yi){var qt=Xe.__data__;if(!Ai||qt.length<n-1)return qt.push([pe,Ce]),this.size=++Xe.size,this;Xe=this.__data__=new he(qt)}return Xe.set(pe,Ce),this.size=Xe.size,this}sn.prototype.clear=ar,sn.prototype.delete=dr,sn.prototype.get=Gn,sn.prototype.has=Er,sn.prototype.set=Yr;function dn(pe,Ce){var Xe=Lo(pe),qt=!Xe&&cs(pe),tr=!Xe&&!qt&&du(pe),Lr=!Xe&&!qt&&!tr&&Dv(pe),fi=Xe||qt||tr||Lr,Kn=fi?we(pe.length,String):[],si=Kn.length;for(var Li in pe)fi&&(Li=="length"||tr&&(Li=="offset"||Li=="parent")||Lr&&(Li=="buffer"||Li=="byteLength"||Li=="byteOffset")||Bt(Li,si))||Kn.push(Li);return Kn}function Sr(pe,Ce,Xe){(Xe!==void 0&&!na(pe[Ce],Xe)||Xe===void 0&&!(Ce in pe))&&Yn(pe,Ce,Xe)}function bi(pe,Ce,Xe){var qt=pe[Ce];(!(Se.call(pe,Ce)&&na(qt,Xe))||Xe===void 0&&!(Ce in pe))&&Yn(pe,Ce,Xe)}function Tr(pe,Ce){for(var Xe=pe.length;Xe--;)if(na(pe[Xe][0],Ce))return Xe;return-1}function Yn(pe,Ce,Xe){Ce=="__proto__"&&qn?qn(pe,Ce,{configurable:!0,enumerable:!0,value:Xe,writable:!0}):pe[Ce]=Xe}var Ys=nt();function di(pe){return pe==null?pe===void 0?A:v:fn&&fn in Object(pe)?ht(pe):fo(pe)}function Ks(pe){return Qs(pe)&&di(pe)==a}function Oi(pe){if(!jc(pe)||ur(pe))return!1;var Ce=Yu(pe)?Ge:V;return Ce.test(Wg(pe))}function ts(pe){return Qs(pe)&&A_(pe.length)&&!!H[di(pe)]}function co(pe){if(!jc(pe))return Kr(pe);var Ce=rn(pe),Xe=[];for(var qt in pe)qt=="constructor"&&(Ce||!Se.call(pe,qt))||Xe.push(qt);return Xe}function Xs(pe,Ce,Xe,qt,tr){pe!==Ce&&Ys(Ce,function(Lr,fi){if(tr||(tr=new sn),jc(Lr))_i(pe,Ce,fi,Xe,Xs,qt,tr);else{var Kn=qt?qt(Fc(pe,fi),Lr,fi+"",pe,Ce,tr):void 0;Kn===void 0&&(Kn=Lr),Sr(pe,fi,Kn)}},gh)}function _i(pe,Ce,Xe,qt,tr,Lr,fi){var Kn=Fc(pe,Xe),si=Fc(Ce,Xe),Li=fi.get(si);if(Li){Sr(pe,Xe,Li);return}var ho=Lr?Lr(Kn,si,Xe+"",pe,Ce,fi):void 0,zc=ho===void 0;if(zc){var Xu=Lo(si),em=!Xu&&du(si),Js=!Xu&&!em&&Dv(si);ho=si,Xu||em||Js?Lo(Kn)?ho=Kn:mh(Kn)?ho=Pe(Kn):em?(zc=!1,ho=re(si)):Js?(zc=!1,ho=de(si)):ho=[]:lT(si)||cs(si)?(ho=Kn,cs(Kn)?ho=Bc(Kn):(!jc(Kn)||Yu(Kn))&&(ho=xt(si))):zc=!1}zc&&(fi.set(si,ho),tr(ho,si,qt,Lr,fi),fi.delete(si)),Sr(pe,Xe,ho)}function Wu(pe,Ce){return qg(Gu(pe,Ce,Ku),pe+"")}var _s=qn?function(pe,Ce){return qn(pe,"toString",{configurable:!0,enumerable:!1,value:Hl(Ce),writable:!0})}:Ku;function re(pe,Ce){return pe.slice()}function _e(pe){var Ce=new pe.constructor(pe.byteLength);return new Mt(Ce).set(new Mt(pe)),Ce}function de(pe,Ce){var Xe=_e(pe.buffer);return new pe.constructor(Xe,pe.byteOffset,pe.length)}function Pe(pe,Ce){var Xe=-1,qt=pe.length;for(Ce||(Ce=Array(qt));++Xe<qt;)Ce[Xe]=pe[Xe];return Ce}function Me(pe,Ce,Xe,qt){var tr=!Xe;Xe||(Xe={});for(var Lr=-1,fi=Ce.length;++Lr<fi;){var Kn=Ce[Lr],si=void 0;si===void 0&&(si=pe[Kn]),tr?Yn(Xe,Kn,si):bi(Xe,Kn,si)}return Xe}function Ie(pe){return Wu(function(Ce,Xe){var qt=-1,tr=Xe.length,Lr=tr>1?Xe[tr-1]:void 0,fi=tr>2?Xe[2]:void 0;for(Lr=pe.length>3&&typeof Lr=="function"?(tr--,Lr):void 0,fi&&On(Xe[0],Xe[1],fi)&&(Lr=tr<3?void 0:Lr,tr=1),Ce=Object(Ce);++qt<tr;){var Kn=Xe[qt];Kn&&pe(Ce,Kn,qt,Lr)}return Ce})}function nt(pe){return function(Ce,Xe,qt){for(var tr=-1,Lr=Object(Ce),fi=qt(Ce),Kn=fi.length;Kn--;){var si=fi[++tr];if(Xe(Lr[si],si,Lr)===!1)break}return Ce}}function ft(pe,Ce){var Xe=pe.__data__;return tn(Ce)?Xe[typeof Ce=="string"?"string":"hash"]:Xe.map}function pt(pe,Ce){var Xe=Le(pe,Ce);return Oi(Xe)?Xe:void 0}function ht(pe){var Ce=Se.call(pe,fn),Xe=pe[fn];try{pe[fn]=void 0;var qt=!0}catch{}var tr=It.call(pe);return qt&&(Ce?pe[fn]=Xe:delete pe[fn]),tr}function xt(pe){return typeof pe.constructor=="function"&&!rn(pe)?Wn(Nn(pe)):{}}function Bt(pe,Ce){var Xe=typeof pe;return Ce=Ce??o,!!Ce&&(Xe=="number"||Xe!="symbol"&&X.test(pe))&&pe>-1&&pe%1==0&&pe<Ce}function On(pe,Ce,Xe){if(!jc(Xe))return!1;var qt=typeof Ce;return(qt=="number"?cu(Xe)&&Bt(Ce,Xe.length):qt=="string"&&Ce in Xe)?na(Xe[Ce],pe):!1}function tn(pe){var Ce=typeof pe;return Ce=="string"||Ce=="number"||Ce=="symbol"||Ce=="boolean"?pe!=="__proto__":pe===null}function ur(pe){return!!it&&it in pe}function rn(pe){var Ce=pe&&pe.constructor,Xe=typeof Ce=="function"&&Ce.prototype||Qe;return pe===Xe}function Kr(pe){var Ce=[];if(pe!=null)for(var Xe in Object(pe))Ce.push(Xe);return Ce}function fo(pe){return It.call(pe)}function Gu(pe,Ce,Xe){return Ce=cr(Ce===void 0?pe.length-1:Ce,0),function(){for(var qt=arguments,tr=-1,Lr=cr(qt.length-Ce,0),fi=Array(Lr);++tr<Lr;)fi[tr]=qt[Ce+tr];tr=-1;for(var Kn=Array(Ce+1);++tr<Ce;)Kn[tr]=qt[tr];return Kn[Ce]=Xe(fi),Ee(pe,this,Kn)}}function Fc(pe,Ce){if(!(Ce==="constructor"&&typeof pe[Ce]=="function")&&Ce!="__proto__")return pe[Ce]}var qg=ph(_s);function ph(pe){var Ce=0,Xe=0;return function(){var qt=bs(),tr=s-(qt-Xe);if(Xe=qt,tr>0){if(++Ce>=i)return arguments[0]}else Ce=0;return pe.apply(void 0,arguments)}}function Wg(pe){if(pe!=null){try{return Ve.call(pe)}catch{}try{return pe+""}catch{}}return""}function na(pe,Ce){return pe===Ce||pe!==pe&&Ce!==Ce}var cs=Ks(function(){return arguments}())?Ks:function(pe){return Qs(pe)&&Se.call(pe,"callee")&&!xr.call(pe,"callee")},Lo=Array.isArray;function cu(pe){return pe!=null&&A_(pe.length)&&!Yu(pe)}function mh(pe){return Qs(pe)&&cu(pe)}var du=lr||Ud;function Yu(pe){if(!jc(pe))return!1;var Ce=di(pe);return Ce==h||Ce==p||Ce==l||Ce==x}function A_(pe){return typeof pe=="number"&&pe>-1&&pe%1==0&&pe<=o}function jc(pe){var Ce=typeof pe;return pe!=null&&(Ce=="object"||Ce=="function")}function Qs(pe){return pe!=null&&typeof pe=="object"}function lT(pe){if(!Qs(pe)||di(pe)!=w)return!1;var Ce=Nn(pe);if(Ce===null)return!0;var Xe=Se.call(Ce,"constructor")&&Ce.constructor;return typeof Xe=="function"&&Xe instanceof Xe&&Ve.call(Xe)==Re}var Dv=te?De(te):ts;function Bc(pe){return Me(pe,gh(pe))}function gh(pe){return cu(pe)?dn(pe):co(pe)}var I_=Ie(function(pe,Ce,Xe){Xs(pe,Ce,Xe)});function Hl(pe){return function(){return pe}}function Ku(pe){return pe}function Ud(){return!1}e.exports=I_}($C,$C.exports)),$C.exports}var fat=dat();const pK=su(fat),HT="@REVISIT_COMMS",hat={minHeight:"500px",width:"100%",border:0};function pat({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=Rl(),r=Tc(),i=Jxe(),s=P.useRef(null),o=P.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=nh(),u=Mc(),l=P.useCallback((c,d)=>{var f,h;(h=(f=s.current)==null?void 0:f.contentWindow)==null||h.postMessage({error:!1,type:`${HT}/${c}`,iframeId:o,message:d},"*")},[s,o]);return P.useEffect(()=>{const c=d=>{const{data:f}=d;if(typeof f=="object"&&o===f.iframeId)switch(f.type){case`${HT}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${HT}/READY`:s.current&&(s.current.style.height=`${f.message.documentHeight}px`);break;case`${HT}/ANSWERS`:r(t(f.message));break;case`${HT}/PROVENANCE`:r(n(f.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),_.jsx("iframe",{ref:s,src:`${$c}${e.path}?trialid=${a}&id=${o}`,style:hat})}async function mK(e){const n=await(await fetch(`${$c}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function cR({email:e,path:t}){const n=Ig();return _.jsxs(Zf,{fluid:!0,my:50,maw:800,mx:"auto",children:[_.jsx(Ki,{order:2,children:_.jsx(dt,{span:!0,c:"orange",children:"404"})}),_.jsxs(dt,{children:[_.jsx(dt,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),_.jsx(vd,{h:"lg"}),_.jsxs(Cf,{children:[_.jsx(Cf.Item,{children:_.jsx(dt,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),_.jsx(Cf.Item,{children:_.jsxs(dt,{children:["If you're a participant, please contact the study administrator"," ",e&&_.jsxs(_.Fragment,{children:["at"," ",_.jsxs(Yb,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const mat={maxWidth:"100%"};function gat({currentConfig:e}){const t={...mat,...e.style},[n,r]=P.useState(!0),[i,s]=P.useState(!1);return P.useEffect(()=>{async function o(){const a=await mK(e.path);s(!!a),r(!1)}o()},[e]),n||i?_.jsx(av,{mx:"auto",src:`${$c}${e.path}`,style:t}):_.jsx(cR,{path:e.path})}function yat({currentConfig:e}){const[t,n]=P.useState(""),[r,i]=P.useState(!0);return P.useEffect(()=>{async function s(){const o=await mK(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?_.jsx(Ou,{text:t}):_.jsx(cR,{path:e.path})}function jf(){return Ea(e=>e.config)}function gK(){const{answers:e}=Ea(i=>i),t=$p(),r=`${nh()}_${t}`;return e[r]}const vat=h1e(Yot);var EB,lle;function kF(){if(lle)return EB;lle=1;var e=vat;function t(o,a){var u,l="",c=0,d=!0,f=0,h;function p(){return h=o.charAt(f),f++,h}for(p(),h==="-"&&(l="-",p());h>="0"&&h<="9";)d&&(h=="0"?c++:d=!1),l+=h,p();if(d&&c--,h===".")for(l+=".";p()&&h>="0"&&h<="9";)l+=h;if(h==="e"||h==="E")for(l+=h,p(),(h==="-"||h==="+")&&(l+=h,p());h>="0"&&h<="9";)l+=h,p();for(;h&&h<=" ";)p();if(a&&(h===","||h==="}"||h==="]"||h==="#"||h==="/"&&(o[f]==="/"||o[f]==="*"))&&(h=0),u=+l,!(h||c||!isFinite(u)))return u}function n(o,a){return Object.defineProperty&&Object.defineProperty(o,"__COMMENTS__",{enumerable:!1,writable:!0}),o.__COMMENTS__=a||{}}function r(o){Object.defineProperty(o,"__COMMENTS__",{value:void 0})}function i(o){return o.__COMMENTS__}function s(o){if(!o)return"";var a=o.split(`
`),u,l,c,d;for(c=0;c<a.length;c++)for(u=a[c],d=u.length,l=0;l<d;l++){var f=u[l];if(f==="#")break;if(f==="/"&&(u[l+1]==="/"||u[l+1]==="*")){u[l+1]==="*"&&(c=a.length);break}else if(f>" "){a[c]="# "+u;break}}return a.join(`
`)}return EB={EOL:e.EOL||`
`,tryParseNumber:t,createComment:n,removeComment:r,getComment:i,forceComment:s},EB}var SB,cle;function bat(){return cle||(cle=1,SB="3.2.1"),SB}var TB,dle;function yK(){if(dle)return TB;dle=1;function e(a,u){if(Object.prototype.toString.apply(a)!=="[object Array]"){if(a)throw new Error("dsf option must contain an array!");return n}else if(a.length===0)return n;var l=[];function c(d){return{}.toString.call(d)==="[object Function]"}return a.forEach(function(d){if(!d.name||!c(d.parse)||!c(d.stringify))throw new Error("extension does not match the DSF interface");l.push(function(){try{if(u=="parse")return d.parse.apply(null,arguments);if(u=="stringify"){var f=d.stringify.apply(null,arguments);if(f!==void 0&&(typeof f!="string"||f.length===0||f[0]==='"'||[].some.call(f,function(h){return r(h)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+f);return f}else throw new Error("Invalid type")}catch(h){throw new Error("DSF-"+d.name+" failed; "+h.message)}})}),t.bind(null,l)}function t(a,u){if(a)for(var l=0;l<a.length;l++){var c=a[l](u);if(c!==void 0)return c}}function n(){}function r(a){return a==="{"||a==="}"||a==="["||a==="]"||a===","}function i(){return{name:"math",parse:function(a){switch(a){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(a){if(typeof a=="number"){if(1/a===-1/0)return"-0";if(a===1/0)return"Inf";if(a===-1/0)return"-Inf";if(isNaN(a))return"NaN"}}}}i.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function s(a){var u=a&&a.out;return{name:"hex",parse:function(l){if(/^0x[0-9A-Fa-f]+$/.test(l))return parseInt(l,16)},stringify:function(l){if(u&&Number.isInteger(l))return"0x"+l.toString(16)}}}s.description="parse hexadecimal numbers prefixed with 0x";function o(){return{name:"date",parse:function(a){if(/^\d{4}-\d{2}-\d{2}$/.test(a)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(a)){var u=Date.parse(a);if(!isNaN(u))return new Date(u)}},stringify:function(a){if(Object.prototype.toString.call(a)==="[object Date]"){var u=a.toISOString();return u.indexOf("T00:00:00.000Z",u.length-14)!==-1?u.substr(0,10):u}}}}return o.description="support ISO dates",TB={loadDsf:e,std:{math:i,hex:s,date:o}},TB}var CB,fle;function _at(){return fle||(fle=1,CB=function(e,t){var n=kF(),r=yK(),i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function d($){return $==="{"||$==="}"||$==="["||$==="]"||$===","||$===":"}function f($){var F,B=0,q=1;for(F=s-1;F>0&&i[F]!==`
`;F--,B++);for(;F>0;F--)i[F]===`
`&&q++;throw new Error($+" at line "+q+","+B+" >>>"+i.substr(s-B,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p($){return i.charAt(s+$)}function m($){for(var F="",B=o;h();){if(o===B)return h(),$&&B==="'"&&o==="'"&&F.length===0?(h(),y()):F;if(o==="\\")if(h(),o==="u"){for(var q=0,G=0;G<4;G++){h();var K=o.charCodeAt(0),L;o>="0"&&o<="9"?L=K-48:o>="a"&&o<="f"?L=K-97+10:o>="A"&&o<="F"?L=K-65+10:f("Bad \\u char "+o),q=q*16+L}F+=String.fromCharCode(q)}else if(typeof a[o]=="string")F+=a[o];else break;else o===`
`||o==="\r"?f("Bad string containing newline"):F+=o}f("Bad string")}function y(){for(var $="",F=0,B=0;;){var q=p(-B-5);if(!q||q===`
`)break;B++}function G(){for(var K=B;o&&o<=" "&&o!==`
`&&K-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),G());;){if(!o)f("Bad multiline string");else if(o==="'"){if(F++,h(),F===3)return $.slice(-1)===`
`&&($=$.slice(0,-1)),$;continue}else for(;F>0;)$+="'",F--;o===`
`?($+=`
`,h(),G()):(o!=="\r"&&($+=o),h())}}function v(){if(o==='"'||o==="'")return m(!1);for(var $="",F=s,B=-1;;){if(o===":")return $?B>=0&&B!==$.length&&(s=F+B,f("Found whitespace in your key name (use quotes to include)")):f("Found ':' but no key name (for an empty key name use quotes)"),$;o<=" "?o?B<0&&(B=$.length):f("Found EOF while looking for a key name (check your syntax)"):d(o)?f("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):$+=o,h()}}function w(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function x(){var $=o;for(d(o)&&f("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var F=o==="\r"||o===`
`||o==="";if(F||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var B=$[0];switch(B){case"f":if($.trim()==="false")return!1;break;case"n":if($.trim()==="null")return null;break;case"t":if($.trim()==="true")return!0;break;default:if(B==="-"||B>="0"&&B<="9"){var q=n.tryParseNumber($);if(q!==void 0)return q}}if(F){$=$.trim();var G=l($);return G!==void 0?G:$}}$+=o}}function S($,F){var B;for($--,B=s-2;B>$&&i[B]<=" "&&i[B]!==`
`;B--);i[B]===`
`&&B--,i[B]==="\r"&&B--;var q=i.substr($,B-$+1);for(B=0;B<q.length;B++)if(q[B]>" "){var G=q.indexOf(`
`);if(G>=0){var K=[q.substr(0,G),q.substr(G+1)];return F&&K[0].trim().length===0&&K.shift(),K}else return[q]}return[]}function E($){function F(q,G){var K,L,V,X;switch(typeof q){case"string":q.indexOf(G)>=0&&(X=q);break;case"object":if(Object.prototype.toString.apply(q)==="[object Array]")for(K=0,V=q.length;K<V;K++)X=F(q[K],G)||X;else for(L in q)Object.prototype.hasOwnProperty.call(q,L)&&(X=F(q[L],G)||X)}return X}function B(q){var G=F($,q);return G?"found '"+q+`' in a string value, your mistake could be with:
  > `+G+`
  (unquoted strings contain everything up to the next line!)`:""}return B("}")||B("]")}function T(){var $=[],F,B,q;try{if(u&&(F=n.createComment($,{a:[]})),h(),B=s,w(),F&&(q=S(B,!0).join(`
`)),o==="]")return h(),F&&(F.e=[q]),$;for(;o;){if($.push(I()),B=s,w(),o===","&&(h(),B=s,w()),F){var G=S(B);F.a.push([q||"",G[0]||""]),q=G[1]}if(o==="]")return h(),F&&(F.a[F.a.length-1][1]+=q||""),$;w()}f("End of input while parsing an array (missing ']')")}catch(K){throw K.hint=K.hint||E($),K}}function A($){var F="",B={},q,G,K;try{if(u&&(q=n.createComment(B,{c:{},o:[]})),$?G=1:(h(),G=s),w(),q&&(K=S(G,!0).join(`
`)),o==="}"&&!$)return q&&(q.e=[K]),h(),B;for(;o;){if(F=v(),w(),o!==":"&&f("Expected ':' instead of '"+o+"'"),h(),B[F]=I(),G=s,w(),o===","&&(h(),G=s,w()),q){var L=S(G);q.c[F]=[K||"",L[0]||""],K=L[1],q.o.push(F)}if(o==="}"&&!$)return h(),q&&(q.c[F][1]+=K||""),B;w()}if($)return B;f("End of input while parsing an object (missing '}')")}catch(V){throw V.hint=V.hint||E(B),V}}function I(){switch(w(),o){case"{":return A();case"[":return T();case"'":case'"':return m(!0);default:return x()}}function k($,F){var B=s;if(w(),o&&f("Syntax error, found trailing characters"),u){var q=F.join(`
`),G=S(B).join(`
`);if(G||q){var K=n.createComment($,n.getComment($));K.r=[q,G]}}return $}function D(){w();var $=u?S(1):null;switch(o){case"{":return k(A(),$);case"[":return k(T(),$);default:return k(I(),$)}}function M(){w();var $=u?S(1):null;switch(o){case"{":return k(A(),$);case"[":return k(T(),$)}try{return k(A(!0),$)}catch(F){c();try{return k(I(),$)}catch{throw F}}}if(typeof e!="string")throw new Error("source is not a string");var z=null,O=!0;return t&&typeof t=="object"&&(u=t.keepWsc,z=t.dsf,O=t.legacyRoot!==!1),l=r.loadDsf(z,"parse"),i=e,c(),O?M():D()}),CB}var AB,hle;function wat(){return hle||(hle=1,AB=function(e,t){var n=kF(),r=yK(),i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,d=0,f=1,h="",p=null,m=!1,y=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,d=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?f=0:f=t.multiline=="no-tabs"?2:1,h=t.separator===!0?y.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(y={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var v,w=Object.keys(i);for(v=w.length-1;v>=0;v--){var x=w[v];y[x].push(i[x][0].length,i[x][1].length)}}var S,E="---\u2028--\uFEFF-",T=new RegExp('[\\\\\\"\0-'+E+"]","g"),A=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),I=new RegExp("'''|^[\\s]+$|[\0-"+(f===2?"	":"\b")+"\v\f-"+E+"]","g"),k=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),D={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},M=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,z="",O=0;function $(X,H){return O+=X[0].length+X[1].length-X[2]-X[3],X[0]+H+X[1]}function F(X){return X.replace(T,function(H){var Q=D[H];return typeof Q=="string"?$(y.esc,Q):$(y.uni,("0000"+H.charCodeAt(0).toString(16)).slice(-4))})}function B(X,H,Q,Z){return X?(A.lastIndex=0,k.lastIndex=0,c||Q||A.test(X)||n.tryParseNumber(X,!0)!==void 0||k.test(X)?(T.lastIndex=0,I.lastIndex=0,T.test(X)?!I.test(X)&&!Z&&f?q(X,H):$(y.qstr,F(X)):$(y.qstr,X)):$(y.str,X)):$(y.qstr,"")}function q(X,H){var Q,Z=X.replace(/\r/g,"").split(`
`);if(H+=o,Z.length===1)return $(y.mstr,Z[0]);var ne=s+H+y.mstr[0];for(Q=0;Q<Z.length;Q++)ne+=s,Z[Q]&&(ne+=H+Z[Q]);return ne+s+H+y.mstr[1]}function G(X){return X?l||M.test(X)?(T.lastIndex=0,$(y.qkey,T.test(X)?F(X):X)):$(y.key,X):'""'}function K(X,H,Q,Z){function ne(fn){return fn&&fn[fn[0]==="\r"?1:0]===`
`}function ue(fn){return fn&&!ne(fn)}function le(fn,qn,lr){if(!fn)return"";fn=n.forceComment(fn);var cr,bs=fn.length;for(cr=0;cr<bs&&fn[cr]<=" ";cr++);return lr&&cr>0&&(fn=fn.substr(cr)),cr<bs?qn+$(y.rem,fn):fn}var ce=S(X);if(ce!==void 0)return $(y.dsf,ce);switch(typeof X){case"string":return B(X,z,H,Z);case"number":return isFinite(X)?$(y.num,String(X)):$(y.lit,"null");case"boolean":return $(y.lit,String(X));case"object":if(!X)return $(y.lit,"null");var ge;a&&(ge=n.getComment(X));var se=Object.prototype.toString.apply(X)==="[object Array]",te=z;z+=o;var Ee=s+te,we=s+z,De=Q||u?"":Ee,Le=[],Ne,Te=d?[]:null,qe=c,Qe=f,Ue=h?"":y.com[0],Ve=0,Se,it,It,Re,Ge,ot,ct,Mt,Nn;if(se){for(Se=0,it=X.length;Se<it;Se++){if(Ne=Se<it-1,ge?(ot=ge.a[Se]||[],ct=ue(ot[1]),Le.push(le(ot[0],`
`)+we),Te&&(ot[0]||ot[1]||ct)&&(Te=null)):Le.push(we),O=0,Re=X[Se],Le.push(K(Re,ge?ct:!1,!0)+(Ne?h:"")),Te){switch(typeof Re){case"string":O=0,c=!0,f=0,Te.push(K(Re,!1,!0)+(Ne?y.com[0]:"")),c=qe,f=Qe;break;case"object":if(Re){Te=null;break}default:Te.push(Le[Le.length-1]+(Ne?Ue:""));break}Ne&&(O+=y.com[0].length-y.com[2]),Ve+=O}ge&&ot[1]&&Le.push(le(ot[1],ct?" ":`
`,ct))}it===0?ge&&ge.e&&Le.push(le(ge.e[0],`
`)+Ee):Le.push(Ee),Le.length===0?Mt=$(y.arr,""):(Mt=De+$(y.arr,Le.join("")),Te&&(Nn=Te.join(" "),Nn.length-Ve<=d&&(Mt=$(y.arr,Nn))))}else{var Rr=ge?ge.o.slice():[],xr=[];for(It in X)Object.prototype.hasOwnProperty.call(X,It)&&Rr.indexOf(It)<0&&xr.push(It);m&&xr.sort();var Mr=Rr.concat(xr);for(Se=0,it=Mr.length;Se<it;Se++)if(Ne=Se<it-1,It=Mr[Se],ge?(ot=ge.c[It]||[],ct=ue(ot[1]),Le.push(le(ot[0],`
`)+we),Te&&(ot[0]||ot[1]||ct)&&(Te=null)):Le.push(we),O=0,Re=X[It],Ge=K(Re,ge&&ct),Le.push(G(It)+y.col[0]+(ne(Ge)?"":" ")+Ge+(Ne?h:"")),ge&&ot[1]&&Le.push(le(ot[1],ct?" ":`
`,ct)),Te){switch(typeof Re){case"string":O=0,c=!0,f=0,Ge=K(Re,!1),c=qe,f=Qe,Te.push(G(It)+y.col[0]+" "+Ge+(Ne?y.com[0]:""));break;case"object":if(Re){Te=null;break}default:Te.push(Le[Le.length-1]+(Ne?Ue:""));break}O+=y.col[0].length-y.col[2],Ne&&(O+=y.com[0].length-y.com[2]),Ve+=O}it===0?ge&&ge.e&&Le.push(le(ge.e[0],`
`)+Ee):Le.push(Ee),Le.length===0?Mt=$(y.obj,""):(Mt=De+$(y.obj,Le.join("")),Te&&(Nn=Te.join(" "),Nn.length-Ve<=d&&(Mt=$(y.obj,Nn))))}return z=te,Mt}}S=r.loadDsf(p,"stringify");var L="",V=a?V=(n.getComment(e)||{}).r:null;return V&&V[0]&&(L=V[0]+`
`),L+=K(e,null,!0,!0),V&&(L+=V[1]||""),L}),AB}var IB,ple;function xat(){if(ple)return IB;ple=1;var e=kF();function t(c,d,f){var h;return c&&(h={b:c}),d&&((h=h||{}).a=d),f&&((h=h||{}).x=f),h}function n(c,d){if(!(c===null||typeof c!="object")){var f=e.getComment(c);f&&e.removeComment(c);var h,p,m,y;if(Object.prototype.toString.apply(c)==="[object Array]"){for(y={a:{}},h=0,p=c.length;h<p;h++)s(y.a,h,f.a[h],n(c[h]))&&(m=!0);!m&&f.e&&(y.e=t(f.e[0],f.e[1]),m=!0)}else{y={s:{}};var v,w=Object.keys(c);for(f&&f.o?(v=[],f.o.concat(w).forEach(function(S){Object.prototype.hasOwnProperty.call(c,S)&&v.indexOf(S)<0&&v.push(S)})):v=w,y.o=v,h=0,p=v.length;h<p;h++){var x=v[h];s(y.s,x,f.c[x],n(c[x]))&&(m=!0)}!m&&f.e&&(y.e=t(f.e[0],f.e[1]),m=!0)}return d&&f&&f.r&&(y.r=t(f.r[0],f.r[1])),m?y:void 0}}function r(){var c="";return[].forEach.call(arguments,function(d){d&&d.trim()!==""&&(c&&(c+="; "),c+=d.trim())}),c}function i(c,d){var f=[];if(u(c,d,f,[]),f.length>0){var h=l(d,null,1);h+=`
# Orphaned comments:
`,f.forEach(function(p){h+=("# "+p.path.join("/")+": "+r(p.b,p.a,p.e)).replace(`
`,"\\n ")+`
`}),l(d,h,1)}}function s(c,d,f,h){var p=t(f?f[0]:void 0,f?f[1]:void 0,h);return p&&(c[d]=p),p}function o(c,d){var f=t(d.b,d.a);return f.path=c,f}function a(c,d,f){if(c){var h,p;if(c.a)for(h=0,p=c.a.length;h<p;h++){var m=f.slice().concat([h]),y=c.a[h];y&&(d.push(o(m,y)),a(y.x,d,m))}else c.o&&c.o.forEach(function(v){var w=f.slice().concat([v]),x=c.s[v];x&&(d.push(o(w,x)),a(x.x,d,w))});c.e&&d.push(o(f,c.e))}}function u(c,d,f,h){if(c){if(d===null||typeof d!="object"){a(c,f,h);return}var p,m=e.createComment(d);if(h.length===0&&c.r&&(m.r=[c.r.b,c.r.a]),Object.prototype.toString.apply(d)==="[object Array]"){m.a=[];var y=c.a||{};for(var v in y)if(y.hasOwnProperty(v)){p=parseInt(v);var w=c.a[v];if(w){var x=h.slice().concat([p]);p<d.length?(m.a[p]=[w.b,w.a],u(w.x,d[p],f,x)):(f.push(o(x,w)),a(w.x,f,x))}}p===0&&c.e&&(m.e=[c.e.b,c.e.a])}else m.c={},m.o=[],(c.o||[]).forEach(function(S){var E=h.slice().concat([S]),T=c.s[S];Object.prototype.hasOwnProperty.call(d,S)?(m.o.push(S),T&&(m.c[S]=[T.b,T.a],u(T.x,d[S],f,E))):T&&(f.push(o(E,T)),a(T.x,f,E))}),c.e&&(m.e=[c.e.b,c.e.a])}}function l(c,d,f){var h=e.createComment(c,e.getComment(c));return h.r||(h.r=["",""]),(d||d==="")&&(h.r[f]=e.forceComment(d)),h.r[f]||""}return IB={extract:function(c){return n(c,!0)},merge:i,header:function(c,d){return l(c,d,0)},footer:function(c,d){return l(c,d,1)}},IB}/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var RB,mle;function Eat(){if(mle)return RB;mle=1;var e=kF(),t=bat(),n=_at(),r=wat(),i=xat(),s=yK();return RB={parse:n,stringify:r,endOfLine:function(){return e.EOL},setEndOfLine:function(o){(o===`
`||o===`\r
`)&&(e.EOL=o)},version:t,rt:{parse:function(o,a){return(a=a||{}).keepWsc=!0,n(o,a)},stringify:function(o,a){return(a=a||{}).keepWsc=!0,r(o,a)}},comments:i,dsf:s.std},RB}var vK=Eat(),QP={exports:{}},kB={},dm={},Kv={},PB={},NB={},OB={},gle;function OM(){return gle||(gle=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(w){if(super(),!e.IDENTIFIER.test(w))throw new Error("CodeGen: name must be a valid identifier");this.str=w}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(w){super(),this._items=typeof w=="string"?[w]:w}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const w=this._items[0];return w===""||w==='""'}get str(){var w;return(w=this._str)!==null&&w!==void 0?w:this._str=this._items.reduce((x,S)=>`${x}${S}`,"")}get names(){var w;return(w=this._names)!==null&&w!==void 0?w:this._names=this._items.reduce((x,S)=>(S instanceof n&&(x[S.str]=(x[S.str]||0)+1),x),{})}}e._Code=r,e.nil=new r("");function i(v,...w){const x=[v[0]];let S=0;for(;S<w.length;)a(x,w[S]),x.push(v[++S]);return new r(x)}e._=i;const s=new r("+");function o(v,...w){const x=[h(v[0])];let S=0;for(;S<w.length;)x.push(s),a(x,w[S]),x.push(s,h(v[++S]));return u(x),new r(x)}e.str=o;function a(v,w){w instanceof r?v.push(...w._items):w instanceof n?v.push(w):v.push(d(w))}e.addCodeArg=a;function u(v){let w=1;for(;w<v.length-1;){if(v[w]===s){const x=l(v[w-1],v[w+1]);if(x!==void 0){v.splice(w-1,3,x);continue}v[w++]="+"}w++}}function l(v,w){if(w==='""')return v;if(v==='""')return w;if(typeof v=="string")return w instanceof n||v[v.length-1]!=='"'?void 0:typeof w!="string"?`${v.slice(0,-1)}${w}"`:w[0]==='"'?v.slice(0,-1)+w.slice(1):void 0;if(typeof w=="string"&&w[0]==='"'&&!(v instanceof n))return`"${v}${w.slice(1)}`}function c(v,w){return w.emptyStr()?v:v.emptyStr()?w:o`${v}${w}`}e.strConcat=c;function d(v){return typeof v=="number"||typeof v=="boolean"||v===null?v:h(Array.isArray(v)?v.join(","):v)}function f(v){return new r(h(v))}e.stringify=f;function h(v){return JSON.stringify(v).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(v){return typeof v=="string"&&e.IDENTIFIER.test(v)?new r(`.${v}`):i`[${v}]`}e.getProperty=p;function m(v){if(typeof v=="string"&&e.IDENTIFIER.test(v))return new r(`${v}`);throw new Error(`CodeGen: invalid export name: ${v}, use explicit $id name mapping`)}e.getEsmExportName=m;function y(v){return new r(v.toString())}e.regexpCode=y}(OB)),OB}var DB={},yle;function vle(){return yle||(yle=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=OM();class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,d;if(!((d=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||d===void 0)&&d.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:d}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${d}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var d;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const f=this.toName(l),{prefix:h}=f,p=(d=c.key)!==null&&d!==void 0?d:c.ref;let m=this._values[h];if(m){const w=m.get(p);if(w)return w}else m=this._values[h]=new Map;m.set(p,f);const y=this._scope[h]||(this._scope[h]=[]),v=y.length;return y[v]=c.ref,f.setValue(c,{property:h,itemIndex:v}),f}getValue(l,c){const d=this._values[l];if(d)return d.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,d=>{if(d.scopePath===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return(0,t._)`${l}${d.scopePath}`})}scopeCode(l=this._values,c,d){return this._reduceValues(l,f=>{if(f.value===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return f.value.code},c,d)}_reduceValues(l,c,d={},f){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const y=d[p]=d[p]||new Map;m.forEach(v=>{if(y.has(v))return;y.set(v,r.Started);let w=c(v);if(w){const x=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${x} ${v} = ${w};${this.opts._n}`}else if(w=f==null?void 0:f(v))h=(0,t._)`${h}${w}${this.opts._n}`;else throw new n(v);y.set(v,r.Completed)})}return h}}e.ValueScope=a}(DB)),DB}var ble;function wr(){return ble||(ble=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=OM(),n=vle();var r=OM();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=vle();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(Q,Z){return this}}class o extends s{constructor(Q,Z,ne){super(),this.varKind=Q,this.name=Z,this.rhs=ne}render({es5:Q,_n:Z}){const ne=Q?n.varKinds.var:this.varKind,ue=this.rhs===void 0?"":` = ${this.rhs}`;return`${ne} ${this.name}${ue};`+Z}optimizeNames(Q,Z){if(Q[this.name.str])return this.rhs&&(this.rhs=$(this.rhs,Q,Z)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(Q,Z,ne){super(),this.lhs=Q,this.rhs=Z,this.sideEffects=ne}render({_n:Q}){return`${this.lhs} = ${this.rhs};`+Q}optimizeNames(Q,Z){if(!(this.lhs instanceof t.Name&&!Q[this.lhs.str]&&!this.sideEffects))return this.rhs=$(this.rhs,Q,Z),this}get names(){const Q=this.lhs instanceof t.Name?{}:{...this.lhs.names};return O(Q,this.rhs)}}class u extends a{constructor(Q,Z,ne,ue){super(Q,ne,ue),this.op=Z}render({_n:Q}){return`${this.lhs} ${this.op}= ${this.rhs};`+Q}}class l extends s{constructor(Q){super(),this.label=Q,this.names={}}render({_n:Q}){return`${this.label}:`+Q}}class c extends s{constructor(Q){super(),this.label=Q,this.names={}}render({_n:Q}){return`break${this.label?` ${this.label}`:""};`+Q}}class d extends s{constructor(Q){super(),this.error=Q}render({_n:Q}){return`throw ${this.error};`+Q}get names(){return this.error.names}}class f extends s{constructor(Q){super(),this.code=Q}render({_n:Q}){return`${this.code};`+Q}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(Q,Z){return this.code=$(this.code,Q,Z),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(Q=[]){super(),this.nodes=Q}render(Q){return this.nodes.reduce((Z,ne)=>Z+ne.render(Q),"")}optimizeNodes(){const{nodes:Q}=this;let Z=Q.length;for(;Z--;){const ne=Q[Z].optimizeNodes();Array.isArray(ne)?Q.splice(Z,1,...ne):ne?Q[Z]=ne:Q.splice(Z,1)}return Q.length>0?this:void 0}optimizeNames(Q,Z){const{nodes:ne}=this;let ue=ne.length;for(;ue--;){const le=ne[ue];le.optimizeNames(Q,Z)||(F(Q,le.names),ne.splice(ue,1))}return ne.length>0?this:void 0}get names(){return this.nodes.reduce((Q,Z)=>z(Q,Z.names),{})}}class p extends h{render(Q){return"{"+Q._n+super.render(Q)+"}"+Q._n}}class m extends h{}class y extends p{}y.kind="else";class v extends p{constructor(Q,Z){super(Z),this.condition=Q}render(Q){let Z=`if(${this.condition})`+super.render(Q);return this.else&&(Z+="else "+this.else.render(Q)),Z}optimizeNodes(){super.optimizeNodes();const Q=this.condition;if(Q===!0)return this.nodes;let Z=this.else;if(Z){const ne=Z.optimizeNodes();Z=this.else=Array.isArray(ne)?new y(ne):ne}if(Z)return Q===!1?Z instanceof v?Z:Z.nodes:this.nodes.length?this:new v(B(Q),Z instanceof v?[Z]:Z.nodes);if(!(Q===!1||!this.nodes.length))return this}optimizeNames(Q,Z){var ne;if(this.else=(ne=this.else)===null||ne===void 0?void 0:ne.optimizeNames(Q,Z),!!(super.optimizeNames(Q,Z)||this.else))return this.condition=$(this.condition,Q,Z),this}get names(){const Q=super.names;return O(Q,this.condition),this.else&&z(Q,this.else.names),Q}}v.kind="if";class w extends p{}w.kind="for";class x extends w{constructor(Q){super(),this.iteration=Q}render(Q){return`for(${this.iteration})`+super.render(Q)}optimizeNames(Q,Z){if(super.optimizeNames(Q,Z))return this.iteration=$(this.iteration,Q,Z),this}get names(){return z(super.names,this.iteration.names)}}class S extends w{constructor(Q,Z,ne,ue){super(),this.varKind=Q,this.name=Z,this.from=ne,this.to=ue}render(Q){const Z=Q.es5?n.varKinds.var:this.varKind,{name:ne,from:ue,to:le}=this;return`for(${Z} ${ne}=${ue}; ${ne}<${le}; ${ne}++)`+super.render(Q)}get names(){const Q=O(super.names,this.from);return O(Q,this.to)}}class E extends w{constructor(Q,Z,ne,ue){super(),this.loop=Q,this.varKind=Z,this.name=ne,this.iterable=ue}render(Q){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(Q)}optimizeNames(Q,Z){if(super.optimizeNames(Q,Z))return this.iterable=$(this.iterable,Q,Z),this}get names(){return z(super.names,this.iterable.names)}}class T extends p{constructor(Q,Z,ne){super(),this.name=Q,this.args=Z,this.async=ne}render(Q){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(Q)}}T.kind="func";class A extends h{render(Q){return"return "+super.render(Q)}}A.kind="return";class I extends p{render(Q){let Z="try"+super.render(Q);return this.catch&&(Z+=this.catch.render(Q)),this.finally&&(Z+=this.finally.render(Q)),Z}optimizeNodes(){var Q,Z;return super.optimizeNodes(),(Q=this.catch)===null||Q===void 0||Q.optimizeNodes(),(Z=this.finally)===null||Z===void 0||Z.optimizeNodes(),this}optimizeNames(Q,Z){var ne,ue;return super.optimizeNames(Q,Z),(ne=this.catch)===null||ne===void 0||ne.optimizeNames(Q,Z),(ue=this.finally)===null||ue===void 0||ue.optimizeNames(Q,Z),this}get names(){const Q=super.names;return this.catch&&z(Q,this.catch.names),this.finally&&z(Q,this.finally.names),Q}}class k extends p{constructor(Q){super(),this.error=Q}render(Q){return`catch(${this.error})`+super.render(Q)}}k.kind="catch";class D extends p{render(Q){return"finally"+super.render(Q)}}D.kind="finally";class M{constructor(Q,Z={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...Z,_n:Z.lines?`
`:""},this._extScope=Q,this._scope=new n.Scope({parent:Q}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(Q){return this._scope.name(Q)}scopeName(Q){return this._extScope.name(Q)}scopeValue(Q,Z){const ne=this._extScope.value(Q,Z);return(this._values[ne.prefix]||(this._values[ne.prefix]=new Set)).add(ne),ne}getScopeValue(Q,Z){return this._extScope.getValue(Q,Z)}scopeRefs(Q){return this._extScope.scopeRefs(Q,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(Q,Z,ne,ue){const le=this._scope.toName(Z);return ne!==void 0&&ue&&(this._constants[le.str]=ne),this._leafNode(new o(Q,le,ne)),le}const(Q,Z,ne){return this._def(n.varKinds.const,Q,Z,ne)}let(Q,Z,ne){return this._def(n.varKinds.let,Q,Z,ne)}var(Q,Z,ne){return this._def(n.varKinds.var,Q,Z,ne)}assign(Q,Z,ne){return this._leafNode(new a(Q,Z,ne))}add(Q,Z){return this._leafNode(new u(Q,e.operators.ADD,Z))}code(Q){return typeof Q=="function"?Q():Q!==t.nil&&this._leafNode(new f(Q)),this}object(...Q){const Z=["{"];for(const[ne,ue]of Q)Z.length>1&&Z.push(","),Z.push(ne),(ne!==ue||this.opts.es5)&&(Z.push(":"),(0,t.addCodeArg)(Z,ue));return Z.push("}"),new t._Code(Z)}if(Q,Z,ne){if(this._blockNode(new v(Q)),Z&&ne)this.code(Z).else().code(ne).endIf();else if(Z)this.code(Z).endIf();else if(ne)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(Q){return this._elseNode(new v(Q))}else(){return this._elseNode(new y)}endIf(){return this._endBlockNode(v,y)}_for(Q,Z){return this._blockNode(Q),Z&&this.code(Z).endFor(),this}for(Q,Z){return this._for(new x(Q),Z)}forRange(Q,Z,ne,ue,le=this.opts.es5?n.varKinds.var:n.varKinds.let){const ce=this._scope.toName(Q);return this._for(new S(le,ce,Z,ne),()=>ue(ce))}forOf(Q,Z,ne,ue=n.varKinds.const){const le=this._scope.toName(Q);if(this.opts.es5){const ce=Z instanceof t.Name?Z:this.var("_arr",Z);return this.forRange("_i",0,(0,t._)`${ce}.length`,ge=>{this.var(le,(0,t._)`${ce}[${ge}]`),ne(le)})}return this._for(new E("of",ue,le,Z),()=>ne(le))}forIn(Q,Z,ne,ue=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(Q,(0,t._)`Object.keys(${Z})`,ne);const le=this._scope.toName(Q);return this._for(new E("in",ue,le,Z),()=>ne(le))}endFor(){return this._endBlockNode(w)}label(Q){return this._leafNode(new l(Q))}break(Q){return this._leafNode(new c(Q))}return(Q){const Z=new A;if(this._blockNode(Z),this.code(Q),Z.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(A)}try(Q,Z,ne){if(!Z&&!ne)throw new Error('CodeGen: "try" without "catch" and "finally"');const ue=new I;if(this._blockNode(ue),this.code(Q),Z){const le=this.name("e");this._currNode=ue.catch=new k(le),Z(le)}return ne&&(this._currNode=ue.finally=new D,this.code(ne)),this._endBlockNode(k,D)}throw(Q){return this._leafNode(new d(Q))}block(Q,Z){return this._blockStarts.push(this._nodes.length),Q&&this.code(Q).endBlock(Z),this}endBlock(Q){const Z=this._blockStarts.pop();if(Z===void 0)throw new Error("CodeGen: not in self-balancing block");const ne=this._nodes.length-Z;if(ne<0||Q!==void 0&&ne!==Q)throw new Error(`CodeGen: wrong number of nodes: ${ne} vs ${Q} expected`);return this._nodes.length=Z,this}func(Q,Z=t.nil,ne,ue){return this._blockNode(new T(Q,Z,ne)),ue&&this.code(ue).endFunc(),this}endFunc(){return this._endBlockNode(T)}optimize(Q=1){for(;Q-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(Q){return this._currNode.nodes.push(Q),this}_blockNode(Q){this._currNode.nodes.push(Q),this._nodes.push(Q)}_endBlockNode(Q,Z){const ne=this._currNode;if(ne instanceof Q||Z&&ne instanceof Z)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${Z?`${Q.kind}/${Z.kind}`:Q.kind}"`)}_elseNode(Q){const Z=this._currNode;if(!(Z instanceof v))throw new Error('CodeGen: "else" without "if"');return this._currNode=Z.else=Q,this}get _root(){return this._nodes[0]}get _currNode(){const Q=this._nodes;return Q[Q.length-1]}set _currNode(Q){const Z=this._nodes;Z[Z.length-1]=Q}}e.CodeGen=M;function z(H,Q){for(const Z in Q)H[Z]=(H[Z]||0)+(Q[Z]||0);return H}function O(H,Q){return Q instanceof t._CodeOrName?z(H,Q.names):H}function $(H,Q,Z){if(H instanceof t.Name)return ne(H);if(!ue(H))return H;return new t._Code(H._items.reduce((le,ce)=>(ce instanceof t.Name&&(ce=ne(ce)),ce instanceof t._Code?le.push(...ce._items):le.push(ce),le),[]));function ne(le){const ce=Z[le.str];return ce===void 0||Q[le.str]!==1?le:(delete Q[le.str],ce)}function ue(le){return le instanceof t._Code&&le._items.some(ce=>ce instanceof t.Name&&Q[ce.str]===1&&Z[ce.str]!==void 0)}}function F(H,Q){for(const Z in Q)H[Z]=(H[Z]||0)-(Q[Z]||0)}function B(H){return typeof H=="boolean"||typeof H=="number"||H===null?!H:(0,t._)`!${X(H)}`}e.not=B;const q=V(e.operators.AND);function G(...H){return H.reduce(q)}e.and=G;const K=V(e.operators.OR);function L(...H){return H.reduce(K)}e.or=L;function V(H){return(Q,Z)=>Q===t.nil?Z:Z===t.nil?Q:(0,t._)`${X(Q)} ${H} ${X(Z)}`}function X(H){return H instanceof t.Name?H:(0,t._)`(${H})`}}(NB)),NB}var fr={},_le;function ti(){if(_le)return fr;_le=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.checkStrictMode=fr.getErrorPath=fr.Type=fr.useFunc=fr.setEvaluated=fr.evaluatedPropsToName=fr.mergeEvaluated=fr.eachItem=fr.unescapeJsonPointer=fr.escapeJsonPointer=fr.escapeFragment=fr.unescapeFragment=fr.schemaRefOrVal=fr.schemaHasRulesButRef=fr.schemaHasRules=fr.checkUnknownRules=fr.alwaysValidSchema=fr.toHash=void 0;const e=wr(),t=OM();function n(E){const T={};for(const A of E)T[A]=!0;return T}fr.toHash=n;function r(E,T){return typeof T=="boolean"?T:Object.keys(T).length===0?!0:(i(E,T),!s(T,E.self.RULES.all))}fr.alwaysValidSchema=r;function i(E,T=E.schema){const{opts:A,self:I}=E;if(!A.strictSchema||typeof T=="boolean")return;const k=I.RULES.keywords;for(const D in T)k[D]||S(E,`unknown keyword: "${D}"`)}fr.checkUnknownRules=i;function s(E,T){if(typeof E=="boolean")return!E;for(const A in E)if(T[A])return!0;return!1}fr.schemaHasRules=s;function o(E,T){if(typeof E=="boolean")return!E;for(const A in E)if(A!=="$ref"&&T.all[A])return!0;return!1}fr.schemaHasRulesButRef=o;function a({topSchemaRef:E,schemaPath:T},A,I,k){if(!k){if(typeof A=="number"||typeof A=="boolean")return A;if(typeof A=="string")return(0,e._)`${A}`}return(0,e._)`${E}${T}${(0,e.getProperty)(I)}`}fr.schemaRefOrVal=a;function u(E){return d(decodeURIComponent(E))}fr.unescapeFragment=u;function l(E){return encodeURIComponent(c(E))}fr.escapeFragment=l;function c(E){return typeof E=="number"?`${E}`:E.replace(/~/g,"~0").replace(/\//g,"~1")}fr.escapeJsonPointer=c;function d(E){return E.replace(/~1/g,"/").replace(/~0/g,"~")}fr.unescapeJsonPointer=d;function f(E,T){if(Array.isArray(E))for(const A of E)T(A);else T(E)}fr.eachItem=f;function h({mergeNames:E,mergeToName:T,mergeValues:A,resultToName:I}){return(k,D,M,z)=>{const O=M===void 0?D:M instanceof e.Name?(D instanceof e.Name?E(k,D,M):T(k,D,M),M):D instanceof e.Name?(T(k,M,D),D):A(D,M);return z===e.Name&&!(O instanceof e.Name)?I(k,O):O}}fr.mergeEvaluated={props:h({mergeNames:(E,T,A)=>E.if((0,e._)`${A} !== true && ${T} !== undefined`,()=>{E.if((0,e._)`${T} === true`,()=>E.assign(A,!0),()=>E.assign(A,(0,e._)`${A} || {}`).code((0,e._)`Object.assign(${A}, ${T})`))}),mergeToName:(E,T,A)=>E.if((0,e._)`${A} !== true`,()=>{T===!0?E.assign(A,!0):(E.assign(A,(0,e._)`${A} || {}`),m(E,A,T))}),mergeValues:(E,T)=>E===!0?!0:{...E,...T},resultToName:p}),items:h({mergeNames:(E,T,A)=>E.if((0,e._)`${A} !== true && ${T} !== undefined`,()=>E.assign(A,(0,e._)`${T} === true ? true : ${A} > ${T} ? ${A} : ${T}`)),mergeToName:(E,T,A)=>E.if((0,e._)`${A} !== true`,()=>E.assign(A,T===!0?!0:(0,e._)`${A} > ${T} ? ${A} : ${T}`)),mergeValues:(E,T)=>E===!0?!0:Math.max(E,T),resultToName:(E,T)=>E.var("items",T)})};function p(E,T){if(T===!0)return E.var("props",!0);const A=E.var("props",(0,e._)`{}`);return T!==void 0&&m(E,A,T),A}fr.evaluatedPropsToName=p;function m(E,T,A){Object.keys(A).forEach(I=>E.assign((0,e._)`${T}${(0,e.getProperty)(I)}`,!0))}fr.setEvaluated=m;const y={};function v(E,T){return E.scopeValue("func",{ref:T,code:y[T.code]||(y[T.code]=new t._Code(T.code))})}fr.useFunc=v;var w;(function(E){E[E.Num=0]="Num",E[E.Str=1]="Str"})(w||(fr.Type=w={}));function x(E,T,A){if(E instanceof e.Name){const I=T===w.Num;return A?I?(0,e._)`"[" + ${E} + "]"`:(0,e._)`"['" + ${E} + "']"`:I?(0,e._)`"/" + ${E}`:(0,e._)`"/" + ${E}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return A?(0,e.getProperty)(E).toString():"/"+c(E)}fr.getErrorPath=x;function S(E,T,A=E.opts.strictSchema){if(A){if(T=`strict mode: ${T}`,A===!0)throw new Error(T);E.self.logger.warn(T)}}return fr.checkStrictMode=S,fr}var JP={},wle;function dv(){if(wle)return JP;wle=1,Object.defineProperty(JP,"__esModule",{value:!0});const e=wr(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return JP.default=t,JP}var xle;function PF(){return xle||(xle=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=wr(),n=ti(),r=dv();e.keywordError={message:({keyword:y})=>(0,t.str)`must pass "${y}" keyword validation`},e.keyword$DataError={message:({keyword:y,schemaType:v})=>v?(0,t.str)`"${y}" keyword must be ${v} ($data)`:(0,t.str)`"${y}" keyword is invalid ($data)`};function i(y,v=e.keywordError,w,x){const{it:S}=y,{gen:E,compositeRule:T,allErrors:A}=S,I=d(y,v,w);x??(T||A)?u(E,I):l(S,(0,t._)`[${I}]`)}e.reportError=i;function s(y,v=e.keywordError,w){const{it:x}=y,{gen:S,compositeRule:E,allErrors:T}=x,A=d(y,v,w);u(S,A),E||T||l(x,r.default.vErrors)}e.reportExtraError=s;function o(y,v){y.assign(r.default.errors,v),y.if((0,t._)`${r.default.vErrors} !== null`,()=>y.if(v,()=>y.assign((0,t._)`${r.default.vErrors}.length`,v),()=>y.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:y,keyword:v,schemaValue:w,data:x,errsCount:S,it:E}){if(S===void 0)throw new Error("ajv implementation error");const T=y.name("err");y.forRange("i",S,r.default.errors,A=>{y.const(T,(0,t._)`${r.default.vErrors}[${A}]`),y.if((0,t._)`${T}.instancePath === undefined`,()=>y.assign((0,t._)`${T}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),y.assign((0,t._)`${T}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${v}`),E.opts.verbose&&(y.assign((0,t._)`${T}.schema`,w),y.assign((0,t._)`${T}.data`,x))})}e.extendErrors=a;function u(y,v){const w=y.const("err",v);y.if((0,t._)`${r.default.vErrors} === null`,()=>y.assign(r.default.vErrors,(0,t._)`[${w}]`),(0,t._)`${r.default.vErrors}.push(${w})`),y.code((0,t._)`${r.default.errors}++`)}function l(y,v){const{gen:w,validateName:x,schemaEnv:S}=y;S.$async?w.throw((0,t._)`new ${y.ValidationError}(${v})`):(w.assign((0,t._)`${x}.errors`,v),w.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function d(y,v,w){const{createErrors:x}=y.it;return x===!1?(0,t._)`{}`:f(y,v,w)}function f(y,v,w={}){const{gen:x,it:S}=y,E=[h(S,w),p(y,w)];return m(y,v,E),x.object(...E)}function h({errorPath:y},{instancePath:v}){const w=v?(0,t.str)`${y}${(0,n.getErrorPath)(v,n.Type.Str)}`:y;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,w)]}function p({keyword:y,it:{errSchemaPath:v}},{schemaPath:w,parentSchema:x}){let S=x?v:(0,t.str)`${v}/${y}`;return w&&(S=(0,t.str)`${S}${(0,n.getErrorPath)(w,n.Type.Str)}`),[c.schemaPath,S]}function m(y,{params:v,message:w},x){const{keyword:S,data:E,schemaValue:T,it:A}=y,{opts:I,propertyName:k,topSchemaRef:D,schemaPath:M}=A;x.push([c.keyword,S],[c.params,typeof v=="function"?v(y):v||(0,t._)`{}`]),I.messages&&x.push([c.message,typeof w=="function"?w(y):w]),I.verbose&&x.push([c.schema,T],[c.parentSchema,(0,t._)`${D}${M}`],[r.default.data,E]),k&&x.push([c.propertyName,k])}}(PB)),PB}var Ele;function Sat(){if(Ele)return Kv;Ele=1,Object.defineProperty(Kv,"__esModule",{value:!0}),Kv.boolOrEmptySchema=Kv.topBoolOrEmptySchema=void 0;const e=PF(),t=wr(),n=dv(),r={message:"boolean schema is false"};function i(a){const{gen:u,schema:l,validateName:c}=a;l===!1?o(a,!1):typeof l=="object"&&l.$async===!0?u.return(n.default.data):(u.assign((0,t._)`${c}.errors`,null),u.return(!0))}Kv.topBoolOrEmptySchema=i;function s(a,u){const{gen:l,schema:c}=a;c===!1?(l.var(u,!1),o(a)):l.var(u,!0)}Kv.boolOrEmptySchema=s;function o(a,u){const{gen:l,data:c}=a,d={gen:l,keyword:"false schema",data:c,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:a};(0,e.reportError)(d,r,void 0,u)}return Kv}var sa={},Xv={},Sle;function NEe(){if(Sle)return Xv;Sle=1,Object.defineProperty(Xv,"__esModule",{value:!0}),Xv.getRules=Xv.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function n(i){return typeof i=="string"&&t.has(i)}Xv.isJSONType=n;function r(){const i={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...i,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},i.number,i.string,i.array,i.object],post:{rules:[]},all:{},keywords:{}}}return Xv.getRules=r,Xv}var fm={},Tle;function OEe(){if(Tle)return fm;Tle=1,Object.defineProperty(fm,"__esModule",{value:!0}),fm.shouldUseRule=fm.shouldUseGroup=fm.schemaHasRulesForType=void 0;function e({schema:r,self:i},s){const o=i.RULES.types[s];return o&&o!==!0&&t(r,o)}fm.schemaHasRulesForType=e;function t(r,i){return i.rules.some(s=>n(r,s))}fm.shouldUseGroup=t;function n(r,i){var s;return r[i.keyword]!==void 0||((s=i.definition.implements)===null||s===void 0?void 0:s.some(o=>r[o]!==void 0))}return fm.shouldUseRule=n,fm}var Cle;function DM(){if(Cle)return sa;Cle=1,Object.defineProperty(sa,"__esModule",{value:!0}),sa.reportTypeError=sa.checkDataTypes=sa.checkDataType=sa.coerceAndCheckDataType=sa.getJSONTypes=sa.getSchemaTypes=sa.DataType=void 0;const e=NEe(),t=OEe(),n=PF(),r=wr(),i=ti();var s;(function(w){w[w.Correct=0]="Correct",w[w.Wrong=1]="Wrong"})(s||(sa.DataType=s={}));function o(w){const x=a(w.type);if(x.includes("null")){if(w.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!x.length&&w.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');w.nullable===!0&&x.push("null")}return x}sa.getSchemaTypes=o;function a(w){const x=Array.isArray(w)?w:w?[w]:[];if(x.every(e.isJSONType))return x;throw new Error("type must be JSONType or JSONType[]: "+x.join(","))}sa.getJSONTypes=a;function u(w,x){const{gen:S,data:E,opts:T}=w,A=c(x,T.coerceTypes),I=x.length>0&&!(A.length===0&&x.length===1&&(0,t.schemaHasRulesForType)(w,x[0]));if(I){const k=p(x,E,T.strictNumbers,s.Wrong);S.if(k,()=>{A.length?d(w,x,A):y(w)})}return I}sa.coerceAndCheckDataType=u;const l=new Set(["string","number","integer","boolean","null"]);function c(w,x){return x?w.filter(S=>l.has(S)||x==="array"&&S==="array"):[]}function d(w,x,S){const{gen:E,data:T,opts:A}=w,I=E.let("dataType",(0,r._)`typeof ${T}`),k=E.let("coerced",(0,r._)`undefined`);A.coerceTypes==="array"&&E.if((0,r._)`${I} == 'object' && Array.isArray(${T}) && ${T}.length == 1`,()=>E.assign(T,(0,r._)`${T}[0]`).assign(I,(0,r._)`typeof ${T}`).if(p(x,T,A.strictNumbers),()=>E.assign(k,T))),E.if((0,r._)`${k} !== undefined`);for(const M of S)(l.has(M)||M==="array"&&A.coerceTypes==="array")&&D(M);E.else(),y(w),E.endIf(),E.if((0,r._)`${k} !== undefined`,()=>{E.assign(T,k),f(w,k)});function D(M){switch(M){case"string":E.elseIf((0,r._)`${I} == "number" || ${I} == "boolean"`).assign(k,(0,r._)`"" + ${T}`).elseIf((0,r._)`${T} === null`).assign(k,(0,r._)`""`);return;case"number":E.elseIf((0,r._)`${I} == "boolean" || ${T} === null
              || (${I} == "string" && ${T} && ${T} == +${T})`).assign(k,(0,r._)`+${T}`);return;case"integer":E.elseIf((0,r._)`${I} === "boolean" || ${T} === null
              || (${I} === "string" && ${T} && ${T} == +${T} && !(${T} % 1))`).assign(k,(0,r._)`+${T}`);return;case"boolean":E.elseIf((0,r._)`${T} === "false" || ${T} === 0 || ${T} === null`).assign(k,!1).elseIf((0,r._)`${T} === "true" || ${T} === 1`).assign(k,!0);return;case"null":E.elseIf((0,r._)`${T} === "" || ${T} === 0 || ${T} === false`),E.assign(k,null);return;case"array":E.elseIf((0,r._)`${I} === "string" || ${I} === "number"
              || ${I} === "boolean" || ${T} === null`).assign(k,(0,r._)`[${T}]`)}}}function f({gen:w,parentData:x,parentDataProperty:S},E){w.if((0,r._)`${x} !== undefined`,()=>w.assign((0,r._)`${x}[${S}]`,E))}function h(w,x,S,E=s.Correct){const T=E===s.Correct?r.operators.EQ:r.operators.NEQ;let A;switch(w){case"null":return(0,r._)`${x} ${T} null`;case"array":A=(0,r._)`Array.isArray(${x})`;break;case"object":A=(0,r._)`${x} && typeof ${x} == "object" && !Array.isArray(${x})`;break;case"integer":A=I((0,r._)`!(${x} % 1) && !isNaN(${x})`);break;case"number":A=I();break;default:return(0,r._)`typeof ${x} ${T} ${w}`}return E===s.Correct?A:(0,r.not)(A);function I(k=r.nil){return(0,r.and)((0,r._)`typeof ${x} == "number"`,k,S?(0,r._)`isFinite(${x})`:r.nil)}}sa.checkDataType=h;function p(w,x,S,E){if(w.length===1)return h(w[0],x,S,E);let T;const A=(0,i.toHash)(w);if(A.array&&A.object){const I=(0,r._)`typeof ${x} != "object"`;T=A.null?I:(0,r._)`!${x} || ${I}`,delete A.null,delete A.array,delete A.object}else T=r.nil;A.number&&delete A.integer;for(const I in A)T=(0,r.and)(T,h(I,x,S,E));return T}sa.checkDataTypes=p;const m={message:({schema:w})=>`must be ${w}`,params:({schema:w,schemaValue:x})=>typeof w=="string"?(0,r._)`{type: ${w}}`:(0,r._)`{type: ${x}}`};function y(w){const x=v(w);(0,n.reportError)(x,m)}sa.reportTypeError=y;function v(w){const{gen:x,data:S,schema:E}=w,T=(0,i.schemaRefOrVal)(w,E,"type");return{gen:x,keyword:"type",data:S,schema:E.type,schemaCode:T,schemaValue:T,parentSchema:E,params:{},it:w}}return sa}var qT={},Ale;function Tat(){if(Ale)return qT;Ale=1,Object.defineProperty(qT,"__esModule",{value:!0}),qT.assignDefaults=void 0;const e=wr(),t=ti();function n(i,s){const{properties:o,items:a}=i.schema;if(s==="object"&&o)for(const u in o)r(i,u,o[u].default);else s==="array"&&Array.isArray(a)&&a.forEach((u,l)=>r(i,l,u.default))}qT.assignDefaults=n;function r(i,s,o){const{gen:a,compositeRule:u,data:l,opts:c}=i;if(o===void 0)return;const d=(0,e._)`${l}${(0,e.getProperty)(s)}`;if(u){(0,t.checkStrictMode)(i,`default is ignored for: ${d}`);return}let f=(0,e._)`${d} === undefined`;c.useDefaults==="empty"&&(f=(0,e._)`${f} || ${d} === null || ${d} === ""`),a.if(f,(0,e._)`${d} = ${(0,e.stringify)(o)}`)}return qT}var Xd={},xi={},Ile;function rh(){if(Ile)return xi;Ile=1,Object.defineProperty(xi,"__esModule",{value:!0}),xi.validateUnion=xi.validateArray=xi.usePattern=xi.callValidateCode=xi.schemaProperties=xi.allSchemaProperties=xi.noPropertyInData=xi.propertyInData=xi.isOwnProperty=xi.hasPropFunc=xi.reportMissingProp=xi.checkMissingProp=xi.checkReportMissingProp=void 0;const e=wr(),t=ti(),n=dv(),r=ti();function i(w,x){const{gen:S,data:E,it:T}=w;S.if(c(S,E,x,T.opts.ownProperties),()=>{w.setParams({missingProperty:(0,e._)`${x}`},!0),w.error()})}xi.checkReportMissingProp=i;function s({gen:w,data:x,it:{opts:S}},E,T){return(0,e.or)(...E.map(A=>(0,e.and)(c(w,x,A,S.ownProperties),(0,e._)`${T} = ${A}`)))}xi.checkMissingProp=s;function o(w,x){w.setParams({missingProperty:x},!0),w.error()}xi.reportMissingProp=o;function a(w){return w.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}xi.hasPropFunc=a;function u(w,x,S){return(0,e._)`${a(w)}.call(${x}, ${S})`}xi.isOwnProperty=u;function l(w,x,S,E){const T=(0,e._)`${x}${(0,e.getProperty)(S)} !== undefined`;return E?(0,e._)`${T} && ${u(w,x,S)}`:T}xi.propertyInData=l;function c(w,x,S,E){const T=(0,e._)`${x}${(0,e.getProperty)(S)} === undefined`;return E?(0,e.or)(T,(0,e.not)(u(w,x,S))):T}xi.noPropertyInData=c;function d(w){return w?Object.keys(w).filter(x=>x!=="__proto__"):[]}xi.allSchemaProperties=d;function f(w,x){return d(x).filter(S=>!(0,t.alwaysValidSchema)(w,x[S]))}xi.schemaProperties=f;function h({schemaCode:w,data:x,it:{gen:S,topSchemaRef:E,schemaPath:T,errorPath:A},it:I},k,D,M){const z=M?(0,e._)`${w}, ${x}, ${E}${T}`:x,O=[[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,A)],[n.default.parentData,I.parentData],[n.default.parentDataProperty,I.parentDataProperty],[n.default.rootData,n.default.rootData]];I.opts.dynamicRef&&O.push([n.default.dynamicAnchors,n.default.dynamicAnchors]);const $=(0,e._)`${z}, ${S.object(...O)}`;return D!==e.nil?(0,e._)`${k}.call(${D}, ${$})`:(0,e._)`${k}(${$})`}xi.callValidateCode=h;const p=(0,e._)`new RegExp`;function m({gen:w,it:{opts:x}},S){const E=x.unicodeRegExp?"u":"",{regExp:T}=x.code,A=T(S,E);return w.scopeValue("pattern",{key:A.toString(),ref:A,code:(0,e._)`${T.code==="new RegExp"?p:(0,r.useFunc)(w,T)}(${S}, ${E})`})}xi.usePattern=m;function y(w){const{gen:x,data:S,keyword:E,it:T}=w,A=x.name("valid");if(T.allErrors){const k=x.let("valid",!0);return I(()=>x.assign(k,!1)),k}return x.var(A,!0),I(()=>x.break()),A;function I(k){const D=x.const("len",(0,e._)`${S}.length`);x.forRange("i",0,D,M=>{w.subschema({keyword:E,dataProp:M,dataPropType:t.Type.Num},A),x.if((0,e.not)(A),k)})}}xi.validateArray=y;function v(w){const{gen:x,schema:S,keyword:E,it:T}=w;if(!Array.isArray(S))throw new Error("ajv implementation error");if(S.some(D=>(0,t.alwaysValidSchema)(T,D))&&!T.opts.unevaluated)return;const I=x.let("valid",!1),k=x.name("_valid");x.block(()=>S.forEach((D,M)=>{const z=w.subschema({keyword:E,schemaProp:M,compositeRule:!0},k);x.assign(I,(0,e._)`${I} || ${k}`),w.mergeValidEvaluated(z,k)||x.if((0,e.not)(I))})),w.result(I,()=>w.reset(),()=>w.error(!0))}return xi.validateUnion=v,xi}var Rle;function Cat(){if(Rle)return Xd;Rle=1,Object.defineProperty(Xd,"__esModule",{value:!0}),Xd.validateKeywordUsage=Xd.validSchemaType=Xd.funcKeywordCode=Xd.macroKeywordCode=void 0;const e=wr(),t=dv(),n=rh(),r=PF();function i(f,h){const{gen:p,keyword:m,schema:y,parentSchema:v,it:w}=f,x=h.macro.call(w.self,y,v,w),S=l(p,m,x);w.opts.validateSchema!==!1&&w.self.validateSchema(x,!0);const E=p.name("valid");f.subschema({schema:x,schemaPath:e.nil,errSchemaPath:`${w.errSchemaPath}/${m}`,topSchemaRef:S,compositeRule:!0},E),f.pass(E,()=>f.error(!0))}Xd.macroKeywordCode=i;function s(f,h){var p;const{gen:m,keyword:y,schema:v,parentSchema:w,$data:x,it:S}=f;u(S,h);const E=!x&&h.compile?h.compile.call(S.self,v,w,S):h.validate,T=l(m,y,E),A=m.let("valid");f.block$data(A,I),f.ok((p=h.valid)!==null&&p!==void 0?p:A);function I(){if(h.errors===!1)M(),h.modifying&&o(f),z(()=>f.error());else{const O=h.async?k():D();h.modifying&&o(f),z(()=>a(f,O))}}function k(){const O=m.let("ruleErrs",null);return m.try(()=>M((0,e._)`await `),$=>m.assign(A,!1).if((0,e._)`${$} instanceof ${S.ValidationError}`,()=>m.assign(O,(0,e._)`${$}.errors`),()=>m.throw($))),O}function D(){const O=(0,e._)`${T}.errors`;return m.assign(O,null),M(e.nil),O}function M(O=h.async?(0,e._)`await `:e.nil){const $=S.opts.passContext?t.default.this:t.default.self,F=!("compile"in h&&!x||h.schema===!1);m.assign(A,(0,e._)`${O}${(0,n.callValidateCode)(f,T,$,F)}`,h.modifying)}function z(O){var $;m.if((0,e.not)(($=h.valid)!==null&&$!==void 0?$:A),O)}}Xd.funcKeywordCode=s;function o(f){const{gen:h,data:p,it:m}=f;h.if(m.parentData,()=>h.assign(p,(0,e._)`${m.parentData}[${m.parentDataProperty}]`))}function a(f,h){const{gen:p}=f;p.if((0,e._)`Array.isArray(${h})`,()=>{p.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${h} : ${t.default.vErrors}.concat(${h})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,r.extendErrors)(f)},()=>f.error())}function u({schemaEnv:f},h){if(h.async&&!f.$async)throw new Error("async keyword in sync schema")}function l(f,h,p){if(p===void 0)throw new Error(`keyword "${h}" failed to compile`);return f.scopeValue("keyword",typeof p=="function"?{ref:p}:{ref:p,code:(0,e.stringify)(p)})}function c(f,h,p=!1){return!h.length||h.some(m=>m==="array"?Array.isArray(f):m==="object"?f&&typeof f=="object"&&!Array.isArray(f):typeof f==m||p&&typeof f>"u")}Xd.validSchemaType=c;function d({schema:f,opts:h,self:p,errSchemaPath:m},y,v){if(Array.isArray(y.keyword)?!y.keyword.includes(v):y.keyword!==v)throw new Error("ajv implementation error");const w=y.dependencies;if(w!=null&&w.some(x=>!Object.prototype.hasOwnProperty.call(f,x)))throw new Error(`parent schema must have dependencies of ${v}: ${w.join(",")}`);if(y.validateSchema&&!y.validateSchema(f[v])){const S=`keyword "${v}" value is invalid at path "${m}": `+p.errorsText(y.validateSchema.errors);if(h.validateSchema==="log")p.logger.error(S);else throw new Error(S)}}return Xd.validateKeywordUsage=d,Xd}var hm={},kle;function Aat(){if(kle)return hm;kle=1,Object.defineProperty(hm,"__esModule",{value:!0}),hm.extendSubschemaMode=hm.extendSubschemaData=hm.getSubschema=void 0;const e=wr(),t=ti();function n(s,{keyword:o,schemaProp:a,schema:u,schemaPath:l,errSchemaPath:c,topSchemaRef:d}){if(o!==void 0&&u!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(o!==void 0){const f=s.schema[o];return a===void 0?{schema:f,schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}`,errSchemaPath:`${s.errSchemaPath}/${o}`}:{schema:f[a],schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}${(0,e.getProperty)(a)}`,errSchemaPath:`${s.errSchemaPath}/${o}/${(0,t.escapeFragment)(a)}`}}if(u!==void 0){if(l===void 0||c===void 0||d===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:u,schemaPath:l,topSchemaRef:d,errSchemaPath:c}}throw new Error('either "keyword" or "schema" must be passed')}hm.getSubschema=n;function r(s,o,{dataProp:a,dataPropType:u,data:l,dataTypes:c,propertyName:d}){if(l!==void 0&&a!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:f}=o;if(a!==void 0){const{errorPath:p,dataPathArr:m,opts:y}=o,v=f.let("data",(0,e._)`${o.data}${(0,e.getProperty)(a)}`,!0);h(v),s.errorPath=(0,e.str)`${p}${(0,t.getErrorPath)(a,u,y.jsPropertySyntax)}`,s.parentDataProperty=(0,e._)`${a}`,s.dataPathArr=[...m,s.parentDataProperty]}if(l!==void 0){const p=l instanceof e.Name?l:f.let("data",l,!0);h(p),d!==void 0&&(s.propertyName=d)}c&&(s.dataTypes=c);function h(p){s.data=p,s.dataLevel=o.dataLevel+1,s.dataTypes=[],o.definedProperties=new Set,s.parentData=o.data,s.dataNames=[...o.dataNames,p]}}hm.extendSubschemaData=r;function i(s,{jtdDiscriminator:o,jtdMetadata:a,compositeRule:u,createErrors:l,allErrors:c}){u!==void 0&&(s.compositeRule=u),l!==void 0&&(s.createErrors=l),c!==void 0&&(s.allErrors=c),s.jtdDiscriminator=o,s.jtdMetadata=a}return hm.extendSubschemaMode=i,hm}var gu={},MB,Ple;function bK(){return Ple||(Ple=1,MB=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),MB}var $B={exports:{}},Nle;function Iat(){if(Nle)return $B.exports;Nle=1;var e=$B.exports=function(r,i,s){typeof i=="function"&&(s=i,i={}),s=i.cb||s;var o=typeof s=="function"?s:s.pre||function(){},a=s.post||function(){};t(i,o,a,r,"",r)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(r,i,s,o,a,u,l,c,d,f){if(o&&typeof o=="object"&&!Array.isArray(o)){i(o,a,u,l,c,d,f);for(var h in o){var p=o[h];if(Array.isArray(p)){if(h in e.arrayKeywords)for(var m=0;m<p.length;m++)t(r,i,s,p[m],a+"/"+h+"/"+m,u,a,h,o,m)}else if(h in e.propsKeywords){if(p&&typeof p=="object")for(var y in p)t(r,i,s,p[y],a+"/"+h+"/"+n(y),u,a,h,o,y)}else(h in e.keywords||r.allKeys&&!(h in e.skipKeywords))&&t(r,i,s,p,a+"/"+h,u,a,h,o)}s(o,a,u,l,c,d,f)}}function n(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}return $B.exports}var Ole;function NF(){if(Ole)return gu;Ole=1,Object.defineProperty(gu,"__esModule",{value:!0}),gu.getSchemaRefs=gu.resolveUrl=gu.normalizeId=gu._getFullPath=gu.getFullPath=gu.inlineRef=void 0;const e=ti(),t=bK(),n=Iat(),r=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function i(m,y=!0){return typeof m=="boolean"?!0:y===!0?!o(m):y?a(m)<=y:!1}gu.inlineRef=i;const s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function o(m){for(const y in m){if(s.has(y))return!0;const v=m[y];if(Array.isArray(v)&&v.some(o)||typeof v=="object"&&o(v))return!0}return!1}function a(m){let y=0;for(const v in m){if(v==="$ref")return 1/0;if(y++,!r.has(v)&&(typeof m[v]=="object"&&(0,e.eachItem)(m[v],w=>y+=a(w)),y===1/0))return 1/0}return y}function u(m,y="",v){v!==!1&&(y=d(y));const w=m.parse(y);return l(m,w)}gu.getFullPath=u;function l(m,y){return m.serialize(y).split("#")[0]+"#"}gu._getFullPath=l;const c=/#\/?$/;function d(m){return m?m.replace(c,""):""}gu.normalizeId=d;function f(m,y,v){return v=d(v),m.resolve(y,v)}gu.resolveUrl=f;const h=/^[a-z_][-a-z0-9._]*$/i;function p(m,y){if(typeof m=="boolean")return{};const{schemaId:v,uriResolver:w}=this.opts,x=d(m[v]||y),S={"":x},E=u(w,x,!1),T={},A=new Set;return n(m,{allKeys:!0},(D,M,z,O)=>{if(O===void 0)return;const $=E+M;let F=S[O];typeof D[v]=="string"&&(F=B.call(this,D[v])),q.call(this,D.$anchor),q.call(this,D.$dynamicAnchor),S[M]=F;function B(G){const K=this.opts.uriResolver.resolve;if(G=d(F?K(F,G):G),A.has(G))throw k(G);A.add(G);let L=this.refs[G];return typeof L=="string"&&(L=this.refs[L]),typeof L=="object"?I(D,L.schema,G):G!==d($)&&(G[0]==="#"?(I(D,T[G],G),T[G]=D):this.refs[G]=$),G}function q(G){if(typeof G=="string"){if(!h.test(G))throw new Error(`invalid anchor "${G}"`);B.call(this,`#${G}`)}}}),T;function I(D,M,z){if(M!==void 0&&!t(D,M))throw k(z)}function k(D){return new Error(`reference "${D}" resolves to more than one schema`)}}return gu.getSchemaRefs=p,gu}var Dle;function OF(){if(Dle)return dm;Dle=1,Object.defineProperty(dm,"__esModule",{value:!0}),dm.getData=dm.KeywordCxt=dm.validateFunctionCode=void 0;const e=Sat(),t=DM(),n=OEe(),r=DM(),i=Tat(),s=Cat(),o=Aat(),a=wr(),u=dv(),l=NF(),c=ti(),d=PF();function f(se){if(E(se)&&(A(se),S(se))){y(se);return}h(se,()=>(0,e.topBoolOrEmptySchema)(se))}dm.validateFunctionCode=f;function h({gen:se,validateName:te,schema:Ee,schemaEnv:we,opts:De},Le){De.code.es5?se.func(te,(0,a._)`${u.default.data}, ${u.default.valCxt}`,we.$async,()=>{se.code((0,a._)`"use strict"; ${w(Ee,De)}`),m(se,De),se.code(Le)}):se.func(te,(0,a._)`${u.default.data}, ${p(De)}`,we.$async,()=>se.code(w(Ee,De)).code(Le))}function p(se){return(0,a._)`{${u.default.instancePath}="", ${u.default.parentData}, ${u.default.parentDataProperty}, ${u.default.rootData}=${u.default.data}${se.dynamicRef?(0,a._)`, ${u.default.dynamicAnchors}={}`:a.nil}}={}`}function m(se,te){se.if(u.default.valCxt,()=>{se.var(u.default.instancePath,(0,a._)`${u.default.valCxt}.${u.default.instancePath}`),se.var(u.default.parentData,(0,a._)`${u.default.valCxt}.${u.default.parentData}`),se.var(u.default.parentDataProperty,(0,a._)`${u.default.valCxt}.${u.default.parentDataProperty}`),se.var(u.default.rootData,(0,a._)`${u.default.valCxt}.${u.default.rootData}`),te.dynamicRef&&se.var(u.default.dynamicAnchors,(0,a._)`${u.default.valCxt}.${u.default.dynamicAnchors}`)},()=>{se.var(u.default.instancePath,(0,a._)`""`),se.var(u.default.parentData,(0,a._)`undefined`),se.var(u.default.parentDataProperty,(0,a._)`undefined`),se.var(u.default.rootData,u.default.data),te.dynamicRef&&se.var(u.default.dynamicAnchors,(0,a._)`{}`)})}function y(se){const{schema:te,opts:Ee,gen:we}=se;h(se,()=>{Ee.$comment&&te.$comment&&O(se),D(se),we.let(u.default.vErrors,null),we.let(u.default.errors,0),Ee.unevaluated&&v(se),I(se),$(se)})}function v(se){const{gen:te,validateName:Ee}=se;se.evaluated=te.const("evaluated",(0,a._)`${Ee}.evaluated`),te.if((0,a._)`${se.evaluated}.dynamicProps`,()=>te.assign((0,a._)`${se.evaluated}.props`,(0,a._)`undefined`)),te.if((0,a._)`${se.evaluated}.dynamicItems`,()=>te.assign((0,a._)`${se.evaluated}.items`,(0,a._)`undefined`))}function w(se,te){const Ee=typeof se=="object"&&se[te.schemaId];return Ee&&(te.code.source||te.code.process)?(0,a._)`/*# sourceURL=${Ee} */`:a.nil}function x(se,te){if(E(se)&&(A(se),S(se))){T(se,te);return}(0,e.boolOrEmptySchema)(se,te)}function S({schema:se,self:te}){if(typeof se=="boolean")return!se;for(const Ee in se)if(te.RULES.all[Ee])return!0;return!1}function E(se){return typeof se.schema!="boolean"}function T(se,te){const{schema:Ee,gen:we,opts:De}=se;De.$comment&&Ee.$comment&&O(se),M(se),z(se);const Le=we.const("_errs",u.default.errors);I(se,Le),we.var(te,(0,a._)`${Le} === ${u.default.errors}`)}function A(se){(0,c.checkUnknownRules)(se),k(se)}function I(se,te){if(se.opts.jtd)return B(se,[],!1,te);const Ee=(0,t.getSchemaTypes)(se.schema),we=(0,t.coerceAndCheckDataType)(se,Ee);B(se,Ee,!we,te)}function k(se){const{schema:te,errSchemaPath:Ee,opts:we,self:De}=se;te.$ref&&we.ignoreKeywordsWithRef&&(0,c.schemaHasRulesButRef)(te,De.RULES)&&De.logger.warn(`$ref: keywords ignored in schema at path "${Ee}"`)}function D(se){const{schema:te,opts:Ee}=se;te.default!==void 0&&Ee.useDefaults&&Ee.strictSchema&&(0,c.checkStrictMode)(se,"default is ignored in the schema root")}function M(se){const te=se.schema[se.opts.schemaId];te&&(se.baseId=(0,l.resolveUrl)(se.opts.uriResolver,se.baseId,te))}function z(se){if(se.schema.$async&&!se.schemaEnv.$async)throw new Error("async schema in sync schema")}function O({gen:se,schemaEnv:te,schema:Ee,errSchemaPath:we,opts:De}){const Le=Ee.$comment;if(De.$comment===!0)se.code((0,a._)`${u.default.self}.logger.log(${Le})`);else if(typeof De.$comment=="function"){const Ne=(0,a.str)`${we}/$comment`,Te=se.scopeValue("root",{ref:te.root});se.code((0,a._)`${u.default.self}.opts.$comment(${Le}, ${Ne}, ${Te}.schema)`)}}function $(se){const{gen:te,schemaEnv:Ee,validateName:we,ValidationError:De,opts:Le}=se;Ee.$async?te.if((0,a._)`${u.default.errors} === 0`,()=>te.return(u.default.data),()=>te.throw((0,a._)`new ${De}(${u.default.vErrors})`)):(te.assign((0,a._)`${we}.errors`,u.default.vErrors),Le.unevaluated&&F(se),te.return((0,a._)`${u.default.errors} === 0`))}function F({gen:se,evaluated:te,props:Ee,items:we}){Ee instanceof a.Name&&se.assign((0,a._)`${te}.props`,Ee),we instanceof a.Name&&se.assign((0,a._)`${te}.items`,we)}function B(se,te,Ee,we){const{gen:De,schema:Le,data:Ne,allErrors:Te,opts:qe,self:Qe}=se,{RULES:Ue}=Qe;if(Le.$ref&&(qe.ignoreKeywordsWithRef||!(0,c.schemaHasRulesButRef)(Le,Ue))){De.block(()=>ue(se,"$ref",Ue.all.$ref.definition));return}qe.jtd||G(se,te),De.block(()=>{for(const Se of Ue.rules)Ve(Se);Ve(Ue.post)});function Ve(Se){(0,n.shouldUseGroup)(Le,Se)&&(Se.type?(De.if((0,r.checkDataType)(Se.type,Ne,qe.strictNumbers)),q(se,Se),te.length===1&&te[0]===Se.type&&Ee&&(De.else(),(0,r.reportTypeError)(se)),De.endIf()):q(se,Se),Te||De.if((0,a._)`${u.default.errors} === ${we||0}`))}}function q(se,te){const{gen:Ee,schema:we,opts:{useDefaults:De}}=se;De&&(0,i.assignDefaults)(se,te.type),Ee.block(()=>{for(const Le of te.rules)(0,n.shouldUseRule)(we,Le)&&ue(se,Le.keyword,Le.definition,te.type)})}function G(se,te){se.schemaEnv.meta||!se.opts.strictTypes||(K(se,te),se.opts.allowUnionTypes||L(se,te),V(se,se.dataTypes))}function K(se,te){if(te.length){if(!se.dataTypes.length){se.dataTypes=te;return}te.forEach(Ee=>{H(se.dataTypes,Ee)||Z(se,`type "${Ee}" not allowed by context "${se.dataTypes.join(",")}"`)}),Q(se,te)}}function L(se,te){te.length>1&&!(te.length===2&&te.includes("null"))&&Z(se,"use allowUnionTypes to allow union type keyword")}function V(se,te){const Ee=se.self.RULES.all;for(const we in Ee){const De=Ee[we];if(typeof De=="object"&&(0,n.shouldUseRule)(se.schema,De)){const{type:Le}=De.definition;Le.length&&!Le.some(Ne=>X(te,Ne))&&Z(se,`missing type "${Le.join(",")}" for keyword "${we}"`)}}}function X(se,te){return se.includes(te)||te==="number"&&se.includes("integer")}function H(se,te){return se.includes(te)||te==="integer"&&se.includes("number")}function Q(se,te){const Ee=[];for(const we of se.dataTypes)H(te,we)?Ee.push(we):te.includes("integer")&&we==="number"&&Ee.push("integer");se.dataTypes=Ee}function Z(se,te){const Ee=se.schemaEnv.baseId+se.errSchemaPath;te+=` at "${Ee}" (strictTypes)`,(0,c.checkStrictMode)(se,te,se.opts.strictTypes)}class ne{constructor(te,Ee,we){if((0,s.validateKeywordUsage)(te,Ee,we),this.gen=te.gen,this.allErrors=te.allErrors,this.keyword=we,this.data=te.data,this.schema=te.schema[we],this.$data=Ee.$data&&te.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,c.schemaRefOrVal)(te,this.schema,we,this.$data),this.schemaType=Ee.schemaType,this.parentSchema=te.schema,this.params={},this.it=te,this.def=Ee,this.$data)this.schemaCode=te.gen.const("vSchema",ge(this.$data,te));else if(this.schemaCode=this.schemaValue,!(0,s.validSchemaType)(this.schema,Ee.schemaType,Ee.allowUndefined))throw new Error(`${we} value must be ${JSON.stringify(Ee.schemaType)}`);("code"in Ee?Ee.trackErrors:Ee.errors!==!1)&&(this.errsCount=te.gen.const("_errs",u.default.errors))}result(te,Ee,we){this.failResult((0,a.not)(te),Ee,we)}failResult(te,Ee,we){this.gen.if(te),we?we():this.error(),Ee?(this.gen.else(),Ee(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(te,Ee){this.failResult((0,a.not)(te),void 0,Ee)}fail(te){if(te===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(te),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(te){if(!this.$data)return this.fail(te);const{schemaCode:Ee}=this;this.fail((0,a._)`${Ee} !== undefined && (${(0,a.or)(this.invalid$data(),te)})`)}error(te,Ee,we){if(Ee){this.setParams(Ee),this._error(te,we),this.setParams({});return}this._error(te,we)}_error(te,Ee){(te?d.reportExtraError:d.reportError)(this,this.def.error,Ee)}$dataError(){(0,d.reportError)(this,this.def.$dataError||d.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,d.resetErrorsCount)(this.gen,this.errsCount)}ok(te){this.allErrors||this.gen.if(te)}setParams(te,Ee){Ee?Object.assign(this.params,te):this.params=te}block$data(te,Ee,we=a.nil){this.gen.block(()=>{this.check$data(te,we),Ee()})}check$data(te=a.nil,Ee=a.nil){if(!this.$data)return;const{gen:we,schemaCode:De,schemaType:Le,def:Ne}=this;we.if((0,a.or)((0,a._)`${De} === undefined`,Ee)),te!==a.nil&&we.assign(te,!0),(Le.length||Ne.validateSchema)&&(we.elseIf(this.invalid$data()),this.$dataError(),te!==a.nil&&we.assign(te,!1)),we.else()}invalid$data(){const{gen:te,schemaCode:Ee,schemaType:we,def:De,it:Le}=this;return(0,a.or)(Ne(),Te());function Ne(){if(we.length){if(!(Ee instanceof a.Name))throw new Error("ajv implementation error");const qe=Array.isArray(we)?we:[we];return(0,a._)`${(0,r.checkDataTypes)(qe,Ee,Le.opts.strictNumbers,r.DataType.Wrong)}`}return a.nil}function Te(){if(De.validateSchema){const qe=te.scopeValue("validate$data",{ref:De.validateSchema});return(0,a._)`!${qe}(${Ee})`}return a.nil}}subschema(te,Ee){const we=(0,o.getSubschema)(this.it,te);(0,o.extendSubschemaData)(we,this.it,te),(0,o.extendSubschemaMode)(we,te);const De={...this.it,...we,items:void 0,props:void 0};return x(De,Ee),De}mergeEvaluated(te,Ee){const{it:we,gen:De}=this;we.opts.unevaluated&&(we.props!==!0&&te.props!==void 0&&(we.props=c.mergeEvaluated.props(De,te.props,we.props,Ee)),we.items!==!0&&te.items!==void 0&&(we.items=c.mergeEvaluated.items(De,te.items,we.items,Ee)))}mergeValidEvaluated(te,Ee){const{it:we,gen:De}=this;if(we.opts.unevaluated&&(we.props!==!0||we.items!==!0))return De.if(Ee,()=>this.mergeEvaluated(te,a.Name)),!0}}dm.KeywordCxt=ne;function ue(se,te,Ee,we){const De=new ne(se,Ee,te);"code"in Ee?Ee.code(De,we):De.$data&&Ee.validate?(0,s.funcKeywordCode)(De,Ee):"macro"in Ee?(0,s.macroKeywordCode)(De,Ee):(Ee.compile||Ee.validate)&&(0,s.funcKeywordCode)(De,Ee)}const le=/^\/(?:[^~]|~0|~1)*$/,ce=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function ge(se,{dataLevel:te,dataNames:Ee,dataPathArr:we}){let De,Le;if(se==="")return u.default.rootData;if(se[0]==="/"){if(!le.test(se))throw new Error(`Invalid JSON-pointer: ${se}`);De=se,Le=u.default.rootData}else{const Qe=ce.exec(se);if(!Qe)throw new Error(`Invalid JSON-pointer: ${se}`);const Ue=+Qe[1];if(De=Qe[2],De==="#"){if(Ue>=te)throw new Error(qe("property/index",Ue));return we[te-Ue]}if(Ue>te)throw new Error(qe("data",Ue));if(Le=Ee[te-Ue],!De)return Le}let Ne=Le;const Te=De.split("/");for(const Qe of Te)Qe&&(Le=(0,a._)`${Le}${(0,a.getProperty)((0,c.unescapeJsonPointer)(Qe))}`,Ne=(0,a._)`${Ne} && ${Le}`);return Ne;function qe(Qe,Ue){return`Cannot access ${Qe} ${Ue} levels up, current level is ${te}`}}return dm.getData=ge,dm}var ZP={},Mle;function _K(){if(Mle)return ZP;Mle=1,Object.defineProperty(ZP,"__esModule",{value:!0});class e extends Error{constructor(n){super("validation failed"),this.errors=n,this.ajv=this.validation=!0}}return ZP.default=e,ZP}var eN={},$le;function DF(){if($le)return eN;$le=1,Object.defineProperty(eN,"__esModule",{value:!0});const e=NF();class t extends Error{constructor(r,i,s,o){super(o||`can't resolve reference ${s} from id ${i}`),this.missingRef=(0,e.resolveUrl)(r,i,s),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(r,this.missingRef))}}return eN.default=t,eN}var Kl={},Lle;function wK(){if(Lle)return Kl;Lle=1,Object.defineProperty(Kl,"__esModule",{value:!0}),Kl.resolveSchema=Kl.getCompilingSchema=Kl.resolveRef=Kl.compileSchema=Kl.SchemaEnv=void 0;const e=wr(),t=_K(),n=dv(),r=NF(),i=ti(),s=OF();class o{constructor(v){var w;this.refs={},this.dynamicAnchors={};let x;typeof v.schema=="object"&&(x=v.schema),this.schema=v.schema,this.schemaId=v.schemaId,this.root=v.root||this,this.baseId=(w=v.baseId)!==null&&w!==void 0?w:(0,r.normalizeId)(x==null?void 0:x[v.schemaId||"$id"]),this.schemaPath=v.schemaPath,this.localRefs=v.localRefs,this.meta=v.meta,this.$async=x==null?void 0:x.$async,this.refs={}}}Kl.SchemaEnv=o;function a(y){const v=c.call(this,y);if(v)return v;const w=(0,r.getFullPath)(this.opts.uriResolver,y.root.baseId),{es5:x,lines:S}=this.opts.code,{ownProperties:E}=this.opts,T=new e.CodeGen(this.scope,{es5:x,lines:S,ownProperties:E});let A;y.$async&&(A=T.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const I=T.scopeName("validate");y.validateName=I;const k={gen:T,allErrors:this.opts.allErrors,data:n.default.data,parentData:n.default.parentData,parentDataProperty:n.default.parentDataProperty,dataNames:[n.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:T.scopeValue("schema",this.opts.code.source===!0?{ref:y.schema,code:(0,e.stringify)(y.schema)}:{ref:y.schema}),validateName:I,ValidationError:A,schema:y.schema,schemaEnv:y,rootId:w,baseId:y.baseId||w,schemaPath:e.nil,errSchemaPath:y.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let D;try{this._compilations.add(y),(0,s.validateFunctionCode)(k),T.optimize(this.opts.code.optimize);const M=T.toString();D=`${T.scopeRefs(n.default.scope)}return ${M}`,this.opts.code.process&&(D=this.opts.code.process(D,y));const O=new Function(`${n.default.self}`,`${n.default.scope}`,D)(this,this.scope.get());if(this.scope.value(I,{ref:O}),O.errors=null,O.schema=y.schema,O.schemaEnv=y,y.$async&&(O.$async=!0),this.opts.code.source===!0&&(O.source={validateName:I,validateCode:M,scopeValues:T._values}),this.opts.unevaluated){const{props:$,items:F}=k;O.evaluated={props:$ instanceof e.Name?void 0:$,items:F instanceof e.Name?void 0:F,dynamicProps:$ instanceof e.Name,dynamicItems:F instanceof e.Name},O.source&&(O.source.evaluated=(0,e.stringify)(O.evaluated))}return y.validate=O,y}catch(M){throw delete y.validate,delete y.validateName,D&&this.logger.error("Error compiling schema, function code:",D),M}finally{this._compilations.delete(y)}}Kl.compileSchema=a;function u(y,v,w){var x;w=(0,r.resolveUrl)(this.opts.uriResolver,v,w);const S=y.refs[w];if(S)return S;let E=f.call(this,y,w);if(E===void 0){const T=(x=y.localRefs)===null||x===void 0?void 0:x[w],{schemaId:A}=this.opts;T&&(E=new o({schema:T,schemaId:A,root:y,baseId:v}))}if(E!==void 0)return y.refs[w]=l.call(this,E)}Kl.resolveRef=u;function l(y){return(0,r.inlineRef)(y.schema,this.opts.inlineRefs)?y.schema:y.validate?y:a.call(this,y)}function c(y){for(const v of this._compilations)if(d(v,y))return v}Kl.getCompilingSchema=c;function d(y,v){return y.schema===v.schema&&y.root===v.root&&y.baseId===v.baseId}function f(y,v){let w;for(;typeof(w=this.refs[v])=="string";)v=w;return w||this.schemas[v]||h.call(this,y,v)}function h(y,v){const w=this.opts.uriResolver.parse(v),x=(0,r._getFullPath)(this.opts.uriResolver,w);let S=(0,r.getFullPath)(this.opts.uriResolver,y.baseId,void 0);if(Object.keys(y.schema).length>0&&x===S)return m.call(this,w,y);const E=(0,r.normalizeId)(x),T=this.refs[E]||this.schemas[E];if(typeof T=="string"){const A=h.call(this,y,T);return typeof(A==null?void 0:A.schema)!="object"?void 0:m.call(this,w,A)}if(typeof(T==null?void 0:T.schema)=="object"){if(T.validate||a.call(this,T),E===(0,r.normalizeId)(v)){const{schema:A}=T,{schemaId:I}=this.opts,k=A[I];return k&&(S=(0,r.resolveUrl)(this.opts.uriResolver,S,k)),new o({schema:A,schemaId:I,root:y,baseId:S})}return m.call(this,w,T)}}Kl.resolveSchema=h;const p=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function m(y,{baseId:v,schema:w,root:x}){var S;if(((S=y.fragment)===null||S===void 0?void 0:S[0])!=="/")return;for(const A of y.fragment.slice(1).split("/")){if(typeof w=="boolean")return;const I=w[(0,i.unescapeFragment)(A)];if(I===void 0)return;w=I;const k=typeof w=="object"&&w[this.opts.schemaId];!p.has(A)&&k&&(v=(0,r.resolveUrl)(this.opts.uriResolver,v,k))}let E;if(typeof w!="boolean"&&w.$ref&&!(0,i.schemaHasRulesButRef)(w,this.RULES)){const A=(0,r.resolveUrl)(this.opts.uriResolver,v,w.$ref);E=h.call(this,x,A)}const{schemaId:T}=this.opts;if(E=E||new o({schema:w,schemaId:T,root:x,baseId:v}),E.schema!==E.root.schema)return E}return Kl}const Rat="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",kat="Meta-schema for $data reference (JSON AnySchema extension proposal)",Pat="object",Nat=["$data"],Oat={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Dat=!1,Mat={$id:Rat,description:kat,type:Pat,required:Nat,properties:Oat,additionalProperties:Dat};var tN={},LC={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */var $at=LC.exports,Fle;function Lat(){return Fle||(Fle=1,function(e,t){(function(n,r){r(t)})($at,function(n){function r(){for(var ve=arguments.length,he=Array(ve),xe=0;xe<ve;xe++)he[xe]=arguments[xe];if(he.length>1){he[0]=he[0].slice(0,-1);for(var We=he.length-1,Ye=1;Ye<We;++Ye)he[Ye]=he[Ye].slice(1,-1);return he[We]=he[We].slice(1),he.join("")}else return he[0]}function i(ve){return"(?:"+ve+")"}function s(ve){return ve===void 0?"undefined":ve===null?"null":Object.prototype.toString.call(ve).split(" ").pop().split("]").shift().toLowerCase()}function o(ve){return ve.toUpperCase()}function a(ve){return ve!=null?ve instanceof Array?ve:typeof ve.length!="number"||ve.split||ve.setInterval||ve.call?[ve]:Array.prototype.slice.call(ve):[]}function u(ve,he){var xe=ve;if(he)for(var We in he)xe[We]=he[We];return xe}function l(ve){var he="[A-Za-z]",xe="[0-9]",We=r(xe,"[A-Fa-f]"),Ye=i(i("%[EFef]"+We+"%"+We+We+"%"+We+We)+"|"+i("%[89A-Fa-f]"+We+"%"+We+We)+"|"+i("%"+We+We)),St="[\\:\\/\\?\\#\\[\\]\\@]",Ht="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",sn=r(St,Ht),ar=ve?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",dr=ve?"[\\uE000-\\uF8FF]":"[]",Gn=r(he,xe,"[\\-\\.\\_\\~]",ar);i(he+r(he,xe,"[\\+\\-\\.]")+"*"),i(i(Ye+"|"+r(Gn,Ht,"[\\:]"))+"*");var Er=i(i("25[0-5]")+"|"+i("2[0-4]"+xe)+"|"+i("1"+xe+xe)+"|"+i("0?[1-9]"+xe)+"|0?0?"+xe),Yr=i(Er+"\\."+Er+"\\."+Er+"\\."+Er),dn=i(We+"{1,4}"),Sr=i(i(dn+"\\:"+dn)+"|"+Yr),bi=i(i(dn+"\\:")+"{6}"+Sr),Tr=i("\\:\\:"+i(dn+"\\:")+"{5}"+Sr),Yn=i(i(dn)+"?\\:\\:"+i(dn+"\\:")+"{4}"+Sr),Ys=i(i(i(dn+"\\:")+"{0,1}"+dn)+"?\\:\\:"+i(dn+"\\:")+"{3}"+Sr),di=i(i(i(dn+"\\:")+"{0,2}"+dn)+"?\\:\\:"+i(dn+"\\:")+"{2}"+Sr),Ks=i(i(i(dn+"\\:")+"{0,3}"+dn)+"?\\:\\:"+dn+"\\:"+Sr),Oi=i(i(i(dn+"\\:")+"{0,4}"+dn)+"?\\:\\:"+Sr),ts=i(i(i(dn+"\\:")+"{0,5}"+dn)+"?\\:\\:"+dn),co=i(i(i(dn+"\\:")+"{0,6}"+dn)+"?\\:\\:"),Xs=i([bi,Tr,Yn,Ys,di,Ks,Oi,ts,co].join("|")),_i=i(i(Gn+"|"+Ye)+"+");i("[vV]"+We+"+\\."+r(Gn,Ht,"[\\:]")+"+"),i(i(Ye+"|"+r(Gn,Ht))+"*");var Wu=i(Ye+"|"+r(Gn,Ht,"[\\:\\@]"));return i(i(Ye+"|"+r(Gn,Ht,"[\\@]"))+"+"),i(i(Wu+"|"+r("[\\/\\?]",dr))+"*"),{NOT_SCHEME:new RegExp(r("[^]",he,xe,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",Gn,Ht),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",Gn,Ht),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",Gn,Ht),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",Gn,Ht),"g"),NOT_QUERY:new RegExp(r("[^\\%]",Gn,Ht,"[\\:\\@\\/\\?]",dr),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",Gn,Ht,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",Gn,Ht),"g"),UNRESERVED:new RegExp(Gn,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",Gn,sn),"g"),PCT_ENCODED:new RegExp(Ye,"g"),IPV4ADDRESS:new RegExp("^("+Yr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Xs+")"+i(i("\\%25|\\%(?!"+We+"{2})")+"("+_i+")")+"?\\]?$")}}var c=l(!1),d=l(!0),f=function(){function ve(he,xe){var We=[],Ye=!0,St=!1,Ht=void 0;try{for(var sn=he[Symbol.iterator](),ar;!(Ye=(ar=sn.next()).done)&&(We.push(ar.value),!(xe&&We.length===xe));Ye=!0);}catch(dr){St=!0,Ht=dr}finally{try{!Ye&&sn.return&&sn.return()}finally{if(St)throw Ht}}return We}return function(he,xe){if(Array.isArray(he))return he;if(Symbol.iterator in Object(he))return ve(he,xe);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(ve){if(Array.isArray(ve)){for(var he=0,xe=Array(ve.length);he<ve.length;he++)xe[he]=ve[he];return xe}else return Array.from(ve)},p=2147483647,m=36,y=1,v=26,w=38,x=700,S=72,E=128,T="-",A=/^xn--/,I=/[^\0-\x7E]/,k=/[\x2E\u3002\uFF0E\uFF61]/g,D={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},M=m-y,z=Math.floor,O=String.fromCharCode;function $(ve){throw new RangeError(D[ve])}function F(ve,he){for(var xe=[],We=ve.length;We--;)xe[We]=he(ve[We]);return xe}function B(ve,he){var xe=ve.split("@"),We="";xe.length>1&&(We=xe[0]+"@",ve=xe[1]),ve=ve.replace(k,".");var Ye=ve.split("."),St=F(Ye,he).join(".");return We+St}function q(ve){for(var he=[],xe=0,We=ve.length;xe<We;){var Ye=ve.charCodeAt(xe++);if(Ye>=55296&&Ye<=56319&&xe<We){var St=ve.charCodeAt(xe++);(St&64512)==56320?he.push(((Ye&1023)<<10)+(St&1023)+65536):(he.push(Ye),xe--)}else he.push(Ye)}return he}var G=function(he){return String.fromCodePoint.apply(String,h(he))},K=function(he){return he-48<10?he-22:he-65<26?he-65:he-97<26?he-97:m},L=function(he,xe){return he+22+75*(he<26)-((xe!=0)<<5)},V=function(he,xe,We){var Ye=0;for(he=We?z(he/x):he>>1,he+=z(he/xe);he>M*v>>1;Ye+=m)he=z(he/M);return z(Ye+(M+1)*he/(he+w))},X=function(he){var xe=[],We=he.length,Ye=0,St=E,Ht=S,sn=he.lastIndexOf(T);sn<0&&(sn=0);for(var ar=0;ar<sn;++ar)he.charCodeAt(ar)>=128&&$("not-basic"),xe.push(he.charCodeAt(ar));for(var dr=sn>0?sn+1:0;dr<We;){for(var Gn=Ye,Er=1,Yr=m;;Yr+=m){dr>=We&&$("invalid-input");var dn=K(he.charCodeAt(dr++));(dn>=m||dn>z((p-Ye)/Er))&&$("overflow"),Ye+=dn*Er;var Sr=Yr<=Ht?y:Yr>=Ht+v?v:Yr-Ht;if(dn<Sr)break;var bi=m-Sr;Er>z(p/bi)&&$("overflow"),Er*=bi}var Tr=xe.length+1;Ht=V(Ye-Gn,Tr,Gn==0),z(Ye/Tr)>p-St&&$("overflow"),St+=z(Ye/Tr),Ye%=Tr,xe.splice(Ye++,0,St)}return String.fromCodePoint.apply(String,xe)},H=function(he){var xe=[];he=q(he);var We=he.length,Ye=E,St=0,Ht=S,sn=!0,ar=!1,dr=void 0;try{for(var Gn=he[Symbol.iterator](),Er;!(sn=(Er=Gn.next()).done);sn=!0){var Yr=Er.value;Yr<128&&xe.push(O(Yr))}}catch(nt){ar=!0,dr=nt}finally{try{!sn&&Gn.return&&Gn.return()}finally{if(ar)throw dr}}var dn=xe.length,Sr=dn;for(dn&&xe.push(T);Sr<We;){var bi=p,Tr=!0,Yn=!1,Ys=void 0;try{for(var di=he[Symbol.iterator](),Ks;!(Tr=(Ks=di.next()).done);Tr=!0){var Oi=Ks.value;Oi>=Ye&&Oi<bi&&(bi=Oi)}}catch(nt){Yn=!0,Ys=nt}finally{try{!Tr&&di.return&&di.return()}finally{if(Yn)throw Ys}}var ts=Sr+1;bi-Ye>z((p-St)/ts)&&$("overflow"),St+=(bi-Ye)*ts,Ye=bi;var co=!0,Xs=!1,_i=void 0;try{for(var Wu=he[Symbol.iterator](),_s;!(co=(_s=Wu.next()).done);co=!0){var re=_s.value;if(re<Ye&&++St>p&&$("overflow"),re==Ye){for(var _e=St,de=m;;de+=m){var Pe=de<=Ht?y:de>=Ht+v?v:de-Ht;if(_e<Pe)break;var Me=_e-Pe,Ie=m-Pe;xe.push(O(L(Pe+Me%Ie,0))),_e=z(Me/Ie)}xe.push(O(L(_e,0))),Ht=V(St,ts,Sr==dn),St=0,++Sr}}}catch(nt){Xs=!0,_i=nt}finally{try{!co&&Wu.return&&Wu.return()}finally{if(Xs)throw _i}}++St,++Ye}return xe.join("")},Q=function(he){return B(he,function(xe){return A.test(xe)?X(xe.slice(4).toLowerCase()):xe})},Z=function(he){return B(he,function(xe){return I.test(xe)?"xn--"+H(xe):xe})},ne={version:"2.1.0",ucs2:{decode:q,encode:G},decode:X,encode:H,toASCII:Z,toUnicode:Q},ue={};function le(ve){var he=ve.charCodeAt(0),xe=void 0;return he<16?xe="%0"+he.toString(16).toUpperCase():he<128?xe="%"+he.toString(16).toUpperCase():he<2048?xe="%"+(he>>6|192).toString(16).toUpperCase()+"%"+(he&63|128).toString(16).toUpperCase():xe="%"+(he>>12|224).toString(16).toUpperCase()+"%"+(he>>6&63|128).toString(16).toUpperCase()+"%"+(he&63|128).toString(16).toUpperCase(),xe}function ce(ve){for(var he="",xe=0,We=ve.length;xe<We;){var Ye=parseInt(ve.substr(xe+1,2),16);if(Ye<128)he+=String.fromCharCode(Ye),xe+=3;else if(Ye>=194&&Ye<224){if(We-xe>=6){var St=parseInt(ve.substr(xe+4,2),16);he+=String.fromCharCode((Ye&31)<<6|St&63)}else he+=ve.substr(xe,6);xe+=6}else if(Ye>=224){if(We-xe>=9){var Ht=parseInt(ve.substr(xe+4,2),16),sn=parseInt(ve.substr(xe+7,2),16);he+=String.fromCharCode((Ye&15)<<12|(Ht&63)<<6|sn&63)}else he+=ve.substr(xe,9);xe+=9}else he+=ve.substr(xe,3),xe+=3}return he}function ge(ve,he){function xe(We){var Ye=ce(We);return Ye.match(he.UNRESERVED)?Ye:We}return ve.scheme&&(ve.scheme=String(ve.scheme).replace(he.PCT_ENCODED,xe).toLowerCase().replace(he.NOT_SCHEME,"")),ve.userinfo!==void 0&&(ve.userinfo=String(ve.userinfo).replace(he.PCT_ENCODED,xe).replace(he.NOT_USERINFO,le).replace(he.PCT_ENCODED,o)),ve.host!==void 0&&(ve.host=String(ve.host).replace(he.PCT_ENCODED,xe).toLowerCase().replace(he.NOT_HOST,le).replace(he.PCT_ENCODED,o)),ve.path!==void 0&&(ve.path=String(ve.path).replace(he.PCT_ENCODED,xe).replace(ve.scheme?he.NOT_PATH:he.NOT_PATH_NOSCHEME,le).replace(he.PCT_ENCODED,o)),ve.query!==void 0&&(ve.query=String(ve.query).replace(he.PCT_ENCODED,xe).replace(he.NOT_QUERY,le).replace(he.PCT_ENCODED,o)),ve.fragment!==void 0&&(ve.fragment=String(ve.fragment).replace(he.PCT_ENCODED,xe).replace(he.NOT_FRAGMENT,le).replace(he.PCT_ENCODED,o)),ve}function se(ve){return ve.replace(/^0*(.*)/,"$1")||"0"}function te(ve,he){var xe=ve.match(he.IPV4ADDRESS)||[],We=f(xe,2),Ye=We[1];return Ye?Ye.split(".").map(se).join("."):ve}function Ee(ve,he){var xe=ve.match(he.IPV6ADDRESS)||[],We=f(xe,3),Ye=We[1],St=We[2];if(Ye){for(var Ht=Ye.toLowerCase().split("::").reverse(),sn=f(Ht,2),ar=sn[0],dr=sn[1],Gn=dr?dr.split(":").map(se):[],Er=ar.split(":").map(se),Yr=he.IPV4ADDRESS.test(Er[Er.length-1]),dn=Yr?7:8,Sr=Er.length-dn,bi=Array(dn),Tr=0;Tr<dn;++Tr)bi[Tr]=Gn[Tr]||Er[Sr+Tr]||"";Yr&&(bi[dn-1]=te(bi[dn-1],he));var Yn=bi.reduce(function(ts,co,Xs){if(!co||co==="0"){var _i=ts[ts.length-1];_i&&_i.index+_i.length===Xs?_i.length++:ts.push({index:Xs,length:1})}return ts},[]),Ys=Yn.sort(function(ts,co){return co.length-ts.length})[0],di=void 0;if(Ys&&Ys.length>1){var Ks=bi.slice(0,Ys.index),Oi=bi.slice(Ys.index+Ys.length);di=Ks.join(":")+"::"+Oi.join(":")}else di=bi.join(":");return St&&(di+="%"+St),di}else return ve}var we=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,De="".match(/(){0}/)[1]===void 0;function Le(ve){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},xe={},We=he.iri!==!1?d:c;he.reference==="suffix"&&(ve=(he.scheme?he.scheme+":":"")+"//"+ve);var Ye=ve.match(we);if(Ye){De?(xe.scheme=Ye[1],xe.userinfo=Ye[3],xe.host=Ye[4],xe.port=parseInt(Ye[5],10),xe.path=Ye[6]||"",xe.query=Ye[7],xe.fragment=Ye[8],isNaN(xe.port)&&(xe.port=Ye[5])):(xe.scheme=Ye[1]||void 0,xe.userinfo=ve.indexOf("@")!==-1?Ye[3]:void 0,xe.host=ve.indexOf("//")!==-1?Ye[4]:void 0,xe.port=parseInt(Ye[5],10),xe.path=Ye[6]||"",xe.query=ve.indexOf("?")!==-1?Ye[7]:void 0,xe.fragment=ve.indexOf("#")!==-1?Ye[8]:void 0,isNaN(xe.port)&&(xe.port=ve.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Ye[4]:void 0)),xe.host&&(xe.host=Ee(te(xe.host,We),We)),xe.scheme===void 0&&xe.userinfo===void 0&&xe.host===void 0&&xe.port===void 0&&!xe.path&&xe.query===void 0?xe.reference="same-document":xe.scheme===void 0?xe.reference="relative":xe.fragment===void 0?xe.reference="absolute":xe.reference="uri",he.reference&&he.reference!=="suffix"&&he.reference!==xe.reference&&(xe.error=xe.error||"URI is not a "+he.reference+" reference.");var St=ue[(he.scheme||xe.scheme||"").toLowerCase()];if(!he.unicodeSupport&&(!St||!St.unicodeSupport)){if(xe.host&&(he.domainHost||St&&St.domainHost))try{xe.host=ne.toASCII(xe.host.replace(We.PCT_ENCODED,ce).toLowerCase())}catch(Ht){xe.error=xe.error||"Host's domain name can not be converted to ASCII via punycode: "+Ht}ge(xe,c)}else ge(xe,We);St&&St.parse&&St.parse(xe,he)}else xe.error=xe.error||"URI can not be parsed.";return xe}function Ne(ve,he){var xe=he.iri!==!1?d:c,We=[];return ve.userinfo!==void 0&&(We.push(ve.userinfo),We.push("@")),ve.host!==void 0&&We.push(Ee(te(String(ve.host),xe),xe).replace(xe.IPV6ADDRESS,function(Ye,St,Ht){return"["+St+(Ht?"%25"+Ht:"")+"]"})),(typeof ve.port=="number"||typeof ve.port=="string")&&(We.push(":"),We.push(String(ve.port))),We.length?We.join(""):void 0}var Te=/^\.\.?\//,qe=/^\/\.(\/|$)/,Qe=/^\/\.\.(\/|$)/,Ue=/^\/?(?:.|\n)*?(?=\/|$)/;function Ve(ve){for(var he=[];ve.length;)if(ve.match(Te))ve=ve.replace(Te,"");else if(ve.match(qe))ve=ve.replace(qe,"/");else if(ve.match(Qe))ve=ve.replace(Qe,"/"),he.pop();else if(ve==="."||ve==="..")ve="";else{var xe=ve.match(Ue);if(xe){var We=xe[0];ve=ve.slice(We.length),he.push(We)}else throw new Error("Unexpected dot segment condition")}return he.join("")}function Se(ve){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},xe=he.iri?d:c,We=[],Ye=ue[(he.scheme||ve.scheme||"").toLowerCase()];if(Ye&&Ye.serialize&&Ye.serialize(ve,he),ve.host&&!xe.IPV6ADDRESS.test(ve.host)){if(he.domainHost||Ye&&Ye.domainHost)try{ve.host=he.iri?ne.toUnicode(ve.host):ne.toASCII(ve.host.replace(xe.PCT_ENCODED,ce).toLowerCase())}catch(sn){ve.error=ve.error||"Host's domain name can not be converted to "+(he.iri?"Unicode":"ASCII")+" via punycode: "+sn}}ge(ve,xe),he.reference!=="suffix"&&ve.scheme&&(We.push(ve.scheme),We.push(":"));var St=Ne(ve,he);if(St!==void 0&&(he.reference!=="suffix"&&We.push("//"),We.push(St),ve.path&&ve.path.charAt(0)!=="/"&&We.push("/")),ve.path!==void 0){var Ht=ve.path;!he.absolutePath&&(!Ye||!Ye.absolutePath)&&(Ht=Ve(Ht)),St===void 0&&(Ht=Ht.replace(/^\/\//,"/%2F")),We.push(Ht)}return ve.query!==void 0&&(We.push("?"),We.push(ve.query)),ve.fragment!==void 0&&(We.push("#"),We.push(ve.fragment)),We.join("")}function it(ve,he){var xe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},We=arguments[3],Ye={};return We||(ve=Le(Se(ve,xe),xe),he=Le(Se(he,xe),xe)),xe=xe||{},!xe.tolerant&&he.scheme?(Ye.scheme=he.scheme,Ye.userinfo=he.userinfo,Ye.host=he.host,Ye.port=he.port,Ye.path=Ve(he.path||""),Ye.query=he.query):(he.userinfo!==void 0||he.host!==void 0||he.port!==void 0?(Ye.userinfo=he.userinfo,Ye.host=he.host,Ye.port=he.port,Ye.path=Ve(he.path||""),Ye.query=he.query):(he.path?(he.path.charAt(0)==="/"?Ye.path=Ve(he.path):((ve.userinfo!==void 0||ve.host!==void 0||ve.port!==void 0)&&!ve.path?Ye.path="/"+he.path:ve.path?Ye.path=ve.path.slice(0,ve.path.lastIndexOf("/")+1)+he.path:Ye.path=he.path,Ye.path=Ve(Ye.path)),Ye.query=he.query):(Ye.path=ve.path,he.query!==void 0?Ye.query=he.query:Ye.query=ve.query),Ye.userinfo=ve.userinfo,Ye.host=ve.host,Ye.port=ve.port),Ye.scheme=ve.scheme),Ye.fragment=he.fragment,Ye}function It(ve,he,xe){var We=u({scheme:"null"},xe);return Se(it(Le(ve,We),Le(he,We),We,!0),We)}function Re(ve,he){return typeof ve=="string"?ve=Se(Le(ve,he),he):s(ve)==="object"&&(ve=Le(Se(ve,he),he)),ve}function Ge(ve,he,xe){return typeof ve=="string"?ve=Se(Le(ve,xe),xe):s(ve)==="object"&&(ve=Se(ve,xe)),typeof he=="string"?he=Se(Le(he,xe),xe):s(he)==="object"&&(he=Se(he,xe)),ve===he}function ot(ve,he){return ve&&ve.toString().replace(!he||!he.iri?c.ESCAPE:d.ESCAPE,le)}function ct(ve,he){return ve&&ve.toString().replace(!he||!he.iri?c.PCT_ENCODED:d.PCT_ENCODED,ce)}var Mt={scheme:"http",domainHost:!0,parse:function(he,xe){return he.host||(he.error=he.error||"HTTP URIs must have a host."),he},serialize:function(he,xe){var We=String(he.scheme).toLowerCase()==="https";return(he.port===(We?443:80)||he.port==="")&&(he.port=void 0),he.path||(he.path="/"),he}},Nn={scheme:"https",domainHost:Mt.domainHost,parse:Mt.parse,serialize:Mt.serialize};function Rr(ve){return typeof ve.secure=="boolean"?ve.secure:String(ve.scheme).toLowerCase()==="wss"}var xr={scheme:"ws",domainHost:!0,parse:function(he,xe){var We=he;return We.secure=Rr(We),We.resourceName=(We.path||"/")+(We.query?"?"+We.query:""),We.path=void 0,We.query=void 0,We},serialize:function(he,xe){if((he.port===(Rr(he)?443:80)||he.port==="")&&(he.port=void 0),typeof he.secure=="boolean"&&(he.scheme=he.secure?"wss":"ws",he.secure=void 0),he.resourceName){var We=he.resourceName.split("?"),Ye=f(We,2),St=Ye[0],Ht=Ye[1];he.path=St&&St!=="/"?St:void 0,he.query=Ht,he.resourceName=void 0}return he.fragment=void 0,he}},Mr={scheme:"wss",domainHost:xr.domainHost,parse:xr.parse,serialize:xr.serialize},fn={},qn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",lr="[0-9A-Fa-f]",cr=i(i("%[EFef]"+lr+"%"+lr+lr+"%"+lr+lr)+"|"+i("%[89A-Fa-f]"+lr+"%"+lr+lr)+"|"+i("%"+lr+lr)),bs="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Ai="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",ci=r(Ai,'[\\"\\\\]'),Wn="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",or=new RegExp(qn,"g"),Wi=new RegExp(cr,"g"),qu=new RegExp(r("[^]",bs,"[\\.]",'[\\"]',ci),"g"),$o=new RegExp(r("[^]",qn,Wn),"g"),lu=$o;function Rt(ve){var he=ce(ve);return he.match(or)?he:ve}var yi={scheme:"mailto",parse:function(he,xe){var We=he,Ye=We.to=We.path?We.path.split(","):[];if(We.path=void 0,We.query){for(var St=!1,Ht={},sn=We.query.split("&"),ar=0,dr=sn.length;ar<dr;++ar){var Gn=sn[ar].split("=");switch(Gn[0]){case"to":for(var Er=Gn[1].split(","),Yr=0,dn=Er.length;Yr<dn;++Yr)Ye.push(Er[Yr]);break;case"subject":We.subject=ct(Gn[1],xe);break;case"body":We.body=ct(Gn[1],xe);break;default:St=!0,Ht[ct(Gn[0],xe)]=ct(Gn[1],xe);break}}St&&(We.headers=Ht)}We.query=void 0;for(var Sr=0,bi=Ye.length;Sr<bi;++Sr){var Tr=Ye[Sr].split("@");if(Tr[0]=ct(Tr[0]),xe.unicodeSupport)Tr[1]=ct(Tr[1],xe).toLowerCase();else try{Tr[1]=ne.toASCII(ct(Tr[1],xe).toLowerCase())}catch(Yn){We.error=We.error||"Email address's domain name can not be converted to ASCII via punycode: "+Yn}Ye[Sr]=Tr.join("@")}return We},serialize:function(he,xe){var We=he,Ye=a(he.to);if(Ye){for(var St=0,Ht=Ye.length;St<Ht;++St){var sn=String(Ye[St]),ar=sn.lastIndexOf("@"),dr=sn.slice(0,ar).replace(Wi,Rt).replace(Wi,o).replace(qu,le),Gn=sn.slice(ar+1);try{Gn=xe.iri?ne.toUnicode(Gn):ne.toASCII(ct(Gn,xe).toLowerCase())}catch(Sr){We.error=We.error||"Email address's domain name can not be converted to "+(xe.iri?"Unicode":"ASCII")+" via punycode: "+Sr}Ye[St]=dr+"@"+Gn}We.path=Ye.join(",")}var Er=he.headers=he.headers||{};he.subject&&(Er.subject=he.subject),he.body&&(Er.body=he.body);var Yr=[];for(var dn in Er)Er[dn]!==fn[dn]&&Yr.push(dn.replace(Wi,Rt).replace(Wi,o).replace($o,le)+"="+Er[dn].replace(Wi,Rt).replace(Wi,o).replace(lu,le));return Yr.length&&(We.query=Yr.join("&")),We}},xn=/^([^\:]+)\:(.*)/,$r={scheme:"urn",parse:function(he,xe){var We=he.path&&he.path.match(xn),Ye=he;if(We){var St=xe.scheme||Ye.scheme||"urn",Ht=We[1].toLowerCase(),sn=We[2],ar=St+":"+(xe.nid||Ht),dr=ue[ar];Ye.nid=Ht,Ye.nss=sn,Ye.path=void 0,dr&&(Ye=dr.parse(Ye,xe))}else Ye.error=Ye.error||"URN can not be parsed.";return Ye},serialize:function(he,xe){var We=xe.scheme||he.scheme||"urn",Ye=he.nid,St=We+":"+(xe.nid||Ye),Ht=ue[St];Ht&&(he=Ht.serialize(he,xe));var sn=he,ar=he.nss;return sn.path=(Ye||xe.nid)+":"+ar,sn}},Vr=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,vi={scheme:"urn:uuid",parse:function(he,xe){var We=he;return We.uuid=We.nss,We.nss=void 0,!xe.tolerant&&(!We.uuid||!We.uuid.match(Vr))&&(We.error=We.error||"UUID is not valid."),We},serialize:function(he,xe){var We=he;return We.nss=(he.uuid||"").toLowerCase(),We}};ue[Mt.scheme]=Mt,ue[Nn.scheme]=Nn,ue[xr.scheme]=xr,ue[Mr.scheme]=Mr,ue[yi.scheme]=yi,ue[$r.scheme]=$r,ue[vi.scheme]=vi,n.SCHEMES=ue,n.pctEncChar=le,n.pctDecChars=ce,n.parse=Le,n.removeDotSegments=Ve,n.serialize=Se,n.resolveComponents=it,n.resolve=It,n.normalize=Re,n.equal=Ge,n.escapeComponent=ot,n.unescapeComponent=ct,Object.defineProperty(n,"__esModule",{value:!0})})}(LC,LC.exports)),LC.exports}var jle;function Fat(){if(jle)return tN;jle=1,Object.defineProperty(tN,"__esModule",{value:!0});const e=Lat();return e.code='require("ajv/dist/runtime/uri").default',tN.default=e,tN}var Ble;function jat(){return Ble||(Ble=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=OF();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=wr();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=_K(),i=DF(),s=NEe(),o=wK(),a=wr(),u=NF(),l=DM(),c=ti(),d=Mat,f=Fat(),h=(L,V)=>new RegExp(L,V);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),y={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},v={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},w=200;function x(L){var V,X,H,Q,Z,ne,ue,le,ce,ge,se,te,Ee,we,De,Le,Ne,Te,qe,Qe,Ue,Ve,Se,it,It;const Re=L.strict,Ge=(V=L.code)===null||V===void 0?void 0:V.optimize,ot=Ge===!0||Ge===void 0?1:Ge||0,ct=(H=(X=L.code)===null||X===void 0?void 0:X.regExp)!==null&&H!==void 0?H:h,Mt=(Q=L.uriResolver)!==null&&Q!==void 0?Q:f.default;return{strictSchema:(ne=(Z=L.strictSchema)!==null&&Z!==void 0?Z:Re)!==null&&ne!==void 0?ne:!0,strictNumbers:(le=(ue=L.strictNumbers)!==null&&ue!==void 0?ue:Re)!==null&&le!==void 0?le:!0,strictTypes:(ge=(ce=L.strictTypes)!==null&&ce!==void 0?ce:Re)!==null&&ge!==void 0?ge:"log",strictTuples:(te=(se=L.strictTuples)!==null&&se!==void 0?se:Re)!==null&&te!==void 0?te:"log",strictRequired:(we=(Ee=L.strictRequired)!==null&&Ee!==void 0?Ee:Re)!==null&&we!==void 0?we:!1,code:L.code?{...L.code,optimize:ot,regExp:ct}:{optimize:ot,regExp:ct},loopRequired:(De=L.loopRequired)!==null&&De!==void 0?De:w,loopEnum:(Le=L.loopEnum)!==null&&Le!==void 0?Le:w,meta:(Ne=L.meta)!==null&&Ne!==void 0?Ne:!0,messages:(Te=L.messages)!==null&&Te!==void 0?Te:!0,inlineRefs:(qe=L.inlineRefs)!==null&&qe!==void 0?qe:!0,schemaId:(Qe=L.schemaId)!==null&&Qe!==void 0?Qe:"$id",addUsedSchema:(Ue=L.addUsedSchema)!==null&&Ue!==void 0?Ue:!0,validateSchema:(Ve=L.validateSchema)!==null&&Ve!==void 0?Ve:!0,validateFormats:(Se=L.validateFormats)!==null&&Se!==void 0?Se:!0,unicodeRegExp:(it=L.unicodeRegExp)!==null&&it!==void 0?it:!0,int32range:(It=L.int32range)!==null&&It!==void 0?It:!0,uriResolver:Mt}}class S{constructor(V={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,V=this.opts={...V,...x(V)};const{es5:X,lines:H}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:X,lines:H}),this.logger=z(V.logger);const Q=V.validateFormats;V.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,y,V,"NOT SUPPORTED"),E.call(this,v,V,"DEPRECATED","warn"),this._metaOpts=D.call(this),V.formats&&I.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),V.keywords&&k.call(this,V.keywords),typeof V.meta=="object"&&this.addMetaSchema(V.meta),A.call(this),V.validateFormats=Q}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:V,meta:X,schemaId:H}=this.opts;let Q=d;H==="id"&&(Q={...d},Q.id=Q.$id,delete Q.$id),X&&V&&this.addMetaSchema(Q,Q[H],!1)}defaultMeta(){const{meta:V,schemaId:X}=this.opts;return this.opts.defaultMeta=typeof V=="object"?V[X]||V:void 0}validate(V,X){let H;if(typeof V=="string"){if(H=this.getSchema(V),!H)throw new Error(`no schema with key or ref "${V}"`)}else H=this.compile(V);const Q=H(X);return"$async"in H||(this.errors=H.errors),Q}compile(V,X){const H=this._addSchema(V,X);return H.validate||this._compileSchemaEnv(H)}compileAsync(V,X){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:H}=this.opts;return Q.call(this,V,X);async function Q(ge,se){await Z.call(this,ge.$schema);const te=this._addSchema(ge,se);return te.validate||ne.call(this,te)}async function Z(ge){ge&&!this.getSchema(ge)&&await Q.call(this,{$ref:ge},!0)}async function ne(ge){try{return this._compileSchemaEnv(ge)}catch(se){if(!(se instanceof i.default))throw se;return ue.call(this,se),await le.call(this,se.missingSchema),ne.call(this,ge)}}function ue({missingSchema:ge,missingRef:se}){if(this.refs[ge])throw new Error(`AnySchema ${ge} is loaded but ${se} cannot be resolved`)}async function le(ge){const se=await ce.call(this,ge);this.refs[ge]||await Z.call(this,se.$schema),this.refs[ge]||this.addSchema(se,ge,X)}async function ce(ge){const se=this._loading[ge];if(se)return se;try{return await(this._loading[ge]=H(ge))}finally{delete this._loading[ge]}}}addSchema(V,X,H,Q=this.opts.validateSchema){if(Array.isArray(V)){for(const ne of V)this.addSchema(ne,void 0,H,Q);return this}let Z;if(typeof V=="object"){const{schemaId:ne}=this.opts;if(Z=V[ne],Z!==void 0&&typeof Z!="string")throw new Error(`schema ${ne} must be string`)}return X=(0,u.normalizeId)(X||Z),this._checkUnique(X),this.schemas[X]=this._addSchema(V,H,X,Q,!0),this}addMetaSchema(V,X,H=this.opts.validateSchema){return this.addSchema(V,X,!0,H),this}validateSchema(V,X){if(typeof V=="boolean")return!0;let H;if(H=V.$schema,H!==void 0&&typeof H!="string")throw new Error("$schema must be a string");if(H=H||this.opts.defaultMeta||this.defaultMeta(),!H)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const Q=this.validate(H,V);if(!Q&&X){const Z="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(Z);else throw new Error(Z)}return Q}getSchema(V){let X;for(;typeof(X=T.call(this,V))=="string";)V=X;if(X===void 0){const{schemaId:H}=this.opts,Q=new o.SchemaEnv({schema:{},schemaId:H});if(X=o.resolveSchema.call(this,Q,V),!X)return;this.refs[V]=X}return X.validate||this._compileSchemaEnv(X)}removeSchema(V){if(V instanceof RegExp)return this._removeAllSchemas(this.schemas,V),this._removeAllSchemas(this.refs,V),this;switch(typeof V){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const X=T.call(this,V);return typeof X=="object"&&this._cache.delete(X.schema),delete this.schemas[V],delete this.refs[V],this}case"object":{const X=V;this._cache.delete(X);let H=V[this.opts.schemaId];return H&&(H=(0,u.normalizeId)(H),delete this.schemas[H],delete this.refs[H]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(V){for(const X of V)this.addKeyword(X);return this}addKeyword(V,X){let H;if(typeof V=="string")H=V,typeof X=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),X.keyword=H);else if(typeof V=="object"&&X===void 0){if(X=V,H=X.keyword,Array.isArray(H)&&!H.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if($.call(this,H,X),!X)return(0,c.eachItem)(H,Z=>F.call(this,Z)),this;q.call(this,X);const Q={...X,type:(0,l.getJSONTypes)(X.type),schemaType:(0,l.getJSONTypes)(X.schemaType)};return(0,c.eachItem)(H,Q.type.length===0?Z=>F.call(this,Z,Q):Z=>Q.type.forEach(ne=>F.call(this,Z,Q,ne))),this}getKeyword(V){const X=this.RULES.all[V];return typeof X=="object"?X.definition:!!X}removeKeyword(V){const{RULES:X}=this;delete X.keywords[V],delete X.all[V];for(const H of X.rules){const Q=H.rules.findIndex(Z=>Z.keyword===V);Q>=0&&H.rules.splice(Q,1)}return this}addFormat(V,X){return typeof X=="string"&&(X=new RegExp(X)),this.formats[V]=X,this}errorsText(V=this.errors,{separator:X=", ",dataVar:H="data"}={}){return!V||V.length===0?"No errors":V.map(Q=>`${H}${Q.instancePath} ${Q.message}`).reduce((Q,Z)=>Q+X+Z)}$dataMetaSchema(V,X){const H=this.RULES.all;V=JSON.parse(JSON.stringify(V));for(const Q of X){const Z=Q.split("/").slice(1);let ne=V;for(const ue of Z)ne=ne[ue];for(const ue in H){const le=H[ue];if(typeof le!="object")continue;const{$data:ce}=le.definition,ge=ne[ue];ce&&ge&&(ne[ue]=K(ge))}}return V}_removeAllSchemas(V,X){for(const H in V){const Q=V[H];(!X||X.test(H))&&(typeof Q=="string"?delete V[H]:Q&&!Q.meta&&(this._cache.delete(Q.schema),delete V[H]))}}_addSchema(V,X,H,Q=this.opts.validateSchema,Z=this.opts.addUsedSchema){let ne;const{schemaId:ue}=this.opts;if(typeof V=="object")ne=V[ue];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof V!="boolean")throw new Error("schema must be object or boolean")}let le=this._cache.get(V);if(le!==void 0)return le;H=(0,u.normalizeId)(ne||H);const ce=u.getSchemaRefs.call(this,V,H);return le=new o.SchemaEnv({schema:V,schemaId:ue,meta:X,baseId:H,localRefs:ce}),this._cache.set(le.schema,le),Z&&!H.startsWith("#")&&(H&&this._checkUnique(H),this.refs[H]=le),Q&&this.validateSchema(V,!0),le}_checkUnique(V){if(this.schemas[V]||this.refs[V])throw new Error(`schema with key or id "${V}" already exists`)}_compileSchemaEnv(V){if(V.meta?this._compileMetaSchema(V):o.compileSchema.call(this,V),!V.validate)throw new Error("ajv implementation error");return V.validate}_compileMetaSchema(V){const X=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,V)}finally{this.opts=X}}}S.ValidationError=r.default,S.MissingRefError=i.default,e.default=S;function E(L,V,X,H="error"){for(const Q in L){const Z=Q;Z in V&&this.logger[H](`${X}: option ${Q}. ${L[Z]}`)}}function T(L){return L=(0,u.normalizeId)(L),this.schemas[L]||this.refs[L]}function A(){const L=this.opts.schemas;if(L)if(Array.isArray(L))this.addSchema(L);else for(const V in L)this.addSchema(L[V],V)}function I(){for(const L in this.opts.formats){const V=this.opts.formats[L];V&&this.addFormat(L,V)}}function k(L){if(Array.isArray(L)){this.addVocabulary(L);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const V in L){const X=L[V];X.keyword||(X.keyword=V),this.addKeyword(X)}}function D(){const L={...this.opts};for(const V of p)delete L[V];return L}const M={log(){},warn(){},error(){}};function z(L){if(L===!1)return M;if(L===void 0)return console;if(L.log&&L.warn&&L.error)return L;throw new Error("logger must implement log, warn and error methods")}const O=/^[a-z_$][a-z0-9_$:-]*$/i;function $(L,V){const{RULES:X}=this;if((0,c.eachItem)(L,H=>{if(X.keywords[H])throw new Error(`Keyword ${H} is already defined`);if(!O.test(H))throw new Error(`Keyword ${H} has invalid name`)}),!!V&&V.$data&&!("code"in V||"validate"in V))throw new Error('$data keyword must have "code" or "validate" function')}function F(L,V,X){var H;const Q=V==null?void 0:V.post;if(X&&Q)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:Z}=this;let ne=Q?Z.post:Z.rules.find(({type:le})=>le===X);if(ne||(ne={type:X,rules:[]},Z.rules.push(ne)),Z.keywords[L]=!0,!V)return;const ue={keyword:L,definition:{...V,type:(0,l.getJSONTypes)(V.type),schemaType:(0,l.getJSONTypes)(V.schemaType)}};V.before?B.call(this,ne,ue,V.before):ne.rules.push(ue),Z.all[L]=ue,(H=V.implements)===null||H===void 0||H.forEach(le=>this.addKeyword(le))}function B(L,V,X){const H=L.rules.findIndex(Q=>Q.keyword===X);H>=0?L.rules.splice(H,0,V):(L.rules.push(V),this.logger.warn(`rule ${X} is not defined`))}function q(L){let{metaSchema:V}=L;V!==void 0&&(L.$data&&this.opts.$data&&(V=K(V)),L.validateSchema=this.compile(V,!0))}const G={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function K(L){return{anyOf:[L,G]}}}(kB)),kB}var nN={},rN={},iN={},zle;function Bat(){if(zle)return iN;zle=1,Object.defineProperty(iN,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return iN.default=e,iN}var c0={},Ule;function zat(){if(Ule)return c0;Ule=1,Object.defineProperty(c0,"__esModule",{value:!0}),c0.callRef=c0.getValidate=void 0;const e=DF(),t=rh(),n=wr(),r=dv(),i=wK(),s=ti(),o={keyword:"$ref",schemaType:"string",code(l){const{gen:c,schema:d,it:f}=l,{baseId:h,schemaEnv:p,validateName:m,opts:y,self:v}=f,{root:w}=p;if((d==="#"||d==="#/")&&h===w.baseId)return S();const x=i.resolveRef.call(v,w,h,d);if(x===void 0)throw new e.default(f.opts.uriResolver,h,d);if(x instanceof i.SchemaEnv)return E(x);return T(x);function S(){if(p===w)return u(l,m,p,p.$async);const A=c.scopeValue("root",{ref:w});return u(l,(0,n._)`${A}.validate`,w,w.$async)}function E(A){const I=a(l,A);u(l,I,A,A.$async)}function T(A){const I=c.scopeValue("schema",y.code.source===!0?{ref:A,code:(0,n.stringify)(A)}:{ref:A}),k=c.name("valid"),D=l.subschema({schema:A,dataTypes:[],schemaPath:n.nil,topSchemaRef:I,errSchemaPath:d},k);l.mergeEvaluated(D),l.ok(k)}}};function a(l,c){const{gen:d}=l;return c.validate?d.scopeValue("validate",{ref:c.validate}):(0,n._)`${d.scopeValue("wrapper",{ref:c})}.validate`}c0.getValidate=a;function u(l,c,d,f){const{gen:h,it:p}=l,{allErrors:m,schemaEnv:y,opts:v}=p,w=v.passContext?r.default.this:n.nil;f?x():S();function x(){if(!y.$async)throw new Error("async schema referenced by sync schema");const A=h.let("valid");h.try(()=>{h.code((0,n._)`await ${(0,t.callValidateCode)(l,c,w)}`),T(c),m||h.assign(A,!0)},I=>{h.if((0,n._)`!(${I} instanceof ${p.ValidationError})`,()=>h.throw(I)),E(I),m||h.assign(A,!1)}),l.ok(A)}function S(){l.result((0,t.callValidateCode)(l,c,w),()=>T(c),()=>E(c))}function E(A){const I=(0,n._)`${A}.errors`;h.assign(r.default.vErrors,(0,n._)`${r.default.vErrors} === null ? ${I} : ${r.default.vErrors}.concat(${I})`),h.assign(r.default.errors,(0,n._)`${r.default.vErrors}.length`)}function T(A){var I;if(!p.opts.unevaluated)return;const k=(I=d==null?void 0:d.validate)===null||I===void 0?void 0:I.evaluated;if(p.props!==!0)if(k&&!k.dynamicProps)k.props!==void 0&&(p.props=s.mergeEvaluated.props(h,k.props,p.props));else{const D=h.var("props",(0,n._)`${A}.evaluated.props`);p.props=s.mergeEvaluated.props(h,D,p.props,n.Name)}if(p.items!==!0)if(k&&!k.dynamicItems)k.items!==void 0&&(p.items=s.mergeEvaluated.items(h,k.items,p.items));else{const D=h.var("items",(0,n._)`${A}.evaluated.items`);p.items=s.mergeEvaluated.items(h,D,p.items,n.Name)}}}return c0.callRef=u,c0.default=o,c0}var Vle;function Uat(){if(Vle)return rN;Vle=1,Object.defineProperty(rN,"__esModule",{value:!0});const e=Bat(),t=zat(),n=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return rN.default=n,rN}var sN={},oN={},Hle;function Vat(){if(Hle)return oN;Hle=1,Object.defineProperty(oN,"__esModule",{value:!0});const e=wr(),t=e.operators,n={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},r={message:({keyword:s,schemaCode:o})=>(0,e.str)`must be ${n[s].okStr} ${o}`,params:({keyword:s,schemaCode:o})=>(0,e._)`{comparison: ${n[s].okStr}, limit: ${o}}`},i={keyword:Object.keys(n),type:"number",schemaType:"number",$data:!0,error:r,code(s){const{keyword:o,data:a,schemaCode:u}=s;s.fail$data((0,e._)`${a} ${n[o].fail} ${u} || isNaN(${a})`)}};return oN.default=i,oN}var aN={},qle;function Hat(){if(qle)return aN;qle=1,Object.defineProperty(aN,"__esModule",{value:!0});const e=wr(),n={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,e._)`{multipleOf: ${r}}`},code(r){const{gen:i,data:s,schemaCode:o,it:a}=r,u=a.opts.multipleOfPrecision,l=i.let("res"),c=u?(0,e._)`Math.abs(Math.round(${l}) - ${l}) > 1e-${u}`:(0,e._)`${l} !== parseInt(${l})`;r.fail$data((0,e._)`(${o} === 0 || (${l} = ${s}/${o}, ${c}))`)}};return aN.default=n,aN}var uN={},lN={},Wle;function qat(){if(Wle)return lN;Wle=1,Object.defineProperty(lN,"__esModule",{value:!0});function e(t){const n=t.length;let r=0,i=0,s;for(;i<n;)r++,s=t.charCodeAt(i++),s>=55296&&s<=56319&&i<n&&(s=t.charCodeAt(i),(s&64512)===56320&&i++);return r}return lN.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',lN}var Gle;function Wat(){if(Gle)return uN;Gle=1,Object.defineProperty(uN,"__esModule",{value:!0});const e=wr(),t=ti(),n=qat(),i={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:s,schemaCode:o}){const a=s==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${a} than ${o} characters`},params:({schemaCode:s})=>(0,e._)`{limit: ${s}}`},code(s){const{keyword:o,data:a,schemaCode:u,it:l}=s,c=o==="maxLength"?e.operators.GT:e.operators.LT,d=l.opts.unicode===!1?(0,e._)`${a}.length`:(0,e._)`${(0,t.useFunc)(s.gen,n.default)}(${a})`;s.fail$data((0,e._)`${d} ${c} ${u}`)}};return uN.default=i,uN}var cN={},Yle;function Gat(){if(Yle)return cN;Yle=1,Object.defineProperty(cN,"__esModule",{value:!0});const e=rh(),t=wr(),r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:i})=>(0,t.str)`must match pattern "${i}"`,params:({schemaCode:i})=>(0,t._)`{pattern: ${i}}`},code(i){const{data:s,$data:o,schema:a,schemaCode:u,it:l}=i,c=l.opts.unicodeRegExp?"u":"",d=o?(0,t._)`(new RegExp(${u}, ${c}))`:(0,e.usePattern)(i,a);i.fail$data((0,t._)`!${d}.test(${s})`)}};return cN.default=r,cN}var dN={},Kle;function Yat(){if(Kle)return dN;Kle=1,Object.defineProperty(dN,"__esModule",{value:!0});const e=wr(),n={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const s=r==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${i} properties`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:s,schemaCode:o}=r,a=i==="maxProperties"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`Object.keys(${s}).length ${a} ${o}`)}};return dN.default=n,dN}var fN={},Xle;function Kat(){if(Xle)return fN;Xle=1,Object.defineProperty(fN,"__esModule",{value:!0});const e=rh(),t=wr(),n=ti(),i={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:s}})=>(0,t.str)`must have required property '${s}'`,params:({params:{missingProperty:s}})=>(0,t._)`{missingProperty: ${s}}`},code(s){const{gen:o,schema:a,schemaCode:u,data:l,$data:c,it:d}=s,{opts:f}=d;if(!c&&a.length===0)return;const h=a.length>=f.loopRequired;if(d.allErrors?p():m(),f.strictRequired){const w=s.parentSchema.properties,{definedProperties:x}=s.it;for(const S of a)if((w==null?void 0:w[S])===void 0&&!x.has(S)){const E=d.schemaEnv.baseId+d.errSchemaPath,T=`required property "${S}" is not defined at "${E}" (strictRequired)`;(0,n.checkStrictMode)(d,T,d.opts.strictRequired)}}function p(){if(h||c)s.block$data(t.nil,y);else for(const w of a)(0,e.checkReportMissingProp)(s,w)}function m(){const w=o.let("missing");if(h||c){const x=o.let("valid",!0);s.block$data(x,()=>v(w,x)),s.ok(x)}else o.if((0,e.checkMissingProp)(s,a,w)),(0,e.reportMissingProp)(s,w),o.else()}function y(){o.forOf("prop",u,w=>{s.setParams({missingProperty:w}),o.if((0,e.noPropertyInData)(o,l,w,f.ownProperties),()=>s.error())})}function v(w,x){s.setParams({missingProperty:w}),o.forOf(w,u,()=>{o.assign(x,(0,e.propertyInData)(o,l,w,f.ownProperties)),o.if((0,t.not)(x),()=>{s.error(),o.break()})},t.nil)}}};return fN.default=i,fN}var hN={},Qle;function Xat(){if(Qle)return hN;Qle=1,Object.defineProperty(hN,"__esModule",{value:!0});const e=wr(),n={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const s=r==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${i} items`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:s,schemaCode:o}=r,a=i==="maxItems"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`${s}.length ${a} ${o}`)}};return hN.default=n,hN}var pN={},mN={},Jle;function xK(){if(Jle)return mN;Jle=1,Object.defineProperty(mN,"__esModule",{value:!0});const e=bK();return e.code='require("ajv/dist/runtime/equal").default',mN.default=e,mN}var Zle;function Qat(){if(Zle)return pN;Zle=1,Object.defineProperty(pN,"__esModule",{value:!0});const e=DM(),t=wr(),n=ti(),r=xK(),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:o,j:a}})=>(0,t.str)`must NOT have duplicate items (items ## ${a} and ${o} are identical)`,params:({params:{i:o,j:a}})=>(0,t._)`{i: ${o}, j: ${a}}`},code(o){const{gen:a,data:u,$data:l,schema:c,parentSchema:d,schemaCode:f,it:h}=o;if(!l&&!c)return;const p=a.let("valid"),m=d.items?(0,e.getSchemaTypes)(d.items):[];o.block$data(p,y,(0,t._)`${f} === false`),o.ok(p);function y(){const S=a.let("i",(0,t._)`${u}.length`),E=a.let("j");o.setParams({i:S,j:E}),a.assign(p,!0),a.if((0,t._)`${S} > 1`,()=>(v()?w:x)(S,E))}function v(){return m.length>0&&!m.some(S=>S==="object"||S==="array")}function w(S,E){const T=a.name("item"),A=(0,e.checkDataTypes)(m,T,h.opts.strictNumbers,e.DataType.Wrong),I=a.const("indices",(0,t._)`{}`);a.for((0,t._)`;${S}--;`,()=>{a.let(T,(0,t._)`${u}[${S}]`),a.if(A,(0,t._)`continue`),m.length>1&&a.if((0,t._)`typeof ${T} == "string"`,(0,t._)`${T} += "_"`),a.if((0,t._)`typeof ${I}[${T}] == "number"`,()=>{a.assign(E,(0,t._)`${I}[${T}]`),o.error(),a.assign(p,!1).break()}).code((0,t._)`${I}[${T}] = ${S}`)})}function x(S,E){const T=(0,n.useFunc)(a,r.default),A=a.name("outer");a.label(A).for((0,t._)`;${S}--;`,()=>a.for((0,t._)`${E} = ${S}; ${E}--;`,()=>a.if((0,t._)`${T}(${u}[${S}], ${u}[${E}])`,()=>{o.error(),a.assign(p,!1).break(A)})))}}};return pN.default=s,pN}var gN={},ece;function Jat(){if(ece)return gN;ece=1,Object.defineProperty(gN,"__esModule",{value:!0});const e=wr(),t=ti(),n=xK(),i={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:s})=>(0,e._)`{allowedValue: ${s}}`},code(s){const{gen:o,data:a,$data:u,schemaCode:l,schema:c}=s;u||c&&typeof c=="object"?s.fail$data((0,e._)`!${(0,t.useFunc)(o,n.default)}(${a}, ${l})`):s.fail((0,e._)`${c} !== ${a}`)}};return gN.default=i,gN}var yN={},tce;function Zat(){if(tce)return yN;tce=1,Object.defineProperty(yN,"__esModule",{value:!0});const e=wr(),t=ti(),n=xK(),i={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:s})=>(0,e._)`{allowedValues: ${s}}`},code(s){const{gen:o,data:a,$data:u,schema:l,schemaCode:c,it:d}=s;if(!u&&l.length===0)throw new Error("enum must have non-empty array");const f=l.length>=d.opts.loopEnum;let h;const p=()=>h??(h=(0,t.useFunc)(o,n.default));let m;if(f||u)m=o.let("valid"),s.block$data(m,y);else{if(!Array.isArray(l))throw new Error("ajv implementation error");const w=o.const("vSchema",c);m=(0,e.or)(...l.map((x,S)=>v(w,S)))}s.pass(m);function y(){o.assign(m,!1),o.forOf("v",c,w=>o.if((0,e._)`${p()}(${a}, ${w})`,()=>o.assign(m,!0).break()))}function v(w,x){const S=l[x];return typeof S=="object"&&S!==null?(0,e._)`${p()}(${a}, ${w}[${x}])`:(0,e._)`${a} === ${S}`}}};return yN.default=i,yN}var nce;function eut(){if(nce)return sN;nce=1,Object.defineProperty(sN,"__esModule",{value:!0});const e=Vat(),t=Hat(),n=Wat(),r=Gat(),i=Yat(),s=Kat(),o=Xat(),a=Qat(),u=Jat(),l=Zat(),c=[e.default,t.default,n.default,r.default,i.default,s.default,o.default,a.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},u.default,l.default];return sN.default=c,sN}var vN={},lw={},rce;function DEe(){if(rce)return lw;rce=1,Object.defineProperty(lw,"__esModule",{value:!0}),lw.validateAdditionalItems=void 0;const e=wr(),t=ti(),r={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:s}})=>(0,e.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,e._)`{limit: ${s}}`},code(s){const{parentSchema:o,it:a}=s,{items:u}=o;if(!Array.isArray(u)){(0,t.checkStrictMode)(a,'"additionalItems" is ignored when "items" is not an array of schemas');return}i(s,u)}};function i(s,o){const{gen:a,schema:u,data:l,keyword:c,it:d}=s;d.items=!0;const f=a.const("len",(0,e._)`${l}.length`);if(u===!1)s.setParams({len:o.length}),s.pass((0,e._)`${f} <= ${o.length}`);else if(typeof u=="object"&&!(0,t.alwaysValidSchema)(d,u)){const p=a.var("valid",(0,e._)`${f} <= ${o.length}`);a.if((0,e.not)(p),()=>h(p)),s.ok(p)}function h(p){a.forRange("i",o.length,f,m=>{s.subschema({keyword:c,dataProp:m,dataPropType:t.Type.Num},p),d.allErrors||a.if((0,e.not)(p),()=>a.break())})}}return lw.validateAdditionalItems=i,lw.default=r,lw}var bN={},cw={},ice;function MEe(){if(ice)return cw;ice=1,Object.defineProperty(cw,"__esModule",{value:!0}),cw.validateTuple=void 0;const e=wr(),t=ti(),n=rh(),r={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(s){const{schema:o,it:a}=s;if(Array.isArray(o))return i(s,"additionalItems",o);a.items=!0,!(0,t.alwaysValidSchema)(a,o)&&s.ok((0,n.validateArray)(s))}};function i(s,o,a=s.schema){const{gen:u,parentSchema:l,data:c,keyword:d,it:f}=s;m(l),f.opts.unevaluated&&a.length&&f.items!==!0&&(f.items=t.mergeEvaluated.items(u,a.length,f.items));const h=u.name("valid"),p=u.const("len",(0,e._)`${c}.length`);a.forEach((y,v)=>{(0,t.alwaysValidSchema)(f,y)||(u.if((0,e._)`${p} > ${v}`,()=>s.subschema({keyword:d,schemaProp:v,dataProp:v},h)),s.ok(h))});function m(y){const{opts:v,errSchemaPath:w}=f,x=a.length,S=x===y.minItems&&(x===y.maxItems||y[o]===!1);if(v.strictTuples&&!S){const E=`"${d}" is ${x}-tuple, but minItems or maxItems/${o} are not specified or different at path "${w}"`;(0,t.checkStrictMode)(f,E,v.strictTuples)}}}return cw.validateTuple=i,cw.default=r,cw}var sce;function tut(){if(sce)return bN;sce=1,Object.defineProperty(bN,"__esModule",{value:!0});const e=MEe(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:n=>(0,e.validateTuple)(n,"items")};return bN.default=t,bN}var _N={},oce;function nut(){if(oce)return _N;oce=1,Object.defineProperty(_N,"__esModule",{value:!0});const e=wr(),t=ti(),n=rh(),r=DEe(),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,e.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,e._)`{limit: ${o}}`},code(o){const{schema:a,parentSchema:u,it:l}=o,{prefixItems:c}=u;l.items=!0,!(0,t.alwaysValidSchema)(l,a)&&(c?(0,r.validateAdditionalItems)(o,c):o.ok((0,n.validateArray)(o)))}};return _N.default=s,_N}var wN={},ace;function rut(){if(ace)return wN;ace=1,Object.defineProperty(wN,"__esModule",{value:!0});const e=wr(),t=ti(),r={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:i,max:s}})=>s===void 0?(0,e.str)`must contain at least ${i} valid item(s)`:(0,e.str)`must contain at least ${i} and no more than ${s} valid item(s)`,params:({params:{min:i,max:s}})=>s===void 0?(0,e._)`{minContains: ${i}}`:(0,e._)`{minContains: ${i}, maxContains: ${s}}`},code(i){const{gen:s,schema:o,parentSchema:a,data:u,it:l}=i;let c,d;const{minContains:f,maxContains:h}=a;l.opts.next?(c=f===void 0?1:f,d=h):c=1;const p=s.const("len",(0,e._)`${u}.length`);if(i.setParams({min:c,max:d}),d===void 0&&c===0){(0,t.checkStrictMode)(l,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(d!==void 0&&c>d){(0,t.checkStrictMode)(l,'"minContains" > "maxContains" is always invalid'),i.fail();return}if((0,t.alwaysValidSchema)(l,o)){let x=(0,e._)`${p} >= ${c}`;d!==void 0&&(x=(0,e._)`${x} && ${p} <= ${d}`),i.pass(x);return}l.items=!0;const m=s.name("valid");d===void 0&&c===1?v(m,()=>s.if(m,()=>s.break())):c===0?(s.let(m,!0),d!==void 0&&s.if((0,e._)`${u}.length > 0`,y)):(s.let(m,!1),y()),i.result(m,()=>i.reset());function y(){const x=s.name("_valid"),S=s.let("count",0);v(x,()=>s.if(x,()=>w(S)))}function v(x,S){s.forRange("i",0,p,E=>{i.subschema({keyword:"contains",dataProp:E,dataPropType:t.Type.Num,compositeRule:!0},x),S()})}function w(x){s.code((0,e._)`${x}++`),d===void 0?s.if((0,e._)`${x} >= ${c}`,()=>s.assign(m,!0).break()):(s.if((0,e._)`${x} > ${d}`,()=>s.assign(m,!1).break()),c===1?s.assign(m,!0):s.if((0,e._)`${x} >= ${c}`,()=>s.assign(m,!0)))}}};return wN.default=r,wN}var LB={},uce;function iut(){return uce||(uce=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=wr(),n=ti(),r=rh();e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const d=l===1?"property":"properties";return(0,t.str)`must have ${d} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:d}})=>(0,t._)`{property: ${u},
    missingProperty: ${d},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const d in u){if(d==="__proto__")continue;const f=Array.isArray(u[d])?l:c;f[d]=u[d]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:d,it:f}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const y=(0,r.propertyInData)(c,d,p,f.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),f.allErrors?c.if(y,()=>{for(const v of m)(0,r.checkReportMissingProp)(u,v)}):(c.if((0,t._)`${y} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:d,keyword:f,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,d,m,h.opts.ownProperties),()=>{const y=u.subschema({keyword:f,schemaProp:m},p);u.mergeValidEvaluated(y,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i}(LB)),LB}var xN={},lce;function sut(){if(lce)return xN;lce=1,Object.defineProperty(xN,"__esModule",{value:!0});const e=wr(),t=ti(),r={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:i})=>(0,e._)`{propertyName: ${i.propertyName}}`},code(i){const{gen:s,schema:o,data:a,it:u}=i;if((0,t.alwaysValidSchema)(u,o))return;const l=s.name("valid");s.forIn("key",a,c=>{i.setParams({propertyName:c}),i.subschema({keyword:"propertyNames",data:c,dataTypes:["string"],propertyName:c,compositeRule:!0},l),s.if((0,e.not)(l),()=>{i.error(!0),u.allErrors||s.break()})}),i.ok(l)}};return xN.default=r,xN}var EN={},cce;function $Ee(){if(cce)return EN;cce=1,Object.defineProperty(EN,"__esModule",{value:!0});const e=rh(),t=wr(),n=dv(),r=ti(),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:o})=>(0,t._)`{additionalProperty: ${o.additionalProperty}}`},code(o){const{gen:a,schema:u,parentSchema:l,data:c,errsCount:d,it:f}=o;if(!d)throw new Error("ajv implementation error");const{allErrors:h,opts:p}=f;if(f.props=!0,p.removeAdditional!=="all"&&(0,r.alwaysValidSchema)(f,u))return;const m=(0,e.allSchemaProperties)(l.properties),y=(0,e.allSchemaProperties)(l.patternProperties);v(),o.ok((0,t._)`${d} === ${n.default.errors}`);function v(){a.forIn("key",c,T=>{!m.length&&!y.length?S(T):a.if(w(T),()=>S(T))})}function w(T){let A;if(m.length>8){const I=(0,r.schemaRefOrVal)(f,l.properties,"properties");A=(0,e.isOwnProperty)(a,I,T)}else m.length?A=(0,t.or)(...m.map(I=>(0,t._)`${T} === ${I}`)):A=t.nil;return y.length&&(A=(0,t.or)(A,...y.map(I=>(0,t._)`${(0,e.usePattern)(o,I)}.test(${T})`))),(0,t.not)(A)}function x(T){a.code((0,t._)`delete ${c}[${T}]`)}function S(T){if(p.removeAdditional==="all"||p.removeAdditional&&u===!1){x(T);return}if(u===!1){o.setParams({additionalProperty:T}),o.error(),h||a.break();return}if(typeof u=="object"&&!(0,r.alwaysValidSchema)(f,u)){const A=a.name("valid");p.removeAdditional==="failing"?(E(T,A,!1),a.if((0,t.not)(A),()=>{o.reset(),x(T)})):(E(T,A),h||a.if((0,t.not)(A),()=>a.break()))}}function E(T,A,I){const k={keyword:"additionalProperties",dataProp:T,dataPropType:r.Type.Str};I===!1&&Object.assign(k,{compositeRule:!0,createErrors:!1,allErrors:!1}),o.subschema(k,A)}}};return EN.default=s,EN}var SN={},dce;function out(){if(dce)return SN;dce=1,Object.defineProperty(SN,"__esModule",{value:!0});const e=OF(),t=rh(),n=ti(),r=$Ee(),i={keyword:"properties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,parentSchema:u,data:l,it:c}=s;c.opts.removeAdditional==="all"&&u.additionalProperties===void 0&&r.default.code(new e.KeywordCxt(c,r.default,"additionalProperties"));const d=(0,t.allSchemaProperties)(a);for(const y of d)c.definedProperties.add(y);c.opts.unevaluated&&d.length&&c.props!==!0&&(c.props=n.mergeEvaluated.props(o,(0,n.toHash)(d),c.props));const f=d.filter(y=>!(0,n.alwaysValidSchema)(c,a[y]));if(f.length===0)return;const h=o.name("valid");for(const y of f)p(y)?m(y):(o.if((0,t.propertyInData)(o,l,y,c.opts.ownProperties)),m(y),c.allErrors||o.else().var(h,!0),o.endIf()),s.it.definedProperties.add(y),s.ok(h);function p(y){return c.opts.useDefaults&&!c.compositeRule&&a[y].default!==void 0}function m(y){s.subschema({keyword:"properties",schemaProp:y,dataProp:y},h)}}};return SN.default=i,SN}var TN={},fce;function aut(){if(fce)return TN;fce=1,Object.defineProperty(TN,"__esModule",{value:!0});const e=rh(),t=wr(),n=ti(),r=ti(),i={keyword:"patternProperties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,data:u,parentSchema:l,it:c}=s,{opts:d}=c,f=(0,e.allSchemaProperties)(a),h=f.filter(S=>(0,n.alwaysValidSchema)(c,a[S]));if(f.length===0||h.length===f.length&&(!c.opts.unevaluated||c.props===!0))return;const p=d.strictSchema&&!d.allowMatchingProperties&&l.properties,m=o.name("valid");c.props!==!0&&!(c.props instanceof t.Name)&&(c.props=(0,r.evaluatedPropsToName)(o,c.props));const{props:y}=c;v();function v(){for(const S of f)p&&w(S),c.allErrors?x(S):(o.var(m,!0),x(S),o.if(m))}function w(S){for(const E in p)new RegExp(S).test(E)&&(0,n.checkStrictMode)(c,`property ${E} matches pattern ${S} (use allowMatchingProperties)`)}function x(S){o.forIn("key",u,E=>{o.if((0,t._)`${(0,e.usePattern)(s,S)}.test(${E})`,()=>{const T=h.includes(S);T||s.subschema({keyword:"patternProperties",schemaProp:S,dataProp:E,dataPropType:r.Type.Str},m),c.opts.unevaluated&&y!==!0?o.assign((0,t._)`${y}[${E}]`,!0):!T&&!c.allErrors&&o.if((0,t.not)(m),()=>o.break())})})}}};return TN.default=i,TN}var CN={},hce;function uut(){if(hce)return CN;hce=1,Object.defineProperty(CN,"__esModule",{value:!0});const e=ti(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(n){const{gen:r,schema:i,it:s}=n;if((0,e.alwaysValidSchema)(s,i)){n.fail();return}const o=r.name("valid");n.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),n.failResult(o,()=>n.reset(),()=>n.error())},error:{message:"must NOT be valid"}};return CN.default=t,CN}var AN={},pce;function lut(){if(pce)return AN;pce=1,Object.defineProperty(AN,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:rh().validateUnion,error:{message:"must match a schema in anyOf"}};return AN.default=t,AN}var IN={},mce;function cut(){if(mce)return IN;mce=1,Object.defineProperty(IN,"__esModule",{value:!0});const e=wr(),t=ti(),r={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:i})=>(0,e._)`{passingSchemas: ${i.passing}}`},code(i){const{gen:s,schema:o,parentSchema:a,it:u}=i;if(!Array.isArray(o))throw new Error("ajv implementation error");if(u.opts.discriminator&&a.discriminator)return;const l=o,c=s.let("valid",!1),d=s.let("passing",null),f=s.name("_valid");i.setParams({passing:d}),s.block(h),i.result(c,()=>i.reset(),()=>i.error(!0));function h(){l.forEach((p,m)=>{let y;(0,t.alwaysValidSchema)(u,p)?s.var(f,!0):y=i.subschema({keyword:"oneOf",schemaProp:m,compositeRule:!0},f),m>0&&s.if((0,e._)`${f} && ${c}`).assign(c,!1).assign(d,(0,e._)`[${d}, ${m}]`).else(),s.if(f,()=>{s.assign(c,!0),s.assign(d,m),y&&i.mergeEvaluated(y,e.Name)})})}}};return IN.default=r,IN}var RN={},gce;function dut(){if(gce)return RN;gce=1,Object.defineProperty(RN,"__esModule",{value:!0});const e=ti(),t={keyword:"allOf",schemaType:"array",code(n){const{gen:r,schema:i,it:s}=n;if(!Array.isArray(i))throw new Error("ajv implementation error");const o=r.name("valid");i.forEach((a,u)=>{if((0,e.alwaysValidSchema)(s,a))return;const l=n.subschema({keyword:"allOf",schemaProp:u},o);n.ok(o),n.mergeEvaluated(l)})}};return RN.default=t,RN}var kN={},yce;function fut(){if(yce)return kN;yce=1,Object.defineProperty(kN,"__esModule",{value:!0});const e=wr(),t=ti(),r={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:s})=>(0,e.str)`must match "${s.ifClause}" schema`,params:({params:s})=>(0,e._)`{failingKeyword: ${s.ifClause}}`},code(s){const{gen:o,parentSchema:a,it:u}=s;a.then===void 0&&a.else===void 0&&(0,t.checkStrictMode)(u,'"if" without "then" and "else" is ignored');const l=i(u,"then"),c=i(u,"else");if(!l&&!c)return;const d=o.let("valid",!0),f=o.name("_valid");if(h(),s.reset(),l&&c){const m=o.let("ifClause");s.setParams({ifClause:m}),o.if(f,p("then",m),p("else",m))}else l?o.if(f,p("then")):o.if((0,e.not)(f),p("else"));s.pass(d,()=>s.error(!0));function h(){const m=s.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},f);s.mergeEvaluated(m)}function p(m,y){return()=>{const v=s.subschema({keyword:m},f);o.assign(d,f),s.mergeValidEvaluated(v,d),y?o.assign(y,(0,e._)`${m}`):s.setParams({ifClause:m})}}}};function i(s,o){const a=s.schema[o];return a!==void 0&&!(0,t.alwaysValidSchema)(s,a)}return kN.default=r,kN}var PN={},vce;function hut(){if(vce)return PN;vce=1,Object.defineProperty(PN,"__esModule",{value:!0});const e=ti(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:n,parentSchema:r,it:i}){r.if===void 0&&(0,e.checkStrictMode)(i,`"${n}" without "if" is ignored`)}};return PN.default=t,PN}var bce;function put(){if(bce)return vN;bce=1,Object.defineProperty(vN,"__esModule",{value:!0});const e=DEe(),t=tut(),n=MEe(),r=nut(),i=rut(),s=iut(),o=sut(),a=$Ee(),u=out(),l=aut(),c=uut(),d=lut(),f=cut(),h=dut(),p=fut(),m=hut();function y(v=!1){const w=[c.default,d.default,f.default,h.default,p.default,m.default,o.default,a.default,s.default,u.default,l.default];return v?w.push(t.default,r.default):w.push(e.default,n.default),w.push(i.default),w}return vN.default=y,vN}var NN={},ON={},_ce;function mut(){if(_ce)return ON;_ce=1,Object.defineProperty(ON,"__esModule",{value:!0});const e=wr(),n={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,e._)`{format: ${r}}`},code(r,i){const{gen:s,data:o,$data:a,schema:u,schemaCode:l,it:c}=r,{opts:d,errSchemaPath:f,schemaEnv:h,self:p}=c;if(!d.validateFormats)return;a?m():y();function m(){const v=s.scopeValue("formats",{ref:p.formats,code:d.code.formats}),w=s.const("fDef",(0,e._)`${v}[${l}]`),x=s.let("fType"),S=s.let("format");s.if((0,e._)`typeof ${w} == "object" && !(${w} instanceof RegExp)`,()=>s.assign(x,(0,e._)`${w}.type || "string"`).assign(S,(0,e._)`${w}.validate`),()=>s.assign(x,(0,e._)`"string"`).assign(S,w)),r.fail$data((0,e.or)(E(),T()));function E(){return d.strictSchema===!1?e.nil:(0,e._)`${l} && !${S}`}function T(){const A=h.$async?(0,e._)`(${w}.async ? await ${S}(${o}) : ${S}(${o}))`:(0,e._)`${S}(${o})`,I=(0,e._)`(typeof ${S} == "function" ? ${A} : ${S}.test(${o}))`;return(0,e._)`${S} && ${S} !== true && ${x} === ${i} && !${I}`}}function y(){const v=p.formats[u];if(!v){E();return}if(v===!0)return;const[w,x,S]=T(v);w===i&&r.pass(A());function E(){if(d.strictSchema===!1){p.logger.warn(I());return}throw new Error(I());function I(){return`unknown format "${u}" ignored in schema at path "${f}"`}}function T(I){const k=I instanceof RegExp?(0,e.regexpCode)(I):d.code.formats?(0,e._)`${d.code.formats}${(0,e.getProperty)(u)}`:void 0,D=s.scopeValue("formats",{key:u,ref:I,code:k});return typeof I=="object"&&!(I instanceof RegExp)?[I.type||"string",I.validate,(0,e._)`${D}.validate`]:["string",I,D]}function A(){if(typeof v=="object"&&!(v instanceof RegExp)&&v.async){if(!h.$async)throw new Error("async format in sync schema");return(0,e._)`await ${S}(${o})`}return typeof x=="function"?(0,e._)`${S}(${o})`:(0,e._)`${S}.test(${o})`}}}};return ON.default=n,ON}var wce;function gut(){if(wce)return NN;wce=1,Object.defineProperty(NN,"__esModule",{value:!0});const t=[mut().default];return NN.default=t,NN}var Qv={},xce;function yut(){return xce||(xce=1,Object.defineProperty(Qv,"__esModule",{value:!0}),Qv.contentVocabulary=Qv.metadataVocabulary=void 0,Qv.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],Qv.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),Qv}var Ece;function vut(){if(Ece)return nN;Ece=1,Object.defineProperty(nN,"__esModule",{value:!0});const e=Uat(),t=eut(),n=put(),r=gut(),i=yut(),s=[e.default,t.default,(0,n.default)(),r.default,i.metadataVocabulary,i.contentVocabulary];return nN.default=s,nN}var DN={},WT={},Sce;function but(){if(Sce)return WT;Sce=1,Object.defineProperty(WT,"__esModule",{value:!0}),WT.DiscrError=void 0;var e;return function(t){t.Tag="tag",t.Mapping="mapping"}(e||(WT.DiscrError=e={})),WT}var Tce;function _ut(){if(Tce)return DN;Tce=1,Object.defineProperty(DN,"__esModule",{value:!0});const e=wr(),t=but(),n=wK(),r=DF(),i=ti(),o={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:a,tagName:u}})=>a===t.DiscrError.Tag?`tag "${u}" must be string`:`value of tag "${u}" must be in oneOf`,params:({params:{discrError:a,tag:u,tagName:l}})=>(0,e._)`{error: ${a}, tag: ${l}, tagValue: ${u}}`},code(a){const{gen:u,data:l,schema:c,parentSchema:d,it:f}=a,{oneOf:h}=d;if(!f.opts.discriminator)throw new Error("discriminator: requires discriminator option");const p=c.propertyName;if(typeof p!="string")throw new Error("discriminator: requires propertyName");if(c.mapping)throw new Error("discriminator: mapping is not supported");if(!h)throw new Error("discriminator: requires oneOf keyword");const m=u.let("valid",!1),y=u.const("tag",(0,e._)`${l}${(0,e.getProperty)(p)}`);u.if((0,e._)`typeof ${y} == "string"`,()=>v(),()=>a.error(!1,{discrError:t.DiscrError.Tag,tag:y,tagName:p})),a.ok(m);function v(){const S=x();u.if(!1);for(const E in S)u.elseIf((0,e._)`${y} === ${E}`),u.assign(m,w(S[E]));u.else(),a.error(!1,{discrError:t.DiscrError.Mapping,tag:y,tagName:p}),u.endIf()}function w(S){const E=u.name("valid"),T=a.subschema({keyword:"oneOf",schemaProp:S},E);return a.mergeEvaluated(T,e.Name),E}function x(){var S;const E={},T=I(d);let A=!0;for(let M=0;M<h.length;M++){let z=h[M];if(z!=null&&z.$ref&&!(0,i.schemaHasRulesButRef)(z,f.self.RULES)){const $=z.$ref;if(z=n.resolveRef.call(f.self,f.schemaEnv.root,f.baseId,$),z instanceof n.SchemaEnv&&(z=z.schema),z===void 0)throw new r.default(f.opts.uriResolver,f.baseId,$)}const O=(S=z==null?void 0:z.properties)===null||S===void 0?void 0:S[p];if(typeof O!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${p}"`);A=A&&(T||I(z)),k(O,M)}if(!A)throw new Error(`discriminator: "${p}" must be required`);return E;function I({required:M}){return Array.isArray(M)&&M.includes(p)}function k(M,z){if(M.const)D(M.const,z);else if(M.enum)for(const O of M.enum)D(O,z);else throw new Error(`discriminator: "properties/${p}" must have "const" or "enum"`)}function D(M,z){if(typeof M!="string"||M in E)throw new Error(`discriminator: "${p}" values must be unique strings`);E[M]=z}}}};return DN.default=o,DN}const wut="http://json-schema.org/draft-07/schema#",xut="http://json-schema.org/draft-07/schema#",Eut="Core schema meta-schema",Sut={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Tut=["object","boolean"],Cut={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Aut={$schema:wut,$id:xut,title:Eut,definitions:Sut,type:Tut,properties:Cut,default:!0};var Cce;function Iut(){return Cce||(Cce=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=jat(),r=vut(),i=_ut(),s=Aut,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=OF();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=wr();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var d=_K();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return d.default}});var f=DF();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return f.default}})}(QP,QP.exports)),QP.exports}var Rut=Iut();const LEe=su(Rut),kut="#/definitions/StudyConfig",Put="http://json-schema.org/draft-07/schema#",Nut=JSON.parse('{"Answer":{"additionalProperties":false,"description":"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.\\n\\nAnswers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.\\n\\nHere\'s an example of how to use the Answer interface to define the correct answer to a question:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/question.md\\", \\"response\\": [  {    \\"id\\": \\"response1\\",    \\"prompt\\": \\"What is 2 + 2?\\",    \\"required\\": true,    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"numerical\\"  } ] \\"correctAnswer\\": [{  \\"id\\": \\"response1\\",  \\"answer\\": 4 }] } ```\\n\\nIn this example, the correct answer to the question \\"What is 2 + 2?\\" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.","properties":{"acceptableHigh":{"description":"The acceptable high value for the answer. This is used to define a range of acceptable answers.","type":"number"},"acceptableLow":{"description":"The acceptable low value for the answer. This is used to define a range of acceptable answers.","type":"number"},"answer":{"description":"The correct answer to the question."},"id":{"description":"The id of the answer. This is used to identify the answer in the data file.","type":"string"}},"required":["id","answer"],"type":"object"},"BaseComponents":{"additionalProperties":{"additionalProperties":false,"properties":{"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"type":{"enum":["markdown","react-component","image","website","questionnaire"],"type":"string"}},"type":"object"},"description":"The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\\n\\n Using baseComponents:\\n\\n```js \\"baseComponents\\": { \\"my-image-component\\": { \\"instructionLocation\\": \\"sidebar\\", \\"nextButtonLocation\\": \\"sidebar\\", \\"path\\": \\"<study-name>/assets/my-image.jpg\\", \\"response\\": [   {     \\"id\\": \\"my-image-id\\",     \\"options\\": [       {         \\"label\\": \\"Europe\\",         \\"value\\": \\"Europe\\"       },       {         \\"label\\": \\"Japan\\",         \\"value\\": \\"Japan\\"       },       {         \\"label\\": \\"USA\\",         \\"value\\": \\"USA\\"       }     ],     \\"prompt\\": \\"Your Selected Answer:\\",     \\"type\\": \\"dropdown\\"   } ], \\"type\\": \\"image\\" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `\\"baseComponent\\":\\"my-image-component\\"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js \\"components\\": { \\"q1\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with largest GDP\\", \\"instruction\\": \\"Which region has the largest GDP?\\" }, \\"q2\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with lowest GDP\\", \\"instruction\\": \\"Which region has the lowest GDP?\\" }, \\"q3\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with highest exports of Wheat\\", \\"instruction\\": \\"Which region had the most Wheat exported in 2022?\\" } } ```","type":"object"},"CheckboxResponse":{"additionalProperties":false,"description":"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\\n\\n```js { \\"id\\": \\"q7\\", \\"prompt\\": \\"Checkbox example (not required)\\", \\"required\\": false, \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"checkbox\\", \\"options\\": [  {    \\"label\\": \\"Option 1\\",    \\"value\\": \\"opt-1\\"  },  {    \\"label\\": \\"Option 2\\",    \\"value\\": \\"opt-2\\"  },  {    \\"label\\": \\"Option 3\\",    \\"value\\": \\"opt-3\\"  } ] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"$ref":"#/definitions/StringOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"checkbox","type":"string"}},"required":["id","options","prompt","required","type"],"type":"object"},"ComponentBlock":{"additionalProperties":false,"description":"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\\n\\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\\n\\nHere\'s a snippet that shows how to use the random order:\\n\\n```js { \\"order\\": \\"random\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\\n\\n```js [ [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component1\\", \\"component3\\", \\"component2\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], ... ] ```\\n\\nIn addition to the order property, the ComponentBlock interface also includes the `\\"numSamples\\"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `\\"numSamples\\"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ], \\"numSamples\\": 2 } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\"], [\\"component2\\", \\"component3\\"], [\\"component3\\", \\"component1\\"], ... ] ```\\n\\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\\n\\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.","properties":{"components":{"description":"The components that are included in the order.","items":{"anyOf":[{"type":"string"},{"$ref":"#/definitions/ComponentBlock"}]},"type":"array"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"interruptions":{"description":"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.","items":{"$ref":"#/definitions/InterruptionBlock"},"type":"array"},"numSamples":{"description":"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.","type":"number"},"order":{"description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","enum":["random","latinSquare","fixed"],"type":"string"},"skip":{"$ref":"#/definitions/SkipConditions","description":"The skip conditions for the block."}},"required":["order","components"],"type":"object"},"ComponentBlockCondition":{"additionalProperties":false,"description":"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.\\n\\nAnswers are checked against the correct answers defined in the IndividualComponent\'s [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.\\n\\nYou might use this if a participant answers two questions in a block incorrectly. Here\'s an example of how to use the ComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"check\\": \\"block\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.\\n\\nWhen the condition is met, the participant will immediately be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"block","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["check","condition","value","to"],"type":"object"},"DeterministicInterruption":{"additionalProperties":false,"description":"The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.\\n\\nFor example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.\\n\\nThe components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the DeterministicInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"firstLocation\\": 2,   \\"spacing\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"firstLocation":{"description":"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).","type":"number"},"spacing":{"description":"The number of components between breaks.","type":"number"}},"required":["firstLocation","spacing","components"],"type":"object"},"DropdownResponse":{"additionalProperties":false,"description":"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\\n\\nExample: ```js { \\"id\\": \\"q-color\\", \\"prompt\\": \\"What is your favorite color?\\", \\"required\\": true, \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"dropdown\\", \\"placeholder\\": \\"Please choose your favorite color\\", \\"options\\": [  {    \\"label\\": \\"Red\\",    \\"value\\": \\"red\\"  },  {    \\"label\\": \\"Blue\\",    \\"value\\": \\"blue\\"  } ] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed in the dropdown.","items":{"$ref":"#/definitions/StringOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"dropdown","type":"string"}},"required":["id","options","prompt","required","type"],"type":"object"},"IFrameResponse":{"additionalProperties":false,"description":"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"iframe","type":"string"}},"required":["id","prompt","required","type"],"type":"object"},"ImageComponent":{"additionalProperties":false,"description":"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\\n\\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { \\"type\\": \\"image\\", \\"path\\": \\"<study-name>/assets/image.jpg\\", \\"style\\": { \\"maxWidth\\": \\"50%\\" } } ```","properties":{"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"type":{"const":"image","type":"string"}},"required":["path","response","type"],"type":"object"},"IndividualComponent":{"anyOf":[{"$ref":"#/definitions/MarkdownComponent"},{"$ref":"#/definitions/ReactComponent"},{"$ref":"#/definitions/ImageComponent"},{"$ref":"#/definitions/WebsiteComponent"},{"$ref":"#/definitions/QuestionnaireComponent"}]},"IndividualComponentAllResponsesCondition":{"additionalProperties":false,"description":"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\n\\nHere\'s an example of how to use the IndividualComponentAllResponsesCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"responses\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, if all responses to the component with the ID \\"attentionCheck\\" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"responses","description":"The check we\'ll perform.","type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"}},"required":["name","check","to"],"type":"object"},"IndividualComponentSingleResponseCondition":{"additionalProperties":false,"description":"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\nFor example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here\'s an example of how to use the IndividualComponentSingleResponseCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"response\\",   \\"responseId\\": \\"attentionCheckResponse\\",   \\"value\\": \\"the right answer\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, we assign our skip logic to the component whose ID is \\"attentionCheck\\". If the answer given to the response \\"attentionCheckResponse\\" is equal to \\"the right answer\\", then the user will be redirected to the end of the study. If the response is _not_ equal to \\"the right answer\\", then the participant will continue to the next component in the sequence.","properties":{"check":{"const":"response","description":"The check we\'ll perform.","type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"responseId":{"description":"The response id to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The value to check.","type":["string","number"]}},"required":["name","check","responseId","value","to"],"type":"object"},"InheritedComponent":{"additionalProperties":false,"description":"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).","properties":{"baseComponent":{"type":"string"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"type":{"enum":["markdown","react-component","image","website","questionnaire"],"type":"string"}},"required":["baseComponent"],"type":"object"},"InterruptionBlock":{"anyOf":[{"$ref":"#/definitions/DeterministicInterruption"},{"$ref":"#/definitions/RandomInterruption"}],"description":"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},"LikertResponse":{"additionalProperties":false,"description":"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as \'Strongly Disagree\' and \'Strongly Agree\'.\\n\\nExample for a five-point Likert Scale:\\n\\n```js { \\"id\\": \\"q-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).\\", \\"required\\": true, \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"likert\\", \\"leftLabel\\": \\"Not Enjoyable\\", \\"rightLabel\\": \\"Very Enjoyable\\", \\"numItems\\": 5 } ```","properties":{"desc":{"description":"The description of the likert scale.","type":"string"},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the likert scale. E.g Strongly Disagree","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of options to render.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the likert scale. E.g Strongly Agree","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"likert","type":"string"}},"required":["id","numItems","prompt","required","type"],"type":"object"},"LongTextResponse":{"additionalProperties":false,"description":"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { \\"id\\": \\"q-name\\", \\"prompt\\": \\"What is your first name?\\", \\"required\\": true, \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"longText\\", \\"placeholder\\": \\"Please enter your first name\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"longText","type":"string"}},"required":["id","prompt","required","type"],"type":"object"},"MarkdownComponent":{"additionalProperties":false,"description":"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/help.md\\", \\"response\\": [] } ```","properties":{"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"type":{"const":"markdown","type":"string"}},"required":["path","response","type"],"type":"object"},"NumberOption":{"additionalProperties":false,"description":"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"number"}},"required":["label","value"],"type":"object"},"NumericalResponse":{"additionalProperties":false,"description":"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\\n\\nExample: ```js { \\"id\\": \\"q-numerical\\", \\"prompt\\": \\"Numerical example\\", \\"required\\": true, \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"numerical\\", \\"placeholder\\": \\"Enter your age, range from 0 - 120\\", \\"max\\": 120, \\"min\\": 0 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"max":{"description":"The maximum value that is accepted in the input.","type":"number"},"min":{"description":"The minimum value that is accepted in the input.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"numerical","type":"string"}},"required":["id","prompt","required","type"],"type":"object"},"QuestionnaireComponent":{"additionalProperties":false,"description":"A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\\n\\n```js { \\"type\\": \\"questionnaire\\", \\"response\\": [  {    \\"id\\": \\"gender\\",    \\"prompt\\": \\"Gender:\\",    \\"required\\": true,    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"checkbox\\",    \\"options\\": [      {        \\"label\\": \\"Man\\",        \\"value\\": \\"Man\\"      },      {        \\"label\\": \\"Woman\\",        \\"value\\": \\"Woman\\"      },      {        \\"label\\": \\"Genderqueer\\",        \\"value\\": \\"Genderqueer\\"      },      {        \\"label\\": \\"Third-gender\\",        \\"value\\": \\"Third-gender\\"      },      ... etc.    ]  } ] } ```","properties":{"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"type":{"const":"questionnaire","type":"string"}},"required":["response","type"],"type":"object"},"RadioResponse":{"additionalProperties":false,"description":"The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\\n\\nExample: ```js { \\"id\\": \\"q-radio\\", \\"prompt\\": \\"Radio button example\\", \\"required\\": true, \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"radio\\", \\"options\\": [  {    \\"label\\": \\"Option 1\\",    \\"value\\": \\"opt-1\\"  },  {    \\"label\\": \\"Option 2\\",    \\"value\\": \\"opt-2\\"  } ] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the radio group. Used in Likert scales for example","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"$ref":"#/definitions/StringOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the radio group. Used in Likert scales for example","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"radio","type":"string"}},"required":["id","options","prompt","required","type"],"type":"object"},"RandomInterruption":{"additionalProperties":false,"description":"The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\\n\\nFor example, if you want to show a single interruption randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 1. If you want to show 3 interruptions randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 3.\\n\\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the RandomInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"spacing\\": \\"random\\",   \\"numInterruptions\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"interruption1\\", \\"interruption2\\", \\"component5\\", \\"component6], [\\"component1\\", \\"component2\\" \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"interruption1\\", \\"interruption2\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"numInterruptions":{"description":"The number of times the interruption will be randomly added","type":"number"},"spacing":{"const":"random","description":"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.","type":"string"}},"required":["spacing","numInterruptions","components"],"type":"object"},"ReactComponent":{"additionalProperties":false,"description":"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\\n\\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\\n\\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\\n\\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\\n\\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don\'t use the default answer interface, and instead have something more unique.\\n\\nSo, for example, if I had the following ReactComponent in my config ```js { type: \'react-component\'; path: \'my_study/CoolComponent.tsx\'; parameters: {  name: \'Zach\';  age: 26; } } ```\\n\\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\\n\\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\\n\\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.0/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.0/src/public/demo-brush-interactions/assets)","properties":{"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},"path":{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"type":{"const":"react-component","type":"string"}},"required":["path","response","type"],"type":"object"},"RepeatedComponentBlockCondition":{"additionalProperties":false,"description":"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.\\n\\nHere\'s an example of how to use the RepeatedComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"repeatedComponent\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of incorrect responses to the repeated component with the name \\"attentionCheck\\" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"repeatedComponent","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"name":{"description":"The name of the repeated component to check (e.g. attentionCheck).","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["name","check","condition","value","to"],"type":"object"},"Response":{"anyOf":[{"$ref":"#/definitions/NumericalResponse"},{"$ref":"#/definitions/ShortTextResponse"},{"$ref":"#/definitions/LongTextResponse"},{"$ref":"#/definitions/LikertResponse"},{"$ref":"#/definitions/DropdownResponse"},{"$ref":"#/definitions/SliderResponse"},{"$ref":"#/definitions/RadioResponse"},{"$ref":"#/definitions/CheckboxResponse"},{"$ref":"#/definitions/IFrameResponse"}]},"ResponseBlockLocation":{"enum":["sidebar","aboveStimulus","belowStimulus"],"type":"string"},"ShortTextResponse":{"additionalProperties":false,"description":"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\\n\\n```js { \\"id\\": \\"q-short-text\\", \\"prompt\\": \\"Short text example\\", \\"required\\": true, \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"shortText\\", \\"placeholder\\": \\"Enter your answer here\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"shortText","type":"string"}},"required":["id","prompt","required","type"],"type":"object"},"SkipConditions":{"description":"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks\' skip conditions will be considered when computing the skip logic.\\n\\nSkip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.\\n\\nSkip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.\\n\\nPlease see the interface definitions for more specific information on the different types of skip conditions.","items":{"anyOf":[{"$ref":"#/definitions/IndividualComponentSingleResponseCondition"},{"$ref":"#/definitions/IndividualComponentAllResponsesCondition"},{"$ref":"#/definitions/ComponentBlockCondition"},{"$ref":"#/definitions/RepeatedComponentBlockCondition"}]},"type":"array"},"SliderResponse":{"additionalProperties":false,"description":"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\\n\\nExample: ```js { \\"id\\": \\"q-slider\\", \\"prompt\\": \\"How are you feeling?\\", \\"location\\": \\"aboveStimulus\\", \\"required\\": true, \\"type\\": \\"slider\\", \\"options\\": [  {    \\"label\\": \\"Bad\\",    \\"value\\": 0  },  {    \\"label\\": \\"OK\\",    \\"value\\": 50  },  {    \\"label\\": \\"Good\\",    \\"value\\": 100  } ] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.","items":{"$ref":"#/definitions/NumberOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"slider","type":"string"}},"required":["id","options","prompt","required","type"],"type":"object"},"StringOption":{"additionalProperties":false,"description":"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"string"}},"required":["label","value"],"type":"object"},"StudyConfig":{"additionalProperties":false,"description":"The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\\n\\n```js { \\"$schema\\": \\"https://raw.githubusercontent.com/revisit-studies/study/v1.0.0/src/parser/StudyConfigSchema.json\\", \\"studyMetadata\\": {  ... }, \\"uiConfig\\": {  ... }, \\"components\\": {  ... }, \\"sequence\\": {  ... } } ```\\n\\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\\n\\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.","properties":{"$schema":{"description":"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information","type":"string"},"baseComponents":{"$ref":"#/definitions/BaseComponents","description":"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},"components":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/IndividualComponent"},{"$ref":"#/definitions/InheritedComponent"}]},"description":"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.","type":"object"},"recordStudyAudio":{"type":"boolean"},"sequence":{"$ref":"#/definitions/ComponentBlock","description":"The order of the components in the study. This might include some randomness."},"studyMetadata":{"$ref":"#/definitions/StudyMetadata","description":"The metadata for the study. This is used to identify the study and version in the data file."},"tasksToNotRecordAudio":{"items":{"type":"string"},"type":"array"},"uiConfig":{"$ref":"#/definitions/UIConfig","description":"The UI configuration for the study. This is used to configure the UI of the app."}},"required":["$schema","studyMetadata","uiConfig","components","sequence"],"type":"object"},"StudyMetadata":{"additionalProperties":false,"description":"The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\\n\\n```js \\"studyMetadata\\" : { \\"title\\": \\"My New Study\\", \\"version\\": \\"pilot\\", \\"authors\\": [  \\"Jane Doe\\",  \\"John Doe\\" ], \\"date\\": \\"2024-04-01\\", \\"description\\": \\"This study is meant to test your ability.\\", \\"organizations\\": [  \\"The reVISit Team\\",  \\"The Other Team\\" ] } ```","properties":{"authors":{"description":"The authors of your study.","items":{"type":"string"},"type":"array"},"date":{"description":"The date of your study, may be useful for the researcher.","type":"string"},"description":{"description":"The description of your study, shown on the landing page.","type":"string"},"organizations":{"description":"The organizations that are associated with your study.","items":{"type":"string"},"type":"array"},"title":{"description":"The title of your study, shown on the landing page.","type":"string"},"version":{"description":"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.","type":"string"}},"required":["title","version","authors","date","description","organizations"],"type":"object"},"UIConfig":{"additionalProperties":false,"description":"The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ \\"contactEmail\\": \\"contact@revisit.dev\\", \\"helpTextPath\\": \\"<study-name>/assets/help.md\\", \\"logoPath\\": \\"<study-name>/assets/logo.jpg\\", \\"withProgressBar\\": true, \\"autoDownloadStudy\\": true \\"autoDownloadTime\\": 5000, \\"studyEndMsg\\": \\"Thank you for completing this study. You\'re the best!\\", \\"sidebar\\": true, \\"windowEventDebounceTime\\": 500, \\"urlParticipantIdParam\\": \\"PROLIFIC_ID\\", \\"numSequences\\": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)","properties":{"autoDownloadStudy":{"description":"Controls whether the study data is automatically downloaded at the end of the study.","type":"boolean"},"autoDownloadTime":{"description":"The time in milliseconds to wait before automatically downloading the study data.","type":"number"},"contactEmail":{"description":"The email address that used during the study if a participant clicks contact.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.","type":"string"},"logoPath":{"description":"The path to the logo image. This is displayed on the landing page and the header.","type":"string"},"numSequences":{"description":"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.","type":"number"},"sidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. Defaults to 300.","type":"number"},"studyEndMsg":{"description":"The message to display when the study ends.","type":"string"},"urlParticipantIdParam":{"description":"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered in the study.","type":"boolean"}},"required":["contactEmail","logoPath","withProgressBar","sidebar"],"type":"object"},"WebsiteComponent":{"additionalProperties":false,"description":"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/assets/website.html\\", } ```\\n\\nTo pass a data from the config to the website, you can use the `parameters` field as below:\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/website.html\\", \\"parameters\\": {  \\"barData\\": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } \\"response\\": [  {    \\"id\\": \\"barChart\\",    \\"prompt\\": \\"Your selected answer:\\",    \\"required\\": true,    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"iframe\\"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\\n\\n```html <script src=\\"../../revisitUtilities/revisit-communicate.js\\"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\\n\\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\\n\\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\\n\\n```js const trrack = initializeTrrack({ initialState, registry });\\n\\n... Revisit.postProvenance(trrack.graph.backend); ```","properties":{"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"},"path":{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"type":{"const":"website","type":"string"}},"required":["path","response","type"],"type":"object"}}'),Out={$ref:kut,$schema:Put,definitions:Nut},Dut="#/definitions/GlobalConfig",Mut="http://json-schema.org/draft-07/schema#",$ut={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},Lut={$ref:Dut,$schema:Mut,definitions:$ut},FEe=new LEe;FEe.addSchema(Lut);const Ace=FEe.getSchema("#/definitions/GlobalConfig"),jEe=new LEe;jEe.addSchema(Out);const FB=jEe.getSchema("#/definitions/StudyConfig");function Fut(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function MF(e){return e.baseComponent!==void 0}function jut(e){const t=vK.parse(e),n=Ace(t),r=Fut(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Ace.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function BEe(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):BEe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function But(e){const t=[],n=[];Object.entries(e.components).forEach(([s,o])=>{var a;MF(o)&&!((a=e.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const r=AEe(e.sequence);r.forEach(s=>{var o;e.components[s]||t.push({message:(o=e.baseComponents)!=null&&o[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!r.includes(s)).forEach(s=>{n.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const i=[];return BEe(e.sequence,i),i.forEach(s=>{t.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:t,warnings:n}}function zut(e){let t=!1,n;try{n=vK.parse(e),t=FB(n)}catch{t=!1}let r=[],i=[];if(t){const{errors:s,warnings:o}=But(n);r=[...FB.errors||[],...s],i=o}else r=FB.errors||[{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}function zEe(){const e=$p(),{setAlertModal:t}=Rl(),n=Tc();P.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var Ice=Object.prototype.hasOwnProperty;function Rce(e,t,n){for(n of e.keys())if(FA(n,t))return n}function FA(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&FA(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=Rce(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=Rce(t,i),!i)||!FA(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Ice.call(e,n)&&++r&&!Ice.call(t,n)||!(n in t)||!FA(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function Uut(e){var t=P.useRef(e),n=P.useRef(0);return FA(e,t.current)||(t.current=e,n.current+=1),P.useMemo(function(){return t.current},[n.current])}function Vut(e,t){return P.useEffect(e,Uut(t))}const bf=(e,t=null)=>{const[n,r]=P.useState("idle"),[i,s]=P.useState(null),[o,a]=P.useState(null),u=P.useRef(),l=P.useRef(!1);P.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=P.useCallback((...d)=>{r("pending"),a(null);const f=Promise.resolve(e(...d)).then(h=>(l.current&&f===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&f===u.current&&(s(null),a(h),r("error")),h});return u.current=f,f},[e]);return Vut(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}},kce=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta","configHash"],UEe=["participantId","trialId","trialOrder","responseId"];function EK(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function Hut(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==void 0).length/(pc(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=MF(u)&&u.baseComponent&&n.baseComponents?pK({},n.baseComponents[u.baseComponent],u):u,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([f,h])=>{var y,v;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:f},m=l.response.find(w=>w.id===f);if(t.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("configHash")&&(p.configHash=e.participantConfigHash),t.includes("percentComplete")&&(p.percentComplete=r),t.includes("description")&&(p.description=l.description),t.includes("instruction")&&(p.instruction=l.instruction),t.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),t.includes("answer")&&(p.answer=h),t.includes("correctAnswer")){const w=(v=(y=l.correctAnswer)==null?void 0:y.find(x=>x.id===f))==null?void 0:v.answer;p.correctAnswer=typeof w=="object"?JSON.stringify(w):w}return t.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),t.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),t.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(p.duration=c),t.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()}async function qut(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...UEe,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await Hut(c,i,o[c.participantConfigHash])))).flat().sort((c,d)=>c!==d?c.participantId.localeCompare(d.participantId):c.trialOrder-d.trialOrder);return{header:a,rows:l}}function Wut({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=P.useState([...kce].filter(h=>h!=="meta")),a=Zi(),{value:u,status:l,error:c}=bf(qut,[s,r,a.storageEngine,i]),d=P.useCallback(()=>{if(!u)return;const h=[u.header.join(","),...u.rows.map(p=>u.header.map(m=>p[m]).join(","))].join(`
`);EK(h,n)},[n,u]),f=P.useMemo(()=>{if(!u)return"";const h=u.rows.length>5?5:u.rows.length,p=h===1?"":"s";return`This is a preview of the first ${p?h:""} row${p} of the CSV. The full CSV contains ${u.rows.length} row${p}.`},[u]);return _.jsxs(zs,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[_.jsx(JL,{searchable:!0,nothingFoundMessage:"Property not found",data:[...kce],value:s,onChange:h=>o(h),label:"Included optional columns:",leftSection:_.jsx(kXe,{}),variant:"filled"}),_.jsx(vd,{h:"md"}),_.jsxs(ke,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?_.jsxs(_o,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[_.jsx(_o.Thead,{children:_.jsx(_o.Tr,{children:u.header.map(h=>_.jsx(_o.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(h)?200:void 0},children:_.jsxs(Gt,{direction:"row",justify:"space-between",align:"center",children:[h,!UEe.includes(h)&&_.jsx(mr,{onClick:()=>o(s.filter(p=>p!==h)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:_.jsx(jY,{size:16})})]})},h))})}),_.jsx(_o.Tbody,{children:u.rows.slice(0,5).map((h,p)=>_.jsx(_o.Tr,{children:u.header.map(m=>_.jsx(_o.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(m)?"normal":"nowrap"},children:h[m]},`${p}-${m}`))},p))})]}):l==="error"&&c?_.jsx(iS,{variant:"light",children:c.message}):null,_.jsx(xc,{visible:l==="pending"||l==="idle"})]}),_.jsx(vd,{h:"sm"}),_.jsx(Gt,{justify:"center",fz:"sm",c:"dimmed",children:_.jsx(dt,{children:f})}),_.jsx(vd,{h:"md"}),_.jsxs(gr,{justify:"right",children:[_.jsx(Zn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),_.jsx(Zn,{leftSection:_.jsx(Ewe,{}),onClick:()=>d(),"data-autofocus":!0,children:"Download"})]})]})}function VEe(){const e=jf(),{storageEngine:t}=Zi(),{answers:n}=Ea(w=>w),[r,i]=P.useState(!1);P.useEffect(()=>{const w=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(w))},1e3)},[]),zEe();const[s,o]=P.useState(),[a,u]=P.useState(""),l=e.studyMetadata.title.replace(" ","_");P.useEffect(()=>{async function w(){if(t){const x=await t.getCurrentParticipantId(),S=await t.getParticipantData();u(x),o(S)}}w()},[t]);const c=P.useCallback(async()=>{EK(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),d=e.uiConfig.autoDownloadStudy||!1,f=d&&e.uiConfig.autoDownloadTime||-1,[h,p]=P.useState(Math.floor(f/1e3));P.useEffect(()=>{if(r){const w=setInterval(()=>{p(x=>x-1)},1e3);return h<=0?(d&&c(),clearInterval(w),()=>clearInterval(w)):()=>clearInterval(w)}return()=>{}},[d,r,h,c]);const m=e_(),[y,v]=P.useState(!1);return P.useEffect(()=>{(async()=>{if(t){const x=await t.getModes(m);v(x.dataCollectionEnabled)}})()},[t,m]),_.jsx(Il,{style:{height:"100%"},children:_.jsx(Gt,{direction:"column",children:r||!y?_.jsx(dt,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?_.jsx(Ou,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):_.jsxs(_.Fragment,{children:[_.jsx(dt,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),_.jsx(vd,{h:"lg"}),_.jsx(Il,{children:_.jsx(io,{color:"blue"})})]})})})}function mc(e){return structuredClone(e)}const HEe=P.createContext(null);function Gut(){const e=P.useContext(HEe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function Pce(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function Yut(){const e=$p(),t=hK(),r=`${nh()}_${e}`,{trialValidation:i,sequence:s,answers:o}=Ea(T=>T),a=Tc(),{saveTrialAnswer:u,setIframeAnswers:l}=Rl(),{storageEngine:c}=Zi(),d=e_(),[f,h]=P.useState(!0);P.useEffect(()=>{(async()=>{if(c){const A=await c.getModes(d);h(A.dataCollectionEnabled)}})()},[c,d]);const p=cat(r),m=typeof e!="number"||!p,y=gK(),v=Mc(),w=jf(),x=P.useMemo(()=>Date.now(),[]),S=Gut(),E=P.useCallback(()=>{if(typeof e!="number")return;const T=mc(i[r]),A=Object.values(T).reduce((F,B)=>Object.hasOwn(B,"values")?{...F,...B.values}:F,{}),{provenanceGraph:I}=T,k=Date.now(),D=S&&"current"in S&&S.current?S.current.splice(0,S.current.length):[];f&&!y.endTime&&(a(u({identifier:r,answer:A,startTime:x,endTime:k,provenanceGraph:I,windowEvents:D})),c&&c.saveAnswers({...o,[r]:{answer:A,startTime:x,endTime:k,provenanceGraph:I,windowEvents:D}}),a(l({})));let M=e+1;const z=aat(s,e),O=z!==null&&z.some(F=>Object.hasOwn(F.currentBlock,"skip")&&F.currentBlock.skip!==void 0),$={...o,[r]:{answer:A,startTime:x,endTime:k,provenanceGraph:I,windowEvents:D}};O&&[...z.flatMap(B=>B.currentBlock.skip?B.currentBlock.skip.map(q=>({...q,firstIndex:B.firstIndex,lastIndex:B.lastIndex})):[])].some(B=>{let q=!1;const G=Object.fromEntries(Object.entries($).filter(([L])=>{const V=parseInt(L.slice(L.lastIndexOf("_")+1),10);return V>=B.firstIndex&&V<=e})),K=B.check!=="block"?Object.entries(G).filter(([L])=>L.slice(0,L.lastIndexOf("_"))===B.name):Object.entries(G);if(K.length===0)return!1;if(K.some(([L,V])=>!V))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(B,null,2)}`);if(B.check==="response"||B.check==="responses"){const[L,V]=K[0];B.check==="response"?q=B.value!==V.answer[B.responseId]:q=!Pce(V.answer,L,w.components[L.slice(0,L.lastIndexOf("_"))],w)}else if(B.check==="block"||B.check==="repeatedComponent"){if(K.length<B.value)return!1;const L=K.map(([H,Q])=>Pce(Q.answer,H,w.components[H.slice(0,H.lastIndexOf("_"))],w)),V=L.filter(H=>H).length,X=L.length-V;q=B.condition==="numCorrect"&&V===B.value||B.condition==="numIncorrect"&&X===B.value}if(q){const L=t.indexOf(B.to),V=L===-1?uat(s,B.to):-1;return M=L===-1?V:L,!0}return!1}),v(`/${d}/${M}${window.location.search}`)},[i,r,S,y,e,s,o,x,v,d,a,u,c,l,w,t]);return{isNextDisabled:m,goToNextStep:E}}function Kut({label:e="Next",disabled:t=!1,setCheckClicked:n=()=>null,onClick:r}){const{isNextDisabled:i,goToNextStep:s}=Yut(),o=P.useCallback(()=>{n(!1),r&&r(),s()},[s,r,n]);return _.jsx(Zn,{type:"submit",disabled:t||i,onClick:o,children:e})}function Xut(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const Qut=typeof window<"u"?P.useLayoutEffect:P.useEffect;function oa(e,t){Qut(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function Jut(e,t){e&&Xut(e),oa(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),oa(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),oa(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),oa(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),oa(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),oa(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),oa(`mantine-form:${e}:clear-errors`,t.clearErrors),oa(`mantine-form:${e}:reset`,t.reset),oa(`mantine-form:${e}:validate`,t.validate),oa(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),oa(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),oa(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),oa(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),oa(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),oa(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),oa(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),oa(`mantine-form:${e}:reset-touched`,t.resetTouched)}function Zut(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function P7(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function elt(e){const[t,n]=P.useState(P7(e)),r=P.useRef(t),i=P.useCallback(u=>{n(l=>{const c=P7(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=P.useCallback(()=>i({}),[]),o=P.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=P.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function qEe(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function Nce(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Oce(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=qEe(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=Nce(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=Nce(u,i),d=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[d]=l,a.add(d),a.has(u)||delete o[u]}),o}function tlt(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],d=o[l];return d===void 0?delete o[u]:o[u]=d,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Dce(e,t,n){typeof n.value=="object"&&(n.value=Jw(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function Jw(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(Jw(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(Jw(a),Jw(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(Jw(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Dce(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Dce(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function WEe(e){return typeof e!="string"?[]:e.split(".")}function gl(e,t){const n=WEe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function $F(e,t,n){const r=WEe(e);if(r.length===0)return n;const i=Jw(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function nlt(e,{from:t,to:n},r){const i=gl(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),$F(e,s,r)}function rlt(e,t,n,r){const i=gl(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),$F(e,s,r)}function ilt(e,t,n){const r=gl(e,n);return Array.isArray(r)?$F(e,r.filter((i,s)=>s!==t),n):n}function slt({$values:e,$errors:t,$status:n}){const r=P.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>tlt(o,a,u)),e.setValues({values:nlt(o,a,e.refValues.current),updateState:!0})},[]),i=P.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Oce(o,a,u,-1)),e.setValues({values:ilt(o,a,e.refValues.current),updateState:!0})},[]),s=P.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>Oce(o,u,l,1)),e.setValues({values:rlt(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var olt=bK();const uD=su(olt);function MN(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function alt({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=P.useState(t),[o,a]=P.useState(e),u=P.useRef(t),l=P.useRef(e),c=P.useCallback(E=>{const T=typeof E=="function"?E(u.current):E;u.current=T,n==="controlled"&&s(T)},[]),d=P.useCallback(E=>{const T=typeof E=="function"?E(l.current):E;l.current=T,n==="controlled"&&a(T)},[]),f=P.useCallback(()=>c({}),[]),h=E=>{const T=E?{...E,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(T),d({})},p=P.useCallback((E,T)=>{c(A=>MN(A,E)===T?A:{...A,[E]:T})},[]),m=P.useCallback((E,T)=>{d(A=>MN(A,E)===T?A:{...A,[E]:T})},[]),y=P.useCallback(E=>MN(u.current,E),[]),v=P.useCallback(E=>d(T=>{if(typeof E!="string")return T;const A=qEe(E,T);return delete A[E],uD(A,T)?T:A}),[]),w=P.useCallback(E=>{if(E){const A=gl(E,l.current);if(typeof A=="boolean")return A;const I=gl(E,r.refValues.current),k=gl(E,r.valuesSnapshot.current);return!uD(I,k)}return Object.keys(l.current).length>0?MN(l.current):!uD(r.refValues.current,r.valuesSnapshot.current)},[]),x=P.useCallback(()=>l.current,[]),S=P.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:d,resetDirty:h,resetTouched:f,isTouched:y,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:v,isDirty:w,getDirty:x,getTouched:S}}function ult({initialValues:e,onValuesChange:t,mode:n}){const r=P.useRef(!1),[i,s]=P.useState(e||{}),o=P.useRef(i),a=P.useRef(i),u=P.useCallback(({values:p,subscribers:m,updateState:y=!0,mergeWithPreviousValues:v=!0})=>{const w=o.current,x=p instanceof Function?p(o.current):p,S=v?{...w,...x}:x;o.current=S,y&&s(S),t==null||t(S,w),m==null||m.filter(Boolean).forEach(E=>E({updatedValues:S,previousValues:w}))},[t]),l=P.useCallback(p=>{var v;const m=gl(p.path,o.current),y=p.value instanceof Function?p.value(m):p.value;if(m!==y){const w=o.current,x=$F(p.path,y,o.current);u({values:x,updateState:p.updateState}),(v=p.subscribers)==null||v.filter(Boolean).forEach(S=>S({path:p.path,updatedValues:x,previousValues:w}))}},[u]),c=P.useCallback(p=>{a.current=p},[]),d=P.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[u]),f=P.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[u]),h=P.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:f,setValuesSnapshot:c,initialize:d,getValues:h}}function llt({$status:e}){const t=P.useRef({}),n=P.useCallback((i,s)=>{P.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=P.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:gl(i,o.previousValues),value:gl(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Mce(e,t){return e?`${e}-${t.toString()}`:t.toString()}function $ce(e){const t=P7(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function N7(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=gl(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,d)=>N7(o,t,`${a}.${d}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||N7(o,t,a,i)),i},r)}function O7(e,t){return $ce(typeof e=="function"?e(t):N7(e,t))}function $N(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=O7(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const clt="__MANTINE_FORM_INDEX__";function Lce(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${clt}`)):!1:!1}function GEe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:d,validate:f}={}){const h=elt(r),p=ult({initialValues:n,onValuesChange:l,mode:t}),m=alt({initialDirty:i,initialTouched:s,$values:p,mode:t}),y=slt({$values:p,$errors:h,$status:m}),v=llt({$status:m}),[w,x]=P.useState(0),[S,E]=P.useState({}),T=P.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&x(L=>L+1)},[]),A=P.useCallback(L=>{p.initialize(L,()=>t==="uncontrolled"&&x(V=>V+1))},[]),I=P.useCallback((L,V,X)=>{const H=Lce(L,a);m.clearFieldDirty(L),m.setFieldTouched(L,!0),!H&&o&&h.clearFieldError(L),p.setFieldValue({path:L,value:V,updateState:t==="controlled",subscribers:[...v.getFieldSubscribers(L),H?Q=>{const Z=$N(L,f,Q.updatedValues);Z.hasError?h.setFieldError(L,Z.error):h.clearFieldError(L)}:null,(X==null?void 0:X.forceUpdate)!==!1&&t!=="controlled"?()=>E(Q=>({...Q,[L]:(Q[L]||0)+1})):null]})},[l,f]),k=P.useCallback(L=>{const V=p.refValues.current;p.setValues({values:L,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&x(X=>X+1),Object.keys(v.subscribers.current).forEach(X=>{const H=gl(X,p.refValues.current),Q=gl(X,V);H!==Q&&v.getFieldSubscribers(X).forEach(Z=>Z({previousValues:V,updatedValues:p.refValues.current}))})},[l,o]),D=P.useCallback(()=>{const L=O7(f,p.refValues.current);return h.setErrors(L.errors),L},[f]),M=P.useCallback(L=>{const V=$N(L,f,p.refValues.current);return V.hasError?h.setFieldError(L,V.error):h.clearFieldError(L),V},[f]),z=(L,{type:V="input",withError:X=!0,withFocus:H=!0,...Q}={})=>{const ne={onChange:Zut(ue=>I(L,ue,{forceUpdate:!1})),"data-path":Mce(e,L)};return X&&(ne.error=h.errorsState[L]),V==="checkbox"?ne[t==="controlled"?"checked":"defaultChecked"]=gl(L,p.refValues.current):ne[t==="controlled"?"value":"defaultValue"]=gl(L,p.refValues.current),H&&(ne.onFocus=()=>m.setFieldTouched(L,!0),ne.onBlur=()=>{if(Lce(L,u)){const ue=$N(L,f,p.refValues.current);ue.hasError?h.setFieldError(L,ue.error):h.clearFieldError(L)}}),Object.assign(ne,d==null?void 0:d({inputProps:ne,field:L,options:{type:V,withError:X,withFocus:H,...Q},form:K}))},O=(L,V)=>X=>{X==null||X.preventDefault();const H=D();H.hasErrors?V==null||V(H.errors,p.refValues.current,X):L==null||L(c(p.refValues.current),X)},$=L=>c(L||p.refValues.current),F=P.useCallback(L=>{L.preventDefault(),T()},[]),B=P.useCallback(L=>L?!$N(L,f,p.refValues.current).hasError:!O7(f,p.refValues.current).hasErrors,[f]),q=L=>`${w}-${L}-${S[L]||0}`,G=P.useCallback(L=>document.querySelector(`[data-path="${Mce(e,L)}"]`),[]),K={watch:v.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:A,setValues:k,setFieldValue:I,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:y.reorderListItem,insertListItem:y.insertListItem,removeListItem:y.removeListItem,reset:T,validate:D,validateField:M,getInputProps:z,onSubmit:O,onReset:F,isValid:B,getTransformedValues:$,key:q,getInputNode:G};return Jut(e,K),K}function dlt(e,t){const n=t;return r=>typeof r!="string"?n:e.test(r)?null:n}function flt(e){return dlt(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}const hlt=new URLSearchParams(window.location.search),plt=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?hlt.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},mlt=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function glt(e,t,n){const[r,i]=P.useState(null),s=GEe({initialValues:plt(e,n),validate:mlt(e)});return P.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function t_(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function ylt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e;return _.jsx(Lf.Group,{label:_.jsxs(Gt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(ke,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ou,{text:s,required:o})})]}),description:u,...n,error:t_(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(gr,{mt:"xs",children:a.map(l=>_.jsx(Lf,{disabled:t,value:l.value,label:l.label},l.value))})})}function vlt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e;return _.jsx(mp,{disabled:t,label:_.jsxs(Gt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(ke,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ou,{text:o,required:a})})]}),description:l,placeholder:s,data:u,radius:"md",size:"md",...n,error:t_(e,n,u)})}function blt({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return _.jsx(Ti.Wrapper,{label:_.jsxs(Gt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&_.jsx(ke,{style:{minWidth:"fit-content"},children:`${n}. `}),_.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ou,{text:i,required:s})})]}),description:o,size:"md",children:_.jsx(Cf,{children:Array.isArray(t.value)?t.value.map(a=>_.jsx(Cf.Item,{children:a},a)):_.jsx(Cf.Item,{children:t.value})})})}function YEe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,leftLabel:u,rightLabel:l,secondaryText:c}=e;return _.jsx(by.Group,{name:`radioInput${e.id}`,label:_.jsxs(Gt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(ke,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ou,{text:s,required:o})})]}),description:c,...n,error:t_(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsxs(gr,{mt:"xs",children:[u?_.jsx(dt,{style:{textAlign:"center"},children:u}):null,a.map(d=>_.jsx(by,{disabled:t,value:d.value,label:d.label},d.label)),_.jsx(dt,{children:l})]})},e.id)}function _lt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return _.jsx(YEe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i})}function wlt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return _.jsx(lY,{disabled:t,placeholder:l,label:_.jsxs(Gt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(ke,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ou,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:t_(e,n)})}function xlt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=t_(e,n);return _.jsx(Ti.Wrapper,{label:_.jsxs(Gt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(ke,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ou,{text:s,required:o})})]}),description:u,error:l,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(bY,{disabled:t,marks:a,...n,h:40})})}function Elt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(Af,{disabled:t,placeholder:s,label:_.jsxs(Gt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(ke,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ou,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:t_(e,n)})}function Slt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(m2,{disabled:t,placeholder:s,autosize:!0,minRows:5,label:_.jsxs(Gt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(ke,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(ke,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ou,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:t_(e,n)})}function Tlt({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=$Y(),u=jf().uiConfig.enumerateQuestions??!1,l=P.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return _.jsxs(ke,{mb:"md",children:[e.type==="numerical"&&_.jsx(wlt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&_.jsx(Elt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&_.jsx(Slt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&_.jsx(_lt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&_.jsx(vlt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&_.jsx(xlt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&_.jsx(YEe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&_.jsx(ylt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&_.jsx(blt,{response:e,answer:i,index:r,enumerateQuestions:u})]})}function MM({config:e,location:t,status:n,style:r}){var S;const i=$p(),s=nh(),o=n==null?void 0:n.answer,a=e,u=P.useMemo(()=>{var E;return((E=a==null?void 0:a.response)==null?void 0:E.filter(T=>T.location?T.location===t:t==="belowStimulus"))||[]},[a==null?void 0:a.response,t]),l=Tc(),{updateResponseBlockValidation:c}=Rl(),d=glt(u,i,o||{}),[f,h]=P.useState(void 0),[p,m]=P.useState(!1),{iframeAnswers:y,iframeProvenance:v}=Ea(E=>E),w=(a==null?void 0:a.provideFeedback)&&(((S=a==null?void 0:a.correctAnswer)==null?void 0:S.length)||0)>0,x=t===((a==null?void 0:a.nextButtonLocation)||"belowStimulus");return P.useEffect(()=>{const E=u.find(T=>T.type==="iframe");if(y&&E){const T=E.id;d.setValues({...d.values,[T]:y[T]})}},[y]),P.useEffect(()=>{v&&h(v)},[v]),P.useEffect(()=>{l(c({location:t,identifier:`${s}_${i}`,status:d.isValid(),values:mc(d.values),provenanceGraph:f}))},[d.values,s,i,t,l,c,f]),_.jsxs("div",{style:r,children:[u.map((E,T)=>{var A,I;return _.jsx(Is.Fragment,{children:E.hidden?"":_.jsxs(_.Fragment,{children:[_.jsx(Tlt,{storedAnswer:o?o[E.id]:void 0,answer:{...d.getInputProps(E.id,{type:E.type==="checkbox"?"checkbox":"input"})},response:E,index:T+1}),w&&p&&_.jsx(dt,{children:`The correct answer is: ${(I=(A=a.correctAnswer)==null?void 0:A.find(k=>k.id===E.id))==null?void 0:I.answer}`})]})},`${E.id}-${i}`)}),_.jsxs(gr,{justify:"right",gap:"xs",children:[w&&x&&_.jsx(Zn,{onClick:()=>m(!0),disabled:!d.isValid(),children:"Check Answer"}),x&&_.jsx(Kut,{disabled:w&&!p,setCheckClicked:m,label:a.nextButtonText||"Next"})]})]})}function Clt({parameters:e,setAnswer:t}){const{imgOptions:n=[],instructions:r,timerSeconds:i=0}=e,[s,o]=P.useState(""),[a,u]=P.useState(i),[l,c]=P.useState(""),[d,f]=P.useState(!1);P.useEffect(()=>{n.length===1&&o("/ThinkAloud/"+n[0])},[n]),P.useEffect(()=>{t({status:!1,provenanceGraph:void 0,answers:{}})},[t]),P.useEffect(()=>{if(!(i>0&&a>0))return()=>{};!d&&a===Math.floor(i/2)&&f(!0);const v=setInterval(()=>{u(w=>w-1)},1e3);return()=>clearInterval(v)},[a,i,d]);const h=i<=0||a<=0;P.useEffect(()=>{h&&l.trim().length>0?t({status:!0,provenanceGraph:void 0,answers:{guess:l.trim()}}):t({status:!1,provenanceGraph:void 0,answers:{}})},[h,l,t]);const p=y=>{c(y.target.value)},m=y=>{const v=Math.floor(y/60).toString().padStart(2,"0"),w=(y%60).toString().padStart(2,"0");return`${v}:${w}`};return _.jsxs("div",{style:{textAlign:"center",padding:20},children:[_.jsx("p",{style:{fontSize:18,marginBottom:20},children:r}),s&&_.jsx("img",{src:s,alt:"Display",style:{maxWidth:"60%",marginBottom:20,border:"1px solid #ccc"}}),_.jsx("p",{style:{color:"black"},children:"Remember to refer to each panel by its label (A - F) as you reason through the task."}),d&&!h&&_.jsxs("div",{style:{margin:"20px auto",padding:"10px",border:"1px solid #ccc",width:"60%",backgroundColor:"#fff8dc"},children:[_.jsx("strong",{children:"Reminder:"})," ","Please remember to speak your thoughts out loud as you work through the task."]}),i>0&&!h&&_.jsxs("div",{style:{fontSize:16,marginBottom:20},children:["Time Remaining:"," ",m(a)]}),h&&_.jsxs("div",{children:[_.jsx("p",{children:_.jsx("strong",{children:"What do you think the hidden rule is?"})}),_.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"You can enter more than one rule. Rank them from most confident to least confident."}),_.jsx("textarea",{value:l,onChange:p,placeholder:`Type your rule guess or guesses here.
Start with your most likely guess. Include others if you are unsure.`,style:{width:"60%",height:100,marginTop:10}})]})]})}const Alt=Object.freeze(Object.defineProperty({__proto__:null,default:Clt},Symbol.toStringTag,{value:"Module"}));function Ilt({parameters:e,setAnswer:t}){const{imgOptions:n=[],instructions:r,timerSeconds:i=0}=e,[s,o]=P.useState(""),[a,u]=P.useState(i),[l,c]=P.useState(""),[d,f]=P.useState(!1),[h,p]=P.useState(!1),[m,y]=P.useState(""),[v,w]=P.useState(!1),[x,S]=P.useState(!1);P.useEffect(()=>{n.length>0&&o("/ThinkAloud/"+n[0]),t({status:!1,provenanceGraph:void 0,answers:{}})},[]),P.useEffect(()=>{if(i<=0||a<=0)return;!v&&a===i-30&&w(!0),!d&&a===i-60&&(f(!0),w(!1)),!x&&a===i-90&&(S(!0),f(!1));const k=setInterval(()=>u(D=>D-1),1e3);return()=>clearInterval(k)},[a,i,v,d,x]);const E=i<=0||a<=0;P.useEffect(()=>{E?(h&&(c(""),p(!1)),t({status:l.trim().length>0,provenanceGraph:void 0,answers:l.trim().length>0?{guess:l.trim()}:{}})):t({status:!1,provenanceGraph:void 0,answers:{}})},[E,l,h,t]);const T=k=>{c(k.target.value)},A=()=>{l.trim()&&(p(!0),t({status:!1,provenanceGraph:void 0,answers:{guess:l.trim(),submittedEarly:"true"}}),y("Thank you for your guess! Now keep thinking aloud. You might want to test your idea, consider exceptions, or explore alternative possibilities."))},I=k=>{const D=Math.floor(k/60).toString().padStart(2,"0"),M=(k%60).toString().padStart(2,"0");return`${D}:${M}`};return _.jsxs("div",{style:{textAlign:"center",padding:20},children:[_.jsx("p",{style:{fontSize:18,marginBottom:20},children:r}),s&&_.jsx("img",{src:s,alt:"Display",style:{maxWidth:"60%",marginBottom:20,border:"1px solid #ccc"}}),_.jsx("p",{style:{color:"black"},children:"Remember to refer to each panel by its label (A - F) as you reason through the task."}),v&&!E&&_.jsxs("div",{style:{margin:"20px auto",padding:"10px",border:"1px solid #ccc",width:"60%",backgroundColor:"#fff8dc"},children:[_.jsx("strong",{children:"Reminder:"})," ","Please remember to speak your thoughts out loud as you work through the task."]}),i>0&&!E&&_.jsxs("div",{style:{fontSize:16,marginBottom:20},children:["Time Remaining:"," ",I(a)]}),d&&!E&&!h&&_.jsxs("div",{children:[_.jsx("p",{children:_.jsx("strong",{children:"Optional: If you have a strong idea about the rule, you may enter an early guess now."})}),_.jsx("textarea",{value:l,onChange:T,placeholder:"Enter your rule guess",style:{width:"60%",height:80}}),_.jsx("br",{}),_.jsx("button",{type:"button",onClick:A,style:{marginTop:10},children:"Submit Early Guess"})]}),h&&!E&&_.jsx("p",{style:{marginTop:10,fontStyle:"italic"},children:m}),x&&!E&&_.jsx("div",{style:{margin:"20px auto",padding:"10px",border:"1px solid #ccc",width:"60%",backgroundColor:"#fff8dc"},children:h?_.jsxs("p",{children:[_.jsx("strong",{children:"Keep going:"})," ","Take this time to evaluate whether your guess holds, look for counterexamples, or explore other possible rules."]}):_.jsx("p",{children:"You are doing great! Keep thinking aloud, try to generate new ideas or re-examine the panels from a different angle."})}),E&&_.jsxs("div",{children:[_.jsx("p",{children:_.jsx("strong",{children:"What do you think the hidden rule is?"})}),_.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"You can enter more than one rule. Rank them from most confident to least confident."}),_.jsx("textarea",{value:l,onChange:T,placeholder:`Type your rule guess or guesses here.
Start with your most likely guess. Include others if you are unsure.`,style:{width:"60%",height:100,marginTop:10}})]})]})}const Rlt=Object.freeze(Object.defineProperty({__proto__:null,default:Ilt},Symbol.toStringTag,{value:"Module"}));async function klt(e){const t=await fetch("http://localhost:5050/embed",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e})});if(!t.ok)throw new Error("Failed to fetch embedding");return(await t.json()).embedding}async function Plt(e,t){const n=await fetch("http://localhost:5050/similarity",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({embedding1:e,embedding2:t})});if(!n.ok)throw new Error("Failed to compute similarity");return(await n.json()).similarity}let jB=null;async function Nlt(){if(jB!==null)return jB;const e=await fetch("/all_rule_embeddings.json");if(!e.ok)throw new Error("Failed to load rule embeddings");const t=await e.json();return jB=t,t}function Olt({parameters:e,setAnswer:t}){const{imgOptions:n=[],instructions:r,timerSeconds:i=0,ruleKey:s}=e,[o,a]=P.useState(""),[u,l]=P.useState(i),[c,d]=P.useState(""),[f,h]=P.useState(!1),[p,m]=P.useState(!1),[y,v]=P.useState(!1),[w,x]=P.useState("");P.useEffect(()=>{n&&n.length>0&&a("/ThinkAloud/"+n[0]),t({status:!1,provenanceGraph:void 0,answers:{}})},[n,t]),P.useEffect(()=>{if(i<=0||u<=0)return;!f&&(u===i-90||u===i-30)&&h(!0),!p&&u===i-60&&m(!0);const I=setInterval(()=>l(k=>k-1),1e3);return()=>clearInterval(I)},[u,i,f,p]);const S=i<=0||u<=0;P.useEffect(()=>{S?(y&&(d(""),v(!1)),t({status:c.trim().length>0,provenanceGraph:void 0,answers:c.trim().length>0?{guess:c.trim()}:{}})):t({status:!1,provenanceGraph:void 0,answers:{}})},[S,c,y,t]);const E=I=>{d(I.target.value)},T=async()=>{if(!(!c.trim()||!s)){v(!0);try{const I=await klt(c.trim()),D=(await Nlt())[s];if(!D)throw new Error(`Rule "${s}" not found.`);const M=await Promise.all(D.embeddings.map($=>Plt(I,$))),z=Math.max(...M),O=z>=.85;t({status:O,provenanceGraph:void 0,answers:{guess:c.trim(),similarity:z.toFixed(4),submittedEarly:"true"}}),x(O?"You have guessed correctly! You can now press the Next button to move on to the next task":"Not quite right. Keep thinking aloud to find other possible guesses until the timer ends or until you are confident in your answer.")}catch(I){console.error("Embedding check failed:",I),x("Error processing your guess. Please try again.")}}},A=I=>{const k=Math.floor(I/60).toString().padStart(2,"0"),D=(I%60).toString().padStart(2,"0");return`${k}:${D}`};return _.jsxs("div",{style:{textAlign:"center",padding:20},children:[_.jsx("p",{style:{fontSize:18,marginBottom:20},children:r}),o&&_.jsx("img",{src:o,alt:"Display",style:{maxWidth:"60%",marginBottom:20,border:"1px solid #ccc"}}),_.jsx("p",{style:{color:"black"},children:"Remember to refer to each panel by its label (A - F) as you reason through the task."}),f&&!S&&_.jsxs("div",{style:{margin:"20px auto",padding:"10px",border:"1px solid #ccc",width:"60%",backgroundColor:"#fff8dc"},children:[_.jsx("strong",{children:"Reminder:"})," ","Please remember to speak your thoughts out loud as you work through the task."]}),i>0&&!S&&_.jsxs("div",{style:{fontSize:16,marginBottom:20},children:["Time Remaining:"," ",A(u)]}),p&&!S&&!y&&_.jsxs("div",{children:[_.jsx("p",{children:_.jsx("strong",{children:"You can now submit one early guess:"})}),_.jsx("textarea",{value:c,onChange:E,placeholder:"Enter your rule guess",style:{width:"60%",height:80}}),_.jsx("br",{}),_.jsx("button",{type:"button",onClick:T,style:{marginTop:10},children:"Submit Early Guess"})]}),y&&!S&&_.jsx("p",{style:{marginTop:10,fontStyle:"italic"},children:w}),S&&_.jsxs("div",{children:[_.jsx("p",{children:_.jsx("strong",{children:"What do you think the hidden rule is?"})}),_.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"You can enter more than one rule. Rank them from most confident to least confident."}),_.jsx("textarea",{value:c,onChange:E,placeholder:`Type your rule guess or guesses here.
Start with your most likely guess. Include others if you are unsure.`,style:{width:"60%",height:100,marginTop:10}})]})]})}const Dlt=Object.freeze(Object.defineProperty({__proto__:null,default:Olt},Symbol.toStringTag,{value:"Module"}));function Mlt({parameters:e,setAnswer:t}){const{imgOptions:n=[],instructions:r,timerSeconds:i=0,enableIdeaTracker:s=!1}=e,[o,a]=P.useState(""),[u,l]=P.useState(i),[c,d]=P.useState(""),[f,h]=P.useState(!1),[p,m]=P.useState(""),[y,v]=P.useState([]),[w,x]=P.useState(null);P.useEffect(()=>{x(Date.now())},[]),P.useEffect(()=>{n.length>0&&a("/ThinkAloud/"+n[0]),t({status:!1,provenanceGraph:void 0,answers:{}})},[]),P.useEffect(()=>{if(i<=0||u<=0)return;!f&&u===Math.floor(i/2)&&h(!0);const I=setInterval(()=>l(k=>k-1),1e3);return()=>clearInterval(I)},[u,i,f]);const S=i<=0||u<=0;P.useEffect(()=>{S&&c.trim().length>0?t({status:!0,provenanceGraph:void 0,answers:{guess:c.trim(),ideaTracker:y}}):t({status:!1,provenanceGraph:void 0,answers:{}})},[S,c,y,t]);const E=I=>{d(I.target.value)},T=()=>{if(p.trim()&&w!==null){const I=Date.now(),k=Math.round((I-w)/1e3);v(D=>[...D,{text:p.trim(),timestamp:k}]),m("")}},A=I=>{const k=Math.floor(I/60).toString().padStart(2,"0"),D=(I%60).toString().padStart(2,"0");return`${k}:${D}`};return _.jsxs("div",{style:{textAlign:"center",padding:20},children:[_.jsx("p",{style:{fontSize:18,marginBottom:20},children:r}),o&&_.jsx("img",{src:o,alt:"Display",style:{maxWidth:"60%",marginBottom:20,border:"1px solid #ccc"}}),_.jsx("p",{style:{color:"black"},children:"Remember to refer to each panel by its label (A - F) as you reason through the task."}),f&&!S&&_.jsxs("div",{style:{margin:"20px auto",padding:"10px",border:"1px solid #ccc",width:"60%",backgroundColor:"#fff8dc"},children:[_.jsx("strong",{children:"Reminder:"})," ","Please remember to speak your thoughts out loud as you work through the task."]}),i>0&&!S&&_.jsxs("div",{style:{fontSize:16,marginBottom:20},children:["Time Remaining:"," ",A(u)]}),s&&_.jsxs("div",{style:{position:"fixed",top:"200px",right:"30px",width:"280px",backgroundColor:"#f9f9f9",border:"1px solid #ccc",borderRadius:"12px",padding:"16px",boxShadow:"0 4px 12px rgba(0,0,0,0.08)",zIndex:999,fontSize:".9rem",display:"flex",flexDirection:"column",gap:"12px"},children:[_.jsxs("div",{style:{textAlign:"center"},children:[_.jsx("h4",{style:{fontSize:"1rem",fontWeight:600,marginBottom:4},children:"Ideas:"}),_.jsx("p",{style:{fontSize:"0.85rem",fontStyle:"italic",color:"#444"},children:"Please remember to continue thinking out loud"})]}),_.jsxs("div",{style:{display:"flex",gap:"6px"},children:[_.jsx("input",{type:"text",value:p,onChange:I=>m(I.target.value),onKeyDown:I=>{I.key==="Enter"&&(I.preventDefault(),T())},placeholder:"Enter an idea",style:{flex:1,padding:"6px 8px",fontSize:"0.85rem",border:"1px solid #ccc",borderRadius:"6px"}}),_.jsx("button",{type:"button",onClick:T,style:{backgroundColor:"#2563eb",color:"#fff",padding:"6px 12px",fontSize:"0.85rem",borderRadius:"6px",border:"none",cursor:"pointer"},children:"Add"})]}),_.jsx("ul",{style:{maxHeight:"160px",overflowY:"auto",paddingLeft:"20px",margin:0},children:y.map((I,k)=>_.jsx("li",{style:{marginBottom:4},children:I.text},k))})]}),S&&_.jsxs("div",{children:[_.jsx("p",{children:_.jsx("strong",{children:"What do you think the hidden rule is?"})}),_.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"You can enter more than one rule. Rank them from most confident to least confident."}),_.jsx("textarea",{value:c,onChange:E,placeholder:`Type your rule guess or guesses here.
Start with your most likely guess. Include others if you are unsure.`,style:{width:"60%",height:100,marginTop:10}})]})]})}const $lt=Object.freeze(Object.defineProperty({__proto__:null,default:Mlt},Symbol.toStringTag,{value:"Module"}));function Llt(){const{storageEngine:e}=Zi(),[t,n]=P.useState("");return P.useEffect(()=>{(async()=>{if(e){const i=await e.getCurrentParticipantId();n(i)}})()},[e]),_.jsx(Il,{style:{height:"100%"},children:_.jsxs(Gt,{direction:"column",align:"center",children:[_.jsx(dt,{size:"xl",fw:700,mb:"md",children:"Your Participant ID"}),_.jsx(dt,{size:"lg",mb:"sm",children:t}),_.jsx(dt,{mb:"lg",children:"Please save this ID in case you wish to request deletion of your data in the future."}),_.jsxs(dt,{mb:"lg",fw:500,children:["Pressing"," ",_.jsx("strong",{children:"Next"})," ","will end the study and redirect you back to Prolific."]})]})})}const Flt=Object.freeze(Object.defineProperty({__proto__:null,default:Llt},Symbol.toStringTag,{value:"Module"})),KEe=P.createContext(null),SK=({id:e="waveform",children:t})=>Is.createElement("div",{id:e},t),jlt=["audioRate","audioContext","audioScriptProcessor","autoCenter","backend","backgroundColor","barGap","barHeight","barMinHeight","barRadius","barWidth","closeAudioContext","cursorColor","cursorWidth","fillParent","forceDecode","height","hideScrollbar","interact","loopSelection","maxCanvasWidth","mediaControls","mediaType","minPxPerSec","normalize","partialRender","pixelRatio","progressColor","removeMediaElementOnDestroy","renderer","responsive","scrollParent","skipLength","splitChannels","waveColor","autoCenterRate","autoCenterImmediately","drawingContextAttributes","duration","ignoreSilenceMode","rtl","splitChannelsOptions","vertical","xhr"],Blt=e=>e?jlt.reduce((t,n)=>Object.prototype.hasOwnProperty.call(e,n)?Object.assign(Object.assign({},t),{[n]:e[n]}):t,{}):{};var zlt=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})};function Ult(e,t){return zlt(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})}function Vlt(e){const t=e[0];if(t.some(n=>n>1||n<-1)){const n=t.length;let r=0;for(let i=0;i<n;i++){const s=Math.abs(t[i]);s>r&&(r=s)}for(const i of e)for(let s=0;s<n;s++)i[s]/=r}return e}function Hlt(e,t){return typeof e[0]=="number"&&(e=[e]),Vlt(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}const BB={decode:Ult,createBuffer:Hlt};var Fce=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})};function qlt(e,t,n){var r,i;return Fce(this,void 0,void 0,function*(){const s=yield fetch(e,n);{const o=(r=s.clone().body)===null||r===void 0?void 0:r.getReader(),a=Number((i=s.headers)===null||i===void 0?void 0:i.get("Content-Length"));let u=0;const l=(c,d)=>Fce(this,void 0,void 0,function*(){if(c)return;u+=(d==null?void 0:d.length)||0;const f=Math.round(u/a*100);return t(f),o==null?void 0:o.read().then(({done:h,value:p})=>l(h,p))});o==null||o.read().then(({done:c,value:d})=>l(c,d))}return s.blob()})}const Wlt={fetchBlob:qlt};class LF{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r!=null&&r.once){const i=()=>{this.removeEventListener(t,i),this.removeEventListener(t,n)};return this.addEventListener(t,i),i}return()=>this.removeEventListener(t,n)}removeEventListener(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}}class Glt extends LF{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onceMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n)}onceMediaEvent(t,n){return this.onMediaEvent(t,n,{once:!0})}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}setSrc(t,n){if(this.getSrc()===t)return;this.revokeSrc();const i=n instanceof Blob?URL.createObjectURL(n):t;this.media.src=i,this.media.load()}destroy(){this.media.pause(),!this.isExternalMedia&&(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return this.media.play()}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}function Ylt(e,t,n,r,i=5){let s=()=>{};if(!e)return s;const o=a=>{if(a.button===2)return;a.preventDefault(),a.stopPropagation(),e.style.touchAction="none";let u=a.clientX,l=a.clientY,c=!1;const d=p=>{p.preventDefault(),p.stopPropagation();const m=p.clientX,y=p.clientY;if(c||Math.abs(m-u)>=i||Math.abs(y-l)>=i){const{left:v,top:w}=e.getBoundingClientRect();c||(c=!0,n==null||n(u-v,l-w)),t(m-u,y-l,m-v,y-w),u=m,l=y}},f=p=>{c&&(p.preventDefault(),p.stopPropagation())},h=()=>{e.style.touchAction="",c&&(r==null||r()),s()};document.addEventListener("pointermove",d),document.addEventListener("pointerup",h),document.addEventListener("pointerleave",h),document.addEventListener("click",f,!0),s=()=>{document.removeEventListener("pointermove",d),document.removeEventListener("pointerup",h),document.removeEventListener("pointerleave",h),setTimeout(()=>{document.removeEventListener("click",f,!0)},10)}};return e.addEventListener("pointerdown",o),()=>{s(),e.removeEventListener("pointerdown",o)}}let XEe=class QEe extends LF{constructor(t,n){super(),this.timeouts=[],this.isScrolling=!1,this.audioData=null,this.resizeObserver=null,this.isDragging=!1,this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=r=>{const i=this.wrapper.getBoundingClientRect(),s=r.clientX-i.left,o=r.clientX-i.left,a=s/i.width,u=o/i.height;return[a,u]};this.wrapper.addEventListener("click",r=>{const[i,s]=t(r);this.emit("click",i,s)}),this.wrapper.addEventListener("dblclick",r=>{const[i,s]=t(r);this.emit("dblclick",i,s)}),this.options.dragToSeek&&this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=r/i,a=(r+s)/i;this.emit("scroll",o,a)});const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n(()=>this.reRender())}),this.resizeObserver.observe(this.scrollContainer)}initDrag(){Ylt(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},()=>this.isDragging=!0,()=>this.isDragging=!1)}getHeight(){return this.options.height==null?128:isNaN(Number(this.options.height))?this.options.height==="auto"&&this.parent.clientHeight||128:Number(this.options.height)}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"});return n.innerHTML=`
      <style>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight()}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek&&!this.options.dragToSeek&&this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getScroll(){return this.scrollContainer.scrollLeft}destroy(){var t;this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect()}createDelay(t=10){const n={};return this.timeouts.push(n),r=>{n.timeout&&clearTimeout(n.timeout),n.timeout=setTimeout(r,t)}}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),i=n.getContext("2d").createLinearGradient(0,0,0,n.height),s=1/(t.length-1);return t.forEach((o,a)=>{const u=a*s;i.addColorStop(u,o)}),i}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:u,height:l}=r.canvas,c=l/2,d=window.devicePixelRatio||1,f=n.barWidth?n.barWidth*d:1,h=n.barGap?n.barGap*d:n.barWidth?f/2:0,p=n.barRadius||0,m=u/(f+h)/a,y=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let v=0,w=0,x=0;for(let S=0;S<=a;S++){const E=Math.round(S*m);if(E>v){const I=Math.round(w*c*i),k=Math.round(x*c*i),D=I+k||1;let M=c-I;n.barAlign==="top"?M=0:n.barAlign==="bottom"&&(M=l-D),r[y](v*(f+h),M,f,D,p),v=E,w=0,x=0}const T=Math.abs(s[S]||0),A=Math.abs(o[S]||0);T>w&&(w=T),A>x&&(x=A)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],u=a.length,{height:l}=r.canvas,c=l/2,d=r.canvas.width/u;r.moveTo(0,c);let f=0,h=0;for(let p=0;p<=u;p++){const m=Math.round(p*d);if(m>f){const v=Math.round(h*c*i)||1,w=c+v*(o===0?-1:1);r.lineTo(f,w),f=m,h=0}const y=Math.abs(a[p]||0);y>h&&(h=y)}r.lineTo(f,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction){n.renderFunction(t,r);return}let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}if(n.barWidth||n.barGap||n.barAlign){this.renderBarWaveform(t,n,r,i);return}this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a,u){const l=window.devicePixelRatio||1,c=document.createElement("canvas"),d=t[0].length;c.width=Math.round(r*(o-s)/d),c.height=i*l,c.style.width=`${Math.floor(c.width/l)}px`,c.style.height=`${i}px`,c.style.left=`${Math.floor(s*r/l/d)}px`,a.appendChild(c);const f=c.getContext("2d");if(this.renderWaveform(t.map(h=>h.slice(s,o)),n,f),c.width>0&&c.height>0){const h=c.cloneNode(),p=h.getContext("2d");p.drawImage(c,0,0),p.globalCompositeOperation="source-in",p.fillStyle=this.convertColorValues(n.progressColor),p.fillRect(0,0,c.width,c.height),u.appendChild(h)}}renderChannel(t,n,r){const i=document.createElement("div"),s=this.getHeight();i.style.height=`${s}px`,this.canvasWrapper.style.minHeight=`${s}px`,this.canvasWrapper.appendChild(i);const o=i.cloneNode();this.progressWrapper.appendChild(o);const{scrollLeft:a,scrollWidth:u,clientWidth:l}=this.scrollContainer,c=t[0].length,d=c/u;let f=Math.min(QEe.MAX_CANVAS_WIDTH,l);if(n.barWidth||n.barGap){const E=n.barWidth||.5,T=n.barGap||E/2,A=E+T;f%A!==0&&(f=Math.floor(f/A)*A)}const h=Math.floor(Math.abs(a)*d),p=Math.floor(h+f*d),m=p-h,y=(E,T)=>{this.renderSingleCanvas(t,n,r,s,Math.max(0,E),Math.min(T,c),i,o)},v=this.createDelay(),w=this.createDelay(),x=(E,T)=>{y(E,T),E>0&&v(()=>{x(E-m,T-m)})},S=(E,T)=>{y(E,T),T<c&&w(()=>{S(E+m,T+m)})};x(h,p),p<c&&S(p,p+m)}render(t){this.timeouts.forEach(a=>a.timeout&&clearTimeout(a.timeout)),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.wrapper.style.width="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const n=window.devicePixelRatio||1,r=this.scrollContainer.clientWidth,i=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrolling=i>r;const s=this.options.fillParent&&!this.isScrolling,o=(s?r:i)*n;if(this.wrapper.style.width=s?"100%":`${i}px`,this.scrollContainer.style.overflowX=this.isScrolling?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.options.splitChannels)for(let a=0;a<t.numberOfChannels;a++){const u=Object.assign(Object.assign({},this.options),this.options.splitChannels[a]);this.renderChannel([t.getChannelData(a)],u,o)}else{const a=[t.getChannelData(0)];t.numberOfChannels>1&&a.push(t.getChannelData(1)),this.renderChannel(a,this.options,o)}this.audioData=t,this.emit("render")}reRender(){if(!this.audioData)return;const t=this.progressWrapper.clientWidth;this.render(this.audioData);const n=this.progressWrapper.clientWidth;this.scrollContainer.scrollLeft+=n-t}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{clientWidth:r,scrollLeft:i,scrollWidth:s}=this.scrollContainer,o=s*t,a=r/2,u=n&&this.options.autoCenter&&!this.isDragging?a:r;if(o>i+u||o<i)if(this.options.autoCenter&&!this.isDragging){const l=a/20;o-(i+a)>=l&&o<i+r?this.scrollContainer.scrollLeft+=l:this.scrollContainer.scrollLeft=o-a}else this.isDragging?this.scrollContainer.scrollLeft=o<i?o-10:o-r+10:this.scrollContainer.scrollLeft=o;{const{scrollLeft:l}=this.scrollContainer,c=l/s,d=(l+r)/s;this.emit("scroll",c,d)}}renderProgress(t,n){if(isNaN(t))return;const r=t*100;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.marginLeft=Math.round(r)===100?`-${this.options.cursorWidth}px`:"",this.isScrolling&&this.options.autoScroll&&this.scrollIntoView(t,n)}};XEe.MAX_CANVAS_WIDTH=4e3;let Klt=class extends LF{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}};var zB=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})};class Xlt extends LF{constructor(t=new AudioContext){super(),this.bufferNode=null,this.autoplay=!1,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return zB(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){this.currentSrc=t,fetch(t).then(n=>n.arrayBuffer()).then(n=>this.audioContext.decodeAudioData(n)).then(n=>{this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play()})}_play(){var t;this.paused&&(this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.bufferNode.buffer=this.buffer,this.bufferNode.connect(this.gainNode),this.playedDuration>=this.duration&&(this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,this.playedDuration),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))})}_pause(){var t;this.paused||(this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime)}play(){return zB(this,void 0,void 0,function*(){this._play(),this.emit("play")})}pause(){this._pause(),this.emit("pause")}setSinkId(t){return zB(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){var t,n;return(n=(t=this.bufferNode)===null||t===void 0?void 0:t.playbackRate.value)!==null&&n!==void 0?n:1}set playbackRate(t){this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return this.paused?this.playedDuration:this.playedDuration+this.audioContext.currentTime-this.playStartTime}set currentTime(t){this.emit("seeking"),this.paused?this.playedDuration=t:(this._pause(),this.playedDuration=t,this._play()),this.emit("timeupdate")}get duration(){var t;return((t=this.buffer)===null||t===void 0?void 0:t.duration)||0}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}getGainNode(){return this.gainNode}}var dw=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})};const Qlt={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};let Jlt=class JEe extends Glt{static create(t){return new JEe(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new Xlt:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.options=Object.assign({},Qlt,t),this.timer=new Klt;const r=n?void 0:this.getMediaElement();this.renderer=new XEe(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc();i?this.load(i,this.options.peaks,this.options.duration):this.options.peaks&&this.options.duration&&this.loadPredecoded()}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{const t=this.getCurrentTime();this.renderer.renderProgress(t/this.getDuration(),!0),this.emit("timeupdate",t),this.emit("audioprocess",t)}))}initPlayerEvents(){this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.getCurrentTime();this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n)=>{const r=this.getDuration();this.emit("scroll",t*r,n*r)}),this.renderer.on("render",()=>{this.emit("redraw")}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{this.options.interact&&(this.renderer.renderProgress(n),clearTimeout(t),t=setTimeout(()=>{this.seekTo(n)},this.isPlaying()?0:200),this.emit("interaction",n*this.getDuration()),this.emit("drag",n))}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t.init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getScroll(){return this.renderer.getScroll()}getActivePlugins(){return this.plugins}loadPredecoded(){return dw(this,void 0,void 0,function*(){this.options.peaks&&this.options.duration&&(this.decodedData=BB.createBuffer(this.options.peaks,this.options.duration),yield Promise.resolve(),this.renderDecoded())})}renderDecoded(){return dw(this,void 0,void 0,function*(){this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData))})}loadAudio(t,n,r,i){return dw(this,void 0,void 0,function*(){if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const s=o=>this.emit("loading",o);n=yield Wlt.fetchBlob(t,s,this.options.fetchParams)}if(this.setSrc(t,n),i=(yield Promise.resolve(i||this.getDuration()))||(yield new Promise(s=>{this.onceMediaEvent("loadedmetadata",()=>s(this.getDuration()))}))||(yield Promise.resolve(0)),r)this.decodedData=BB.createBuffer(r,i);else if(n){const s=yield n.arrayBuffer();this.decodedData=yield BB.decode(s,this.options.sampleRate)}this.renderDecoded(),this.emit("ready",this.getDuration())})}load(t,n,r){return dw(this,void 0,void 0,function*(){yield this.loadAudio(t,void 0,n,r)})}loadBlob(t,n,r){return dw(this,void 0,void 0,function*(){yield this.loadAudio("blob",t,n,r)})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),u=[],l=Math.round(a.length/n);for(let c=0;c<n;c++){const d=a.slice(c*l,(c+1)*l),f=Math.max(...d);u.push(Math.round(f*r)/r)}s.push(u)}return s}getDuration(){let t=super.getDuration()||0;return(t===0||t===1/0)&&this.decodedData&&(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return dw(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}destroy(){this.emit("destroy"),this.plugins.forEach(t=>t.destroy()),this.subscriptions.forEach(t=>t()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}};function Zlt(e){return Jlt.create(e)}function jce(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const ect=(e,t)=>{const n=[...e],r=[...t],i=n.filter(o=>r.findIndex(a=>a.name===o.name)===-1),s=r.filter(o=>n.findIndex(a=>a.name===o.name)===-1);return{disabled:i,enabled:s}};var tct=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function ZEe(e){var{container:t,plugins:n=[],onMount:r}=e,i=tct(e,["container","plugins","onMount"]);const s=P.useRef([]),[o,a]=P.useState(null);return P.useEffect(()=>{if(!t)return;let u=[];n&&(u=n.map(jce)),s.current=u;const l=Zlt(Object.assign(Object.assign({container:t},i),{plugins:u}));return r==null||r(l),a(l),()=>{l.destroy()}},[t]),P.useEffect(()=>{if(o){const u=n.map(jce),{disabled:l,enabled:c}=ect(s.current,u);s.current=u,l.forEach(d=>{d.name&&(o==null||o.destroyPlugin(d.name))}),c.forEach(d=>{d.name&&(o==null||o.addPlugin(d).initPlugin(d.name))})}},[n]),o}function nct(e){return!!e&&typeof e!="string"&&typeof e!="number"&&typeof e!="boolean"&&"type"in e&&"props"in e}var rct=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const eSe=e=>{var{children:t,plugins:n=[],onMount:r}=e,i=rct(e,["children","plugins","onMount"]);const s=P.useMemo(()=>{let a={};return P.Children.forEach(t,u=>{if(typeof u!="object"||u===null||["string","number"].includes(typeof u)||!nct(u))return;const{props:l,type:c}=u;if(c===SK){const{id:d}=l;a=Blt(l),a=Object.assign(Object.assign({},a),{container:"#"+d})}}),a},[t]),o=ZEe(Object.assign(Object.assign({plugins:n,onMount:r},i),s));return Is.createElement(KEe.Provider,{value:o},t)};eSe.defaultProps={children:null,plugins:[]};function UB(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(d){d(c)})).then(o,a)}u((r=r.apply(e,[])).next())})}let ict=class{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.removeEventListener(t,i),this.removeEventListener(t,n)};return this.addEventListener(t,i),i}return()=>this.removeEventListener(t,n)}removeEventListener(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}},sct=class extends ict{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}};const oct=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];let act=class tSe extends sct{constructor(t){var n;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3})),this.stream=null,this.mediaRecorder=null}static create(t){return new tSe(t||{})}renderMicStream(t){const n=new AudioContext,r=n.createMediaStreamSource(t),i=n.createAnalyser();r.connect(i);const s=i.frequencyBinCount,o=new Float32Array(s),a=s/n.sampleRate;let u;const l=()=>{i.getFloatTimeDomainData(o),this.wavesurfer&&(this.wavesurfer.options.cursorWidth=0,this.wavesurfer.options.interact=!1,this.wavesurfer.load("",[o],a)),u=requestAnimationFrame(l)};return l(),()=>{cancelAnimationFrame(u),r==null||r.disconnect(),n==null||n.close()}}startMic(t){return UB(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(i){throw new Error("Error accessing the microphone: "+i.message)}const r=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return UB(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t)),r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||oct.find(s=>MediaRecorder.isTypeSupported(s)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=s=>{s.data.size>0&&i.push(s.data)},r.onstop=()=>{var s;const o=new Blob(i,{type:r.mimeType});this.emit("record-end",o),this.options.renderRecordedAudio!==!1&&((s=this.wavesurfer)===null||s===void 0||s.load(URL.createObjectURL(o)))},r.start(),this.emit("record-start")})}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}stopRecording(){var t;this.isRecording()&&((t=this.mediaRecorder)===null||t===void 0||t.stop())}pauseRecording(){var t;this.isRecording()&&((t=this.mediaRecorder)===null||t===void 0||t.pause(),this.emit("record-pause"))}resumeRecording(){var t;this.isPaused()&&((t=this.mediaRecorder)===null||t===void 0||t.resume(),this.emit("record-resume"))}static getAvailableAudioDevices(){return UB(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){super.destroy(),this.stopRecording(),this.stopMic()}};function nSe({width:e=70,height:t=50}){const n=P.useRef(null),r=P.useCallback(i=>{n.current=i,n.current&&(n.current.registerPlugin(act.create({scrollingWaveform:!0,renderRecordedAudio:!1})).startRecording(),n.current.setOptions({height:50,waveColor:"#FA5252"}))},[]);return _.jsx(ke,{style:{width:`${e}px`,height:`${t}px`},children:_.jsx(eSe,{onMount:r,children:_.jsx(SK,{id:"waveform"})})})}function Bce({parameters:e,setAnswer:t}){const n=Tc(),{updateResponseBlockValidation:r}=Rl(),i=nh(),s=$p(),o=`${i}_${s}`;return P.useEffect(()=>{t({status:!1,provenanceGraph:void 0,answers:{}}),n(r({location:"belowStimulus",identifier:o,status:!1,provenanceGraph:void 0,values:{}}));let a,u=!1;async function l(){try{const c=await navigator.mediaDevices.getUserMedia({audio:!0}),d=new AudioContext;await d.resume();const f=d.createMediaStreamSource(c),h=d.createGain();h.gain.value=3,f.connect(h);const p=d.createAnalyser();p.fftSize=256,h.connect(p);const m=new Uint8Array(p.fftSize),y=()=>{p.getByteTimeDomainData(m);let v=0;for(let w=0;w<m.length;w+=1){const x=Math.abs(m[w]-128);x>v&&(v=x)}if(!u&&v>10){u=!0,t({status:!0,provenanceGraph:void 0,answers:{audioTest:"yes"}}),n(r({location:"belowStimulus",identifier:o,status:!0,provenanceGraph:void 0,values:{audioTest:"yes"}})),cancelAnimationFrame(a);return}a=requestAnimationFrame(y)};y()}catch(c){console.error("AudioTest init error",c)}}return l(),()=>cancelAnimationFrame(a)},[n,o,t,r]),_.jsx(Il,{style:{height:"70%",width:"100%"},children:_.jsxs(ao,{children:[_.jsx(dt,{ta:"center",children:"Please allow us to access your microphone. There may be a popup in your browser window asking for access, click accept."}),_.jsx(dt,{ta:"center",children:"Once we can confirm that your microphone is on and we hear you say something, the continue button will become available."}),_.jsx(dt,{ta:"center",fw:700,children:"If you are not comfortable or able to speak English during this study, please return the study."}),_.jsx(Il,{children:_.jsx(nSe,{height:200,width:400})})]})})}const uct=Object.freeze(Object.defineProperty({__proto__:null,AudioTest:Bce,default:Bce},Symbol.toStringTag,{value:"Module"})),aa={Purple:"#6D3E91",Blue:"#286BBB",Maroon:"#883039",MidnightBlue:"#00295B",DustyCoral:"#C15065",DarkOliveGreen:"#18470F",DarkCopper:"#9A5129",Mauve:"#A2559C",OliveGreen:"#578145",Cherry:"#970046",Teal:"#00847E",RustyOrange:"#B13507",Denim:"#4C6A9C",TealishGreen:"#00875E",Copper:"#B16214",DarkMauve:"#8C4569",Coral:"#D73C50"},fw={DarkOrangeDarker:"#BE5915",PeachDarker:"#C4523E",LightTealDarker:"#2C8465",TurquoiseDarker:"#008291",CamelDarker:"#996D39",LimeDarker:"#338711"},TK=[aa.DustyCoral,fw.LightTealDarker,fw.DarkOrangeDarker,aa.Purple,aa.DarkOliveGreen,aa.Blue,aa.Maroon,fw.CamelDarker,aa.MidnightBlue,aa.DarkCopper,fw.PeachDarker,aa.Mauve,fw.TurquoiseDarker,aa.OliveGreen,aa.Cherry,aa.Teal,aa.RustyOrange,aa.Denim,aa.TealishGreen,aa.Copper,aa.DarkMauve,fw.LimeDarker,aa.Coral],lct=Object.freeze(Object.defineProperty({__proto__:null,OwidDistinctLinesPalette:TK},Symbol.toStringTag,{value:"Module"}));function Hm(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function cct(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function gS(e){let t,n,r;e.length!==2?(t=Hm,n=(a,u)=>Hm(e(a),u),r=(a,u)=>e(a)-u):(t=e===Hm||e===cct?e:dct,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const d=l+c>>>1;n(a[d],u)<0?l=d+1:c=d}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const d=l+c>>>1;n(a[d],u)<=0?l=d+1:c=d}while(l<c)}return l}function o(a,u,l=0,c=a.length){const d=i(a,u,l,c-1);return d>l&&r(a[d-1],u)>-r(a[d],u)?d-1:d}return{left:i,center:o,right:s}}function dct(){return 0}function rSe(e){return e===null?NaN:+e}function*fct(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const iSe=gS(Hm),xy=iSe.right,hct=iSe.left;gS(rSe).center;function pct(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function mct(e,t){const n=pct(e,t);return n&&Math.sqrt(n)}function nc(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class ku{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class D7 extends Map{constructor(t,n=aSe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(M7(this,t))}has(t){return super.has(M7(this,t))}set(t,n){return super.set(sSe(this,t),n)}delete(t){return super.delete(oSe(this,t))}}class $M extends Set{constructor(t,n=aSe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(M7(this,t))}add(t){return super.add(sSe(this,t))}delete(t){return super.delete(oSe(this,t))}}function M7({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function sSe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function oSe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function aSe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function gct(e){return e}function yct(e,t,...n){return vct(e,gct,t,n)}function vct(e,t,n,r){return function i(s,o){if(o>=r.length)return n(s);const a=new D7,u=r[o++];let l=-1;for(const c of s){const d=u(c,++l,s),f=a.get(d);f?f.push(c):a.set(d,[c])}for(const[c,d]of a)a.set(c,i(d,o));return t(a)}(e,0)}function bct(e,t){return Array.from(t,n=>e[n])}function _ct(e=Hm){if(e===Hm)return uSe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function uSe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const wct=Math.sqrt(50),xct=Math.sqrt(10),Ect=Math.sqrt(2);function LM(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=wct?10:s>=xct?5:s>=Ect?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?LM(e,t,n*2):[a,u,l]}function $7(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?LM(t,e,n):LM(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function L7(e,t,n){return t=+t,e=+e,n=+n,LM(e,t,n)[2]}function Ey(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?L7(t,e,n):L7(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function tp(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function C2(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function lSe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?uSe:_ct(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),d=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*d*(u-d)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*d/u+f)),p=Math.min(r,Math.floor(t+(u-l)*d/u+f));lSe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(GT(e,n,t),i(e[r],s)>0&&GT(e,n,r);o<a;){for(GT(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?GT(e,n,a):(++a,GT(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function GT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function gx(e,t,n){if(e=Float64Array.from(fct(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return C2(e);if(t>=1)return tp(e);var r,i=(r-1)*t,s=Math.floor(i),o=tp(lSe(e,s).subarray(0,s+1)),a=C2(e.subarray(s+1));return o+(a-o)*(i-s)}}function cSe(e,t,n=rSe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function Sct(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function dSe(e,t){return gx(e,.5,t)}function*Tct(e){for(const t of e)yield*t}function fSe(e){return Array.from(Tct(e))}function cc(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function A2(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function Cct(e,...t){e=new $M(e),t=t.map(Act);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function Act(e){return e instanceof $M?e:new $M(e)}function Ict(...e){const t=new $M;for(const n of e)for(const r of n)t.add(r);return t}var Rct={value:()=>{}};function CK(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new lD(n)}function lD(e){this._=e}function kct(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}lD.prototype=CK.prototype={constructor:lD,on:function(e,t){var n=this._,r=kct(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=Pct(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=zce(n[i],e.name,t);else if(t==null)for(i in n)n[i]=zce(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new lD(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Pct(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function zce(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Rct,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var F7="http://www.w3.org/1999/xhtml";const Uce={svg:"http://www.w3.org/2000/svg",xhtml:F7,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function FF(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Uce.hasOwnProperty(t)?{space:Uce[t],local:e}:e}function Nct(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===F7&&t.documentElement.namespaceURI===F7?t.createElement(e):t.createElementNS(n,e)}}function Oct(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function hSe(e){var t=FF(e);return(t.local?Oct:Nct)(t)}function Dct(){}function AK(e){return e==null?Dct:function(){return this.querySelector(e)}}function Mct(e){typeof e!="function"&&(e=AK(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Bf(r,this._parents)}function $ct(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Lct(){return[]}function pSe(e){return e==null?Lct:function(){return this.querySelectorAll(e)}}function Fct(e){return function(){return $ct(e.apply(this,arguments))}}function jct(e){typeof e=="function"?e=Fct(e):e=pSe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Bf(r,i)}function mSe(e){return function(){return this.matches(e)}}function gSe(e){return function(t){return t.matches(e)}}var Bct=Array.prototype.find;function zct(e){return function(){return Bct.call(this.children,e)}}function Uct(){return this.firstElementChild}function Vct(e){return this.select(e==null?Uct:zct(typeof e=="function"?e:gSe(e)))}var Hct=Array.prototype.filter;function qct(){return Array.from(this.children)}function Wct(e){return function(){return Hct.call(this.children,e)}}function Gct(e){return this.selectAll(e==null?qct:Wct(typeof e=="function"?e:gSe(e)))}function Yct(e){typeof e!="function"&&(e=mSe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Bf(r,this._parents)}function ySe(e){return new Array(e.length)}function Kct(){return new Bf(this._enter||this._groups.map(ySe),this._parents)}function FM(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}FM.prototype={constructor:FM,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Xct(e){return function(){return e}}function Qct(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new FM(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function Jct(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,d=s.length,f=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(f[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<d;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new FM(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(f[a])===u&&(i[a]=u)}function Zct(e){return e.__data__}function edt(e,t){if(!arguments.length)return Array.from(this,Zct);var n=t?Jct:Qct,r=this._parents,i=this._groups;typeof e!="function"&&(e=Xct(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],d=i[l],f=d.length,h=tdt(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),y=o[l]=new Array(p),v=u[l]=new Array(f);n(c,d,m,y,v,h,t);for(var w=0,x=0,S,E;w<p;++w)if(S=m[w]){for(w>=x&&(x=w+1);!(E=y[x])&&++x<p;);S._next=E||null}}return o=new Bf(o,r),o._enter=a,o._exit=u,o}function tdt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ndt(){return new Bf(this._exit||this._groups.map(ySe),this._parents)}function rdt(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function idt(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],d=l.length,f=a[u]=new Array(d),h,p=0;p<d;++p)(h=l[p]||c[p])&&(f[p]=h);for(;u<i;++u)a[u]=n[u];return new Bf(a,this._parents)}function sdt(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function odt(e){e||(e=adt);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Bf(i,this._parents).order()}function adt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function udt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ldt(){return Array.from(this)}function cdt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function ddt(){let e=0;for(const t of this)++e;return e}function fdt(){return!this.node()}function hdt(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function pdt(e){return function(){this.removeAttribute(e)}}function mdt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gdt(e,t){return function(){this.setAttribute(e,t)}}function ydt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function vdt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function bdt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function _dt(e,t){var n=FF(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?mdt:pdt:typeof t=="function"?n.local?bdt:vdt:n.local?ydt:gdt)(n,t))}function vSe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function wdt(e){return function(){this.style.removeProperty(e)}}function xdt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Edt(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Sdt(e,t,n){return arguments.length>1?this.each((t==null?wdt:typeof t=="function"?Edt:xdt)(e,t,n??"")):Jx(this.node(),e)}function Jx(e,t){return e.style.getPropertyValue(t)||vSe(e).getComputedStyle(e,null).getPropertyValue(t)}function Tdt(e){return function(){delete this[e]}}function Cdt(e,t){return function(){this[e]=t}}function Adt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Idt(e,t){return arguments.length>1?this.each((t==null?Tdt:typeof t=="function"?Adt:Cdt)(e,t)):this.node()[e]}function bSe(e){return e.trim().split(/^|\s+/)}function IK(e){return e.classList||new _Se(e)}function _Se(e){this._node=e,this._names=bSe(e.getAttribute("class")||"")}_Se.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function wSe(e,t){for(var n=IK(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function xSe(e,t){for(var n=IK(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Rdt(e){return function(){wSe(this,e)}}function kdt(e){return function(){xSe(this,e)}}function Pdt(e,t){return function(){(t.apply(this,arguments)?wSe:xSe)(this,e)}}function Ndt(e,t){var n=bSe(e+"");if(arguments.length<2){for(var r=IK(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Pdt:t?Rdt:kdt)(n,t))}function Odt(){this.textContent=""}function Ddt(e){return function(){this.textContent=e}}function Mdt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function $dt(e){return arguments.length?this.each(e==null?Odt:(typeof e=="function"?Mdt:Ddt)(e)):this.node().textContent}function Ldt(){this.innerHTML=""}function Fdt(e){return function(){this.innerHTML=e}}function jdt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Bdt(e){return arguments.length?this.each(e==null?Ldt:(typeof e=="function"?jdt:Fdt)(e)):this.node().innerHTML}function zdt(){this.nextSibling&&this.parentNode.appendChild(this)}function Udt(){return this.each(zdt)}function Vdt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Hdt(){return this.each(Vdt)}function qdt(e){var t=typeof e=="function"?e:hSe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Wdt(){return null}function Gdt(e,t){var n=typeof e=="function"?e:hSe(e),r=t==null?Wdt:typeof t=="function"?t:AK(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ydt(){var e=this.parentNode;e&&e.removeChild(this)}function Kdt(){return this.each(Ydt)}function Xdt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Qdt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Jdt(e){return this.select(e?Qdt:Xdt)}function Zdt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function eft(e){return function(t){e.call(this,t,this.__data__)}}function tft(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function nft(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function rft(e,t,n){return function(){var r=this.__on,i,s=eft(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function ift(e,t,n){var r=tft(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?rft:nft,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function ESe(e,t,n){var r=vSe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function sft(e,t){return function(){return ESe(this,e,t)}}function oft(e,t){return function(){return ESe(this,e,t.apply(this,arguments))}}function aft(e,t){return this.each((typeof t=="function"?oft:sft)(e,t))}function*uft(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var lft=[null];function Bf(e,t){this._groups=e,this._parents=t}function dR(){return new Bf([[document.documentElement]],lft)}function cft(){return this}Bf.prototype=dR.prototype={constructor:Bf,select:Mct,selectAll:jct,selectChild:Vct,selectChildren:Gct,filter:Yct,data:edt,enter:Kct,exit:ndt,join:rdt,merge:idt,selection:cft,order:sdt,sort:odt,call:udt,nodes:ldt,node:cdt,size:ddt,empty:fdt,each:hdt,attr:_dt,style:Sdt,property:Idt,classed:Ndt,text:$dt,html:Bdt,raise:Udt,lower:Hdt,append:qdt,insert:Gdt,remove:Kdt,clone:Jdt,datum:Zdt,on:ift,dispatch:aft,[Symbol.iterator]:uft};function yS(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function fR(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function fv(){}var fb=.7,Zx=1/fb,yx="\\s*([+-]?\\d+)\\s*",I2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",np="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dft=/^#([0-9a-f]{3,8})$/,fft=new RegExp(`^rgb\\(${yx},${yx},${yx}\\)$`),hft=new RegExp(`^rgb\\(${np},${np},${np}\\)$`),pft=new RegExp(`^rgba\\(${yx},${yx},${yx},${I2}\\)$`),mft=new RegExp(`^rgba\\(${np},${np},${np},${I2}\\)$`),gft=new RegExp(`^hsl\\(${I2},${np},${np}\\)$`),yft=new RegExp(`^hsla\\(${I2},${np},${np},${I2}\\)$`),Vce={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yS(fv,hb,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Hce,formatHex:Hce,formatHex8:vft,formatHsl:bft,formatRgb:qce,toString:qce});function Hce(){return this.rgb().formatHex()}function vft(){return this.rgb().formatHex8()}function bft(){return SSe(this).formatHsl()}function qce(){return this.rgb().formatRgb()}function hb(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=dft.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Wce(t):n===3?new Go(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?LN(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?LN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=fft.exec(e))?new Go(t[1],t[2],t[3],1):(t=hft.exec(e))?new Go(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pft.exec(e))?LN(t[1],t[2],t[3],t[4]):(t=mft.exec(e))?LN(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=gft.exec(e))?Kce(t[1],t[2]/100,t[3]/100,1):(t=yft.exec(e))?Kce(t[1],t[2]/100,t[3]/100,t[4]):Vce.hasOwnProperty(e)?Wce(Vce[e]):e==="transparent"?new Go(NaN,NaN,NaN,0):null}function Wce(e){return new Go(e>>16&255,e>>8&255,e&255,1)}function LN(e,t,n,r){return r<=0&&(e=t=n=NaN),new Go(e,t,n,r)}function RK(e){return e instanceof fv||(e=hb(e)),e?(e=e.rgb(),new Go(e.r,e.g,e.b,e.opacity)):new Go}function Sy(e,t,n,r){return arguments.length===1?RK(e):new Go(e,t,n,r??1)}function Go(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}yS(Go,Sy,fR(fv,{brighter(e){return e=e==null?Zx:Math.pow(Zx,e),new Go(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?fb:Math.pow(fb,e),new Go(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Go(X1(this.r),X1(this.g),X1(this.b),jM(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Gce,formatHex:Gce,formatHex8:_ft,formatRgb:Yce,toString:Yce}));function Gce(){return`#${L1(this.r)}${L1(this.g)}${L1(this.b)}`}function _ft(){return`#${L1(this.r)}${L1(this.g)}${L1(this.b)}${L1((isNaN(this.opacity)?1:this.opacity)*255)}`}function Yce(){const e=jM(this.opacity);return`${e===1?"rgb(":"rgba("}${X1(this.r)}, ${X1(this.g)}, ${X1(this.b)}${e===1?")":`, ${e})`}`}function jM(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function X1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function L1(e){return e=X1(e),(e<16?"0":"")+e.toString(16)}function Kce(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new pf(e,t,n,r)}function SSe(e){if(e instanceof pf)return new pf(e.h,e.s,e.l,e.opacity);if(e instanceof fv||(e=hb(e)),!e)return new pf;if(e instanceof pf)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new pf(o,a,u,e.opacity)}function R2(e,t,n,r){return arguments.length===1?SSe(e):new pf(e,t,n,r??1)}function pf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}yS(pf,R2,fR(fv,{brighter(e){return e=e==null?Zx:Math.pow(Zx,e),new pf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?fb:Math.pow(fb,e),new pf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Go(VB(e>=240?e-240:e+120,i,r),VB(e,i,r),VB(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new pf(Xce(this.h),FN(this.s),FN(this.l),jM(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=jM(this.opacity);return`${e===1?"hsl(":"hsla("}${Xce(this.h)}, ${FN(this.s)*100}%, ${FN(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Xce(e){return e=(e||0)%360,e<0?e+360:e}function FN(e){return Math.max(0,Math.min(1,e||0))}function VB(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const TSe=Math.PI/180,CSe=180/Math.PI,BM=18,ASe=.96422,ISe=1,RSe=.82521,kSe=4/29,vx=6/29,PSe=3*vx*vx,wft=vx*vx*vx;function NSe(e){if(e instanceof rp)return new rp(e.l,e.a,e.b,e.opacity);if(e instanceof Om)return OSe(e);e instanceof Go||(e=RK(e));var t=GB(e.r),n=GB(e.g),r=GB(e.b),i=HB((.2225045*t+.7168786*n+.0606169*r)/ISe),s,o;return t===n&&n===r?s=o=i:(s=HB((.4360747*t+.3850649*n+.1430804*r)/ASe),o=HB((.0139322*t+.0971045*n+.7141733*r)/RSe)),new rp(116*i-16,500*(s-i),200*(i-o),e.opacity)}function zM(e,t,n,r){return arguments.length===1?NSe(e):new rp(e,t,n,r??1)}function rp(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}yS(rp,zM,fR(fv,{brighter(e){return new rp(this.l+BM*(e??1),this.a,this.b,this.opacity)},darker(e){return new rp(this.l-BM*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=ASe*qB(t),e=ISe*qB(e),n=RSe*qB(n),new Go(WB(3.1338561*t-1.6168667*e-.4906146*n),WB(-.9787684*t+1.9161415*e+.033454*n),WB(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function HB(e){return e>wft?Math.pow(e,1/3):e/PSe+kSe}function qB(e){return e>vx?e*e*e:PSe*(e-kSe)}function WB(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function GB(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function xft(e){if(e instanceof Om)return new Om(e.h,e.c,e.l,e.opacity);if(e instanceof rp||(e=NSe(e)),e.a===0&&e.b===0)return new Om(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*CSe;return new Om(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function UM(e,t,n,r){return arguments.length===1?xft(e):new Om(e,t,n,r??1)}function Om(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function OSe(e){if(isNaN(e.h))return new rp(e.l,0,0,e.opacity);var t=e.h*TSe;return new rp(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}yS(Om,UM,fR(fv,{brighter(e){return new Om(this.h,this.c,this.l+BM*(e??1),this.opacity)},darker(e){return new Om(this.h,this.c,this.l-BM*(e??1),this.opacity)},rgb(){return OSe(this).rgb()}}));var DSe=-.14861,kK=1.78277,PK=-.29227,jF=-.90649,k2=1.97294,Qce=k2*jF,Jce=k2*kK,Zce=kK*PK-jF*DSe;function Eft(e){if(e instanceof Q1)return new Q1(e.h,e.s,e.l,e.opacity);e instanceof Go||(e=RK(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Zce*r+Qce*t-Jce*n)/(Zce+Qce-Jce),s=r-i,o=(k2*(n-i)-PK*s)/jF,a=Math.sqrt(o*o+s*s)/(k2*i*(1-i)),u=a?Math.atan2(o,s)*CSe-120:NaN;return new Q1(u<0?u+360:u,a,i,e.opacity)}function j7(e,t,n,r){return arguments.length===1?Eft(e):new Q1(e,t,n,r??1)}function Q1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}yS(Q1,j7,fR(fv,{brighter(e){return e=e==null?Zx:Math.pow(Zx,e),new Q1(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?fb:Math.pow(fb,e),new Q1(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*TSe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Go(255*(t+n*(DSe*r+kK*i)),255*(t+n*(PK*r+jF*i)),255*(t+n*(k2*r)),this.opacity)}}));function MSe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function $Se(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return MSe((n-r/t)*t,o,i,s,a)}}function LSe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return MSe((n-r/t)*t,i,s,o,a)}}const BF=e=>()=>e;function FSe(e,t){return function(n){return e+n*t}}function Sft(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function zF(e,t){var n=t-e;return n?FSe(e,n>180||n<-180?n-360*Math.round(n/360):n):BF(isNaN(e)?t:e)}function Tft(e){return(e=+e)==1?Yo:function(t,n){return n-t?Sft(t,n,e):BF(isNaN(t)?n:t)}}function Yo(e,t){var n=t-e;return n?FSe(e,n):BF(isNaN(e)?t:e)}const P2=function e(t){var n=Tft(t);function r(i,s){var o=n((i=Sy(i)).r,(s=Sy(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=Yo(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function jSe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=Sy(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var Cft=jSe($Se),Aft=jSe(LSe);function NK(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function BSe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ift(e,t){return(BSe(t)?NK:zSe)(e,t)}function zSe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=hv(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function USe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function id(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function VSe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=hv(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var B7=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,YB=new RegExp(B7.source,"g");function Rft(e){return function(){return e}}function kft(e){return function(t){return e(t)+""}}function OK(e,t){var n=B7.lastIndex=YB.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=B7.exec(e))&&(i=YB.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:id(r,i)})),n=YB.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?kft(u[0].x):Rft(t):(t=u.length,function(l){for(var c=0,d;c<t;++c)a[(d=u[c]).i]=d.x(l);return a.join("")})}function hv(e,t){var n=typeof t,r;return t==null||n==="boolean"?BF(t):(n==="number"?id:n==="string"?(r=hb(t))?(t=r,P2):OK:t instanceof hb?P2:t instanceof Date?USe:BSe(t)?NK:Array.isArray(t)?zSe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?VSe:id)(e,t)}function Pft(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Nft(e,t){var n=zF(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function hR(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var ede=180/Math.PI,z7={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function HSe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*ede,skewX:Math.atan(u)*ede,scaleX:o,scaleY:a}}var jN;function Oft(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?z7:HSe(t.a,t.b,t.c,t.d,t.e,t.f)}function Dft(e){return e==null||(jN||(jN=document.createElementNS("http://www.w3.org/2000/svg","g")),jN.setAttribute("transform",e),!(e=jN.transform.baseVal.consolidate()))?z7:(e=e.matrix,HSe(e.a,e.b,e.c,e.d,e.e,e.f))}function qSe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,d,f,h,p){if(l!==d||c!==f){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:id(l,d)},{i:m-2,x:id(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function o(l,c,d,f){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:id(l,c)})):c&&d.push(i(d)+"rotate("+c+r)}function a(l,c,d,f){l!==c?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:id(l,c)}):c&&d.push(i(d)+"skewX("+c+r)}function u(l,c,d,f,h,p){if(l!==d||c!==f){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:id(l,d)},{i:m-2,x:id(c,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(l,c){var d=[],f=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,d,f),o(l.rotate,c.rotate,d,f),a(l.skewX,c.skewX,d,f),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,d,f),l=c=null,function(h){for(var p=-1,m=f.length,y;++p<m;)d[(y=f[p]).i]=y.x(h);return d.join("")}}}var WSe=qSe(Oft,"px, ","px)","deg)"),GSe=qSe(Dft,", ",")",")"),Mft=1e-12;function tde(e){return((e=Math.exp(e))+1/e)/2}function $ft(e){return((e=Math.exp(e))-1/e)/2}function Lft(e){return((e=Math.exp(2*e))-1)/(e+1)}const Fft=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],d=o[1],f=o[2],h=c-a,p=d-u,m=h*h+p*p,y,v;if(m<Mft)v=Math.log(f/l)/t,y=function(A){return[a+A*h,u+A*p,l*Math.exp(t*A*v)]};else{var w=Math.sqrt(m),x=(f*f-l*l+r*m)/(2*l*n*w),S=(f*f-l*l-r*m)/(2*f*n*w),E=Math.log(Math.sqrt(x*x+1)-x),T=Math.log(Math.sqrt(S*S+1)-S);v=(T-E)/t,y=function(A){var I=A*v,k=tde(E),D=l/(n*w)*(k*Lft(t*I+E)-$ft(E));return[a+D*h,u+D*p,l*k/tde(t*I+E)]}}return y.duration=v*1e3*t/Math.SQRT2,y}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function YSe(e){return function(t,n){var r=e((t=R2(t)).h,(n=R2(n)).h),i=Yo(t.s,n.s),s=Yo(t.l,n.l),o=Yo(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const jft=YSe(zF);var Bft=YSe(Yo);function zft(e,t){var n=Yo((e=zM(e)).l,(t=zM(t)).l),r=Yo(e.a,t.a),i=Yo(e.b,t.b),s=Yo(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function KSe(e){return function(t,n){var r=e((t=UM(t)).h,(n=UM(n)).h),i=Yo(t.c,n.c),s=Yo(t.l,n.l),o=Yo(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Uft=KSe(zF);var Vft=KSe(Yo);function XSe(e){return function t(n){n=+n;function r(i,s){var o=e((i=j7(i)).h,(s=j7(s)).h),a=Yo(i.s,s.s),u=Yo(i.l,s.l),l=Yo(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const Hft=XSe(zF);var qft=XSe(Yo);function DK(e,t){t===void 0&&(t=e,e=hv);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Wft(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const Gft=Object.freeze(Object.defineProperty({__proto__:null,interpolate:hv,interpolateArray:Ift,interpolateBasis:$Se,interpolateBasisClosed:LSe,interpolateCubehelix:Hft,interpolateCubehelixLong:qft,interpolateDate:USe,interpolateDiscrete:Pft,interpolateHcl:Uft,interpolateHclLong:Vft,interpolateHsl:jft,interpolateHslLong:Bft,interpolateHue:Nft,interpolateLab:zft,interpolateNumber:id,interpolateNumberArray:NK,interpolateObject:VSe,interpolateRgb:P2,interpolateRgbBasis:Cft,interpolateRgbBasisClosed:Aft,interpolateRound:hR,interpolateString:OK,interpolateTransformCss:WSe,interpolateTransformSvg:GSe,interpolateZoom:Fft,piecewise:DK,quantize:Wft},Symbol.toStringTag,{value:"Module"}));var eE=0,FC=0,YT=0,QSe=1e3,VM,jC,HM=0,pb=0,UF=0,N2=typeof performance=="object"&&performance.now?performance:Date,JSe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function VF(){return pb||(JSe(Yft),pb=N2.now()+UF)}function Yft(){pb=0}function O2(){this._call=this._time=this._next=null}O2.prototype=MK.prototype={constructor:O2,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?VF():+n)+(t==null?0:+t),!this._next&&jC!==this&&(jC?jC._next=this:VM=this,jC=this),this._call=e,this._time=n,U7()},stop:function(){this._call&&(this._call=null,this._time=1/0,U7())}};function MK(e,t,n){var r=new O2;return r.restart(e,t,n),r}function Kft(){VF(),++eE;for(var e=VM,t;e;)(t=pb-e._time)>=0&&e._call.call(void 0,t),e=e._next;--eE}function nde(){pb=(HM=N2.now())+UF,eE=FC=0;try{Kft()}finally{eE=0,Qft(),pb=0}}function Xft(){var e=N2.now(),t=e-HM;t>QSe&&(UF-=t,HM=e)}function Qft(){for(var e,t=VM,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:VM=n);jC=e,U7(r)}function U7(e){if(!eE){FC&&(FC=clearTimeout(FC));var t=e-pb;t>24?(e<1/0&&(FC=setTimeout(nde,e-N2.now()-UF)),YT&&(YT=clearInterval(YT))):(YT||(HM=N2.now(),YT=setInterval(Xft,QSe)),eE=1,JSe(nde))}}function rde(e,t,n){var r=new O2;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function Jft(e,t,n){var r=new O2,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?VF():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var Zft=CK("start","end","cancel","interrupt"),eht=[],ZSe=0,ide=1,V7=2,cD=3,sde=4,H7=5,dD=6;function HF(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;tht(e,n,{name:t,index:r,group:i,on:Zft,tween:eht,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:ZSe})}function $K(e,t){var n=ih(e,t);if(n.state>ZSe)throw new Error("too late; already scheduled");return n}function Lp(e,t){var n=ih(e,t);if(n.state>cD)throw new Error("too late; already running");return n}function ih(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function tht(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=MK(s,0,n.time);function s(l){n.state=ide,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,d,f,h;if(n.state!==ide)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===cD)return rde(o);h.state===sde?(h.state=dD,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=dD,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(rde(function(){n.state===cD&&(n.state=sde,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=V7,n.on.call("start",e,e.__data__,n.index,n.group),n.state===V7){for(n.state=cD,i=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=H7,1),d=-1,f=i.length;++d<f;)i[d].call(e,c);n.state===H7&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=dD,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function nht(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>V7&&r.state<H7,r.state=dD,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function rht(e){return this.each(function(){nht(this,e)})}function iht(e,t){var n,r;return function(){var i=Lp(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function sht(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Lp(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function oht(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=ih(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?iht:sht)(n,e,t))}function LK(e,t,n){var r=e._id;return e.each(function(){var i=Lp(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return ih(i,r).value[t]}}function eTe(e,t){var n;return(typeof t=="number"?id:t instanceof hb?P2:(n=hb(t))?(t=n,P2):OK)(e,t)}function aht(e){return function(){this.removeAttribute(e)}}function uht(e){return function(){this.removeAttributeNS(e.space,e.local)}}function lht(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function cht(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function dht(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function fht(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function hht(e,t){var n=FF(e),r=n==="transform"?GSe:eTe;return this.attrTween(e,typeof t=="function"?(n.local?fht:dht)(n,r,LK(this,"attr."+e,t)):t==null?(n.local?uht:aht)(n):(n.local?cht:lht)(n,r,t))}function pht(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function mht(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ght(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&mht(e,s)),n}return i._value=t,i}function yht(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&pht(e,s)),n}return i._value=t,i}function vht(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=FF(e);return this.tween(n,(r.local?ght:yht)(r,t))}function bht(e,t){return function(){$K(this,e).delay=+t.apply(this,arguments)}}function _ht(e,t){return t=+t,function(){$K(this,e).delay=t}}function wht(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?bht:_ht)(t,e)):ih(this.node(),t).delay}function xht(e,t){return function(){Lp(this,e).duration=+t.apply(this,arguments)}}function Eht(e,t){return t=+t,function(){Lp(this,e).duration=t}}function Sht(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?xht:Eht)(t,e)):ih(this.node(),t).duration}function Tht(e,t){if(typeof t!="function")throw new Error;return function(){Lp(this,e).ease=t}}function Cht(e){var t=this._id;return arguments.length?this.each(Tht(t,e)):ih(this.node(),t).ease}function Aht(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Lp(this,e).ease=n}}function Iht(e){if(typeof e!="function")throw new Error;return this.each(Aht(this._id,e))}function Rht(e){typeof e!="function"&&(e=mSe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new og(r,this._parents,this._name,this._id)}function kht(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,d=o[a]=new Array(c),f,h=0;h<c;++h)(f=u[h]||l[h])&&(d[h]=f);for(;a<r;++a)o[a]=t[a];return new og(o,this._parents,this._name,this._id)}function Pht(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Nht(e,t,n){var r,i,s=Pht(t)?$K:Lp;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function Oht(e,t){var n=this._id;return arguments.length<2?ih(this.node(),n).on.on(e):this.each(Nht(n,e,t))}function Dht(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Mht(){return this.on("end.remove",Dht(this._id))}function $ht(e){var t=this._name,n=this._id;typeof e!="function"&&(e=AK(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,d,f=0;f<u;++f)(c=a[f])&&(d=e.call(c,c.__data__,f,a))&&("__data__"in c&&(d.__data__=c.__data__),l[f]=d,HF(l[f],t,n,f,l,ih(c,n)));return new og(s,this._parents,t,n)}function Lht(e){var t=this._name,n=this._id;typeof e!="function"&&(e=pSe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,d=0;d<l;++d)if(c=u[d]){for(var f=e.call(c,c.__data__,d,u),h,p=ih(c,n),m=0,y=f.length;m<y;++m)(h=f[m])&&HF(h,t,n,m,f,p);s.push(f),o.push(c)}return new og(s,o,t,n)}var Fht=dR.prototype.constructor;function jht(){return new Fht(this._groups,this._parents)}function Bht(e,t){var n,r,i;return function(){var s=Jx(this,e),o=(this.style.removeProperty(e),Jx(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function tTe(e){return function(){this.style.removeProperty(e)}}function zht(e,t,n){var r,i=n+"",s;return function(){var o=Jx(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Uht(e,t,n){var r,i,s;return function(){var o=Jx(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),Jx(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function Vht(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=Lp(this,e),l=u.on,c=u.value[s]==null?a||(a=tTe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function Hht(e,t,n){var r=(e+="")=="transform"?WSe:eTe;return t==null?this.styleTween(e,Bht(e,r)).on("end.style."+e,tTe(e)):typeof t=="function"?this.styleTween(e,Uht(e,r,LK(this,"style."+e,t))).each(Vht(this._id,e)):this.styleTween(e,zht(e,r,t),n).on("end.style."+e,null)}function qht(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Wht(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&qht(e,o,n)),r}return s._value=t,s}function Ght(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Wht(e,t,n??""))}function Yht(e){return function(){this.textContent=e}}function Kht(e){return function(){var t=e(this);this.textContent=t??""}}function Xht(e){return this.tween("text",typeof e=="function"?Kht(LK(this,"text",e)):Yht(e==null?"":e+""))}function Qht(e){return function(t){this.textContent=e.call(this,t)}}function Jht(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Qht(i)),t}return r._value=e,r}function Zht(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Jht(e))}function ept(){for(var e=this._name,t=this._id,n=nTe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=ih(u,t);HF(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new og(r,this._parents,e,n)}function tpt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=Lp(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var npt=0;function og(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function nTe(){return++npt}var pm=dR.prototype;og.prototype={constructor:og,select:$ht,selectAll:Lht,selectChild:pm.selectChild,selectChildren:pm.selectChildren,filter:Rht,merge:kht,selection:jht,transition:ept,call:pm.call,nodes:pm.nodes,node:pm.node,size:pm.size,empty:pm.empty,each:pm.each,on:Oht,attr:hht,attrTween:vht,style:Hht,styleTween:Ght,text:Xht,textTween:Zht,remove:Mht,tween:oht,delay:wht,duration:Sht,ease:Cht,easeVarying:Iht,end:tpt,[Symbol.iterator]:pm[Symbol.iterator]};function rpt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var ipt={time:null,delay:0,duration:250,ease:rpt};function spt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function opt(e){var t,n;e instanceof og?(t=e._id,e=e._name):(t=nTe(),(n=ipt).time=VF(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&HF(u,e,t,l,o,n||spt(u,t));return new og(r,this._parents,e,t)}dR.prototype.interrupt=rht;dR.prototype.transition=opt;const q7=Math.PI,W7=2*q7,h1=1e-6,apt=W7-h1;function rTe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function upt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return rTe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let FK=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?rTe:upt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,d=a-n,f=c*c+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>h1)if(!(Math.abs(d*u-l*c)>h1)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,y=h*h+p*p,v=Math.sqrt(m),w=Math.sqrt(f),x=s*Math.tan((q7-Math.acos((m+f-y)/(2*v*w)))/2),S=x/w,E=x/v;Math.abs(S-1)>h1&&this._append`L${t+S*c},${n+S*d}`,this._append`A${s},${s},0,0,${+(d*h>c*p)},${this._x1=t+E*u},${this._y1=n+E*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,d=1^o,f=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>h1||Math.abs(this._y1-c)>h1)&&this._append`L${l},${c}`,r&&(f<0&&(f=f%W7+W7),f>apt?this._append`A${r},${r},0,1,${d},${t-a},${n-u}A${r},${r},0,1,${d},${this._x1=l},${this._y1=c}`:f>h1&&this._append`A${r},${r},0,${+(f>=q7)},${d},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function qF(){return new FK}qF.prototype=FK.prototype;const qm=11102230246251565e-32,Oa=134217729,lpt=(3+8*qm)*qm;function KB(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],d=0,f=0;c>l==c>-l?(s=l,l=t[++d]):(s=c,c=r[++f]);let h=0;if(d<e&&f<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++d]):(o=c+s,a=s-(o-c),c=r[++f]),s=o,a!==0&&(i[h++]=a);d<e&&f<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++d]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++f]),s=o,a!==0&&(i[h++]=a);for(;d<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++d],s=o,a!==0&&(i[h++]=a);for(;f<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++f],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function cpt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function pR(e){return new Float64Array(e)}const dpt=(3+16*qm)*qm,fpt=(2+12*qm)*qm,hpt=(9+64*qm)*qm*qm,hw=pR(4),ode=pR(8),ade=pR(12),ude=pR(16),yu=pR(4);function ppt(e,t,n,r,i,s,o){let a,u,l,c,d,f,h,p,m,y,v,w,x,S,E,T,A,I;const k=e-i,D=n-i,M=t-s,z=r-s;S=k*z,f=Oa*k,h=f-(f-k),p=k-h,f=Oa*z,m=f-(f-z),y=z-m,E=p*y-(S-h*m-p*m-h*y),T=M*D,f=Oa*M,h=f-(f-M),p=M-h,f=Oa*D,m=f-(f-D),y=D-m,A=p*y-(T-h*m-p*m-h*y),v=E-A,d=E-v,hw[0]=E-(v+d)+(d-A),w=S+v,d=w-S,x=S-(w-d)+(v-d),v=x-T,d=x-v,hw[1]=x-(v+d)+(d-T),I=w+v,d=I-w,hw[2]=w-(I-d)+(v-d),hw[3]=I;let O=cpt(4,hw),$=fpt*o;if(O>=$||-O>=$||(d=e-k,a=e-(k+d)+(d-i),d=n-D,l=n-(D+d)+(d-i),d=t-M,u=t-(M+d)+(d-s),d=r-z,c=r-(z+d)+(d-s),a===0&&u===0&&l===0&&c===0)||($=hpt*o+lpt*Math.abs(O),O+=k*c+z*a-(M*l+D*u),O>=$||-O>=$))return O;S=a*z,f=Oa*a,h=f-(f-a),p=a-h,f=Oa*z,m=f-(f-z),y=z-m,E=p*y-(S-h*m-p*m-h*y),T=u*D,f=Oa*u,h=f-(f-u),p=u-h,f=Oa*D,m=f-(f-D),y=D-m,A=p*y-(T-h*m-p*m-h*y),v=E-A,d=E-v,yu[0]=E-(v+d)+(d-A),w=S+v,d=w-S,x=S-(w-d)+(v-d),v=x-T,d=x-v,yu[1]=x-(v+d)+(d-T),I=w+v,d=I-w,yu[2]=w-(I-d)+(v-d),yu[3]=I;const F=KB(4,hw,4,yu,ode);S=k*c,f=Oa*k,h=f-(f-k),p=k-h,f=Oa*c,m=f-(f-c),y=c-m,E=p*y-(S-h*m-p*m-h*y),T=M*l,f=Oa*M,h=f-(f-M),p=M-h,f=Oa*l,m=f-(f-l),y=l-m,A=p*y-(T-h*m-p*m-h*y),v=E-A,d=E-v,yu[0]=E-(v+d)+(d-A),w=S+v,d=w-S,x=S-(w-d)+(v-d),v=x-T,d=x-v,yu[1]=x-(v+d)+(d-T),I=w+v,d=I-w,yu[2]=w-(I-d)+(v-d),yu[3]=I;const B=KB(F,ode,4,yu,ade);S=a*c,f=Oa*a,h=f-(f-a),p=a-h,f=Oa*c,m=f-(f-c),y=c-m,E=p*y-(S-h*m-p*m-h*y),T=u*l,f=Oa*u,h=f-(f-u),p=u-h,f=Oa*l,m=f-(f-l),y=l-m,A=p*y-(T-h*m-p*m-h*y),v=E-A,d=E-v,yu[0]=E-(v+d)+(d-A),w=S+v,d=w-S,x=S-(w-d)+(v-d),v=x-T,d=x-v,yu[1]=x-(v+d)+(d-T),I=w+v,d=I-w,yu[2]=w-(I-d)+(v-d),yu[3]=I;const q=KB(B,ade,4,yu,ude);return ude[q-1]}function BN(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=dpt*l?u:-ppt(e,t,n,r,i,s,l)}const lde=Math.pow(2,-52),zN=new Uint32Array(512);class qM{static from(t,n=bpt,r=_pt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new qM(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let k=0;k<o;k++){const D=t[2*k],M=t[2*k+1];D<a&&(a=D),M<u&&(u=M),D>l&&(l=D),M>c&&(c=M),this._ids[k]=k}const d=(a+l)/2,f=(u+c)/2;let h,p,m;for(let k=0,D=1/0;k<o;k++){const M=XB(d,f,t[2*k],t[2*k+1]);M<D&&(h=k,D=M)}const y=t[2*h],v=t[2*h+1];for(let k=0,D=1/0;k<o;k++){if(k===h)continue;const M=XB(y,v,t[2*k],t[2*k+1]);M<D&&M>0&&(p=k,D=M)}let w=t[2*p],x=t[2*p+1],S=1/0;for(let k=0;k<o;k++){if(k===h||k===p)continue;const D=ypt(y,v,w,x,t[2*k],t[2*k+1]);D<S&&(m=k,S=D)}let E=t[2*m],T=t[2*m+1];if(S===1/0){for(let M=0;M<o;M++)this._dists[M]=t[2*M]-t[0]||t[2*M+1]-t[1];Zw(this._ids,this._dists,0,o-1);const k=new Uint32Array(o);let D=0;for(let M=0,z=-1/0;M<o;M++){const O=this._ids[M],$=this._dists[O];$>z&&(k[D++]=O,z=$)}this.hull=k.subarray(0,D),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(BN(y,v,w,x,E,T)<0){const k=p,D=w,M=x;p=m,w=E,x=T,m=k,E=D,T=M}const A=vpt(y,v,w,x,E,T);this._cx=A.x,this._cy=A.y;for(let k=0;k<o;k++)this._dists[k]=XB(t[2*k],t[2*k+1],A.x,A.y);Zw(this._ids,this._dists,0,o-1),this._hullStart=h;let I=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(y,v)]=h,s[this._hashKey(w,x)]=p,s[this._hashKey(E,T)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let k=0,D,M;k<this._ids.length;k++){const z=this._ids[k],O=t[2*z],$=t[2*z+1];if(k>0&&Math.abs(O-D)<=lde&&Math.abs($-M)<=lde||(D=O,M=$,z===h||z===p||z===m))continue;let F=0;for(let L=0,V=this._hashKey(O,$);L<this._hashSize&&(F=s[(V+L)%this._hashSize],!(F!==-1&&F!==r[F]));L++);F=n[F];let B=F,q;for(;q=r[B],BN(O,$,t[2*B],t[2*B+1],t[2*q],t[2*q+1])>=0;)if(B=q,B===F){B=-1;break}if(B===-1)continue;let G=this._addTriangle(B,z,r[B],-1,-1,i[B]);i[z]=this._legalize(G+2),i[B]=G,I++;let K=r[B];for(;q=r[K],BN(O,$,t[2*K],t[2*K+1],t[2*q],t[2*q+1])<0;)G=this._addTriangle(K,z,q,i[z],-1,i[K]),i[z]=this._legalize(G+2),r[K]=K,I--,K=q;if(B===F)for(;q=n[B],BN(O,$,t[2*q],t[2*q+1],t[2*B],t[2*B+1])<0;)G=this._addTriangle(q,z,B,-1,i[B],i[q]),this._legalize(G+2),i[q]=G,r[B]=B,I--,B=q;this._hullStart=n[z]=B,r[B]=n[K]=z,r[z]=K,s[this._hashKey(O,$)]=z,s[this._hashKey(t[2*B],t[2*B+1])]=B}this.hull=new Uint32Array(I);for(let k=0,D=this._hullStart;k<I;k++)this.hull[k]=D,D=r[D];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(mpt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=zN[--s];continue}const l=a-a%3,c=u+(t+1)%3,d=l+(a+2)%3,f=n[o],h=n[t],p=n[c],m=n[d];if(gpt(i[2*f],i[2*f+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=f;const v=r[d];if(v===-1){let x=this._hullStart;do{if(this._hullTri[x]===d){this._hullTri[x]=t;break}x=this._hullPrev[x]}while(x!==this._hullStart)}this._link(t,v),this._link(a,r[o]),this._link(o,d);const w=l+(a+1)%3;s<zN.length&&(zN[s++]=w)}else{if(s===0)break;t=zN[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function mpt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function XB(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function gpt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,d=r-a,f=i-o,h=s-a,p=u*u+l*l,m=c*c+d*d,y=f*f+h*h;return u*(d*y-m*h)-l*(c*y-m*f)+p*(c*h-d*f)<0}function ypt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,d=u*u+l*l,f=.5/(o*l-a*u),h=(l*c-a*d)*f,p=(o*d-u*c)*f;return h*h+p*p}function vpt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,d=u*u+l*l,f=.5/(o*l-a*u),h=e+(l*c-a*d)*f,p=t+(o*d-u*c)*f;return{x:h,y:p}}function Zw(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;KT(e,i,s),t[e[n]]>t[e[r]]&&KT(e,n,r),t[e[s]]>t[e[r]]&&KT(e,s,r),t[e[n]]>t[e[s]]&&KT(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;KT(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(Zw(e,t,s,r),Zw(e,t,n,o-1)):(Zw(e,t,n,o-1),Zw(e,t,s,r))}}function KT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function bpt(e){return e[0]}function _pt(e){return e[1]}const cde=1e-6;class F1{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>cde||Math.abs(this._y1-s)>cde)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class G7{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let wpt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,y=0,v=r.length,w,x;m<v;m+=3,y+=2){const S=r[m]*2,E=r[m+1]*2,T=r[m+2]*2,A=t[S],I=t[S+1],k=t[E],D=t[E+1],M=t[T],z=t[T+1],O=k-A,$=D-I,F=M-A,B=z-I,q=(O*B-$*F)*2;if(Math.abs(q)<1e-9){if(s===void 0){s=o=0;for(const K of n)s+=t[K*2],o+=t[K*2+1];s/=n.length,o/=n.length}const G=1e9*Math.sign((s-A)*B-(o-I)*F);w=(A+M)/2-G*B,x=(I+z)/2+G*F}else{const G=1/q,K=O*O+$*$,L=F*F+B*B;w=A+(B*K-$*L)*G,x=I+(O*L-F*K)*G}a[y]=w,a[y+1]=x}let u=n[n.length-1],l,c=u*4,d,f=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,d=f,h=p,c=u*4,f=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=f-d}render(t){const n=t==null?t=new F1:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,d=r.length;c<d;++c){const f=r[c];if(f<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(f/3)*2,m=o[h],y=o[h+1],v=o[p],w=o[p+1];this._renderSegment(m,y,v,w,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const d=Math.floor(i[l]/3)*2,f=o[d],h=o[d+1],p=u*4,m=this._project(f,h,a[p+2],a[p+3]);m&&this._renderSegment(f,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new F1:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new F1:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new G7;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),d,f=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)d=f,f=0,i?i.push(a,u):i=[a,u];else{let p,m,y,v,w;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,y,v,w]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[v,w,m,y]=p,d=f,f=this._edgecode(m,y),d&&f&&this._edge(t,d,f,i,i.length),i?i.push(m,y):i=[m,y]}d=f,f=this._edgecode(v,w),d&&f&&this._edge(t,d,f,i,i.length),i?i.push(v,w):i=[v,w]}if(i)d=f,f=this._edgecode(i[0],i[1]),d&&f&&this._edge(t,d,f,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,d,f=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)d=f,f=this._edgecode(a[l],a[l+1]),d&&f&&(l=this._edge(t,d,f,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const xpt=2*Math.PI,pw=Math.pow;function Ept(e){return e[0]}function Spt(e){return e[1]}function Tpt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function Cpt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class jK{static from(t,n=Ept,r=Spt,i){return new jK("length"in t?Apt(t,n,r,i):Float64Array.from(Ipt(t,n,r,i)))}constructor(t){this._delaunator=new qM(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Tpt(t)){this.collinear=Int32Array.from({length:n.length/2},(f,h)=>h).sort((f,h)=>n[2*f]-n[2*h]||n[2*f+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],d=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let f=0,h=n.length/2;f<h;++f){const p=Cpt(n[2*f],n[2*f+1],d);n[2*f]=p[0],n[2*f+1]=p[1]}this._delaunator=new qM(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new wpt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const d=a.indexOf(t);d>0&&(yield a[d-1]),d<a.length-1&&(yield a[d+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const d=r[(i[t]+1)%r.length];d!==c&&(yield d);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,d=pw(n-l[t*2],2)+pw(r-l[t*2+1],2);const f=i[t];let h=f;do{let p=u[h];const m=pw(n-l[p*2],2)+pw(r-l[p*2+1],2);if(m<d&&(d=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&pw(n-l[h*2],2)+pw(r-l[h*2+1],2)<d)return h;break}}while(h!==f);return c}render(t){const n=t==null?t=new F1:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new F1:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,xpt)}return r&&r.value()}renderHull(t){const n=t==null?t=new F1:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new G7;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new F1:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new G7;return this.renderTriangle(t,n),n.value()}}function Apt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*Ipt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var dde={},QB={},JB=34,XT=10,ZB=13;function iTe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Rpt(e,t){var n=iTe(e);return function(r,i){return t(n(r),i,e)}}function fde(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function al(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function kpt(e){return e<0?"-"+al(-e,6):e>9999?"+"+al(e,6):al(e,4)}function Ppt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":kpt(e.getUTCFullYear())+"-"+al(e.getUTCMonth()+1,2)+"-"+al(e.getUTCDate(),2)+(i?"T"+al(t,2)+":"+al(n,2)+":"+al(r,2)+"."+al(i,3)+"Z":r?"T"+al(t,2)+":"+al(n,2)+":"+al(r,2)+"Z":n||t?"T"+al(t,2)+":"+al(n,2)+"Z":"")}function sTe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(d,f){var h,p,m=i(d,function(y,v){if(h)return h(y,v-1);p=y,h=f?Rpt(y,f):iTe(y)});return m.columns=p||[],m}function i(d,f){var h=[],p=d.length,m=0,y=0,v,w=p<=0,x=!1;d.charCodeAt(p-1)===XT&&--p,d.charCodeAt(p-1)===ZB&&--p;function S(){if(w)return QB;if(x)return x=!1,dde;var T,A=m,I;if(d.charCodeAt(A)===JB){for(;m++<p&&d.charCodeAt(m)!==JB||d.charCodeAt(++m)===JB;);return(T=m)>=p?w=!0:(I=d.charCodeAt(m++))===XT?x=!0:I===ZB&&(x=!0,d.charCodeAt(m)===XT&&++m),d.slice(A+1,T-1).replace(/""/g,'"')}for(;m<p;){if((I=d.charCodeAt(T=m++))===XT)x=!0;else if(I===ZB)x=!0,d.charCodeAt(m)===XT&&++m;else if(I!==n)continue;return d.slice(A,T)}return w=!0,d.slice(A,p)}for(;(v=S())!==QB;){for(var E=[];v!==dde&&v!==QB;)E.push(v),v=S();f&&(E=f(E,y++))==null||h.push(E)}return h}function s(d,f){return d.map(function(h){return f.map(function(p){return c(h[p])}).join(e)})}function o(d,f){return f==null&&(f=fde(d)),[f.map(c).join(e)].concat(s(d,f)).join(`
`)}function a(d,f){return f==null&&(f=fde(d)),s(d,f).join(`
`)}function u(d){return d.map(l).join(`
`)}function l(d){return d.map(c).join(e)}function c(d){return d==null?"":d instanceof Date?Ppt(d):t.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var Npt=sTe(","),Opt=Npt.parse;function Dpt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Mpt(e,t){return fetch(e,t).then(Dpt)}function $pt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Mpt(t,n).then(function(i){return e(i,r)})}}var Lpt=$pt(Opt);function Fpt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function jpt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return oTe(this.cover(t,n),t,n,e)}function oTe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,d,f,h,p,m,y,v,w;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(d=(a+l)/2))?a=d:l=d,(y=n>=(f=(u+c)/2))?u=f:c=f,i=s,!(s=s[v=y<<1|m]))return i[v]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[v]=o:e._root=o,e;do i=i?i[v]=new Array(4):e._root=new Array(4),(m=t>=(d=(a+l)/2))?a=d:l=d,(y=n>=(f=(u+c)/2))?u=f:c=f;while((v=y<<1|m)===(w=(p>=f)<<1|h>=d));return i[w]=s,i[v]=o,e}function Bpt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,d=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>d&&(d=s));if(u>c||l>d)return this;for(this.cover(u,l).cover(c,d),n=0;n<r;++n)oTe(this,o[n],a[n],e[n]);return this}function zpt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Upt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Vpt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Cu(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Hpt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,d=this._y1,f=[],h=this._root,p,m;for(h&&f.push(new Cu(h,i,s,c,d)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,d=t+n,n*=n);p=f.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>d||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var y=(o+u)/2,v=(a+l)/2;f.push(new Cu(h[3],y,v,u,l),new Cu(h[2],o,v,y,l),new Cu(h[1],y,a,u,v),new Cu(h[0],o,a,y,v)),(m=(t>=v)<<1|e>=y)&&(p=f[f.length-1],f[f.length-1]=f[f.length-1-m],f[f.length-1-m]=p)}else{var w=e-+this._x.call(null,h.data),x=t-+this._y.call(null,h.data),S=w*w+x*x;if(S<n){var E=Math.sqrt(n=S);i=e-E,s=t-E,c=e+E,d=t+E,r=h.data}}return r}function qpt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,d,f,h,p,m,y,v;if(!n)return this;if(n.length)for(;;){if((p=c>=(f=(o+u)/2))?o=f:u=f,(m=d>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[y=m<<1|p]))return this;if(!n.length)break;(t[y+1&3]||t[y+2&3]||t[y+3&3])&&(r=t,v=y)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[y]=s:delete t[y],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[v]=n:this._root=n),this):(this._root=s,this)}function Wpt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Gpt(){return this._root}function Ypt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Kpt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new Cu(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new Cu(i,l,c,a,u)),(i=r[2])&&t.push(new Cu(i,s,c,l,u)),(i=r[1])&&t.push(new Cu(i,l,o,a,c)),(i=r[0])&&t.push(new Cu(i,s,o,l,c))}return this}function Xpt(e){var t=[],n=[],r;for(this._root&&t.push(new Cu(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,d=(a+l)/2;(s=i[0])&&t.push(new Cu(s,o,a,c,d)),(s=i[1])&&t.push(new Cu(s,c,a,u,d)),(s=i[2])&&t.push(new Cu(s,o,d,c,l)),(s=i[3])&&t.push(new Cu(s,c,d,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Qpt(e){return e[0]}function Jpt(e){return arguments.length?(this._x=e,this):this._x}function Zpt(e){return e[1]}function emt(e){return arguments.length?(this._y=e,this):this._y}function BK(e,t,n){var r=new zK(t??Qpt,n??Zpt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function zK(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function hde(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var zu=BK.prototype=zK.prototype;zu.copy=function(){var e=new zK(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=hde(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=hde(r));return e};zu.add=jpt;zu.addAll=Bpt;zu.cover=zpt;zu.data=Upt;zu.extent=Vpt;zu.find=Hpt;zu.remove=qpt;zu.removeAll=Wpt;zu.root=Gpt;zu.size=Ypt;zu.visit=Kpt;zu.visitAfter=Xpt;zu.x=Jpt;zu.y=emt;function Iu(e){return function(){return e}}function U0(e){return(e()-.5)*1e-6}function tmt(e){return e.x+e.vx}function nmt(e){return e.y+e.vy}function rmt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Iu(e==null?1:+e));function o(){for(var l,c=t.length,d,f,h,p,m,y,v=0;v<s;++v)for(d=BK(t,tmt,nmt).visitAfter(a),l=0;l<c;++l)f=t[l],m=n[f.index],y=m*m,h=f.x+f.vx,p=f.y+f.vy,d.visit(w);function w(x,S,E,T,A){var I=x.data,k=x.r,D=m+k;if(I){if(I.index>f.index){var M=h-I.x-I.vx,z=p-I.y-I.vy,O=M*M+z*z;O<D*D&&(M===0&&(M=U0(r),O+=M*M),z===0&&(z=U0(r),O+=z*z),O=(D-(O=Math.sqrt(O)))/O*i,f.vx+=(M*=O)*(D=(k*=k)/(y+k)),f.vy+=(z*=O)*D,I.vx-=M*(D=1-D),I.vy-=z*D)}return}return S>h+D||T<h-D||E>p+D||A<p-D}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,d;for(n=new Array(c),l=0;l<c;++l)d=t[l],n[d.index]=+e(d,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Iu(+l),u(),o):e},o}function imt(e){return e.index}function pde(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function smt(e){var t=imt,n=d,r,i=Iu(30),s,o,a,u,l,c=1;e==null&&(e=[]);function d(y){return 1/Math.min(a[y.source.index],a[y.target.index])}function f(y){for(var v=0,w=e.length;v<c;++v)for(var x=0,S,E,T,A,I,k,D;x<w;++x)S=e[x],E=S.source,T=S.target,A=T.x+T.vx-E.x-E.vx||U0(l),I=T.y+T.vy-E.y-E.vy||U0(l),k=Math.sqrt(A*A+I*I),k=(k-s[x])/k*y*r[x],A*=k,I*=k,T.vx-=A*(D=u[x]),T.vy-=I*D,E.vx+=A*(D=1-D),E.vy+=I*D}function h(){if(o){var y,v=o.length,w=e.length,x=new Map(o.map((E,T)=>[t(E,T,o),E])),S;for(y=0,a=new Array(v);y<w;++y)S=e[y],S.index=y,typeof S.source!="object"&&(S.source=pde(x,S.source)),typeof S.target!="object"&&(S.target=pde(x,S.target)),a[S.source.index]=(a[S.source.index]||0)+1,a[S.target.index]=(a[S.target.index]||0)+1;for(y=0,u=new Array(w);y<w;++y)S=e[y],u[y]=a[S.source.index]/(a[S.source.index]+a[S.target.index]);r=new Array(w),p(),s=new Array(w),m()}}function p(){if(o)for(var y=0,v=e.length;y<v;++y)r[y]=+n(e[y],y,e)}function m(){if(o)for(var y=0,v=e.length;y<v;++y)s[y]=+i(e[y],y,e)}return f.initialize=function(y,v){o=y,l=v,h()},f.links=function(y){return arguments.length?(e=y,h(),f):e},f.id=function(y){return arguments.length?(t=y,f):t},f.iterations=function(y){return arguments.length?(c=+y,f):c},f.strength=function(y){return arguments.length?(n=typeof y=="function"?y:Iu(+y),p(),f):n},f.distance=function(y){return arguments.length?(i=typeof y=="function"?y:Iu(+y),m(),f):i},f}const omt=1664525,amt=1013904223,mde=4294967296;function umt(){let e=1;return()=>(e=(omt*e+amt)%mde)/mde}function lmt(e){return e.x}function cmt(e){return e.y}var dmt=10,fmt=Math.PI*(3-Math.sqrt(5));function hmt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=MK(d),l=CK("tick","end"),c=umt();e==null&&(e=[]);function d(){f(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function f(m){var y,v=e.length,w;m===void 0&&(m=1);for(var x=0;x<m;++x)for(n+=(s-n)*i,a.forEach(function(S){S(n)}),y=0;y<v;++y)w=e[y],w.fx==null?w.x+=w.vx*=o:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=o:(w.y=w.fy,w.vy=0);return t}function h(){for(var m=0,y=e.length,v;m<y;++m){if(v=e[m],v.index=m,v.fx!=null&&(v.x=v.fx),v.fy!=null&&(v.y=v.fy),isNaN(v.x)||isNaN(v.y)){var w=dmt*Math.sqrt(.5+m),x=m*fmt;v.x=w*Math.cos(x),v.y=w*Math.sin(x)}(isNaN(v.vx)||isNaN(v.vy))&&(v.vx=v.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:f,restart:function(){return u.restart(d),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,y){return arguments.length>1?(y==null?a.delete(m):a.set(m,p(y)),t):a.get(m)},find:function(m,y,v){var w=0,x=e.length,S,E,T,A,I;for(v==null?v=1/0:v*=v,w=0;w<x;++w)A=e[w],S=m-A.x,E=y-A.y,T=S*S+E*E,T<v&&(I=A,v=T);return I},on:function(m,y){return arguments.length>1?(l.on(m,y),t):l.on(m)}}}function pmt(){var e,t,n,r,i=Iu(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,y=BK(e,lmt,cmt).visitAfter(d);for(r=h,p=0;p<m;++p)t=e[p],y.visit(f)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function d(h){var p=0,m,y,v=0,w,x,S;if(h.length){for(w=x=S=0;S<4;++S)(m=h[S])&&(y=Math.abs(m.value))&&(p+=m.value,v+=y,w+=y*m.x,x+=y*m.y);h.x=w/v,h.y=x/v}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function f(h,p,m,y){if(!h.value)return!0;var v=h.x-t.x,w=h.y-t.y,x=y-p,S=v*v+w*w;if(x*x/u<S)return S<a&&(v===0&&(v=U0(n),S+=v*v),w===0&&(w=U0(n),S+=w*w),S<o&&(S=Math.sqrt(o*S)),t.vx+=v*h.value*r/S,t.vy+=w*h.value*r/S),!0;if(h.length||S>=a)return;(h.data!==t||h.next)&&(v===0&&(v=U0(n),S+=v*v),w===0&&(w=U0(n),S+=w*w),S<o&&(S=Math.sqrt(o*S)));do h.data!==t&&(x=s[h.data.index]*r/S,t.vx+=v*x,t.vy+=w*x);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Iu(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function mmt(e){var t=Iu(.1),n,r,i;typeof e!="function"&&(e=Iu(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Iu(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Iu(+a),o(),s):e},s}function gmt(e){var t=Iu(.1),n,r,i;typeof e!="function"&&(e=Iu(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Iu(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Iu(+a),o(),s):e},s}function ymt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function WM(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function tE(e){return e=WM(Math.abs(e)),e?e[1]:NaN}function vmt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function bmt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var _mt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function mb(e){if(!(t=_mt.exec(e)))throw new Error("invalid format: "+e);var t;return new UK({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}mb.prototype=UK.prototype;function UK(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}UK.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function wmt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var aTe;function xmt(e,t){var n=WM(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(aTe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+WM(e,Math.max(0,t+s-1))[0]}function gde(e,t){var n=WM(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const yde={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:ymt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>gde(e*100,t),r:gde,s:xmt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function vde(e){return e}var bde=Array.prototype.map,_de=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function uTe(e){var t=e.grouping===void 0||e.thousands===void 0?vde:vmt(bde.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?vde:bmt(bde.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(d){d=mb(d);var f=d.fill,h=d.align,p=d.sign,m=d.symbol,y=d.zero,v=d.width,w=d.comma,x=d.precision,S=d.trim,E=d.type;E==="n"?(w=!0,E="g"):yde[E]||(x===void 0&&(x=12),S=!0,E="g"),(y||f==="0"&&h==="=")&&(y=!0,f="0",h="=");var T=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",A=m==="$"?r:/[%p]/.test(E)?o:"",I=yde[E],k=/[defgprs%]/.test(E);x=x===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function D(M){var z=T,O=A,$,F,B;if(E==="c")O=I(M)+O,M="";else{M=+M;var q=M<0||1/M<0;if(M=isNaN(M)?u:I(Math.abs(M),x),S&&(M=wmt(M)),q&&+M==0&&p!=="+"&&(q=!1),z=(q?p==="("?p:a:p==="-"||p==="("?"":p)+z,O=(E==="s"?_de[8+aTe/3]:"")+O+(q&&p==="("?")":""),k){for($=-1,F=M.length;++$<F;)if(B=M.charCodeAt($),48>B||B>57){O=(B===46?i+M.slice($+1):M.slice($))+O,M=M.slice(0,$);break}}}w&&!y&&(M=t(M,1/0));var G=z.length+M.length+O.length,K=G<v?new Array(v-G+1).join(f):"";switch(w&&y&&(M=t(K+M,K.length?v-O.length:1/0),K=""),h){case"<":M=z+M+O+K;break;case"=":M=z+K+M+O;break;case"^":M=K.slice(0,G=K.length>>1)+z+M+O+K.slice(G);break;default:M=K+z+M+O;break}return s(M)}return D.toString=function(){return d+""},D}function c(d,f){var h=l((d=mb(d),d.type="f",d)),p=Math.max(-8,Math.min(8,Math.floor(tE(f)/3)))*3,m=Math.pow(10,-p),y=_de[8+p/3];return function(v){return h(m*v)+y}}return{format:l,formatPrefix:c}}var UN,ip,VK;Emt({thousands:",",grouping:[3],currency:["$",""]});function Emt(e){return UN=uTe(e),ip=UN.format,VK=UN.formatPrefix,UN}function lTe(e){return Math.max(0,-tE(Math.abs(e)))}function cTe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(tE(t)/3)))*3-tE(Math.abs(e)))}function dTe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,tE(t)-tE(e))+1}var _n=1e-6,Y7=1e-12,br=Math.PI,Rs=br/2,GM=br/4,Du=br*2,js=180/br,pr=br/180,Or=Math.abs,vS=Math.atan,xd=Math.atan2,yn=Math.cos,VN=Math.ceil,fTe=Math.exp,K7=Math.hypot,YM=Math.log,e9=Math.pow,ln=Math.sin,pd=Math.sign||function(e){return e>0?1:e<0?-1:0},Mu=Math.sqrt,HK=Math.tan;function hTe(e){return e>1?0:e<-1?br:Math.acos(e)}function kl(e){return e>1?Rs:e<-1?-Rs:Math.asin(e)}function va(){}function KM(e,t){e&&xde.hasOwnProperty(e.type)&&xde[e.type](e,t)}var wde={Feature:function(e,t){KM(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)KM(n[r].geometry,t)}},xde={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){X7(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)X7(n[r],t,0)},Polygon:function(e,t){Ede(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Ede(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)KM(n[r],t)}};function X7(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Ede(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)X7(e[n],t,1);t.polygonEnd()}function Im(e,t){e&&wde.hasOwnProperty(e.type)?wde[e.type](e,t):KM(e,t)}var XM=new ku,QM=new ku,pTe,mTe,Q7,J7,Z7,gp={point:va,lineStart:va,lineEnd:va,polygonStart:function(){XM=new ku,gp.lineStart=Smt,gp.lineEnd=Tmt},polygonEnd:function(){var e=+XM;QM.add(e<0?Du+e:e),this.lineStart=this.lineEnd=this.point=va},sphere:function(){QM.add(Du)}};function Smt(){gp.point=Cmt}function Tmt(){gTe(pTe,mTe)}function Cmt(e,t){gp.point=gTe,pTe=e,mTe=t,e*=pr,t*=pr,Q7=e,J7=yn(t=t/2+GM),Z7=ln(t)}function gTe(e,t){e*=pr,t*=pr,t=t/2+GM;var n=e-Q7,r=n>=0?1:-1,i=r*n,s=yn(t),o=ln(t),a=Z7*o,u=J7*s+a*yn(i),l=a*r*ln(i);XM.add(xd(l,u)),Q7=e,J7=s,Z7=o}function Amt(e){return QM=new ku,Im(e,gp),QM*2}function JM(e){return[xd(e[1],e[0]),kl(e[2])]}function gb(e){var t=e[0],n=e[1],r=yn(n);return[r*yn(t),r*ln(t),ln(n)]}function HN(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function nE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function t9(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function qN(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function ZM(e){var t=Mu(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var hs,fl,xs,rc,p1,yTe,vTe,bx,jA,S0,ag,Sm={point:eV,lineStart:Sde,lineEnd:Tde,polygonStart:function(){Sm.point=_Te,Sm.lineStart=Imt,Sm.lineEnd=Rmt,jA=new ku,gp.polygonStart()},polygonEnd:function(){gp.polygonEnd(),Sm.point=eV,Sm.lineStart=Sde,Sm.lineEnd=Tde,XM<0?(hs=-(xs=180),fl=-(rc=90)):jA>_n?rc=90:jA<-1e-6&&(fl=-90),ag[0]=hs,ag[1]=xs},sphere:function(){hs=-(xs=180),fl=-(rc=90)}};function eV(e,t){S0.push(ag=[hs=e,xs=e]),t<fl&&(fl=t),t>rc&&(rc=t)}function bTe(e,t){var n=gb([e*pr,t*pr]);if(bx){var r=nE(bx,n),i=[r[1],-r[0],0],s=nE(i,r);ZM(s),s=JM(s);var o=e-p1,a=o>0?1:-1,u=s[0]*js*a,l,c=Or(o)>180;c^(a*p1<u&&u<a*e)?(l=s[1]*js,l>rc&&(rc=l)):(u=(u+360)%360-180,c^(a*p1<u&&u<a*e)?(l=-s[1]*js,l<fl&&(fl=l)):(t<fl&&(fl=t),t>rc&&(rc=t))),c?e<p1?ec(hs,e)>ec(hs,xs)&&(xs=e):ec(e,xs)>ec(hs,xs)&&(hs=e):xs>=hs?(e<hs&&(hs=e),e>xs&&(xs=e)):e>p1?ec(hs,e)>ec(hs,xs)&&(xs=e):ec(e,xs)>ec(hs,xs)&&(hs=e)}else S0.push(ag=[hs=e,xs=e]);t<fl&&(fl=t),t>rc&&(rc=t),bx=n,p1=e}function Sde(){Sm.point=bTe}function Tde(){ag[0]=hs,ag[1]=xs,Sm.point=eV,bx=null}function _Te(e,t){if(bx){var n=e-p1;jA.add(Or(n)>180?n+(n>0?360:-360):n)}else yTe=e,vTe=t;gp.point(e,t),bTe(e,t)}function Imt(){gp.lineStart()}function Rmt(){_Te(yTe,vTe),gp.lineEnd(),Or(jA)>_n&&(hs=-(xs=180)),ag[0]=hs,ag[1]=xs,bx=null}function ec(e,t){return(t-=e)<0?t+360:t}function kmt(e,t){return e[0]-t[0]}function Cde(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Pmt(e){var t,n,r,i,s,o,a;if(rc=xs=-(hs=fl=1/0),S0=[],Im(e,Sm),n=S0.length){for(S0.sort(kmt),t=1,r=S0[0],s=[r];t<n;++t)i=S0[t],Cde(r,i[0])||Cde(r,i[1])?(ec(r[0],i[1])>ec(r[0],r[1])&&(r[1]=i[1]),ec(i[0],r[1])>ec(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=ec(r[1],i[0]))>o&&(o=a,hs=i[0],xs=r[1])}return S0=ag=null,hs===1/0||fl===1/0?[[NaN,NaN],[NaN,NaN]]:[[hs,fl],[xs,rc]]}var BC,e3,t3,n3,r3,i3,s3,o3,tV,nV,rV,wTe,xTe,Eu,Su,Tu,_f={sphere:va,point:qK,lineStart:Ade,lineEnd:Ide,polygonStart:function(){_f.lineStart=Dmt,_f.lineEnd=Mmt},polygonEnd:function(){_f.lineStart=Ade,_f.lineEnd=Ide}};function qK(e,t){e*=pr,t*=pr;var n=yn(t);mR(n*yn(e),n*ln(e),ln(t))}function mR(e,t,n){++BC,t3+=(e-t3)/BC,n3+=(t-n3)/BC,r3+=(n-r3)/BC}function Ade(){_f.point=Nmt}function Nmt(e,t){e*=pr,t*=pr;var n=yn(t);Eu=n*yn(e),Su=n*ln(e),Tu=ln(t),_f.point=Omt,mR(Eu,Su,Tu)}function Omt(e,t){e*=pr,t*=pr;var n=yn(t),r=n*yn(e),i=n*ln(e),s=ln(t),o=xd(Mu((o=Su*s-Tu*i)*o+(o=Tu*r-Eu*s)*o+(o=Eu*i-Su*r)*o),Eu*r+Su*i+Tu*s);e3+=o,i3+=o*(Eu+(Eu=r)),s3+=o*(Su+(Su=i)),o3+=o*(Tu+(Tu=s)),mR(Eu,Su,Tu)}function Ide(){_f.point=qK}function Dmt(){_f.point=$mt}function Mmt(){ETe(wTe,xTe),_f.point=qK}function $mt(e,t){wTe=e,xTe=t,e*=pr,t*=pr,_f.point=ETe;var n=yn(t);Eu=n*yn(e),Su=n*ln(e),Tu=ln(t),mR(Eu,Su,Tu)}function ETe(e,t){e*=pr,t*=pr;var n=yn(t),r=n*yn(e),i=n*ln(e),s=ln(t),o=Su*s-Tu*i,a=Tu*r-Eu*s,u=Eu*i-Su*r,l=K7(o,a,u),c=kl(l),d=l&&-c/l;tV.add(d*o),nV.add(d*a),rV.add(d*u),e3+=c,i3+=c*(Eu+(Eu=r)),s3+=c*(Su+(Su=i)),o3+=c*(Tu+(Tu=s)),mR(Eu,Su,Tu)}function Lmt(e){BC=e3=t3=n3=r3=i3=s3=o3=0,tV=new ku,nV=new ku,rV=new ku,Im(e,_f);var t=+tV,n=+nV,r=+rV,i=K7(t,n,r);return i<Y7&&(t=i3,n=s3,r=o3,e3<_n&&(t=t3,n=n3,r=r3),i=K7(t,n,r),i<Y7)?[NaN,NaN]:[xd(n,t)*js,kl(r/i)*js]}function iV(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function sV(e,t){return Or(e)>br&&(e-=Math.round(e/Du)*Du),[e,t]}sV.invert=sV;function STe(e,t,n){return(e%=Du)?t||n?iV(kde(e),Pde(t,n)):kde(e):t||n?Pde(t,n):sV}function Rde(e){return function(t,n){return t+=e,Or(t)>br&&(t-=Math.round(t/Du)*Du),[t,n]}}function kde(e){var t=Rde(e);return t.invert=Rde(-e),t}function Pde(e,t){var n=yn(e),r=ln(e),i=yn(t),s=ln(t);function o(a,u){var l=yn(u),c=yn(a)*l,d=ln(a)*l,f=ln(u),h=f*n+c*r;return[xd(d*i-h*s,c*n-f*r),kl(h*i+d*s)]}return o.invert=function(a,u){var l=yn(u),c=yn(a)*l,d=ln(a)*l,f=ln(u),h=f*i-d*s;return[xd(d*i+f*s,c*n+h*r),kl(h*n-c*r)]},o}function Fmt(e){e=STe(e[0]*pr,e[1]*pr,e.length>2?e[2]*pr:0);function t(n){return n=e(n[0]*pr,n[1]*pr),n[0]*=js,n[1]*=js,n}return t.invert=function(n){return n=e.invert(n[0]*pr,n[1]*pr),n[0]*=js,n[1]*=js,n},t}function jmt(e,t,n,r,i,s){if(n){var o=yn(t),a=ln(t),u=r*n;i==null?(i=t+r*Du,s=t-u/2):(i=Nde(o,i),s=Nde(o,s),(r>0?i<s:i>s)&&(i+=r*Du));for(var l,c=i;r>0?c>s:c<s;c-=u)l=JM([o,-a*yn(c),-a*ln(c)]),e.point(l[0],l[1])}}function Nde(e,t){t=gb(t),t[0]-=e,ZM(t);var n=hTe(-t[1]);return((-t[2]<0?-n:n)+Du-_n)%Du}function TTe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:va,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function fD(e,t){return Or(e[0]-t[0])<_n&&Or(e[1]-t[1])<_n}function WN(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function CTe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,y=p[0],v=p[m],w;if(fD(y,v)){if(!y[2]&&!v[2]){for(i.lineStart(),a=0;a<m;++a)i.point((y=p[a])[0],y[1]);i.lineEnd();return}v[0]+=2*_n}s.push(w=new WN(y,p,null,!0)),o.push(w.o=new WN(y,null,w,!1)),s.push(w=new WN(v,p,null,!1)),o.push(w.o=new WN(v,null,w,!0))}}),!!s.length){for(o.sort(t),Ode(s),Ode(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,d;;){for(var f=l,h=!0;f.v;)if((f=f.n)===l)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((d=c[a])[0],d[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(h)for(c=f.p.z,a=c.length-1;a>=0;--a)i.point((d=c[a])[0],d[1]);else r(f.x,f.p.x,-1,i);f=f.p}f=f.o,c=f.z,h=!h}while(!f.v);i.lineEnd()}}}function Ode(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function n9(e){return Or(e[0])<=br?e[0]:pd(e[0])*((Or(e[0])+br)%Du-br)}function Bmt(e,t){var n=n9(t),r=t[1],i=ln(r),s=[ln(n),-yn(n),0],o=0,a=0,u=new ku;i===1?r=Rs+_n:i===-1&&(r=-Rs-_n);for(var l=0,c=e.length;l<c;++l)if(f=(d=e[l]).length)for(var d,f,h=d[f-1],p=n9(h),m=h[1]/2+GM,y=ln(m),v=yn(m),w=0;w<f;++w,p=S,y=T,v=A,h=x){var x=d[w],S=n9(x),E=x[1]/2+GM,T=ln(E),A=yn(E),I=S-p,k=I>=0?1:-1,D=k*I,M=D>br,z=y*T;if(u.add(xd(z*k*ln(D),v*A+z*yn(D))),o+=M?I+k*Du:I,M^p>=n^S>=n){var O=nE(gb(h),gb(x));ZM(O);var $=nE(s,O);ZM($);var F=(M^I>=0?-1:1)*kl($[2]);(r>F||r===F&&(O[0]||O[1]))&&(a+=M^I>=0?1:-1)}}return(o<-1e-6||o<_n&&u<-1e-12)^a&1}function ATe(e,t,n,r){return function(i){var s=t(i),o=TTe(),a=t(o),u=!1,l,c,d,f={point:h,lineStart:m,lineEnd:y,polygonStart:function(){f.point=v,f.lineStart=w,f.lineEnd=x,c=[],l=[]},polygonEnd:function(){f.point=h,f.lineStart=m,f.lineEnd=y,c=fSe(c);var S=Bmt(l,r);c.length?(u||(i.polygonStart(),u=!0),CTe(c,Umt,S,n,i)):S&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(S,E){e(S,E)&&i.point(S,E)}function p(S,E){s.point(S,E)}function m(){f.point=p,s.lineStart()}function y(){f.point=h,s.lineEnd()}function v(S,E){d.push([S,E]),a.point(S,E)}function w(){a.lineStart(),d=[]}function x(){v(d[0][0],d[0][1]),a.lineEnd();var S=a.clean(),E=o.result(),T,A=E.length,I,k,D;if(d.pop(),l.push(d),d=null,!!A){if(S&1){if(k=E[0],(I=k.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),T=0;T<I;++T)i.point((D=k[T])[0],D[1]);i.lineEnd()}return}A>1&&S&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(zmt))}}return f}}function zmt(e){return e.length>1}function Umt(e,t){return((e=e.x)[0]<0?e[1]-Rs-_n:Rs-e[1])-((t=t.x)[0]<0?t[1]-Rs-_n:Rs-t[1])}const Dde=ATe(function(){return!0},Vmt,qmt,[-br,-Rs]);function Vmt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?br:-br,u=Or(s-t);Or(u-br)<_n?(e.point(t,n=(n+o)/2>0?Rs:-Rs),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=br&&(Or(t-r)<_n&&(t-=r*_n),Or(s-a)<_n&&(s-=a*_n),n=Hmt(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Hmt(e,t,n,r){var i,s,o=ln(e-n);return Or(o)>_n?vS((ln(t)*(s=yn(r))*ln(n)-ln(r)*(i=yn(t))*ln(e))/(i*s*o)):(t+r)/2}function qmt(e,t,n,r){var i;if(e==null)i=n*Rs,r.point(-br,i),r.point(0,i),r.point(br,i),r.point(br,0),r.point(br,-i),r.point(0,-i),r.point(-br,-i),r.point(-br,0),r.point(-br,i);else if(Or(e[0]-t[0])>_n){var s=e[0]<t[0]?br:-br;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function Wmt(e){var t=yn(e),n=2*pr,r=t>0,i=Or(t)>_n;function s(c,d,f,h){jmt(h,e,n,f,c,d)}function o(c,d){return yn(c)*yn(d)>t}function a(c){var d,f,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(y,v){var w=[y,v],x,S=o(y,v),E=r?S?0:l(y,v):S?l(y+(y<0?br:-br),v):0;if(!d&&(p=h=S)&&c.lineStart(),S!==h&&(x=u(d,w),(!x||fD(d,x)||fD(w,x))&&(w[2]=1)),S!==h)m=0,S?(c.lineStart(),x=u(w,d),c.point(x[0],x[1])):(x=u(d,w),c.point(x[0],x[1],2),c.lineEnd()),d=x;else if(i&&d&&r^S){var T;!(E&f)&&(T=u(w,d,!0))&&(m=0,r?(c.lineStart(),c.point(T[0][0],T[0][1]),c.point(T[1][0],T[1][1]),c.lineEnd()):(c.point(T[1][0],T[1][1]),c.lineEnd(),c.lineStart(),c.point(T[0][0],T[0][1],3)))}S&&(!d||!fD(d,w))&&c.point(w[0],w[1]),d=w,h=S,f=E},lineEnd:function(){h&&c.lineEnd(),d=null},clean:function(){return m|(p&&h)<<1}}}function u(c,d,f){var h=gb(c),p=gb(d),m=[1,0,0],y=nE(h,p),v=HN(y,y),w=y[0],x=v-w*w;if(!x)return!f&&c;var S=t*v/x,E=-t*w/x,T=nE(m,y),A=qN(m,S),I=qN(y,E);t9(A,I);var k=T,D=HN(A,k),M=HN(k,k),z=D*D-M*(HN(A,A)-1);if(!(z<0)){var O=Mu(z),$=qN(k,(-D-O)/M);if(t9($,A),$=JM($),!f)return $;var F=c[0],B=d[0],q=c[1],G=d[1],K;B<F&&(K=F,F=B,B=K);var L=B-F,V=Or(L-br)<_n,X=V||L<_n;if(!V&&G<q&&(K=q,q=G,G=K),X?V?q+G>0^$[1]<(Or($[0]-F)<_n?q:G):q<=$[1]&&$[1]<=G:L>br^(F<=$[0]&&$[0]<=B)){var H=qN(k,(-D+O)/M);return t9(H,A),[$,JM(H)]}}}function l(c,d){var f=r?e:br-e,h=0;return c<-f?h|=1:c>f&&(h|=2),d<-f?h|=4:d>f&&(h|=8),h}return ATe(o,a,s,r?[0,-e]:[-br,e-br])}function Gmt(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,d=1,f=u-o,h=l-a,p;if(p=n-o,!(!f&&p>0)){if(p/=f,f<0){if(p<c)return;p<d&&(d=p)}else if(f>0){if(p>d)return;p>c&&(c=p)}if(p=i-o,!(!f&&p<0)){if(p/=f,f<0){if(p>d)return;p>c&&(c=p)}else if(f>0){if(p<c)return;p<d&&(d=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<d&&(d=p)}else if(h>0){if(p>d)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>d)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<d&&(d=p)}return c>0&&(e[0]=o+c*f,e[1]=a+c*h),d<1&&(t[0]=o+d*f,t[1]=a+d*h),!0}}}}}var GN=1e9,YN=-1e9;function ITe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,d,f){var h=0,p=0;if(l==null||(h=o(l,d))!==(p=o(c,d))||u(l,c)<0^d>0)do f.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+d+4)%4)!==p);else f.point(c[0],c[1])}function o(l,c){return Or(l[0]-e)<_n?c>0?0:3:Or(l[0]-n)<_n?c>0?2:1:Or(l[1]-t)<_n?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var d=o(l,1),f=o(c,1);return d!==f?d-f:d===0?c[1]-l[1]:d===1?l[0]-c[0]:d===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,d=TTe(),f,h,p,m,y,v,w,x,S,E,T,A={point:I,lineStart:z,lineEnd:O,polygonStart:D,polygonEnd:M};function I(F,B){i(F,B)&&c.point(F,B)}function k(){for(var F=0,B=0,q=h.length;B<q;++B)for(var G=h[B],K=1,L=G.length,V=G[0],X,H,Q=V[0],Z=V[1];K<L;++K)X=Q,H=Z,V=G[K],Q=V[0],Z=V[1],H<=r?Z>r&&(Q-X)*(r-H)>(Z-H)*(e-X)&&++F:Z<=r&&(Q-X)*(r-H)<(Z-H)*(e-X)&&--F;return F}function D(){c=d,f=[],h=[],T=!0}function M(){var F=k(),B=T&&F,q=(f=fSe(f)).length;(B||q)&&(l.polygonStart(),B&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),q&&CTe(f,a,F,s,l),l.polygonEnd()),c=l,f=h=p=null}function z(){A.point=$,h&&h.push(p=[]),E=!0,S=!1,w=x=NaN}function O(){f&&($(m,y),v&&S&&d.rejoin(),f.push(d.result())),A.point=I,S&&c.lineEnd()}function $(F,B){var q=i(F,B);if(h&&p.push([F,B]),E)m=F,y=B,v=q,E=!1,q&&(c.lineStart(),c.point(F,B));else if(q&&S)c.point(F,B);else{var G=[w=Math.max(YN,Math.min(GN,w)),x=Math.max(YN,Math.min(GN,x))],K=[F=Math.max(YN,Math.min(GN,F)),B=Math.max(YN,Math.min(GN,B))];Gmt(G,K,e,t,n,r)?(S||(c.lineStart(),c.point(G[0],G[1])),c.point(K[0],K[1]),q||c.lineEnd(),T=!1):q&&(c.lineStart(),c.point(F,B),T=!1)}w=F,x=B,S=q}return A}}function Mde(e,t,n){var r=cc(e,t-_n,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function $de(e,t,n){var r=cc(e,t-_n,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function Ymt(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,d=360,f,h,p,m,y=2.5;function v(){return{type:"MultiLineString",coordinates:w()}}function w(){return cc(VN(r/c)*c,n,c).map(p).concat(cc(VN(a/d)*d,o,d).map(m)).concat(cc(VN(t/u)*u,e,u).filter(function(x){return Or(x%c)>_n}).map(f)).concat(cc(VN(s/l)*l,i,l).filter(function(x){return Or(x%d)>_n}).map(h))}return v.lines=function(){return w().map(function(x){return{type:"LineString",coordinates:x}})},v.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},v.extent=function(x){return arguments.length?v.extentMajor(x).extentMinor(x):v.extentMinor()},v.extentMajor=function(x){return arguments.length?(r=+x[0][0],n=+x[1][0],a=+x[0][1],o=+x[1][1],r>n&&(x=r,r=n,n=x),a>o&&(x=a,a=o,o=x),v.precision(y)):[[r,a],[n,o]]},v.extentMinor=function(x){return arguments.length?(t=+x[0][0],e=+x[1][0],s=+x[0][1],i=+x[1][1],t>e&&(x=t,t=e,e=x),s>i&&(x=s,s=i,i=x),v.precision(y)):[[t,s],[e,i]]},v.step=function(x){return arguments.length?v.stepMajor(x).stepMinor(x):v.stepMinor()},v.stepMajor=function(x){return arguments.length?(c=+x[0],d=+x[1],v):[c,d]},v.stepMinor=function(x){return arguments.length?(u=+x[0],l=+x[1],v):[u,l]},v.precision=function(x){return arguments.length?(y=+x,f=Mde(s,i,90),h=$de(t,e,y),p=Mde(a,o,90),m=$de(r,n,y),v):y},v.extentMajor([[-180,-90+_n],[180,90-_n]]).extentMinor([[-180,-80-_n],[180,80+_n]])}const D2=e=>e;var r9=new ku,oV=new ku,RTe,kTe,aV,uV,Rm={point:va,lineStart:va,lineEnd:va,polygonStart:function(){Rm.lineStart=Kmt,Rm.lineEnd=Qmt},polygonEnd:function(){Rm.lineStart=Rm.lineEnd=Rm.point=va,r9.add(Or(oV)),oV=new ku},result:function(){var e=r9/2;return r9=new ku,e}};function Kmt(){Rm.point=Xmt}function Xmt(e,t){Rm.point=PTe,RTe=aV=e,kTe=uV=t}function PTe(e,t){oV.add(uV*e-aV*t),aV=e,uV=t}function Qmt(){PTe(RTe,kTe)}var rE=1/0,a3=rE,M2=-rE,u3=M2,l3={point:Jmt,lineStart:va,lineEnd:va,polygonStart:va,polygonEnd:va,result:function(){var e=[[rE,a3],[M2,u3]];return M2=u3=-(a3=rE=1/0),e}};function Jmt(e,t){e<rE&&(rE=e),e>M2&&(M2=e),t<a3&&(a3=t),t>u3&&(u3=t)}var lV=0,cV=0,zC=0,c3=0,d3=0,ex=0,dV=0,fV=0,UC=0,NTe,OTe,Bh,zh,ud={point:yb,lineStart:Lde,lineEnd:Fde,polygonStart:function(){ud.lineStart=tgt,ud.lineEnd=ngt},polygonEnd:function(){ud.point=yb,ud.lineStart=Lde,ud.lineEnd=Fde},result:function(){var e=UC?[dV/UC,fV/UC]:ex?[c3/ex,d3/ex]:zC?[lV/zC,cV/zC]:[NaN,NaN];return lV=cV=zC=c3=d3=ex=dV=fV=UC=0,e}};function yb(e,t){lV+=e,cV+=t,++zC}function Lde(){ud.point=Zmt}function Zmt(e,t){ud.point=egt,yb(Bh=e,zh=t)}function egt(e,t){var n=e-Bh,r=t-zh,i=Mu(n*n+r*r);c3+=i*(Bh+e)/2,d3+=i*(zh+t)/2,ex+=i,yb(Bh=e,zh=t)}function Fde(){ud.point=yb}function tgt(){ud.point=rgt}function ngt(){DTe(NTe,OTe)}function rgt(e,t){ud.point=DTe,yb(NTe=Bh=e,OTe=zh=t)}function DTe(e,t){var n=e-Bh,r=t-zh,i=Mu(n*n+r*r);c3+=i*(Bh+e)/2,d3+=i*(zh+t)/2,ex+=i,i=zh*e-Bh*t,dV+=i*(Bh+e),fV+=i*(zh+t),UC+=i*3,yb(Bh=e,zh=t)}function MTe(e){this._context=e}MTe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Du);break}}},result:va};var hV=new ku,i9,$Te,LTe,VC,HC,$2={point:va,lineStart:function(){$2.point=igt},lineEnd:function(){i9&&FTe($Te,LTe),$2.point=va},polygonStart:function(){i9=!0},polygonEnd:function(){i9=null},result:function(){var e=+hV;return hV=new ku,e}};function igt(e,t){$2.point=FTe,$Te=VC=e,LTe=HC=t}function FTe(e,t){VC-=e,HC-=t,hV.add(Mu(VC*VC+HC*HC)),VC=e,HC=t}let jde,f3,Bde,zde;class Ude{constructor(t){this._append=t==null?jTe:sgt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Bde||this._append!==f3){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Bde=r,f3=this._append,zde=this._,this._=i}this._+=zde;break}}}result(){const t=this._;return this._="",t.length?t:null}}function jTe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function sgt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return jTe;if(t!==jde){const n=10**t;jde=t,f3=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return f3}function BTe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Im(a,i(s))),s.result()}return o.area=function(a){return Im(a,i(Rm)),Rm.result()},o.measure=function(a){return Im(a,i($2)),$2.result()},o.bounds=function(a){return Im(a,i(l3)),l3.result()},o.centroid=function(a){return Im(a,i(ud)),ud.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,D2):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new Ude(n)):new MTe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new Ude(n)),o},o.projection(e).digits(n).context(t)}function WF(e){return function(t){var n=new pV;for(var r in e)n[r]=e[r];return n.stream=t,n}}function pV(){}pV.prototype={constructor:pV,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function WK(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Im(n,e.stream(l3)),t(l3.result()),r!=null&&e.clipExtent(r),e}function GF(e,t,n){return WK(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function GK(e,t,n){return GF(e,[[0,0],t],n)}function YK(e,t,n){return WK(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function KK(e,t,n){return WK(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Vde=16,ogt=yn(30*pr);function Hde(e,t){return+t?ugt(e,t):agt(e)}function agt(e){return WF({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function ugt(e,t){function n(r,i,s,o,a,u,l,c,d,f,h,p,m,y){var v=l-r,w=c-i,x=v*v+w*w;if(x>4*t&&m--){var S=o+f,E=a+h,T=u+p,A=Mu(S*S+E*E+T*T),I=kl(T/=A),k=Or(Or(T)-1)<_n||Or(s-d)<_n?(s+d)/2:xd(E,S),D=e(k,I),M=D[0],z=D[1],O=M-r,$=z-i,F=w*O-v*$;(F*F/x>t||Or((v*O+w*$)/x-.5)>.3||o*f+a*h+u*p<ogt)&&(n(r,i,s,o,a,u,M,z,k,S/=A,E/=A,T,m,y),y.point(M,z),n(M,z,k,S,E,T,l,c,d,f,h,p,m,y))}}return function(r){var i,s,o,a,u,l,c,d,f,h,p,m,y={point:v,lineStart:w,lineEnd:S,polygonStart:function(){r.polygonStart(),y.lineStart=E},polygonEnd:function(){r.polygonEnd(),y.lineStart=w}};function v(I,k){I=e(I,k),r.point(I[0],I[1])}function w(){d=NaN,y.point=x,r.lineStart()}function x(I,k){var D=gb([I,k]),M=e(I,k);n(d,f,c,h,p,m,d=M[0],f=M[1],c=I,h=D[0],p=D[1],m=D[2],Vde,r),r.point(d,f)}function S(){y.point=v,r.lineEnd()}function E(){w(),y.point=T,y.lineEnd=A}function T(I,k){x(i=I,k),s=d,o=f,a=h,u=p,l=m,y.point=x}function A(){n(d,f,c,h,p,m,s,o,i,a,u,l,Vde,r),y.lineEnd=S,S()}return y}}var lgt=WF({point:function(e,t){this.stream.point(e*pr,t*pr)}});function cgt(e){return WF({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function dgt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function qde(e,t,n,r,i,s){if(!s)return dgt(e,t,n,r,i);var o=yn(s),a=ln(s),u=o*e,l=a*e,c=o/e,d=a/e,f=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,y){return m*=r,y*=i,[u*m-l*y+t,n-l*m-u*y]}return p.invert=function(m,y){return[r*(c*m-d*y+f),i*(h-d*m-c*y)]},p}function Fp(e){return zTe(function(){return e})()}function zTe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,d=0,f=1,h=1,p=null,m=Dde,y=null,v,w,x,S=D2,E=.5,T,A,I,k,D;function M(F){return I(F[0]*pr,F[1]*pr)}function z(F){return F=I.invert(F[0],F[1]),F&&[F[0]*js,F[1]*js]}M.stream=function(F){return k&&D===F?k:k=lgt(cgt(c)(m(T(S(D=F)))))},M.preclip=function(F){return arguments.length?(m=F,p=void 0,$()):m},M.postclip=function(F){return arguments.length?(S=F,y=v=w=x=null,$()):S},M.clipAngle=function(F){return arguments.length?(m=+F?Wmt(p=F*pr):(p=null,Dde),$()):p*js},M.clipExtent=function(F){return arguments.length?(S=F==null?(y=v=w=x=null,D2):ITe(y=+F[0][0],v=+F[0][1],w=+F[1][0],x=+F[1][1]),$()):y==null?null:[[y,v],[w,x]]},M.scale=function(F){return arguments.length?(n=+F,O()):n},M.translate=function(F){return arguments.length?(r=+F[0],i=+F[1],O()):[r,i]},M.center=function(F){return arguments.length?(s=F[0]%360*pr,o=F[1]%360*pr,O()):[s*js,o*js]},M.rotate=function(F){return arguments.length?(a=F[0]%360*pr,u=F[1]%360*pr,l=F.length>2?F[2]%360*pr:0,O()):[a*js,u*js,l*js]},M.angle=function(F){return arguments.length?(d=F%360*pr,O()):d*js},M.reflectX=function(F){return arguments.length?(f=F?-1:1,O()):f<0},M.reflectY=function(F){return arguments.length?(h=F?-1:1,O()):h<0},M.precision=function(F){return arguments.length?(T=Hde(A,E=F*F),$()):Mu(E)},M.fitExtent=function(F,B){return GF(M,F,B)},M.fitSize=function(F,B){return GK(M,F,B)},M.fitWidth=function(F,B){return YK(M,F,B)},M.fitHeight=function(F,B){return KK(M,F,B)};function O(){var F=qde(n,0,0,f,h,d).apply(null,t(s,o)),B=qde(n,r-F[0],i-F[1],f,h,d);return c=STe(a,u,l),A=iV(t,B),I=iV(c,A),T=Hde(A,E),$()}function $(){return k=D=null,M}return function(){return t=e.apply(this,arguments),M.invert=t.invert&&z,O()}}function XK(e){var t=0,n=br/3,r=zTe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*pr,n=s[1]*pr):[t*js,n*js]},i}function fgt(e){var t=yn(e);function n(r,i){return[r*t,ln(i)/t]}return n.invert=function(r,i){return[r/t,kl(i*t)]},n}function hgt(e,t){var n=ln(e),r=(n+ln(t))/2;if(Or(r)<_n)return fgt(e);var i=1+n*(2*r-n),s=Mu(i)/r;function o(a,u){var l=Mu(i-2*r*ln(u))/r;return[l*ln(a*=r),s-l*yn(a)]}return o.invert=function(a,u){var l=s-u,c=xd(a,Or(l))*pd(l);return l*r<0&&(c-=br*pd(a)*pd(l)),[c/r,kl((i-(a*a+l*l)*r*r)/(2*r))]},o}function h3(){return XK(hgt).scale(155.424).center([0,33.6442])}function UTe(){return h3().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function pgt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function mgt(){var e,t,n=UTe(),r,i=h3().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=h3().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(f,h){u=[f,h]}};function c(f){var h=f[0],p=f[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(f){var h=n.scale(),p=n.translate(),m=(f[0]-p[0])/h,y=(f[1]-p[1])/h;return(y>=.12&&y<.234&&m>=-.425&&m<-.214?i:y>=.166&&y<.234&&m>=-.214&&m<-.115?o:n).invert(f)},c.stream=function(f){return e&&t===f?e:e=pgt([n.stream(t=f),i.stream(f),o.stream(f)])},c.precision=function(f){return arguments.length?(n.precision(f),i.precision(f),o.precision(f),d()):n.precision()},c.scale=function(f){return arguments.length?(n.scale(f),i.scale(f*.35),o.scale(f),c.translate(n.translate())):n.scale()},c.translate=function(f){if(!arguments.length)return n.translate();var h=n.scale(),p=+f[0],m=+f[1];return r=n.translate(f).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+_n,m+.12*h+_n],[p-.214*h-_n,m+.234*h-_n]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+_n,m+.166*h+_n],[p-.115*h-_n,m+.234*h-_n]]).stream(l),d()},c.fitExtent=function(f,h){return GF(c,f,h)},c.fitSize=function(f,h){return GK(c,f,h)},c.fitWidth=function(f,h){return YK(c,f,h)},c.fitHeight=function(f,h){return KK(c,f,h)};function d(){return e=t=null,c}return c.scale(1070)}function VTe(e){return function(t,n){var r=yn(t),i=yn(n),s=e(r*i);return s===1/0?[2,0]:[s*i*ln(t),s*ln(n)]}}function gR(e){return function(t,n){var r=Mu(t*t+n*n),i=e(r),s=ln(i),o=yn(i);return[xd(t*s,r*o),kl(r&&n*s/r)]}}var HTe=VTe(function(e){return Mu(2/(1+e))});HTe.invert=gR(function(e){return 2*kl(e/2)});function ggt(){return Fp(HTe).scale(124.75).clipAngle(180-.001)}var qTe=VTe(function(e){return(e=hTe(e))&&e/ln(e)});qTe.invert=gR(function(e){return e});function ygt(){return Fp(qTe).scale(79.4188).clipAngle(180-.001)}function YF(e,t){return[e,YM(HK((Rs+t)/2))]}YF.invert=function(e,t){return[e,2*vS(fTe(t))-Rs]};function vgt(){return WTe(YF).scale(961/Du)}function WTe(e){var t=Fp(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(d){return arguments.length?(r(d),c()):r()},t.translate=function(d){return arguments.length?(i(d),c()):i()},t.center=function(d){return arguments.length?(n(d),c()):n()},t.clipExtent=function(d){return arguments.length?(d==null?o=a=u=l=null:(o=+d[0][0],a=+d[0][1],u=+d[1][0],l=+d[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var d=br*r(),f=t(Fmt(t.rotate()).invert([0,0]));return s(o==null?[[f[0]-d,f[1]-d],[f[0]+d,f[1]+d]]:e===YF?[[Math.max(f[0]-d,o),a],[Math.min(f[0]+d,u),l]]:[[o,Math.max(f[1]-d,a)],[u,Math.min(f[1]+d,l)]])}return c()}function KN(e){return HK((Rs+e)/2)}function bgt(e,t){var n=yn(e),r=e===t?ln(e):YM(n/yn(t))/YM(KN(t)/KN(e)),i=n*e9(KN(e),r)/r;if(!r)return YF;function s(o,a){i>0?a<-Rs+_n&&(a=-Rs+_n):a>Rs-_n&&(a=Rs-_n);var u=i/e9(KN(a),r);return[u*ln(r*o),i-u*yn(r*o)]}return s.invert=function(o,a){var u=i-a,l=pd(r)*Mu(o*o+u*u),c=xd(o,Or(u))*pd(u);return u*r<0&&(c-=br*pd(o)*pd(u)),[c/r,2*vS(e9(i/l,1/r))-Rs]},s}function _gt(){return XK(bgt).scale(109.5).parallels([30,30])}function p3(e,t){return[e,t]}p3.invert=p3;function wgt(){return Fp(p3).scale(152.63)}function xgt(e,t){var n=yn(e),r=e===t?ln(e):(n-yn(t))/(t-e),i=n/r+e;if(Or(r)<_n)return p3;function s(o,a){var u=i-a,l=r*o;return[u*ln(l),i-u*yn(l)]}return s.invert=function(o,a){var u=i-a,l=xd(o,Or(u))*pd(u);return u*r<0&&(l-=br*pd(o)*pd(u)),[l/r,i-pd(r)*Mu(o*o+u*u)]},s}function Egt(){return XK(xgt).scale(131.154).center([0,13.9389])}var BA=1.340264,zA=-.081106,UA=893e-6,VA=.003796,m3=Mu(3)/2,Sgt=12;function GTe(e,t){var n=kl(m3*ln(t)),r=n*n,i=r*r*r;return[e*yn(n)/(m3*(BA+3*zA*r+i*(7*UA+9*VA*r))),n*(BA+zA*r+i*(UA+VA*r))]}GTe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<Sgt&&(a=n*(BA+zA*r+i*(UA+VA*r))-t,u=BA+3*zA*r+i*(7*UA+9*VA*r),n-=o=a/u,r=n*n,i=r*r*r,!(Or(o)<Y7));++s);return[m3*e*(BA+3*zA*r+i*(7*UA+9*VA*r))/yn(n),kl(ln(n)/m3)]};function Tgt(){return Fp(GTe).scale(177.158)}function YTe(e,t){var n=yn(t),r=yn(e)*n;return[n*ln(e)/r,ln(t)/r]}YTe.invert=gR(vS);function Cgt(){return Fp(YTe).scale(144.049).clipAngle(60)}function Agt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,d,f=1,h=1,p=WF({point:function(S,E){var T=x([S,E]);this.stream.point(T[0],T[1])}}),m=D2,y,v;function w(){return f=e*r,h=e*i,y=v=null,x}function x(S){var E=S[0]*f,T=S[1]*h;if(s){var A=T*o-E*a;E=E*o+T*a,T=A}return[E+t,T+n]}return x.invert=function(S){var E=S[0]-t,T=S[1]-n;if(s){var A=T*o+E*a;E=E*o-T*a,T=A}return[E/f,T/h]},x.stream=function(S){return y&&v===S?y:y=p(m(v=S))},x.postclip=function(S){return arguments.length?(m=S,u=l=c=d=null,w()):m},x.clipExtent=function(S){return arguments.length?(m=S==null?(u=l=c=d=null,D2):ITe(u=+S[0][0],l=+S[0][1],c=+S[1][0],d=+S[1][1]),w()):u==null?null:[[u,l],[c,d]]},x.scale=function(S){return arguments.length?(e=+S,w()):e},x.translate=function(S){return arguments.length?(t=+S[0],n=+S[1],w()):[t,n]},x.angle=function(S){return arguments.length?(s=S%360*pr,a=ln(s),o=yn(s),w()):s*js},x.reflectX=function(S){return arguments.length?(r=S?-1:1,w()):r<0},x.reflectY=function(S){return arguments.length?(i=S?-1:1,w()):i<0},x.fitExtent=function(S,E){return GF(x,S,E)},x.fitSize=function(S,E){return GK(x,S,E)},x.fitWidth=function(S,E){return YK(x,S,E)},x.fitHeight=function(S,E){return KK(x,S,E)},x}function KTe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}KTe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Or(i)>_n&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function Igt(){return Fp(KTe).scale(175.295)}function XTe(e,t){return[yn(t)*ln(e),ln(t)]}XTe.invert=gR(kl);function Rgt(){return Fp(XTe).scale(249.5).clipAngle(90+_n)}function QTe(e,t){var n=yn(t),r=1+yn(e)*n;return[n*ln(e)/r,ln(t)/r]}QTe.invert=gR(function(e){return 2*vS(e)});function kgt(){return Fp(QTe).scale(250).clipAngle(142)}function JTe(e,t){return[YM(HK((Rs+t)/2)),-e]}JTe.invert=function(e,t){return[-t,2*vS(fTe(e))-Rs]};function Pgt(){var e=WTe(JTe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Ngt(e,t){return e.parent===t.parent?1:2}function Ogt(e){return e.reduce(Dgt,0)/e.length}function Dgt(e,t){return e+t.x}function Mgt(e){return 1+e.reduce($gt,0)}function $gt(e,t){return Math.max(e,t.y)}function Lgt(e){for(var t;t=e.children;)e=t[0];return e}function Fgt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function jgt(){var e=Ngt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(f){var h=f.children;h?(f.x=Ogt(h),f.y=Mgt(h)):(f.x=o?a+=e(f,o):0,f.y=0,o=f)});var u=Lgt(s),l=Fgt(s),c=u.x-e(u,l)/2,d=l.x+e(l,u)/2;return s.eachAfter(r?function(f){f.x=(f.x-s.x)*t,f.y=(s.y-f.y)*n}:function(f){f.x=(f.x-c)/(d-c)*t,f.y=(1-(s.y?f.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function Bgt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function zgt(){return this.eachAfter(Bgt)}function Ugt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Vgt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Hgt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function qgt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Wgt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Ggt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Ygt(e){for(var t=this,n=Kgt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Kgt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Xgt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Qgt(){return Array.from(this)}function Jgt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Zgt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*e0t(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function QK(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=r0t)):t===void 0&&(t=n0t);for(var n=new iE(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new iE(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(ZTe)}function t0t(){return QK(this).eachBefore(i0t)}function n0t(e){return e.children}function r0t(e){return Array.isArray(e)?e[1]:null}function i0t(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function ZTe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function iE(e){this.data=e,this.depth=this.height=0,this.parent=null}iE.prototype=QK.prototype={constructor:iE,count:zgt,each:Ugt,eachAfter:Hgt,eachBefore:Vgt,find:qgt,sum:Wgt,sort:Ggt,path:Ygt,ancestors:Xgt,descendants:Qgt,leaves:Jgt,links:Zgt,copy:t0t,[Symbol.iterator]:e0t};function hD(e){return e==null?null:eCe(e)}function eCe(e){if(typeof e!="function")throw new Error;return e}function C1(){return 0}function Mw(e){return function(){return e}}const s0t=1664525,o0t=1013904223,Wde=4294967296;function a0t(){let e=1;return()=>(e=(s0t*e+o0t)%Wde)/Wde}function u0t(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function l0t(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function c0t(e,t){for(var n=0,r=(e=l0t(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&tCe(o,s)?++n:(o=f0t(i=d0t(i,s)),n=0);return o}function d0t(e,t){var n,r;if(s9(t,e))return[t];for(n=0;n<e.length;++n)if(XN(t,e[n])&&s9(qC(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(XN(qC(e[n],e[r]),t)&&XN(qC(e[n],t),e[r])&&XN(qC(e[r],t),e[n])&&s9(nCe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function XN(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function tCe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function s9(e,t){for(var n=0;n<t.length;++n)if(!tCe(e,t[n]))return!1;return!0}function f0t(e){switch(e.length){case 1:return h0t(e[0]);case 2:return qC(e[0],e[1]);case 3:return nCe(e[0],e[1],e[2])}}function h0t(e){return{x:e.x,y:e.y,r:e.r}}function qC(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,d=Math.sqrt(u*u+l*l);return{x:(n+s+u/d*c)/2,y:(r+o+l/d*c)/2,r:(d+i+a)/2}}function nCe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,d=n.r,f=r-o,h=r-l,p=i-a,m=i-c,y=u-s,v=d-s,w=r*r+i*i-s*s,x=w-o*o-a*a+u*u,S=w-l*l-c*c+d*d,E=h*p-f*m,T=(p*S-m*x)/(E*2)-r,A=(m*y-p*v)/E,I=(h*x-f*S)/(E*2)-i,k=(f*v-h*y)/E,D=A*A+k*k-1,M=2*(s+T*A+I*k),z=T*T+I*I-s*s,O=-(Math.abs(D)>1e-6?(M+Math.sqrt(M*M-4*D*z))/(2*D):z/M);return{x:r+T+A*O,y:i+I+k*O,r:O}}function Gde(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function Yde(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Kde(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function QN(e){this._=e,this.next=null,this.previous=null}function p0t(e,t){if(!(s=(e=u0t(e)).length))return 0;var n,r,i,s,o,a,u,l,c,d,f;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;Gde(r,n,i=e[2]),n=new QN(n),r=new QN(r),i=new QN(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){Gde(n._,r._,i=e[u]),i=new QN(i),l=r.next,c=n.previous,d=r._.r,f=n._.r;do if(d<=f){if(Yde(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}d+=l._.r,l=l.next}else{if(Yde(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}f+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=Kde(n);(i=i.next)!==r;)(a=Kde(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=c0t(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function m0t(e){return Math.sqrt(e.value)}function g0t(){var e=null,t=1,n=1,r=C1;function i(s){const o=a0t();return s.x=t/2,s.y=n/2,e?s.eachBefore(Xde(e)).eachAfter(o9(r,.5,o)).eachBefore(Qde(1)):s.eachBefore(Xde(m0t)).eachAfter(o9(C1,1,o)).eachAfter(o9(r,s.r/Math.min(t,n),o)).eachBefore(Qde(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=hD(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:Mw(+s),i):r},i}function Xde(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function o9(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=p0t(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function Qde(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function rCe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function yR(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function y0t(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(rCe),o}function s(o,a){return function(u){u.children&&yR(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,d=u.x1-n,f=u.y1-n;d<l&&(l=d=(l+d)/2),f<c&&(c=f=(c+f)/2),u.x0=l,u.y0=c,u.x1=d,u.y1=f}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var v0t={depth:-1},Jde={},a9={};function b0t(e){return e.id}function _0t(e){return e.parentId}function Zde(){var e=b0t,t=_0t,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,d,f,h,p,m,y=new Map;if(n!=null){const v=s.map((S,E)=>w0t(n(S,E,i))),w=v.map(efe),x=new Set(v).add("");for(const S of w)x.has(S)||(x.add(S),v.push(S),w.push(efe(S)),s.push(a9));o=(S,E)=>v[E],a=(S,E)=>w[E]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new iE(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,y.set(m,y.has(m)?Jde:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(f=y.get(p),!f)throw new Error("missing: "+p);if(f===Jde)throw new Error("ambiguous: "+p);f.children?f.children.push(h):f.children=[h],h.parent=f}else{if(d)throw new Error("multiple roots");d=h}if(!d)throw new Error("no root");if(n!=null){for(;d.data===a9&&d.children.length===1;)d=d.children[0],--u;for(let v=s.length-1;v>=0&&(h=s[v],h.data===a9);--v)h.data=null}if(d.parent=v0t,d.eachBefore(function(v){v.depth=v.parent.depth+1,--u}).eachBefore(ZTe),d.parent=null,u>0)throw new Error("cycle");return d}return r.id=function(i){return arguments.length?(e=hD(i),r):e},r.parentId=function(i){return arguments.length?(t=hD(i),r):t},r.path=function(i){return arguments.length?(n=hD(i),r):n},r}function w0t(e){e=`${e}`;let t=e.length;return mV(e,t-1)&&!mV(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function efe(e){let t=e.length;if(t<2)return"";for(;--t>1&&!mV(e,t););return e.slice(0,t)}function mV(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function x0t(e,t){return e.parent===t.parent?1:2}function u9(e){var t=e.children;return t?t[0]:e.t}function l9(e){var t=e.children;return t?t[t.length-1]:e.t}function E0t(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function S0t(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function T0t(e,t,n){return e.a.parent===t.parent?e.a:n}function pD(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}pD.prototype=Object.create(iE.prototype);function C0t(e){for(var t=new pD(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new pD(s[o],o)),i.parent=n;return(t.parent=new pD(null,0)).children=[t],t}function A0t(){var e=x0t,t=1,n=1,r=null;function i(l){var c=C0t(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var d=l,f=l,h=l;l.eachBefore(function(w){w.x<d.x&&(d=w),w.x>f.x&&(f=w),w.depth>h.depth&&(h=w)});var p=d===f?1:e(d,f)/2,m=p-d.x,y=t/(f.x+p+m),v=n/(h.depth||1);l.eachBefore(function(w){w.x=(w.x+m)*y,w.y=w.depth*v})}return l}function s(l){var c=l.children,d=l.parent.children,f=l.i?d[l.i-1]:null;if(c){S0t(l);var h=(c[0].z+c[c.length-1].z)/2;f?(l.z=f.z+e(l._,f._),l.m=l.z-h):l.z=h}else f&&(l.z=f.z+e(l._,f._));l.parent.A=a(l,f,l.parent.A||d[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,d){if(c){for(var f=l,h=l,p=c,m=f.parent.children[0],y=f.m,v=h.m,w=p.m,x=m.m,S;p=l9(p),f=u9(f),p&&f;)m=u9(m),h=l9(h),h.a=l,S=p.z+w-f.z-y+e(p._,f._),S>0&&(E0t(T0t(p,l,d),l,S),y+=S,v+=S),w+=p.m,y+=f.m,x+=m.m,v+=h.m;p&&!l9(h)&&(h.t=p,h.m+=w-v),f&&!u9(m)&&(m.t=f,m.m+=y-x,d=l)}return d}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function KF(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var iCe=(1+Math.sqrt(5))/2;function sCe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,d=0,f=a.length,h,p,m=t.value,y,v,w,x,S,E,T;c<f;){h=i-n,p=s-r;do y=a[d++].value;while(!y&&d<f);for(v=w=y,E=Math.max(p/h,h/p)/(m*e),T=y*y*E,S=Math.max(w/T,T/v);d<f;++d){if(y+=l=a[d].value,l<v&&(v=l),l>w&&(w=l),T=y*y*E,x=Math.max(w/T,T/v),x>S){y-=l;break}S=x}o.push(u={value:y,dice:h<p,children:a.slice(c,d)}),u.dice?yR(u,n,r,i,m?r+=p*y/m:s):KF(u,n,r,m?n+=h*y/m:i,s),m-=y,c=d}return o}const oCe=function e(t){function n(r,i,s,o,a){sCe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(iCe);function I0t(){var e=oCe,t=!1,n=1,r=1,i=[0],s=C1,o=C1,a=C1,u=C1,l=C1;function c(f){return f.x0=f.y0=0,f.x1=n,f.y1=r,f.eachBefore(d),i=[0],t&&f.eachBefore(rCe),f}function d(f){var h=i[f.depth],p=f.x0+h,m=f.y0+h,y=f.x1-h,v=f.y1-h;y<p&&(p=y=(p+y)/2),v<m&&(m=v=(m+v)/2),f.x0=p,f.y0=m,f.x1=y,f.y1=v,f.children&&(h=i[f.depth+1]=s(f)/2,p+=l(f)-h,m+=o(f)-h,y-=a(f)-h,v-=u(f)-h,y<p&&(p=y=(p+y)/2),v<m&&(m=v=(m+v)/2),e(f,p,m,y,v))}return c.round=function(f){return arguments.length?(t=!!f,c):t},c.size=function(f){return arguments.length?(n=+f[0],r=+f[1],c):[n,r]},c.tile=function(f){return arguments.length?(e=eCe(f),c):e},c.padding=function(f){return arguments.length?c.paddingInner(f).paddingOuter(f):c.paddingInner()},c.paddingInner=function(f){return arguments.length?(s=typeof f=="function"?f:Mw(+f),c):s},c.paddingOuter=function(f){return arguments.length?c.paddingTop(f).paddingRight(f).paddingBottom(f).paddingLeft(f):c.paddingTop()},c.paddingTop=function(f){return arguments.length?(o=typeof f=="function"?f:Mw(+f),c):o},c.paddingRight=function(f){return arguments.length?(a=typeof f=="function"?f:Mw(+f),c):a},c.paddingBottom=function(f){return arguments.length?(u=typeof f=="function"?f:Mw(+f),c):u},c.paddingLeft=function(f){return arguments.length?(l=typeof f=="function"?f:Mw(+f),c):l},c}function R0t(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(d,f,h,p,m,y,v){if(d>=f-1){var w=s[d];w.x0=p,w.y0=m,w.x1=y,w.y1=v;return}for(var x=l[d],S=h/2+x,E=d+1,T=f-1;E<T;){var A=E+T>>>1;l[A]<S?E=A+1:T=A}S-l[E-1]<l[E]-S&&d+1<E&&--E;var I=l[E]-x,k=h-I;if(y-p>v-m){var D=h?(p*k+y*I)/h:y;c(d,E,I,p,m,D,v),c(E,f,k,D,m,y,v)}else{var M=h?(m*k+v*I)/h:v;c(d,E,I,p,m,y,M),c(E,f,k,p,M,y,v)}}}function k0t(e,t,n,r,i){(e.depth&1?KF:yR)(e,t,n,r,i)}const P0t=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,d,f=-1,h,p=u.length,m=r.value;++f<p;){for(l=u[f],c=l.children,d=l.value=0,h=c.length;d<h;++d)l.value+=c[d].value;l.dice?yR(l,i,s,o,m?s+=(a-s)*l.value/m:a):KF(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=sCe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(iCe);function jp(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function pv(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const gV=Symbol("implicit");function vR(){var e=new D7,t=[],n=[],r=gV;function i(s){let o=e.get(s);if(o===void 0){if(r!==gV)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new D7;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return vR(t,n).unknown(r)},jp.apply(i,arguments),i}function N0t(e){return function(){return e}}function yV(e){return+e}var tfe=[0,1];function yl(e){return e}function vV(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:N0t(isNaN(t)?NaN:.5)}function O0t(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function D0t(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=vV(i,r),s=n(o,s)):(r=vV(r,i),s=n(s,o)),function(a){return s(r(a))}}function M0t(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=vV(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=xy(e,a,1,r)-1;return s[u](i[u](a))}}function bR(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function XF(){var e=tfe,t=tfe,n=hv,r,i,s,o=yl,a,u,l;function c(){var f=Math.min(e.length,t.length);return o!==yl&&(o=O0t(e[0],e[f-1])),a=f>2?M0t:D0t,u=l=null,d}function d(f){return f==null||isNaN(f=+f)?s:(u||(u=a(e.map(r),t,n)))(r(o(f)))}return d.invert=function(f){return o(i((l||(l=a(t,e.map(r),id)))(f)))},d.domain=function(f){return arguments.length?(e=Array.from(f,yV),c()):e.slice()},d.range=function(f){return arguments.length?(t=Array.from(f),c()):t.slice()},d.rangeRound=function(f){return t=Array.from(f),n=hR,c()},d.clamp=function(f){return arguments.length?(o=f?!0:yl,c()):o!==yl},d.interpolate=function(f){return arguments.length?(n=f,c()):n},d.unknown=function(f){return arguments.length?(s=f,d):s},function(f,h){return r=f,i=h,c()}}function aCe(){return XF()(yl,yl)}function uCe(e,t,n,r){var i=Ey(e,t,n),s;switch(r=mb(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=cTe(i,o))&&(r.precision=s),VK(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=dTe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=lTe(i))&&(r.precision=s-(r.type==="%")*2);break}}return ip(r)}function n_(e){var t=e.domain;return e.ticks=function(n){var r=t();return $7(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return uCe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=L7(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function ld(){var e=aCe();return e.copy=function(){return bR(e,ld())},jp.apply(e,arguments),n_(e)}function lCe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,yV),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return lCe(e).unknown(t)},e=arguments.length?Array.from(e,yV):[0,1],n_(n)}function cCe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function nfe(e){return Math.log(e)}function rfe(e){return Math.exp(e)}function $0t(e){return-Math.log(-e)}function L0t(e){return-Math.exp(-e)}function F0t(e){return isFinite(e)?+("1e"+e):e<0?0:e}function j0t(e){return e===10?F0t:e===Math.E?Math.exp:t=>Math.pow(e,t)}function B0t(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function ife(e){return(t,n)=>-e(-t,n)}function JK(e){const t=e(nfe,rfe),n=t.domain;let r=10,i,s;function o(){return i=B0t(r),s=j0t(r),n()[0]<0?(i=ife(i),s=ife(s),e($0t,L0t)):e(nfe,rfe),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const d=c<l;d&&([l,c]=[c,l]);let f=i(l),h=i(c),p,m;const y=a==null?10:+a;let v=[];if(!(r%1)&&h-f<y){if(f=Math.floor(f),h=Math.ceil(h),l>0){for(;f<=h;++f)for(p=1;p<r;++p)if(m=f<0?p/s(-f):p*s(f),!(m<l)){if(m>c)break;v.push(m)}}else for(;f<=h;++f)for(p=r-1;p>=1;--p)if(m=f>0?p/s(-f):p*s(f),!(m<l)){if(m>c)break;v.push(m)}v.length*2<y&&(v=$7(l,c,y))}else v=$7(f,h,Math.min(h-f,y)).map(s);return d?v.reverse():v},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=mb(u)).precision==null&&(u.trim=!0),u=ip(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let d=c/s(Math.round(i(c)));return d*r<r-.5&&(d*=r),d<=l?u(c):""}},t.nice=()=>n(cCe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function dCe(){const e=JK(XF()).domain([1,10]);return e.copy=()=>bR(e,dCe()).base(e.base()),jp.apply(e,arguments),e}function sfe(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ofe(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function ZK(e){var t=1,n=e(sfe(t),ofe(t));return n.constant=function(r){return arguments.length?e(sfe(t=+r),ofe(t)):t},n_(n)}function fCe(){var e=ZK(XF());return e.copy=function(){return bR(e,fCe()).constant(e.constant())},jp.apply(e,arguments)}function afe(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function z0t(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function U0t(e){return e<0?-e*e:e*e}function eX(e){var t=e(yl,yl),n=1;function r(){return n===1?e(yl,yl):n===.5?e(z0t,U0t):e(afe(n),afe(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},n_(t)}function tX(){var e=eX(XF());return e.copy=function(){return bR(e,tX()).exponent(e.exponent())},jp.apply(e,arguments),e}function V0t(){return tX.apply(null,arguments).exponent(.5)}function hCe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=cSe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[xy(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Hm),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return hCe().domain(e).range(t).unknown(r)},jp.apply(s,arguments)}function pCe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[xy(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return pCe().domain([e,t]).range(i).unknown(s)},jp.apply(n_(o),arguments)}function mCe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[xy(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return mCe().domain(e).range(t).unknown(n)},jp.apply(i,arguments)}const c9=new Date,d9=new Date;function Do(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>Do(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(c9.setTime(+s),d9.setTime(+o),e(c9),e(d9),Math.floor(n(c9,d9))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const sE=Do(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);sE.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Do(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):sE);sE.range;const Dm=1e3,md=Dm*60,Mm=md*60,ug=Mm*24,nX=ug*7,ufe=ug*30,f9=ug*365,$m=Do(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Dm)},(e,t)=>(t-e)/Dm,e=>e.getUTCSeconds());$m.range;const QF=Do(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Dm)},(e,t)=>{e.setTime(+e+t*md)},(e,t)=>(t-e)/md,e=>e.getMinutes());QF.range;const JF=Do(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*md)},(e,t)=>(t-e)/md,e=>e.getUTCMinutes());JF.range;const ZF=Do(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Dm-e.getMinutes()*md)},(e,t)=>{e.setTime(+e+t*Mm)},(e,t)=>(t-e)/Mm,e=>e.getHours());ZF.range;const e6=Do(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Mm)},(e,t)=>(t-e)/Mm,e=>e.getUTCHours());e6.range;const Wm=Do(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*md)/ug,e=>e.getDate()-1);Wm.range;const sy=Do(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ug,e=>e.getUTCDate()-1);sy.range;const gCe=Do(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ug,e=>Math.floor(e/ug));gCe.range;function r_(e){return Do(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*md)/nX)}const bS=r_(0),g3=r_(1),H0t=r_(2),q0t=r_(3),oE=r_(4),W0t=r_(5),G0t=r_(6);bS.range;g3.range;H0t.range;q0t.range;oE.range;W0t.range;G0t.range;function i_(e){return Do(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/nX)}const _S=i_(0),y3=i_(1),Y0t=i_(2),K0t=i_(3),aE=i_(4),X0t=i_(5),Q0t=i_(6);_S.range;y3.range;Y0t.range;K0t.range;aE.range;X0t.range;Q0t.range;const L2=Do(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());L2.range;const F2=Do(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());F2.range;const yp=Do(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());yp.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Do(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});yp.range;const vp=Do(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());vp.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Do(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});vp.range;function yCe(e,t,n,r,i,s){const o=[[$m,1,Dm],[$m,5,5*Dm],[$m,15,15*Dm],[$m,30,30*Dm],[s,1,md],[s,5,5*md],[s,15,15*md],[s,30,30*md],[i,1,Mm],[i,3,3*Mm],[i,6,6*Mm],[i,12,12*Mm],[r,1,ug],[r,2,2*ug],[n,1,nX],[t,1,ufe],[t,3,3*ufe],[e,1,f9]];function a(l,c,d){const f=c<l;f&&([l,c]=[c,l]);const h=d&&typeof d.range=="function"?d:u(l,c,d),p=h?h.range(l,+c+1):[];return f?p.reverse():p}function u(l,c,d){const f=Math.abs(c-l)/d,h=gS(([,,y])=>y).right(o,f);if(h===o.length)return e.every(Ey(l/f9,c/f9,d));if(h===0)return sE.every(Math.max(Ey(l,c,d),1));const[p,m]=o[f/o[h-1][2]<o[h][2]/f?h-1:h];return p.every(m)}return[a,u]}const[J0t,Z0t]=yCe(vp,F2,_S,gCe,e6,JF),[eyt,tyt]=yCe(yp,L2,bS,Wm,ZF,QF);function h9(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function p9(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function QT(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function vCe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=JT(i),c=ZT(i),d=JT(s),f=ZT(s),h=JT(o),p=ZT(o),m=JT(a),y=ZT(a),v=JT(u),w=ZT(u),x={a:q,A:G,b:K,B:L,c:null,d:pfe,e:pfe,f:Syt,g:Dyt,G:$yt,H:wyt,I:xyt,j:Eyt,L:bCe,m:Tyt,M:Cyt,p:V,q:X,Q:yfe,s:vfe,S:Ayt,u:Iyt,U:Ryt,V:kyt,w:Pyt,W:Nyt,x:null,X:null,y:Oyt,Y:Myt,Z:Lyt,"%":gfe},S={a:H,A:Q,b:Z,B:ne,c:null,d:mfe,e:mfe,f:zyt,g:Qyt,G:Zyt,H:Fyt,I:jyt,j:Byt,L:wCe,m:Uyt,M:Vyt,p:ue,q:le,Q:yfe,s:vfe,S:Hyt,u:qyt,U:Wyt,V:Gyt,w:Yyt,W:Kyt,x:null,X:null,y:Xyt,Y:Jyt,Z:evt,"%":gfe},E={a:D,A:M,b:z,B:O,c:$,d:ffe,e:ffe,f:yyt,g:dfe,G:cfe,H:hfe,I:hfe,j:hyt,L:gyt,m:fyt,M:pyt,p:k,q:dyt,Q:byt,s:_yt,S:myt,u:oyt,U:ayt,V:uyt,w:syt,W:lyt,x:F,X:B,y:dfe,Y:cfe,Z:cyt,"%":vyt};x.x=T(n,x),x.X=T(r,x),x.c=T(t,x),S.x=T(n,S),S.X=T(r,S),S.c=T(t,S);function T(ce,ge){return function(se){var te=[],Ee=-1,we=0,De=ce.length,Le,Ne,Te;for(se instanceof Date||(se=new Date(+se));++Ee<De;)ce.charCodeAt(Ee)===37&&(te.push(ce.slice(we,Ee)),(Ne=lfe[Le=ce.charAt(++Ee)])!=null?Le=ce.charAt(++Ee):Ne=Le==="e"?" ":"0",(Te=ge[Le])&&(Le=Te(se,Ne)),te.push(Le),we=Ee+1);return te.push(ce.slice(we,Ee)),te.join("")}}function A(ce,ge){return function(se){var te=QT(1900,void 0,1),Ee=I(te,ce,se+="",0),we,De;if(Ee!=se.length)return null;if("Q"in te)return new Date(te.Q);if("s"in te)return new Date(te.s*1e3+("L"in te?te.L:0));if(ge&&!("Z"in te)&&(te.Z=0),"p"in te&&(te.H=te.H%12+te.p*12),te.m===void 0&&(te.m="q"in te?te.q:0),"V"in te){if(te.V<1||te.V>53)return null;"w"in te||(te.w=1),"Z"in te?(we=p9(QT(te.y,0,1)),De=we.getUTCDay(),we=De>4||De===0?y3.ceil(we):y3(we),we=sy.offset(we,(te.V-1)*7),te.y=we.getUTCFullYear(),te.m=we.getUTCMonth(),te.d=we.getUTCDate()+(te.w+6)%7):(we=h9(QT(te.y,0,1)),De=we.getDay(),we=De>4||De===0?g3.ceil(we):g3(we),we=Wm.offset(we,(te.V-1)*7),te.y=we.getFullYear(),te.m=we.getMonth(),te.d=we.getDate()+(te.w+6)%7)}else("W"in te||"U"in te)&&("w"in te||(te.w="u"in te?te.u%7:"W"in te?1:0),De="Z"in te?p9(QT(te.y,0,1)).getUTCDay():h9(QT(te.y,0,1)).getDay(),te.m=0,te.d="W"in te?(te.w+6)%7+te.W*7-(De+5)%7:te.w+te.U*7-(De+6)%7);return"Z"in te?(te.H+=te.Z/100|0,te.M+=te.Z%100,p9(te)):h9(te)}}function I(ce,ge,se,te){for(var Ee=0,we=ge.length,De=se.length,Le,Ne;Ee<we;){if(te>=De)return-1;if(Le=ge.charCodeAt(Ee++),Le===37){if(Le=ge.charAt(Ee++),Ne=E[Le in lfe?ge.charAt(Ee++):Le],!Ne||(te=Ne(ce,se,te))<0)return-1}else if(Le!=se.charCodeAt(te++))return-1}return te}function k(ce,ge,se){var te=l.exec(ge.slice(se));return te?(ce.p=c.get(te[0].toLowerCase()),se+te[0].length):-1}function D(ce,ge,se){var te=h.exec(ge.slice(se));return te?(ce.w=p.get(te[0].toLowerCase()),se+te[0].length):-1}function M(ce,ge,se){var te=d.exec(ge.slice(se));return te?(ce.w=f.get(te[0].toLowerCase()),se+te[0].length):-1}function z(ce,ge,se){var te=v.exec(ge.slice(se));return te?(ce.m=w.get(te[0].toLowerCase()),se+te[0].length):-1}function O(ce,ge,se){var te=m.exec(ge.slice(se));return te?(ce.m=y.get(te[0].toLowerCase()),se+te[0].length):-1}function $(ce,ge,se){return I(ce,t,ge,se)}function F(ce,ge,se){return I(ce,n,ge,se)}function B(ce,ge,se){return I(ce,r,ge,se)}function q(ce){return o[ce.getDay()]}function G(ce){return s[ce.getDay()]}function K(ce){return u[ce.getMonth()]}function L(ce){return a[ce.getMonth()]}function V(ce){return i[+(ce.getHours()>=12)]}function X(ce){return 1+~~(ce.getMonth()/3)}function H(ce){return o[ce.getUTCDay()]}function Q(ce){return s[ce.getUTCDay()]}function Z(ce){return u[ce.getUTCMonth()]}function ne(ce){return a[ce.getUTCMonth()]}function ue(ce){return i[+(ce.getUTCHours()>=12)]}function le(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var ge=T(ce+="",x);return ge.toString=function(){return ce},ge},parse:function(ce){var ge=A(ce+="",!1);return ge.toString=function(){return ce},ge},utcFormat:function(ce){var ge=T(ce+="",S);return ge.toString=function(){return ce},ge},utcParse:function(ce){var ge=A(ce+="",!0);return ge.toString=function(){return ce},ge}}}var lfe={"-":"",_:" ",0:"0"},ea=/^\s*\d+/,nyt=/^%/,ryt=/[\\^$*+?|[\]().{}]/g;function ni(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function iyt(e){return e.replace(ryt,"\\$&")}function JT(e){return new RegExp("^(?:"+e.map(iyt).join("|")+")","i")}function ZT(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function syt(e,t,n){var r=ea.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function oyt(e,t,n){var r=ea.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function ayt(e,t,n){var r=ea.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function uyt(e,t,n){var r=ea.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function lyt(e,t,n){var r=ea.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function cfe(e,t,n){var r=ea.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function dfe(e,t,n){var r=ea.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function cyt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function dyt(e,t,n){var r=ea.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function fyt(e,t,n){var r=ea.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function ffe(e,t,n){var r=ea.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function hyt(e,t,n){var r=ea.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function hfe(e,t,n){var r=ea.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function pyt(e,t,n){var r=ea.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function myt(e,t,n){var r=ea.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function gyt(e,t,n){var r=ea.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function yyt(e,t,n){var r=ea.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function vyt(e,t,n){var r=nyt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function byt(e,t,n){var r=ea.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function _yt(e,t,n){var r=ea.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function pfe(e,t){return ni(e.getDate(),t,2)}function wyt(e,t){return ni(e.getHours(),t,2)}function xyt(e,t){return ni(e.getHours()%12||12,t,2)}function Eyt(e,t){return ni(1+Wm.count(yp(e),e),t,3)}function bCe(e,t){return ni(e.getMilliseconds(),t,3)}function Syt(e,t){return bCe(e,t)+"000"}function Tyt(e,t){return ni(e.getMonth()+1,t,2)}function Cyt(e,t){return ni(e.getMinutes(),t,2)}function Ayt(e,t){return ni(e.getSeconds(),t,2)}function Iyt(e){var t=e.getDay();return t===0?7:t}function Ryt(e,t){return ni(bS.count(yp(e)-1,e),t,2)}function _Ce(e){var t=e.getDay();return t>=4||t===0?oE(e):oE.ceil(e)}function kyt(e,t){return e=_Ce(e),ni(oE.count(yp(e),e)+(yp(e).getDay()===4),t,2)}function Pyt(e){return e.getDay()}function Nyt(e,t){return ni(g3.count(yp(e)-1,e),t,2)}function Oyt(e,t){return ni(e.getFullYear()%100,t,2)}function Dyt(e,t){return e=_Ce(e),ni(e.getFullYear()%100,t,2)}function Myt(e,t){return ni(e.getFullYear()%1e4,t,4)}function $yt(e,t){var n=e.getDay();return e=n>=4||n===0?oE(e):oE.ceil(e),ni(e.getFullYear()%1e4,t,4)}function Lyt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ni(t/60|0,"0",2)+ni(t%60,"0",2)}function mfe(e,t){return ni(e.getUTCDate(),t,2)}function Fyt(e,t){return ni(e.getUTCHours(),t,2)}function jyt(e,t){return ni(e.getUTCHours()%12||12,t,2)}function Byt(e,t){return ni(1+sy.count(vp(e),e),t,3)}function wCe(e,t){return ni(e.getUTCMilliseconds(),t,3)}function zyt(e,t){return wCe(e,t)+"000"}function Uyt(e,t){return ni(e.getUTCMonth()+1,t,2)}function Vyt(e,t){return ni(e.getUTCMinutes(),t,2)}function Hyt(e,t){return ni(e.getUTCSeconds(),t,2)}function qyt(e){var t=e.getUTCDay();return t===0?7:t}function Wyt(e,t){return ni(_S.count(vp(e)-1,e),t,2)}function xCe(e){var t=e.getUTCDay();return t>=4||t===0?aE(e):aE.ceil(e)}function Gyt(e,t){return e=xCe(e),ni(aE.count(vp(e),e)+(vp(e).getUTCDay()===4),t,2)}function Yyt(e){return e.getUTCDay()}function Kyt(e,t){return ni(y3.count(vp(e)-1,e),t,2)}function Xyt(e,t){return ni(e.getUTCFullYear()%100,t,2)}function Qyt(e,t){return e=xCe(e),ni(e.getUTCFullYear()%100,t,2)}function Jyt(e,t){return ni(e.getUTCFullYear()%1e4,t,4)}function Zyt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?aE(e):aE.ceil(e),ni(e.getUTCFullYear()%1e4,t,4)}function evt(){return"+0000"}function gfe(){return"%"}function yfe(e){return+e}function vfe(e){return Math.floor(+e/1e3)}var mw,rX,V0,_R,ECe;tvt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function tvt(e){return mw=vCe(e),rX=mw.format,V0=mw.parse,_R=mw.utcFormat,ECe=mw.utcParse,mw}function nvt(e){return new Date(e)}function rvt(e){return e instanceof Date?+e:+new Date(+e)}function iX(e,t,n,r,i,s,o,a,u,l){var c=aCe(),d=c.invert,f=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),y=l("%I %p"),v=l("%a %d"),w=l("%b %d"),x=l("%B"),S=l("%Y");function E(T){return(u(T)<T?h:a(T)<T?p:o(T)<T?m:s(T)<T?y:r(T)<T?i(T)<T?v:w:n(T)<T?x:S)(T)}return c.invert=function(T){return new Date(d(T))},c.domain=function(T){return arguments.length?f(Array.from(T,rvt)):f().map(nvt)},c.ticks=function(T){var A=f();return e(A[0],A[A.length-1],T??10)},c.tickFormat=function(T,A){return A==null?E:l(A)},c.nice=function(T){var A=f();return(!T||typeof T.range!="function")&&(T=t(A[0],A[A.length-1],T??10)),T?f(cCe(A,T)):c},c.copy=function(){return bR(c,iX(e,t,n,r,i,s,o,a,u,l))},c}function uE(){return jp.apply(iX(eyt,tyt,yp,L2,bS,Wm,ZF,QF,$m,rX).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ivt(){return jp.apply(iX(J0t,Z0t,vp,F2,_S,sy,e6,JF,$m,_R).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function t6(){var e=0,t=1,n,r,i,s,o=yl,a=!1,u;function l(d){return d==null||isNaN(d=+d)?u:o(i===0?.5:(d=(s(d)-n)*i,a?Math.max(0,Math.min(1,d)):d))}l.domain=function(d){return arguments.length?([e,t]=d,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(d){return arguments.length?(a=!!d,l):a},l.interpolator=function(d){return arguments.length?(o=d,l):o};function c(d){return function(f){var h,p;return arguments.length?([h,p]=f,o=d(h,p),l):[o(0),o(1)]}}return l.range=c(hv),l.rangeRound=c(hR),l.unknown=function(d){return arguments.length?(u=d,l):u},function(d){return s=d,n=d(e),r=d(t),i=n===r?0:1/(r-n),l}}function mv(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function sX(){var e=n_(t6()(yl));return e.copy=function(){return mv(e,sX())},pv.apply(e,arguments)}function SCe(){var e=JK(t6()).domain([1,10]);return e.copy=function(){return mv(e,SCe()).base(e.base())},pv.apply(e,arguments)}function TCe(){var e=ZK(t6());return e.copy=function(){return mv(e,TCe()).constant(e.constant())},pv.apply(e,arguments)}function oX(){var e=eX(t6());return e.copy=function(){return mv(e,oX()).exponent(e.exponent())},pv.apply(e,arguments)}function svt(){return oX.apply(null,arguments).exponent(.5)}function n6(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=yl,c,d=!1,f;function h(m){return isNaN(m=+m)?f:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(d?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(d=!!m,h):d},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(y){var v,w,x;return arguments.length?([v,w,x]=y,l=DK(m,[v,w,x]),h):[l(0),l(.5),l(1)]}}return h.range=p(hv),h.rangeRound=p(hR),h.unknown=function(m){return arguments.length?(f=m,h):f},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function CCe(){var e=n_(n6()(yl));return e.copy=function(){return mv(e,CCe())},pv.apply(e,arguments)}function ACe(){var e=JK(n6()).domain([.1,1,10]);return e.copy=function(){return mv(e,ACe()).base(e.base())},pv.apply(e,arguments)}function ICe(){var e=ZK(n6());return e.copy=function(){return mv(e,ICe()).constant(e.constant())},pv.apply(e,arguments)}function aX(){var e=eX(n6());return e.copy=function(){return mv(e,aX()).exponent(e.exponent())},pv.apply(e,arguments)}function ovt(){return aX.apply(null,arguments).exponent(.5)}function Bp(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const avt=Bp("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),uvt=Bp("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),lvt=Bp("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),cvt=Bp("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),dvt=Bp("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),fvt=Bp("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),hvt=Bp("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),pvt=Bp("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),mvt=Bp("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),gvt=Bp("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function hi(e){return function(){return e}}const bfe=Math.abs,Da=Math.atan2,Jv=Math.cos,yvt=Math.max,m9=Math.min,Eh=Math.sin,j1=Math.sqrt,Fa=1e-12,lE=Math.PI,v3=lE/2,RCe=2*lE;function vvt(e){return e>1?0:e<-1?lE:Math.acos(e)}function _fe(e){return e>=1?v3:e<=-1?-v3:Math.asin(e)}function r6(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new FK(t)}function bvt(e){return e.innerRadius}function _vt(e){return e.outerRadius}function wvt(e){return e.startAngle}function xvt(e){return e.endAngle}function Evt(e){return e&&e.padAngle}function Svt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,d=a-s,f=d*u-c*l;if(!(f*f<Fa))return f=(c*(t-s)-d*(e-i))/f,[e+f*u,t+f*l]}function JN(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/j1(a*a+u*u),c=l*u,d=-l*a,f=e+c,h=t+d,p=n+c,m=r+d,y=(f+p)/2,v=(h+m)/2,w=p-f,x=m-h,S=w*w+x*x,E=i-s,T=f*m-p*h,A=(x<0?-1:1)*j1(yvt(0,E*E*S-T*T)),I=(T*x-w*A)/S,k=(-T*w-x*A)/S,D=(T*x+w*A)/S,M=(-T*w+x*A)/S,z=I-y,O=k-v,$=D-y,F=M-v;return z*z+O*O>$*$+F*F&&(I=D,k=M),{cx:I,cy:k,x01:-c,y01:-d,x11:I*(i/E-1),y11:k*(i/E-1)}}function Tvt(){var e=bvt,t=_vt,n=hi(0),r=null,i=wvt,s=xvt,o=Evt,a=null,u=r6(l);function l(){var c,d,f=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-v3,m=s.apply(this,arguments)-v3,y=bfe(m-p),v=m>p;if(a||(a=c=u()),h<f&&(d=h,h=f,f=d),!(h>Fa))a.moveTo(0,0);else if(y>RCe-Fa)a.moveTo(h*Jv(p),h*Eh(p)),a.arc(0,0,h,p,m,!v),f>Fa&&(a.moveTo(f*Jv(m),f*Eh(m)),a.arc(0,0,f,m,p,v));else{var w=p,x=m,S=p,E=m,T=y,A=y,I=o.apply(this,arguments)/2,k=I>Fa&&(r?+r.apply(this,arguments):j1(f*f+h*h)),D=m9(bfe(h-f)/2,+n.apply(this,arguments)),M=D,z=D,O,$;if(k>Fa){var F=_fe(k/f*Eh(I)),B=_fe(k/h*Eh(I));(T-=F*2)>Fa?(F*=v?1:-1,S+=F,E-=F):(T=0,S=E=(p+m)/2),(A-=B*2)>Fa?(B*=v?1:-1,w+=B,x-=B):(A=0,w=x=(p+m)/2)}var q=h*Jv(w),G=h*Eh(w),K=f*Jv(E),L=f*Eh(E);if(D>Fa){var V=h*Jv(x),X=h*Eh(x),H=f*Jv(S),Q=f*Eh(S),Z;if(y<lE)if(Z=Svt(q,G,H,Q,V,X,K,L)){var ne=q-Z[0],ue=G-Z[1],le=V-Z[0],ce=X-Z[1],ge=1/Eh(vvt((ne*le+ue*ce)/(j1(ne*ne+ue*ue)*j1(le*le+ce*ce)))/2),se=j1(Z[0]*Z[0]+Z[1]*Z[1]);M=m9(D,(f-se)/(ge-1)),z=m9(D,(h-se)/(ge+1))}else M=z=0}A>Fa?z>Fa?(O=JN(H,Q,q,G,h,z,v),$=JN(V,X,K,L,h,z,v),a.moveTo(O.cx+O.x01,O.cy+O.y01),z<D?a.arc(O.cx,O.cy,z,Da(O.y01,O.x01),Da($.y01,$.x01),!v):(a.arc(O.cx,O.cy,z,Da(O.y01,O.x01),Da(O.y11,O.x11),!v),a.arc(0,0,h,Da(O.cy+O.y11,O.cx+O.x11),Da($.cy+$.y11,$.cx+$.x11),!v),a.arc($.cx,$.cy,z,Da($.y11,$.x11),Da($.y01,$.x01),!v))):(a.moveTo(q,G),a.arc(0,0,h,w,x,!v)):a.moveTo(q,G),!(f>Fa)||!(T>Fa)?a.lineTo(K,L):M>Fa?(O=JN(K,L,V,X,f,-M,v),$=JN(q,G,H,Q,f,-M,v),a.lineTo(O.cx+O.x01,O.cy+O.y01),M<D?a.arc(O.cx,O.cy,M,Da(O.y01,O.x01),Da($.y01,$.x01),!v):(a.arc(O.cx,O.cy,M,Da(O.y01,O.x01),Da(O.y11,O.x11),!v),a.arc(0,0,f,Da(O.cy+O.y11,O.cx+O.x11),Da($.cy+$.y11,$.cx+$.x11),v),a.arc($.cx,$.cy,M,Da($.y11,$.x11),Da($.y01,$.x01),!v))):a.arc(0,0,f,E,S,v)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,d=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-lE/2;return[Jv(d)*c,Eh(d)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:hi(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:hi(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:hi(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:hi(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:hi(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:hi(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:hi(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function kCe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function PCe(e){this._context=e}PCe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function uX(e){return new PCe(e)}function NCe(e){return e[0]}function OCe(e){return e[1]}function _x(e,t){var n=hi(!0),r=null,i=uX,s=null,o=r6(a);e=typeof e=="function"?e:e===void 0?NCe:hi(e),t=typeof t=="function"?t:t===void 0?OCe:hi(t);function a(u){var l,c=(u=kCe(u)).length,d,f=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(d=u[l],l,u))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+e(d,l,u),+t(d,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:hi(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:hi(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:hi(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function i6(e,t,n){var r=null,i=hi(!0),s=null,o=uX,a=null,u=r6(l);e=typeof e=="function"?e:e===void 0?NCe:hi(+e),t=typeof t=="function"?t:hi(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?OCe:hi(+n);function l(d){var f,h,p,m=(d=kCe(d)).length,y,v=!1,w,x=new Array(m),S=new Array(m);for(s==null&&(a=o(w=u())),f=0;f<=m;++f){if(!(f<m&&i(y=d[f],f,d))===v)if(v=!v)h=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=f-1;p>=h;--p)a.point(x[p],S[p]);a.lineEnd(),a.areaEnd()}v&&(x[f]=+e(y,f,d),S[f]=+t(y,f,d),a.point(r?+r(y,f,d):x[f],n?+n(y,f,d):S[f]))}if(w)return a=null,w+""||null}function c(){return _x().defined(i).curve(o).context(s)}return l.x=function(d){return arguments.length?(e=typeof d=="function"?d:hi(+d),r=null,l):e},l.x0=function(d){return arguments.length?(e=typeof d=="function"?d:hi(+d),l):e},l.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:hi(+d),l):r},l.y=function(d){return arguments.length?(t=typeof d=="function"?d:hi(+d),n=null,l):t},l.y0=function(d){return arguments.length?(t=typeof d=="function"?d:hi(+d),l):t},l.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:hi(+d),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(d){return arguments.length?(i=typeof d=="function"?d:hi(!!d),l):i},l.curve=function(d){return arguments.length?(o=d,s!=null&&(a=o(s)),l):o},l.context=function(d){return arguments.length?(d==null?s=a=null:a=o(s=d),l):s},l}const Cvt={draw(e,t){const n=j1(t/lE);e.moveTo(n,0),e.arc(0,0,n,0,RCe)}};function Avt(e,t){let n=null,r=r6(i);e=typeof e=="function"?e:hi(e||Cvt),t=typeof t=="function"?t:hi(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:hi(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:hi(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Ty(){}function b3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function s6(e){this._context=e}s6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:b3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:b3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function B1(e){return new s6(e)}function DCe(e){this._context=e}DCe.prototype={areaStart:Ty,areaEnd:Ty,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:b3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ivt(e){return new DCe(e)}function MCe(e){this._context=e}MCe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:b3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Rvt(e){return new MCe(e)}function $Ce(e,t){this._basis=new s6(e),this._beta=t}$Ce.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const kvt=function e(t){function n(r){return t===1?new s6(r):new $Ce(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function _3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function lX(e,t){this._context=e,this._k=(1-t)/6}lX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:_3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:_3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Pvt=function e(t){function n(r){return new lX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function cX(e,t){this._context=e,this._k=(1-t)/6}cX.prototype={areaStart:Ty,areaEnd:Ty,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:_3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Nvt=function e(t){function n(r){return new cX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function dX(e,t){this._context=e,this._k=(1-t)/6}dX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:_3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Ovt=function e(t){function n(r){return new dX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function fX(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Fa){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Fa){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function LCe(e,t){this._context=e,this._alpha=t}LCe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:fX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Dvt=function e(t){function n(r){return t?new LCe(r,t):new lX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function FCe(e,t){this._context=e,this._alpha=t}FCe.prototype={areaStart:Ty,areaEnd:Ty,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:fX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Mvt=function e(t){function n(r){return t?new FCe(r,t):new cX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function jCe(e,t){this._context=e,this._alpha=t}jCe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:fX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const $vt=function e(t){function n(r){return t?new jCe(r,t):new dX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function BCe(e){this._context=e}BCe.prototype={areaStart:Ty,areaEnd:Ty,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Lvt(e){return new BCe(e)}function wfe(e){return e<0?-1:1}function xfe(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(wfe(s)+wfe(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Efe(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function g9(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function w3(e){this._context=e}w3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:g9(this,this._t0,Efe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,g9(this,Efe(this,n=xfe(this,e,t)),n);break;default:g9(this,this._t0,n=xfe(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function zCe(e){this._context=new UCe(e)}(zCe.prototype=Object.create(w3.prototype)).point=function(e,t){w3.prototype.point.call(this,t,e)};function UCe(e){this._context=e}UCe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function Fvt(e){return new w3(e)}function jvt(e){return new zCe(e)}function VCe(e){this._context=e}VCe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Sfe(e),i=Sfe(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Sfe(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Bvt(e){return new VCe(e)}function o6(e,t){this._context=e,this._t=t}o6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function zvt(e){return new o6(e,.5)}function Uvt(e){return new o6(e,0)}function Vvt(e){return new o6(e,1)}function WC(e,t,n){this.k=e,this.x=t,this.y=n}WC.prototype={constructor:WC,scale:function(e){return e===1?this:new WC(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new WC(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};WC.prototype;function mf(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Cy(e){return!!e&&!!e[ss]}function lg(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Jvt}(e)||Array.isArray(e)||!!e[Pfe]||!!(!((t=e.constructor)===null||t===void 0)&&t[Pfe])||hX(e)||pX(e))}function vb(e,t,n){n===void 0&&(n=!1),wS(e)===0?(n?Object.keys:xx)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function wS(e){var t=e[ss];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:hX(e)?2:pX(e)?3:0}function wx(e,t){return wS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Hvt(e,t){return wS(e)===2?e.get(t):e[t]}function HCe(e,t,n){var r=wS(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function qCe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function hX(e){return Xvt&&e instanceof Map}function pX(e){return Qvt&&e instanceof Set}function m1(e){return e.o||e.t}function mX(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=GCe(e);delete t[ss];for(var n=xx(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function gX(e,t){return t===void 0&&(t=!1),yX(e)||Cy(e)||!lg(e)||(wS(e)>1&&(e.set=e.add=e.clear=e.delete=qvt),Object.freeze(e),t&&vb(e,function(n,r){return gX(r,!0)},!0)),e}function qvt(){mf(2)}function yX(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function sp(e){var t=xV[e];return t||mf(18,e),t}function Wvt(e,t){xV[e]||(xV[e]=t)}function bV(){return j2}function y9(e,t){t&&(sp("Patches"),e.u=[],e.s=[],e.v=t)}function x3(e){_V(e),e.p.forEach(Gvt),e.p=null}function _V(e){e===j2&&(j2=e.l)}function Tfe(e){return j2={p:[],l:j2,h:e,m:!0,_:0}}function Gvt(e){var t=e[ss];t.i===0||t.i===1?t.j():t.g=!0}function v9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||sp("ES5").S(t,e,r),r?(n[ss].P&&(x3(t),mf(4)),lg(e)&&(e=E3(t,e),t.l||S3(t,e)),t.u&&sp("Patches").M(n[ss].t,e,t.u,t.s)):e=E3(t,n,[]),x3(t),t.u&&t.v(t.u,t.s),e!==WCe?e:void 0}function E3(e,t,n){if(yX(t))return t;var r=t[ss];if(!r)return vb(t,function(a,u){return Cfe(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return S3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=mX(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),vb(s,function(a,u){return Cfe(e,r,i,a,u,n,o)}),S3(e,i,!1),n&&e.u&&sp("Patches").N(r,n,e.u,e.s)}return r.o}function Cfe(e,t,n,r,i,s,o){if(Cy(i)){var a=E3(e,i,s&&t&&t.i!==3&&!wx(t.R,r)?s.concat(r):void 0);if(HCe(n,r,a),!Cy(a))return;e.m=!1}else o&&n.add(i);if(lg(i)&&!yX(i)){if(!e.h.D&&e._<1)return;E3(e,i),t&&t.A.l||S3(e,i)}}function S3(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&gX(t,n)}function b9(e,t){var n=e[ss];return(n?m1(n):e)[t]}function Afe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function D0(e){e.P||(e.P=!0,e.l&&D0(e.l))}function _9(e){e.o||(e.o=mX(e.t))}function wV(e,t,n){var r=hX(t)?sp("MapSet").F(t,n):pX(t)?sp("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:bV(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=B2;o&&(u=[a],l=GC);var c=Proxy.revocable(u,l),d=c.revoke,f=c.proxy;return a.k=f,a.j=d,f}(t,n):sp("ES5").J(t,n);return(n?n.A:bV()).p.push(r),r}function Yvt(e){return Cy(e)||mf(22,e),function t(n){if(!lg(n))return n;var r,i=n[ss],s=wS(n);if(i){if(!i.P&&(i.i<4||!sp("ES5").K(i)))return i.t;i.I=!0,r=Ife(n,s),i.I=!1}else r=Ife(n,s);return vb(r,function(o,a){i&&Hvt(i.t,o)===a||HCe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Ife(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return mX(e)}function Kvt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[ss];return B2.get(u,s)},set:function(u){var l=this[ss];B2.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][ss];if(!a.P)switch(a.i){case 5:r(a)&&D0(a);break;case 4:n(a)&&D0(a)}}}function n(s){for(var o=s.t,a=s.k,u=xx(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==ss){var d=o[c];if(d===void 0&&!wx(o,c))return!0;var f=a[c],h=f&&f[ss];if(h?h.t!==d:!qCe(f,d))return!0}}var p=!!o[ss];return u.length!==xx(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};Wvt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,d){if(c){for(var f=Array(d.length),h=0;h<d.length;h++)Object.defineProperty(f,""+h,e(h,!0));return f}var p=GCe(d);delete p[ss];for(var m=xx(p),y=0;y<m.length;y++){var v=m[y];p[v]=e(v,c||!!p[v].enumerable)}return Object.create(Object.getPrototypeOf(d),p)}(a,s),l={i:a?5:4,A:o?o.A:bV(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,ss,{value:l,writable:!0}),u},S:function(s,o,a){a?Cy(o)&&o[ss].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[ss];if(c){var d=c.t,f=c.k,h=c.R,p=c.i;if(p===4)vb(f,function(x){x!==ss&&(d[x]!==void 0||wx(d,x)?h[x]||u(f[x]):(h[x]=!0,D0(c)))}),vb(d,function(x){f[x]!==void 0||wx(f,x)||(h[x]=!1,D0(c))});else if(p===5){if(r(c)&&(D0(c),h.length=!0),f.length<d.length)for(var m=f.length;m<d.length;m++)h[m]=!1;else for(var y=d.length;y<f.length;y++)h[y]=!0;for(var v=Math.min(f.length,d.length),w=0;w<v;w++)f.hasOwnProperty(w)||(h[w]=!0),h[w]===void 0&&u(f[w])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Rfe,j2,vX=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Xvt=typeof Map<"u",Qvt=typeof Set<"u",kfe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",WCe=vX?Symbol.for("immer-nothing"):((Rfe={})["immer-nothing"]=!0,Rfe),Pfe=vX?Symbol.for("immer-draftable"):"__$immer_draftable",ss=vX?Symbol.for("immer-state"):"__$immer_state",Jvt=""+Object.prototype.constructor,xx=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,GCe=Object.getOwnPropertyDescriptors||function(e){var t={};return xx(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},xV={},B2={get:function(e,t){if(t===ss)return e;var n=m1(e);if(!wx(n,t))return function(i,s,o){var a,u=Afe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!lg(r)?r:r===b9(e.t,t)?(_9(e),e.o[t]=wV(e.A.h,r,e)):r},has:function(e,t){return t in m1(e)},ownKeys:function(e){return Reflect.ownKeys(m1(e))},set:function(e,t,n){var r=Afe(m1(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=b9(m1(e),t),s=i==null?void 0:i[ss];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(qCe(n,i)&&(n!==void 0||wx(e.t,t)))return!0;_9(e),D0(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return b9(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,_9(e),D0(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=m1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){mf(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){mf(12)}},GC={};vb(B2,function(e,t){GC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),GC.deleteProperty=function(e,t){return GC.set.call(this,e,t,void 0)},GC.set=function(e,t,n){return B2.set.call(this,e[0],t,n,e[0])};var Zvt=function(){function e(n){var r=this;this.O=kfe,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var y=this;m===void 0&&(m=a);for(var v=arguments.length,w=Array(v>1?v-1:0),x=1;x<v;x++)w[x-1]=arguments[x];return u.produce(m,function(S){var E;return(E=s).call.apply(E,[y,S].concat(w))})}}var l;if(typeof s!="function"&&mf(6),o!==void 0&&typeof o!="function"&&mf(7),lg(i)){var c=Tfe(r),d=wV(r,i,void 0),f=!0;try{l=s(d),f=!1}finally{f?x3(c):_V(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return y9(c,o),v9(m,c)},function(m){throw x3(c),m}):(y9(c,o),v9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===WCe&&(l=void 0),r.D&&gX(l,!0),o){var h=[],p=[];sp("Patches").M(i,l,h,p),o(h,p)}return l}mf(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(d))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){lg(n)||mf(8),Cy(n)&&(n=Yvt(n));var r=Tfe(this),i=wV(this,n,void 0);return i[ss].C=!0,_V(r),i},t.finishDraft=function(n,r){var i=n&&n[ss],s=i.A;return y9(s,r),v9(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!kfe&&mf(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=sp("Patches").$;return Cy(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Cc=new Zvt,YCe=Cc.produce;Cc.produceWithPatches.bind(Cc);Cc.setAutoFreeze.bind(Cc);Cc.setUseProxies.bind(Cc);Cc.applyPatches.bind(Cc);Cc.createDraft.bind(Cc);Cc.finishDraft.bind(Cc);function z2(e){"@babel/helpers - typeof";return z2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z2(e)}function e1t(e,t){if(z2(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(z2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function t1t(e){var t=e1t(e,"string");return z2(t)=="symbol"?t:t+""}function n1t(e,t,n){return(t=t1t(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nfe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ofe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Nfe(Object(n),!0).forEach(function(r){n1t(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nfe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ba(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Dfe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),w9=function(){return Math.random().toString(36).substring(7).split("").join(".")},T3={INIT:"@@redux/INIT"+w9(),REPLACE:"@@redux/REPLACE"+w9(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+w9()}};function r1t(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function KCe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ba(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ba(1));return n(KCe)(e,t)}if(typeof e!="function")throw new Error(Ba(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(Ba(3));return s}function d(m){if(typeof m!="function")throw new Error(Ba(4));if(u)throw new Error(Ba(5));var y=!0;return l(),a.push(m),function(){if(y){if(u)throw new Error(Ba(6));y=!1,l();var w=a.indexOf(m);a.splice(w,1),o=null}}}function f(m){if(!r1t(m))throw new Error(Ba(7));if(typeof m.type>"u")throw new Error(Ba(8));if(u)throw new Error(Ba(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var y=o=a,v=0;v<y.length;v++){var w=y[v];w()}return m}function h(m){if(typeof m!="function")throw new Error(Ba(10));i=m,f({type:T3.REPLACE})}function p(){var m,y=d;return m={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(Ba(11));function x(){w.next&&w.next(c())}x();var S=y(x);return{unsubscribe:S}}},m[Dfe]=function(){return this},m}return f({type:T3.INIT}),r={dispatch:f,subscribe:d,getState:c,replaceReducer:h},r[Dfe]=p,r}function i1t(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:T3.INIT});if(typeof r>"u")throw new Error(Ba(12));if(typeof n(void 0,{type:T3.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ba(13))})}function s1t(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{i1t(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,d={},f=0;f<s.length;f++){var h=s[f],p=n[h],m=u[h],y=p(m,l);if(typeof y>"u")throw l&&l.type,new Error(Ba(14));d[h]=y,c=c||y!==m}return c=c||s.length!==Object.keys(u).length,c?d:u}}function C3(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function o1t(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Ba(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=C3.apply(void 0,a)(i.dispatch),Ofe(Ofe({},i),{},{dispatch:s})}}}function XCe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var EV=XCe();EV.withExtraArgument=XCe;var QCe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),wR=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},bb=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},a1t=Object.defineProperty,u1t=Object.defineProperties,l1t=Object.getOwnPropertyDescriptors,Mfe=Object.getOwnPropertySymbols,c1t=Object.prototype.hasOwnProperty,d1t=Object.prototype.propertyIsEnumerable,$fe=function(e,t,n){return t in e?a1t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},oy=function(e,t){for(var n in t||(t={}))c1t.call(t,n)&&$fe(e,n,t[n]);if(Mfe)for(var r=0,i=Mfe(t);r<i.length;r++){var n=i[r];d1t.call(t,n)&&$fe(e,n,t[n])}return e},x9=function(e,t){return u1t(e,l1t(t))},xR=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},f1t=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?C3:C3.apply(null,arguments)};function JCe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var h1t=function(e){return e&&typeof e.match=="function"};function op(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return oy(oy({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function p1t(e){return JCe(e)&&"type"in e}var m1t=function(e){QCe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,bb([void 0],n[0].concat(this)))):new(t.bind.apply(t,bb([void 0],n.concat(this))))},t}(Array),g1t=function(e){QCe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,bb([void 0],n[0].concat(this)))):new(t.bind.apply(t,bb([void 0],n.concat(this))))},t}(Array);function SV(e){return lg(e)?YCe(e,function(){}):e}function y1t(e){return typeof e=="boolean"}function v1t(){return function(t){return b1t(t)}}function b1t(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new m1t;return n&&(y1t(n)?r.push(EV):r.push(EV.withExtraArgument(n.extraArgument))),r}function _1t(e){var t=v1t(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,d=n.enhancers,f=d===void 0?void 0:d,h;if(typeof i=="function")h=i;else if(JCe(i))h=s1t(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=o1t.apply(void 0,p),y=C3;u&&(y=f1t(oy({trace:!1},typeof u=="object"&&u)));var v=new g1t(m),w=v;Array.isArray(f)?w=bb([m],f):typeof f=="function"&&(w=f(v));var x=y.apply(void 0,w);return KCe(h,c,x)}function ZCe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function w1t(e){return typeof e=="function"}function x1t(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?ZCe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(w1t(e))u=function(){return SV(e())};else{var l=SV(e);u=function(){return l}}function c(d,f){d===void 0&&(d=u());var h=bb([s[f.type]],o.filter(function(p){var m=p.matcher;return m(f)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(Cy(p)){var y=p,v=m(y,f);return v===void 0?p:v}else{if(lg(p))return YCe(p,function(w){return m(w,f)});var v=m(p,f);if(v===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return p},d)}return c.getInitialState=u,c}function E1t(e,t){return e+"/"+t}function S1t(e){var t=e.name,n=typeof e.initialState=="function"?e.initialState:SV(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var d=r[c],f=E1t(t,c),h,p;"reducer"in d?(h=d.reducer,p=d.prepare):h=d,s[c]=h,o[f]=h,a[c]=p?op(f,p):op(f)});function u(){var c=typeof e.extraReducers=="function"?ZCe(e.extraReducers):[e.extraReducers],d=c[0],f=d===void 0?{}:d,h=c[1],p=h===void 0?[]:h,m=c[2],y=m===void 0?void 0:m,v=oy(oy({},f),o);return x1t(n,function(w){for(var x in v)w.addCase(x,v[x]);for(var S=0,E=p;S<E.length;S++){var T=E[S];w.addMatcher(T.matcher,T.reducer)}y&&w.addDefaultCase(y)})}var l;return{name:t,reducer:function(c,d){return l||(l=u()),l(c,d)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var T1t="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",eAe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=T1t[Math.random()*64|0];return t},C1t=["name","message","stack","code"],E9=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Lfe=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),A1t=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=C1t;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=op(t+"/fulfilled",function(l,c,d,f){return{payload:l,meta:x9(oy({},f||{}),{arg:d,requestId:c,requestStatus:"fulfilled"})}}),s=op(t+"/pending",function(l,c,d){return{payload:void 0,meta:x9(oy({},d||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=op(t+"/rejected",function(l,c,d,f,h){return{payload:f,error:(r&&r.serializeError||A1t)(l||"Rejected"),meta:x9(oy({},h||{}),{arg:d,requestId:c,rejectedWithValue:!!f,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,d,f){var h=r!=null&&r.idGenerator?r.idGenerator(l):eAe(),p=new a,m;function y(w){m=w,p.abort()}var v=function(){return xR(this,null,function(){var w,x,S,E,T,A,I;return wR(this,function(k){switch(k.label){case 0:return k.trys.push([0,4,,5]),E=(w=r==null?void 0:r.condition)==null?void 0:w.call(r,l,{getState:d,extra:f}),R1t(E)?[4,E]:[3,2];case 1:E=k.sent(),k.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return T=new Promise(function(D,M){return p.signal.addEventListener("abort",function(){return M({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(x=r==null?void 0:r.getPendingMeta)==null?void 0:x.call(r,{requestId:h,arg:l},{getState:d,extra:f}))),[4,Promise.race([T,Promise.resolve(n(l,{dispatch:c,getState:d,extra:f,requestId:h,signal:p.signal,abort:y,rejectWithValue:function(D,M){return new E9(D,M)},fulfillWithValue:function(D,M){return new Lfe(D,M)}})).then(function(D){if(D instanceof E9)throw D;return D instanceof Lfe?i(D.payload,h,l,D.meta):i(D,h,l)})])];case 3:return S=k.sent(),[3,5];case 4:return A=k.sent(),S=A instanceof E9?o(null,h,l,A.payload,A.meta):o(A,h,l),[3,5];case 5:return I=r&&!r.dispatchConditionRejection&&o.match(S)&&S.meta.condition,I||c(S),[2,S]}})})}();return Object.assign(v,{abort:y,requestId:h,arg:l,unwrap:function(){return v.then(I1t)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function I1t(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function R1t(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var k1t=function(e,t){return h1t(e)?e.match(t):e(t)};function Ffe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return k1t(r,n)})}}var bX=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},TV=function(){},tAe=function(e,t){return t===void 0&&(t=TV),e.catch(t),e},nAe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},Ex=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},P1t="task",rAe="listener",iAe="completed",_X="cancelled",N1t="task-"+_X,O1t="task-"+iAe,sAe=rAe+"-"+_X,D1t=rAe+"-"+iAe,a6=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=P1t+" "+_X+" (reason: "+t+")"}return e}(),Sx=function(e){if(e.aborted)throw new a6(e.reason)};function oAe(e,t){var n=TV;return new Promise(function(r,i){var s=function(){return i(new a6(e.reason))};if(e.aborted){s();return}n=nAe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=TV})}var M1t=function(e,t){return xR(void 0,null,function(){var n,r;return wR(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof a6?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},A3=function(e){return function(t){return tAe(oAe(e,t).then(function(n){return Sx(e),n}))}},aAe=function(e){var t=A3(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},$1t=Object.assign,jfe={},ER="listenerMiddleware",L1t=function(e,t){var n=function(r){return nAe(e,function(){return Ex(r,e.reason)})};return function(r,i){bX(r,"taskExecutor");var s=new AbortController;n(s);var o=M1t(function(){return xR(void 0,null,function(){var a;return wR(this,function(u){switch(u.label){case 0:return Sx(e),Sx(s.signal),[4,r({pause:A3(s.signal),delay:aAe(s.signal),signal:s.signal})];case 1:return a=u.sent(),Sx(s.signal),[2,a]}})})},function(){return Ex(s,O1t)});return i!=null&&i.autoJoin&&t.push(o),{result:A3(e)(o),cancel:function(){Ex(s,N1t)}}}},F1t=function(e,t){var n=function(r,i){return xR(void 0,null,function(){var s,o,a,u;return wR(this,function(l){switch(l.label){case 0:Sx(t),s=function(){},o=new Promise(function(c,d){var f=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){f(),d()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,oAe(t,Promise.race(a))];case 2:return u=l.sent(),Sx(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return tAe(n(r,i))}},uAe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=op(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return bX(s,"options.listener"),{predicate:i,type:t,effect:s}},j1t=function(e){var t=uAe(e),n=t.type,r=t.predicate,i=t.effect,s=eAe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},CV=function(e){e.pending.forEach(function(t){Ex(t,sAe)})},B1t=function(e){return function(){e.forEach(CV),e.clear()}},Bfe=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},z1t=op(ER+"/add"),U1t=op(ER+"/removeAll"),V1t=op(ER+"/remove"),H1t=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,bb([ER+"/error"],e))};function q1t(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?H1t:i;bX(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&CV(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var y=m[p];if(h(y))return y}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=j1t(h)),o(p)},l=function(h){var p=uAe(h),m=p.type,y=p.effect,v=p.predicate,w=a(function(x){var S=typeof m=="string"?x.type===m:x.predicate===v;return S&&x.effect===y});return w&&(w.unsubscribe(),h.cancelActive&&CV(w)),!!w},c=function(h,p,m,y){return xR(t,null,function(){var v,w,x,S;return wR(this,function(E){switch(E.label){case 0:v=new AbortController,w=F1t(u,v.signal),x=[],E.label=1;case 1:return E.trys.push([1,3,4,6]),h.pending.add(v),[4,Promise.resolve(h.effect(p,$1t({},m,{getOriginalState:y,condition:function(T,A){return w(T,A).then(Boolean)},take:w,delay:aAe(v.signal),pause:A3(v.signal),extra:r,signal:v.signal,fork:L1t(v.signal,x),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(T,A,I){T!==v&&(Ex(T,sAe),I.delete(T))})}})))];case 2:return E.sent(),[3,6];case 3:return S=E.sent(),S instanceof a6||Bfe(s,S,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(x)];case 5:return E.sent(),Ex(v,D1t),h.pending.delete(v),[7];case 6:return[2]}})})},d=B1t(n),f=function(h){return function(p){return function(m){if(!p1t(m))return p(m);if(z1t.match(m))return u(m.payload);if(U1t.match(m)){d();return}if(V1t.match(m))return l(m.payload);var y=h.getState(),v=function(){if(y===jfe)throw new Error(ER+": getOriginalState can only be called synchronously");return y},w;try{if(w=p(m),n.size>0)for(var x=h.getState(),S=Array.from(n.values()),E=0,T=S;E<T.length;E++){var A=T[E],I=!1;try{I=A.predicate(m,x,y)}catch(k){I=!1,Bfe(s,k,{raisedBy:"predicate"})}I&&c(A,m,h,v)}}finally{y=jfe}return w}}};return{middleware:f,startListening:u,stopListening:l,clearListeners:d}}var zfe;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);Kvt();function W1t(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let ZN;const G1t=new Uint8Array(16);function Y1t(){if(!ZN&&(ZN=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ZN))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ZN(G1t)}const la=[];for(let e=0;e<256;++e)la.push((e+256).toString(16).slice(1));function K1t(e,t=0){return(la[e[t+0]]+la[e[t+1]]+la[e[t+2]]+la[e[t+3]]+"-"+la[e[t+4]]+la[e[t+5]]+"-"+la[e[t+6]]+la[e[t+7]]+"-"+la[e[t+8]]+la[e[t+9]]+"-"+la[e[t+10]]+la[e[t+11]]+la[e[t+12]]+la[e[t+13]]+la[e[t+14]]+la[e[t+15]]).toLowerCase()}const X1t=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ufe={randomUUID:X1t};function Vfe(e,t,n){if(Ufe.randomUUID&&!e)return Ufe.randomUUID();e=e||{};const r=e.random||(e.rng||Y1t)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,K1t(r)}class ap{static get(){let t=Vfe();for(;this.ids.has(t);)t=Vfe();return this.ids.set(t,!0),t}}ap.ids=new Map;function If(e){return"parent"in e}function Q1t(e){return!If(e)}function J1t(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:ap.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:ap.get(),createdOn:Date.now(),val:r}]:[];return{id:ap.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function Z1t({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,d)=>(c[d]=[],i&&i[d]&&c[d].push({type:d,id:ap.get(),val:i[d],createdOn:Date.now()}),c),a),l=s?[{id:ap.get(),createdOn:Date.now(),val:s}]:[];return{id:ap.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Cs(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=ubt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function _b(e){return!!e&&!!e[Ac]}function Ay(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===lbt}(e)||Array.isArray(e)||!!e[HA]||!!(!((t=e.constructor)===null||t===void 0)&&t[HA])||u6(e)||l6(e))}function cE(e,t,n){n===void 0&&(n=!1),Iy(e)===0?(n?Object.keys:CX)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Iy(e){var t=e[Ac];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:u6(e)?2:l6(e)?3:0}function U2(e,t){return Iy(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function mD(e,t){return Iy(e)===2?e.get(t):e[t]}function lAe(e,t,n){var r=Iy(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function ebt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function u6(e){return obt&&e instanceof Map}function l6(e){return abt&&e instanceof Set}function g1(e){return e.o||e.t}function wX(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=cbt(e);delete t[Ac];for(var n=CX(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function xX(e,t){return t===void 0&&(t=!1),EX(e)||_b(e)||!Ay(e)||(Iy(e)>1&&(e.set=e.add=e.clear=e.delete=tbt),Object.freeze(e),t&&cE(e,function(n,r){return xX(r,!0)},!0)),e}function tbt(){Cs(2)}function EX(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function up(e){var t=kV[e];return t||Cs(18,e),t}function nbt(e,t){kV[e]||(kV[e]=t)}function Hfe(){return{}.NODE_ENV==="production"||dE||Cs(0),dE}function S9(e,t){t&&(up("Patches"),e.u=[],e.s=[],e.v=t)}function I3(e){AV(e),e.p.forEach(rbt),e.p=null}function AV(e){e===dE&&(dE=e.l)}function qfe(e){return dE={p:[],l:dE,h:e,m:!0,_:0}}function rbt(e){var t=e[Ac];t.i===0||t.i===1?t.j():t.O=!0}function T9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||up("ES5").S(t,e,r),r?(n[Ac].P&&(I3(t),Cs(4)),Ay(e)&&(e=R3(t,e),t.l||k3(t,e)),t.u&&up("Patches").M(n[Ac].t,e,t.u,t.s)):e=R3(t,n,[]),I3(t),t.u&&t.v(t.u,t.s),e!==TX?e:void 0}function R3(e,t,n){if(EX(t))return t;var r=t[Ac];if(!r)return cE(t,function(s,o){return Wfe(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return k3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=wX(r.k):r.o;cE(r.i===3?new Set(i):i,function(s,o){return Wfe(e,r,i,s,o,n)}),k3(e,i,!1),n&&e.u&&up("Patches").R(r,n,e.u,e.s)}return r.o}function Wfe(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Cs(5),_b(i)){var o=R3(e,i,s&&t&&t.i!==3&&!U2(t.D,r)?s.concat(r):void 0);if(lAe(n,r,o),!_b(o))return;e.m=!1}if(Ay(i)&&!EX(i)){if(!e.h.F&&e._<1)return;R3(e,i),t&&t.A.l||k3(e,i)}}function k3(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&xX(t,n)}function C9(e,t){var n=e[Ac];return(n?g1(n):e)[t]}function Gfe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function IV(e){e.P||(e.P=!0,e.l&&IV(e.l))}function A9(e){e.o||(e.o=wX(e.t))}function RV(e,t,n){var r=u6(t)?up("MapSet").N(t,n):l6(t)?up("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Hfe(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=PV;o&&(u=[a],l=YC);var c=Proxy.revocable(u,l),d=c.revoke,f=c.proxy;return a.k=f,a.j=d,f}(t,n):up("ES5").J(t,n);return(n?n.A:Hfe()).p.push(r),r}function ibt(e){return _b(e)||Cs(22,e),function t(n){if(!Ay(n))return n;var r,i=n[Ac],s=Iy(n);if(i){if(!i.P&&(i.i<4||!up("ES5").K(i)))return i.t;i.I=!0,r=Yfe(n,s),i.I=!1}else r=Yfe(n,s);return cE(r,function(o,a){i&&mD(i.t,o)===a||lAe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Yfe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return wX(e)}function sbt(){function e(r){if(!Ay(r))return r;if(Array.isArray(r))return r.map(e);if(u6(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(l6(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return U2(r,HA)&&(i[HA]=r[HA]),i}function t(r){return _b(r)?e(r):r}var n="add";nbt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=Iy(u),d=""+o[l];c!==0&&c!==1||d!=="__proto__"&&d!=="constructor"||Cs(24),typeof u=="function"&&d==="prototype"&&Cs(24),typeof(u=mD(u,d))!="object"&&Cs(15,o.join("/"))}var f=Iy(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(f){case 2:return u.set(p,h);case 3:Cs(16);default:return u[p]=h}case n:switch(f){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(f){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Cs(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var d=a.t,f=a.o;cE(a.D,function(h,p){var m=mD(d,h),y=mD(f,h),v=p?U2(d,h)?"replace":n:"remove";if(m!==y||v!=="replace"){var w=u.concat(h);l.push(v==="remove"?{op:v,path:w}:{op:v,path:w,value:y}),c.push(v===n?{op:"remove",path:w}:v==="remove"?{op:n,path:w,value:t(m)}:{op:"replace",path:w,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var d=a.t,f=a.D,h=a.o;if(h.length<d.length){var p=[h,d];d=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var y=0;y<d.length;y++)if(f[y]&&h[y]!==d[y]){var v=u.concat([y]);l.push({op:"replace",path:v,value:t(h[y])}),c.push({op:"replace",path:v,value:t(d[y])})}for(var w=d.length;w<h.length;w++){var x=u.concat([w]);l.push({op:n,path:x,value:t(h[w])})}d.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:d.length})}(r,i,s,o);case 3:return function(a,u,l,c){var d=a.t,f=a.o,h=0;d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===TX?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var Kfe,dE,SX=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",obt=typeof Map<"u",abt=typeof Set<"u",Xfe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",TX=SX?Symbol.for("immer-nothing"):((Kfe={})["immer-nothing"]=!0,Kfe),HA=SX?Symbol.for("immer-draftable"):"__$immer_draftable",Ac=SX?Symbol.for("immer-state"):"__$immer_state",ubt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},lbt=""+Object.prototype.constructor,CX=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,cbt=Object.getOwnPropertyDescriptors||function(e){var t={};return CX(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},kV={},PV={get:function(e,t){if(t===Ac)return e;var n=g1(e);if(!U2(n,t))return function(i,s,o){var a,u=Gfe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Ay(r)?r:r===C9(e.t,t)?(A9(e),e.o[t]=RV(e.A.h,r,e)):r},has:function(e,t){return t in g1(e)},ownKeys:function(e){return Reflect.ownKeys(g1(e))},set:function(e,t,n){var r=Gfe(g1(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=C9(g1(e),t),s=i==null?void 0:i[Ac];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(ebt(n,i)&&(n!==void 0||U2(e.t,t)))return!0;A9(e),IV(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return C9(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,A9(e),IV(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=g1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Cs(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Cs(12)}},YC={};cE(PV,function(e,t){YC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),YC.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Cs(13),YC.set.call(this,e,t,void 0)},YC.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Cs(14),PV.set.call(this,e[0],t,n,e[0])};var dbt=function(){function e(n){var r=this;this.g=Xfe,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var y=this;m===void 0&&(m=a);for(var v=arguments.length,w=Array(v>1?v-1:0),x=1;x<v;x++)w[x-1]=arguments[x];return u.produce(m,function(S){var E;return(E=s).call.apply(E,[y,S].concat(w))})}}var l;if(typeof s!="function"&&Cs(6),o!==void 0&&typeof o!="function"&&Cs(7),Ay(i)){var c=qfe(r),d=RV(r,i,void 0),f=!0;try{l=s(d),f=!1}finally{f?I3(c):AV(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return S9(c,o),T9(m,c)},function(m){throw I3(c),m}):(S9(c,o),T9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===TX&&(l=void 0),r.F&&xX(l,!0),o){var h=[],p=[];up("Patches").M(i,l,h,p),o(h,p)}return l}Cs(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(d))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Ay(n)||Cs(8),_b(n)&&(n=ibt(n));var r=qfe(this),i=RV(this,n,void 0);return i[Ac].C=!0,AV(r),i},t.finishDraft=function(n,r){var i=n&&n[Ac];({}).NODE_ENV!=="production"&&(i&&i.C||Cs(9),i.I&&Cs(10));var s=i.A;return S9(s,r),T9(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!Xfe&&Cs(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=up("Patches").$;return _b(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Ic=new dbt,fbt=Ic.produce;Ic.produceWithPatches.bind(Ic);Ic.setAutoFreeze.bind(Ic);Ic.setUseProxies.bind(Ic);Ic.applyPatches.bind(Ic);Ic.createDraft.bind(Ic);Ic.finishDraft.bind(Ic);function hbt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=J1t({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return S1t({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,d=a.nodes[l].meta,f=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:ap.get(),val:c[p],createdOn:Date.now()}),h),d);a.nodes[u.payload.id].meta=f},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:ap.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function pbt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=hbt(e),s=q1t();s.startListening({matcher:Ffe(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Ffe(r.addNode)(a),{skipOnNew:d}=l.config;d&&c||l.func(c?"new":"traversal")})}});const o=_1t({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:ap.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var mbt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),gbt=Object.prototype.hasOwnProperty;function NV(e,t){return gbt.call(e,t)}function OV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)NV(e,i)&&r.push(i);return r}function vl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function DV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function y1(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function cAe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function MV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(MV(e[t]))return!0}else if(typeof e=="object"){for(var r=OV(e),i=r.length,s=0;s<i;s++)if(MV(e[r[s]]))return!0}}return!1}function Qfe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var dAe=function(e){mbt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Qfe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Qfe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Es=dAe,ybt=vl,tx={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=P3(n,this.path);r&&(r=vl(r));var i=J1(n,{op:"remove",path:this.from}).removed;return J1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=P3(n,this.from);return J1(n,{op:"add",path:this.path,value:vl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:V2(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},vbt={add:function(e,t,n){return DV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:tx.move,copy:tx.copy,test:tx.test,_get:tx._get};function P3(e,t){if(t=="")return e;var n={op:"_get",path:t};return J1(e,n),n.value}function J1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):N3(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=P3(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=V2(e,t.value),o.test===!1)throw new Es("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Es("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=vl(e));var a=t.path||"",u=a.split("/"),l=e,c=1,d=u.length,f=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=N3;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=cAe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&f===void 0&&(l[h]===void 0?f=u.slice(0,c).join("/"):c==d-1&&(f=t.path),f!==void 0&&p(t,0,e,f)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!DV(h))throw new Es("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);DV(h)&&(h=~~h)}if(c>=d){if(n&&t.op==="add"&&h>l.length)throw new Es("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=vbt[t.op].call(t,l,h,e);if(o.test===!1)throw new Es("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=d){var o=tx[t.op].call(t,l,h,e);if(o.test===!1)throw new Es("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<d&&(!l||typeof l!="object"))throw new Es("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function c6(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Es("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=vl(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=J1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function bbt(e,t,n){var r=J1(e,t);if(r.test===!1)throw new Es("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function N3(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Es("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(tx[e.op]){if(typeof e.path!="string")throw new Es("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Es('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Es("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Es("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&MV(e.value))throw new Es("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Es("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Es("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=fAe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Es("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Es("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function fAe(e,t,n){try{if(!Array.isArray(e))throw new Es("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)c6(vl(t),vl(e),n||!0);else{n=n||N3;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Es)return i;throw i}}function V2(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!V2(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!V2(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const _bt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Es,_areEquals:V2,applyOperation:J1,applyPatch:c6,applyReducer:bbt,deepClone:ybt,getValueByPointer:P3,validate:fAe,validator:N3},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var AX=new WeakMap,wbt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),xbt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function Ebt(e){return AX.get(e)}function Sbt(e,t){return e.observers.get(t)}function Tbt(e,t){e.observers.delete(t.callback)}function Cbt(e,t){t.unobserve()}function Abt(e,t){var n=[],r,i=Ebt(e);if(!i)i=new wbt(e),AX.set(e,i);else{var s=Sbt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=vl(e),t){r.callback=t,r.next=null;var o=function(){$V(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){$V(r),clearTimeout(r.next),Tbt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new xbt(t,r)),r}function $V(e,t){t===void 0&&(t=!1);var n=AX.get(e.object);IX(n.value,e.object,e.patches,"",t),e.patches.length&&c6(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function IX(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=OV(t),o=OV(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(NV(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var d=t[l];typeof c=="object"&&c!=null&&typeof d=="object"&&d!=null&&Array.isArray(c)===Array.isArray(d)?IX(c,d,n,r+"/"+y1(l),i):c!==d&&(i&&n.push({op:"test",path:r+"/"+y1(l),value:vl(c)}),n.push({op:"replace",path:r+"/"+y1(l),value:vl(d)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+y1(l),value:vl(c)}),n.push({op:"remove",path:r+"/"+y1(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!NV(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+y1(l),value:vl(t[l])})}}}function hAe(e,t,n){n===void 0&&(n=!1);var r=[];return IX(e,t,r,"",n),r}const Ibt=Object.freeze(Object.defineProperty({__proto__:null,compare:hAe,generate:$V,observe:Abt,unobserve:Cbt},Symbol.toStringTag,{value:"Module"}));Object.assign({},_bt,Ibt,{JsonPatchError:dAe,deepClone:vl,escapePathComponent:y1,unescapePathComponent:cAe});var KC=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(KC||{});function gD(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=pAe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=gD(i,t);return c6(a,vl(o),!0,!1).newDocument}function Rbt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function LV({registry:e,initialState:t}){let n=!1;const r=W1t(),i=pbt(t);function s(c){return i.backend.nodes[c]}r.listen(KC.TRAVERSAL_START,()=>{n=!0}),r.listen(KC.TRAVERSAL_END,()=>{n=!1});const o={add(c,d=i.current.id){i.update(i.addMetadata({id:d,meta:c}))},latestOfType(c,d=i.current.id){var f;return(f=i.backend.nodes[d].meta[c])==null?void 0:f.at(-1)},allOfType(c,d=i.current.id){return i.backend.nodes[d].meta[c]},latest(c=i.current.id){const d=i.backend.nodes[c].meta,f=Object.keys(d).reduce((h,p)=>{const m=d[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(f).length>0?f:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,d=i.current.id){i.update(i.addArtifact({id:d,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,d=i.current.id){o.add({annotation:c},d)},latest(c=i.current.id){var d;return(d=o.latestOfType("annotation",c))==null?void 0:d.val},all(c=i.current.id){var d;return(d=o.allOfType("annotation",c))==null?void 0:d.map(f=>f.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var d;return!!((d=o.latestOfType("bookmark",c))!=null&&d.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return gD(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:d,sideEffects:f,eventType:h,onlySideEffects:p=!1}){let m=null,y=null;const v=gD(this.current,this.graph.backend.nodes);if(p)y={type:"checkpoint",val:d};else{const w=hAe(v,d);if(Rbt(d,w)==="checkpoint")y={type:"checkpoint",val:d};else{const x=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;y={type:"patch",val:w,checkpointRef:x}}}if(!y)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=Z1t({label:c,state:y,parent:this.current,sideEffects:f,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,d){const f=e.get(d.type),h=gD(this.current,this.graph.backend.nodes);if(f.config.hasSideEffects){const{do:p=d,undo:m}=f.func(d.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:f.config.eventType})}else{const p=f.func(h,d.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:f.config.eventType})}},async to(c){r.fire(KC.TRAVERSAL_START);const d=pAe(i.current,i.backend.nodes[c],i.backend.nodes),f=[];for(let h=0;h<d.length-1;++h){const p=s(d[h]),m=s(d[h+1]);Pbt(p,m)?If(p)&&f.push(...p.sideEffects.undo):If(m)&&f.push(...m.sideEffects.do)}for(const h of f){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(KC.TRAVERSAL_END)},undo(){const{current:c}=i;return If(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:d}=i;return d.children.length>0?this.to(d.children[c==="oldest"?0:d.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,d=!1){return i.currentChange(c,{skipOnNew:d})},done(){console.log("Setup later for URL sharing.")},tree(){return mAe(i.root,i.backend.nodes)},on(c,d){r.listen(c,d)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const d=JSON.parse(c),f=d.current;d.current=d.root,i.update(i.load(d)),this.to(f)},importObject(c){const d=c.current;c.current=c.root,i.update(i.load(c)),this.to(d)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function kbt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;If(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)If(r)&&(r=n[r.parent]),If(i)&&(i=n[i.parent]);return r.id}function pAe(e,t,n){const r=kbt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),If(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),If(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function Pbt(e,t){if(If(e)&&e.parent===t.id)return!0;if(If(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function mAe(e,t){return{...e,children:e.children.map(n=>mAe(t[n],t)),name:`${e.label}`}}sbt();function Nbt(e){return e.length===2?fbt(e):e}class H2{static create(){return new H2}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:Nbt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),op(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var I9,Jfe;function Obt(){if(Jfe)return I9;Jfe=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,u=typeof dd=="object"&&dd&&dd.Object===Object&&dd,l=typeof self=="object"&&self&&self.Object===Object&&self,c=u||l||Function("return this")(),d=Object.prototype,f=d.toString,h=Math.max,p=Math.min,m=function(){return c.Date.now()};function y(E,T,A){var I,k,D,M,z,O,$=0,F=!1,B=!1,q=!0;if(typeof E!="function")throw new TypeError(e);T=S(T)||0,v(A)&&(F=!!A.leading,B="maxWait"in A,D=B?h(S(A.maxWait)||0,T):D,q="trailing"in A?!!A.trailing:q);function G(ue){var le=I,ce=k;return I=k=void 0,$=ue,M=E.apply(ce,le),M}function K(ue){return $=ue,z=setTimeout(X,T),F?G(ue):M}function L(ue){var le=ue-O,ce=ue-$,ge=T-le;return B?p(ge,D-ce):ge}function V(ue){var le=ue-O,ce=ue-$;return O===void 0||le>=T||le<0||B&&ce>=D}function X(){var ue=m();if(V(ue))return H(ue);z=setTimeout(X,L(ue))}function H(ue){return z=void 0,q&&I?G(ue):(I=k=void 0,M)}function Q(){z!==void 0&&clearTimeout(z),$=0,I=O=k=z=void 0}function Z(){return z===void 0?M:H(m())}function ne(){var ue=m(),le=V(ue);if(I=arguments,k=this,O=ue,le){if(z===void 0)return K(O);if(B)return z=setTimeout(X,T),G(O)}return z===void 0&&(z=setTimeout(X,T)),M}return ne.cancel=Q,ne.flush=Z,ne}function v(E){var T=typeof E;return!!E&&(T=="object"||T=="function")}function w(E){return!!E&&typeof E=="object"}function x(E){return typeof E=="symbol"||w(E)&&f.call(E)==n}function S(E){if(typeof E=="number")return E;if(x(E))return t;if(v(E)){var T=typeof E.valueOf=="function"?E.valueOf():E;E=v(T)?T+"":T}if(typeof E!="string")return E===0?E:+E;E=E.replace(r,"");var A=s.test(E);return A||o.test(E)?a(E.slice(2),A?2:8):i.test(E)?t:+E}return I9=y,I9}var Dbt=Obt();const of=su(Dbt);function gAe({xScale:e,yRange:t,vertPosition:n,ticks:r,isDate:i=!1,showLines:s=!0}){const o=P.useMemo(()=>r.length>1?Math.abs(r[1].offset-r[0].offset):e.range()[0]-e.range()[1],[r,e]),a=P.useCallback(u=>(i?_R("%b%e, %Y"):ip(".2s"))(u),[i]);return _.jsxs(_.Fragment,{children:[s?_.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,r.map(({value:u,offset:l})=>_.jsxs("g",{transform:`translate(${l}, ${n})`,children:[_.jsx("line",{y2:"6",stroke:"currentColor"}),s?_.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,_.jsx("foreignObject",{x:0-o/2,y:10,width:o,height:20,children:_.jsx(Il,{children:_.jsx(jn,{withinPortal:!0,label:u,children:_.jsx(dt,{px:2,fs:"10",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+u==0?0:a(i?new Date(u):u)})})})})]},`${u}test`))]})}const Mbt=Object.freeze(Object.defineProperty({__proto__:null,XAxis:gAe},Symbol.toStringTag,{value:"Module"}));function yAe({dataset:e,yScale:t,xRange:n,horizontalPosition:r}){const i=P.useMemo(()=>t.ticks(6).map(o=>({value:o,yOffset:t(o)})),[t]),s=P.useMemo(()=>e==="clean_stocks"?ip(",.0%"):t.domain()[1]<5?ip(",.2r"):ip(",.0f"),[e,t]);return _.jsx(_.Fragment,{children:i.map(({value:o,yOffset:a})=>_.jsxs("g",{transform:`translate(${r}, ${a})`,children:[_.jsx("line",{x2:`${n[1]-n[0]}`,stroke:`${o===0?"black":"gainsboro"}`,strokeWidth:o===0?1:.4}),_.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-6px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))})}const $bt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:yAe},Symbol.toStringTag,{value:"Module"})),Ma={top:30,left:40,right:150,bottom:50};function FV({parameters:e,data:t,dataname:n,items:r,selection:i,range:s,guardrail:o}){const[a,u]=P.useState(null),l=k=>i!=null&&i.includes(k)?!a||a.length===0?!0:a.includes(k):!1,c=P.useMemo(()=>{const k=r.filter(M=>i==null?void 0:i.includes(M.name)).map(M=>M.group);return r.filter(M=>k==null?void 0:k.includes(M.group)).filter(M=>!(i!=null&&i.includes(M.name))).map(M=>M.name)},[i,r,n]),d=P.useMemo(()=>{const k=r.map(O=>O.group),D=t.filter(O=>k==null?void 0:k.includes(O[e.group_var]));return[...yct(D,O=>({mean:gx(O,.5,$=>$[e.y_var]),upperq:gx(O,.75,$=>$[e.y_var]),lowerq:gx(O,.25,$=>$[e.y_var])}),O=>O[e.x_var])].flatMap(([O,$])=>({date:O,mean:$.mean,upperq:$.upperq,lowerq:$.lowerq}))},[t,r,e,n]),f=n==="clean_data"?900-Ma.left-Ma.right-60:900-Ma.left-Ma.right,h=400-Ma.top-Ma.bottom,{yMin:p,yMax:m}=P.useMemo(()=>{let k=[];switch(o){case"super_data":k=i==null?void 0:i.concat(c);break;default:k=i;break}const D=t.filter(q=>k.includes(q[e.cat_var])).map(q=>+q[e.y_var]).filter(q=>q!==null),[M,z]=n==="clean_stocks"?nc(D):[0,nc(D)[1]],[O,$]=[C2(d.map(q=>q.lowerq)),tp(d.map(q=>q.upperq))],F=o==="super_summ"?C2([M,O]):M,B=o==="super_summ"?tp([z,$]):z;return{yMin:F,yMax:B}},[t,i,o,d,c,e,n]),y=P.useMemo(()=>s?uE([Ma.left,f+Ma.left]).domain(s):uE([Ma.left,f+Ma.left]).domain([new Date(e.start_date),new Date(e.end_date)]),[f,s,e,n]),v=P.useMemo(()=>ld([h+Ma.top,Ma.top]).domain([p,m]).nice(),[h,m,p,n]),w=P.useMemo(()=>{const k=Array.from(new Set(t.map(D=>D[e.cat_var])));return vR(TK).domain(k)},[t,e,n]),x=P.useMemo(()=>{if(!y||!v)return;const k=_x();return k.x(M=>y(V0("%Y-%m-%d")(M[e.x_var]))),k.y(M=>v(M[e.y_var])),k.curve(B1),i==null?void 0:i.map(M=>({country:M,path:k(t.filter(z=>z[e.cat_var]===M))}))},[t,y,v,i,e,n]),S=P.useMemo(()=>{if(o!=="super_data")return null;const k=_x();return k.x(M=>y(V0("%Y-%m-%d")(M[e.x_var]))),k.y(M=>v(M[e.y_var])),k.curve(B1),c==null?void 0:c.map(M=>({country:M,path:k(t.filter(z=>z[e.cat_var]===M))}))},[t,y,v,o,c,e,n]),E=P.useMemo(()=>{if(o!=="super_summ")return null;const k=_x();k.x(O=>y(V0("%Y-%m-%d")(O.date))),k.y(O=>v(O.mean)),k.curve(B1);const D=k(d),M=i6();M.x(O=>y(V0("%Y-%m-%d")(O.date))),M.y0(O=>v(O.lowerq)),M.y1(O=>v(O.upperq)),M.curve(B1);const z=M(d);return{meanLine:D,confidenceBands:z,data:d}},[y,v,o,d,n]),T=P.useMemo(()=>n==="clean_stocks"?"Market Index":"Average",[n]),A=k=>k==="Eldoril North"?"Policy A":k.split(" ")[0]==="Silvoria"||k.split(" ")[0]==="Mystara"?"Policy C":k==="Average"?"all policies":"Policy B",I=P.useMemo(()=>{let D=null;switch(o){case"super_data":D=i==null?void 0:i.concat(S==null?void 0:S.map(z=>z.country));break;case"super_summ":D=i==null?void 0:i.concat([T]);break;default:D=i;break}const M=D==null?void 0:D.map(z=>({country:z,country_policy:n==="clean_data"?`${z} (${A(z)})`:z,label_pos:z===T?E==null?void 0:E.data.slice(-1).map(O=>v(O.mean))[0]:t.filter(O=>O[e.cat_var]===z).slice(-1).map(O=>v(O[e.y_var]))[0]})).sort((z,O)=>z.label_pos<O.label_pos?1:-1);if(!M)return M;for(let z=0;z<(M==null?void 0:M.length);z+=1){if(!M[z-1])continue;const O=M[z-1].label_pos-M[z].label_pos;O>=10||(M[z].label_pos=M[z].label_pos-10+O)}return M},[t,i,v,o,T,e,S,E,n]);return(i==null?void 0:i.length)===0?_.jsx(Il,{style:{width:"800px",height:"400px"},children:_.jsx(dt,{fs:"italic",c:"dimmed",children:"Select an item to view the chart."})}):_.jsxs("svg",{id:"baseLineChart",style:{height:"400px",width:"900px",fontFamily:'"Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsxs("g",{id:"axes",children:[_.jsx(gAe,{isDate:!0,xScale:y,yRange:v.range(),vertPosition:h+Ma.top,showLines:!1,ticks:y.ticks(6).map(k=>({value:k.toString(),offset:y(k)}))}),_.jsx(yAe,{dataset:n,yScale:v,horizontalPosition:Ma.left,xRange:y.range()})]}),_.jsx("svg",{style:{width:`${f}`},children:S==null?void 0:S.map(k=>_.jsx("g",{children:_.jsx("path",{id:`${k.country}`,fill:"none",stroke:l(k.country)?w(k.country):"gray",strokeDasharray:"4,1",strokeWidth:.5,d:k.path},`${k.country}_key`)},`${k.country}_g`))},"control_lines"),_.jsx("svg",{style:{width:`${f}`},children:E?_.jsxs("g",{children:[_.jsx("path",{id:"confidenceBands",fill:"lightgray",opacity:.25,stroke:"none",d:E.confidenceBands},"confidenceBands_key"),_.jsx("path",{id:"meanLine",fill:"none",stroke:"gray",strokeDasharray:"4,1",strokeWidth:.5,d:E.meanLine},"meanLine_key")]},"summary_g"):null},"control_bands"),_.jsxs("svg",{style:{width:`${f}`},children:[x==null?void 0:x.map(k=>_.jsx("g",{children:_.jsx("path",{id:`${k.country}`,fill:"none",stroke:l(k.country)?w(k.country):"gainsboro",strokeWidth:a!=null&&a.includes(k.country)?2:1.5,d:k.path},`${k.country}_key`)},`${k.country}_g`)),I==null?void 0:I.map(k=>_.jsx("foreignObject",{x:f+Ma.left+5,y:k.label_pos-7,width:Ma.right+60,height:20,children:_.jsx(dt,{px:2,fs:"10",color:l(k.country)?w(k.country):"silver",onMouseOver:D=>{const M=D.target;i!=null&&i.includes(M.innerText)&&u([M.innerText])},onMouseOut:()=>u([]),children:k.country_policy})},`${k.country}_label`))]},"lines")]})}const Lbt=Object.freeze(Object.defineProperty({__proto__:null,LineChart:FV,default:FV},Symbol.toStringTag,{value:"Module"})),gw={top:0,left:0},Zfe=20,R9=60;function jV({parameters:e,data:t,dataname:n,items:r,selection:i,setSelection:s,trackSelection:o,range:a,guardrail:u}){const l=P.useMemo(()=>a?uE([gw.left,R9+gw.left]).domain(a):uE([gw.left,R9+gw.left]).domain([new Date(e.start_date),new Date(e.end_date)]),[e,a]),c=P.useMemo(()=>{const p=t.filter(v=>r==null?void 0:r.map(w=>w.name).includes(v[e.cat_var])).map(v=>+v[e.y_var]).filter(v=>v!==null),[m,y]=nc(p);return ld([Zfe+gw.top,gw.top]).domain([m,y]).nice()},[e,t,r]),d=P.useMemo(()=>{const p=Array.from(new Set(t.map(m=>m[e.cat_var])));return vR(TK).domain(p)},[e,t]),f=P.useMemo(()=>{if(u!=="juxt_data")return null;const p=i6();p.x(v=>l(V0("%Y-%m-%d")(v[e.x_var]))),p.y0(()=>c(0)),p.y1(v=>c(v[e.y_var])),p.curve(B1);const m=_x();return m.x(v=>l(V0("%Y-%m-%d")(v[e.x_var]))),m.y(v=>c(v[e.y_var])),m.curve(B1),r==null?void 0:r.map(v=>({country:v.name,path:m(t.filter(w=>w[e.cat_var]===v.name)),area:p(t.filter(w=>w[e.cat_var]===v.name))}))},[e,u,t,r,l,c]),h=P.useMemo(()=>e.allow_selection===!1?"none":"block",[e]);return _.jsx(Lf.Group,{defaultValue:i,dir:"vertical",onChange:p=>{s(p),o(p)},styles:e.allow_selection===!1?{root:{pointerEvents:"none"}}:{root:{pointerEvents:"auto"}},children:r==null?void 0:r.map(p=>_.jsxs(_.Fragment,{children:[p.name==="Eldoril North"?_.jsx(ty,{size:"xs",label:"Policy A",labelPosition:"left",color:"black"}):null,p.name==="Eldoril West"?_.jsx(ty,{size:"xs",label:"Policy B",labelPosition:"left",color:"black"}):null,p.name==="Silvoria North"?_.jsx(ty,{size:"xs",label:"Policy C",labelPosition:"left",color:"black"}):null,_.jsxs(Au,{grow:!0,gutter:8,columns:2,children:[_.jsx(Au.Col,{span:1,children:_.jsx(Lf,{value:p.name,label:p.name,color:e.allow_selection?"blue":"gray",styles:{root:{display:"flex",alignItems:"flex-end",padding:"2px 0"},inner:{display:h}},children:p.name},`${p.name}_checkbox`)},`${p.name}_grid1`),_.jsx(Au.Col,{span:u==="juxt_data"?"auto":3,children:_.jsxs("svg",{style:{width:`${R9}`,height:`${Zfe}`},children:[_.jsx("path",{id:`${p.name}_sparkarea`,fill:i!=null&&i.includes(p.name)?d(p.name):"gray",stroke:"none",opacity:.25,d:f==null?void 0:f.filter(m=>m.country===p.name)[0].area},`${p.name}_sparkarea`),_.jsx("path",{id:`${p.name}_spark`,fill:"none",stroke:i!=null&&i.includes(p.name)?d(p.name):"gray",strokeWidth:.75,d:f==null?void 0:f.filter(m=>m.country===p.name)[0].path},`${p.name}_spark`)]},`${p.name}_sparksvg`)},`${p.name}_grid2`)]},`${p.name}_grid`)]}))},`${n}_checkboxgroup`)}const Fbt=Object.freeze(Object.defineProperty({__proto__:null,Sidebar:jV,default:jV},Symbol.toStringTag,{value:"Module"}));function BV({parameters:e,setRange:t,trackRange:n}){function r(s){return uE([0,100]).domain([new Date(e.start_date),new Date(e.end_date)]).invert(s)}function i(s){const o=r(s);return _R("%b %e, %Y")(o)}return _.jsx(cF,{defaultValue:[0,100],label:s=>i(s),labelAlwaysOn:!0,disabled:!e.allow_time_slider,onChange:([s,o])=>{t([r(s),r(o)]),n([r(s),r(o)])}})}const jbt=Object.freeze(Object.defineProperty({__proto__:null,RangeSelector:BV,default:BV},Symbol.toStringTag,{value:"Module"}));function zV({guardrail:e,setGuardrail:t,dataname:n,setDataname:r,setSelection:i}){return _.jsxs(_.Fragment,{children:[_.jsx(dt,{children:"Data:"}),_.jsx(bM,{value:n,onChange:s=>{r(s),i([])},data:[{value:"clean_data",label:"Viral"},{value:"clean_stocks",label:"Stock"}]}),_.jsx(dt,{children:"Guardrail:"}),_.jsx(bM,{value:e,onChange:s=>{t(s)},data:[{value:"none",label:"None"},{value:"super_data",label:"Sup. Data"},{value:"super_summ",label:"Sup. Summ."},{value:"juxt_data",label:"Juxt. Data"},{value:"juxt_summ",label:"Juxt. Summ."}]})]})}const Bbt=Object.freeze(Object.defineProperty({__proto__:null,Selector:zV,default:zV},Symbol.toStringTag,{value:"Module"})),Qr=Array.isArray;function Pl(e){return e!=null?Qr(e)?e:[e]:[]}function zbt(e=0,t=1/0){return`${ehe(e)} < row_number() && row_number() <= ${ehe(t)}`}function ehe(e){return e<0?`count() + ${e}`:e}class vAe{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(zbt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Pl(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function sr(e){throw Error(e)}function $u(e){return typeof e=="number"}function es(e){return typeof e=="function"}function d6(e,t){const n=Array(e);if(es(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let Ubt=class extends vAe{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){sr("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){sr("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){sr("Not implemented")}getter(t){sr("Not implemented")}objects(t){sr("Not implemented")}object(t){sr("Not implemented")}[Symbol.iterator](){sr("Not implemented")}print(t={}){$u(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=d6(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((d,f)=>u(d,f,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const d=this.indices(),f=this._data;for(;u<l;++u)t(d[u],f,c)}else if(s){let d=l-u+1;for(u=s.nth(u);--d&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},Vbt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},Hbt=function(e){return e&&es(e.get)?e:new Vbt(e)};function cg(e){return e instanceof Date}function tu(e){return e===Object(e)}function O3(e){return e instanceof RegExp}function Aa(e){return typeof e=="string"}function qbt(e,t){const n=r=>sr(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?the(e.entries(),t):cg(e)?n("Date"):O3(e)?n("RegExp"):Aa(e)?n():Qr(e)?Wbt(e,t):es(e[Symbol.iterator])?Gbt(e,t):tu(e)?the(Object.entries(e),t):n()}function the(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function Wbt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function Gbt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:Ybt}=Object.prototype;function zf(e,t){return Ybt.call(e,t)}function Lc(e){return e?new nhe({...e.data()},e.columnNames()):new nhe}class nhe{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return zf(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const Wr=void 0,Kbt=Object.getPrototypeOf(Int8Array);function SR(e){return e instanceof Kbt}function z1(e){return Qr(e)||SR(e)}function wf(e){return e!=null&&e===e}const eC=e=>z1(e)||Aa(e),Xbt={compact:e=>z1(e)?e.filter(t=>wf(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>eC(e)?e.includes(t,n):!1,indexof:(e,t)=>eC(e)?e.indexOf(t):-1,join:(e,t)=>z1(e)?e.join(t):Wr,lastindexof:(e,t)=>eC(e)?e.lastIndexOf(t):-1,length:e=>eC(e)?e.length:0,pluck:(e,t)=>z1(e)?e.map(n=>wf(n)?n[t]:Wr):Wr,reverse:e=>z1(e)?e.slice().reverse():Aa(e)?e.split("").reverse().join(""):Wr,slice:(e,t,n)=>eC(e)?e.slice(t,n):Wr};function Qbt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function yD(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const Sh=e=>(e<10?"0":"")+e,Jbt=e=>e<0?"-"+yD(-e,6):e>9999?"+"+yD(e,6):yD(e,4);function bAe(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return Jbt(e)+"-"+Sh(t+1)+"-"+Sh(n)+(!u||o?"T"+Sh(r)+":"+Sh(i)+":"+Sh(s)+"."+yD(o,3)+l:s?"T"+Sh(r)+":"+Sh(i)+":"+Sh(s)+l:i||r||!a?"T"+Sh(r)+":"+Sh(i)+l:"")}function _Ae(e,t){return isNaN(e)?"Invalid Date":bAe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function f6(e,t){return isNaN(e)?"Invalid Date":bAe(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const Zbt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function e_t(e){return e.match(Zbt)&&!isNaN(Date.parse(e))}function t_t(e,t=Date.parse){return e_t(e)?t(e):e}const wAe=6e4,xAe=864e5,EAe=6048e5,Ts=new Date,As=new Date,Ls=e=>(Ts.setTime(typeof e=="string"?t_t(e):e),Ts);function n_t(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function r_t(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function i_t(e){As.setTime(+e),As.setHours(0,0,0,0),Ts.setTime(+As),Ts.setMonth(0),Ts.setDate(1);const t=(As.getTimezoneOffset()-Ts.getTimezoneOffset())*wAe;return Math.floor(1+(As-Ts-t)/xAe)}function s_t(e){As.setTime(+e),As.setUTCHours(0,0,0,0);const t=Date.UTC(As.getUTCFullYear(),0,1);return Math.floor(1+(As-t)/xAe)}function o_t(e,t){const n=t||0;As.setTime(+e),As.setDate(As.getDate()-(As.getDay()+7-n)%7),As.setHours(0,0,0,0),Ts.setTime(+e),Ts.setMonth(0),Ts.setDate(1),Ts.setDate(1-(Ts.getDay()+7-n)%7),Ts.setHours(0,0,0,0);const r=(As.getTimezoneOffset()-Ts.getTimezoneOffset())*wAe;return Math.floor((1+(As-Ts)-r)/EAe)}function a_t(e,t){const n=t||0;return As.setTime(+e),As.setUTCDate(As.getUTCDate()-(As.getUTCDay()+7-n)%7),As.setUTCHours(0,0,0,0),Ts.setTime(+e),Ts.setUTCMonth(0),Ts.setUTCDate(1),Ts.setUTCDate(1-(Ts.getUTCDay()+7-n)%7),Ts.setUTCHours(0,0,0,0),Math.floor((1+(As-Ts))/EAe)}const u_t={format_date:(e,t)=>_Ae(Ls(e),!t),format_utcdate:(e,t)=>f6(Ls(e),!t),timestamp:e=>+Ls(e),year:e=>Ls(e).getFullYear(),quarter:e=>Math.floor(Ls(e).getMonth()/3),month:e=>Ls(e).getMonth(),date:e=>Ls(e).getDate(),dayofweek:e=>Ls(e).getDay(),hours:e=>Ls(e).getHours(),minutes:e=>Ls(e).getMinutes(),seconds:e=>Ls(e).getSeconds(),milliseconds:e=>Ls(e).getMilliseconds(),utcyear:e=>Ls(e).getUTCFullYear(),utcquarter:e=>Math.floor(Ls(e).getUTCMonth()/3),utcmonth:e=>Ls(e).getUTCMonth(),utcdate:e=>Ls(e).getUTCDate(),utcdayofweek:e=>Ls(e).getUTCDay(),utchours:e=>Ls(e).getUTCHours(),utcminutes:e=>Ls(e).getUTCMinutes(),utcseconds:e=>Ls(e).getUTCSeconds(),utcmilliseconds:e=>Ls(e).getUTCMilliseconds(),datetime:n_t,dayofyear:i_t,week:o_t,utcdatetime:r_t,utcdayofyear:s_t,utcweek:a_t,now:Date.now};function RX(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:cg(e)||cg(t)?+e==+t:O3(e)&&O3(t)?e+""==t+"":tu(e)&&tu(t)?l_t(e,t):!1}function l_t(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return rhe(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!rhe(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!RX(e[o],t[o]))return!1}return!0}function rhe(e,t,n=RX){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const c_t={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let d_t=Math.random;function xS(){return d_t()}const f_t={random:xS,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function kX(e){return e instanceof Map}function h_t(e){return e instanceof Set}function vD(e){return kX(e)||h_t(e)}function k9(e){return Array.from(e)}const p_t={has:(e,t)=>vD(e)?e.has(t):e!=null?zf(e,t):!1,keys:e=>kX(e)?k9(e.keys()):e!=null?Object.keys(e):[],values:e=>vD(e)?k9(e.values()):e!=null?Object.values(e):[],entries:e=>vD(e)?k9(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):Wr};function m_t(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(zf(t,e))return t[e];return n!==void 0?n:e}function g_t(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const y_t={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},nx={bin:Qbt,equal:RX,recode:m_t,sequence:g_t,...Xbt,...u_t,...c_t,...f_t,...p_t,...y_t};function q2(e){return typeof e=="bigint"}function bp(e){return e===void 0?e+"":q2(e)?e+"n":JSON.stringify(e)}function s_(e,t=[],n=[]){return new v_t(e,Pl(t),Pl(n))}let v_t=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${bp(n)}]`),...this.params.map(bp)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const b_t=e=>s_("any",e),__t=()=>s_("count"),w_t=e=>s_("array_agg",e),x_t=e=>s_("array_agg_distinct",e),E_t=(e,t)=>s_("map_agg",[e,t]),S_t=(e,t)=>s_("object_agg",[e,t]),T_t=(e,t)=>s_("entries_agg",[e,t]);({...nx});function C_t(e,t){e=vD(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function A_t(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,d)=>c+d,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function I_t(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const d=new Uint32Array(r);return t(u!==o?h=>d[++c]=l[i[h]]:h=>d[++c]=i[h]),{...e,keys:d,rows:a,size:u}}function R_t(e,t,n,r){const i=r==="map"||r===!0?E_t:r==="entries"?T_t:r==="object"?S_t:sr('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=C_t(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:w_t(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const k_t="ArrayPattern",P_t="ArrowFunctionExpression",N_t="FunctionExpression",ay="Identifier",ES="Literal",SAe="MemberExpression",O_t="ObjectExpression",TAe="ObjectPattern",CAe="Property",TR="Column",D_t="Constant",M_t="Dictionary",$_t="Function",L_t="Parameter",AAe="Op",Bi=(e,t)=>{const n=F_t[e.type];return n?n(e,t):sr(`Unsupported expression construct: ${e.type}`)},P9=(e,t)=>"("+Bi(e.left,t)+" "+e.operator+" "+Bi(e.right,t)+")",N9=(e,t)=>"("+kh(e.params,t)+")=>"+Bi(e.body,t),ihe=(e,t)=>Bi(e.callee,t)+"("+kh(e.arguments,t)+")",kh=(e,t,n=",")=>e.map(r=>Bi(r,t)).join(n),IAe=e=>e.computed?`[${bp(e.name)}]`:`.${e.name}`,she=(e,t,n)=>{const r=e.table||"";return`data${r}${IAe(e)}.${n}(${t.index}${r})`},F_t={Constant:e=>e.raw,Column:(e,t)=>she(e,t,"get"),Dictionary:(e,t)=>she(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${IAe(e)}`,Op:(e,t)=>`op(${bp(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+Bi(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=Bi(e.object,t),i=Bi(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:ihe,NewExpression:(e,t)=>"new "+ihe(e,t),ArrayExpression:(e,t)=>"["+kh(e.elements,t)+"]",AssignmentExpression:P9,BinaryExpression:P9,LogicalExpression:P9,UnaryExpression:(e,t)=>"("+e.operator+Bi(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+Bi(e.test,t)+"?"+Bi(e.consequent,t)+":"+Bi(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+kh(e.properties,t)+"})",Property:(e,t)=>{const n=Bi(e.key,t);return(e.computed?`[${n}]`:n)+":"+Bi(e.value,t)},ArrowFunctionExpression:N9,FunctionExpression:N9,FunctionDeclaration:N9,ArrayPattern:(e,t)=>"["+kh(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+kh(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+kh(e.declarations,t,","),VariableDeclarator:(e,t)=>Bi(e.id,t)+"="+Bi(e.init,t),SpreadElement:(e,t)=>"..."+Bi(e.argument,t),BlockStatement:(e,t)=>"{"+kh(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>Bi(e.expression,t),IfStatement:(e,t)=>"if ("+Bi(e.test,t)+")"+Bi(e.consequent,t)+(e.alternate?" else "+Bi(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+Bi(e.discriminant,t)+") {"+kh(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+Bi(e.test,t):"default")+": "+kh(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+Bi(e.argument,t),Program:(e,t)=>Bi(e.body[0],t)};function D3(e,t={index:"row"}){return Bi(e,t)}function j_t(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const d=c.length;for(let f=0;f<d;++f){const h=s/c[f];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function fE(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:cg(e)?+e:Qr(e)||SR(e)?`[${e.map(fE)}]`:O3(e)?e+"":B_t(e)}function B_t(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${fE(e[r])}`;return t+="}",t}function M3(e,t){const n=e.length;return n===1?(r,i)=>fE(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=fE(a)}return s}}function z_t(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=fE(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=fE(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function Tm(){}function U_t(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function yo(e){return e.init=e.init||Tm,e.add=e.add||Tm,e.rem=e.rem||Tm,e}function ohe(e,t){return e.product_v=!1,e.product=t}const RAe={count:{create:()=>yo({value:e=>e.count}),param:[]},array_agg:{create:()=>yo({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>yo({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>yo({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>yo({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>yo({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:Wr}),param:[1]},valid:{create:()=>yo({value:e=>e.valid}),param:[1]},invalid:{create:()=>yo({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=z_t(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>yo({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>yo({value:e=>{let t=Wr,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:Wr,add:(e,t)=>q2(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>ohe(e,1),value:e=>e.valid?e.product_v?ohe(e,U_t(e.list.values())):e.product:void 0,add:(e,t)=>q2(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:Wr,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>yo({value:e=>e.valid?e.mean:Wr}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):Wr,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>yo({value:e=>e.valid>1?e.dev/e.valid:Wr}),param:[1],req:["variance"]},stdev:{create:()=>yo({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):Wr}),param:[1],req:["variance"]},stdevp:{create:()=>yo({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):Wr}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=Wr,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===Wr)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=Wr,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===Wr)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>yo({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>yo({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):Wr,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>yo({value:e=>e.valid>1?e.cov/e.valid:Wr}),param:[2],req:["covariance"]},corr:{create:()=>yo({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):Wr}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>yo({value:i=>j_t(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},ahe={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},uhe={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},kAe={row_number:{create(){return{init:Tm,value:e=>e.index+1}},param:[]},rank:ahe,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=ahe.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:uhe,ntile:{create(e){e=+e,e>0||sr("ntile num must be greater than zero.");const{init:t,value:n}=uhe.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=Wr){return e=+e||1,{init:Tm,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=Wr){return e=+e||1,{init:Tm,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:Tm,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:Tm,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||sr("nth_value nth must be greater than zero."),{init:Tm,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):Wr}}},param:[1,1]},fill_down:{create(e=Wr){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return wf(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=Wr){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=V_t(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function V_t(e,t,n){for(const r=e.size;n<r;++n)if(wf(e.value(n,t)))return n;return-1}function PX(e){return zf(RAe,e)}function NX(e){return zf(kAe,e)}function PAe(e){return zf(nx,e)||e==="row_object"}function NAe(e){return PX(e)&&RAe[e]}function OAe(e){return NX(e)&&kAe[e]}function tC(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const OX={escape:(e,t,n)=>tC(e,t,n),expr:(e,t)=>tC(`(row,data,op)=>${e}`,nx,t),expr2:(e,t)=>tC(`(row0,data0,row,data)=>${e}`,nx,t),join:(e,t)=>tC(`(row1,data1,row2,data2)=>${e}`,nx,t),param:(e,t)=>tC(e,nx,t)},H_t={"==":1,"!=":1,"===":1,"!==":1};function DAe(e,t,n=0,r,i){if(e.type=TR,e.name=t,e.table=n,i&&r&&es(r.keyFor)){const s=H_t[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===ES&&q_t(i,e,s,r.keyFor(s.value))}return e}function q_t(e,t,n,r){return r<0?(e.type=ES,e.value=!1,e.raw="false"):(t.type=M_t,n.value=r,n.raw=r+""),!0}function h6(e){return Qr(e)?e:kX(e)?e.entries():e?Object.entries(e):[]}const MAe="row_object";function $Ae(e,t){e.type=O_t;const n=e.properties=[];for(const r of h6(t)){const[i,s]=Qr(r)?r:[r,r];n.push({type:CAe,key:{type:ES,raw:bp(s)},value:DAe({computed:!0},i)})}return e}function LAe(e){return D3($Ae({},e))}function FAe(e){return OX.expr(LAe(e))}const W_t=new TextDecoder("utf-8"),UV=e=>W_t.decode(e),G_t=new TextEncoder,p6=e=>G_t.encode(e),Y_t=e=>typeof e=="boolean",cl=e=>typeof e=="function",gv=e=>e!=null&&Object(e)===e,m6=e=>gv(e)&&cl(e.then),DX=e=>gv(e)&&cl(e[Symbol.iterator]),g6=e=>gv(e)&&cl(e[Symbol.asyncIterator]),K_t=e=>gv(e)&&"done"in e&&"value"in e,jAe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,X_t=e=>gv(e)&&cl(e.abort)&&cl(e.getWriter)&&!jAe(e),Q_t=e=>gv(e)&&cl(e.end)&&cl(e.write)&&Y_t(e.writable)&&!jAe(e),J_t=e=>gv(e)&&cl(e.clear)&&cl(e.bytes)&&cl(e.position)&&cl(e.setPosition)&&cl(e.capacity)&&cl(e.getBufferIdentifier)&&cl(e.createLong),MX=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function Z_t(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function VV(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function _p(e,t){const n=Z_t(e),r=n.reduce((c,d)=>c+d.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?VV(o,s,a):o=s;break}VV(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function bo(e,t){let n=K_t(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=p6(n)),n instanceof ArrayBuffer?new e(n):n instanceof MX?new e(n):J_t(n)?bo(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const nC=e=>bo(Int32Array,e),lhe=e=>bo(BigInt64Array,e),Br=e=>bo(Uint8Array,e),HV=e=>(e.next(),e);function*ewt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof MX?n(t):DX(t)?t:n(t);return yield*HV(function*(i){let s=null;do s=i.next(yield bo(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const twt=e=>ewt(Uint8Array,e);function BAe(e,t){return O1(this,arguments,function*(){if(m6(t))return yield Nr(yield Nr(yield*N8(AA(BAe(e,yield Nr(t))))));const r=function(o){return O1(this,arguments,function*(){yield yield Nr(yield Nr(o))})},i=function(o){return O1(this,arguments,function*(){yield Nr(yield*N8(AA(HV(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof MX?r(t):DX(t)?i(t):g6(t)?t:r(t);return yield Nr(yield*N8(AA(HV(function(o){return O1(this,arguments,function*(){let a=null;do a=yield Nr(o.next(yield yield Nr(bo(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Nr(new e)})}const nwt=e=>BAe(Uint8Array,e);function zAe(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function rwt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const che={fromIterable(e){return eO(iwt(e))},fromAsyncIterable(e){return eO(swt(e))},fromDOMStream(e){return eO(owt(e))},fromNodeStream(e){return eO(uwt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},eO=e=>(e.next(),e);function*iwt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?_p(r,o)[0]:([i,r,a]=_p(r,o),i)}({cmd:s,size:o}=(yield null)||{cmd:"read",size:0});const l=twt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function swt(e){return O1(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?_p(i,a)[0]:([s,i,u]=_p(i,a),s)}({cmd:o,size:a}=(yield yield Nr(null))||{cmd:"read",size:0});const c=nwt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Nr(c.next()):yield Nr(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Nr(l()));while(a<u);while(!n)}catch(d){(r=!0)&&typeof c.throw=="function"&&(yield Nr(c.throw(d)))}finally{r===!1&&typeof c.return=="function"&&(yield Nr(c.return(new Uint8Array(0))))}return yield Nr(null)})}function owt(e){return O1(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?_p(i,a)[0]:([s,i,u]=_p(i,a),s)}({cmd:o,size:a}=(yield yield Nr(null))||{cmd:"read",size:0});const c=new awt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Nr(c.read()):yield Nr(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Br(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Nr(l()));while(a<u);while(!n)}catch(d){(r=!0)&&(yield Nr(c.cancel(d)))}finally{r===!1?yield Nr(c.cancel()):e.locked&&c.releaseLock()}return yield Nr(null)})}class awt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Am(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Am(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Br(n)),n})}}const O9=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function uwt(e){return O1(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function d(){return o==="peek"?_p(l,a)[0]:([c,l,u]=_p(l,a),c)}if({cmd:o,size:a}=(yield yield Nr(null))||{cmd:"read",size:0},e.isTTY)return yield yield Nr(new Uint8Array(0)),yield Nr(null);try{n[0]=O9(e,"end"),n[1]=O9(e,"error");do{if(n[2]=O9(e,"readable"),[r,s]=yield Nr(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Br(e.read(a-u)),c.byteLength<a-u&&(c=Br(e.read()))):c=Br(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Nr(d()));while(a<u)}while(!i)}finally{yield Nr(f(n,r==="error"?s:null))}return yield Nr(null);function f(h,p){return c=l=null,new Promise((m,y)=>{for(const[v,w]of h)e.off(v,w);try{const v=e.destroy;v&&v.call(e,p),p=void 0}catch(v){p=v||p}finally{p!=null?y(p):m()}})}})}var Eo;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Eo||(Eo={}));var Lu;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Lu||(Lu={}));var Ro;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Ro||(Ro={}));var Ed;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Ed||(Ed={}));var mn;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(mn||(mn={}));var Sd;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Sd||(Sd={}));const D9=2,Uh=4,km=4,gi=4,T0=new Int32Array(2),dhe=new Float32Array(T0.buffer),fhe=new Float64Array(T0.buffer),tO=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var qV;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(qV||(qV={}));let $3=class UAe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new UAe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return T0[0]=this.readInt32(t),dhe[0]}readFloat64(t){return T0[tO?0:1]=this.readInt32(t),T0[tO?1:0]=this.readInt32(t+4),fhe[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){dhe[0]=n,this.writeInt32(t,T0[0])}writeFloat64(t,n){fhe[0]=n,this.writeInt32(t,T0[tO?0:1]),this.writeInt32(t+4,T0[tO?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Uh+km)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<km;n++)t+=String.fromCharCode(this.readInt8(this.position_+Uh+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=Uh;const i=this.bytes_.subarray(t,t+r);return n===qV.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Uh}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=km)throw new Error("FlatBuffers: file identifier must be length "+km);for(let n=0;n<km;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Uh+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},VAe=class HAe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=$3.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=HAe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=$3.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(Uh,0),this.writeInt32(this.offset()-t+Uh)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*D9;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=D9;l<s;l+=D9)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?gi:0;if(n){const s=n;if(this.prep(this.minalign,Uh+km+i),s.length!=km)throw new TypeError("FlatBuffers: file identifier must be length "+km);for(let o=km-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,Uh+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(Uh,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};var L3;(function(e){e[e.BUFFER=0]="BUFFER"})(L3||(L3={}));var F3;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(F3||(F3={}));class C0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new C0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+gi),(n||new C0).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):F3.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):L3.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,F3.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,L3.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return C0.startBodyCompression(t),C0.addCodec(t,n),C0.addMethod(t,r),C0.endBodyCompression(t)}}let qAe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},WAe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},wm=class WV{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new WV).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+gi),(n||new WV).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new WAe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new qAe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new C0).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},$w=class GV{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new GV).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+gi),(n||new GV).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new wm).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var hE;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(hE||(hE={}));var j3;(function(e){e[e.DenseArray=0]="DenseArray"})(j3||(j3={}));class ic{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new ic).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+gi),(n||new ic).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return ic.startInt(t),ic.addBitWidth(t,n),ic.addIsSigned(t,r),ic.endInt(t)}}class Pm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new Pm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+gi),(n||new Pm).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new ic).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):j3.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,j3.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class wo{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new wo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+gi),(n||new wo).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return wo.startKeyValue(t),wo.addKey(t,n),wo.addValue(t,r),wo.endKeyValue(t)}}let hhe=class XC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new XC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+gi),(n||new XC).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return XC.startBinary(t),XC.endBinary(t)}},phe=class QC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new QC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+gi),(n||new QC).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return QC.startBool(t),QC.endBool(t)}},bD=class Lw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new Lw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+gi),(n||new Lw).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ed.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Ed.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return Lw.startDate(t),Lw.addUnit(t,n),Lw.endDate(t)}},Fw=class b0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new b0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+gi),(n||new b0).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return b0.startDecimal(t),b0.addPrecision(t,n),b0.addScale(t,r),b0.addBitWidth(t,i),b0.endDecimal(t)}},_D=class jw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new jw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+gi),(n||new jw).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):mn.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,mn.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return jw.startDuration(t),jw.addUnit(t,n),jw.endDuration(t)}},wD=class Bw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Bw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+gi),(n||new Bw).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Bw.startFixedSizeBinary(t),Bw.addByteWidth(t,n),Bw.endFixedSizeBinary(t)}},xD=class zw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new zw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+gi),(n||new zw).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return zw.startFixedSizeList(t),zw.addListSize(t,n),zw.endFixedSizeList(t)}};class Vh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Vh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+gi),(n||new Vh).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ro.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,Ro.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Vh.startFloatingPoint(t),Vh.addPrecision(t,n),Vh.endFloatingPoint(t)}}class Hh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Hh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+gi),(n||new Hh).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Sd.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Sd.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Hh.startInterval(t),Hh.addUnit(t,n),Hh.endInterval(t)}}let mhe=class JC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsLargeBinary(t,n){return(n||new JC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeBinary(t,n){return t.setPosition(t.position()+gi),(n||new JC).__init(t.readInt32(t.position())+t.position(),t)}static startLargeBinary(t){t.startObject(0)}static endLargeBinary(t){return t.endObject()}static createLargeBinary(t){return JC.startLargeBinary(t),JC.endLargeBinary(t)}},ghe=class ZC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsLargeUtf8(t,n){return(n||new ZC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeUtf8(t,n){return t.setPosition(t.position()+gi),(n||new ZC).__init(t.readInt32(t.position())+t.position(),t)}static startLargeUtf8(t){t.startObject(0)}static endLargeUtf8(t){return t.endObject()}static createLargeUtf8(t){return ZC.startLargeUtf8(t),ZC.endLargeUtf8(t)}},yhe=class eA{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new eA).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+gi),(n||new eA).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return eA.startList(t),eA.endList(t)}},ED=class Uw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new Uw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+gi),(n||new Uw).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return Uw.startMap(t),Uw.addKeysSorted(t,n),Uw.endMap(t)}},vhe=class tA{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new tA).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+gi),(n||new tA).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return tA.startNull(t),tA.endNull(t)}};class U1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new U1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+gi),(n||new U1).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return U1.startStruct_(t),U1.endStruct_(t)}}let nA=class v1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new v1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+gi),(n||new v1).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):mn.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,mn.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return v1.startTime(t),v1.addUnit(t,n),v1.addBitWidth(t,r),v1.endTime(t)}},rA=class b1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new b1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+gi),(n||new b1).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):mn.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,mn.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return b1.startTimestamp(t),b1.addUnit(t,n),b1.addTimezone(t,r),b1.endTimestamp(t)}},_1=class w1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new w1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+gi),(n||new w1).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Lu.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,Lu.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return w1.startUnion(t),w1.addMode(t,n),w1.addTypeIds(t,r),w1.endUnion(t)}},bhe=class iA{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new iA).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+gi),(n||new iA).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return iA.startUtf8(t),iA.endUtf8(t)}};var ji;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(ji||(ji={}));let Zc=class SD{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new SD).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+gi),(n||new SD).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):ji.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Pm).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new SD).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new wo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,ji.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Ph=class _m{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new _m).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+gi),(n||new _m).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):hE.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Zc).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new wo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,hE.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return _m.startSchema(t),_m.addEndianness(t,n),_m.addFields(t,r),_m.addCustomMetadata(t,i),_m.addFeatures(t,s),_m.endSchema(t)}};var so;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(so||(so={}));var ye;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(ye||(ye={}));var xm;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(xm||(xm={}));const lwt=void 0;function wb(e){if(e===null)return"null";if(e===lwt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>wb(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const cwt=Symbol.for("isArrowBigNum");function sh(e,...t){return t.length===0?Object.setPrototypeOf(bo(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}sh.prototype[cwt]=!0;sh.prototype.toJSON=function(){return`"${G2(this)}"`};sh.prototype.valueOf=function(){return GAe(this)};sh.prototype.toString=function(){return G2(this)};sh.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return GAe(this);case"string":return G2(this);case"default":return dwt(this)}return G2(this)};function Tx(...e){return sh.apply(this,e)}function Cx(...e){return sh.apply(this,e)}function W2(...e){return sh.apply(this,e)}Object.setPrototypeOf(Tx.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Cx.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(W2.prototype,Object.create(Uint32Array.prototype));Object.assign(Tx.prototype,sh.prototype,{constructor:Tx,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(Cx.prototype,sh.prototype,{constructor:Cx,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(W2.prototype,sh.prototype,{constructor:W2,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function GAe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const G2=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return M9(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return M9(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${M9(t)}`},dwt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:G2(e);function M9(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class $X{static new(t,n){switch(n){case!0:return new Tx(t);case!1:return new Cx(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new Tx(t)}return t.byteLength===16?new W2(t):new Cx(t)}static signed(t){return new Tx(t)}static unsigned(t){return new Cx(t)}static decimal(t){return new W2(t)}constructor(t,n){return $X.new(t,n)}}function Sa(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var YAe,KAe,XAe,QAe,JAe,ZAe,e2e,t2e,n2e,r2e,i2e,s2e,o2e,a2e,u2e,l2e,c2e,d2e,f2e,h2e,p2e,m2e;class Qn{static isNull(t){return(t==null?void 0:t.typeId)===ye.Null}static isInt(t){return(t==null?void 0:t.typeId)===ye.Int}static isFloat(t){return(t==null?void 0:t.typeId)===ye.Float}static isBinary(t){return(t==null?void 0:t.typeId)===ye.Binary}static isLargeBinary(t){return(t==null?void 0:t.typeId)===ye.LargeBinary}static isUtf8(t){return(t==null?void 0:t.typeId)===ye.Utf8}static isLargeUtf8(t){return(t==null?void 0:t.typeId)===ye.LargeUtf8}static isBool(t){return(t==null?void 0:t.typeId)===ye.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===ye.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===ye.Date}static isTime(t){return(t==null?void 0:t.typeId)===ye.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===ye.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===ye.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===ye.Duration}static isList(t){return(t==null?void 0:t.typeId)===ye.List}static isStruct(t){return(t==null?void 0:t.typeId)===ye.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===ye.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===ye.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===ye.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===ye.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===ye.Dictionary}static isDenseUnion(t){return Qn.isUnion(t)&&t.mode===Lu.Dense}static isSparseUnion(t){return Qn.isUnion(t)&&t.mode===Lu.Sparse}constructor(t){this.typeId=t}}YAe=Symbol.toStringTag;Qn[YAe]=(e=>(e.children=null,e.ArrayType=Array,e.OffsetArrayType=Int32Array,e[Symbol.toStringTag]="DataType"))(Qn.prototype);class dg extends Qn{constructor(){super(ye.Null)}toString(){return"Null"}}KAe=Symbol.toStringTag;dg[KAe]=(e=>e[Symbol.toStringTag]="Null")(dg.prototype);class Fu extends Qn{constructor(t,n){super(ye.Int),this.isSigned=t,this.bitWidth=n}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}XAe=Symbol.toStringTag;Fu[XAe]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Fu.prototype);class LX extends Fu{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class FX extends Fu{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class Ry extends Fu{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class jX extends Fu{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class BX extends Fu{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class zX extends Fu{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class UX extends Fu{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class VX extends Fu{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(LX.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(FX.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(Ry.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(jX.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(BX.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(zX.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(UX.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(VX.prototype,"ArrayType",{value:BigUint64Array});class ky extends Qn{constructor(t){super(ye.Float),this.precision=t}get ArrayType(){switch(this.precision){case Ro.HALF:return Uint16Array;case Ro.SINGLE:return Float32Array;case Ro.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}QAe=Symbol.toStringTag;ky[QAe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(ky.prototype);class g2e extends ky{constructor(){super(Ro.HALF)}}class HX extends ky{constructor(){super(Ro.SINGLE)}}class qX extends ky{constructor(){super(Ro.DOUBLE)}}Object.defineProperty(g2e.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(HX.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(qX.prototype,"ArrayType",{value:Float64Array});class Y2 extends Qn{constructor(){super(ye.Binary)}toString(){return"Binary"}}JAe=Symbol.toStringTag;Y2[JAe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(Y2.prototype);class B3 extends Qn{constructor(){super(ye.LargeBinary)}toString(){return"LargeBinary"}}ZAe=Symbol.toStringTag;B3[ZAe]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeBinary"))(B3.prototype);class pE extends Qn{constructor(){super(ye.Utf8)}toString(){return"Utf8"}}e2e=Symbol.toStringTag;pE[e2e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(pE.prototype);class z3 extends Qn{constructor(){super(ye.LargeUtf8)}toString(){return"LargeUtf8"}}t2e=Symbol.toStringTag;z3[t2e]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeUtf8"))(z3.prototype);class K2 extends Qn{constructor(){super(ye.Bool)}toString(){return"Bool"}}n2e=Symbol.toStringTag;K2[n2e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(K2.prototype);class U3 extends Qn{constructor(t,n,r=128){super(ye.Decimal),this.scale=t,this.precision=n,this.bitWidth=r}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}r2e=Symbol.toStringTag;U3[r2e]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(U3.prototype);class mE extends Qn{constructor(t){super(ye.Date),this.unit=t}toString(){return`Date${(this.unit+1)*32}<${Ed[this.unit]}>`}}i2e=Symbol.toStringTag;mE[i2e]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(mE.prototype);class fwt extends mE{constructor(){super(Ed.DAY)}}class hwt extends mE{constructor(){super(Ed.MILLISECOND)}}class fg extends Qn{constructor(t,n){super(ye.Time),this.unit=t,this.bitWidth=n}toString(){return`Time${this.bitWidth}<${mn[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}s2e=Symbol.toStringTag;fg[s2e]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(fg.prototype);class pwt extends fg{constructor(){super(mn.SECOND,32)}}class mwt extends fg{constructor(){super(mn.MILLISECOND,32)}}class gwt extends fg{constructor(){super(mn.MICROSECOND,64)}}class ywt extends fg{constructor(){super(mn.NANOSECOND,64)}}class V3 extends Qn{constructor(t,n){super(ye.Timestamp),this.unit=t,this.timezone=n}toString(){return`Timestamp<${mn[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}o2e=Symbol.toStringTag;V3[o2e]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(V3.prototype);class gE extends Qn{constructor(t){super(ye.Interval),this.unit=t}toString(){return`Interval<${Sd[this.unit]}>`}}a2e=Symbol.toStringTag;gE[a2e]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(gE.prototype);class vwt extends gE{constructor(){super(Sd.DAY_TIME)}}class bwt extends gE{constructor(){super(Sd.YEAR_MONTH)}}class H3 extends Qn{constructor(t){super(ye.Duration),this.unit=t}toString(){return`Duration<${mn[this.unit]}>`}}u2e=Symbol.toStringTag;H3[u2e]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(H3.prototype);class yE extends Qn{constructor(t){super(ye.List),this.children=[t]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}l2e=Symbol.toStringTag;yE[l2e]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(yE.prototype);class Wa extends Qn{constructor(t){super(ye.Struct),this.children=t}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}c2e=Symbol.toStringTag;Wa[c2e]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(Wa.prototype);class X2 extends Qn{constructor(t,n,r){super(ye.Union),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}d2e=Symbol.toStringTag;X2[d2e]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(X2.prototype);class q3 extends Qn{constructor(t){super(ye.FixedSizeBinary),this.byteWidth=t}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}f2e=Symbol.toStringTag;q3[f2e]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(q3.prototype);class vE extends Qn{constructor(t,n){super(ye.FixedSizeList),this.listSize=t,this.children=[n]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}h2e=Symbol.toStringTag;vE[h2e]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(vE.prototype);class Q2 extends Qn{constructor(t,n=!1){var r,i,s;if(super(ye.Map),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}p2e=Symbol.toStringTag;Q2[p2e]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(Q2.prototype);const _wt=(e=>()=>++e)(-1);class Py extends Qn{constructor(t,n,r,i){super(ye.Dictionary),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?_wt():Sa(r)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}m2e=Symbol.toStringTag;Py[m2e]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(Py.prototype);function Oh(e){const t=e;switch(e.typeId){case ye.Decimal:return e.bitWidth/32;case ye.Timestamp:return 2;case ye.Date:return 1+t.unit;case ye.Interval:return 1+t.unit;case ye.FixedSizeList:return t.listSize;case ye.FixedSizeBinary:return t.byteWidth;default:return 1}}class yr{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return wwt(this,t,n)}getVisitFnByTypeId(t,n=!0){return Vw(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitLargeUtf8(t,...n){return null}visitBinary(t,...n){return null}visitLargeBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function wwt(e,t,n=!0){return typeof t=="number"?Vw(e,t,n):typeof t=="string"&&t in ye?Vw(e,ye[t],n):t&&t instanceof Qn?Vw(e,_he(t),n):t!=null&&t.type&&t.type instanceof Qn?Vw(e,_he(t.type),n):Vw(e,ye.NONE,n)}function Vw(e,t,n=!0){let r=null;switch(t){case ye.Null:r=e.visitNull;break;case ye.Bool:r=e.visitBool;break;case ye.Int:r=e.visitInt;break;case ye.Int8:r=e.visitInt8||e.visitInt;break;case ye.Int16:r=e.visitInt16||e.visitInt;break;case ye.Int32:r=e.visitInt32||e.visitInt;break;case ye.Int64:r=e.visitInt64||e.visitInt;break;case ye.Uint8:r=e.visitUint8||e.visitInt;break;case ye.Uint16:r=e.visitUint16||e.visitInt;break;case ye.Uint32:r=e.visitUint32||e.visitInt;break;case ye.Uint64:r=e.visitUint64||e.visitInt;break;case ye.Float:r=e.visitFloat;break;case ye.Float16:r=e.visitFloat16||e.visitFloat;break;case ye.Float32:r=e.visitFloat32||e.visitFloat;break;case ye.Float64:r=e.visitFloat64||e.visitFloat;break;case ye.Utf8:r=e.visitUtf8;break;case ye.LargeUtf8:r=e.visitLargeUtf8;break;case ye.Binary:r=e.visitBinary;break;case ye.LargeBinary:r=e.visitLargeBinary;break;case ye.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case ye.Date:r=e.visitDate;break;case ye.DateDay:r=e.visitDateDay||e.visitDate;break;case ye.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case ye.Timestamp:r=e.visitTimestamp;break;case ye.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case ye.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case ye.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case ye.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case ye.Time:r=e.visitTime;break;case ye.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case ye.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case ye.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case ye.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case ye.Decimal:r=e.visitDecimal;break;case ye.List:r=e.visitList;break;case ye.Struct:r=e.visitStruct;break;case ye.Union:r=e.visitUnion;break;case ye.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case ye.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case ye.Dictionary:r=e.visitDictionary;break;case ye.Interval:r=e.visitInterval;break;case ye.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case ye.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case ye.Duration:r=e.visitDuration;break;case ye.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case ye.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case ye.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case ye.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case ye.FixedSizeList:r=e.visitFixedSizeList;break;case ye.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${ye[t]}'`)}function _he(e){switch(e.typeId){case ye.Null:return ye.Null;case ye.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?ye.Int8:ye.Uint8;case 16:return n?ye.Int16:ye.Uint16;case 32:return n?ye.Int32:ye.Uint32;case 64:return n?ye.Int64:ye.Uint64}return ye.Int}case ye.Float:switch(e.precision){case Ro.HALF:return ye.Float16;case Ro.SINGLE:return ye.Float32;case Ro.DOUBLE:return ye.Float64}return ye.Float;case ye.Binary:return ye.Binary;case ye.LargeBinary:return ye.LargeBinary;case ye.Utf8:return ye.Utf8;case ye.LargeUtf8:return ye.LargeUtf8;case ye.Bool:return ye.Bool;case ye.Decimal:return ye.Decimal;case ye.Time:switch(e.unit){case mn.SECOND:return ye.TimeSecond;case mn.MILLISECOND:return ye.TimeMillisecond;case mn.MICROSECOND:return ye.TimeMicrosecond;case mn.NANOSECOND:return ye.TimeNanosecond}return ye.Time;case ye.Timestamp:switch(e.unit){case mn.SECOND:return ye.TimestampSecond;case mn.MILLISECOND:return ye.TimestampMillisecond;case mn.MICROSECOND:return ye.TimestampMicrosecond;case mn.NANOSECOND:return ye.TimestampNanosecond}return ye.Timestamp;case ye.Date:switch(e.unit){case Ed.DAY:return ye.DateDay;case Ed.MILLISECOND:return ye.DateMillisecond}return ye.Date;case ye.Interval:switch(e.unit){case Sd.DAY_TIME:return ye.IntervalDayTime;case Sd.YEAR_MONTH:return ye.IntervalYearMonth}return ye.Interval;case ye.Duration:switch(e.unit){case mn.SECOND:return ye.DurationSecond;case mn.MILLISECOND:return ye.DurationMillisecond;case mn.MICROSECOND:return ye.DurationMicrosecond;case mn.NANOSECOND:return ye.DurationNanosecond}return ye.Duration;case ye.Map:return ye.Map;case ye.List:return ye.List;case ye.Struct:return ye.Struct;case ye.Union:switch(e.mode){case Lu.Dense:return ye.DenseUnion;case Lu.Sparse:return ye.SparseUnion}return ye.Union;case ye.FixedSizeBinary:return ye.FixedSizeBinary;case ye.FixedSizeList:return ye.FixedSizeList;case ye.Dictionary:return ye.Dictionary}throw new Error(`Unrecognized type '${ye[e.typeId]}'`)}yr.prototype.visitInt8=null;yr.prototype.visitInt16=null;yr.prototype.visitInt32=null;yr.prototype.visitInt64=null;yr.prototype.visitUint8=null;yr.prototype.visitUint16=null;yr.prototype.visitUint32=null;yr.prototype.visitUint64=null;yr.prototype.visitFloat16=null;yr.prototype.visitFloat32=null;yr.prototype.visitFloat64=null;yr.prototype.visitDateDay=null;yr.prototype.visitDateMillisecond=null;yr.prototype.visitTimestampSecond=null;yr.prototype.visitTimestampMillisecond=null;yr.prototype.visitTimestampMicrosecond=null;yr.prototype.visitTimestampNanosecond=null;yr.prototype.visitTimeSecond=null;yr.prototype.visitTimeMillisecond=null;yr.prototype.visitTimeMicrosecond=null;yr.prototype.visitTimeNanosecond=null;yr.prototype.visitDenseUnion=null;yr.prototype.visitSparseUnion=null;yr.prototype.visitIntervalDayTime=null;yr.prototype.visitIntervalYearMonth=null;yr.prototype.visitDuration=null;yr.prototype.visitDurationSecond=null;yr.prototype.visitDurationMillisecond=null;yr.prototype.visitDurationMicrosecond=null;yr.prototype.visitDurationNanosecond=null;const y2e=new Float64Array(1),yw=new Uint32Array(y2e.buffer);function v2e(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function b2e(e){if(e!==e)return 32256;y2e[0]=e;const t=(yw[1]&2147483648)>>16&65535;let n=yw[1]&2146435072,r=0;return n>=1089470464?yw[0]>0?n=31744:(n=(n&2080374784)>>16,r=(yw[1]&1048575)>>10):n<=1056964608?(r=1048576+(yw[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(yw[1]&1048575)+512>>10),t|n|r&65535}class Rn extends yr{}function Mn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const xwt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},WX=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},Ewt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},Swt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},_2e=(e,t,n,r)=>{if(n+1<t.length){const i=Sa(t[n]),s=Sa(t[n+1]);e.set(r.subarray(0,s-i),i)}},Twt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Rg=({values:e},t,n)=>{e[t]=n},GX=({values:e},t,n)=>{e[t]=n},w2e=({values:e},t,n)=>{e[t]=b2e(n)},Cwt=(e,t,n)=>{switch(e.type.precision){case Ro.HALF:return w2e(e,t,n);case Ro.SINGLE:case Ro.DOUBLE:return GX(e,t,n)}},YX=({values:e},t,n)=>{xwt(e,t,n.valueOf())},KX=({values:e},t,n)=>{WX(e,t*2,n.valueOf())},x2e=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},E2e=({values:e,valueOffsets:t},n,r)=>_2e(e,t,n,r),S2e=({values:e,valueOffsets:t},n,r)=>_2e(e,t,n,p6(r)),T2e=(e,t,n)=>{e.type.unit===Ed.DAY?YX(e,t,n):KX(e,t,n)},XX=({values:e},t,n)=>WX(e,t*2,n/1e3),QX=({values:e},t,n)=>WX(e,t*2,n),JX=({values:e},t,n)=>Ewt(e,t*2,n),ZX=({values:e},t,n)=>Swt(e,t*2,n),C2e=(e,t,n)=>{switch(e.type.unit){case mn.SECOND:return XX(e,t,n);case mn.MILLISECOND:return QX(e,t,n);case mn.MICROSECOND:return JX(e,t,n);case mn.NANOSECOND:return ZX(e,t,n)}},eQ=({values:e},t,n)=>{e[t]=n},tQ=({values:e},t,n)=>{e[t]=n},nQ=({values:e},t,n)=>{e[t]=n},rQ=({values:e},t,n)=>{e[t]=n},A2e=(e,t,n)=>{switch(e.type.unit){case mn.SECOND:return eQ(e,t,n);case mn.MILLISECOND:return tQ(e,t,n);case mn.MICROSECOND:return nQ(e,t,n);case mn.NANOSECOND:return rQ(e,t,n)}},I2e=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},Awt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Td.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},Iwt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Td.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},Rwt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),kwt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),Pwt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),Nwt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),Owt=(e,t,n)=>{const r=e.type.children.map(s=>Td.getVisitFn(s.type)),i=n instanceof Map?Pwt(t,n):n instanceof Jr?kwt(t,n):Array.isArray(n)?Rwt(t,n):Nwt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},Dwt=(e,t,n)=>{e.type.mode===Lu.Dense?R2e(e,t,n):k2e(e,t,n)},R2e=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Td.visit(i,e.valueOffsets[t],n)},k2e=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Td.visit(i,t,n)},Mwt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},P2e=(e,t,n)=>{e.type.unit===Sd.DAY_TIME?iQ(e,t,n):sQ(e,t,n)},iQ=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},sQ=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},oQ=({values:e},t,n)=>{e[t]=n},aQ=({values:e},t,n)=>{e[t]=n},uQ=({values:e},t,n)=>{e[t]=n},lQ=({values:e},t,n)=>{e[t]=n},N2e=(e,t,n)=>{switch(e.type.unit){case mn.SECOND:return oQ(e,t,n);case mn.MILLISECOND:return aQ(e,t,n);case mn.MICROSECOND:return uQ(e,t,n);case mn.NANOSECOND:return lQ(e,t,n)}},$wt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Td.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Rn.prototype.visitBool=Mn(Twt);Rn.prototype.visitInt=Mn(Rg);Rn.prototype.visitInt8=Mn(Rg);Rn.prototype.visitInt16=Mn(Rg);Rn.prototype.visitInt32=Mn(Rg);Rn.prototype.visitInt64=Mn(Rg);Rn.prototype.visitUint8=Mn(Rg);Rn.prototype.visitUint16=Mn(Rg);Rn.prototype.visitUint32=Mn(Rg);Rn.prototype.visitUint64=Mn(Rg);Rn.prototype.visitFloat=Mn(Cwt);Rn.prototype.visitFloat16=Mn(w2e);Rn.prototype.visitFloat32=Mn(GX);Rn.prototype.visitFloat64=Mn(GX);Rn.prototype.visitUtf8=Mn(S2e);Rn.prototype.visitLargeUtf8=Mn(S2e);Rn.prototype.visitBinary=Mn(E2e);Rn.prototype.visitLargeBinary=Mn(E2e);Rn.prototype.visitFixedSizeBinary=Mn(x2e);Rn.prototype.visitDate=Mn(T2e);Rn.prototype.visitDateDay=Mn(YX);Rn.prototype.visitDateMillisecond=Mn(KX);Rn.prototype.visitTimestamp=Mn(C2e);Rn.prototype.visitTimestampSecond=Mn(XX);Rn.prototype.visitTimestampMillisecond=Mn(QX);Rn.prototype.visitTimestampMicrosecond=Mn(JX);Rn.prototype.visitTimestampNanosecond=Mn(ZX);Rn.prototype.visitTime=Mn(A2e);Rn.prototype.visitTimeSecond=Mn(eQ);Rn.prototype.visitTimeMillisecond=Mn(tQ);Rn.prototype.visitTimeMicrosecond=Mn(nQ);Rn.prototype.visitTimeNanosecond=Mn(rQ);Rn.prototype.visitDecimal=Mn(I2e);Rn.prototype.visitList=Mn(Awt);Rn.prototype.visitStruct=Mn(Owt);Rn.prototype.visitUnion=Mn(Dwt);Rn.prototype.visitDenseUnion=Mn(R2e);Rn.prototype.visitSparseUnion=Mn(k2e);Rn.prototype.visitDictionary=Mn(Mwt);Rn.prototype.visitInterval=Mn(P2e);Rn.prototype.visitIntervalDayTime=Mn(iQ);Rn.prototype.visitIntervalYearMonth=Mn(sQ);Rn.prototype.visitDuration=Mn(N2e);Rn.prototype.visitDurationSecond=Mn(oQ);Rn.prototype.visitDurationMillisecond=Mn(aQ);Rn.prototype.visitDurationMicrosecond=Mn(uQ);Rn.prototype.visitDurationNanosecond=Mn(lQ);Rn.prototype.visitFixedSizeList=Mn($wt);Rn.prototype.visitMap=Mn(Iwt);const Td=new Rn,uf=Symbol.for("parent"),Ax=Symbol.for("rowIndex");class cQ{constructor(t,n){return this[uf]=t,this[Ax]=n,new Proxy(this,new Fwt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Ax],n=this[uf],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Nl.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${wb(t)}: ${wb(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new Lwt(this[uf],this[Ax])}}class Lwt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Nl.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(cQ.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[uf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Ax]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class Fwt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[uf].type.children.map(n=>n.name)}has(t,n){return t[uf].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[uf].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[uf].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Nl.visit(t[uf].children[r],t[Ax]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[uf].type.children.findIndex(s=>s.name===n);return i!==-1?(Td.visit(t[uf].children[i],t[Ax],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class En extends yr{}function kn(e){return(t,n)=>t.getValid(n)?e(t,n):null}const jwt=(e,t)=>864e5*e[t],dQ=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),Bwt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,zwt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,O2e=e=>new Date(e),Uwt=(e,t)=>O2e(jwt(e,t)),Vwt=(e,t)=>O2e(dQ(e,t)),Hwt=(e,t)=>null,D2e=(e,t,n)=>{if(n+1>=t.length)return null;const r=Sa(t[n]),i=Sa(t[n+1]);return e.subarray(r,i)},qwt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},M2e=({values:e},t)=>Uwt(e,t),$2e=({values:e},t)=>Vwt(e,t*2),yv=({stride:e,values:t},n)=>t[e*n],Wwt=({stride:e,values:t},n)=>v2e(t[e*n]),L2e=({values:e},t)=>e[t],Gwt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),F2e=({values:e,valueOffsets:t},n)=>D2e(e,t,n),j2e=({values:e,valueOffsets:t},n)=>{const r=D2e(e,t,n);return r!==null?UV(r):null},Ywt=({values:e},t)=>e[t],Kwt=({type:e,values:t},n)=>e.precision!==Ro.HALF?t[n]:v2e(t[n]),Xwt=(e,t)=>e.type.unit===Ed.DAY?M2e(e,t):$2e(e,t),B2e=({values:e},t)=>1e3*dQ(e,t*2),z2e=({values:e},t)=>dQ(e,t*2),U2e=({values:e},t)=>Bwt(e,t*2),V2e=({values:e},t)=>zwt(e,t*2),Qwt=(e,t)=>{switch(e.type.unit){case mn.SECOND:return B2e(e,t);case mn.MILLISECOND:return z2e(e,t);case mn.MICROSECOND:return U2e(e,t);case mn.NANOSECOND:return V2e(e,t)}},H2e=({values:e},t)=>e[t],q2e=({values:e},t)=>e[t],W2e=({values:e},t)=>e[t],G2e=({values:e},t)=>e[t],Jwt=(e,t)=>{switch(e.type.unit){case mn.SECOND:return H2e(e,t);case mn.MILLISECOND:return q2e(e,t);case mn.MICROSECOND:return W2e(e,t);case mn.NANOSECOND:return G2e(e,t)}},Zwt=({values:e,stride:t},n)=>$X.decimal(e.subarray(t*n,t*(n+1))),ext=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new Jr([u])},txt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new y6(o.slice(i,s-i))},nxt=(e,t)=>new cQ(e,t),rxt=(e,t)=>e.type.mode===Lu.Dense?Y2e(e,t):K2e(e,t),Y2e=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Nl.visit(r,e.valueOffsets[t])},K2e=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Nl.visit(r,t)},ixt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},sxt=(e,t)=>e.type.unit===Sd.DAY_TIME?X2e(e,t):Q2e(e,t),X2e=({values:e},t)=>e.subarray(2*t,2*(t+1)),Q2e=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},J2e=({values:e},t)=>e[t],Z2e=({values:e},t)=>e[t],eIe=({values:e},t)=>e[t],tIe=({values:e},t)=>e[t],oxt=(e,t)=>{switch(e.type.unit){case mn.SECOND:return J2e(e,t);case mn.MILLISECOND:return Z2e(e,t);case mn.MICROSECOND:return eIe(e,t);case mn.NANOSECOND:return tIe(e,t)}},axt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new Jr([s])};En.prototype.visitNull=kn(Hwt);En.prototype.visitBool=kn(qwt);En.prototype.visitInt=kn(Ywt);En.prototype.visitInt8=kn(yv);En.prototype.visitInt16=kn(yv);En.prototype.visitInt32=kn(yv);En.prototype.visitInt64=kn(L2e);En.prototype.visitUint8=kn(yv);En.prototype.visitUint16=kn(yv);En.prototype.visitUint32=kn(yv);En.prototype.visitUint64=kn(L2e);En.prototype.visitFloat=kn(Kwt);En.prototype.visitFloat16=kn(Wwt);En.prototype.visitFloat32=kn(yv);En.prototype.visitFloat64=kn(yv);En.prototype.visitUtf8=kn(j2e);En.prototype.visitLargeUtf8=kn(j2e);En.prototype.visitBinary=kn(F2e);En.prototype.visitLargeBinary=kn(F2e);En.prototype.visitFixedSizeBinary=kn(Gwt);En.prototype.visitDate=kn(Xwt);En.prototype.visitDateDay=kn(M2e);En.prototype.visitDateMillisecond=kn($2e);En.prototype.visitTimestamp=kn(Qwt);En.prototype.visitTimestampSecond=kn(B2e);En.prototype.visitTimestampMillisecond=kn(z2e);En.prototype.visitTimestampMicrosecond=kn(U2e);En.prototype.visitTimestampNanosecond=kn(V2e);En.prototype.visitTime=kn(Jwt);En.prototype.visitTimeSecond=kn(H2e);En.prototype.visitTimeMillisecond=kn(q2e);En.prototype.visitTimeMicrosecond=kn(W2e);En.prototype.visitTimeNanosecond=kn(G2e);En.prototype.visitDecimal=kn(Zwt);En.prototype.visitList=kn(ext);En.prototype.visitStruct=kn(nxt);En.prototype.visitUnion=kn(rxt);En.prototype.visitDenseUnion=kn(Y2e);En.prototype.visitSparseUnion=kn(K2e);En.prototype.visitDictionary=kn(ixt);En.prototype.visitInterval=kn(sxt);En.prototype.visitIntervalDayTime=kn(X2e);En.prototype.visitIntervalYearMonth=kn(Q2e);En.prototype.visitDuration=kn(oxt);En.prototype.visitDurationSecond=kn(J2e);En.prototype.visitDurationMillisecond=kn(Z2e);En.prototype.visitDurationMicrosecond=kn(eIe);En.prototype.visitDurationNanosecond=kn(tIe);En.prototype.visitFixedSizeList=kn(axt);En.prototype.visitMap=kn(txt);const Nl=new En,gf=Symbol.for("keys"),Ix=Symbol.for("vals");class y6{constructor(t){return this[gf]=new Jr([t.children[0]]).memoize(),this[Ix]=t.children[1],new Proxy(this,new lxt)}[Symbol.iterator](){return new uxt(this[gf],this[Ix])}get size(){return this[gf].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[gf],n=this[Ix],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Nl.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${wb(t)}: ${wb(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class uxt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Nl.visit(this.vals,t)]})}}class lxt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[gf].toArray().map(String)}has(t,n){return t[gf].includes(n)}getOwnPropertyDescriptor(t,n){if(t[gf].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[gf].indexOf(n);if(r!==-1){const i=Nl.visit(Reflect.get(t,Ix),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[gf].indexOf(n);return i!==-1?(Td.visit(Reflect.get(t,Ix),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(y6.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[gf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Ix]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let whe;function nIe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(whe=s,s=o,o=whe),o>i&&(o=i),r?r(e,s,o):[s,o]}const xhe=e=>e!==e;function SS(e){if(typeof e!=="object"||e===null)return xhe(e)?xhe:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?rwt(e,n):!1:e instanceof Map?dxt(e):Array.isArray(e)?cxt(e):e instanceof Jr?fxt(e):hxt(e,!0)}function cxt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=SS(e[n]);return v6(t)}function dxt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=SS(r);return v6(n)}function fxt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=SS(e.get(n));return v6(t)}function hxt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=SS(e[n[i]]);return v6(r,n)}function v6(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return pxt(e,n);case Map:return Ehe(e,n,n.keys());case y6:case cQ:case Object:case void 0:return Ehe(e,n,t||Object.keys(n))}return n instanceof Jr?mxt(e,n):!1}}function pxt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function mxt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function Ehe(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function rIe(e,t,n,r){return(n&1<<r)!==0}function gxt(e,t,n,r){return(n&1<<r)>>r}function W3(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):iIe(new fQ(n,e,t,null,rIe)).subarray(0,r)),i}return n}function iIe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class fQ{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function YV(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new fQ(e,t,n-t,e,gxt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return YV(e,t,i)+YV(e,r,n)+yxt(e,i>>3,r-i>>3)}function yxt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=$9(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=$9(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=$9(s.getUint8(i)),i+=1;return r}function $9(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const vxt=-1;class oi{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return Qn.isSparseUnion(t)?this.children.some(n=>n.nullable):Qn.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(Qn.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=vxt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-YV(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof oi?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Oh(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(Qn.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===Lu.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(Qn.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===Lu.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(W3(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const d=s[c];r=(d&l)!==0,n?s[c]=d|l:s[c]=d&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new oi(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===ye.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(W3(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[xm.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[xm.TYPE])&&(o[xm.TYPE]=s.subarray(t,t+n)),(s=o[xm.OFFSET])&&(o[xm.OFFSET]=s.subarray(t,t+n+1))||(s=o[xm.DATA])&&(o[xm.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}oi.prototype.children=Object.freeze([]);class qA extends yr{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new oi(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Br(t.nullBitmap),s=bo(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new oi(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Br(t.nullBitmap),s=bo(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new oi(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Br(t.nullBitmap),s=bo(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new oi(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Br(t.data),s=Br(t.nullBitmap),o=nC(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new oi(n,r,a,u,[o,i,s])}visitLargeUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Br(t.data),s=Br(t.nullBitmap),o=lhe(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new oi(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Br(t.data),s=Br(t.nullBitmap),o=nC(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new oi(n,r,a,u,[o,i,s])}visitLargeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Br(t.data),s=Br(t.nullBitmap),o=lhe(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new oi(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Br(t.nullBitmap),s=bo(n.ArrayType,t.data),{["length"]:o=s.length/Oh(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new oi(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Br(t.nullBitmap),s=bo(n.ArrayType,t.data),{["length"]:o=s.length/Oh(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new oi(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Br(t.nullBitmap),s=bo(n.ArrayType,t.data),{["length"]:o=s.length/Oh(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new oi(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Br(t.nullBitmap),s=bo(n.ArrayType,t.data),{["length"]:o=s.length/Oh(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new oi(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Br(t.nullBitmap),s=bo(n.ArrayType,t.data),{["length"]:o=s.length/Oh(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new oi(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Br(t.nullBitmap),o=nC(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new oi(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Br(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new oi(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=bo(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(Qn.isSparseUnion(n))return new oi(n,r,o,a,[void 0,void 0,void 0,s],i);const u=nC(t.valueOffsets);return new oi(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Br(t.nullBitmap),s=bo(n.indices.ArrayType,t.data),{["dictionary"]:o=new Jr([new qA().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new oi(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Br(t.nullBitmap),s=bo(n.ArrayType,t.data),{["length"]:o=s.length/Oh(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new oi(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Br(t.nullBitmap),s=bo(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new oi(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new qA().visit({type:n.valueType})}=t,s=Br(t.nullBitmap),{["length"]:o=i.length/Oh(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new oi(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new qA().visit({type:n.childType})}=t,s=Br(t.nullBitmap),o=nC(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new oi(n,r,a,u,[o,void 0,s],[i])}}const bxt=new qA;function Ua(e){return bxt.visit(e)}class She{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function _xt(e){return e.some(t=>t.nullable)}function sIe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function oIe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function aIe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),d=Math.min(r-u,l);i.push(a.slice(c,d-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function hQ(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function pQ(e,t){return e.getValid(t)}function G3(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return hQ(r,this._offsets,n,t)}}function uIe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=hQ(s,this._offsets,r,n);return t=void 0,o}}function lIe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const d=r[l];if(~(a=e(d,t,o)))return u+a;o=0,u+=d.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):hQ(s,this._offsets,i,n);return t=void 0,o}}class Sn extends yr{}function wxt(e,t){return t===null&&e.length>0?0:-1}function xxt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new fQ(n,e.offset+(t||0),e.length,n,rIe)){if(!i)return r;++r}return-1}function zn(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case ye.Union:break;case ye.Dictionary:break;default:return xxt(e,n)}const r=Nl.getVisitFn(e),i=SS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function cIe(e,t,n){const r=Nl.getVisitFn(e),i=SS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Sn.prototype.visitNull=wxt;Sn.prototype.visitBool=zn;Sn.prototype.visitInt=zn;Sn.prototype.visitInt8=zn;Sn.prototype.visitInt16=zn;Sn.prototype.visitInt32=zn;Sn.prototype.visitInt64=zn;Sn.prototype.visitUint8=zn;Sn.prototype.visitUint16=zn;Sn.prototype.visitUint32=zn;Sn.prototype.visitUint64=zn;Sn.prototype.visitFloat=zn;Sn.prototype.visitFloat16=zn;Sn.prototype.visitFloat32=zn;Sn.prototype.visitFloat64=zn;Sn.prototype.visitUtf8=zn;Sn.prototype.visitLargeUtf8=zn;Sn.prototype.visitBinary=zn;Sn.prototype.visitLargeBinary=zn;Sn.prototype.visitFixedSizeBinary=zn;Sn.prototype.visitDate=zn;Sn.prototype.visitDateDay=zn;Sn.prototype.visitDateMillisecond=zn;Sn.prototype.visitTimestamp=zn;Sn.prototype.visitTimestampSecond=zn;Sn.prototype.visitTimestampMillisecond=zn;Sn.prototype.visitTimestampMicrosecond=zn;Sn.prototype.visitTimestampNanosecond=zn;Sn.prototype.visitTime=zn;Sn.prototype.visitTimeSecond=zn;Sn.prototype.visitTimeMillisecond=zn;Sn.prototype.visitTimeMicrosecond=zn;Sn.prototype.visitTimeNanosecond=zn;Sn.prototype.visitDecimal=zn;Sn.prototype.visitList=zn;Sn.prototype.visitStruct=zn;Sn.prototype.visitUnion=zn;Sn.prototype.visitDenseUnion=cIe;Sn.prototype.visitSparseUnion=cIe;Sn.prototype.visitDictionary=zn;Sn.prototype.visitInterval=zn;Sn.prototype.visitIntervalDayTime=zn;Sn.prototype.visitIntervalYearMonth=zn;Sn.prototype.visitDuration=zn;Sn.prototype.visitDurationSecond=zn;Sn.prototype.visitDurationMillisecond=zn;Sn.prototype.visitDurationMicrosecond=zn;Sn.prototype.visitDurationNanosecond=zn;Sn.prototype.visitFixedSizeList=zn;Sn.prototype.visitMap=zn;const Y3=new Sn;class Tn extends yr{}function Pn(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===ye.Timestamp||t instanceof Fu&&t.bitWidth!==64||t instanceof fg&&t.bitWidth!==64||t instanceof ky&&t.precision!==Ro.HALF))return new She(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new She(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new Ext(o)})}class Ext{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Tn.prototype.visitNull=Pn;Tn.prototype.visitBool=Pn;Tn.prototype.visitInt=Pn;Tn.prototype.visitInt8=Pn;Tn.prototype.visitInt16=Pn;Tn.prototype.visitInt32=Pn;Tn.prototype.visitInt64=Pn;Tn.prototype.visitUint8=Pn;Tn.prototype.visitUint16=Pn;Tn.prototype.visitUint32=Pn;Tn.prototype.visitUint64=Pn;Tn.prototype.visitFloat=Pn;Tn.prototype.visitFloat16=Pn;Tn.prototype.visitFloat32=Pn;Tn.prototype.visitFloat64=Pn;Tn.prototype.visitUtf8=Pn;Tn.prototype.visitLargeUtf8=Pn;Tn.prototype.visitBinary=Pn;Tn.prototype.visitLargeBinary=Pn;Tn.prototype.visitFixedSizeBinary=Pn;Tn.prototype.visitDate=Pn;Tn.prototype.visitDateDay=Pn;Tn.prototype.visitDateMillisecond=Pn;Tn.prototype.visitTimestamp=Pn;Tn.prototype.visitTimestampSecond=Pn;Tn.prototype.visitTimestampMillisecond=Pn;Tn.prototype.visitTimestampMicrosecond=Pn;Tn.prototype.visitTimestampNanosecond=Pn;Tn.prototype.visitTime=Pn;Tn.prototype.visitTimeSecond=Pn;Tn.prototype.visitTimeMillisecond=Pn;Tn.prototype.visitTimeMicrosecond=Pn;Tn.prototype.visitTimeNanosecond=Pn;Tn.prototype.visitDecimal=Pn;Tn.prototype.visitList=Pn;Tn.prototype.visitStruct=Pn;Tn.prototype.visitUnion=Pn;Tn.prototype.visitDenseUnion=Pn;Tn.prototype.visitSparseUnion=Pn;Tn.prototype.visitDictionary=Pn;Tn.prototype.visitInterval=Pn;Tn.prototype.visitIntervalDayTime=Pn;Tn.prototype.visitIntervalYearMonth=Pn;Tn.prototype.visitDuration=Pn;Tn.prototype.visitDurationSecond=Pn;Tn.prototype.visitDurationMillisecond=Pn;Tn.prototype.visitDurationMicrosecond=Pn;Tn.prototype.visitDurationNanosecond=Pn;Tn.prototype.visitFixedSizeList=Pn;Tn.prototype.visitMap=Pn;const mQ=new Tn;var dIe;const fIe={},hIe={};class Jr{constructor(t){var n,r,i;const s=t[0]instanceof Jr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof oi)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l}=fIe[o.typeId],c=s[0];this.isValid=d=>pQ(c,d),this.get=d=>a(c,d),this.set=(d,f)=>u(c,d,f),this.indexOf=d=>l(c,d),this._offsets=[0,c.length];break}default:Object.setPrototypeOf(this,hIe[o.typeId]),this._offsets=oIe(s);break}this.data=s,this.type=o,this.stride=Oh(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullable(){return _xt(this.data)}get nullCount(){return sIe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${ye[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}[Symbol.iterator](){return mQ.visit(this)}concat(...t){return new Jr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new Jr(nIe(this,t,n,({data:r,_offsets:i},s,o)=>aIe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case ye.Int:case ye.Float:case ye.Decimal:case ye.Time:case ye.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new Jr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return Qn.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Qn.isDictionary(this.type)){const t=new K3(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new Jr(n)}return new K3(this)}unmemoize(){if(Qn.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new Jr(n)}return this}}dIe=Symbol.toStringTag;Jr[dIe]=(e=>{e.type=Qn.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(ye).map(n=>ye[n]).filter(n=>typeof n=="number"&&n!==ye.NONE);for(const n of t){const r=Nl.getVisitFnByTypeId(n),i=Td.getVisitFnByTypeId(n),s=Y3.getVisitFnByTypeId(n);fIe[n]={get:r,set:i,indexOf:s},hIe[n]=Object.create(e,{isValid:{value:G3(pQ)},get:{value:G3(Nl.getVisitFnByTypeId(n))},set:{value:uIe(Td.getVisitFnByTypeId(n))},indexOf:{value:lIe(Y3.getVisitFnByTypeId(n))}})}return"Vector"})(Jr.prototype);class K3 extends Jr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new K3(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Jr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function Sxt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${Txt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function Txt(e){return typeof e!="bigint"?wb(e):`${wb(e)}n`}function L9(e,t){const n=Math.ceil(e)*t-1;return(n-n%64+64||64)/t}function The(e,t=0){return e.length>=t?e.subarray(0,t):VV(new e.constructor(t),e,0)}class CR{constructor(t,n=0,r=1){this.length=Math.ceil(n/r),this.buffer=new t(this.length),this.stride=r,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?L9(r*1,this.BYTES_PER_ELEMENT):L9(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=L9(t*this.stride,this.BYTES_PER_ELEMENT);const n=The(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this.buffer=new this.ArrayType,this}_resize(t){return this.buffer=The(this.buffer,t)}}class AR extends CR{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class pIe extends AR{constructor(){super(Uint8Array,0,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class mIe extends AR{constructor(t){super(t.OffsetArrayType,1,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&r>=0&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,this.BYTES_PER_ELEMENT>4?BigInt(0):0),super.flush(t+1)}}let Bl=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Oh(t),this._nulls=new pIe,n&&n.length>0&&(this._isValid=Sxt(n))}toVector(){return new Jr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:d}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=d==null?void 0:d.flush(o));const f=this.children.map(h=>h.flush());return this.clear(),Ua({type:s,length:o,nullCount:a,children:f,child:f[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};Bl.prototype.length=1;Bl.prototype.stride=1;Bl.prototype.children=null;Bl.prototype.finished=!1;Bl.prototype.nullValues=null;Bl.prototype._isValid=()=>!0;class kg extends Bl{constructor(t){super(t),this._values=new AR(this.ArrayType,0,this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class TS extends Bl{constructor(t){super(t),this._pendingLength=0,this._offsets=new mIe(t.type)}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof y6?n[gf].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class KV{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}class Zl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Zl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+gi),(n||new Zl).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Eo.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Ph).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new KV).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new KV).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new wo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Eo.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class pi{constructor(t=[],n,r,i=Eo.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=QV(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new pi(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new pi(n,this.metadata)}assign(...t){const n=t[0]instanceof pi?t[0]:Array.isArray(t[0])?new pi(t[0]):new pi(t),r=[...this.fields],i=nO(nO(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:nO(nO(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=QV(s,new Map);return new pi([...r,...s],i,new Map([...this.dictionaries,...o]))}}pi.prototype.fields=null;pi.prototype.metadata=null;pi.prototype.dictionaries=null;let Ri=class XV{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new XV(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],XV.new(n,r,i,s)}};Ri.prototype.type=null;Ri.prototype.name=null;Ri.prototype.nullable=null;Ri.prototype.metadata=null;function nO(e,t){return new Map([...e||new Map,...t||new Map])}function QV(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(Qn.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&QV(s.children,t)}return t}var Cxt=VAe,Axt=$3;class JV{static decode(t){t=new Axt(Br(t));const n=Zl.getRootAsFooter(t),r=pi.decode(n.schema(),new Map,n.version());return new Ixt(r,n)}static encode(t){const n=new Cxt,r=pi.encode(n,t.schema);Zl.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())Ny.encode(n,o);const i=n.endVector();Zl.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())Ny.encode(n,o);const s=n.endVector();return Zl.startFooter(n),Zl.addSchema(n,r),Zl.addVersion(n,Eo.V5),Zl.addRecordBatches(n,i),Zl.addDictionaries(n,s),Zl.finishFooterBuffer(n,Zl.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Eo.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class Ixt extends JV{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return Ny.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return Ny.decode(n)}return null}}class Ny{static decode(t){return new Ny(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return KV.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Sa(r),this.bodyLength=Sa(n)}}const rO=Object.freeze({done:!0,value:void 0});class gIe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Rxt extends gIe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Am(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(rO);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return che.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return che.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Am(this,void 0,void 0,function*(){return yield this.abort(t),rO})}return(t){return Am(this,void 0,void 0,function*(){return yield this.close(),rO})}read(t){return Am(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Am(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(rO)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class F9 extends Rxt{write(t){if((t=Br(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?UV(this.toUint8Array(!0)):this.toUint8Array(!1).then(UV)}toUint8Array(t=!1){return t?_p(this._values)[0]:Am(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=AA(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const d=s;o.push(d),a+=d.byteLength}}catch(d){r={error:d}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return _p(o,a)[0]})}}class yIe extends TS{constructor(t){super(t),this._values=new CR(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Br(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class vIe extends TS{constructor(t){super(t),this._values=new CR(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Br(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,BigInt(0));else{const u=a.length;i.set(a,s),r.set(o,BigInt(u)),s+=u}}}class kxt extends Bl{constructor(t){super(t),this._values=new pIe}setValue(t,n){this._values.set(t,+n)}}class b6 extends kg{}b6.prototype._setValue=T2e;class bIe extends b6{}bIe.prototype._setValue=YX;class _Ie extends b6{}_Ie.prototype._setValue=KX;class wIe extends kg{}wIe.prototype._setValue=I2e;class Pxt extends Bl{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new Py(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=X3({type:this.type.indices,nullValues:n}),this.dictionary=X3({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class xIe extends kg{}xIe.prototype._setValue=x2e;class Nxt extends Bl{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new vE(this.type.listSize,new Ri(n,t.type,!0)),r}}class _6 extends kg{setValue(t,n){this._values.set(t,n)}}class Oxt extends _6{setValue(t,n){super.setValue(t,b2e(n))}}class Dxt extends _6{}class Mxt extends _6{}class w6 extends kg{}w6.prototype._setValue=P2e;class EIe extends w6{}EIe.prototype._setValue=iQ;class SIe extends w6{}SIe.prototype._setValue=sQ;class CS extends kg{}CS.prototype._setValue=N2e;class TIe extends CS{}TIe.prototype._setValue=oQ;class CIe extends CS{}CIe.prototype._setValue=aQ;class AIe extends CS{}AIe.prototype._setValue=uQ;class IIe extends CS{}IIe.prototype._setValue=lQ;class Pg extends kg{setValue(t,n){this._values.set(t,n)}}class $xt extends Pg{}class Lxt extends Pg{}class Fxt extends Pg{}class jxt extends Pg{}class Bxt extends Pg{}class zxt extends Pg{}class Uxt extends Pg{}class Vxt extends Pg{}class Hxt extends TS{constructor(t){super(t),this._offsets=new mIe(t.type)}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new yE(new Ri(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class qxt extends TS{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new Q2(new Ri(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class Wxt extends Bl{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class Gxt extends Bl{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new Wa([...this.type.children,new Ri(n,t.type,!0)]),r}}class AS extends kg{}AS.prototype._setValue=C2e;class RIe extends AS{}RIe.prototype._setValue=XX;class kIe extends AS{}kIe.prototype._setValue=QX;class PIe extends AS{}PIe.prototype._setValue=JX;class NIe extends AS{}NIe.prototype._setValue=ZX;class IS extends kg{}IS.prototype._setValue=A2e;class OIe extends IS{}OIe.prototype._setValue=eQ;class DIe extends IS{}DIe.prototype._setValue=tQ;class MIe extends IS{}MIe.prototype._setValue=nQ;class $Ie extends IS{}$Ie.prototype._setValue=rQ;class gQ extends Bl{constructor(t){super(t),this._typeIds=new AR(Int8Array,0,1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Ri(n,t.type)];return this.type=new X2(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class Yxt extends gQ{}class Kxt extends gQ{constructor(t){super(t),this._offsets=new AR(Int32Array)}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class LIe extends TS{constructor(t){super(t),this._values=new CR(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,p6(n))}_flushPending(t,n){}}LIe.prototype._flushPending=yIe.prototype._flushPending;class FIe extends TS{constructor(t){super(t),this._values=new CR(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,p6(n))}_flushPending(t,n){}}FIe.prototype._flushPending=vIe.prototype._flushPending;class Xxt extends yr{visitNull(){return Wxt}visitBool(){return kxt}visitInt(){return Pg}visitInt8(){return $xt}visitInt16(){return Lxt}visitInt32(){return Fxt}visitInt64(){return jxt}visitUint8(){return Bxt}visitUint16(){return zxt}visitUint32(){return Uxt}visitUint64(){return Vxt}visitFloat(){return _6}visitFloat16(){return Oxt}visitFloat32(){return Dxt}visitFloat64(){return Mxt}visitUtf8(){return LIe}visitLargeUtf8(){return FIe}visitBinary(){return yIe}visitLargeBinary(){return vIe}visitFixedSizeBinary(){return xIe}visitDate(){return b6}visitDateDay(){return bIe}visitDateMillisecond(){return _Ie}visitTimestamp(){return AS}visitTimestampSecond(){return RIe}visitTimestampMillisecond(){return kIe}visitTimestampMicrosecond(){return PIe}visitTimestampNanosecond(){return NIe}visitTime(){return IS}visitTimeSecond(){return OIe}visitTimeMillisecond(){return DIe}visitTimeMicrosecond(){return MIe}visitTimeNanosecond(){return $Ie}visitDecimal(){return wIe}visitList(){return Hxt}visitStruct(){return Gxt}visitUnion(){return gQ}visitDenseUnion(){return Kxt}visitSparseUnion(){return Yxt}visitDictionary(){return Pxt}visitInterval(){return w6}visitIntervalDayTime(){return EIe}visitIntervalYearMonth(){return SIe}visitDuration(){return CS}visitDurationSecond(){return TIe}visitDurationMillisecond(){return CIe}visitDurationMicrosecond(){return AIe}visitDurationNanosecond(){return IIe}visitFixedSizeList(){return Nxt}visitMap(){return qxt}}const Qxt=new Xxt;class Cn extends yr{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function Uu(e,t){return t instanceof e.constructor}function o_(e,t){return e===t||Uu(e,t)}function Ng(e,t){return e===t||Uu(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function x6(e,t){return e===t||Uu(e,t)&&e.precision===t.precision}function Jxt(e,t){return e===t||Uu(e,t)&&e.byteWidth===t.byteWidth}function yQ(e,t){return e===t||Uu(e,t)&&e.unit===t.unit}function IR(e,t){return e===t||Uu(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function RR(e,t){return e===t||Uu(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function Zxt(e,t){return e===t||Uu(e,t)&&e.children.length===t.children.length&&Oy.compareManyFields(e.children,t.children)}function eEt(e,t){return e===t||Uu(e,t)&&e.children.length===t.children.length&&Oy.compareManyFields(e.children,t.children)}function vQ(e,t){return e===t||Uu(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&Oy.compareManyFields(e.children,t.children)}function tEt(e,t){return e===t||Uu(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Oy.visit(e.indices,t.indices)&&Oy.visit(e.dictionary,t.dictionary)}function bQ(e,t){return e===t||Uu(e,t)&&e.unit===t.unit}function kR(e,t){return e===t||Uu(e,t)&&e.unit===t.unit}function nEt(e,t){return e===t||Uu(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Oy.compareManyFields(e.children,t.children)}function rEt(e,t){return e===t||Uu(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Oy.compareManyFields(e.children,t.children)}Cn.prototype.visitNull=o_;Cn.prototype.visitBool=o_;Cn.prototype.visitInt=Ng;Cn.prototype.visitInt8=Ng;Cn.prototype.visitInt16=Ng;Cn.prototype.visitInt32=Ng;Cn.prototype.visitInt64=Ng;Cn.prototype.visitUint8=Ng;Cn.prototype.visitUint16=Ng;Cn.prototype.visitUint32=Ng;Cn.prototype.visitUint64=Ng;Cn.prototype.visitFloat=x6;Cn.prototype.visitFloat16=x6;Cn.prototype.visitFloat32=x6;Cn.prototype.visitFloat64=x6;Cn.prototype.visitUtf8=o_;Cn.prototype.visitLargeUtf8=o_;Cn.prototype.visitBinary=o_;Cn.prototype.visitLargeBinary=o_;Cn.prototype.visitFixedSizeBinary=Jxt;Cn.prototype.visitDate=yQ;Cn.prototype.visitDateDay=yQ;Cn.prototype.visitDateMillisecond=yQ;Cn.prototype.visitTimestamp=IR;Cn.prototype.visitTimestampSecond=IR;Cn.prototype.visitTimestampMillisecond=IR;Cn.prototype.visitTimestampMicrosecond=IR;Cn.prototype.visitTimestampNanosecond=IR;Cn.prototype.visitTime=RR;Cn.prototype.visitTimeSecond=RR;Cn.prototype.visitTimeMillisecond=RR;Cn.prototype.visitTimeMicrosecond=RR;Cn.prototype.visitTimeNanosecond=RR;Cn.prototype.visitDecimal=o_;Cn.prototype.visitList=Zxt;Cn.prototype.visitStruct=eEt;Cn.prototype.visitUnion=vQ;Cn.prototype.visitDenseUnion=vQ;Cn.prototype.visitSparseUnion=vQ;Cn.prototype.visitDictionary=tEt;Cn.prototype.visitInterval=bQ;Cn.prototype.visitIntervalDayTime=bQ;Cn.prototype.visitIntervalYearMonth=bQ;Cn.prototype.visitDuration=kR;Cn.prototype.visitDurationSecond=kR;Cn.prototype.visitDurationMillisecond=kR;Cn.prototype.visitDurationMicrosecond=kR;Cn.prototype.visitDurationNanosecond=kR;Cn.prototype.visitFixedSizeList=nEt;Cn.prototype.visitMap=rEt;const Oy=new Cn;function ZV(e,t){return Oy.compareSchemas(e,t)}function X3(e){const t=e.type,n=new(Qxt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(X3(Object.assign(Object.assign({},l),{type:u})))}}return n}function j9(e,t){return iEt(e,t.map(n=>n.data.concat()))}function iEt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((d,f)=>Math.max(d,f.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=sEt(n,o,c,t,i),o>0&&(r[s++]=Ua({type:new Wa(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(d=>new sc(e,d))]}function sEt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const d=e[a];e[a]=d.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:Ua({type:d.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var jIe;class hl{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new pi([]),this._offsets=[0],this;let i,s;t[0]instanceof pi&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof sc)return[u];if(u instanceof hl)return u.batches;if(u instanceof oi){if(u.type instanceof Wa)return[new sc(new pi(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new Jr([u[h]])),d=i??new pi(l.map((h,p)=>new Ri(String(h),c[p].type,c[p].nullable))),[,f]=j9(d,c);return f.length===0?[new sc(u)]:f}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new pi([]),!(i instanceof pi))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof sc))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!ZV(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??oIe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=sIe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}[Symbol.iterator](){return this.batches.length>0?mQ.visit(new Jr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new hl(n,r.map(i=>new sc(n,i)))}slice(t,n){const r=this.schema;[t,n]=nIe({length:this.numRows},t,n);const i=aIe(this.data,this._offsets,t,n);return new hl(r,i.map(s=>new sc(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=Ua({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new Jr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new Jr([Ua({type:new dg,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=j9(r,a)}return new hl(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new hl(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,d]=a,f=n.findIndex(h=>h.name===u.name);return~f?d[f]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new hl(...j9(s,o))}}jIe=Symbol.toStringTag;hl[jIe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=G3(pQ),e.get=G3(Nl.getVisitFn(ye.Struct)),e.set=uIe(Td.getVisitFn(ye.Struct)),e.indexOf=lIe(Y3.getVisitFn(ye.Struct)),"Table"))(hl.prototype);var BIe;let sc=class sA{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof pi))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Ua({nullCount:0,type:new Wa(this.schema.fields),children:this.schema.fields.map(n=>Ua({type:n.type,nullCount:0}))})]=t,!(this.data instanceof oi))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Che(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Ri.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new pi(r),a=Ua({type:new Wa(r),length:s,children:i,nullCount:0});[this.schema,this.data]=Che(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=zIe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Nl.visit(this.data,t)}set(t,n){return Td.visit(this.data,t,n)}indexOf(t,n){return Y3.visit(this.data,t,n)}[Symbol.iterator](){return mQ.visit(new Jr([this.data]))}toArray(){return[...this]}concat(...t){return new hl(this.schema,[this,...t])}slice(t,n){const[r]=new Jr([this.data]).slice(t,n).data;return new sA(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new Jr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new Jr([Ua({type:new dg,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new pi(s,new Map(this.schema.metadata)),i=Ua({type:new Wa(s),children:o})}return new sA(r,i)}select(t){const n=this.schema.select(t),r=new Wa(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new sA(n,Ua({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=Ua({type:new Wa(n.fields),length:this.numRows,children:r});return new sA(n,i)}};BIe=Symbol.toStringTag;sc[BIe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(sc.prototype);function Che(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:Ua({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),Ua({type:new Wa(i),length:n,children:s})]}function zIe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])zIe(a.children,l==null?void 0:l.children,n);if(Qn.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class oEt extends sc{constructor(t){const n=t.fields.map(i=>Ua({type:i.type})),r=Ua({type:new Wa(t.fields),nullCount:0,children:n});super(t,r)}}let d0=class Ch{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Ch).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+gi),(n||new Ch).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Eo.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):so.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new wo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Eo.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,so.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return Ch.startMessage(t),Ch.addVersion(t,n),Ch.addHeaderType(t,r),Ch.addHeader(t,i),Ch.addBodyLength(t,s),Ch.addCustomMetadata(t,o),Ch.endMessage(t)}};class aEt extends yr{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return vhe.startNull(n),vhe.endNull(n)}visitInt(t,n){return ic.startInt(n),ic.addBitWidth(n,t.bitWidth),ic.addIsSigned(n,t.isSigned),ic.endInt(n)}visitFloat(t,n){return Vh.startFloatingPoint(n),Vh.addPrecision(n,t.precision),Vh.endFloatingPoint(n)}visitBinary(t,n){return hhe.startBinary(n),hhe.endBinary(n)}visitLargeBinary(t,n){return mhe.startLargeBinary(n),mhe.endLargeBinary(n)}visitBool(t,n){return phe.startBool(n),phe.endBool(n)}visitUtf8(t,n){return bhe.startUtf8(n),bhe.endUtf8(n)}visitLargeUtf8(t,n){return ghe.startLargeUtf8(n),ghe.endLargeUtf8(n)}visitDecimal(t,n){return Fw.startDecimal(n),Fw.addScale(n,t.scale),Fw.addPrecision(n,t.precision),Fw.addBitWidth(n,t.bitWidth),Fw.endDecimal(n)}visitDate(t,n){return bD.startDate(n),bD.addUnit(n,t.unit),bD.endDate(n)}visitTime(t,n){return nA.startTime(n),nA.addUnit(n,t.unit),nA.addBitWidth(n,t.bitWidth),nA.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return rA.startTimestamp(n),rA.addUnit(n,t.unit),r!==void 0&&rA.addTimezone(n,r),rA.endTimestamp(n)}visitInterval(t,n){return Hh.startInterval(n),Hh.addUnit(n,t.unit),Hh.endInterval(n)}visitDuration(t,n){return _D.startDuration(n),_D.addUnit(n,t.unit),_D.endDuration(n)}visitList(t,n){return yhe.startList(n),yhe.endList(n)}visitStruct(t,n){return U1.startStruct_(n),U1.endStruct_(n)}visitUnion(t,n){_1.startTypeIdsVector(n,t.typeIds.length);const r=_1.createTypeIdsVector(n,t.typeIds);return _1.startUnion(n),_1.addMode(n,t.mode),_1.addTypeIds(n,r),_1.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Pm.startDictionaryEncoding(n),Pm.addId(n,BigInt(t.id)),Pm.addIsOrdered(n,t.isOrdered),r!==void 0&&Pm.addIndexType(n,r),Pm.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return wD.startFixedSizeBinary(n),wD.addByteWidth(n,t.byteWidth),wD.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return xD.startFixedSizeList(n),xD.addListSize(n,t.listSize),xD.endFixedSizeList(n)}visitMap(t,n){return ED.startMap(n),ED.addKeysSorted(n,t.keysSorted),ED.endMap(n)}}const B9=new aEt;function uEt(e,t=new Map){return new pi(cEt(e,t),TD(e.metadata),t)}function UIe(e){return new Rc(e.count,VIe(e.columns),HIe(e.columns))}function lEt(e){return new wp(UIe(e.data),e.id,e.isDelta)}function cEt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Ri.fromJSON(n,t))}function Ahe(e,t){return(e.children||[]).filter(Boolean).map(n=>Ri.fromJSON(n,t))}function VIe(e){return(e||[]).reduce((t,n)=>[...t,new Dy(n.count,dEt(n.VALIDITY)),...VIe(n.children)],[])}function HIe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new Yh(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new Yh(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new Yh(t.length,i.OFFSET.length)),i.DATA&&t.push(new Yh(t.length,i.DATA.length)),t=HIe(i.children,t)}return t}function dEt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function fEt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=Rhe(e,Ahe(e,t)),i=new Ri(e.name,o,e.nullable,TD(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?Ihe(r):new Ry,a=new Py(t.get(n),r,n,s.isOrdered),i=new Ri(e.name,a,e.nullable,TD(e.metadata))):(r=(r=s.indexType)?Ihe(r):new Ry,t.set(n,o=Rhe(e,Ahe(e,t))),a=new Py(o,r,n,s.isOrdered),i=new Ri(e.name,a,e.nullable,TD(e.metadata))),i||null}function TD(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function Ihe(e){return new Fu(e.isSigned,e.bitWidth)}function Rhe(e,t){const n=e.type.name;switch(n){case"NONE":return new dg;case"null":return new dg;case"binary":return new Y2;case"largebinary":return new B3;case"utf8":return new pE;case"largeutf8":return new z3;case"bool":return new K2;case"list":return new yE((t||[])[0]);case"struct":return new Wa(t||[]);case"struct_":return new Wa(t||[])}switch(n){case"int":{const r=e.type;return new Fu(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new ky(Ro[r.precision])}case"decimal":{const r=e.type;return new U3(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new mE(Ed[r.unit])}case"time":{const r=e.type;return new fg(mn[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new V3(mn[r.unit],r.timezone)}case"interval":{const r=e.type;return new gE(Sd[r.unit])}case"duration":{const r=e.type;return new H3(mn[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new X2(Lu[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new q3(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new vE(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new Q2((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var hEt=VAe,pEt=$3;class qh{static fromJSON(t,n){const r=new qh(0,Eo.V5,n);return r._createHeader=mEt(t,n),r}static decode(t){t=new pEt(Br(t));const n=d0.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new qh(r,i,s);return o._createHeader=gEt(n,s),o}static encode(t){const n=new hEt;let r=-1;return t.isSchema()?r=pi.encode(n,t.header()):t.isRecordBatch()?r=Rc.encode(n,t.header()):t.isDictionaryBatch()&&(r=wp.encode(n,t.header())),d0.startMessage(n),d0.addVersion(n,Eo.V5),d0.addHeader(n,r),d0.addHeaderType(n,t.headerType),d0.addBodyLength(n,BigInt(t.bodyLength)),d0.finishMessageBuffer(n,d0.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof pi)return new qh(0,Eo.V5,so.Schema,t);if(t instanceof Rc)return new qh(n,Eo.V5,so.RecordBatch,t);if(t instanceof wp)return new qh(n,Eo.V5,so.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===so.Schema}isRecordBatch(){return this.headerType===so.RecordBatch}isDictionaryBatch(){return this.headerType===so.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Sa(t)}}class Rc{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Sa(t)}}class wp{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Sa(n)}}class Yh{constructor(t,n){this.offset=Sa(t),this.length=Sa(n)}}class Dy{constructor(t,n){this.length=Sa(t),this.nullCount=Sa(n)}}function mEt(e,t){return()=>{switch(t){case so.Schema:return pi.fromJSON(e);case so.RecordBatch:return Rc.fromJSON(e);case so.DictionaryBatch:return wp.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${so[t]}, type: ${t} }`)}}function gEt(e,t){return()=>{switch(t){case so.Schema:return pi.decode(e.header(new Ph),new Map,e.version());case so.RecordBatch:return Rc.decode(e.header(new wm),e.version());case so.DictionaryBatch:return wp.decode(e.header(new $w),e.version())}throw new Error(`Unrecognized Message type: { name: ${so[t]}, type: ${t} }`)}}Ri.encode=AEt;Ri.decode=TEt;Ri.fromJSON=fEt;pi.encode=CEt;pi.decode=yEt;pi.fromJSON=uEt;Rc.encode=IEt;Rc.decode=vEt;Rc.fromJSON=UIe;wp.encode=REt;wp.decode=bEt;wp.fromJSON=lEt;Dy.encode=kEt;Dy.decode=wEt;Yh.encode=PEt;Yh.decode=_Et;function yEt(e,t=new Map,n=Eo.V5){const r=SEt(e,t);return new pi(r,CD(e),t,n)}function vEt(e,t=Eo.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Rc(e.length(),xEt(e),EEt(e,t))}function bEt(e,t=Eo.V5){return new wp(Rc.decode(e.data(),t),e.id(),e.isDelta())}function _Et(e){return new Yh(e.offset(),e.length())}function wEt(e){return new Dy(e.length(),e.nullCount())}function xEt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=Dy.decode(n));return t}function EEt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Eo.V4&&(r.bb_pos+=8*(i+1)),n[++s]=Yh.decode(r));return n}function SEt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Ri.decode(r,t));return n}function khe(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Ri.decode(r,t));return n}function TEt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=Nhe(e,khe(e,t)),r=new Ri(e.name(),i,e.nullable(),CD(e))):t.has(n=Sa(a.id()))?(s=(s=a.indexType())?Phe(s):new Ry,o=new Py(t.get(n),s,n,a.isOrdered()),r=new Ri(e.name(),o,e.nullable(),CD(e))):(s=(s=a.indexType())?Phe(s):new Ry,t.set(n,i=Nhe(e,khe(e,t))),o=new Py(i,s,n,a.isOrdered()),r=new Ri(e.name(),o,e.nullable(),CD(e))),r||null}function CD(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function Phe(e){return new Fu(e.isSigned(),e.bitWidth())}function Nhe(e,t){const n=e.typeType();switch(n){case ji.NONE:return new dg;case ji.Null:return new dg;case ji.Binary:return new Y2;case ji.LargeBinary:return new B3;case ji.Utf8:return new pE;case ji.LargeUtf8:return new z3;case ji.Bool:return new K2;case ji.List:return new yE((t||[])[0]);case ji.Struct_:return new Wa(t||[])}switch(n){case ji.Int:{const r=e.type(new ic);return new Fu(r.isSigned(),r.bitWidth())}case ji.FloatingPoint:{const r=e.type(new Vh);return new ky(r.precision())}case ji.Decimal:{const r=e.type(new Fw);return new U3(r.scale(),r.precision(),r.bitWidth())}case ji.Date:{const r=e.type(new bD);return new mE(r.unit())}case ji.Time:{const r=e.type(new nA);return new fg(r.unit(),r.bitWidth())}case ji.Timestamp:{const r=e.type(new rA);return new V3(r.unit(),r.timezone())}case ji.Interval:{const r=e.type(new Hh);return new gE(r.unit())}case ji.Duration:{const r=e.type(new _D);return new H3(r.unit())}case ji.Union:{const r=e.type(new _1);return new X2(r.mode(),r.typeIdsArray()||[],t||[])}case ji.FixedSizeBinary:{const r=e.type(new wD);return new q3(r.byteWidth())}case ji.FixedSizeList:{const r=e.type(new xD);return new vE(r.listSize(),(t||[])[0])}case ji.Map:{const r=e.type(new ED);return new Q2((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${ji[n]}" (${n})`)}function CEt(e,t){const n=t.fields.map(s=>Ri.encode(e,s));Ph.startFieldsVector(e,n.length);const r=Ph.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Ph.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return wo.startKeyValue(e),wo.addKey(e,a),wo.addValue(e,u),wo.endKeyValue(e)})):-1;return Ph.startSchema(e),Ph.addFields(e,r),Ph.addEndianness(e,NEt?hE.Little:hE.Big),i!==-1&&Ph.addCustomMetadata(e,i),Ph.endSchema(e)}function AEt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;Qn.isDictionary(s)?(o=s.dictionary.typeId,i=B9.visit(s,e),r=B9.visit(s.dictionary,e)):r=B9.visit(s,e);const a=(s.children||[]).map(c=>Ri.encode(e,c)),u=Zc.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?Zc.createCustomMetadataVector(e,[...t.metadata].map(([c,d])=>{const f=e.createString(`${c}`),h=e.createString(`${d}`);return wo.startKeyValue(e),wo.addKey(e,f),wo.addValue(e,h),wo.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Zc.startField(e),Zc.addType(e,r),Zc.addTypeType(e,o),Zc.addChildren(e,u),Zc.addNullable(e,!!t.nullable),n!==-1&&Zc.addName(e,n),i!==-1&&Zc.addDictionary(e,i),l!==-1&&Zc.addCustomMetadata(e,l),Zc.endField(e)}function IEt(e,t){const n=t.nodes||[],r=t.buffers||[];wm.startNodesVector(e,n.length);for(const o of n.slice().reverse())Dy.encode(e,o);const i=e.endVector();wm.startBuffersVector(e,r.length);for(const o of r.slice().reverse())Yh.encode(e,o);const s=e.endVector();return wm.startRecordBatch(e),wm.addLength(e,BigInt(t.length)),wm.addNodes(e,i),wm.addBuffers(e,s),wm.endRecordBatch(e)}function REt(e,t){const n=Rc.encode(e,t.data);return $w.startDictionaryBatch(e),$w.addId(e,BigInt(t.id)),$w.addIsDelta(e,t.isDelta),$w.addData(e,n),$w.endDictionaryBatch(e)}function kEt(e,t){return WAe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function PEt(e,t){return qAe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const NEt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),eH="ARROW1",_Q=new Uint8Array(eH.length);for(let e=0;e<eH.length;e+=1)_Q[e]=eH.codePointAt(e);_Q.length;class ys extends yr{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof sc?s.data.children:s.data),r=new ys;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof Jr)return this.visitMany(t.data),this;const{type:n}=t;if(!Qn.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(Qn.isUnion(n))this.nodes.push(new Dy(r,0));else{const{nullCount:i}=t;Qn.isNull(n)||Rf.call(this,i<=0?new Uint8Array(0):W3(t.offset,r,t.nullBitmap)),this.nodes.push(new Dy(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Rf(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Yh(this._byteLength,t)),this._byteLength+=t,this}function OEt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Rf.call(this,i),n.mode===Lu.Sparse)return tH.call(this,e);if(n.mode===Lu.Dense){if(e.offset<=0)return Rf.call(this,s),tH.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,d=-1;++d<r;)(l=i[d])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[d]),o[d]=s[d]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);Rf.call(this,o),this.visitMany(e.children.map((l,c)=>{const d=n.typeIds[c],f=a[d],h=u[d];return l.slice(f,Math.min(r,h))}))}}return this}function DEt(e){let t;return e.nullCount>=e.length?Rf.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Rf.call(this,W3(e.offset,e.length,t)):Rf.call(this,iIe(e.values))}function Og(e){return Rf.call(this,e.values.subarray(0,e.length*e.stride))}function E6(e){const{length:t,values:n,valueOffsets:r}=e,i=Sa(r[0]),s=Sa(r[t]),o=Math.min(s-i,n.byteLength-i);return Rf.call(this,zAe(-i,t+1,r)),Rf.call(this,n.subarray(i,i+o)),this}function wQ(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Rf.call(this,zAe(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function tH(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}ys.prototype.visitBool=DEt;ys.prototype.visitInt=Og;ys.prototype.visitFloat=Og;ys.prototype.visitUtf8=E6;ys.prototype.visitLargeUtf8=E6;ys.prototype.visitBinary=E6;ys.prototype.visitLargeBinary=E6;ys.prototype.visitFixedSizeBinary=Og;ys.prototype.visitDate=Og;ys.prototype.visitTimestamp=Og;ys.prototype.visitTime=Og;ys.prototype.visitDecimal=Og;ys.prototype.visitList=wQ;ys.prototype.visitStruct=tH;ys.prototype.visitUnion=OEt;ys.prototype.visitInterval=Og;ys.prototype.visitDuration=Og;ys.prototype.visitFixedSizeList=wQ;ys.prototype.visitMap=wQ;class qIe extends gIe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new F9,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,gv(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return m6(t)?t.then(n=>this.writeAll(n)):g6(t)?TQ(this,t):SQ(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof F9?this._sink=t:(this._sink=new F9,t&&X_t(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&Q_t(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!ZV(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof hl&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof sc&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!ZV(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof sc?t instanceof oEt||this._writeRecordBatch(t):t instanceof hl?this.writeAll(t.batches):DX(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=qh.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===so.RecordBatch?this._recordBatchBlocks.push(new Ny(a,t.bodyLength,this._position)):t.headerType===so.DictionaryBatch&&this._dictionaryBlocks.push(new Ny(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Br(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(qh.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(_Q)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=ys.assemble(t),o=new Rc(t.numRows,r,i),a=qh.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=ys.assemble(new Jr([t])),u=new Rc(t.length,s,o),l=new wp(u,n,r),c=qh.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class xQ extends qIe{static writeAll(t,n){const r=new xQ(n);return m6(t)?t.then(i=>r.writeAll(i)):g6(t)?TQ(r,t):SQ(r,t)}}class EQ extends qIe{static writeAll(t){const n=new EQ;return m6(t)?t.then(r=>n.writeAll(r)):g6(t)?TQ(n,t):SQ(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=JV.encode(new JV(t,Eo.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function SQ(e,t){let n=t;t instanceof hl&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function TQ(e,t){var n,r,i,s,o,a,u;return Am(this,void 0,void 0,function*(){try{for(n=!0,r=AA(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function MEt(e,t="stream"){return(t==="stream"?xQ:EQ).writeAll(e).toUint8Array(!0)}function CQ(e,t=1){return(e*t+63&-64||64)/t}function My(e,t,n=e.BYTES_PER_ELEMENT){return new e(CQ(t,n))}function AQ(e){return e instanceof oi?e:new oi(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function $Et(e){return new Jr([AQ(e)])}const IQ=new TextEncoder;function LEt(e,t,n){const r=IQ.encode(n);return e.set(r,t),r.length}function FEt(e,t,n){return IQ.encodeInto(n,e.subarray(t)).written}const jEt=IQ.encodeInto?FEt:LEt;function Ohe(e,t){const n=My(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function BEt(e,t){const n=My(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function zEt(e,t){const n=My(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function UEt(e,t){const n=My(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function VEt(e){const t=X3({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function HEt(e,t,n){const r=My(Int32Array,t+1),i=My(Uint8Array,3*n);let s=0;return{set(o,a){s+=jEt(i,s,o),r[a+1]=s},data:()=>{const o=CQ(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function qEt(e,t){const n=[],r=My(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:WEt(e.dictionary,n,o)})}}function WEt(e,t,n){const r=HEt(e,t.length,n);return t.forEach(r.set),$Et(r.data())}function GEt(e,t){const n=My(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function YEt(e,t,n=!0){let r;switch(e.typeId){case ye.Int:r=e.bitWidth<64?Ohe:null;break;case ye.Float:r=e.precision>0?Ohe:null;break;case ye.Dictionary:r=e.dictionary.typeId===ye.Utf8&&e.indices.typeId===ye.Int&&e.indices.bitWidth<64?qEt:null;break;case ye.Bool:r=BEt;break;case ye.Date:r=e.unit?UEt:zEt;break}return r==null?VEt(e):n?GEt(r(e,t),t):r(e,t)}function KEt(e,t){const n=e.length,r=CQ(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),AQ({type:t,length:n,buffers:[null,i]})}function WIe(e,t,n,r,i=!0){const s=YEt(r,e,i);return t(n,s.set),AQ(s.data())}function RQ(e){if(e instanceof Qn||e==null)return e;switch(e){case ye.Binary:return new Y2;case ye.Bool:return new K2;case ye.DateDay:return new fwt;case ye.DateMillisecond:case ye.Date:return new hwt;case ye.Dictionary:return new Py(new pE,new Ry);case ye.Float16:return new g2e;case ye.Float32:return new HX;case ye.Float64:case ye.Float:return new qX;case ye.Int8:return new LX;case ye.Int16:return new FX;case ye.Int32:case ye.Int:return new Ry;case ye.Int64:return new jX;case ye.IntervalDayTime:return new vwt;case ye.Interval:case ye.IntervalYearMonth:return new bwt;case ye.Null:return new dg;case ye.TimeMicrosecond:return new gwt;case ye.TimeMillisecond:case ye.Time:return new mwt;case ye.TimeNanosecond:return new ywt;case ye.TimeSecond:return new pwt;case ye.Uint8:return new BX;case ye.Uint16:return new zX;case ye.Uint32:return new UX;case ye.Uint64:return new VX;case ye.Utf8:return new pE;default:sr(`Unsupported type code: ${bp(e)}. Use a data type constructor instead?`)}}function XEt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function GIe(e,t){const n=nH();return e(t,n.add),n}function nH(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(cg(t))++e.dates,XEt(t)&&++e.utcdays;else if(z1(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=nH());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=nH())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return RQ(QEt(e))}};return e}function QEt(e){const t=e.count-e.nulls;if(t===0)return ye.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?ye.Float64:n<128?ye.Int8:n<32768?ye.Int16:ye.Int32:n>=2**32?ye.Float64:n<256?ye.Uint8:n<65536?ye.Uint16:ye.Uint32}else{if(e.nums===t)return ye.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?ye.Int64:sr(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?ye.Uint64:sr(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return ye.Bool;if(e.utcdays===t)return ye.DateDay;if(e.dates===t)return ye.DateMillisecond;if(e.arrays===t){const n=Ri.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new vE(e.minlen,n):new yE(n)}else if(e.structs===t){const n=e.struct_prof;return new Wa(Object.keys(n).map(r=>Ri.new(r,n[r].type(),!0)))}else{if(e.strings>0)return ye.Dictionary;sr("Type inference failure")}}}}function JEt(e,t,n,r,i,s=!0){if(i=RQ(i),!i){const o=GIe(r,t);s=o.nulls>0,i=o.type()}return WIe(n,r,t,i,s)}function ZEt(e,t,n,r,i,s=!0){i=RQ(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=eSt(o);if(u&&a&&Dhe(u.type,i))return u;const l=o.data;if(SR(l)){const c=tSt(l);if(a&&c&&Dhe(c,i))return KEt(l,c);i=i||c,s=!1}if(!i){const c=GIe(r,o);s=c.nulls>0,i=c.type()}return WIe(n,r,o,i,s)}function eSt(e){return e instanceof Jr?e:e.vector instanceof Jr?e.vector:null}function tSt(e){const n={Float32Array:HX,Float64Array:qX,Int8Array:LX,Int16Array:FX,Int32Array:Ry,Uint8Array:BX,Uint16Array:zX,Uint32Array:UX,BigInt64Array:jX,BigUint64Array:VX}[e.constructor.name];return n?new n:null}function Dhe(e,t){return!e||!t?!0:e.compareTo(t)}function nSt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function rSt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&z1(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const iSt=()=>sr("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function sSt(){try{return hl}catch{iSt()}}function YIe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=oSt(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&sr("Column length mismatch"),a[l]=c});const u=sSt();return new u(a)}function oSt(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=es(n)?n(e):Qr(n)?n:null;if(Qr(e))return{dataFrom:JEt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:nSt(e,r,i)};if(aSt(e))return{dataFrom:ZEt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:rSt(e,r,i)};sr("Unsupported input data type")}function aSt(e){return e&&es(e.reify)}function uSt(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return MEt(YIe(e,r),n)}function lSt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function cSt(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&cg(u))++i,lSt(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",d=c.indexOf(".");if(d>=0){const f=c.indexOf("e"),h=f>0?f:c.length;a=Math.max(a,h-d-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function S6(e,t){return es(t)?t(e):t||e.columnNames()}function KIe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=cSt(dSt(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function dSt(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function kQ(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function fSt(e,t={}){const n=S6(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":cg(l)?f6(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return kQ(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,d){a[d]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function XIe(e,t={}){if(es(t))return t(e)+"";const n=typeof e;if(n==="object"){if(cg(e))return t.utc?f6(e):_Ae(e);{const r=JSON.stringify(e,(s,o)=>SR(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function T6(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function hSt(e,t={}){const n=S6(e,t.columns),{align:r,format:i}=KIe(e,n,t),s=pSt(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,y)=>u(XIe(m,y)),c=o?(m,y)=>m==null?o(m):l(m,y):l;let d=-1,f=-1;const h=(m,y,v)=>{const w=v?a(r[y]):"",x=s[m]&&s[m](y,f,d)||"",S=(w?`text-align: ${w};`+(x?" ":""):"")+x;return`<${m}${S?` style="${S}"`:""}>`};let p=h("table")+h("thead")+h("tr",d)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return kQ(e,n,t.limit,t.offset,{row(m){d=m,p+=(++f?"</tr>":"")+h("tr")},cell(m,y){p+=h("td",y,1)+c(m,i[y])+"</td>"}}),p+"</tr></tbody></table>"}function pSt(e){return T6(e.style,t=>es(t)?t:()=>t)}function mSt(e,t=!0,n=!1){return e===void 0||e?t:n}const gSt=e=>cg(e)?f6(e,!0):e;function ySt(e,t={}){const n=mSt(t.schema),r=t.format||{},i=S6(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||gSt;let c=-1;e.scan(d=>{const f=u.get(d);s+=(++c?",":"")+JSON.stringify(l(f))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function vSt(e,t={}){const n=S6(e,t.columns),{align:r,format:i}=KIe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return kQ(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(XIe(u,i[l]))+"|"}}),a+`
`}function QIe(e,t){for(const[n,r]of h6(t))e.set(n,r);return e}function bSt(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function hg(e,t,n=new Map){return t=$u(t)?e.columnName(t):t,Aa(t)?n.set(t,t):Qr(t)?t.forEach(r=>hg(e,r,n)):es(t)?hg(e,t(e),n):tu(t)?QIe(n,t):sr(`Invalid column selection: ${bp(t)}`),n}function C6(e,t){return e.toObject=t,e}function JIe(e){return Qr(e)?e.map(JIe):e&&e.toObject?e.toObject():e}function bE(){return C6(e=>e.columnNames(),()=>({all:[]}))}function ZIe(...e){return e=e.flat(),C6(t=>{const n=hg(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:JIe(e)}))}function _St(e,t){return C6(n=>{let r=$u(e)?e:n.columnIndex(e),i=$u(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function wSt(e){return Aa(e)&&(e=RegExp(bSt(e))),C6(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function xSt(e){return SR(e.data)?e.data.constructor:Array}class M0 extends Ubt{static from(t,n){return new M0(qbt(t,n),n)}static new(t,n){if(t instanceof M0)return t;const r={},i=[];for(const[s,o]of h6(t))r[s]=o,i.push(s);return new M0(r,n||i)}constructor(t,n,r,i,s,o){T6(t,Hbt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new M0(t||this._data,n||(t?null:this._names),o,i!==void 0?i:A_t(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=Lc(r).groupby(r.groups());return t.forEach(s=>{s=M0.new(s),s.numRows()!==n&&sr("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):sr(`Unrecognized column: ${t}`)}object(t=0){return Mhe(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=hg(this,t.columns||bE()),o=FAe(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),R_t(this,u,a,n)}return a}*[Symbol.iterator](){const t=Mhe(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),d=i[l]=new(xSt(c))(n);let f=-1;o(h=>d[++f]=c.get(h))}this.isGrouped()&&(s=I_t(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return YIe(this,t)}toArrowBuffer(t){return uSt(this,t)}toCSV(t){return fSt(this,t)}toHTML(t){return hSt(this,t)}toJSON(t){return ySt(this,t)}toMarkdown(t){return vSt(this,t)}}function Mhe(e){let t=e._builder;if(!t){const n=FAe(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class ESt{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function zr(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=SSt[e.type];s&&s(e,t,n)}const iO=(e,t,n)=>{zr(e.argument,t,n,e)},z9=(e,t,n)=>{zr(e.left,t,n,e),zr(e.right,t,n,e)},$he=(e,t,n)=>{zr(e.test,t,n,e),zr(e.consequent,t,n,e),e.alternate&&zr(e.alternate,t,n,e)},U9=(e,t,n)=>{Nh(e.params,t,n,e),zr(e.body,t,n,e)},Lhe=(e,t,n)=>{zr(e.callee,t,n,e),Nh(e.arguments,t,n,e)},Nh=(e,t,n,r)=>{e.forEach(i=>zr(i,t,n,r))},SSt={TemplateLiteral:(e,t,n)=>{Nh(e.expressions,t,n,e),Nh(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{zr(e.object,t,n,e),zr(e.property,t,n,e)},CallExpression:Lhe,NewExpression:Lhe,ArrayExpression:(e,t,n)=>{Nh(e.elements,t,n,e)},AssignmentExpression:z9,AwaitExpression:iO,BinaryExpression:z9,LogicalExpression:z9,UnaryExpression:iO,UpdateExpression:iO,ConditionalExpression:$he,ObjectExpression:(e,t,n)=>{Nh(e.properties,t,n,e)},Property:(e,t,n)=>{zr(e.key,t,n,e),zr(e.value,t,n,e)},ArrowFunctionExpression:U9,FunctionExpression:U9,FunctionDeclaration:U9,VariableDeclaration:(e,t,n)=>{Nh(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{zr(e.id,t,n,e),zr(e.init,t,n,e)},SpreadElement:(e,t,n)=>{zr(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Nh(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{zr(e.expression,t,n,e)},IfStatement:$he,ForStatement:(e,t,n)=>{zr(e.init,t,n,e),zr(e.test,t,n,e),zr(e.update,t,n,e),zr(e.body,t,n,e)},WhileStatement:(e,t,n)=>{zr(e.test,t,n,e),zr(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{zr(e.body,t,n,e),zr(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{zr(e.discriminant,t,n,e),Nh(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&zr(e.test,t,n,e),Nh(e.consequent,t,n,e)},ReturnStatement:iO,Program:(e,t,n)=>{zr(e.body[0],t,n,e)}};function eRe(e){delete e.start,delete e.end,delete e.optional}function Fhe(e){eRe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function TSt(e){return zr(e,null,{Column:Fhe,Constant:Fhe,Default:eRe}),e}function So(e,t){return t&&t.type===e}function CSt(e){return So(N_t,e)||So(P_t,e)}function ASt(e){return es(e)?e:()=>e}const ISt="Escaped functions are not valid as rollup or pivot values.";function RSt(e,t,n){e.aggronly&&sr(ISt);const r="(row,data)=>fn("+LAe(e.table.columnNames())+",$)";return{escape:OX.escape(r,ASt(t.expr),n)}}var kSt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],tRe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],PSt="-----------------------------------------------------------------------------------------------------------------------------------------------------",nRe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",V9={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},H9="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",NSt={5:H9,"5module":H9+" export import",6:H9+" const class extends export import super"},OSt=/^in(stanceof)?$/,DSt=new RegExp("["+nRe+"]"),MSt=new RegExp("["+nRe+PSt+"]");function rH(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function pg(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&DSt.test(String.fromCharCode(e)):t===!1?!1:rH(e,tRe)}function _E(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&MSt.test(String.fromCharCode(e)):t===!1?!1:rH(e,tRe)||rH(e,kSt)}var qr=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function Kc(e,t){return new qr(e,{beforeExpr:!0,binop:t})}var Xc={beforeExpr:!0},sl={startsExpr:!0},PQ={};function kr(e,t){return t===void 0&&(t={}),t.keyword=e,PQ[e]=new qr(e,t)}var ie={num:new qr("num",sl),regexp:new qr("regexp",sl),string:new qr("string",sl),name:new qr("name",sl),privateId:new qr("privateId",sl),eof:new qr("eof"),bracketL:new qr("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new qr("]"),braceL:new qr("{",{beforeExpr:!0,startsExpr:!0}),braceR:new qr("}"),parenL:new qr("(",{beforeExpr:!0,startsExpr:!0}),parenR:new qr(")"),comma:new qr(",",Xc),semi:new qr(";",Xc),colon:new qr(":",Xc),dot:new qr("."),question:new qr("?",Xc),questionDot:new qr("?."),arrow:new qr("=>",Xc),template:new qr("template"),invalidTemplate:new qr("invalidTemplate"),ellipsis:new qr("...",Xc),backQuote:new qr("`",sl),dollarBraceL:new qr("${",{beforeExpr:!0,startsExpr:!0}),eq:new qr("=",{beforeExpr:!0,isAssign:!0}),assign:new qr("_=",{beforeExpr:!0,isAssign:!0}),incDec:new qr("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new qr("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Kc("||",1),logicalAND:Kc("&&",2),bitwiseOR:Kc("|",3),bitwiseXOR:Kc("^",4),bitwiseAND:Kc("&",5),equality:Kc("==/!=/===/!==",6),relational:Kc("</>/<=/>=",7),bitShift:Kc("<</>>/>>>",8),plusMin:new qr("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Kc("%",10),star:Kc("*",10),slash:Kc("/",10),starstar:new qr("**",{beforeExpr:!0}),coalesce:Kc("??",1),_break:kr("break"),_case:kr("case",Xc),_catch:kr("catch"),_continue:kr("continue"),_debugger:kr("debugger"),_default:kr("default",Xc),_do:kr("do",{isLoop:!0,beforeExpr:!0}),_else:kr("else",Xc),_finally:kr("finally"),_for:kr("for",{isLoop:!0}),_function:kr("function",sl),_if:kr("if"),_return:kr("return",Xc),_switch:kr("switch"),_throw:kr("throw",Xc),_try:kr("try"),_var:kr("var"),_const:kr("const"),_while:kr("while",{isLoop:!0}),_with:kr("with"),_new:kr("new",{beforeExpr:!0,startsExpr:!0}),_this:kr("this",sl),_super:kr("super",sl),_class:kr("class",sl),_extends:kr("extends",Xc),_export:kr("export"),_import:kr("import",sl),_null:kr("null",sl),_true:kr("true",sl),_false:kr("false",sl),_in:kr("in",{beforeExpr:!0,binop:7}),_instanceof:kr("instanceof",{beforeExpr:!0,binop:7}),_typeof:kr("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:kr("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:kr("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Ld=/\r\n?|\n|\u2028|\u2029/,$St=new RegExp(Ld.source,"g");function RS(e){return e===10||e===13||e===8232||e===8233}function rRe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(RS(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var iRe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,sd=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,sRe=Object.prototype,LSt=sRe.hasOwnProperty,FSt=sRe.toString,PR=Object.hasOwn||function(e,t){return LSt.call(e,t)},jhe=Array.isArray||function(e){return FSt.call(e)==="[object Array]"},Bhe=Object.create(null);function H0(e){return Bhe[e]||(Bhe[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function $y(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var jSt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,J2=function(t,n){this.line=t,this.column=n};J2.prototype.offset=function(t){return new J2(this.line,this.column+t)};var A6=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function oRe(e,t){for(var n=1,r=0;;){var i=rRe(e,r,t);if(i<0)return new J2(n,t-r);++n,r=i}}var iH={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},zhe=!1;function BSt(e){var t={};for(var n in iH)t[n]=e&&PR(e,n)?e[n]:iH[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!zhe&&typeof console=="object"&&console.warn&&(zhe=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),jhe(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return jhe(t.onComment)&&(t.onComment=zSt(t,t.onComment)),t}function zSt(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new A6(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var Z2=1,kS=2,NQ=4,aRe=8,uRe=16,lRe=32,OQ=64,cRe=128,NR=256,DQ=Z2|kS|NR;function MQ(e,t){return kS|(e?NQ:0)|(t?aRe:0)}var Q3=0,$Q=1,Dg=2,dRe=3,fRe=4,hRe=5,Oo=function(t,n,r){this.options=t=BSt(t),this.sourceFile=t.sourceFile,this.keywords=H0(NSt[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=V9[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=H0(i);var s=(i?i+" ":"")+V9.strict;this.reservedWordsStrict=H0(s),this.reservedWordsStrictBind=H0(s+" "+V9.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Ld).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=ie.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Z2),this.regexpState=null,this.privateNameStack=[]},zp={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Oo.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};zp.inFunction.get=function(){return(this.currentVarScope().flags&kS)>0};zp.inGenerator.get=function(){return(this.currentVarScope().flags&aRe)>0&&!this.currentVarScope().inClassFieldInit};zp.inAsync.get=function(){return(this.currentVarScope().flags&NQ)>0&&!this.currentVarScope().inClassFieldInit};zp.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&NR)return!1;if(t.flags&kS)return(t.flags&NQ)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};zp.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&OQ)>0||n||this.options.allowSuperOutsideMethod};zp.allowDirectSuper.get=function(){return(this.currentThisScope().flags&cRe)>0};zp.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};zp.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(kS|NR))>0||n};zp.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&NR)>0};Oo.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Oo.parse=function(t,n){return new this(n,t).parse()};Oo.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Oo.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Oo.prototype,zp);var Vu=Oo.prototype,USt=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;Vu.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){sd.lastIndex=e,e+=sd.exec(this.input)[0].length;var t=USt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){sd.lastIndex=e+t[0].length;var n=sd.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||Ld.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,sd.lastIndex=e,e+=sd.exec(this.input)[0].length,this.input[e]===";"&&e++}};Vu.eat=function(e){return this.type===e?(this.next(),!0):!1};Vu.isContextual=function(e){return this.type===ie.name&&this.value===e&&!this.containsEsc};Vu.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};Vu.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};Vu.canInsertSemicolon=function(){return this.type===ie.eof||this.type===ie.braceR||Ld.test(this.input.slice(this.lastTokEnd,this.start))};Vu.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Vu.semicolon=function(){!this.eat(ie.semi)&&!this.insertSemicolon()&&this.unexpected()};Vu.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};Vu.expect=function(e){this.eat(e)||this.unexpected()};Vu.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var I6=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Vu.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};Vu.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};Vu.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Vu.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var on=Oo.prototype;on.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==ie.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var LQ={kind:"loop"},VSt={kind:"switch"};on.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;sd.lastIndex=this.pos;var t=sd.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(pg(r,!0)){for(var i=n+1;_E(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!OSt.test(s))return!0}return!1};on.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;sd.lastIndex=this.pos;var e=sd.exec(this.input),t=this.pos+e[0].length,n;return!Ld.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(_E(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};on.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=ie._var,s="let"),r){case ie._break:case ie._continue:return this.parseBreakContinueStatement(i,r.keyword);case ie._debugger:return this.parseDebuggerStatement(i);case ie._do:return this.parseDoStatement(i);case ie._for:return this.parseForStatement(i);case ie._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case ie._class:return e&&this.unexpected(),this.parseClass(i,!0);case ie._if:return this.parseIfStatement(i);case ie._return:return this.parseReturnStatement(i);case ie._switch:return this.parseSwitchStatement(i);case ie._throw:return this.parseThrowStatement(i);case ie._try:return this.parseTryStatement(i);case ie._const:case ie._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case ie._while:return this.parseWhileStatement(i);case ie._with:return this.parseWithStatement(i);case ie.braceL:return this.parseBlock(!0,i);case ie.semi:return this.parseEmptyStatement(i);case ie._export:case ie._import:if(this.options.ecmaVersion>10&&r===ie._import){sd.lastIndex=this.pos;var o=sd.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===ie._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===ie.name&&c.type==="Identifier"&&this.eat(ie.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};on.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(ie.semi)||this.insertSemicolon()?e.label=null:this.type!==ie.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};on.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};on.parseDoStatement=function(e){return this.next(),this.labels.push(LQ),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(ie._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(ie.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};on.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(LQ),this.enterScope(0),this.expect(ie.parenL),this.type===ie.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===ie._var||this.type===ie._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===ie._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===ie._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=this.containsEsc,u=new I6,l=this.start,c=t>-1?this.parseExprSubscripts(u,"await"):this.parseExpression(!0,u);return this.type===ie._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(t>-1?(this.type===ie._in&&this.unexpected(t),e.await=!0):o&&this.options.ecmaVersion>=8&&(c.start===l&&!a&&c.type==="Identifier"&&c.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(e.await=!1)),s&&o&&this.raise(c.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(c,!1,u),this.checkLValPattern(c),this.parseForIn(e,c)):(this.checkExpressionErrors(u,!0),t>-1&&this.unexpected(t),this.parseFor(e,c))};on.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,WA|(n?0:sH),!1,t)};on.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(ie._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};on.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(ie.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};on.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(ie.braceL),this.labels.push(VSt),this.enterScope(0);for(var t,n=!1;this.type!==ie.braceR;)if(this.type===ie._case||this.type===ie._default){var r=this.type===ie._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(ie.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};on.parseThrowStatement=function(e){return this.next(),Ld.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var HSt=[];on.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?lRe:0),this.checkLValPattern(e,t?fRe:Dg),this.expect(ie.parenR),e};on.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===ie._catch){var t=this.startNode();this.next(),this.eat(ie.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(ie._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};on.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};on.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(LQ),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};on.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};on.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};on.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===ie._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};on.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};on.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(ie.braceL),e&&this.enterScope(0);this.type!==ie.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};on.parseFor=function(e,t){return e.init=t,this.expect(ie.semi),e.test=this.type===ie.semi?null:this.parseExpression(),this.expect(ie.semi),e.update=this.type===ie.parenR?null:this.parseExpression(),this.expect(ie.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};on.parseForIn=function(e,t){var n=this.type===ie._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(ie.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};on.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(ie.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===ie._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===ie._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(ie.comma))break}return e};on.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?$Q:Dg,!1)};var WA=1,sH=2,pRe=4;on.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===ie.star&&t&sH&&this.unexpected(),e.generator=this.eat(ie.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&WA&&(e.id=t&pRe&&this.type!==ie.name?null:this.parseIdent(),e.id&&!(t&sH)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?$Q:Dg:dRe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(MQ(e.async,e.generator)),t&WA||(e.id=this.type===ie.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&WA?"FunctionDeclaration":"FunctionExpression")};on.parseFunctionParams=function(e){this.expect(ie.parenL),e.params=this.parseBindingList(ie.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};on.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(ie.braceL);this.type!==ie.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&qSt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};on.parseClassElement=function(e){if(this.eat(ie.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(ie.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===ie.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===ie.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(ie.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===ie.parenL||o!=="method"||i||s){var l=!n.static&&J3(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};on.isClassElementNameStart=function(){return this.type===ie.name||this.type===ie.privateId||this.type===ie.num||this.type===ie.string||this.type===ie.bracketL||this.type.keyword};on.parseClassElementName=function(e){this.type===ie.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};on.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&J3(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};on.parseClassField=function(e){if(J3(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&J3(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(ie.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};on.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(NR|OQ);this.type!==ie.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};on.parseClassId=function(e,t){this.type===ie.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,Dg,!1)):(t===!0&&this.unexpected(),e.id=null)};on.parseClassSuper=function(e){e.superClass=this.eat(ie._extends)?this.parseExprSubscripts(null,!1):null};on.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};on.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];PR(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function qSt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function J3(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}on.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==ie.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};on.parseExport=function(e,t){if(this.next(),this.eat(ie.star))return this.parseExportAllDeclaration(e,t);if(this.eat(ie._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==ie.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};on.parseExportDeclaration=function(e){return this.parseStatement(null)};on.parseExportDefaultDeclaration=function(){var e;if(this.type===ie._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,WA|pRe,!1,e)}else if(this.type===ie._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};on.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),PR(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};on.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};on.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};on.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};on.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};on.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(ie.braceL);!this.eat(ie.braceR);){if(n)n=!1;else if(this.expect(ie.comma),this.afterTrailingComma(ie.braceR))break;t.push(this.parseExportSpecifier(e))}return t};on.parseImport=function(e){return this.next(),this.type===ie.string?(e.specifiers=HSt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===ie.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};on.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,Dg),this.finishNode(e,"ImportSpecifier")};on.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,Dg),this.finishNode(e,"ImportDefaultSpecifier")};on.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,Dg),this.finishNode(e,"ImportNamespaceSpecifier")};on.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===ie.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(ie.comma)))return e;if(this.type===ie.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(ie.braceL);!this.eat(ie.braceR);){if(t)t=!1;else if(this.expect(ie.comma),this.afterTrailingComma(ie.braceR))break;e.push(this.parseImportSpecifier())}return e};on.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===ie.string){var e=this.parseLiteral(this.value);return jSt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};on.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};on.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Fd=Oo.prototype;Fd.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Fd.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};Fd.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Fd.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==ie.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Fd.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case ie.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(ie.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case ie.braceL:return this.parseObj(!0)}return this.parseIdent()};Fd.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(ie.comma),t&&this.type===ie.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===ie.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===ie.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};Fd.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};Fd.parseBindingListItem=function(e){return e};Fd.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(ie.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};Fd.checkLValSimple=function(e,t,n){t===void 0&&(t=Q3);var r=t!==Q3;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===Dg&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(PR(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==hRe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};Fd.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=Q3),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};Fd.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=Q3),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var tf=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},as={b_stat:new tf("{",!1),b_expr:new tf("{",!0),b_tmpl:new tf("${",!1),p_stat:new tf("(",!1),p_expr:new tf("(",!0),q_tmpl:new tf("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new tf("function",!1),f_expr:new tf("function",!0),f_expr_gen:new tf("function",!0,!1,null,!0),f_gen:new tf("function",!1,!1,null,!0)},PS=Oo.prototype;PS.initialContext=function(){return[as.b_stat]};PS.curContext=function(){return this.context[this.context.length-1]};PS.braceIsBlock=function(e){var t=this.curContext();return t===as.f_expr||t===as.f_stat?!0:e===ie.colon&&(t===as.b_stat||t===as.b_expr)?!t.isExpr:e===ie._return||e===ie.name&&this.exprAllowed?Ld.test(this.input.slice(this.lastTokEnd,this.start)):e===ie._else||e===ie.semi||e===ie.eof||e===ie.parenR||e===ie.arrow?!0:e===ie.braceL?t===as.b_stat:e===ie._var||e===ie._const||e===ie.name?!1:!this.exprAllowed};PS.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};PS.updateContext=function(e){var t,n=this.type;n.keyword&&e===ie.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};PS.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};ie.parenR.updateContext=ie.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===as.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};ie.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?as.b_stat:as.b_expr),this.exprAllowed=!0};ie.dollarBraceL.updateContext=function(){this.context.push(as.b_tmpl),this.exprAllowed=!0};ie.parenL.updateContext=function(e){var t=e===ie._if||e===ie._for||e===ie._with||e===ie._while;this.context.push(t?as.p_stat:as.p_expr),this.exprAllowed=!0};ie.incDec.updateContext=function(){};ie._function.updateContext=ie._class.updateContext=function(e){e.beforeExpr&&e!==ie._else&&!(e===ie.semi&&this.curContext()!==as.p_stat)&&!(e===ie._return&&Ld.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===ie.colon||e===ie.braceL)&&this.curContext()===as.b_stat)?this.context.push(as.f_expr):this.context.push(as.f_stat),this.exprAllowed=!1};ie.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};ie.backQuote.updateContext=function(){this.curContext()===as.q_tmpl?this.context.pop():this.context.push(as.q_tmpl),this.exprAllowed=!1};ie.star.updateContext=function(e){if(e===ie._function){var t=this.context.length-1;this.context[t]===as.f_expr?this.context[t]=as.f_expr_gen:this.context[t]=as.f_gen}this.exprAllowed=!0};ie.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==ie.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Hn=Oo.prototype;Hn.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};Hn.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===ie.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(ie.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};Hn.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new I6,r=!0);var a=this.start,u=this.startLoc;(this.type===ie.parenL||this.type===ie.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===ie.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===ie.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};Hn.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(ie.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(ie.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};Hn.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};Hn.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==ie._in)&&s>r){var o=this.type===ie.logicalOR||this.type===ie.logicalAND,a=this.type===ie.coalesce;a&&(s=ie.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,d=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),f=this.buildBinary(t,n,e,d,u,o||a);return(o&&this.type===ie.coalesce||a&&(this.type===ie.logicalOR||this.type===ie.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(f,t,n,r,i)}return e};Hn.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};Hn.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===ie.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&mRe(a.argument)?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&oH(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===ie.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==ie._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(ie.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function mRe(e){return e.type==="Identifier"||e.type==="ParenthesizedExpression"&&mRe(e.expression)}function oH(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&oH(e.expression)||e.type==="ParenthesizedExpression"&&oH(e.expression)}Hn.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};Hn.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};Hn.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(ie.arrow)};Hn.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};Hn.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(ie.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(ie.bracketL);if(l||u&&this.type!==ie.parenL&&this.type!==ie.backQuote||this.eat(ie.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(ie.bracketR)):this.type===ie.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(ie.parenL)){var d=new I6,f=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(ie.parenR,this.options.ecmaVersion>=8,!1,d);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=f,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(d,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var y=this.startNodeAt(t,n);y.callee=e,y.arguments=m,a&&(y.optional=u),e=this.finishNode(y,"CallExpression")}else if(this.type===ie.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var v=this.startNodeAt(t,n);v.tag=e,v.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(v,"TaggedTemplateExpression")}return e};Hn.parseExprAtom=function(e,t,n){this.type===ie.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case ie._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===ie.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==ie.dot&&this.type!==ie.bracketL&&this.type!==ie.parenL&&this.unexpected(),this.finishNode(r,"Super");case ie._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case ie.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(ie._function))return this.overrideContext(as.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(ie.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===ie.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(ie.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case ie.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case ie.num:case ie.string:return this.parseLiteral(this.value);case ie._null:case ie._true:case ie._false:return r=this.startNode(),r.value=this.type===ie._null?null:this.type===ie._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case ie.parenL:var c=this.start,d=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(d)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),d;case ie.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(ie.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case ie.braceL:return this.overrideContext(as.b_expr),this.parseObj(!1,e);case ie._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case ie._class:return this.parseClass(this.startNode(),!1);case ie._new:return this.parseNew();case ie.backQuote:return this.parseTemplate();case ie._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};Hn.parseExprAtomDefault=function(){this.unexpected()};Hn.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===ie.parenL&&!e)return this.parseDynamicImport(t);if(this.type===ie.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};Hn.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(ie.parenR)){var t=this.start;this.eat(ie.comma)&&this.eat(ie.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};Hn.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};Hn.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};Hn.parseParenExpression=function(){this.expect(ie.parenL);var e=this.parseExpression();return this.expect(ie.parenR),e};Hn.shouldParseArrow=function(e){return!this.canInsertSemicolon()};Hn.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,d=new I6,f=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==ie.parenR;)if(l?l=!1:this.expect(ie.comma),s&&this.afterTrailingComma(ie.parenR,!0)){c=!0;break}else if(this.type===ie.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===ie.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,d,this.parseParenItem));var m=this.lastTokEnd,y=this.lastTokEndLoc;if(this.expect(ie.parenR),e&&this.shouldParseArrow(u)&&this.eat(ie.arrow))return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=f,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(d,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,y)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var v=this.startNodeAt(n,r);return v.expression=i,this.finishNode(v,"ParenthesizedExpression")}else return i};Hn.parseParenItem=function(e){return e};Hn.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var WSt=[];Hn.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===ie.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(ie.parenL)?e.arguments=this.parseExprList(ie.parenR,this.options.ecmaVersion>=8,!1):e.arguments=WSt,this.finishNode(e,"NewExpression")};Hn.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===ie.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===ie.backQuote,this.finishNode(n,"TemplateElement")};Hn.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===ie.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(ie.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(ie.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};Hn.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===ie.name||this.type===ie.num||this.type===ie.string||this.type===ie.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===ie.star)&&!Ld.test(this.input.slice(this.lastTokEnd,this.start))};Hn.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(ie.braceR);){if(r)r=!1;else if(this.expect(ie.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(ie.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};Hn.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(ie.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===ie.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===ie.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(ie.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(ie.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};Hn.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};Hn.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===ie.colon&&this.unexpected(),this.eat(ie.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===ie.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==ie.comma&&this.type!==ie.braceR&&this.type!==ie.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===ie.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};Hn.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(ie.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(ie.bracketR),e.key;e.computed=!1}return e.key=this.type===ie.num||this.type===ie.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Hn.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};Hn.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(MQ(t,r.generator)|OQ|(n?cRe:0)),this.expect(ie.parenL),r.params=this.parseBindingList(ie.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};Hn.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(MQ(n,!1)|uRe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};Hn.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==ie.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,hRe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};Hn.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};Hn.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,$Q,t?null:n)}};Hn.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(ie.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===ie.comma?o=null:this.type===ie.ellipsis?(o=this.parseSpread(r),r&&this.type===ie.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};Hn.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};Hn.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};Hn.parseIdentNode=function(){var e=this.startNode();return this.type===ie.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=ie.name):this.unexpected(),e};Hn.parsePrivateIdent=function(){var e=this.startNode();return this.type===ie.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};Hn.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===ie.semi||this.canInsertSemicolon()||this.type!==ie.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(ie.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};Hn.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var Z3=Oo.prototype;Z3.raise=function(e,t){var n=oRe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};Z3.raiseRecoverable=Z3.raise;Z3.curPosition=function(){if(this.options.locations)return new J2(this.curLine,this.pos-this.lineStart)};var vv=Oo.prototype,GSt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};vv.enterScope=function(e){this.scopeStack.push(new GSt(e))};vv.exitScope=function(){this.scopeStack.pop()};vv.treatFunctionsAsVarInScope=function(e){return e.flags&kS||!this.inModule&&e.flags&Z2};vv.declareName=function(e,t,n){var r=!1;if(t===Dg){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&Z2&&delete this.undefinedExports[e]}else if(t===fRe){var s=this.currentScope();s.lexical.push(e)}else if(t===dRe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&lRe&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&Z2&&delete this.undefinedExports[e],u.flags&DQ)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};vv.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};vv.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};vv.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&DQ)return t}};vv.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&DQ&&!(t.flags&uRe))return t}};var R6=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new A6(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},OR=Oo.prototype;OR.startNode=function(){return new R6(this,this.start,this.startLoc)};OR.startNodeAt=function(e,t){return new R6(this,e,t)};function gRe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}OR.finishNode=function(e,t){return gRe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};OR.finishNodeAt=function(e,t,n,r){return gRe.call(this,e,t,n,r)};OR.copyNode=function(e){var t=new R6(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var yRe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",vRe=yRe+" Extended_Pictographic",bRe=vRe,_Re=bRe+" EBase EComp EMod EPres ExtPict",wRe=_Re,YSt=wRe,KSt={9:yRe,10:vRe,11:bRe,12:_Re,13:wRe,14:YSt},XSt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",QSt={9:"",10:"",11:"",12:"",13:"",14:XSt},Uhe="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",xRe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",ERe=xRe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",SRe=ERe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",TRe=SRe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",CRe=TRe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",JSt=CRe+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",ZSt={9:xRe,10:ERe,11:SRe,12:TRe,13:CRe,14:JSt},ARe={};function eTt(e){var t=ARe[e]={binary:H0(KSt[e]+" "+Uhe),binaryOfStrings:H0(QSt[e]),nonBinary:{General_Category:H0(Uhe),Script:H0(ZSt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var q9=0,Vhe=[9,10,11,12,13,14];q9<Vhe.length;q9+=1){var tTt=Vhe[q9];eTt(tTt)}var Xt=Oo.prototype,e$=function(t,n){this.parent=t,this.base=n||this};e$.prototype.separatedFrom=function(t){for(var n=this;n;n=n.parent)for(var r=t;r;r=r.parent)if(n.base===r.base&&n!==r)return!0;return!1};e$.prototype.sibling=function(){return new e$(this.parent,this.base)};var Up=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=ARe[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};Up.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};Up.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};Up.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};Up.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};Up.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};Up.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};Up.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};Up.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};Up.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};Xt.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};function nTt(e){for(var t in e)return!0;return!1}Xt.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&nTt(e.groupNames)&&(e.switchN=!0,this.regexp_pattern(e))};Xt.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames=Object.create(null),e.backReferenceNames.length=0,e.branchID=null,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames[r]||e.raise("Invalid named capture referenced")}};Xt.regexp_disjunction=function(e){var t=this.options.ecmaVersion>=16;for(t&&(e.branchID=new e$(e.branchID,null)),this.regexp_alternative(e);e.eat(124);)t&&(e.branchID=e.branchID.sibling()),this.regexp_alternative(e);t&&(e.branchID=e.branchID.parent),this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};Xt.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};Xt.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};Xt.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};Xt.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};Xt.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};Xt.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};Xt.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};Xt.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};Xt.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};Xt.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};Xt.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};Xt.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};Xt.regexp_eatSyntaxCharacter=function(e){var t=e.current();return IRe(t)?(e.lastIntValue=t,e.advance(),!0):!1};function IRe(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}Xt.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!IRe(n);)e.advance();return e.pos!==t};Xt.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};Xt.regexp_groupSpecifier=function(e){if(e.eat(63)){this.regexp_eatGroupName(e)||e.raise("Invalid group");var t=this.options.ecmaVersion>=16,n=e.groupNames[e.lastStringValue];if(n)if(t)for(var r=0,i=n;r<i.length;r+=1){var s=i[r];s.separatedFrom(e.branchID)||e.raise("Duplicate capture group name")}else e.raise("Duplicate capture group name");t?(n||(e.groupNames[e.lastStringValue]=[])).push(e.branchID):e.groupNames[e.lastStringValue]=!0}};Xt.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};Xt.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=$y(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=$y(e.lastIntValue);return!0}return!1};Xt.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),rTt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function rTt(e){return pg(e,!0)||e===36||e===95}Xt.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),iTt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function iTt(e){return _E(e,!0)||e===36||e===95||e===8204||e===8205}Xt.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};Xt.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};Xt.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};Xt.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};Xt.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};Xt.regexp_eatZero=function(e){return e.current()===48&&!k6(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};Xt.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};Xt.regexp_eatControlLetter=function(e){var t=e.current();return RRe(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function RRe(e){return e>=65&&e<=90||e>=97&&e<=122}Xt.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&sTt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function sTt(e){return e>=0&&e<=1114111}Xt.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};Xt.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var kRe=0,mg=1,cd=2;Xt.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(oTt(t))return e.lastIntValue=-1,e.advance(),mg;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===cd&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return kRe};function oTt(e){return e===100||e===68||e===115||e===83||e===119||e===87}Xt.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),mg}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return kRe};Xt.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){PR(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};Xt.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return mg;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return cd;e.raise("Invalid property name")};Xt.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";PRe(t=e.current());)e.lastStringValue+=$y(t),e.advance();return e.lastStringValue!==""};function PRe(e){return RRe(e)||e===95}Xt.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";aTt(t=e.current());)e.lastStringValue+=$y(t),e.advance();return e.lastStringValue!==""};function aTt(e){return PRe(e)||k6(e)}Xt.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};Xt.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===cd&&e.raise("Negated character class may contain strings"),!0}return!1};Xt.regexp_classContents=function(e){return e.current()===93?mg:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),mg)};Xt.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};Xt.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||DRe(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};Xt.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};Xt.regexp_classSetExpression=function(e){var t=mg,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===cd&&(t=cd);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==cd&&(t=mg);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===cd&&(t=cd)}};Xt.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};Xt.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?mg:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};Xt.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===cd&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};Xt.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};Xt.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===cd&&(t=cd);return t};Xt.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?mg:cd};Xt.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&uTt(n)||lTt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function uTt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function lTt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}Xt.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return cTt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function cTt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}Xt.regexp_eatClassControlLetter=function(e){var t=e.current();return k6(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};Xt.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};Xt.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;k6(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function k6(e){return e>=48&&e<=57}Xt.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;NRe(n=e.current());)e.lastIntValue=16*e.lastIntValue+ORe(n),e.advance();return e.pos!==t};function NRe(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function ORe(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}Xt.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};Xt.regexp_eatOctalDigit=function(e){var t=e.current();return DRe(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function DRe(e){return e>=48&&e<=55}Xt.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!NRe(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+ORe(i),e.advance()}return!0};var FQ=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new A6(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Ir=Oo.prototype;Ir.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new FQ(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Ir.getToken=function(){return this.next(),new FQ(this)};typeof Symbol<"u"&&(Ir[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===ie.eof,value:t}}}});Ir.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(ie.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Ir.readToken=function(e){return pg(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Ir.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Ir.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=rRe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Ir.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!RS(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Ir.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&iRe.test(String.fromCharCode(e)))++this.pos;else break e}}};Ir.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Ir.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(ie.ellipsis)):(++this.pos,this.finishToken(ie.dot))};Ir.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(ie.assign,2):this.finishOp(ie.slash,1)};Ir.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?ie.star:ie.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=ie.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(ie.assign,n+1):this.finishOp(r,n)};Ir.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(ie.assign,3)}return this.finishOp(e===124?ie.logicalOR:ie.logicalAND,2)}return t===61?this.finishOp(ie.assign,2):this.finishOp(e===124?ie.bitwiseOR:ie.bitwiseAND,1)};Ir.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(ie.assign,2):this.finishOp(ie.bitwiseXOR,1)};Ir.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Ld.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(ie.incDec,2):t===61?this.finishOp(ie.assign,2):this.finishOp(ie.plusMin,1)};Ir.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(ie.assign,n+1):this.finishOp(ie.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(ie.relational,n))};Ir.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(ie.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(ie.arrow)):this.finishOp(e===61?ie.eq:ie.prefix,1)};Ir.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(ie.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(ie.assign,3)}return this.finishOp(ie.coalesce,2)}}return this.finishOp(ie.question,1)};Ir.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),pg(t,!0)||t===92))return this.finishToken(ie.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+$y(t)+"'")};Ir.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(ie.parenL);case 41:return++this.pos,this.finishToken(ie.parenR);case 59:return++this.pos,this.finishToken(ie.semi);case 44:return++this.pos,this.finishToken(ie.comma);case 91:return++this.pos,this.finishToken(ie.bracketL);case 93:return++this.pos,this.finishToken(ie.bracketR);case 123:return++this.pos,this.finishToken(ie.braceL);case 125:return++this.pos,this.finishToken(ie.braceR);case 58:return++this.pos,this.finishToken(ie.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(ie.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(ie.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+$y(e)+"'")};Ir.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Ir.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Ld.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new Up(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(ie.regexp,{pattern:i,flags:o,value:u})};Ir.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),d=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?d=c-97+10:c>=65?d=c-65+10:c>=48&&c<=57?d=c-48:d=1/0,d>=e)break;a=c,o=o*e+d}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function dTt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function MRe(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Ir.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=MRe(this.input.slice(t,this.pos)),++this.pos):pg(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(ie.num,n)};Ir.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=MRe(this.input.slice(t,this.pos));return++this.pos,pg(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(ie.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),pg(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=dTt(this.input.slice(t,this.pos),n);return this.finishToken(ie.num,s)};Ir.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Ir.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(RS(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(ie.string,t)};var $Re={};Ir.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===$Re)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Ir.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw $Re;this.raise(e,t)};Ir.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===ie.template||this.type===ie.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(ie.dollarBraceL)):(++this.pos,this.finishToken(ie.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(ie.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(RS(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Ir.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(ie.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")};Ir.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return $y(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return RS(t)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(t)}};Ir.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Ir.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(_E(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?pg:_E)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=$y(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Ir.readWord=function(){var e=this.readWord1(),t=ie.name;return this.keywords.test(e)&&(t=PQ[e]),this.finishToken(t,e)};var fTt="8.12.1";Oo.acorn={Parser:Oo,version:fTt,defaultOptions:iH,Position:J2,SourceLocation:A6,getLineInfo:oRe,Node:R6,TokenType:qr,tokTypes:ie,keywordTypes:PQ,TokContext:tf,tokContexts:as,isIdentifierChar:_E,isIdentifierStart:pg,Token:FQ,isNewLine:RS,lineBreak:Ld,lineBreakG:$St,nonASCIIwhitespace:iRe};function hTt(e,t){return Oo.parse(e,t)}const jQ={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},pTt={ecmaVersion:11},Hhe="$",mTt="d",gTt="d1",yTt="d2",fa=e=>(t,n)=>n.error(t,e+" not allowed"),vTt=fa("Aggregate function"),bTt=fa("Window function"),_Tt="Invalid argument",BQ="Invalid column reference",wTt=BQ+" (must be input to an aggregate function)",LRe="Invalid function call",xTt="Invalid member expression",ETt="Invalid operator parameter",STt="Invalid param reference",TTt="Invalid variable reference",CTt="Variable not accessible in operator call",ATt="Unsupported variable declaration",ITt="Unsupported destructuring pattern",FRe="Table expressions do not support closures",jRe="Use aq.escape(fn) to use a function as-is (including closures)",RTt="use table.params({ name: value }) to define dynamic parameters",kTt="use aq.addFunction(name, fn) to add new op functions",PTt=`
Note: ${FRe}. ${jRe}, or ${RTt}.`,BRe=`
Note: ${FRe}. ${jRe}, or ${kTt}.`,NTt=`The ${MAe} method is not valid in multi-table expressions.`;function OTt(e,t){const n=DTt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,CSt(r)?($Tt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=gTt),e.scope.add(e.tuple2=yTt),e.scope.add(e.$param=Hhe)):(e.scope.add(e.tuple=mTt),e.scope.add(e.$param=Hhe)),zr(r,e,zQ),e.root}function DTt(e){try{const t=e.field?MTt(e):Qr(e)?bp(e):e;return hTt(`expr=(${t})`,pTt).body[0].expression.right}catch{sr(`Expression parse error: ${e+""}`)}}function MTt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const zQ={FunctionDeclaration:fa("Function definitions"),ForStatement:fa("For loops"),ForOfStatement:fa("For-of loops"),ForInStatement:fa("For-in loops"),WhileStatement:fa("While loops"),DoWhileStatement:fa("Do-while loops"),AwaitExpression:fa("Await expressions"),ArrowFunctionExpression:fa("Function definitions"),AssignmentExpression:fa("Assignments"),FunctionExpression:fa("Function definitions"),NewExpression:fa('Use of "new"'),UpdateExpression:fa("Update expressions"),VariableDeclarator(e,t){lH(e.id,t)},Identifier(e,t,n){VRe(e,t,n)&&!t.scope.has(e.name)&&t.error(e,TTt,PTt)},CallExpression(e,t){const n=zRe(e.callee),r=NAe(n)||OAe(n);if(r){if((t.join||t.aggregate===!1)&&PX(n)&&vTt(e,t),(t.join||t.window===!1)&&NX(n)&&bTt(e,t),t.$op=1,t.ast)uH(e,n,t),e.arguments.forEach(i=>zr(i,t,aH));else{const i=t.op(LTt(t,r,n,e.arguments));Object.assign(e,{type:AAe,name:i.id})}return t.$op=0,!1}else PAe(n)?uH(e,n,t):t.error(e,LRe,BRe)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!So(ay,r))return;const{name:s}=r;if(URe(e)&&So(ay,i)&&zf(jQ,i.name)){WRe(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return qhe(e,o,t,HRe,n);if(s===t.$param)return qhe(e,o,t,jTt);t.paramsRef.has(s)?eI(e,t.paramsRef.get(s)):t.columnRef.has(s)?qRe(r,s,t,e):zf(t.params,s)&&eI(r,s)}};function qhe(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(So(ES,s))a=s.value;else try{zr(s,n,zQ,e),a=n.param(s)}catch{n.error(e,xTt)}return r(e,a,t,n,i),!1}const aH={...zQ,VariableDeclarator:fa("Variable declaration in operator call"),Identifier(e,t,n){VRe(e,t,n)&&t.error(e,CTt)},CallExpression(e,t){const n=zRe(e.callee);PAe(n)?uH(e,n,t):t.error(e,LRe,BRe)}};function $Tt(e,t){e.generator&&fa("Generator functions")(e,t),e.async&&fa("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(rC(t,n[0],"tuple1",i(1)),r>1&&rC(t,n[1],"tuple2",i(2)),r>2&&rC(t,n[2],"$param",s)):(rC(t,n[0],"tuple",i(0)),r>1&&rC(t,n[1],"$param",s))),t.root=e.body}function rC(e,t,n,r){So(ay,t)?(e.scope.add(t.name),e[n]=t.name):So(TAe,t)&&t.properties.forEach(i=>{const s=So(ay,i.key)?i.key.name:So(ES,i.key)?i.key.value:e.error(i,_Tt);So(ay,i.value)||e.error(i.value,ITt),r(i.value.name,s)})}function LTt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(zr(u,e,aH),i.push(e.field(u))):l<a?(zr(u,e,aH),s.push(e.param(u))):e.error(u,ETt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function zRe(e){return So(ay,e)?e.name:So(SAe,e)?URe(e)?FTt(e.property.name):e.property.name:null}function URe(e){return So(ay,e.object)&&e.object.name==="Math"}function FTt(e){return e==="max"?"greatest":e==="min"?"least":e}function VRe(e,t,n){const{name:r}=e;if(!(So(SAe,n)&&n.property===e)){if(!(So(CAe,n)&&n.key===e))if(t.paramsRef.has(r))eI(e,t.paramsRef.get(r));else if(t.columnRef.has(r))qRe(e,r,t,n);else if(zf(t.params,r))eI(e,r);else if(zf(jQ,r))WRe(e,r);else return!0}}function HRe(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,BQ),r.aggronly&&!r.$op&&r.error(e,wTt),DAe(e,t,n,o,i)}function qRe(e,t,n,r){const[i,s]=n.columnRef.get(t);HRe(e,i,s,n,r)}function jTt(e,t,n,r){r.params&&!zf(r.params,t)&&r.error(e,STt),eI(e,t)}function eI(e,t){e.type=L_t,e.name=t}function WRe(e,t){e.type=D_t,e.name=t,e.raw=jQ[t]}function uH(e,t,n){if(t===MAe){const r=n.table;r||n.error(e,NTt),$Ae(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=$u(s)?r.columnName(s):s;return r.column(o)||n.error(i,BQ),o}):r.columnNames())}else e.callee={type:$_t,name:t}}function lH(e,t){So(ay,e)?t.scope.add(e.name):So(k_t,e)?e.elements.forEach(n=>lH(n,t)):So(TAe,e)?e.properties.forEach(n=>lH(n.value,t)):t.error(e.id,ATt)}const BTt={[TR]:1,[AAe]:1};function Ol(e,t={}){const n=t.generate||D3,r=t.compiler||OX,i=UTt(t),s={},o={},a=[],u=[];let l=0,c=-1;const d=t.join?r.join:t.index==1?r.expr2:r.expr,f={op(m){const y=zTt(m);return o[y]||(m.id=++c,o[y]=m)},field(m){const y=n(m);return s[y]||(s[y]=++l)},param(m){return So(ES,m)?m.value:r.param(n(m),i)},value(m,y){a.push(m);const v=y.escape||(t.ast?TSt(y):d(n(y),i));u.push(v),BTt[y.type]&&v!==y&&tu(v)&&(v.field=y.name)},error(m,y,v=""){const w=m.start-6,x=m.end-6,S=String(f.spec).slice(w,x);sr(`${y}: "${S}"${v}`)}};Object.assign(f,t,{params:i});for(const[m,y]of h6(e))f.value(m+"",y.escape?RSt(f,y,i):OTt(f,y));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(y=>h[y])),{names:a,exprs:u,ops:p}}function zTt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function UTt(e){return(e.table?W9(e.table):e.join?{...W9(e.join[1]),...W9(e.join[0])}:{})||{}}function W9(e){return e&&es(e.params)?e.params():{}}const GRe="Expr",nf="ExprList",YRe="ExprNumber",oA="ExprObject",rx="JoinKeys",t$="JoinValues",ed="Options",UQ="OrderKeys",_0="SelectionList",A1="TableRef",ix="TableRefList",VTt="Descending",HTt="Query",qTt="Selection",WTt="Verb",GTt="Window";function P6(e,t){return e&&e.expr?new Whe({...e,...t}):new Whe(t,e)}class Whe{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...es(this.expr)?{func:!0}:{}}}}function YTt(e){return P6(e,{desc:!0})}function xb(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return P6(e,t?{expr:t,...r}:r)}function KTt(e,t,n){return P6(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function XTt(e){const t=n=>n;return t.toString=()=>e,t}function Ghe(e,t){return t=t&&es(t.query)?t.query():t,t&&es(t.evaluate)?t.evaluate(null,e):e(t)}function KRe(e){return tu(e)&&(Qr(e.all)||Qr(e.matches)||Qr(e.not)||Qr(e.range))}function tI(e){return e&&es(e.toObject)?e.toObject():es(e)?{expr:String(e),func:!0}:Qr(e)?e.map(tI):tu(e)?T6(e,t=>tI(t)):e}function VQ(e){return Qr(e)?e.map(VQ):tu(e)?Qr(e.verbs)?qQ.from(e):Qr(e.all)?bE():Qr(e.range)?_St(...e.range):Qr(e.match)?wSt(RegExp(...e.match)):Qr(e.not)?ZIe(e.not.map(tI)):QTt(e):e}function QTt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=xb(n):e.func===!0&&(t=n=XTt(n)),tu(e.window)){const{frame:r,peers:i}=e.window;t=n=KTt(n,r,i)}e.desc===!0&&(t=YTt(n))}return e===t?T6(e,r=>VQ(r)):t}function JTt(e){return Qr(e)?e.map(ZTt):e}function ZTt(e){const t=[];return Pl(e).forEach(n=>{$u(n)?t.push(n):Aa(n)?t.push(xb(n,null)):tu(n)&&n.expr||es(n)?t.push(n):sr(`Invalid key value: ${n+""}`)}),t}function eCt(e){return Qr(e)?e.map(tCt):e}function tCt(e,t){return t<2?Pl(e):e}function nCt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(tu(r)&&!es(r))for(const i in r)t.push(r[i]);else n=$u(r)?r:Aa(r)?xb(n):es(r)?n:sr(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const rCt={[GRe]:ZRe,[nf]:wE,[YRe]:lCt,[oA]:Ly,[rx]:cCt,[t$]:dCt,[UQ]:wE,[_0]:aCt};function iCt(e,t,n){return t===A1?Yhe(e):t===ix?e.map(Yhe):XRe(tI(e),t,n)}function XRe(e,t,n){return t===ed?e&&sCt(e,n):rCt[t](e)}function sCt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?XRe(i,t[r]):i}return n}function oCt(e,t){return Ol({expr:e},{...t,ast:!0}).exprs[0]}function HQ(e){return{type:TR,name:e}}function QRe(e){return{type:TR,index:e}}function Ly(e,t){if(Aa(e))return oCt(e,t);if(e.expr){let n;if(e.field===!0?n=HQ(e.expr):e.func===!0&&(n=Ly(e.expr,t)),n)return e.desc&&(n={type:VTt,expr:n}),e.window&&(n={type:GTt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...Ly(e[n],t),as:n}))}function JRe(e){const t=qTt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:wE(e.not)}:e.range?{type:t,operator:"range",arguments:wE(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:sr("Invalid input")}function aCt(e){return Pl(e).map(uCt).flat()}function uCt(e){return KRe(e)?JRe(e):$u(e)?QRe(e):Aa(e)?HQ(e):tu(e)?Object.keys(e).map(t=>({type:TR,name:t,as:e[t]})):sr("Invalid input")}function ZRe(e){return KRe(e)?JRe(e):$u(e)?QRe(e):Aa(e)?HQ(e):tu(e)?Ly(e):sr("Invalid input")}function wE(e){return Pl(e).map(ZRe).flat()}function lCt(e){return $u(e)?e:Ly(e)}function cCt(e){return Qr(e)?e.map(wE):Ly(e,{join:!0})}function dCt(e){return Qr(e)?e.map((t,n)=>n<2?wE(t):Ly(t,{join:!0})):Ly(e,{join:!0})}function Yhe(e){return e&&es(e.toAST)?e.toAST():e}class eke{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===rx?JTt(a):o===t$?eCt(a):o===UQ?nCt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=cH[t.verb],r=(n.schema||[]).map(({name:i})=>VQ(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===A1?Ghe(n,o):s===ix?o.map(a=>Ghe(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=tI(this[n])}),t}toAST(){const t={type:WTt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=iCt(this[n],r,i)}),t}}function Ii(e,t){return Object.assign((...n)=>new eke(e,t,n),{schema:t})}const cH={count:Ii("count",[{name:"options",type:ed}]),derive:Ii("derive",[{name:"values",type:oA},{name:"options",type:ed,props:{before:_0,after:_0}}]),filter:Ii("filter",[{name:"criteria",type:oA}]),groupby:Ii("groupby",[{name:"keys",type:nf}]),orderby:Ii("orderby",[{name:"keys",type:UQ}]),relocate:Ii("relocate",[{name:"columns",type:_0},{name:"options",type:ed,props:{before:_0,after:_0}}]),rename:Ii("rename",[{name:"columns",type:_0}]),rollup:Ii("rollup",[{name:"values",type:oA}]),sample:Ii("sample",[{name:"size",type:YRe},{name:"options",type:ed,props:{weight:GRe}}]),select:Ii("select",[{name:"columns",type:_0}]),ungroup:Ii("ungroup"),unorder:Ii("unorder"),reify:Ii("reify"),dedupe:Ii("dedupe",[{name:"keys",type:nf,default:[]}]),impute:Ii("impute",[{name:"values",type:oA},{name:"options",type:ed,props:{expand:nf}}]),fold:Ii("fold",[{name:"values",type:nf},{name:"options",type:ed}]),pivot:Ii("pivot",[{name:"keys",type:nf},{name:"values",type:nf},{name:"options",type:ed}]),spread:Ii("spread",[{name:"values",type:nf},{name:"options",type:ed}]),unroll:Ii("unroll",[{name:"values",type:nf},{name:"options",type:ed,props:{drop:nf}}]),lookup:Ii("lookup",[{name:"table",type:A1},{name:"on",type:rx},{name:"values",type:nf}]),join:Ii("join",[{name:"table",type:A1},{name:"on",type:rx},{name:"values",type:t$},{name:"options",type:ed}]),cross:Ii("cross",[{name:"table",type:A1},{name:"values",type:t$},{name:"options",type:ed}]),semijoin:Ii("semijoin",[{name:"table",type:A1},{name:"on",type:rx}]),antijoin:Ii("antijoin",[{name:"table",type:A1},{name:"on",type:rx}]),concat:Ii("concat",[{name:"tables",type:ix}]),union:Ii("union",[{name:"tables",type:ix}]),intersect:Ii("intersect",[{name:"tables",type:ix}]),except:Ii("except",[{name:"tables",type:ix}])};let qQ=class tke extends vAe{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new tke(t.map(eke.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return Khe(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Khe(this,"toAST",{type:HTt})}};function Khe(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function fCt(e,t){return new qQ(e._verbs.concat(t),e._params,e._table)}for(const e in cH){const t=cH[e];qQ.prototype["__"+e]=function(n,...r){return fCt(n,t(...r))}}function NS(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function hCt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function WQ(e,t){const n=Lc();return t.forEach((r,i)=>{const s=Aa(r)?r:i;if(s){const o=e.column(i)||sr(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function nke(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||sr("relocate requires a before or after option."),i&&s&&sr("relocate accepts only one of the before or after options."),t=hg(e,t);const o=[...hg(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[d,f]of t)u.set(d,f);if(s)return}c&&u.set(l,l)}),WQ(e,u)}function DR(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function GQ(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function pCt(e,t=0,n=e.length){let r=n?e[t++]:Wr;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function mCt(e,t=0,n=e.length){let r=n?e[t++]:Wr;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function sO(e){return q2(e)?e:+e}function gCt(e,t){const n=e.length;if(!n)return Wr;if((t=+t)<=0||n<2)return sO(e[0]);if(t>=1)return sO(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=sO(e[i]);return q2(s)?s:s+(sO(e[i+1])-s)*(r-i)}class yCt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:pCt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:mCt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(GQ)),gCt(this._sorted,t)}}const n$=(e,t,n)=>NS(t,"{"+DR(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function vCt(e,t){const{ops:n,output:r}=bCt(e,t),i=e[0].fields,s=i.length,o=s===0?YQ:s===1?_Ct:s===2?wCt:sr("Unsupported field count: "+s);return new o(i,n,r,t)}function bCt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=NAe(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(d=>i(d,[])),l.req&&l.req.forEach(d=>i(d,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class YQ extends ESt{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new yCt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class _Ct extends YQ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=n$(n,s,"add"),this._rem=n$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,wf(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,wf(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class wCt extends YQ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=n$(n,s,"add"),this._rem=n$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,wf(i)&&wf(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,wf(i)&&wf(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function a_(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=OS(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function OS(e,t,n){if(!t.length)return n;const r=rke(t),i=e.groups(),s=i?i.size:1;return n=n||d6(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=ske(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=ike(e,o);o.write(a,n,0)}),n}function rke(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(vCt(r[i],t));return n}function ike(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function ske(e,t,n){const{keys:r,size:i}=n,s=d6(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function oke(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function ake(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const Xhe=ake(GQ);function xCt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],d=r.length,f=i.length,h=r.length?NS(["w","r","k"],"{"+DR(r,(m,y)=>`r[_${y}.id][k]=_${y}.value(w,_${y}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,y,v,w){p.index=p.i0=p.i1=0,p.size=y.length,s=m,o=y,u=v,l=w,a=i?i.map(x=>x.init()):null;for(let x=0;x<d;++x)r[x].init();return p},value(m,y){return y(s[m],e)},step(m){const[y,v]=t,w=p.size,x=p.i0,S=p.i1;p.i0=y!=null?Math.max(0,m-Math.abs(y)):0,p.i1=v!=null?Math.min(w,m+Math.abs(v)+1):w,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=Xhe.left(o,o[p.i0])),p.i1<w&&c(p.i1)&&(p.i1=Xhe.right(o,o[p.i1-1])));for(let E=0;E<f;++E){const T=i[E],A=a[E];for(let I=x;I<p.i0;++I)T.rem(A,s[I],e);for(let I=S;I<p.i1;++I)T.add(A,s[I],e);T.write(A,u,l)}return h(p,u,l),u}};return p}const ECt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),SCt=e=>!!e.peers;function TCt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=OAe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function CCt(e,t,n,r={},i){const s=e.data(),o=ACt(i,s),a=o.length,u=NS(["r","d","op"],"{"+DR(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const d=l.length,f=ICt(e,l);for(let p=0;p<a;++p)o[p].init(l,f,r,c);const h=p=>r[p][c];for(let p=0;p<d;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function ACt(e,t){const n={};return e.forEach(r=>{const i=ECt(r),s=SCt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});PX(r.name)?a.push(r):u.push(TCt(r))}),Object.values(n).map(r=>xCt(t,r.frame,r.peers,r.winOps,rke(r.aggOps,r.frame[0]!=null?-1:1)))}function ICt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function RCt(e){return NX(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function KQ(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=Lc(i.drop?null:e),a=t.map(f=>o.add(f,Array(s))),[u,l]=kCt(r),c=e.isGrouped()?e.groups().size:1,d=OS(e,u,d6(r.length,()=>Array(c)));return l.length?CCt(e,a,n,d,l):PCt(e,a,n,d),e.create(o)}function kCt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(RCt(s)?n:t).push(s)}return[t,n]}function PCt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],d=t[l];if(i)for(let f=i.next(0);f>=0;f=i.next(f+1))d[f]=c(f,s,a);else{const f=e.totalRows();for(let h=0;h<f;++h)d[h]=c(h,s,a)}}}function NCt(e,t,n={}){const r=KQ(e,Ol(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:nke(r,Object.keys(t).filter(i=>!e.column(i)),n)}function OCt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const oO=2147483648,DCt=4294967295;class uke{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&oO>>>t}set(t){this._bits[t>>5]|=oO>>>t}clear(t){this._bits[t>>5]&=~(oO>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&DCt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=oO>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function MCt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new uke(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function $Ct(e,t){const n=Ol({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=KQ(e,n,{drop:!0}).column("p");r=s=>i[s]}return MCt(e,r)}function lke(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=a_(e,r,n),l=Lc(),c=new Set(t),d=[],f=[],h=[];e.columnNames().forEach(S=>{if(!a.has(S)){const E=l.add(S,[]);c.has(S)||(d.push(e.column(S)),f.push(E))}}),t.forEach(S=>{a.has(S)||(l.has(S)||l.add(S,[]),h.push(l.data[S]))});const p=o?l.add(o,[]):null;let m=0;const y=d.length,v=h.length,w=(S,E)=>{for(let T=0;T<y;++T)f[T].length=m+E,f[T].fill(d[T].get(S),m,m+E)},x=p?(S,E)=>{for(let T=0;T<E;++T)p[S+T]=T}:()=>{};if(v===1){const S=u[0],E=h[0];e.scan((T,A)=>{const I=Pl(S(T,A)),k=Math.min(I.length,s);w(T,k);for(let D=0;D<k;++D)E[m+D]=I[D];x(m,k),m+=k})}else e.scan((S,E)=>{let T=0;const A=u.map(I=>{const k=Pl(I(S,E));return T=Math.min(Math.max(T,k.length),s),k});w(S,T);for(let I=0;I<v;++I){const k=h[I],D=A[I];for(let M=0;M<T;++M)k[m+M]=D[M]}x(m,T),m+=T});return e.create(l.new())}function LCt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=a_(e,r,n);return lke(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function Uf(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=$u(o)?t.columnName(o):o,Aa(o)?i.set(o,xb(o)):es(o)?hg(t,o).forEach(s):tu(o)?QIe(i,o):sr(`Invalid ${e} value: ${o+""}`)};return Pl(n).forEach(s),r.preparse&&r.preparse(i),Ol(i,{table:t,...r})}function FCt(e,t,n){return LCt(e,Uf("fold",e,t),n)}function Qhe(e,t,n,r){const i=n&&n.length;return jCt(i?BCt(e,n,r):e,t,i)}function jCt(e,{names:t,exprs:n,ops:r},i){const s=a_(e,r,n),o=i?null:Lc(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),d=i?c.data:o.add(u,Array(a)),f=s[l];e.scan(h=>{const p=c.get(h);d[h]=wf(p)?p:f(h)})}),i?e:e.create(o)}function BCt(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=M3(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=Lc(),d=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const y=i[p],v=d[m];e.scan(w=>v.push(y.get(w)))});const f=M3(o.map((p,m)=>y=>y[m])),h=NS("v","{"+d.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",d,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((v,w)=>v*w.length,r.size),y=new Uint32Array(m+(p-a.size));y.set(r.keys),Jhe(r,n,(v,w)=>{a.has(f(v))||(h(v),y[p++]=w[0])}),c.groupby({...r,keys:y})}else Jhe(r,n,p=>{a.has(f(p))||h(p)});return e.create(c.new())}function Jhe(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:d,size:f}=e;o[0]=f,u.push((h,p)=>{const m=d[p];for(let y=0;y<r;++y)h[y]=c[y](m)})}t.forEach((c,d)=>{const f=d+r;o[d+i]=c.length,u.push((h,p)=>h[f]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const d=++a[c];d<o[c]?(u[c](l,d),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function XQ(e,{names:t,exprs:n,ops:r}){const i=Lc(),s=e.groups();return s&&oke(i,s),zCt(t,n,s,OS(e,r),i),e.create(i.new())}function zCt(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let d=0;d<s;++d)c[d]=l(d,null,o)}else i.add(e[u],[l(0,null,o)])}}function UCt(e,t,n={}){if(t=Ol(t,{table:e}),t.names.forEach(r=>e.column(r)?0:sr(`Invalid impute column ${bp(r)}`)),n.expand){const r={preparse:VCt,aggronly:!0},i=Uf("impute",e,n.expand,r),s=XQ(e.ungroup(),i);return Qhe(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return Qhe(e,t)}function VCt(e){e.forEach((t,n)=>t.field?e.set(n,x_t(t+"")):0)}function HCt(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function cke(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function qCt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function WCt(e,t){const n=["i","a","j","b"];return NS(n,"{"+DR(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function GCt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),d=t.indices(!1),f=d.length,h=new Int32Array(f),p=r.length,m=Lc(),y=Array(p),v=Array(p);for(let S=0;S<r.length;++S)y[S]=m.add(r[S],[]),v[S]=i[S];const w=WCt(y,v);if((Qr(n)?KCt:YCt)(w,n,o,c,a,d,l,h,u,f),s.left)for(let S=0;S<u;++S)l[S]||w(a[S],o,-1,c);if(s.right)for(let S=0;S<f;++S)h[S]||w(-1,o,d[S],c);return e.create(m.new())}function YCt(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const d=i[c];for(let f=0;f<l;++f){const h=s[f];t(d,n,h,r)&&(e(d,n,h,r),o[c]=1,a[f]=1)}}}function KCt(e,[t,n],r,i,s,o,a,u,l,c){let d,f,h,p,m,y,v,w,x=e;l>=c?(d=r,f=t,h=a,p=s,m=i,y=n,v=u,w=o):(d=i,f=n,h=u,p=o,m=r,y=t,v=a,w=s,x=(T,A,I,k)=>e(I,k,T,A));const S=qCt(w,m,y),E=p.length;for(let T=0;T<E;++T){const A=p[T],I=S.get(f(A,d));if(I){const k=I.length;for(let D=0;D<k;++D){const M=I[D];x(A,d,w[M],m),v[M]=1}h[T]=1}}}function r$(e,t,n){const r=new Map;Pl(n).forEach((s,o)=>{s=$u(s)?t.columnName(s):s,Aa(s)?r.set(o,xb(s)):es(s)||tu(s)&&s.expr?r.set(o,s):sr(`Invalid ${e} key value: ${s+""}`)});const i=Ol(r,{table:t,aggregate:!1,window:!1});return M3(i.exprs,!0)}function XCt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function QQ(e,t,n){if(n)Aa(n)?n=[n,n]:Qr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=XCt(e.columnNames(),t.columnNames());r.length||sr("Natural join requires shared column names."),n=[r,r]}return n}function dke(e,t,n,r){return n.length!==r.length&&sr("Mismatched number of join keys"),[r$("join",e,n),r$("join",t,r)]}const QCt={aggregate:!1,window:!1},JCt={...QCt,index:1};function Zhe(e,t,n,r,i={}){n=QQ(e,t,n);const s={join:[e,t]};let o;if(Qr(n)){const[a,u]=n.map(Pl);o=dke(e,t,a,u),r||(r=ZCt(e,a,u,i))}else o=Ol({on:n},s).exprs[0],r||(r=[bE(),bE()]);return GCt(e,t,o,eAt(e,t,r,s,i&&i.suffix),i)}function ZCt(e,t,n,r){const i=[];t.forEach((o,a)=>Aa(o)&&o===n[a]?i.push(o):0);const s=ZIe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${bp(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,bE()]:[bE(),s]}function eAt(e,t,n,r,i=[]){if(Qr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=Uf("join",e,n[0],r)),u--&&(o=Uf("join",t,n[1],JCt)),u--&&(a=Ol(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(d=>{c.has(d)&&l.add(d)}),l.size&&(i[0]!==""&&epe(s.names,l,i[0]||"_1"),i[1]!==""&&epe(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return Ol(n,r)}function epe(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function tAt(e,t,n,r={}){const i=new uke(e.totalRows());return(Qr(n)?nAt:rAt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function nAt(e,t,n,[r,i]){const s=cke(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function rAt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const d=u[c];for(let f=0;f<s;++f)if(r(d,o,l[f],a)){e.set(d);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function tpe(e,t,n,r){n=QQ(e,t,n);const i=Qr(n)?dke(e,t,...n.map(Pl)):Ol({on:n},{join:[e,t]}).exprs[0];return tAt(e,t,i,r)}function iAt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=Lc(e),u=e.totalRows();i.forEach(f=>a.add(f,Array(u).fill(Wr)));const l=cke(t,r),c=NS(["lr","rr","data"],"{"+DR(i,(f,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(f=>a.data[f]),a_(t,o,s)),d=t.data();return e.scan((f,h)=>{const p=l.get(n(f,h));p>=0&&c(f,p,d)}),e.create(a)}function sAt(e,t,n,r){return n=QQ(e,t,n),iAt(e,t,[r$("lookup",e,n[0]),r$("lookup",t,n[1])],Uf("lookup",t,r))}const dH=(e,t)=>e??t;function oAt(e,t,n,r={}){const{keys:i,keyColumn:s}=aAt(e,t,r),o=dH(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>OS(e,n.ops.map(c=>{if(c.name==="count"){const f=h=>l===s[h]?1:NaN;return f.toString=()=>l+":1",{...c,name:"sum",fields:[f]}}const d=c.fields.map(f=>{const h=(p,m)=>l===s[p]?f(p,m):NaN;return h.toString=()=>l+":"+f,h});return{...c,fields:d}})));return e.create(uAt(n,a,e.groups(),u))}function aAt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=dH(n.sort,!0),s=dH(n.keySeparator,"_"),o=a_(e,t.ops,t.exprs),a=o.length===1?o[0]:(d,f)=>o.map(h=>h(d,f)).join(s),u=Array(e.totalRows());e.scan((d,f)=>u[d]=a(d,f));const l=OS(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[d=>u[d]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function uAt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=Lc(),a=i.length,u=e.length;let l;const c=(d,f)=>l[d][f];r&&oke(o,r);for(let d=0;d<u;++d){const f=t[d];if(f.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[d]),i[h][f.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[d]),Array(s));for(let m=0;m<s;++m)p[m]=f(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[d]),[f(0,null,c)])}return o.new()}function lAt(e,t,n,r){return oAt(e,Uf("fold",e,t),Uf("fold",e,n,{preparse:cAt,aggronly:!0}),r)}function cAt(e){e.forEach((t,n)=>t.field?e.set(n,b_t(t+"")):0)}function dAt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),WQ(e,hg(e,t,n))}function npe(e,t){return XQ(e,Ol(t,{table:e,aggronly:!0,window:!1}))}function fAt(e,t,n,r){return(t?r?pAt:hAt:r?gAt:mAt)(e.length,e,n,r)}function hAt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*xS()|0];return t}function pAt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=ake(GQ).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*xS())];return t}function mAt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*xS();s<e&&(t[s|0]=n[i])}return t}function gAt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(xS())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function yAt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=xS()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function vAt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,d)=>{let f=t(d);return a+=f=i?f:Math.min(c.length,f),f});const u=new Uint32Array(a);let l=0;return o.forEach((c,d)=>{const f=t[d],h=u.subarray(l,l+=f);!i&&f===c.length?h.set(c):fAt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&yAt(u),e.reify(u)}function bAt(e,t,n={}){return vAt(e,_At(e,t),wAt(e,n.weight),n)}const fke=e=>t=>e.get(t)||0;function _At(e,t){return $u(t)?()=>t:fke(XQ(e,Ol({size:t},{table:e,window:!1})).column("size"))}function wAt(e,t){return t==null?null:(t=$u(t)?e.columnName(t):t,fke(Aa(t)?e.column(t):KQ(e,Ol({w:t},{table:e}),{drop:!0}).column("w")))}function xAt(e,t){return WQ(e,hg(e,t))}function EAt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=a_(e,r,n),l=Lc(),c=t.reduce((f,h,p)=>f.set(h,p),new Map),d=(f,h)=>{const p=SAt(e,u[f],a),m=p.length;for(let y=0;y<m;++y)l.add(s[y]||`${h}_${y+1}`,p[y])};return e.columnNames().forEach(f=>{c.has(f)?(o||l.add(f,e.column(f)),d(c.get(f),f),c.delete(f)):l.add(f,e.column(f))}),c.forEach(d),e.create(l)}function SAt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Pl(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(Wr));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function TAt(e,t,n){return EAt(e,Uf("spread",e,t),n)}function CAt(e,t){return e.concat(t).dedupe()}function AAt(e,t,n){return lke(e,Uf("unroll",e,t),n&&n.drop?{...n,drop:Uf("unroll",e,n.drop).names}:n)}function IAt(e,t){return e.create({groups:RAt(e,t)})}function RAt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=a_(e,r,n);const o=M3(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],d=e.data(),f=e.mask();if(f)for(let h=f.next(0);h>=0;h=f.next(h+1)){const p=o(h,d)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,d)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,d))),{keys:u,get:s,names:t,rows:c,size:c.length}}function kAt(e,t){return IAt(e,Uf("groupby",e,t))}function PAt(e,t){return e.create({order:t})}const NAt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function OAt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=Ol(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=y=>`fn[${i.length}](${y}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([D3(p,{index:"a",op:o}),D3(p,{index:"b",op:a})])},window:!1}),l=OS(e,u),c=(h,p)=>l[h][p],d=n.length;let f="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<d;++h){const p=t.get(n[h]).desc?-1:1,[m,y]=r[h];f+=NAt(m,y,-p,p)}return f+="0;};",Function("op","keys","fn","data",f)(c,s,i,e.data())}function DAt(e,t){return PAt(e,MAt(e,t))}function MAt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(tu(o)&&!es(o))for(const a in o)i(o[a]);else i($u(o)?xb(s,e.columnName(o)):Aa(o)?xb(s):es(o)?s:sr(`Invalid orderby field: ${s+""}`))}),OAt(e,r)}function $At(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=Lc();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>Wr};l.scan(d=>a[u++]=c.get(d))}),s.add(o,a)}),e.create(s.new())}function LAt(e,t){const n=Lc(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(f=>n.add(f,null));const l=r?ske(e,t,r):[ike(e,t)];t.outputs().map(f=>n.add(f,[]));const c=u.length-1;let d=0;for(let f=0;f<c;++f)d+=u[f+1]=t.write(l[f],n.data,u[f]);if(r){const f=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(d),y=i[p];for(let v=0,w=0;v<a;++v)m.fill(y(o[v],f),w,w+=u[v+1])})}return e.create(n.new())}function FAt(e){return e.isGrouped()?e.create({groups:null}):e}function jAt(e){return e.isOrdered()?e.create({order:null}):e}const BAt={__antijoin:(e,t,n)=>tpe(e,t,n,{anti:!0}),__count:(e,t={})=>npe(e,{[t.as||"count"]:__t()}),__cross:(e,t,n,r)=>Zhe(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:$At,__dedupe:hCt,__derive:NCt,__except:OCt,__filter:$Ct,__fold:FCt,__impute:UCt,__intersect:HCt,__join:Zhe,__lookup:sAt,__pivot:lAt,__relocate:nke,__rename:dAt,__rollup:npe,__sample:bAt,__select:xAt,__semijoin:tpe,__spread:TAt,__union:CAt,__unroll:AAt,__groupby:kAt,__orderby:DAt,__ungroup:FAt,__unorder:jAt,__reduce:LAt};Object.assign(M0.prototype,BAt);function zAt(e,t){return M0.from(e,t)}function UAt(e){return P6(e,{escape:!0,toString(){sr("Escaped values can not be serialized.")}})}const Qd={top:30,left:60,bottom:50};function hke({data:e,selection:t,parameters:n,dataname:r}){const o=P.useMemo(()=>{const c=e.map(d=>({...d,value:+d[n.y_var]}));return zAt(c)},[e,n]),a=P.useMemo(()=>{const c=nc(o.filter(UAt(d=>t.includes(d[n.cat_var]))).array("value"));return r==="clean_stocks"?c:[0,c[1]]},[o,t,n,r]),u=P.useMemo(()=>ld([Qd.top,400-Qd.bottom]).domain(nc(o.array("value")).reverse()),[o,400]),l=ip(r==="clean_stocks"?".0%":",.0f");return(t==null?void 0:t.length)===0?null:_.jsxs("svg",{style:{height:"400px",width:"60px",overflow:"visible"},children:[_.jsx("rect",{y:u(a[1]),height:u(a[0])-u(a[1]),x:Qd.left-10,width:10,opacity:.1,fill:"black"}),_.jsx("text",{style:{fontSize:10,dominantBaseline:"middle",textAnchor:"middle",fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif'},x:25,y:Qd.top-5,children:l(u.domain()[0])}),_.jsx("text",{style:{fontSize:10,dominantBaseline:"middle",textAnchor:"middle",fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif'},x:25,y:400-Qd.bottom+8,children:l(u.domain()[1])}),_.jsx("text",{style:{fontSize:10,dominantBaseline:"middle",fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif'},x:Qd.left-5,y:u(a[0]),children:l(a[0])}),_.jsx("text",{style:{fontSize:10,dominantBaseline:"middle",fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif'},x:Qd.left-5,y:u(a[1]),children:l(a[1])}),e.map(c=>_.jsx("rect",{opacity:.2,fill:+c[n.y_var]>0?"steelblue":"firebrick",x:0,width:50,y:u(+c[n.y_var]),height:1},"strip")),_.jsx("line",{strokeWidth:2,stroke:"black",style:{fontSize:10,dominantBaseline:"middle"},x1:0,x2:50,y1:u(a[0]),y2:u(a[0])}),_.jsx("line",{strokeWidth:2,stroke:"black",x1:0,x2:50,y1:u(a[1]),y2:u(a[1])}),_.jsx("line",{strokeWidth:2,stroke:"black",x1:0,x2:0,y1:u(a[1]),y2:u(a[0])}),_.jsx("line",{strokeWidth:2,stroke:"black",x1:50,x2:50,y1:u(a[1]),y2:u(a[0])}),_.jsx("path",{fill:"black",opacity:"0.1",d:`M${Qd.left}, ${u(a[1])} L 113, ${Qd.top} L 113, ${400-Qd.bottom} L ${Qd.left}, ${u(a[0])}`})]})}const VAt=Object.freeze(Object.defineProperty({__proto__:null,StripPlot:hke},Symbol.toStringTag,{value:"Module"}));function rpe({parameters:e,setAnswer:t}){const[n,r]=P.useState(null),[i,s]=P.useState(e.dataset),[o,a]=P.useState(e.initial_selection),[u,l]=P.useState(null),[c,d]=P.useState([new Date(e.start_date),new Date(e.end_date)]),[f,h]=P.useState(e.guardrail);P.useEffect(()=>{Lpt(`${$c}stage-2/data/${i}.csv`).then(E=>{r(E),l(Array.from(new Set(E.map(T=>JSON.stringify({name:T[e.cat_var],group:T[e.group_var]})))).map(T=>JSON.parse(T)))})},[i,e]);const p=P.useMemo(()=>n&&c?n.filter(E=>new Date(E[e.x_var]).getTime()>=c[0].getTime()).filter(E=>new Date(E[e.x_var]).getTime()<=c[1].getTime()):null,[n,c,e.x_var,i]),m=E=>{s(E),a([])},{actions:y,trrack:v}=P.useMemo(()=>{const E=H2.create(),T=E.register("selection",(k,D)=>(k.selection=D,k)),A=E.register("range",(k,D)=>(k.range=D,k)),I=LV({registry:E,initialState:{selection:[],range:[e.start_date,e.end_date]}});return{actions:{selection:T,range:A},trrack:I}},[e.end_date,e.start_date]),w=P.useCallback(E=>{v.apply("Change daterange",y.range([E[0].toISOString().slice(0,10),E[1].toISOString().slice(0,10)]))},[v,y]),x=P.useMemo(()=>of(w,200),[w]),S=P.useCallback(E=>{v.apply("Change selection",y.selection(E)),t({status:!0,provenanceGraph:v.graph.backend,answers:{}})},[v,y,t]);return p&&u&&c&&o?_.jsxs(ao,{pb:50,children:[e.allow_guardrail_selector?_.jsx(ub,{shadow:"sm",radius:"md",p:"md",style:{width:"500px"},children:_.jsx(zV,{guardrail:f,setGuardrail:h,dataname:i,setDataname:m,setSelection:a})}):null,_.jsx(Gt,{children:_.jsxs(ub,{shadow:"md",radius:"md",p:"md",withBorder:!0,children:[e.caption===""?null:_.jsx(Gt,{style:{width:"800px"},mb:"xl",children:_.jsx(BG,{children:e.caption})}),_.jsxs(gr,{wrap:"nowrap",children:[e.allow_selection===!1&&e.guardrail!=="juxt_data"?null:_.jsx(gr,{wrap:"nowrap",children:_.jsx(jV,{parameters:e,data:p,dataname:i,items:u,selection:o,setSelection:a,trackSelection:S,range:c,guardrail:f})}),e.allow_selection===!1&&e.guardrail!=="juxt_data"?null:_.jsx(ty,{orientation:"vertical",size:"xs"}),_.jsxs(ao,{children:[_.jsx(gr,{justify:"apart",children:_.jsxs(ao,{gap:0,justify:"flex-start",children:[_.jsx(dt,{fw:600,children:i==="clean_stocks"?"Percent change in stock price":"Infections per million people"}),f==="super_summ"?_.jsx(dt,{fz:"xs",c:"dimmed",children:"Shaded area represents the middle 50% of all values."}):null,f==="juxt_summ"?_.jsx(dt,{fz:"xs",c:"dimmed",children:"Bar on the left highlights the range of selection among all data."}):null]})}),_.jsxs(ao,{children:[_.jsxs(gr,{wrap:"nowrap",children:[f==="juxt_summ"?_.jsx(hke,{parameters:e,data:p,selection:o,dataname:i}):null,_.jsx(FV,{parameters:e,data:p,dataname:i,items:u,selection:o,range:c,guardrail:f})]}),e.allow_time_slider?_.jsx("div",{style:{width:"500px"},children:_.jsx(BV,{parameters:e,setRange:d,trackRange:x})}):null]})]})]})]})})]}):_.jsx(io,{})}const HAt=Object.freeze(Object.defineProperty({__proto__:null,DataExplorer:rpe,default:rpe},Symbol.toStringTag,{value:"Module"}));function qAt({parameters:e}){const t=e.dataset==="clean_data"?_.jsxs(Xw,{children:["Select any subset of countries to the left of the visualization to support the prompt at the top of the page.",_.jsx("h4",{children:"Background:"}),"You live in a fantasy world that consists of your home country, as well as other 15 countries located across 5 continents: Eldoril, Thundoril, Aerion, Silvoria, and Mystara. Countries within each continent are similar to each other in size and demographics.",_.jsx("h4",{children:"Scenario:"}),"You are an analyst for the Viral Disease Policy Center of your home country at time when there is a new viral disease called",_.jsx("i",{children:" Celestial Sniffles"}),". Luckily, your country has not been affected yet and has time to prepare and decide on a policy to combat it. You have access to the infection data from other countries that implemented one of the 3 available policies: A, B, or C. However, due to socioeconomic factors, the Surgeon General in your country has",_.jsx("i",{children:" already decided on a policy"}),".",_.jsx("h4",{children:"Task:"}),"You are tasked with leading the promotion efforts that make the case for the chosen policy. In the experiment, you will use an interactive data explorer that shows infection data from other countries. You should select a view that best shows (and convinces the population) that your country's"," ",_.jsx("b",{children:"chosen policy is the best policy to combat the disease"}),". After finalizing the view, click the camera button and add a caption or a slogan that will go along with your visualization."]}):_.jsxs(Xw,{children:["Select any subset of stocks to the left of the visualization to support the prompt at the top of the page.",_.jsx("h4",{children:"Scenario:"})," ","You are a financial advisor. Your client approached you asking for help in picking a new investmentan industry fund that equally invests within a single industry. The client prefers to make their decisions"," ",_.jsx("i",{children:"solely based on the data"}),", and not based on any inside knowledge about the type of industry. However, your boss"," ",_.jsx("i",{children:"does"})," ","have inside knowledge and orders you to recommend a specific industry (which is ultimately in the best interest of the client). You cannot disclose this to the client and have to use data to support your recommendations.",_.jsx("h4",{children:"Task:"})," ","In the experiment, you will use an interactive data explorer that shows performance of different stocks from a variety of industries. You should select a view that best shows (and convinces your client) that"," ",_.jsx("b",{children:"the chosen industry fund would be the best investment with the highest returns"}),". After finalizing the view, click the camera button and add a caption or a slogan that will go along with your visualization."]}),n=e.dataset==="clean_data"?_.jsxs(Xw,{children:[_.jsx("h4",{children:"Background:"}),"You live in a fantasy world that consists of your home country, as well as other 15 countries located across 5 continents: Eldoril, Thundoril, Aerion, Silvoria, and Mystara. Countries within each continent are similar to each other in size and demographics.",_.jsx("h4",{children:"Scenario:"}),"There's a new viral disease called"," ",_.jsx("i",{children:"Celestial Sniffles"}),". Most countries in the world have adopted one of 3 major disease containment policies: A, B, or C. Luckily, your country has not been affected yet but you may need to travel to one of the affected countries for work. Afraid of getting sick and stuck abroad with a huge hospital bill, you decide to purchase a traveler's health insurance policy. The price of the policy is very flexible and depends on the amount of coverage you'll get: anywhere between $0 (no coverage) to $100 (full coverage). Since you are not familiar with the disease trends or containment policies, you turn to social media to read what people shared about recent infection rates.",_.jsx("h4",{children:"Task:"}),"In the experiment, you will see a set of visualizations that show infection rates in different countries that adopted one of the containment policies A, B, or C. You can refer to the list of countries to the left of the visualization to see which country adopted which Policy. Based on each visualization, you will be asked to decide"," ",_.jsx("b",{children:"how much to spend on your insurance policy"})," ","and"," ",_.jsx("b",{children:"answer a short survey"}),"."]}):_.jsxs(Xw,{children:[_.jsx("h4",{children:"Scenario:"}),"You have $100 that you would like to invest in"," ",_.jsx("i",{children:"industry funds"})," ","but are not sure how to best allocate that money. An industry fund is composed of all individual stocks pertaining to that industry (e.g., a Pharma fund is composed of Pharma A, Pharma B, and Pharma C stocks). Since you are not familiar with the current market, you turn to social media to read what people shared about recent stock performance.",_.jsx("h4",{children:"Task:"}),"In the experiment, you will see a set of visualizations that show performance of different stocks from a variety of industries. Based on each visualization, you will be asked to decide"," ",_.jsx("b",{children:"how much to invest in a given industry fund"})," ","and"," ",_.jsx("b",{children:"answer a short survey"}),"."]});return _.jsx(gr,{justify:"right",children:_.jsxs(Y1,{width:800,shadow:"md",children:[_.jsx(Y1.Target,{children:_.jsx(Zn,{variant:"light",color:"gray",size:"compact-sm",children:"Help"})}),_.jsx(Y1.Dropdown,{children:_.jsx(dt,{size:"sm",children:e.allow_selection?t:n})})]})})}const WAt=Object.freeze(Object.defineProperty({__proto__:null,Help:qAt},Symbol.toStringTag,{value:"Module"}));var AD={exports:{}},GAt=AD.exports,ipe;function YAt(){return ipe||(ipe=1,function(e,t){(function(n,r){e.exports=r()})(typeof self<"u"?self:GAt,()=>(()=>{var n={d:(c,d)=>{for(var f in d)n.o(d,f)&&!n.o(c,f)&&Object.defineProperty(c,f,{enumerable:!0,get:d[f]})},o:(c,d)=>Object.prototype.hasOwnProperty.call(c,d),r:c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})}},r={};function i(c){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},i(c)}function s(c){return function(d){if(Array.isArray(d))return o(d)}(c)||function(d){if(typeof Symbol<"u"&&d[Symbol.iterator]!=null||d["@@iterator"]!=null)return Array.from(d)}(c)||function(d,f){if(d){if(typeof d=="string")return o(d,f);var h=Object.prototype.toString.call(d).slice(8,-1);if(h==="Object"&&d.constructor&&(h=d.constructor.name),h==="Map"||h==="Set")return Array.from(d);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return o(d,f)}}(c)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function o(c,d){(d==null||d>c.length)&&(d=c.length);for(var f=0,h=new Array(d);f<d;f++)h[f]=c[f];return h}function a(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function u(c,d){for(var f=0;f<d.length;f++){var h=d[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(c,(p=h.key,m=void 0,m=function(y,v){if(i(y)!=="object"||y===null)return y;var w=y[Symbol.toPrimitive];if(w!==void 0){var x=w.call(y,v);if(i(x)!=="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(y)}(p,"string"),i(m)==="symbol"?m:String(m)),h)}var p,m}n.r(r),n.d(r,{default:()=>l});var l=function(){function c(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=h.sampleRate;a(this,c),this._context=this._createContext(p),p||(p=this._context.sampleRate),this._sampleRate=p}var d,f;return d=c,f=[{key:"_createContext",value:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:44100;return window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,new AudioContext({sampleRate:h})}},{key:"context",get:function(){return this._context}},{key:"fetchAudio",value:async function(){for(var h=this,p=arguments.length,m=new Array(p),y=0;y<p;y++)m[y]=arguments[y];return await Promise.all(m.map(async function(v){var w;return w=v instanceof File||v instanceof Blob?await v.arrayBuffer():await fetch(v).then(function(x){return x.headers.has("Content-Type")&&!x.headers.get("Content-Type").includes("audio/")&&console.warn("Crunker: Attempted to fetch an audio file, but its MIME type is `".concat(x.headers.get("Content-Type").split(";")[0],"`. We'll try and continue anyway. (file: \"").concat(v,'")')),x.arrayBuffer()}),await h._context.decodeAudioData(w)}))}},{key:"mergeAudio",value:function(h){var p=this._context.createBuffer(this._maxNumberOfChannels(h),this._sampleRate*this._maxDuration(h),this._sampleRate);return h.forEach(function(m){for(var y=0;y<m.numberOfChannels;y++){for(var v=p.getChannelData(y),w=m.getChannelData(y),x=m.getChannelData(y).length-1;x>=0;x--)v[x]+=w[x];p.getChannelData(y).set(v)}}),p}},{key:"concatAudio",value:function(h){var p=this._context.createBuffer(this._maxNumberOfChannels(h),this._totalLength(h),this._sampleRate),m=0;return h.forEach(function(y){for(var v=0;v<y.numberOfChannels;v++)p.getChannelData(v).set(y.getChannelData(v),m);m+=y.length}),p}},{key:"padAudio",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(m===0)return h;if(p<0)throw new Error('Crunker: Parameter "padStart" in padAudio must be positive');if(m<0)throw new Error('Crunker: Parameter "seconds" in padAudio must be positive');for(var y=this._context.createBuffer(h.numberOfChannels,Math.ceil(h.length+m*h.sampleRate),h.sampleRate),v=0;v<h.numberOfChannels;v++){var w=h.getChannelData(v);y.getChannelData(v).set(w.subarray(0,Math.ceil(p*h.sampleRate)+1),0),y.getChannelData(v).set(w.subarray(Math.ceil(p*h.sampleRate)+2,y.length+1),Math.ceil((p+m)*h.sampleRate))}return y}},{key:"sliceAudio",value:function(h,p,m){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(p>=m)throw new Error('Crunker: "start" time should be less than "end" time in sliceAudio method');for(var w=Math.round((m-p)*this._sampleRate),x=Math.round(p*this._sampleRate),S=this._context.createBuffer(h.numberOfChannels,w,this._sampleRate),E=0;E<h.numberOfChannels;E++)for(var T=h.getChannelData(E),A=S.getChannelData(E),I=0;I<w;I++)A[I]=T[x+I],I<y*this._sampleRate&&(A[I]*=I/(y*this._sampleRate)),I>w-v*this._sampleRate&&(A[I]*=(w-I)/(v*this._sampleRate));return S}},{key:"play",value:function(h){var p=this._context.createBufferSource();return p.buffer=h,p.connect(this._context.destination),p.start(),p}},{key:"export",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"audio/wav",m=this._interleave(h),y=this._writeHeaders(m,h.numberOfChannels,h.sampleRate),v=new Blob([y],{type:p});return{blob:v,url:this._renderURL(v),element:this._renderAudioElement(v)}}},{key:"download",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"crunker",m=document.createElement("a");return m.style.display="none",m.href=this._renderURL(h),m.download="".concat(p,".").concat(h.type.split("/")[1]),m.click(),m}},{key:"notSupported",value:function(h){return this._isSupported()?void 0:h()}},{key:"close",value:function(){return this._context.close(),this}},{key:"_maxDuration",value:function(h){return Math.max.apply(Math,s(h.map(function(p){return p.duration})))}},{key:"_maxNumberOfChannels",value:function(h){return Math.max.apply(Math,s(h.map(function(p){return p.numberOfChannels})))}},{key:"_totalLength",value:function(h){return h.map(function(p){return p.length}).reduce(function(p,m){return p+m},0)}},{key:"_isSupported",value:function(){return"AudioContext"in window||"webkitAudioContext"in window||"mozAudioContext"in window}},{key:"_writeHeaders",value:function(h,p,m){var y=2*p,v=2*h.length,w=36+v,x=new ArrayBuffer(8+w),S=new DataView(x);return this._writeString(S,0,"RIFF"),S.setUint32(4,w,!0),this._writeString(S,8,"WAVE"),this._writeString(S,12,"fmt "),S.setUint32(16,16,!0),S.setUint16(20,1,!0),S.setUint16(22,p,!0),S.setUint32(24,m,!0),S.setUint32(28,m*y,!0),S.setUint16(32,y,!0),S.setUint16(34,16,!0),this._writeString(S,36,"data"),S.setUint32(40,v,!0),this._floatTo16BitPCM(S,h,44)}},{key:"_floatTo16BitPCM",value:function(h,p,m){for(var y=0;y<p.length;y++,m+=2){var v=Math.max(-1,Math.min(1,p[y]));h.setInt16(m,v<0?32768*v:32767*v,!0)}return h}},{key:"_writeString",value:function(h,p,m){for(var y=0;y<m.length;y++)h.setUint8(p+y,m.charCodeAt(y))}},{key:"_interleave",value:function(h){if(h.numberOfChannels===1)return h.getChannelData(0);for(var p=[],m=0;m<h.numberOfChannels;m++)p.push(h.getChannelData(m));for(var y=p.reduce(function(S,E){return S+E.length},0),v=new Float32Array(y),w=0,x=0;w<y;)p.forEach(function(S){v[w++]=S[x]}),x++;return v}},{key:"_renderAudioElement",value:function(h){var p=document.createElement("audio");return p.controls=!0,p.src=this._renderURL(h),p}},{key:"_renderURL",value:function(h){return(window.URL||window.webkitURL).createObjectURL(h)}}],f&&u(d.prototype,f),Object.defineProperty(d,"prototype",{writable:!1}),c}();return r})())}(AD)),AD.exports}var KAt=YAt();const XAt=su(KAt),aO=3,vw=25,uO=25,lO=20,spe=1;function QAt({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:s,labelHeight:o=0}){const[a,u]=P.useState(!1),[l,{width:c}]=_L();return _.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),style:{cursor:"pointer"},children:[_.jsx("rect",{opacity:1,fill:a||s?"cornflowerblue":"lightgray",x:e(t.startTime)+spe,width:e(t.endTime)-e(t.startTime)-spe*2,y:r-vw,height:vw}),_.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-aO,width:c+aO*2,y:r-vw-uO-o,height:lO,fill:"whitesmoke"}),_.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-aO,x2:c+e(t.startTime)+aO,y1:r-vw-uO+lO-o,y2:r-vw-uO+lO-o}),_.jsx("foreignObject",{x:e(t.startTime),width:c,y:r-vw-uO-o,height:lO,children:_.jsx(Il,{style:{width:"fit-content"},children:_.jsx(dt,{lineClamp:1,ref:l,mx:0,style:{width:"fit-content",fontWeight:600},size:"12px",children:n})})})]})}function JAt({xScale:e,answer:t,height:n,labelHeight:r=0}){return _.jsx("g",{children:_.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const ope=25,ZAt=8;function pke({xScale:e,participantData:t,width:n,height:r,setSelectedTask:i,trialFilter:s}){const{analysisTrialName:o}=Ea(l=>l),a=P.useMemo(()=>{let l=0;const c=Object.entries(t.answers||{}).filter(d=>s?d[0]===s:!0).sort((d,f)=>d[1].startTime-f[1].startTime);return c.map((d,f)=>{const[h,p]=d,m=f>0?c[f-l-1]:null;return m&&m[0].length*ZAt+e(m[1].startTime)>e(p.startTime)?l+=1:l=0,{line:_.jsx(JAt,{labelHeight:l*ope,answer:p,height:r,xScale:e},h),label:_.jsx(QAt,{labelHeight:l*ope,isSelected:s?!1:o===h,setSelectedTask:i,answer:p,height:r,name:h,xScale:e},h)}})},[r,t.answers,o,i,s,e]),u=P.useMemo(()=>Object.entries(t.answers||{}).sort((c,d)=>c[1].startTime-d[1].startTime).map(c=>{const[d,f]=c,h=[];let p=[-1,-1],m="visible";if(f.windowEvents)for(let y=0;y<f.windowEvents.length;y+=1)f.windowEvents[y][1]==="visibility"&&(f.windowEvents[y][2]==="hidden"&&m==="visible"?(p=[f.windowEvents[y][0],-1],m="hidden"):f.windowEvents[y][2]==="visible"&&m==="hidden"&&(p[1]=f.windowEvents[y][0],h.push(p),p=[-1,-1],m="visible"));return h.map((y,v)=>_.jsx(jn,{withinPortal:!0,label:"Browsed away",children:_.jsx("rect",{x:e(y[0]),width:e(y[1])-e(y[0]),y:r-5,height:10})},v))}),[r,t,e]);return s?null:_.jsxs("svg",{style:{width:n,height:r,overflow:"visible"},children:[a.map(l=>l.line),a.map(l=>l.label),u]})}function e2t({cx:e,cy:t,r:n,color:r}){return _.jsx("circle",{cx:e,cy:t,r:n,fill:r})}function t2t({xScale:e,answer:t,height:n,currentNode:r,setCurrentNode:i,taskName:s}){return _.jsxs("g",{style:{cursor:"pointer"},children:[t.provenanceGraph?Object.entries(t.provenanceGraph.nodes).map(o=>{const[a,u]=o;return _.jsx("g",{onClick:()=>i(a,u.createdOn,s),children:_.jsx(e2t,{color:a===r?"cornflowerblue":"lightgray",cx:e(u.createdOn),cy:n/2,r:5})},a)}):null,r&&t.provenanceGraph&&t.provenanceGraph.nodes[r]?_.jsx("circle",{fill:"cornflowerblue",cx:e(t.provenanceGraph.nodes[r].createdOn),cy:n/2,r:5}):null]})}const ape={left:5};function n2t({xScale:e,participantData:t,width:n,height:r,currentNode:i,setCurrentNode:s,playTime:o,setPlayTime:a,isPlaying:u,setIsPlaying:l,setSelectedTask:c}){const d=P.useMemo(()=>e.domain()[1]-e.domain()[0],[e]),{index:f}=Ff(),h=nh(),p=f?h:null,m=P.useMemo(()=>!p||!t?null:Object.keys(t.answers).find(w=>w.startsWith(p))||null,[t,p]);P.useEffect(()=>{if(!m||!t)return;const w=t.answers[m].provenanceGraph;if(!w)return;const{startTime:x}=t.answers.introduction_0,S=x+o;if(!i||!w.nodes[i]){s(w.root);return}let E=w.nodes[i];for(;;)if(S<E.createdOn){if(Q1t(E))break;{const T=E.parent;if(S<w.nodes[T].createdOn)E=w.nodes[T];else break}}else if(E.children.length>0){const T=E.children[0];if(S>w.nodes[T].createdOn)E=w.nodes[T];else break}else break;E.id!==i&&s(E.id)},[i,t,o,s,m]);const y=P.useCallback((w,x)=>{a(x,(x-e.domain()[0])/d),s(w)},[s,a,d,e]),v=P.useMemo(()=>Object.entries(t.answers).filter(w=>m?m===w[0]:!0).map(w=>{const[x,S]=w;return _.jsx(t2t,{taskName:x,answer:S,height:r,currentNode:i,setCurrentNode:y,xScale:e},x)}),[i,y,r,t.answers,m,e]);return _.jsx(ao,{children:_.jsxs("svg",{style:{width:n,height:r},children:[_.jsx("line",{stroke:"black",strokeWidth:1,x1:ape.left,x2:n+ape.left,y1:r/2,y2:r/2}),v]})})}function Hw(e){const t=P.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return P.useLayoutEffect(()=>{t.current=e}),P.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}const upe={top:5};function r2t({transcriptLines:e,xScale:t,startTime:n,currentShownTranscription:r}){const i=P.useMemo(()=>e.map(s=>_.jsxs("g",{children:[_.jsx("line",{stroke:r>=s.lineStart&&r<=s.lineEnd?"cornflowerblue":"lightgray",strokeWidth:5,y1:upe.top,y2:upe.top,x1:t(n+s.start*1e3)+2,x2:t(n+s.end*1e3)-2}),s.tags.map((o,a)=>_.jsx("g",{children:o.map((u,l)=>{const c=t(n+s.start*1e3),d=t(n+s.end*1e3);return u?_.jsx("foreignObject",{x:c+(d-c)/s.tags.length*(a+.5)-6+(-(o.length-1)*15/2+l*15),y:30,height:"20px",width:"20px",children:_.jsx(jn,{label:u.name,withArrow:!0,arrowSize:6,children:_.jsx(ep,{size:12,color:u.color})})},u.name):null})},a))]},s.start)),[r,n,e,t]);return _.jsx("svg",{style:{width:"100%",height:"50px"},children:i})}function mke({selectedTags:e,removeFunc:t,isLink:n=!1,participantId:r="",currentTask:i="",size:s="md"}){return e.map((o,a)=>{if(!o||!o.id)return null;const u=R2(o.color).l;return _.jsx(jn,{label:o.name,withinPortal:!0,children:_.jsx(cb,{size:s,component:n?MY:null,style:{width:"80px"},to:`${$c}ThinkAloud/analysis/${r}/ui/reviewer-${i}`,target:"_blank",withRemoveButton:!!t,styles:{root:{backgroundColor:o.color,color:u>.7?"black":"white"}},onRemove:()=>t?t(o.id):null,children:o.name},o.id+a)},r+i+a)})}function GA({tags:e,selectedTags:t,onSelectTags:n,disabled:r=!1,taskTags:i,partTags:s}){const o=XI(),a=h=>n([...t,[...e,...i||[],...s||[]].find(p=>p.id===h)]),u=h=>n(t.filter(p=>p!==void 0&&p.id!==h)),l=_.jsx(mke,{selectedTags:t,removeFunc:u}),c=e.filter(h=>h!==void 0&&!t.find(p=>p&&p.id===h.id)).map(h=>_.jsx(An.Option,{value:h.id,children:_.jsxs(gr,{gap:"sm",children:[_.jsx(ep,{size:10,color:h.color}),_.jsx("span",{children:h.name})]})},h.id)),d=i?i.filter(h=>!t.find(p=>p.id===h.id)).map(h=>_.jsx(An.Option,{value:h.id,children:_.jsxs(gr,{gap:"sm",children:[_.jsx(ep,{size:10,color:h.color}),_.jsx("span",{children:h.name})]})},h.id)):null,f=s?s.filter(h=>!t.find(p=>p.id===h.id)).map(h=>_.jsx(An.Option,{value:h.id,children:_.jsxs(gr,{gap:"sm",children:[_.jsx(ep,{size:10,color:h.color}),_.jsx("span",{children:h.name})]})},h.id)):null;return _.jsxs(An,{disabled:r,width:300,store:o,onOptionSubmit:a,withinPortal:!0,children:[_.jsx(An.DropdownTarget,{children:_.jsx(Wx,{style:{width:"400px"},pointer:!0,onClick:()=>o.toggleDropdown(),children:_.jsxs(cb.Group,{children:[t.length>0?l:_.jsx(Ti.Placeholder,{children:"Add tags"}),_.jsx(An.EventsTarget,{children:_.jsx(Wx.Field,{type:"hidden",onBlur:()=>o.closeDropdown()})})]})})}),_.jsx(An.Dropdown,{children:_.jsxs(An.Options,{children:[c.length===0?_.jsx(An.Empty,{children:"No additional tags"}):i||s?_.jsx(An.Group,{label:"Text Tags",children:c}):c,i?_.jsx(An.Group,{label:"Task Tags",children:d}):null,s?_.jsx(An.Group,{label:"Participant Tags",children:f}):null]})})]})}function i2t({annotation:e,setAnnotation:t,start:n,current:r,end:i,text:s,tags:o,selectedTags:a,onTextChange:u,deleteRowCallback:l,addRowCallback:c,onSelectTags:d,addRef:f}){const[h,p]=P.useState(e);return _.jsxs(gr,{justify:"space-between",style:{width:"100%"},wrap:"nowrap",children:[_.jsx(gr,{wrap:"nowrap",gap:0,style:{width:"100%",backgroundColor:r>=n&&r<=i?"rgba(100, 149, 237, 0.3)":"white"},children:_.jsx(m2,{ref:m=>m?f(m):null,autosize:!0,minRows:1,maxRows:3,style:{width:"100%"},variant:"unstyled",value:s,onChange:m=>{u(m.currentTarget.value)},onKeyDown:m=>{m.key==="Enter"&&m.currentTarget.selectionStart!==null?c(m.currentTarget.selectionStart):m.key==="Backspace"&&m.currentTarget.selectionStart===0&&m.currentTarget.selectionEnd===0&&(l(),m.preventDefault(),m.stopPropagation())}})}),_.jsxs(gr,{wrap:"nowrap",style:{width:"300px"},children:[_.jsx(ty,{orientation:"vertical",size:"xs"}),_.jsx(GA,{onSelectTags:d,selectedTags:a,tags:o}),_.jsxs(Ln,{children:[_.jsx(Ln.Target,{children:_.jsx(HXe,{style:{color:e.length>0?"cornflowerblue":"lightgray",cursor:"pointer"}})}),_.jsx(Ln.Dropdown,{children:_.jsx(m2,{value:h,onChange:m=>p(m.currentTarget.value),placeholder:"Add Annotation",onBlur:()=>t(h)})})]})]})]})}var ca=[];for(var G9=0;G9<256;++G9)ca.push((G9+256).toString(16).slice(1));function s2t(e,t=0){return(ca[e[t+0]]+ca[e[t+1]]+ca[e[t+2]]+ca[e[t+3]]+"-"+ca[e[t+4]]+ca[e[t+5]]+"-"+ca[e[t+6]]+ca[e[t+7]]+"-"+ca[e[t+8]]+ca[e[t+9]]+"-"+ca[e[t+10]]+ca[e[t+11]]+ca[e[t+12]]+ca[e[t+13]]+ca[e[t+14]]+ca[e[t+15]]).toLowerCase()}var cO,o2t=new Uint8Array(16);function a2t(){if(!cO&&(cO=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!cO))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return cO(o2t)}var u2t=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const lpe={randomUUID:u2t};function nI(e,t,n){if(lpe.randomUUID&&!e)return lpe.randomUUID();e=e||{};var r=e.random||(e.rng||a2t)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,s2t(r)}function cpe({addTagCallback:e,currentNames:t,editTag:n=!1,editableTag:r}){const[i,s]=P.useState(n?r.name:""),[o,a]=P.useState(n?r.color:"#fd7e14"),u=P.useCallback(()=>{const l=nI();e({color:o,name:i,id:l})},[e,o,i]);return _.jsxs(ao,{gap:"xs",children:[_.jsxs(gr,{children:[_.jsx(ep,{color:o}),_.jsx(Af,{required:!0,placeholder:"Enter tag name",value:i,onChange:l=>s(l.currentTarget.value),error:t.includes(i)&&(!n||r.name!==i)?"Tag with this name already exists":null})]}),_.jsx(YG,{withPicker:n,style:{width:"100%"},value:o,onChange:l=>a(l),swatches:["#2e2e2e","#868e96","#fa5252","#e64980","#be4bdb","#7950f2","#4c6ef5","#228be6","#15aabf","#12b886","#40c057","#82c91e","#fab005","#fd7e14"]}),_.jsx(Zn,{disabled:n&&o===r.color&&(i.length===0||t.includes(i)),size:"compact-sm",onClick:()=>u(),children:n?"Edit Tag":"Add Tag"})]})}function fH({createTagCallback:e,editTagCallback:t,tags:n,email:r=""}){const[i,s]=P.useState(!1);return _.jsxs(Ln,{withinPortal:!1,children:[_.jsx(Ln.Target,{children:_.jsxs(ao,{justify:"center",style:{width:"300px",cursor:"pointer"},children:[_.jsxs(gr,{children:[_.jsx($Xe,{}),_.jsx(dt,{children:"Tags"})]}),r?_.jsx(dt,{ta:"center",style:{justifyContent:"end",alignContent:"end"},c:"dimmed",children:r}):null]})}),n?_.jsx(Ln.Dropdown,{children:_.jsxs(ao,{style:{width:"300px"},gap:"xs",children:[n.length===0?_.jsx(dt,{color:"dimmed",children:"No tags found. Create new tags below."}):null,n.map(o=>_.jsxs(gr,{justify:"space-between",children:[_.jsxs(gr,{children:[_.jsx(ep,{color:o.color}),_.jsx(dt,{children:o.name})]}),_.jsxs(Ln,{trapFocus:!0,withinPortal:!1,children:[_.jsx(Ln.Target,{children:_.jsx(_we,{color:"lightgray"})}),_.jsx(Ln.Dropdown,{children:_.jsx(cpe,{editTag:!0,currentNames:n.map(a=>a.name),addTagCallback:a=>{t(o,{...a,id:o.id})},editableTag:o})})]})]},o.id)),_.jsxs(Ln,{trapFocus:!0,opened:i,withinPortal:!1,children:[_.jsx(Ln.Target,{children:_.jsx(Zn,{variant:"light",onClick:()=>s(!i),children:"Create new tag"})}),_.jsx(Ln.Dropdown,{children:_.jsx(cpe,{currentNames:n.map(o=>o.name),addTagCallback:o=>{s(!1),e(o)}})})]})]})}):_.jsx(io,{})]})}var dpe={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gke=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},l2t=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},JQ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(f=64)),r.push(n[c],n[d],n[f],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(gke(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):l2t(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const d=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new c2t;const f=s<<2|a>>4;if(r.push(f),l!==64){const h=a<<4&240|l>>2;if(r.push(h),d!==64){const p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class c2t extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const d2t=function(e){const t=gke(e);return JQ.encodeByteArray(t,!0)},i$=function(e){return d2t(e).replace(/\./g,"")},yke=function(e){try{return JQ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vke(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2t=()=>vke().__FIREBASE_DEFAULTS__,h2t=()=>{if(typeof process>"u"||typeof dpe>"u")return;const e=dpe.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},p2t=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&yke(e[1]);return t&&JSON.parse(t)},N6=()=>{try{return f2t()||h2t()||p2t()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},bke=e=>{var t,n;return(n=(t=N6())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},m2t=e=>{const t=bke(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},_ke=()=>{var e;return(e=N6())===null||e===void 0?void 0:e.config},wke=e=>{var t;return(t=N6())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2t(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[i$(JSON.stringify(n)),i$(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function y2t(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ta())}function v2t(){var e;const t=(e=N6())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function b2t(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function _2t(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function w2t(){const e=Ta();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function x2t(){return!v2t()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ZQ(){try{return typeof indexedDB=="object"}catch{return!1}}function E2t(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2t="FirebaseError";class Vp extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=S2t,Object.setPrototypeOf(this,Vp.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,DS.prototype.create)}}class DS{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?T2t(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Vp(i,a,r)}}function T2t(e,t){return e.replace(C2t,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const C2t=/\{\$([^}]+)}/g;function A2t(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function iI(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(fpe(s)&&fpe(o)){if(!iI(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function fpe(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function I2t(e,t){const n=new R2t(e,t);return n.subscribe.bind(n)}class R2t{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");k2t(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=Y9),i.error===void 0&&(i.error=Y9),i.complete===void 0&&(i.complete=Y9);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function k2t(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Y9(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2t=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2t=1e3,O2t=2,D2t=4*60*60*1e3,M2t=.5;function $2t(e,t=N2t,n=O2t){const r=t*Math.pow(n,e),i=Math.round(M2t*r*(Math.random()-.5)*2);return Math.min(D2t,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(e){return e&&e._delegate?e._delegate:e}class xp{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2t{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new rI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(j2t(t))try{this.getOrInitializeService({instanceIdentifier:x1})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=x1){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=x1){return this.instances.has(t)}getOptions(t=x1){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:F2t(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=x1){return this.component?this.component.multipleInstances?t:x1:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function F2t(e){return e===x1?void 0:e}function j2t(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2t{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new L2t(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pr;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Pr||(Pr={}));const z2t={debug:Pr.DEBUG,verbose:Pr.VERBOSE,info:Pr.INFO,warn:Pr.WARN,error:Pr.ERROR,silent:Pr.SILENT},U2t=Pr.INFO,V2t={[Pr.DEBUG]:"log",[Pr.VERBOSE]:"log",[Pr.INFO]:"info",[Pr.WARN]:"warn",[Pr.ERROR]:"error"},H2t=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=V2t[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class O6{constructor(t){this.name=t,this._logLevel=U2t,this._logHandler=H2t,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pr))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?z2t[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pr.DEBUG,...t),this._logHandler(this,Pr.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pr.VERBOSE,...t),this._logHandler(this,Pr.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pr.INFO,...t),this._logHandler(this,Pr.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pr.WARN,...t),this._logHandler(this,Pr.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pr.ERROR,...t),this._logHandler(this,Pr.ERROR,...t)}}const q2t=(e,t)=>t.some(n=>e instanceof n);let hpe,ppe;function W2t(){return hpe||(hpe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function G2t(){return ppe||(ppe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xke=new WeakMap,hH=new WeakMap,Eke=new WeakMap,K9=new WeakMap,eJ=new WeakMap;function Y2t(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(uy(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&xke.set(n,e)}).catch(()=>{}),eJ.set(t,e),t}function K2t(e){if(hH.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});hH.set(e,t)}let pH={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return hH.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Eke.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return uy(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function X2t(e){pH=e(pH)}function Q2t(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(X9(this),t,...n);return Eke.set(r,t.sort?t.sort():[t]),uy(r)}:G2t().includes(e)?function(...t){return e.apply(X9(this),t),uy(xke.get(this))}:function(...t){return uy(e.apply(X9(this),t))}}function J2t(e){return typeof e=="function"?Q2t(e):(e instanceof IDBTransaction&&K2t(e),q2t(e,W2t())?new Proxy(e,pH):e)}function uy(e){if(e instanceof IDBRequest)return Y2t(e);if(K9.has(e))return K9.get(e);const t=J2t(e);return t!==e&&(K9.set(e,t),eJ.set(t,e)),t}const X9=e=>eJ.get(e);function Z2t(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=uy(o);return r&&o.addEventListener("upgradeneeded",u=>{r(uy(o.result),u.oldVersion,u.newVersion,uy(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const eIt=["get","getKey","getAll","getAllKeys","count"],tIt=["put","add","delete","clear"],Q9=new Map;function mpe(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Q9.get(t))return Q9.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=tIt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||eIt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return Q9.set(t,s),s}X2t(e=>({...e,get:(t,n,r)=>mpe(t,n)||e.get(t,n,r),has:(t,n)=>!!mpe(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nIt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rIt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function rIt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const mH="@firebase/app",gpe="0.10.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=new O6("@firebase/app"),iIt="@firebase/app-compat",sIt="@firebase/analytics-compat",oIt="@firebase/analytics",aIt="@firebase/app-check-compat",uIt="@firebase/app-check",lIt="@firebase/auth",cIt="@firebase/auth-compat",dIt="@firebase/database",fIt="@firebase/database-compat",hIt="@firebase/functions",pIt="@firebase/functions-compat",mIt="@firebase/installations",gIt="@firebase/installations-compat",yIt="@firebase/messaging",vIt="@firebase/messaging-compat",bIt="@firebase/performance",_It="@firebase/performance-compat",wIt="@firebase/remote-config",xIt="@firebase/remote-config-compat",EIt="@firebase/storage",SIt="@firebase/storage-compat",TIt="@firebase/firestore",CIt="@firebase/vertexai-preview",AIt="@firebase/firestore-compat",IIt="firebase",RIt="10.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gH="[DEFAULT]",kIt={[mH]:"fire-core",[iIt]:"fire-core-compat",[oIt]:"fire-analytics",[sIt]:"fire-analytics-compat",[uIt]:"fire-app-check",[aIt]:"fire-app-check-compat",[lIt]:"fire-auth",[cIt]:"fire-auth-compat",[dIt]:"fire-rtdb",[fIt]:"fire-rtdb-compat",[hIt]:"fire-fn",[pIt]:"fire-fn-compat",[mIt]:"fire-iid",[gIt]:"fire-iid-compat",[yIt]:"fire-fcm",[vIt]:"fire-fcm-compat",[bIt]:"fire-perf",[_It]:"fire-perf-compat",[wIt]:"fire-rc",[xIt]:"fire-rc-compat",[EIt]:"fire-gcs",[SIt]:"fire-gcs-compat",[TIt]:"fire-fst",[AIt]:"fire-fst-compat",[CIt]:"fire-vertex","fire-js":"fire-js",[IIt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s$=new Map,PIt=new Map,yH=new Map;function ype(e,t){try{e.container.addComponent(t)}catch(n){Eb.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function gg(e){const t=e.name;if(yH.has(t))return Eb.debug(`There were multiple attempts to register component ${t}.`),!1;yH.set(t,e);for(const n of s$.values())ype(n,e);for(const n of PIt.values())ype(n,e);return!0}function MS(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Kh(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NIt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ly=new DS("app","Firebase",NIt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OIt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xp("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ly.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_=RIt;function Ske(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:gH,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw ly.create("bad-app-name",{appName:String(i)});if(n||(n=_ke()),!n)throw ly.create("no-options");const s=s$.get(i);if(s){if(iI(n,s.options)&&iI(r,s.config))return s;throw ly.create("duplicate-app",{appName:i})}const o=new B2t(i);for(const u of yH.values())o.addComponent(u);const a=new OIt(n,r,o);return s$.set(i,a),a}function tJ(e=gH){const t=s$.get(e);if(!t&&e===gH&&_ke())return Ske();if(!t)throw ly.create("no-app",{appName:e});return t}function kf(e,t,n){var r;let i=(r=kIt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Eb.warn(a.join(" "));return}gg(new xp(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DIt="firebase-heartbeat-database",MIt=1,sI="firebase-heartbeat-store";let J9=null;function Tke(){return J9||(J9=Z2t(DIt,MIt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(sI)}catch(n){console.warn(n)}}}}).catch(e=>{throw ly.create("idb-open",{originalErrorMessage:e.message})})),J9}async function $It(e){try{const n=(await Tke()).transaction(sI),r=await n.objectStore(sI).get(Cke(e));return await n.done,r}catch(t){if(t instanceof Vp)Eb.warn(t.message);else{const n=ly.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Eb.warn(n.message)}}}async function vpe(e,t){try{const r=(await Tke()).transaction(sI,"readwrite");await r.objectStore(sI).put(t,Cke(e)),await r.done}catch(n){if(n instanceof Vp)Eb.warn(n.message);else{const r=ly.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Eb.warn(r.message)}}}function Cke(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LIt=1024,FIt=30*24*60*60*1e3;class jIt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new zIt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=bpe();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=FIt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=bpe(),{heartbeatsToSend:r,unsentEntries:i}=BIt(this._heartbeatsCache.heartbeats),s=i$(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function bpe(){return new Date().toISOString().substring(0,10)}function BIt(e,t=LIt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),_pe(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),_pe(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class zIt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZQ()?E2t().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $It(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return vpe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return vpe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function _pe(e){return i$(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UIt(e){gg(new xp("platform-logger",t=>new nIt(t),"PRIVATE")),gg(new xp("heartbeat",t=>new jIt(t),"PRIVATE")),kf(mH,gpe,e),kf(mH,gpe,"esm2017"),kf("fire-js","")}UIt("");function Ake(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VIt=Ake,Ike=new DS("auth","Firebase",Ake());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o$=new O6("@firebase/auth");function HIt(e,...t){o$.logLevel<=Pr.WARN&&o$.warn(`Auth (${u_}): ${e}`,...t)}function ID(e,...t){o$.logLevel<=Pr.ERROR&&o$.error(`Auth (${u_}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(e,...t){throw rJ(e,...t)}function Pf(e,...t){return rJ(e,...t)}function nJ(e,t,n){const r=Object.assign(Object.assign({},VIt()),{[t]:n});return new DS("auth","Firebase",r).create(t,{appName:e.name})}function cy(e){return nJ(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qIt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Ep(e,"argument-error"),nJ(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rJ(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return Ike.create(e,...t)}function Un(e,t,...n){if(!e)throw rJ(t,...n)}function Lm(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ID(t),new Error(t)}function yg(e,t){e||Lm(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vH(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function WIt(){return wpe()==="http:"||wpe()==="https:"}function wpe(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GIt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WIt()||b2t()||"connection"in navigator)?navigator.onLine:!0}function YIt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(t,n){this.shortDelay=t,this.longDelay=n,yg(n>t,"Short delay should be less than long delay!"),this.isMobile=y2t()||_2t()}get(){return GIt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iJ(e,t){yg(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rke{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Lm("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Lm("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Lm("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KIt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XIt=new $R(3e4,6e4);function D6(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function $S(e,t,n,r,i={}){return kke(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=MR(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),Rke.fetch()(Nke(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function kke(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},KIt),t);try{const i=new QIt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw dO(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw dO(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw dO(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw dO(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw nJ(e,c,l);Ep(e,c)}}catch(i){if(i instanceof Vp)throw i;Ep(e,"network-request-failed",{message:String(i)})}}async function Pke(e,t,n,r,i={}){const s=await $S(e,t,n,r,i);return"mfaPendingCredential"in s&&Ep(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Nke(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?iJ(e.config,i):`${e.config.apiScheme}://${i}`}class QIt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Pf(this.auth,"network-request-failed")),XIt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function dO(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Pf(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JIt(e,t){return $S(e,"POST","/v1/accounts:delete",t)}async function Oke(e,t){return $S(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function ZIt(e,t=!1){const n=Hi(e),r=await n.getIdToken(t),i=sJ(r);Un(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:YA(Z9(i.auth_time)),issuedAtTime:YA(Z9(i.iat)),expirationTime:YA(Z9(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Z9(e){return Number(e)*1e3}function sJ(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return ID("JWT malformed, contained fewer than 3 sections"),null;try{const i=yke(n);return i?JSON.parse(i):(ID("Failed to decode base64 JWT payload"),null)}catch(i){return ID("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function xpe(e){const t=sJ(e);return Un(t,"internal-error"),Un(typeof t.exp<"u","internal-error"),Un(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oI(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Vp&&eRt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function eRt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tRt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bH{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=YA(this.lastLoginAt),this.creationTime=YA(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a$(e){var t;const n=e.auth,r=await e.getIdToken(),i=await oI(e,Oke(n,{idToken:r}));Un(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?Dke(s.providerUserInfo):[],a=rRt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new bH(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,d)}async function nRt(e){const t=Hi(e);await a$(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function rRt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function Dke(e){return e.map(t=>{var{providerId:n}=t,r=zI(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iRt(e,t){const n=await kke(e,{},async()=>{const r=MR({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=Nke(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Rke.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function sRt(e,t){return $S(e,"POST","/v2/accounts:revokeToken",D6(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Un(t.idToken,"internal-error"),Un(typeof t.idToken<"u","internal-error"),Un(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):xpe(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Un(t.length!==0,"internal-error");const n=xpe(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Un(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await iRt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Rx;return r&&(Un(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(Un(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(Un(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Rx,this.toJSON())}_performRefresh(){return Lm("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(e,t){Un(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Fm{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=zI(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tRt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new bH(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await oI(this,this.stsTokenManager.getToken(this.auth,t));return Un(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return ZIt(this,t)}reload(){return nRt(this)}_assign(t){this!==t&&(Un(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Fm(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Un(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await a$(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kh(this.auth.app))return Promise.reject(cy(this.auth));const t=await this.getIdToken();return await oI(this,JIt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,y=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,v=(l=n.createdAt)!==null&&l!==void 0?l:void 0,w=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:x,emailVerified:S,isAnonymous:E,providerData:T,stsTokenManager:A}=n;Un(x&&A,t,"internal-error");const I=Rx.fromJSON(this.name,A);Un(typeof x=="string",t,"internal-error"),f0(d,t.name),f0(f,t.name),Un(typeof S=="boolean",t,"internal-error"),Un(typeof E=="boolean",t,"internal-error"),f0(h,t.name),f0(p,t.name),f0(m,t.name),f0(y,t.name),f0(v,t.name),f0(w,t.name);const k=new Fm({uid:x,auth:t,email:f,emailVerified:S,displayName:d,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:I,createdAt:v,lastLoginAt:w});return T&&Array.isArray(T)&&(k.providerData=T.map(D=>Object.assign({},D))),y&&(k._redirectEventId=y),k}static async _fromIdTokenResponse(t,n,r=!1){const i=new Rx;i.updateFromServerResponse(n);const s=new Fm({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await a$(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];Un(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Dke(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Rx;a.updateFromIdToken(r);const u=new Fm({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new bH(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Epe=new Map;function jm(e){yg(e instanceof Function,"Expected a class definition");let t=Epe.get(e);return t?(yg(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Epe.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mke{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}Mke.type="NONE";const Spe=Mke;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(e,t,n){return`firebase:${e}:${t}:${n}`}class kx{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=RD(this.userKey,i.apiKey,s),this.fullPersistenceKey=RD("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Fm._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new kx(jm(Spe),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||jm(Spe);const o=RD(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const d=Fm._fromJSON(t,c);l!==s&&(a=d),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new kx(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new kx(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tpe(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Fke(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if($ke(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Bke(t))return"Blackberry";if(zke(t))return"Webos";if(oJ(t))return"Safari";if((t.includes("chrome/")||Lke(t))&&!t.includes("edge/"))return"Chrome";if(jke(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function $ke(e=Ta()){return/firefox\//i.test(e)}function oJ(e=Ta()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Lke(e=Ta()){return/crios\//i.test(e)}function Fke(e=Ta()){return/iemobile/i.test(e)}function jke(e=Ta()){return/android/i.test(e)}function Bke(e=Ta()){return/blackberry/i.test(e)}function zke(e=Ta()){return/webos/i.test(e)}function M6(e=Ta()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function oRt(e=Ta()){var t;return M6(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function aRt(){return w2t()&&document.documentMode===10}function Uke(e=Ta()){return M6(e)||jke(e)||zke(e)||Bke(e)||/windows phone/i.test(e)||Fke(e)}function uRt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vke(e,t=[]){let n;switch(e){case"Browser":n=Tpe(Ta());break;case"Worker":n=`${Tpe(Ta())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${u_}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lRt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cRt(e,t={}){return $S(e,"GET","/v2/passwordPolicy",D6(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dRt=6;class fRt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:dRt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hRt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cpe(this),this.idTokenSubscription=new Cpe(this),this.beforeStateQueue=new lRt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ike,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=jm(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await kx.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Oke(this,{idToken:t}),r=await Fm._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Kh(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Un(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await a$(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=YIt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Kh(this.app))return Promise.reject(cy(this));const n=t?Hi(t):null;return n&&Un(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Un(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Kh(this.app)?Promise.reject(cy(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Kh(this.app)?Promise.reject(cy(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(jm(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await cRt(this),n=new fRt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new DS("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await sRt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&jm(t)||this._popupRedirectResolver;Un(n,this,"argument-error"),this.redirectPersistenceManager=await kx.create(this,[jm(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Un(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Un(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Vke(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&HIt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function LR(e){return Hi(e)}class Cpe{constructor(t){this.auth=t,this.observer=null,this.addObserver=I2t(n=>this.observer=n)}get next(){return Un(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aJ={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pRt(e){aJ=e}function mRt(e){return aJ.loadJS(e)}function gRt(){return aJ.gapiScript}function yRt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vRt(e,t){const n=MS(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(iI(s,t??{}))return i;Ep(i,"already-initialized")}return n.initialize({options:t})}function bRt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(jm);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function _Rt(e,t,n){const r=LR(e);Un(r._canInitEmulator,r,"emulator-config-failed"),Un(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=Hke(t),{host:o,port:a}=wRt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),xRt()}function Hke(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function wRt(e){const t=Hke(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Ape(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Ape(o)}}}function Ape(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function xRt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qke{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Lm("not implemented")}_getIdTokenResponse(t){return Lm("not implemented")}_linkToIdToken(t,n){return Lm("not implemented")}_getReauthenticationResolver(t){return Lm("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Px(e,t){return Pke(e,"POST","/v1/accounts:signInWithIdp",D6(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERt="http://localhost";class Sb extends qke{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Sb(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Ep("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=zI(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Sb(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return Px(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Px(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Px(t,n)}buildRequest(){const t={requestUri:ERt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=MR(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uJ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR extends uJ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0 extends FR{constructor(){super("facebook.com")}static credential(t){return Sb._fromParams({providerId:$0.PROVIDER_ID,signInMethod:$0.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return $0.credentialFromTaggedObject(t)}static credentialFromError(t){return $0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return $0.credential(t.oauthAccessToken)}catch{return null}}}$0.FACEBOOK_SIGN_IN_METHOD="facebook.com";$0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm extends FR{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Sb._fromParams({providerId:Nm.PROVIDER_ID,signInMethod:Nm.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Nm.credentialFromTaggedObject(t)}static credentialFromError(t){return Nm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Nm.credential(n,r)}catch{return null}}}Nm.GOOGLE_SIGN_IN_METHOD="google.com";Nm.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0 extends FR{constructor(){super("github.com")}static credential(t){return Sb._fromParams({providerId:L0.PROVIDER_ID,signInMethod:L0.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return L0.credentialFromTaggedObject(t)}static credentialFromError(t){return L0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return L0.credential(t.oauthAccessToken)}catch{return null}}}L0.GITHUB_SIGN_IN_METHOD="github.com";L0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0 extends FR{constructor(){super("twitter.com")}static credential(t,n){return Sb._fromParams({providerId:F0.PROVIDER_ID,signInMethod:F0.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return F0.credentialFromTaggedObject(t)}static credentialFromError(t){return F0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return F0.credential(n,r)}catch{return null}}}F0.TWITTER_SIGN_IN_METHOD="twitter.com";F0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SRt(e,t){return Pke(e,"POST","/v1/accounts:signUp",D6(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await Fm._fromIdTokenResponse(t,r,i),o=Ipe(r);return new Fy({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=Ipe(r);return new Fy({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function Ipe(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TRt(e){var t;if(Kh(e.app))return Promise.reject(cy(e));const n=LR(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new Fy({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await SRt(n,{returnSecureToken:!0}),i=await Fy._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u$ extends Vp{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,u$.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new u$(t,n,r,i)}}function Wke(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?u$._fromErrorAndOperation(e,s,t,r):s})}async function CRt(e,t,n=!1){const r=await oI(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Fy._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ARt(e,t,n=!1){const{auth:r}=e;if(Kh(r.app))return Promise.reject(cy(r));const i="reauthenticate";try{const s=await oI(e,Wke(r,i,t,e),n);Un(s.idToken,r,"internal-error");const o=sJ(s.idToken);Un(o,r,"internal-error");const{sub:a}=o;return Un(e.uid===a,r,"user-mismatch"),Fy._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ep(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IRt(e,t,n=!1){if(Kh(e.app))return Promise.reject(cy(e));const r="signIn",i=await Wke(e,r,t),s=await Fy._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function RRt(e,t,n,r){return Hi(e).onIdTokenChanged(t,n,r)}function kRt(e,t,n){return Hi(e).beforeAuthStateChanged(t,n)}function PRt(e,t,n,r){return Hi(e).onAuthStateChanged(t,n,r)}function NRt(e){return Hi(e).signOut()}const l$="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gke{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(l$,"1"),this.storage.removeItem(l$),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ORt(){const e=Ta();return oJ(e)||M6(e)}const DRt=1e3,MRt=10;class Yke extends Gke{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=ORt()&&uRt(),this.fallbackToPolling=Uke(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);aRt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,MRt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},DRt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}Yke.type="LOCAL";const $Rt=Yke;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kke extends Gke{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}Kke.type="SESSION";const Xke=Kke;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LRt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new $6(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await LRt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$6.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lJ(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FRt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=lJ("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(){return window}function jRt(e){lp().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qke(){return typeof lp().WorkerGlobalScope<"u"&&typeof lp().importScripts=="function"}async function BRt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zRt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function URt(){return Qke()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jke="firebaseLocalStorageDb",VRt=1,c$="firebaseLocalStorage",Zke="fbase_key";class jR{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function L6(e,t){return e.transaction([c$],t?"readwrite":"readonly").objectStore(c$)}function HRt(){const e=indexedDB.deleteDatabase(Jke);return new jR(e).toPromise()}function _H(){const e=indexedDB.open(Jke,VRt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(c$,{keyPath:Zke})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(c$)?t(r):(r.close(),await HRt(),t(await _H()))})})}async function Rpe(e,t,n){const r=L6(e,!0).put({[Zke]:t,value:n});return new jR(r).toPromise()}async function qRt(e,t){const n=L6(e,!1).get(t),r=await new jR(n).toPromise();return r===void 0?null:r.value}function kpe(e,t){const n=L6(e,!0).delete(t);return new jR(n).toPromise()}const WRt=800,GRt=3;class ePe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _H(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>GRt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Qke()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$6._getInstance(URt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await BRt(),!this.activeServiceWorker)return;this.sender=new FRt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||zRt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await _H();return await Rpe(t,l$,"1"),await kpe(t,l$),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Rpe(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>qRt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>kpe(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=L6(i,!1).getAll();return new jR(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),WRt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ePe.type="LOCAL";const YRt=ePe;new $R(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tPe(e,t){return t?jm(t):(Un(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cJ extends qke{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Px(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Px(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Px(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function KRt(e){return IRt(e.auth,new cJ(e),e.bypassAuthState)}function XRt(e){const{auth:t,user:n}=e;return Un(n,t,"internal-error"),ARt(n,new cJ(e),e.bypassAuthState)}async function QRt(e){const{auth:t,user:n}=e;return Un(n,t,"internal-error"),CRt(n,new cJ(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nPe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return KRt;case"linkViaPopup":case"linkViaRedirect":return QRt;case"reauthViaPopup":case"reauthViaRedirect":return XRt;default:Ep(this.auth,"internal-error")}}resolve(t){yg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){yg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JRt=new $R(2e3,1e4);async function ZRt(e,t,n){if(Kh(e.app))return Promise.reject(Pf(e,"operation-not-supported-in-this-environment"));const r=LR(e);qIt(e,t,uJ);const i=tPe(r,n);return new V1(r,"signInViaPopup",t,i).executeNotNull()}class V1 extends nPe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,V1.currentPopupAction&&V1.currentPopupAction.cancel(),V1.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Un(t,this.auth,"internal-error"),t}async onExecution(){yg(this.filter.length===1,"Popup operations only handle one event");const t=lJ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pf(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Pf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,V1.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pf(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,JRt.get())};t()}}V1.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ekt="pendingRedirect",kD=new Map;class tkt extends nPe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=kD.get(this.auth._key());if(!t){try{const r=await nkt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}kD.set(this.auth._key(),t)}return this.bypassAuthState||kD.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nkt(e,t){const n=skt(t),r=ikt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function rkt(e,t){kD.set(e._key(),t)}function ikt(e){return jm(e._redirectPersistence)}function skt(e){return RD(ekt,e.config.apiKey,e.name)}async function okt(e,t,n=!1){if(Kh(e.app))return Promise.reject(cy(e));const r=LR(e),i=tPe(r,t),o=await new tkt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const akt=10*60*1e3;class ukt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!lkt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!rPe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Pf(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=akt&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ppe(t))}saveEventToCache(t){this.cachedEventUids.add(Ppe(t)),this.lastProcessedEventTime=Date.now()}}function Ppe(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function rPe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function lkt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rPe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ckt(e,t={}){return $S(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dkt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fkt=/^https?/;async function hkt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await ckt(e);for(const n of t)try{if(pkt(n))return}catch{}Ep(e,"unauthorized-domain")}function pkt(e){const t=vH(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!fkt.test(n))return!1;if(dkt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mkt=new $R(3e4,6e4);function Npe(){const e=lp().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function gkt(e){return new Promise((t,n)=>{var r,i,s;function o(){Npe(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Npe(),n(Pf(e,"network-request-failed"))},timeout:mkt.get()})}if(!((i=(r=lp().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=lp().gapi)===null||s===void 0)&&s.load)o();else{const a=yRt("iframefcb");return lp()[a]=()=>{gapi.load?o():n(Pf(e,"network-request-failed"))},mRt(`${gRt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw PD=null,t})}let PD=null;function ykt(e){return PD=PD||gkt(e),PD}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vkt=new $R(5e3,15e3),bkt="__/auth/iframe",_kt="emulator/auth/iframe",wkt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xkt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ekt(e){const t=e.config;Un(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?iJ(t,_kt):`https://${e.config.authDomain}/${bkt}`,r={apiKey:t.apiKey,appName:e.name,v:u_},i=xkt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${MR(r).slice(1)}`}async function Skt(e){const t=await ykt(e),n=lp().gapi;return Un(n,e,"internal-error"),t.open({where:document.body,url:Ekt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wkt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Pf(e,"network-request-failed"),a=lp().setTimeout(()=>{s(o)},vkt.get());function u(){lp().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tkt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ckt=500,Akt=600,Ikt="_blank",Rkt="http://localhost";class Ope{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kkt(e,t,n,r=Ckt,i=Akt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},Tkt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Ta().toLowerCase();n&&(a=Lke(l)?Ikt:n),$ke(l)&&(t=t||Rkt,u.scrollbars="yes");const c=Object.entries(u).reduce((f,[h,p])=>`${f}${h}=${p},`,"");if(oRt(l)&&a!=="_self")return Pkt(t||"",a),new Ope(null);const d=window.open(t||"",a,c);Un(d,e,"popup-blocked");try{d.focus()}catch{}return new Ope(d)}function Pkt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nkt="__/auth/handler",Okt="emulator/auth/handler",Dkt=encodeURIComponent("fac");async function Dpe(e,t,n,r,i,s){Un(e.config.authDomain,e,"auth-domain-config-required"),Un(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:u_,eventId:i};if(t instanceof uJ){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",A2t(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,d]of Object.entries({}))o[c]=d}if(t instanceof FR){const c=t.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${Dkt}=${encodeURIComponent(u)}`:"";return`${Mkt(e)}?${MR(a).slice(1)}${l}`}function Mkt({config:e}){return e.emulator?iJ(e,Okt):`https://${e.authDomain}/${Nkt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ez="webStorageSupport";class $kt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xke,this._completeRedirectFn=okt,this._overrideRedirectResult=rkt}async _openPopup(t,n,r,i){var s;yg((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Dpe(t,n,r,vH(),i);return kkt(t,o,lJ())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await Dpe(t,n,r,vH(),i);return jRt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(yg(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await Skt(t),r=new ukt(t);return n.register("authEvent",i=>(Un(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(ez,{type:ez},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[ez];o!==void 0&&n(!!o),Ep(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=hkt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return Uke()||oJ()||M6()}}const iPe=$kt;var Mpe="@firebase/auth",$pe="1.7.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lkt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Un(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fkt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jkt(e){gg(new xp("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Un(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vke(e)},l=new hRt(r,i,s,u);return bRt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),gg(new xp("auth-internal",t=>{const n=LR(t.getProvider("auth").getImmediate());return(r=>new Lkt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),kf(Mpe,$pe,Fkt(e)),kf(Mpe,$pe,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bkt=5*60,zkt=wke("authIdTokenMaxAge")||Bkt;let Lpe=null;const Ukt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>zkt)return;const i=n==null?void 0:n.token;Lpe!==i&&(Lpe=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function d$(e=tJ()){const t=MS(e,"auth");if(t.isInitialized())return t.getImmediate();const n=vRt(e,{popupRedirectResolver:iPe,persistence:[YRt,$Rt,Xke]}),r=wke("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Ukt(s.toString());kRt(n,o,()=>o(n.currentUser)),RRt(n,a=>o(a))}}const i=bke("auth");return i&&_Rt(n,`http://${i}`),n}function Vkt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}pRt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Pf("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Vkt().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jkt("Browser");var Hkt="firebase",qkt="10.12.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kf(Hkt,qkt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sPe="firebasestorage.googleapis.com",oPe="storageBucket",Wkt=2*60*1e3,Gkt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends Vp{constructor(t,n,r=0){super(tz(t),`Firebase Storage: ${n} (${tz(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ms.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return tz(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Os;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Os||(Os={}));function tz(e){return"storage/"+e}function dJ(){const e="An unknown error occurred, please check the error payload for server response.";return new Ms(Os.UNKNOWN,e)}function Ykt(e){return new Ms(Os.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function Kkt(e){return new Ms(Os.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Xkt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ms(Os.UNAUTHENTICATED,e)}function Qkt(){return new Ms(Os.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Jkt(e){return new Ms(Os.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function Zkt(){return new Ms(Os.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ePt(){return new Ms(Os.CANCELED,"User canceled the upload/download.")}function tPt(e){return new Ms(Os.INVALID_URL,"Invalid URL '"+e+"'.")}function nPt(e){return new Ms(Os.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function rPt(){return new Ms(Os.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+oPe+"' property when initializing the app?")}function iPt(){return new Ms(Os.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function sPt(){return new Ms(Os.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function oPt(e){return new Ms(Os.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function wH(e){return new Ms(Os.INVALID_ARGUMENT,e)}function aPe(){return new Ms(Os.APP_DELETED,"The Firebase app was deleted.")}function aPt(e){return new Ms(Os.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function KA(e,t){return new Ms(Os.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function iC(e){throw new Ms(Os.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Ru.makeFromUrl(t,n)}catch{return new Ru(t,"")}if(r.path==="")return r;throw nPt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(S){S.path_=decodeURIComponent(S.path)}const c="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",h=new RegExp(`^https?://${d}/${c}/b/${i}/o${f}`,"i"),p={bucket:1,path:3},m=n===sPe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,y="([^?#]*)",v=new RegExp(`^https?://${m}/${i}/${y}`,"i"),x=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:v,indices:{bucket:1,path:2},postModify:l}];for(let S=0;S<x.length;S++){const E=x[S],T=E.regex.exec(t);if(T){const A=T[E.indices.bucket];let I=T[E.indices.path];I||(I=""),r=new Ru(A,I),E.postModify(r);break}}if(r==null)throw tPt(t);return r}}class uPt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lPt(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...y){l||(l=!0,t.apply(null,y))}function d(y){i=setTimeout(()=>{i=null,e(h,u())},y)}function f(){s&&clearTimeout(s)}function h(y,...v){if(l){f();return}if(y){f(),c.call(null,y,...v);return}if(u()||o){f(),c.call(null,y,...v);return}r<64&&(r*=2);let x;a===1?(a=2,x=0):x=(r+Math.random())*1e3,d(x)}let p=!1;function m(y){p||(p=!0,f(),!l&&(i!==null?(y||(a=2),clearTimeout(i),d(0)):y||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function cPt(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dPt(e){return e!==void 0}function fPt(e){return typeof e=="object"&&!Array.isArray(e)}function fJ(e){return typeof e=="string"||e instanceof String}function Fpe(e){return hJ()&&e instanceof Blob}function hJ(){return typeof Blob<"u"}function xH(e,t,n,r){if(r<t)throw wH(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw wH(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function uPe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z1;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Z1||(Z1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hPt(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pPt{constructor(t,n,r,i,s,o,a,u,l,c,d,f=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new fO(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Z1.NO_ERROR,u=s.getStatus();if(!a||hPt(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===Z1.ABORT;r(!1,new fO(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new fO(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());dPt(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=dJ();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?aPe():ePt();o(u)}else{const u=Zkt();o(u)}};this.canceled_?n(!1,new fO(!1,null,!0)):this.backoffId_=lPt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&cPt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class fO{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function mPt(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function gPt(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function yPt(e,t){t&&(e["X-Firebase-GMPID"]=t)}function vPt(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function bPt(e,t,n,r,i,s,o=!0){const a=uPe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return yPt(l,t),mPt(l,n),gPt(l,s),vPt(l,r),new pPt(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Pt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function wPt(...e){const t=_Pt();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(hJ())return new Blob(e);throw new Ms(Os.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function xPt(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EPt(e){if(typeof atob>"u")throw oPt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class nz{constructor(t,n){this.data=t,this.contentType=n||null}}function SPt(e,t){switch(e){case Xh.RAW:return new nz(lPe(t));case Xh.BASE64:case Xh.BASE64URL:return new nz(cPe(e,t));case Xh.DATA_URL:return new nz(CPt(t),APt(t))}throw dJ()}function lPe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function TPt(e){let t;try{t=decodeURIComponent(e)}catch{throw KA(Xh.DATA_URL,"Malformed data URL.")}return lPe(t)}function cPe(e,t){switch(e){case Xh.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw KA(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Xh.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw KA(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=EPt(t)}catch(i){throw i.message.includes("polyfill")?i:KA(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class dPe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw KA(Xh.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=IPt(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function CPt(e){const t=new dPe(e);return t.base64?cPe(Xh.BASE64,t.rest):TPt(t.rest)}function APt(e){return new dPe(e).contentType}function IPt(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(t,n){let r=0,i="";Fpe(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(Fpe(this.data_)){const r=this.data_,i=xPt(r,t,n);return i===null?null:new j0(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new j0(r,!0)}}static getBlob(...t){if(hJ()){const n=t.map(r=>r instanceof j0?r.data_:r);return new j0(wPt.apply(null,n))}else{const n=t.map(o=>fJ(o)?SPt(Xh.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new j0(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pJ(e){let t;try{t=JSON.parse(e)}catch{return null}return fPt(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RPt(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function kPt(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function fPe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PPt(e,t){return t}class vu{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||PPt}}let hO=null;function NPt(e){return!fJ(e)||e.length<2?e:fPe(e)}function hPe(){if(hO)return hO;const e=[];e.push(new vu("bucket")),e.push(new vu("generation")),e.push(new vu("metageneration")),e.push(new vu("name","fullPath",!0));function t(s,o){return NPt(o)}const n=new vu("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new vu("size");return i.xform=r,e.push(i),e.push(new vu("timeCreated")),e.push(new vu("updated")),e.push(new vu("md5Hash",null,!0)),e.push(new vu("cacheControl",null,!0)),e.push(new vu("contentDisposition",null,!0)),e.push(new vu("contentEncoding",null,!0)),e.push(new vu("contentLanguage",null,!0)),e.push(new vu("contentType",null,!0)),e.push(new vu("metadata","customMetadata",!0)),hO=e,hO}function OPt(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Ru(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function DPt(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return OPt(r,e),r}function pPe(e,t,n){const r=pJ(t);return r===null?null:DPt(e,r,n)}function MPt(e,t,n,r){const i=pJ(t);if(i===null||!fJ(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,d=e.fullPath,f="/b/"+o(c)+"/o/"+o(d),h=BR(f,n,r),p=uPe({alt:"media",token:l});return h+p})[0]}function $Pt(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jpe="prefixes",Bpe="items";function LPt(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[jpe])for(const i of n[jpe]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new Ru(t,s));r.prefixes.push(o)}if(n[Bpe])for(const i of n[Bpe]){const s=e._makeStorageReference(new Ru(t,i.name));r.items.push(s)}return r}function FPt(e,t,n){const r=pJ(n);return r===null?null:LPt(e,t,r)}class F6{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mJ(e){if(!e)throw dJ()}function jPt(e,t){function n(r,i){const s=pPe(e,i,t);return mJ(s!==null),s}return n}function BPt(e,t){function n(r,i){const s=FPt(e,t,i);return mJ(s!==null),s}return n}function zPt(e,t){function n(r,i){const s=pPe(e,i,t);return mJ(s!==null),MPt(s,i,e.host,e._protocol)}return n}function gJ(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Qkt():i=Xkt():n.getStatus()===402?i=Kkt(e.bucket):n.getStatus()===403?i=Jkt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function mPe(e){const t=gJ(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=Ykt(e.path)),s.serverResponse=i.serverResponse,s}return n}function UPt(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=BR(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new F6(a,u,BPt(e,t.bucket),l);return c.urlParams=s,c.errorHandler=gJ(t),c}function VPt(e,t,n){const r=t.fullServerUrl(),i=BR(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new F6(i,s,zPt(e,n),o);return a.errorHandler=mPe(t),a}function HPt(e,t){const n=t.fullServerUrl(),r=BR(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new F6(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=mPe(t),a}function qPt(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function WPt(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=qPt(null,t)),r}function GPt(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let x="";for(let S=0;S<2;S++)x=x+Math.random().toString().slice(2);return x}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=WPt(t,r,i),c=$Pt(l,n),d="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,f=`\r
--`+u+"--",h=j0.getBlob(d,r,f);if(h===null)throw iPt();const p={name:l.fullPath},m=BR(s,e.host,e._protocol),y="POST",v=e.maxUploadRetryTime,w=new F6(m,y,jPt(e,n),v);return w.urlParams=p,w.headers=o,w.body=h.uploadData(),w.errorHandler=gJ(t),w}class YPt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Z1.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Z1.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Z1.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw iC("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw iC("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw iC("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw iC("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw iC("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class KPt extends YPt{initXhr(){this.xhr_.responseType="text"}}function j6(){return new KPt}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(t,n){this._service=t,n instanceof Ru?this._location=n:this._location=Ru.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new Tb(t,n)}get root(){const t=new Ru(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fPe(this._location.path)}get storage(){return this._service}get parent(){const t=RPt(this._location.path);if(t===null)return null;const n=new Ru(this._location.bucket,t);return new Tb(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw aPt(t)}}function XPt(e,t,n){e._throwIfRoot("uploadBytes");const r=GPt(e.storage,e._location,hPe(),new j0(t,!0),n);return e.storage.makeRequestWithTokens(r,j6).then(i=>({metadata:i,ref:e}))}function QPt(e){const t={prefixes:[],items:[]};return gPe(e,t).then(()=>t)}async function gPe(e,t,n){const i=await JPt(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await gPe(e,t,i.nextPageToken)}function JPt(e,t){t!=null&&typeof t.maxResults=="number"&&xH("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=UPt(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,j6)}function ZPt(e){e._throwIfRoot("getDownloadURL");const t=VPt(e.storage,e._location,hPe());return e.storage.makeRequestWithTokens(t,j6).then(n=>{if(n===null)throw sPt();return n})}function eNt(e){e._throwIfRoot("deleteObject");const t=HPt(e.storage,e._location);return e.storage.makeRequestWithTokens(t,j6)}function tNt(e,t){const n=kPt(e._location.path,t),r=new Ru(e._location.bucket,n);return new Tb(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nNt(e){return/^[A-Za-z]+:\/\//.test(e)}function rNt(e,t){return new Tb(e,t)}function yPe(e,t){if(e instanceof yJ){const n=e;if(n._bucket==null)throw rPt();const r=new Tb(n,n._bucket);return t!=null?yPe(r,t):r}else return t!==void 0?tNt(e,t):e}function iNt(e,t){if(t&&nNt(t)){if(e instanceof yJ)return rNt(e,t);throw wH("To use ref(service, url), the first argument must be a Storage instance.")}else return yPe(e,t)}function zpe(e,t){const n=t==null?void 0:t[oPe];return n==null?null:Ru.makeFromBucketSpec(n,e)}function sNt(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:g2t(i,e.app.options.projectId))}class yJ{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=sPe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Wkt,this._maxUploadRetryTime=Gkt,this._requests=new Set,i!=null?this._bucket=Ru.makeFromBucketSpec(i,this._host):this._bucket=zpe(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ru.makeFromBucketSpec(this._url,t):this._bucket=zpe(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){xH("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){xH("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Tb(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new uPt(aPe());{const o=bPt(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const Upe="@firebase/storage",Vpe="0.12.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vPe="storage";function h0(e,t,n){return e=Hi(e),XPt(e,t,n)}function sC(e){return e=Hi(e),QPt(e)}function Zv(e){return e=Hi(e),ZPt(e)}function Hpe(e){return e=Hi(e),eNt(e)}function Mi(e,t){return e=Hi(e),iNt(e,t)}function bw(e=tJ(),t){e=Hi(e);const r=MS(e,vPe).getImmediate({identifier:t}),i=m2t("storage");return i&&oNt(r,...i),r}function oNt(e,t,n,r={}){sNt(e,t,n,r)}function aNt(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new yJ(n,r,i,t,u_)}function uNt(){gg(new xp(vPe,aNt,"PUBLIC").setMultipleInstances(!0)),kf(Upe,Vpe,""),kf(Upe,Vpe,"esm2017")}uNt();var qpe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eb,bPe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(A,I){function k(){}k.prototype=I.prototype,A.D=I.prototype,A.prototype=new k,A.prototype.constructor=A,A.C=function(D,M,z){for(var O=Array(arguments.length-2),$=2;$<arguments.length;$++)O[$-2]=arguments[$];return I.prototype[M].apply(D,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,I,k){k||(k=0);var D=Array(16);if(typeof I=="string")for(var M=0;16>M;++M)D[M]=I.charCodeAt(k++)|I.charCodeAt(k++)<<8|I.charCodeAt(k++)<<16|I.charCodeAt(k++)<<24;else for(M=0;16>M;++M)D[M]=I[k++]|I[k++]<<8|I[k++]<<16|I[k++]<<24;I=A.g[0],k=A.g[1],M=A.g[2];var z=A.g[3],O=I+(z^k&(M^z))+D[0]+3614090360&4294967295;I=k+(O<<7&4294967295|O>>>25),O=z+(M^I&(k^M))+D[1]+3905402710&4294967295,z=I+(O<<12&4294967295|O>>>20),O=M+(k^z&(I^k))+D[2]+606105819&4294967295,M=z+(O<<17&4294967295|O>>>15),O=k+(I^M&(z^I))+D[3]+3250441966&4294967295,k=M+(O<<22&4294967295|O>>>10),O=I+(z^k&(M^z))+D[4]+4118548399&4294967295,I=k+(O<<7&4294967295|O>>>25),O=z+(M^I&(k^M))+D[5]+1200080426&4294967295,z=I+(O<<12&4294967295|O>>>20),O=M+(k^z&(I^k))+D[6]+2821735955&4294967295,M=z+(O<<17&4294967295|O>>>15),O=k+(I^M&(z^I))+D[7]+4249261313&4294967295,k=M+(O<<22&4294967295|O>>>10),O=I+(z^k&(M^z))+D[8]+1770035416&4294967295,I=k+(O<<7&4294967295|O>>>25),O=z+(M^I&(k^M))+D[9]+2336552879&4294967295,z=I+(O<<12&4294967295|O>>>20),O=M+(k^z&(I^k))+D[10]+4294925233&4294967295,M=z+(O<<17&4294967295|O>>>15),O=k+(I^M&(z^I))+D[11]+2304563134&4294967295,k=M+(O<<22&4294967295|O>>>10),O=I+(z^k&(M^z))+D[12]+1804603682&4294967295,I=k+(O<<7&4294967295|O>>>25),O=z+(M^I&(k^M))+D[13]+4254626195&4294967295,z=I+(O<<12&4294967295|O>>>20),O=M+(k^z&(I^k))+D[14]+2792965006&4294967295,M=z+(O<<17&4294967295|O>>>15),O=k+(I^M&(z^I))+D[15]+1236535329&4294967295,k=M+(O<<22&4294967295|O>>>10),O=I+(M^z&(k^M))+D[1]+4129170786&4294967295,I=k+(O<<5&4294967295|O>>>27),O=z+(k^M&(I^k))+D[6]+3225465664&4294967295,z=I+(O<<9&4294967295|O>>>23),O=M+(I^k&(z^I))+D[11]+643717713&4294967295,M=z+(O<<14&4294967295|O>>>18),O=k+(z^I&(M^z))+D[0]+3921069994&4294967295,k=M+(O<<20&4294967295|O>>>12),O=I+(M^z&(k^M))+D[5]+3593408605&4294967295,I=k+(O<<5&4294967295|O>>>27),O=z+(k^M&(I^k))+D[10]+38016083&4294967295,z=I+(O<<9&4294967295|O>>>23),O=M+(I^k&(z^I))+D[15]+3634488961&4294967295,M=z+(O<<14&4294967295|O>>>18),O=k+(z^I&(M^z))+D[4]+3889429448&4294967295,k=M+(O<<20&4294967295|O>>>12),O=I+(M^z&(k^M))+D[9]+568446438&4294967295,I=k+(O<<5&4294967295|O>>>27),O=z+(k^M&(I^k))+D[14]+3275163606&4294967295,z=I+(O<<9&4294967295|O>>>23),O=M+(I^k&(z^I))+D[3]+4107603335&4294967295,M=z+(O<<14&4294967295|O>>>18),O=k+(z^I&(M^z))+D[8]+1163531501&4294967295,k=M+(O<<20&4294967295|O>>>12),O=I+(M^z&(k^M))+D[13]+2850285829&4294967295,I=k+(O<<5&4294967295|O>>>27),O=z+(k^M&(I^k))+D[2]+4243563512&4294967295,z=I+(O<<9&4294967295|O>>>23),O=M+(I^k&(z^I))+D[7]+1735328473&4294967295,M=z+(O<<14&4294967295|O>>>18),O=k+(z^I&(M^z))+D[12]+2368359562&4294967295,k=M+(O<<20&4294967295|O>>>12),O=I+(k^M^z)+D[5]+4294588738&4294967295,I=k+(O<<4&4294967295|O>>>28),O=z+(I^k^M)+D[8]+2272392833&4294967295,z=I+(O<<11&4294967295|O>>>21),O=M+(z^I^k)+D[11]+1839030562&4294967295,M=z+(O<<16&4294967295|O>>>16),O=k+(M^z^I)+D[14]+4259657740&4294967295,k=M+(O<<23&4294967295|O>>>9),O=I+(k^M^z)+D[1]+2763975236&4294967295,I=k+(O<<4&4294967295|O>>>28),O=z+(I^k^M)+D[4]+1272893353&4294967295,z=I+(O<<11&4294967295|O>>>21),O=M+(z^I^k)+D[7]+4139469664&4294967295,M=z+(O<<16&4294967295|O>>>16),O=k+(M^z^I)+D[10]+3200236656&4294967295,k=M+(O<<23&4294967295|O>>>9),O=I+(k^M^z)+D[13]+681279174&4294967295,I=k+(O<<4&4294967295|O>>>28),O=z+(I^k^M)+D[0]+3936430074&4294967295,z=I+(O<<11&4294967295|O>>>21),O=M+(z^I^k)+D[3]+3572445317&4294967295,M=z+(O<<16&4294967295|O>>>16),O=k+(M^z^I)+D[6]+76029189&4294967295,k=M+(O<<23&4294967295|O>>>9),O=I+(k^M^z)+D[9]+3654602809&4294967295,I=k+(O<<4&4294967295|O>>>28),O=z+(I^k^M)+D[12]+3873151461&4294967295,z=I+(O<<11&4294967295|O>>>21),O=M+(z^I^k)+D[15]+530742520&4294967295,M=z+(O<<16&4294967295|O>>>16),O=k+(M^z^I)+D[2]+3299628645&4294967295,k=M+(O<<23&4294967295|O>>>9),O=I+(M^(k|~z))+D[0]+4096336452&4294967295,I=k+(O<<6&4294967295|O>>>26),O=z+(k^(I|~M))+D[7]+1126891415&4294967295,z=I+(O<<10&4294967295|O>>>22),O=M+(I^(z|~k))+D[14]+2878612391&4294967295,M=z+(O<<15&4294967295|O>>>17),O=k+(z^(M|~I))+D[5]+4237533241&4294967295,k=M+(O<<21&4294967295|O>>>11),O=I+(M^(k|~z))+D[12]+1700485571&4294967295,I=k+(O<<6&4294967295|O>>>26),O=z+(k^(I|~M))+D[3]+2399980690&4294967295,z=I+(O<<10&4294967295|O>>>22),O=M+(I^(z|~k))+D[10]+4293915773&4294967295,M=z+(O<<15&4294967295|O>>>17),O=k+(z^(M|~I))+D[1]+2240044497&4294967295,k=M+(O<<21&4294967295|O>>>11),O=I+(M^(k|~z))+D[8]+1873313359&4294967295,I=k+(O<<6&4294967295|O>>>26),O=z+(k^(I|~M))+D[15]+4264355552&4294967295,z=I+(O<<10&4294967295|O>>>22),O=M+(I^(z|~k))+D[6]+2734768916&4294967295,M=z+(O<<15&4294967295|O>>>17),O=k+(z^(M|~I))+D[13]+1309151649&4294967295,k=M+(O<<21&4294967295|O>>>11),O=I+(M^(k|~z))+D[4]+4149444226&4294967295,I=k+(O<<6&4294967295|O>>>26),O=z+(k^(I|~M))+D[11]+3174756917&4294967295,z=I+(O<<10&4294967295|O>>>22),O=M+(I^(z|~k))+D[2]+718787259&4294967295,M=z+(O<<15&4294967295|O>>>17),O=k+(z^(M|~I))+D[9]+3951481745&4294967295,A.g[0]=A.g[0]+I&4294967295,A.g[1]=A.g[1]+(M+(O<<21&4294967295|O>>>11))&4294967295,A.g[2]=A.g[2]+M&4294967295,A.g[3]=A.g[3]+z&4294967295}r.prototype.u=function(A,I){I===void 0&&(I=A.length);for(var k=I-this.blockSize,D=this.B,M=this.h,z=0;z<I;){if(M==0)for(;z<=k;)i(this,A,z),z+=this.blockSize;if(typeof A=="string"){for(;z<I;)if(D[M++]=A.charCodeAt(z++),M==this.blockSize){i(this,D),M=0;break}}else for(;z<I;)if(D[M++]=A[z++],M==this.blockSize){i(this,D),M=0;break}}this.h=M,this.o+=I},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var I=1;I<A.length-8;++I)A[I]=0;var k=8*this.o;for(I=A.length-8;I<A.length;++I)A[I]=k&255,k/=256;for(this.u(A),A=Array(16),I=k=0;4>I;++I)for(var D=0;32>D;D+=8)A[k++]=this.g[I]>>>D&255;return A};function s(A,I){var k=a;return Object.prototype.hasOwnProperty.call(k,A)?k[A]:k[A]=I(A)}function o(A,I){this.h=I;for(var k=[],D=!0,M=A.length-1;0<=M;M--){var z=A[M]|0;D&&z==I||(k[M]=z,D=!1)}this.g=k}var a={};function u(A){return-128<=A&&128>A?s(A,function(I){return new o([I|0],0>I?-1:0)}):new o([A|0],0>A?-1:0)}function l(A){if(isNaN(A)||!isFinite(A))return d;if(0>A)return y(l(-A));for(var I=[],k=1,D=0;A>=k;D++)I[D]=A/k|0,k*=4294967296;return new o(I,0)}function c(A,I){if(A.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(A.charAt(0)=="-")return y(c(A.substring(1),I));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=l(Math.pow(I,8)),D=d,M=0;M<A.length;M+=8){var z=Math.min(8,A.length-M),O=parseInt(A.substring(M,M+z),I);8>z?(z=l(Math.pow(I,z)),D=D.j(z).add(l(O))):(D=D.j(k),D=D.add(l(O)))}return D}var d=u(0),f=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-y(this).m();for(var A=0,I=1,k=0;k<this.g.length;k++){var D=this.i(k);A+=(0<=D?D:4294967296+D)*I,I*=4294967296}return A},e.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(p(this))return"0";if(m(this))return"-"+y(this).toString(A);for(var I=l(Math.pow(A,6)),k=this,D="";;){var M=S(k,I).g;k=v(k,M.j(I));var z=((0<k.g.length?k.g[0]:k.h)>>>0).toString(A);if(k=M,p(k))return z+D;for(;6>z.length;)z="0"+z;D=z+D}},e.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function p(A){if(A.h!=0)return!1;for(var I=0;I<A.g.length;I++)if(A.g[I]!=0)return!1;return!0}function m(A){return A.h==-1}e.l=function(A){return A=v(this,A),m(A)?-1:p(A)?0:1};function y(A){for(var I=A.g.length,k=[],D=0;D<I;D++)k[D]=~A.g[D];return new o(k,~A.h).add(f)}e.abs=function(){return m(this)?y(this):this},e.add=function(A){for(var I=Math.max(this.g.length,A.g.length),k=[],D=0,M=0;M<=I;M++){var z=D+(this.i(M)&65535)+(A.i(M)&65535),O=(z>>>16)+(this.i(M)>>>16)+(A.i(M)>>>16);D=O>>>16,z&=65535,O&=65535,k[M]=O<<16|z}return new o(k,k[k.length-1]&-2147483648?-1:0)};function v(A,I){return A.add(y(I))}e.j=function(A){if(p(this)||p(A))return d;if(m(this))return m(A)?y(this).j(y(A)):y(y(this).j(A));if(m(A))return y(this.j(y(A)));if(0>this.l(h)&&0>A.l(h))return l(this.m()*A.m());for(var I=this.g.length+A.g.length,k=[],D=0;D<2*I;D++)k[D]=0;for(D=0;D<this.g.length;D++)for(var M=0;M<A.g.length;M++){var z=this.i(D)>>>16,O=this.i(D)&65535,$=A.i(M)>>>16,F=A.i(M)&65535;k[2*D+2*M]+=O*F,w(k,2*D+2*M),k[2*D+2*M+1]+=z*F,w(k,2*D+2*M+1),k[2*D+2*M+1]+=O*$,w(k,2*D+2*M+1),k[2*D+2*M+2]+=z*$,w(k,2*D+2*M+2)}for(D=0;D<I;D++)k[D]=k[2*D+1]<<16|k[2*D];for(D=I;D<2*I;D++)k[D]=0;return new o(k,0)};function w(A,I){for(;(A[I]&65535)!=A[I];)A[I+1]+=A[I]>>>16,A[I]&=65535,I++}function x(A,I){this.g=A,this.h=I}function S(A,I){if(p(I))throw Error("division by zero");if(p(A))return new x(d,d);if(m(A))return I=S(y(A),I),new x(y(I.g),y(I.h));if(m(I))return I=S(A,y(I)),new x(y(I.g),I.h);if(30<A.g.length){if(m(A)||m(I))throw Error("slowDivide_ only works with positive integers.");for(var k=f,D=I;0>=D.l(A);)k=E(k),D=E(D);var M=T(k,1),z=T(D,1);for(D=T(D,2),k=T(k,2);!p(D);){var O=z.add(D);0>=O.l(A)&&(M=M.add(k),z=O),D=T(D,1),k=T(k,1)}return I=v(A,M.j(I)),new x(M,I)}for(M=d;0<=A.l(I);){for(k=Math.max(1,Math.floor(A.m()/I.m())),D=Math.ceil(Math.log(k)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),z=l(k),O=z.j(I);m(O)||0<O.l(A);)k-=D,z=l(k),O=z.j(I);p(z)&&(z=f),M=M.add(z),A=v(A,O)}return new x(M,A)}e.A=function(A){return S(this,A).h},e.and=function(A){for(var I=Math.max(this.g.length,A.g.length),k=[],D=0;D<I;D++)k[D]=this.i(D)&A.i(D);return new o(k,this.h&A.h)},e.or=function(A){for(var I=Math.max(this.g.length,A.g.length),k=[],D=0;D<I;D++)k[D]=this.i(D)|A.i(D);return new o(k,this.h|A.h)},e.xor=function(A){for(var I=Math.max(this.g.length,A.g.length),k=[],D=0;D<I;D++)k[D]=this.i(D)^A.i(D);return new o(k,this.h^A.h)};function E(A){for(var I=A.g.length+1,k=[],D=0;D<I;D++)k[D]=A.i(D)<<1|A.i(D-1)>>>31;return new o(k,A.h)}function T(A,I){var k=I>>5;I%=32;for(var D=A.g.length-k,M=[],z=0;z<D;z++)M[z]=0<I?A.i(z+k)>>>I|A.i(z+k+1)<<32-I:A.i(z+k);return new o(M,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,bPe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,eb=o}).apply(typeof qpe<"u"?qpe:typeof self<"u"?self:typeof window<"u"?window:{});var pO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _Pe,wPe,aA,xPe,ND,EH,EPe,SPe,TPe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(R,W,J){return R==Array.prototype||R==Object.prototype||(R[W]=J.value),R};function n(R){R=[typeof globalThis=="object"&&globalThis,R,typeof window=="object"&&window,typeof self=="object"&&self,typeof pO=="object"&&pO];for(var W=0;W<R.length;++W){var J=R[W];if(J&&J.Math==Math)return J}throw Error("Cannot find global object")}var r=n(this);function i(R,W){if(W)e:{var J=r;R=R.split(".");for(var ae=0;ae<R.length-1;ae++){var Fe=R[ae];if(!(Fe in J))break e;J=J[Fe]}R=R[R.length-1],ae=J[R],W=W(ae),W!=ae&&W!=null&&t(J,R,{configurable:!0,writable:!0,value:W})}}function s(R,W){R instanceof String&&(R+="");var J=0,ae=!1,Fe={next:function(){if(!ae&&J<R.length){var Ze=J++;return{value:W(Ze,R[Ze]),done:!1}}return ae=!0,{done:!0,value:void 0}}};return Fe[Symbol.iterator]=function(){return Fe},Fe}i("Array.prototype.values",function(R){return R||function(){return s(this,function(W,J){return J})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(R){var W=typeof R;return W=W!="object"?W:R?Array.isArray(R)?"array":W:"null",W=="array"||W=="object"&&typeof R.length=="number"}function l(R){var W=typeof R;return W=="object"&&R!=null||W=="function"}function c(R,W,J){return R.call.apply(R.bind,arguments)}function d(R,W,J){if(!R)throw Error();if(2<arguments.length){var ae=Array.prototype.slice.call(arguments,2);return function(){var Fe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Fe,ae),R.apply(W,Fe)}}return function(){return R.apply(W,arguments)}}function f(R,W,J){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:d,f.apply(null,arguments)}function h(R,W){var J=Array.prototype.slice.call(arguments,1);return function(){var ae=J.slice();return ae.push.apply(ae,arguments),R.apply(this,ae)}}function p(R,W){function J(){}J.prototype=W.prototype,R.aa=W.prototype,R.prototype=new J,R.prototype.constructor=R,R.Qb=function(ae,Fe,Ze){for(var Pt=Array(arguments.length-2),wi=2;wi<arguments.length;wi++)Pt[wi-2]=arguments[wi];return W.prototype[Fe].apply(ae,Pt)}}function m(R){const W=R.length;if(0<W){const J=Array(W);for(let ae=0;ae<W;ae++)J[ae]=R[ae];return J}return[]}function y(R,W){for(let J=1;J<arguments.length;J++){const ae=arguments[J];if(u(ae)){const Fe=R.length||0,Ze=ae.length||0;R.length=Fe+Ze;for(let Pt=0;Pt<Ze;Pt++)R[Fe+Pt]=ae[Pt]}else R.push(ae)}}class v{constructor(W,J){this.i=W,this.j=J,this.h=0,this.g=null}get(){let W;return 0<this.h?(this.h--,W=this.g,this.g=W.next,W.next=null):W=this.i(),W}}function w(R){return/^[\s\xa0]*$/.test(R)}function x(){var R=a.navigator;return R&&(R=R.userAgent)?R:""}function S(R){return S[" "](R),R}S[" "]=function(){};var E=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function T(R,W,J){for(const ae in R)W.call(J,R[ae],ae,R)}function A(R,W){for(const J in R)W.call(void 0,R[J],J,R)}function I(R){const W={};for(const J in R)W[J]=R[J];return W}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(R,W){let J,ae;for(let Fe=1;Fe<arguments.length;Fe++){ae=arguments[Fe];for(J in ae)R[J]=ae[J];for(let Ze=0;Ze<k.length;Ze++)J=k[Ze],Object.prototype.hasOwnProperty.call(ae,J)&&(R[J]=ae[J])}}function M(R){var W=1;R=R.split(":");const J=[];for(;0<W&&R.length;)J.push(R.shift()),W--;return R.length&&J.push(R.join(":")),J}function z(R){a.setTimeout(()=>{throw R},0)}function O(){var R=K;let W=null;return R.g&&(W=R.g,R.g=R.g.next,R.g||(R.h=null),W.next=null),W}class ${constructor(){this.h=this.g=null}add(W,J){const ae=F.get();ae.set(W,J),this.h?this.h.next=ae:this.g=ae,this.h=ae}}var F=new v(()=>new B,R=>R.reset());class B{constructor(){this.next=this.g=this.h=null}set(W,J){this.h=W,this.g=J,this.next=null}reset(){this.next=this.g=this.h=null}}let q,G=!1,K=new $,L=()=>{const R=a.Promise.resolve(void 0);q=()=>{R.then(V)}};var V=()=>{for(var R;R=O();){try{R.h.call(R.g)}catch(J){z(J)}var W=F;W.j(R),100>W.h&&(W.h++,R.next=W.g,W.g=R)}G=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(R,W){this.type=R,this.g=this.target=W,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var Q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var R=!1,W=Object.defineProperty({},"passive",{get:function(){R=!0}});try{const J=()=>{};a.addEventListener("test",J,W),a.removeEventListener("test",J,W)}catch{}return R}();function Z(R,W){if(H.call(this,R?R.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,R){var J=this.type=R.type,ae=R.changedTouches&&R.changedTouches.length?R.changedTouches[0]:null;if(this.target=R.target||R.srcElement,this.g=W,W=R.relatedTarget){if(E){e:{try{S(W.nodeName);var Fe=!0;break e}catch{}Fe=!1}Fe||(W=null)}}else J=="mouseover"?W=R.fromElement:J=="mouseout"&&(W=R.toElement);this.relatedTarget=W,ae?(this.clientX=ae.clientX!==void 0?ae.clientX:ae.pageX,this.clientY=ae.clientY!==void 0?ae.clientY:ae.pageY,this.screenX=ae.screenX||0,this.screenY=ae.screenY||0):(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0),this.button=R.button,this.key=R.key||"",this.ctrlKey=R.ctrlKey,this.altKey=R.altKey,this.shiftKey=R.shiftKey,this.metaKey=R.metaKey,this.pointerId=R.pointerId||0,this.pointerType=typeof R.pointerType=="string"?R.pointerType:ne[R.pointerType]||"",this.state=R.state,this.i=R,R.defaultPrevented&&Z.aa.h.call(this)}}p(Z,H);var ne={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.aa.h.call(this);var R=this.i;R.preventDefault?R.preventDefault():R.returnValue=!1};var ue="closure_listenable_"+(1e6*Math.random()|0),le=0;function ce(R,W,J,ae,Fe){this.listener=R,this.proxy=null,this.src=W,this.type=J,this.capture=!!ae,this.ha=Fe,this.key=++le,this.da=this.fa=!1}function ge(R){R.da=!0,R.listener=null,R.proxy=null,R.src=null,R.ha=null}function se(R){this.src=R,this.g={},this.h=0}se.prototype.add=function(R,W,J,ae,Fe){var Ze=R.toString();R=this.g[Ze],R||(R=this.g[Ze]=[],this.h++);var Pt=Ee(R,W,ae,Fe);return-1<Pt?(W=R[Pt],J||(W.fa=!1)):(W=new ce(W,this.src,Ze,!!ae,Fe),W.fa=J,R.push(W)),W};function te(R,W){var J=W.type;if(J in R.g){var ae=R.g[J],Fe=Array.prototype.indexOf.call(ae,W,void 0),Ze;(Ze=0<=Fe)&&Array.prototype.splice.call(ae,Fe,1),Ze&&(ge(W),R.g[J].length==0&&(delete R.g[J],R.h--))}}function Ee(R,W,J,ae){for(var Fe=0;Fe<R.length;++Fe){var Ze=R[Fe];if(!Ze.da&&Ze.listener==W&&Ze.capture==!!J&&Ze.ha==ae)return Fe}return-1}var we="closure_lm_"+(1e6*Math.random()|0),De={};function Le(R,W,J,ae,Fe){if(Array.isArray(W)){for(var Ze=0;Ze<W.length;Ze++)Le(R,W[Ze],J,ae,Fe);return null}return J=It(J),R&&R[ue]?R.K(W,J,l(ae)?!!ae.capture:!1,Fe):Ne(R,W,J,!1,ae,Fe)}function Ne(R,W,J,ae,Fe,Ze){if(!W)throw Error("Invalid event type");var Pt=l(Fe)?!!Fe.capture:!!Fe,wi=Se(R);if(wi||(R[we]=wi=new se(R)),J=wi.add(W,J,ae,Pt,Ze),J.proxy)return J;if(ae=Te(),J.proxy=ae,ae.src=R,ae.listener=J,R.addEventListener)Q||(Fe=Pt),Fe===void 0&&(Fe=!1),R.addEventListener(W.toString(),ae,Fe);else if(R.attachEvent)R.attachEvent(Ue(W.toString()),ae);else if(R.addListener&&R.removeListener)R.addListener(ae);else throw Error("addEventListener and attachEvent are unavailable.");return J}function Te(){function R(J){return W.call(R.src,R.listener,J)}const W=Ve;return R}function qe(R,W,J,ae,Fe){if(Array.isArray(W))for(var Ze=0;Ze<W.length;Ze++)qe(R,W[Ze],J,ae,Fe);else ae=l(ae)?!!ae.capture:!!ae,J=It(J),R&&R[ue]?(R=R.i,W=String(W).toString(),W in R.g&&(Ze=R.g[W],J=Ee(Ze,J,ae,Fe),-1<J&&(ge(Ze[J]),Array.prototype.splice.call(Ze,J,1),Ze.length==0&&(delete R.g[W],R.h--)))):R&&(R=Se(R))&&(W=R.g[W.toString()],R=-1,W&&(R=Ee(W,J,ae,Fe)),(J=-1<R?W[R]:null)&&Qe(J))}function Qe(R){if(typeof R!="number"&&R&&!R.da){var W=R.src;if(W&&W[ue])te(W.i,R);else{var J=R.type,ae=R.proxy;W.removeEventListener?W.removeEventListener(J,ae,R.capture):W.detachEvent?W.detachEvent(Ue(J),ae):W.addListener&&W.removeListener&&W.removeListener(ae),(J=Se(W))?(te(J,R),J.h==0&&(J.src=null,W[we]=null)):ge(R)}}}function Ue(R){return R in De?De[R]:De[R]="on"+R}function Ve(R,W){if(R.da)R=!0;else{W=new Z(W,this);var J=R.listener,ae=R.ha||R.src;R.fa&&Qe(R),R=J.call(ae,W)}return R}function Se(R){return R=R[we],R instanceof se?R:null}var it="__closure_events_fn_"+(1e9*Math.random()>>>0);function It(R){return typeof R=="function"?R:(R[it]||(R[it]=function(W){return R.handleEvent(W)}),R[it])}function Re(){X.call(this),this.i=new se(this),this.M=this,this.F=null}p(Re,X),Re.prototype[ue]=!0,Re.prototype.removeEventListener=function(R,W,J,ae){qe(this,R,W,J,ae)};function Ge(R,W){var J,ae=R.F;if(ae)for(J=[];ae;ae=ae.F)J.push(ae);if(R=R.M,ae=W.type||W,typeof W=="string")W=new H(W,R);else if(W instanceof H)W.target=W.target||R;else{var Fe=W;W=new H(ae,R),D(W,Fe)}if(Fe=!0,J)for(var Ze=J.length-1;0<=Ze;Ze--){var Pt=W.g=J[Ze];Fe=ot(Pt,ae,!0,W)&&Fe}if(Pt=W.g=R,Fe=ot(Pt,ae,!0,W)&&Fe,Fe=ot(Pt,ae,!1,W)&&Fe,J)for(Ze=0;Ze<J.length;Ze++)Pt=W.g=J[Ze],Fe=ot(Pt,ae,!1,W)&&Fe}Re.prototype.N=function(){if(Re.aa.N.call(this),this.i){var R=this.i,W;for(W in R.g){for(var J=R.g[W],ae=0;ae<J.length;ae++)ge(J[ae]);delete R.g[W],R.h--}}this.F=null},Re.prototype.K=function(R,W,J,ae){return this.i.add(String(R),W,!1,J,ae)},Re.prototype.L=function(R,W,J,ae){return this.i.add(String(R),W,!0,J,ae)};function ot(R,W,J,ae){if(W=R.i.g[String(W)],!W)return!0;W=W.concat();for(var Fe=!0,Ze=0;Ze<W.length;++Ze){var Pt=W[Ze];if(Pt&&!Pt.da&&Pt.capture==J){var wi=Pt.listener,po=Pt.ha||Pt.src;Pt.fa&&te(R.i,Pt),Fe=wi.call(po,ae)!==!1&&Fe}}return Fe&&!ae.defaultPrevented}function ct(R,W,J){if(typeof R=="function")J&&(R=f(R,J));else if(R&&typeof R.handleEvent=="function")R=f(R.handleEvent,R);else throw Error("Invalid listener argument");return 2147483647<Number(W)?-1:a.setTimeout(R,W||0)}function Mt(R){R.g=ct(()=>{R.g=null,R.i&&(R.i=!1,Mt(R))},R.l);const W=R.h;R.h=null,R.m.apply(null,W)}class Nn extends X{constructor(W,J){super(),this.m=W,this.l=J,this.h=null,this.i=!1,this.g=null}j(W){this.h=arguments,this.g?this.i=!0:Mt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rr(R){X.call(this),this.h=R,this.g={}}p(Rr,X);var xr=[];function Mr(R){T(R.g,function(W,J){this.g.hasOwnProperty(J)&&Qe(W)},R),R.g={}}Rr.prototype.N=function(){Rr.aa.N.call(this),Mr(this)},Rr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fn=a.JSON.stringify,qn=a.JSON.parse,lr=class{stringify(R){return a.JSON.stringify(R,void 0)}parse(R){return a.JSON.parse(R,void 0)}};function cr(){}cr.prototype.h=null;function bs(R){return R.h||(R.h=R.i())}function Ai(){}var ci={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wn(){H.call(this,"d")}p(Wn,H);function or(){H.call(this,"c")}p(or,H);var Wi={},qu=null;function $o(){return qu=qu||new Re}Wi.La="serverreachability";function lu(R){H.call(this,Wi.La,R)}p(lu,H);function Rt(R){const W=$o();Ge(W,new lu(W))}Wi.STAT_EVENT="statevent";function yi(R,W){H.call(this,Wi.STAT_EVENT,R),this.stat=W}p(yi,H);function xn(R){const W=$o();Ge(W,new yi(W,R))}Wi.Ma="timingevent";function $r(R,W){H.call(this,Wi.Ma,R),this.size=W}p($r,H);function Vr(R,W){if(typeof R!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){R()},W)}function vi(){this.g=!0}vi.prototype.xa=function(){this.g=!1};function ve(R,W,J,ae,Fe,Ze){R.info(function(){if(R.g)if(Ze)for(var Pt="",wi=Ze.split("&"),po=0;po<wi.length;po++){var Fr=wi[po].split("=");if(1<Fr.length){var Fo=Fr[0];Fr=Fr[1];var Zs=Fo.split("_");Pt=2<=Zs.length&&Zs[1]=="type"?Pt+(Fo+"="+Fr+"&"):Pt+(Fo+"=redacted&")}}else Pt=null;else Pt=Ze;return"XMLHTTP REQ ("+ae+") [attempt "+Fe+"]: "+W+`
`+J+`
`+Pt})}function he(R,W,J,ae,Fe,Ze,Pt){R.info(function(){return"XMLHTTP RESP ("+ae+") [ attempt "+Fe+"]: "+W+`
`+J+`
`+Ze+" "+Pt})}function xe(R,W,J,ae){R.info(function(){return"XMLHTTP TEXT ("+W+"): "+Ye(R,J)+(ae?" "+ae:"")})}function We(R,W){R.info(function(){return"TIMEOUT: "+W})}vi.prototype.info=function(){};function Ye(R,W){if(!R.g)return W;if(!W)return null;try{var J=JSON.parse(W);if(J){for(R=0;R<J.length;R++)if(Array.isArray(J[R])){var ae=J[R];if(!(2>ae.length)){var Fe=ae[1];if(Array.isArray(Fe)&&!(1>Fe.length)){var Ze=Fe[0];if(Ze!="noop"&&Ze!="stop"&&Ze!="close")for(var Pt=1;Pt<Fe.length;Pt++)Fe[Pt]=""}}}}return fn(J)}catch{return W}}var St={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ht={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},sn;function ar(){}p(ar,cr),ar.prototype.g=function(){return new XMLHttpRequest},ar.prototype.i=function(){return{}},sn=new ar;function dr(R,W,J,ae){this.j=R,this.i=W,this.l=J,this.R=ae||1,this.U=new Rr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gn}function Gn(){this.i=null,this.g="",this.h=!1}var Er={},Yr={};function dn(R,W,J){R.L=1,R.v=ur(ht(W)),R.m=J,R.P=!0,Sr(R,null)}function Sr(R,W){R.F=Date.now(),Yn(R),R.A=ht(R.v);var J=R.A,ae=R.R;Array.isArray(ae)||(ae=[String(ae)]),mh(J.i,"t",ae),R.C=0,J=R.j.J,R.h=new Gn,R.g=Bk(R.j,J?W:null,!R.m),0<R.O&&(R.M=new Nn(f(R.Y,R,R.g),R.O)),W=R.U,J=R.g,ae=R.ca;var Fe="readystatechange";Array.isArray(Fe)||(Fe&&(xr[0]=Fe.toString()),Fe=xr);for(var Ze=0;Ze<Fe.length;Ze++){var Pt=Le(J,Fe[Ze],ae||W.handleEvent,!1,W.h||W);if(!Pt)break;W.g[Pt.key]=Pt}W=R.H?I(R.H):{},R.m?(R.u||(R.u="POST"),W["Content-Type"]="application/x-www-form-urlencoded",R.g.ea(R.A,R.u,R.m,W)):(R.u="GET",R.g.ea(R.A,R.u,null,W)),Rt(),ve(R.i,R.u,R.A,R.l,R.R,R.m)}dr.prototype.ca=function(R){R=R.target;const W=this.M;W&&Li(R)==3?W.j():this.Y(R)},dr.prototype.Y=function(R){try{if(R==this.g)e:{const Zs=Li(this.g);var W=this.g.Ba();const Uc=this.g.Z();if(!(3>Zs)&&(Zs!=3||this.g&&(this.h.h||this.g.oa()||ho(this.g)))){this.J||Zs!=4||W==7||(W==8||0>=Uc?Rt(3):Rt(2)),di(this);var J=this.g.Z();this.X=J;t:if(bi(this)){var ae=ho(this.g);R="";var Fe=ae.length,Ze=Li(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Oi(this),Ks(this);var Pt="";break t}this.h.i=new a.TextDecoder}for(W=0;W<Fe;W++)this.h.h=!0,R+=this.h.i.decode(ae[W],{stream:!(Ze&&W==Fe-1)});ae.length=0,this.h.g+=R,this.C=0,Pt=this.h.g}else Pt=this.g.oa();if(this.o=J==200,he(this.i,this.u,this.A,this.l,this.R,Zs,J),this.o){if(this.T&&!this.K){t:{if(this.g){var wi,po=this.g;if((wi=po.g?po.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(wi)){var Fr=wi;break t}}Fr=null}if(J=Fr)xe(this.i,this.l,J,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ts(this,J);else{this.o=!1,this.s=3,xn(12),Oi(this),Ks(this);break e}}if(this.P){J=!0;let ql;for(;!this.J&&this.C<Pt.length;)if(ql=Tr(this,Pt),ql==Yr){Zs==4&&(this.s=4,xn(14),J=!1),xe(this.i,this.l,null,"[Incomplete Response]");break}else if(ql==Er){this.s=4,xn(15),xe(this.i,this.l,Pt,"[Invalid Chunk]"),J=!1;break}else xe(this.i,this.l,ql,null),ts(this,ql);if(bi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zs!=4||Pt.length!=0||this.h.h||(this.s=1,xn(16),J=!1),this.o=this.o&&J,!J)xe(this.i,this.l,Pt,"[Invalid Chunked Response]"),Oi(this),Ks(this);else if(0<Pt.length&&!this.W){this.W=!0;var Fo=this.j;Fo.g==this&&Fo.ba&&!Fo.M&&(Fo.j.info("Great, no buffering proxy detected. Bytes received: "+Pt.length),cT(Fo),Fo.M=!0,xn(11))}}else xe(this.i,this.l,Pt,null),ts(this,Pt);Zs==4&&Oi(this),this.o&&!this.J&&(Zs==4?O_(this.j,this):(this.o=!1,Yn(this)))}else zc(this.g),J==400&&0<Pt.indexOf("Unknown SID")?(this.s=3,xn(12)):(this.s=0,xn(13)),Oi(this),Ks(this)}}}catch{}finally{}};function bi(R){return R.g?R.u=="GET"&&R.L!=2&&R.j.Ca:!1}function Tr(R,W){var J=R.C,ae=W.indexOf(`
`,J);return ae==-1?Yr:(J=Number(W.substring(J,ae)),isNaN(J)?Er:(ae+=1,ae+J>W.length?Yr:(W=W.slice(ae,ae+J),R.C=ae+J,W)))}dr.prototype.cancel=function(){this.J=!0,Oi(this)};function Yn(R){R.S=Date.now()+R.I,Ys(R,R.I)}function Ys(R,W){if(R.B!=null)throw Error("WatchDog timer not null");R.B=Vr(f(R.ba,R),W)}function di(R){R.B&&(a.clearTimeout(R.B),R.B=null)}dr.prototype.ba=function(){this.B=null;const R=Date.now();0<=R-this.S?(We(this.i,this.A),this.L!=2&&(Rt(),xn(17)),Oi(this),this.s=2,Ks(this)):Ys(this,this.S-R)};function Ks(R){R.j.G==0||R.J||O_(R.j,R)}function Oi(R){di(R);var W=R.M;W&&typeof W.ma=="function"&&W.ma(),R.M=null,Mr(R.U),R.g&&(W=R.g,R.g=null,W.abort(),W.ma())}function ts(R,W){try{var J=R.j;if(J.G!=0&&(J.g==R||_s(J.h,R))){if(!R.K&&_s(J.h,R)&&J.G==3){try{var ae=J.Da.g.parse(W)}catch{ae=null}if(Array.isArray(ae)&&ae.length==3){var Fe=ae;if(Fe[0]==0){e:if(!J.u){if(J.g)if(J.g.F+3e3<R.F)N_(J),Vd(J);else break e;P_(J),xn(18)}}else J.za=Fe[1],0<J.za-J.T&&37500>Fe[2]&&J.F&&J.v==0&&!J.C&&(J.C=Vr(f(J.Za,J),6e3));if(1>=Wu(J.h)&&J.ca){try{J.ca()}catch{}J.ca=void 0}}else nm(J,11)}else if((R.K||J.g==R)&&N_(J),!w(W))for(Fe=J.Da.g.parse(W),W=0;W<Fe.length;W++){let Fr=Fe[W];if(J.T=Fr[0],Fr=Fr[1],J.G==2)if(Fr[0]=="c"){J.K=Fr[1],J.ia=Fr[2];const Fo=Fr[3];Fo!=null&&(J.la=Fo,J.j.info("VER="+J.la));const Zs=Fr[4];Zs!=null&&(J.Aa=Zs,J.j.info("SVER="+J.Aa));const Uc=Fr[5];Uc!=null&&typeof Uc=="number"&&0<Uc&&(ae=1.5*Uc,J.L=ae,J.j.info("backChannelRequestTimeoutMs_="+ae)),ae=J;const ql=R.g;if(ql){const $v=ql.g?ql.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($v){var Ze=ae.h;Ze.g||$v.indexOf("spdy")==-1&&$v.indexOf("quic")==-1&&$v.indexOf("h2")==-1||(Ze.j=Ze.l,Ze.g=new Set,Ze.h&&(re(Ze,Ze.h),Ze.h=null))}if(ae.D){const M_=ql.g?ql.g.getResponseHeader("X-HTTP-Session-Id"):null;M_&&(ae.ya=M_,tn(ae.I,ae.D,M_))}}J.G=3,J.l&&J.l.ua(),J.ba&&(J.R=Date.now()-R.F,J.j.info("Handshake RTT: "+J.R+"ms")),ae=J;var Pt=R;if(ae.qa=jk(ae,ae.J?ae.ia:null,ae.W),Pt.K){_e(ae.h,Pt);var wi=Pt,po=ae.L;po&&(wi.I=po),wi.B&&(di(wi),Yn(wi)),ae.g=Pt}else Mv(ae);0<J.i.length&&yh(J)}else Fr[0]!="stop"&&Fr[0]!="close"||nm(J,7);else J.G==3&&(Fr[0]=="stop"||Fr[0]=="close"?Fr[0]=="stop"?nm(J,7):Js(J):Fr[0]!="noop"&&J.l&&J.l.ta(Fr),J.v=0)}}Rt(4)}catch{}}var co=class{constructor(R,W){this.g=R,this.map=W}};function Xs(R){this.l=R||10,a.PerformanceNavigationTiming?(R=a.performance.getEntriesByType("navigation"),R=0<R.length&&(R[0].nextHopProtocol=="hq"||R[0].nextHopProtocol=="h2")):R=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=R?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _i(R){return R.h?!0:R.g?R.g.size>=R.j:!1}function Wu(R){return R.h?1:R.g?R.g.size:0}function _s(R,W){return R.h?R.h==W:R.g?R.g.has(W):!1}function re(R,W){R.g?R.g.add(W):R.h=W}function _e(R,W){R.h&&R.h==W?R.h=null:R.g&&R.g.has(W)&&R.g.delete(W)}Xs.prototype.cancel=function(){if(this.i=de(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const R of this.g.values())R.cancel();this.g.clear()}};function de(R){if(R.h!=null)return R.i.concat(R.h.D);if(R.g!=null&&R.g.size!==0){let W=R.i;for(const J of R.g.values())W=W.concat(J.D);return W}return m(R.i)}function Pe(R){if(R.V&&typeof R.V=="function")return R.V();if(typeof Map<"u"&&R instanceof Map||typeof Set<"u"&&R instanceof Set)return Array.from(R.values());if(typeof R=="string")return R.split("");if(u(R)){for(var W=[],J=R.length,ae=0;ae<J;ae++)W.push(R[ae]);return W}W=[],J=0;for(ae in R)W[J++]=R[ae];return W}function Me(R){if(R.na&&typeof R.na=="function")return R.na();if(!R.V||typeof R.V!="function"){if(typeof Map<"u"&&R instanceof Map)return Array.from(R.keys());if(!(typeof Set<"u"&&R instanceof Set)){if(u(R)||typeof R=="string"){var W=[];R=R.length;for(var J=0;J<R;J++)W.push(J);return W}W=[],J=0;for(const ae in R)W[J++]=ae;return W}}}function Ie(R,W){if(R.forEach&&typeof R.forEach=="function")R.forEach(W,void 0);else if(u(R)||typeof R=="string")Array.prototype.forEach.call(R,W,void 0);else for(var J=Me(R),ae=Pe(R),Fe=ae.length,Ze=0;Ze<Fe;Ze++)W.call(void 0,ae[Ze],J&&J[Ze],R)}var nt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ft(R,W){if(R){R=R.split("&");for(var J=0;J<R.length;J++){var ae=R[J].indexOf("="),Fe=null;if(0<=ae){var Ze=R[J].substring(0,ae);Fe=R[J].substring(ae+1)}else Ze=R[J];W(Ze,Fe?decodeURIComponent(Fe.replace(/\+/g," ")):"")}}}function pt(R){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,R instanceof pt){this.h=R.h,xt(this,R.j),this.o=R.o,this.g=R.g,Bt(this,R.s),this.l=R.l;var W=R.i,J=new na;J.i=W.i,W.g&&(J.g=new Map(W.g),J.h=W.h),On(this,J),this.m=R.m}else R&&(W=String(R).match(nt))?(this.h=!1,xt(this,W[1]||"",!0),this.o=rn(W[2]||""),this.g=rn(W[3]||"",!0),Bt(this,W[4]),this.l=rn(W[5]||"",!0),On(this,W[6]||"",!0),this.m=rn(W[7]||"")):(this.h=!1,this.i=new na(null,this.h))}pt.prototype.toString=function(){var R=[],W=this.j;W&&R.push(Kr(W,Gu,!0),":");var J=this.g;return(J||W=="file")&&(R.push("//"),(W=this.o)&&R.push(Kr(W,Gu,!0),"@"),R.push(encodeURIComponent(String(J)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),J=this.s,J!=null&&R.push(":",String(J))),(J=this.l)&&(this.g&&J.charAt(0)!="/"&&R.push("/"),R.push(Kr(J,J.charAt(0)=="/"?qg:Fc,!0))),(J=this.i.toString())&&R.push("?",J),(J=this.m)&&R.push("#",Kr(J,Wg)),R.join("")};function ht(R){return new pt(R)}function xt(R,W,J){R.j=J?rn(W,!0):W,R.j&&(R.j=R.j.replace(/:$/,""))}function Bt(R,W){if(W){if(W=Number(W),isNaN(W)||0>W)throw Error("Bad port number "+W);R.s=W}else R.s=null}function On(R,W,J){W instanceof na?(R.i=W,Yu(R.i,R.h)):(J||(W=Kr(W,ph)),R.i=new na(W,R.h))}function tn(R,W,J){R.i.set(W,J)}function ur(R){return tn(R,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),R}function rn(R,W){return R?W?decodeURI(R.replace(/%25/g,"%2525")):decodeURIComponent(R):""}function Kr(R,W,J){return typeof R=="string"?(R=encodeURI(R).replace(W,fo),J&&(R=R.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R):null}function fo(R){return R=R.charCodeAt(0),"%"+(R>>4&15).toString(16)+(R&15).toString(16)}var Gu=/[#\/\?@]/g,Fc=/[#\?:]/g,qg=/[#\?]/g,ph=/[#\?@]/g,Wg=/#/g;function na(R,W){this.h=this.g=null,this.i=R||null,this.j=!!W}function cs(R){R.g||(R.g=new Map,R.h=0,R.i&&ft(R.i,function(W,J){R.add(decodeURIComponent(W.replace(/\+/g," ")),J)}))}e=na.prototype,e.add=function(R,W){cs(this),this.i=null,R=du(this,R);var J=this.g.get(R);return J||this.g.set(R,J=[]),J.push(W),this.h+=1,this};function Lo(R,W){cs(R),W=du(R,W),R.g.has(W)&&(R.i=null,R.h-=R.g.get(W).length,R.g.delete(W))}function cu(R,W){return cs(R),W=du(R,W),R.g.has(W)}e.forEach=function(R,W){cs(this),this.g.forEach(function(J,ae){J.forEach(function(Fe){R.call(W,Fe,ae,this)},this)},this)},e.na=function(){cs(this);const R=Array.from(this.g.values()),W=Array.from(this.g.keys()),J=[];for(let ae=0;ae<W.length;ae++){const Fe=R[ae];for(let Ze=0;Ze<Fe.length;Ze++)J.push(W[ae])}return J},e.V=function(R){cs(this);let W=[];if(typeof R=="string")cu(this,R)&&(W=W.concat(this.g.get(du(this,R))));else{R=Array.from(this.g.values());for(let J=0;J<R.length;J++)W=W.concat(R[J])}return W},e.set=function(R,W){return cs(this),this.i=null,R=du(this,R),cu(this,R)&&(this.h-=this.g.get(R).length),this.g.set(R,[W]),this.h+=1,this},e.get=function(R,W){return R?(R=this.V(R),0<R.length?String(R[0]):W):W};function mh(R,W,J){Lo(R,W),0<J.length&&(R.i=null,R.g.set(du(R,W),m(J)),R.h+=J.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const R=[],W=Array.from(this.g.keys());for(var J=0;J<W.length;J++){var ae=W[J];const Ze=encodeURIComponent(String(ae)),Pt=this.V(ae);for(ae=0;ae<Pt.length;ae++){var Fe=Ze;Pt[ae]!==""&&(Fe+="="+encodeURIComponent(String(Pt[ae]))),R.push(Fe)}}return this.i=R.join("&")};function du(R,W){return W=String(W),R.j&&(W=W.toLowerCase()),W}function Yu(R,W){W&&!R.j&&(cs(R),R.i=null,R.g.forEach(function(J,ae){var Fe=ae.toLowerCase();ae!=Fe&&(Lo(this,ae),mh(this,Fe,J))},R)),R.j=W}function A_(R,W){const J=new vi;if(a.Image){const ae=new Image;ae.onload=h(Qs,J,"TestLoadImage: loaded",!0,W,ae),ae.onerror=h(Qs,J,"TestLoadImage: error",!1,W,ae),ae.onabort=h(Qs,J,"TestLoadImage: abort",!1,W,ae),ae.ontimeout=h(Qs,J,"TestLoadImage: timeout",!1,W,ae),a.setTimeout(function(){ae.ontimeout&&ae.ontimeout()},1e4),ae.src=R}else W(!1)}function jc(R,W){const J=new vi,ae=new AbortController,Fe=setTimeout(()=>{ae.abort(),Qs(J,"TestPingServer: timeout",!1,W)},1e4);fetch(R,{signal:ae.signal}).then(Ze=>{clearTimeout(Fe),Ze.ok?Qs(J,"TestPingServer: ok",!0,W):Qs(J,"TestPingServer: server error",!1,W)}).catch(()=>{clearTimeout(Fe),Qs(J,"TestPingServer: error",!1,W)})}function Qs(R,W,J,ae,Fe){try{Fe&&(Fe.onload=null,Fe.onerror=null,Fe.onabort=null,Fe.ontimeout=null),ae(J)}catch{}}function lT(){this.g=new lr}function Dv(R,W,J){const ae=J||"";try{Ie(R,function(Fe,Ze){let Pt=Fe;l(Fe)&&(Pt=fn(Fe)),W.push(ae+Ze+"="+encodeURIComponent(Pt))})}catch(Fe){throw W.push(ae+"type="+encodeURIComponent("_badmap")),Fe}}function Bc(R){this.l=R.Ub||null,this.j=R.eb||!1}p(Bc,cr),Bc.prototype.g=function(){return new gh(this.l,this.j)},Bc.prototype.i=function(R){return function(){return R}}({});function gh(R,W){Re.call(this),this.D=R,this.o=W,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(gh,Re),e=gh.prototype,e.open=function(R,W){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=R,this.A=W,this.readyState=1,Ku(this)},e.send=function(R){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const W={headers:this.u,method:this.B,credentials:this.m,cache:void 0};R&&(W.body=R),(this.D||a).fetch(new Request(this.A,W)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hl(this)),this.readyState=0},e.Sa=function(R){if(this.g&&(this.l=R,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=R.headers,this.readyState=2,Ku(this)),this.g&&(this.readyState=3,Ku(this),this.g)))if(this.responseType==="arraybuffer")R.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in R){if(this.j=R.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;I_(this)}else R.text().then(this.Ra.bind(this),this.ga.bind(this))};function I_(R){R.j.read().then(R.Pa.bind(R)).catch(R.ga.bind(R))}e.Pa=function(R){if(this.g){if(this.o&&R.value)this.response.push(R.value);else if(!this.o){var W=R.value?R.value:new Uint8Array(0);(W=this.v.decode(W,{stream:!R.done}))&&(this.response=this.responseText+=W)}R.done?Hl(this):Ku(this),this.readyState==3&&I_(this)}},e.Ra=function(R){this.g&&(this.response=this.responseText=R,Hl(this))},e.Qa=function(R){this.g&&(this.response=R,Hl(this))},e.ga=function(){this.g&&Hl(this)};function Hl(R){R.readyState=4,R.l=null,R.j=null,R.v=null,Ku(R)}e.setRequestHeader=function(R,W){this.u.append(R,W)},e.getResponseHeader=function(R){return this.h&&this.h.get(R.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const R=[],W=this.h.entries();for(var J=W.next();!J.done;)J=J.value,R.push(J[0]+": "+J[1]),J=W.next();return R.join(`\r
`)};function Ku(R){R.onreadystatechange&&R.onreadystatechange.call(R)}Object.defineProperty(gh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(R){this.m=R?"include":"same-origin"}});function Ud(R){let W="";return T(R,function(J,ae){W+=ae,W+=":",W+=J,W+=`\r
`}),W}function pe(R,W,J){e:{for(ae in J){var ae=!1;break e}ae=!0}ae||(J=Ud(J),typeof R=="string"?J!=null&&encodeURIComponent(String(J)):tn(R,W,J))}function Ce(R){Re.call(this),this.headers=new Map,this.o=R||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(Ce,Re);var Xe=/^https?$/i,qt=["POST","PUT"];e=Ce.prototype,e.Ha=function(R){this.J=R},e.ea=function(R,W,J,ae){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+R);W=W?W.toUpperCase():"GET",this.D=R,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():sn.g(),this.v=this.o?bs(this.o):bs(sn),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(W,String(R),!0),this.B=!1}catch(Ze){tr(this,Ze);return}if(R=J||"",J=new Map(this.headers),ae)if(Object.getPrototypeOf(ae)===Object.prototype)for(var Fe in ae)J.set(Fe,ae[Fe]);else if(typeof ae.keys=="function"&&typeof ae.get=="function")for(const Ze of ae.keys())J.set(Ze,ae.get(Ze));else throw Error("Unknown input type for opt_headers: "+String(ae));ae=Array.from(J.keys()).find(Ze=>Ze.toLowerCase()=="content-type"),Fe=a.FormData&&R instanceof a.FormData,!(0<=Array.prototype.indexOf.call(qt,W,void 0))||ae||Fe||J.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ze,Pt]of J)this.g.setRequestHeader(Ze,Pt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{si(this),this.u=!0,this.g.send(R),this.u=!1}catch(Ze){tr(this,Ze)}};function tr(R,W){R.h=!1,R.g&&(R.j=!0,R.g.abort(),R.j=!1),R.l=W,R.m=5,Lr(R),Kn(R)}function Lr(R){R.A||(R.A=!0,Ge(R,"complete"),Ge(R,"error"))}e.abort=function(R){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=R||7,Ge(this,"complete"),Ge(this,"abort"),Kn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kn(this,!0)),Ce.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?fi(this):this.bb())},e.bb=function(){fi(this)};function fi(R){if(R.h&&typeof o<"u"&&(!R.v[1]||Li(R)!=4||R.Z()!=2)){if(R.u&&Li(R)==4)ct(R.Ea,0,R);else if(Ge(R,"readystatechange"),Li(R)==4){R.h=!1;try{const Pt=R.Z();e:switch(Pt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var W=!0;break e;default:W=!1}var J;if(!(J=W)){var ae;if(ae=Pt===0){var Fe=String(R.D).match(nt)[1]||null;!Fe&&a.self&&a.self.location&&(Fe=a.self.location.protocol.slice(0,-1)),ae=!Xe.test(Fe?Fe.toLowerCase():"")}J=ae}if(J)Ge(R,"complete"),Ge(R,"success");else{R.m=6;try{var Ze=2<Li(R)?R.g.statusText:""}catch{Ze=""}R.l=Ze+" ["+R.Z()+"]",Lr(R)}}finally{Kn(R)}}}}function Kn(R,W){if(R.g){si(R);const J=R.g,ae=R.v[0]?()=>{}:null;R.g=null,R.v=null,W||Ge(R,"ready");try{J.onreadystatechange=ae}catch{}}}function si(R){R.I&&(a.clearTimeout(R.I),R.I=null)}e.isActive=function(){return!!this.g};function Li(R){return R.g?R.g.readyState:0}e.Z=function(){try{return 2<Li(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(R){if(this.g){var W=this.g.responseText;return R&&W.indexOf(R)==0&&(W=W.substring(R.length)),qn(W)}};function ho(R){try{if(!R.g)return null;if("response"in R.g)return R.g.response;switch(R.H){case"":case"text":return R.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in R.g)return R.g.mozResponseArrayBuffer}return null}catch{return null}}function zc(R){const W={};R=(R.g&&2<=Li(R)&&R.g.getAllResponseHeaders()||"").split(`\r
`);for(let ae=0;ae<R.length;ae++){if(w(R[ae]))continue;var J=M(R[ae]);const Fe=J[0];if(J=J[1],typeof J!="string")continue;J=J.trim();const Ze=W[Fe]||[];W[Fe]=Ze,Ze.push(J)}A(W,function(ae){return ae.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xu(R,W,J){return J&&J.internalChannelParams&&J.internalChannelParams[R]||W}function em(R){this.Aa=0,this.i=[],this.j=new vi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xu("failFast",!1,R),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xu("baseRetryDelayMs",5e3,R),this.cb=Xu("retryDelaySeedMs",1e4,R),this.Wa=Xu("forwardChannelMaxRetries",2,R),this.wa=Xu("forwardChannelRequestTimeoutMs",2e4,R),this.pa=R&&R.xmlHttpFactory||void 0,this.Xa=R&&R.Tb||void 0,this.Ca=R&&R.useFetchStreams||!1,this.L=void 0,this.J=R&&R.supportsCrossDomainXhr||!1,this.K="",this.h=new Xs(R&&R.concurrentRequestLimit),this.Da=new lT,this.P=R&&R.fastHandshake||!1,this.O=R&&R.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=R&&R.Rb||!1,R&&R.xa&&this.j.xa(),R&&R.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&R&&R.detectBufferingProxy||!1,this.ja=void 0,R&&R.longPollingTimeout&&0<R.longPollingTimeout&&(this.ja=R.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=em.prototype,e.la=8,e.G=1,e.connect=function(R,W,J,ae){xn(0),this.W=R,this.H=W||{},J&&ae!==void 0&&(this.H.OSID=J,this.H.OAID=ae),this.F=this.X,this.I=jk(this,null,this.W),yh(this)};function Js(R){if(R_(R),R.G==3){var W=R.U++,J=ht(R.I);if(tn(J,"SID",R.K),tn(J,"RID",W),tn(J,"TYPE","terminate"),tm(R,J),W=new dr(R,R.j,W),W.L=2,W.v=ur(ht(J)),J=!1,a.navigator&&a.navigator.sendBeacon)try{J=a.navigator.sendBeacon(W.v.toString(),"")}catch{}!J&&a.Image&&(new Image().src=W.v,J=!0),J||(W.g=Bk(W.j,null),W.g.ea(W.v)),W.F=Date.now(),Yn(W)}Fk(R)}function Vd(R){R.g&&(cT(R),R.g.cancel(),R.g=null)}function R_(R){Vd(R),R.u&&(a.clearTimeout(R.u),R.u=null),N_(R),R.h.cancel(),R.s&&(typeof R.s=="number"&&a.clearTimeout(R.s),R.s=null)}function yh(R){if(!_i(R.h)&&!R.s){R.s=!0;var W=R.Ga;q||L(),G||(q(),G=!0),K.add(W,R),R.B=0}}function a5(R,W){return Wu(R.h)>=R.h.j-(R.s?1:0)?!1:R.s?(R.i=W.D.concat(R.i),!0):R.G==1||R.G==2||R.B>=(R.Va?0:R.Wa)?!1:(R.s=Vr(f(R.Ga,R,W),Lk(R,R.B)),R.B++,!0)}e.Ga=function(R){if(this.s)if(this.s=null,this.G==1){if(!R){this.U=Math.floor(1e5*Math.random()),R=this.U++;const Fe=new dr(this,this.j,R);let Ze=this.o;if(this.S&&(Ze?(Ze=I(Ze),D(Ze,this.S)):Ze=this.S),this.m!==null||this.O||(Fe.H=Ze,Ze=null),this.P)e:{for(var W=0,J=0;J<this.i.length;J++){t:{var ae=this.i[J];if("__data__"in ae.map&&(ae=ae.map.__data__,typeof ae=="string")){ae=ae.length;break t}ae=void 0}if(ae===void 0)break;if(W+=ae,4096<W){W=J;break e}if(W===4096||J===this.i.length-1){W=J+1;break e}}W=1e3}else W=1e3;W=Gg(this,Fe,W),J=ht(this.I),tn(J,"RID",R),tn(J,"CVER",22),this.D&&tn(J,"X-HTTP-Session-Id",this.D),tm(this,J),Ze&&(this.O?W="headers="+encodeURIComponent(String(Ud(Ze)))+"&"+W:this.m&&pe(J,this.m,Ze)),re(this.h,Fe),this.Ua&&tn(J,"TYPE","init"),this.P?(tn(J,"$req",W),tn(J,"SID","null"),Fe.T=!0,dn(Fe,J,null)):dn(Fe,J,W),this.G=2}}else this.G==3&&(R?k_(this,R):this.i.length==0||_i(this.h)||k_(this))};function k_(R,W){var J;W?J=W.l:J=R.U++;const ae=ht(R.I);tn(ae,"SID",R.K),tn(ae,"RID",J),tn(ae,"AID",R.T),tm(R,ae),R.m&&R.o&&pe(ae,R.m,R.o),J=new dr(R,R.j,J,R.B+1),R.m===null&&(J.H=R.o),W&&(R.i=W.D.concat(R.i)),W=Gg(R,J,1e3),J.I=Math.round(.5*R.wa)+Math.round(.5*R.wa*Math.random()),re(R.h,J),dn(J,ae,W)}function tm(R,W){R.H&&T(R.H,function(J,ae){tn(W,ae,J)}),R.l&&Ie({},function(J,ae){tn(W,ae,J)})}function Gg(R,W,J){J=Math.min(R.i.length,J);var ae=R.l?f(R.l.Na,R.l,R):null;e:{var Fe=R.i;let Ze=-1;for(;;){const Pt=["count="+J];Ze==-1?0<J?(Ze=Fe[0].g,Pt.push("ofs="+Ze)):Ze=0:Pt.push("ofs="+Ze);let wi=!0;for(let po=0;po<J;po++){let Fr=Fe[po].g;const Fo=Fe[po].map;if(Fr-=Ze,0>Fr)Ze=Math.max(0,Fe[po].g-100),wi=!1;else try{Dv(Fo,Pt,"req"+Fr+"_")}catch{ae&&ae(Fo)}}if(wi){ae=Pt.join("&");break e}}}return R=R.i.splice(0,J),W.D=R,ae}function Mv(R){if(!R.g&&!R.u){R.Y=1;var W=R.Fa;q||L(),G||(q(),G=!0),K.add(W,R),R.v=0}}function P_(R){return R.g||R.u||3<=R.v?!1:(R.Y++,R.u=Vr(f(R.Fa,R),Lk(R,R.v)),R.v++,!0)}e.Fa=function(){if(this.u=null,$k(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var R=2*this.R;this.j.info("BP detection timer enabled: "+R),this.A=Vr(f(this.ab,this),R)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xn(10),Vd(this),$k(this))};function cT(R){R.A!=null&&(a.clearTimeout(R.A),R.A=null)}function $k(R){R.g=new dr(R,R.j,"rpc",R.Y),R.m===null&&(R.g.H=R.o),R.g.O=0;var W=ht(R.qa);tn(W,"RID","rpc"),tn(W,"SID",R.K),tn(W,"AID",R.T),tn(W,"CI",R.F?"0":"1"),!R.F&&R.ja&&tn(W,"TO",R.ja),tn(W,"TYPE","xmlhttp"),tm(R,W),R.m&&R.o&&pe(W,R.m,R.o),R.L&&(R.g.I=R.L);var J=R.g;R=R.ia,J.L=1,J.v=ur(ht(W)),J.m=null,J.P=!0,Sr(J,R)}e.Za=function(){this.C!=null&&(this.C=null,Vd(this),P_(this),xn(19))};function N_(R){R.C!=null&&(a.clearTimeout(R.C),R.C=null)}function O_(R,W){var J=null;if(R.g==W){N_(R),cT(R),R.g=null;var ae=2}else if(_s(R.h,W))J=W.D,_e(R.h,W),ae=1;else return;if(R.G!=0){if(W.o)if(ae==1){J=W.m?W.m.length:0,W=Date.now()-W.F;var Fe=R.B;ae=$o(),Ge(ae,new $r(ae,J)),yh(R)}else Mv(R);else if(Fe=W.s,Fe==3||Fe==0&&0<W.X||!(ae==1&&a5(R,W)||ae==2&&P_(R)))switch(J&&0<J.length&&(W=R.h,W.i=W.i.concat(J)),Fe){case 1:nm(R,5);break;case 4:nm(R,10);break;case 3:nm(R,6);break;default:nm(R,2)}}}function Lk(R,W){let J=R.Ta+Math.floor(Math.random()*R.cb);return R.isActive()||(J*=2),J*W}function nm(R,W){if(R.j.info("Error code "+W),W==2){var J=f(R.fb,R),ae=R.Xa;const Fe=!ae;ae=new pt(ae||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||xt(ae,"https"),ur(ae),Fe?A_(ae.toString(),J):jc(ae.toString(),J)}else xn(2);R.G=0,R.l&&R.l.sa(W),Fk(R),R_(R)}e.fb=function(R){R?(this.j.info("Successfully pinged google.com"),xn(2)):(this.j.info("Failed to ping google.com"),xn(1))};function Fk(R){if(R.G=0,R.ka=[],R.l){const W=de(R.h);(W.length!=0||R.i.length!=0)&&(y(R.ka,W),y(R.ka,R.i),R.h.i.length=0,m(R.i),R.i.length=0),R.l.ra()}}function jk(R,W,J){var ae=J instanceof pt?ht(J):new pt(J);if(ae.g!="")W&&(ae.g=W+"."+ae.g),Bt(ae,ae.s);else{var Fe=a.location;ae=Fe.protocol,W=W?W+"."+Fe.hostname:Fe.hostname,Fe=+Fe.port;var Ze=new pt(null);ae&&xt(Ze,ae),W&&(Ze.g=W),Fe&&Bt(Ze,Fe),J&&(Ze.l=J),ae=Ze}return J=R.D,W=R.ya,J&&W&&tn(ae,J,W),tn(ae,"VER",R.la),tm(R,ae),ae}function Bk(R,W,J){if(W&&!R.J)throw Error("Can't create secondary domain capable XhrIo object.");return W=R.Ca&&!R.pa?new Ce(new Bc({eb:J})):new Ce(R.pa),W.Ha(R.J),W}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function dT(){}e=dT.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function D_(){}D_.prototype.g=function(R,W){return new fu(R,W)};function fu(R,W){Re.call(this),this.g=new em(W),this.l=R,this.h=W&&W.messageUrlParams||null,R=W&&W.messageHeaders||null,W&&W.clientProtocolHeaderRequired&&(R?R["X-Client-Protocol"]="webchannel":R={"X-Client-Protocol":"webchannel"}),this.g.o=R,R=W&&W.initMessageHeaders||null,W&&W.messageContentType&&(R?R["X-WebChannel-Content-Type"]=W.messageContentType:R={"X-WebChannel-Content-Type":W.messageContentType}),W&&W.va&&(R?R["X-WebChannel-Client-Profile"]=W.va:R={"X-WebChannel-Client-Profile":W.va}),this.g.S=R,(R=W&&W.Sb)&&!w(R)&&(this.g.m=R),this.v=W&&W.supportsCrossDomainXhr||!1,this.u=W&&W.sendRawJson||!1,(W=W&&W.httpSessionIdParam)&&!w(W)&&(this.g.D=W,R=this.h,R!==null&&W in R&&(R=this.h,W in R&&delete R[W])),this.j=new vh(this)}p(fu,Re),fu.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fu.prototype.close=function(){Js(this.g)},fu.prototype.o=function(R){var W=this.g;if(typeof R=="string"){var J={};J.__data__=R,R=J}else this.u&&(J={},J.__data__=fn(R),R=J);W.i.push(new co(W.Ya++,R)),W.G==3&&yh(W)},fu.prototype.N=function(){this.g.l=null,delete this.j,Js(this.g),delete this.g,fu.aa.N.call(this)};function zk(R){Wn.call(this),R.__headers__&&(this.headers=R.__headers__,this.statusCode=R.__status__,delete R.__headers__,delete R.__status__);var W=R.__sm__;if(W){e:{for(const J in W){R=J;break e}R=void 0}(this.i=R)&&(R=this.i,W=W!==null&&R in W?W[R]:void 0),this.data=W}else this.data=R}p(zk,Wn);function Uk(){or.call(this),this.status=1}p(Uk,or);function vh(R){this.g=R}p(vh,dT),vh.prototype.ua=function(){Ge(this.g,"a")},vh.prototype.ta=function(R){Ge(this.g,new zk(R))},vh.prototype.sa=function(R){Ge(this.g,new Uk)},vh.prototype.ra=function(){Ge(this.g,"b")},D_.prototype.createWebChannel=D_.prototype.g,fu.prototype.send=fu.prototype.o,fu.prototype.open=fu.prototype.m,fu.prototype.close=fu.prototype.close,TPe=function(){return new D_},SPe=function(){return $o()},EPe=Wi,EH={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},St.NO_ERROR=0,St.TIMEOUT=8,St.HTTP_ERROR=6,ND=St,Ht.COMPLETE="complete",xPe=Ht,Ai.EventType=ci,ci.OPEN="a",ci.CLOSE="b",ci.ERROR="c",ci.MESSAGE="d",Re.prototype.listen=Re.prototype.K,aA=Ai,wPe=Bc,Ce.prototype.listenOnce=Ce.prototype.L,Ce.prototype.getLastError=Ce.prototype.Ka,Ce.prototype.getLastErrorCode=Ce.prototype.Ba,Ce.prototype.getStatus=Ce.prototype.Z,Ce.prototype.getResponseJson=Ce.prototype.Oa,Ce.prototype.getResponseText=Ce.prototype.oa,Ce.prototype.send=Ce.prototype.ea,Ce.prototype.setWithCredentials=Ce.prototype.Ha,_Pe=Ce}).apply(typeof pO<"u"?pO:typeof self<"u"?self:typeof window<"u"?window:{});const Wpe="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ul.UNAUTHENTICATED=new ul(null),ul.GOOGLE_CREDENTIALS=new ul("google-credentials-uid"),ul.FIRST_PARTY=new ul("first-party-uid"),ul.MOCK_USER=new ul("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let LS="10.12.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb=new O6("@firebase/firestore");function oC(){return Cb.logLevel}function Jt(e,...t){if(Cb.logLevel<=Pr.DEBUG){const n=t.map(vJ);Cb.debug(`Firestore (${LS}): ${e}`,...n)}}function vg(e,...t){if(Cb.logLevel<=Pr.ERROR){const n=t.map(vJ);Cb.error(`Firestore (${LS}): ${e}`,...n)}}function aI(e,...t){if(Cb.logLevel<=Pr.WARN){const n=t.map(vJ);Cb.warn(`Firestore (${LS}): ${e}`,...n)}}function vJ(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(e="Unexpected state"){const t=`FIRESTORE (${LS}) INTERNAL ASSERTION FAILED: `+e;throw vg(t),new Error(t)}function Vi(e,t){e||Vn()}function er(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ut extends Vp{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lNt{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class cNt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(ul.UNAUTHENTICATED))}shutdown(){}}class dNt{constructor(t){this.t=t,this.currentUser=ul.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Gm;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Gm,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{Jt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(Jt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Gm)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(Jt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Vi(typeof r.accessToken=="string"),new lNt(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Vi(t===null||typeof t=="string"),new ul(t)}}class fNt{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=ul.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class hNt{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new fNt(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(ul.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pNt{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mNt{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&Jt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Jt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{Jt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Jt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Vi(typeof n.token=="string"),this.R=n.token,new pNt(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gNt(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CPe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=gNt(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function ai(e,t){return e<t?-1:e>t?1:0}function xE(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Ut(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ut(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Ut(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ut(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return ko.fromMillis(Date.now())}static fromDate(t){return ko.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new ko(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?ai(this.nanoseconds,t.nanoseconds):ai(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Jn(t)}static min(){return new Jn(new ko(0,0))}static max(){return new Jn(new ko(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(t,n,r){n===void 0?n=0:n>t.length&&Vn(),r===void 0?r=t.length-n:r>t.length-n&&Vn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return uI.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof uI?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class Xi extends uI{construct(t,n,r){return new Xi(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Ut(lt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Xi(n)}static emptyPath(){return new Xi([])}}const yNt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ga extends uI{construct(t,n,r){return new ga(t,n,r)}static isValidIdentifier(t){return yNt.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ga.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ga(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ut(lt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new Ut(lt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ut(lt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Ut(lt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ga(n)}static emptyPath(){return new ga([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(t){this.path=t}static fromPath(t){return new gn(Xi.fromString(t))}static fromName(t){return new gn(Xi.fromString(t).popFirst(5))}static empty(){return new gn(Xi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Xi.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Xi.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new gn(new Xi(t.slice()))}}function vNt(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Jn.fromTimestamp(r===1e9?new ko(n+1,0):new ko(n,r));return new jy(i,gn.empty(),t)}function bNt(e){return new jy(e.readTime,e.key,-1)}class jy{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new jy(Jn.min(),gn.empty(),-1)}static max(){return new jy(Jn.max(),gn.empty(),-1)}}function _Nt(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=gn.comparator(e.documentKey,t.documentKey),n!==0?n:ai(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wNt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xNt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zR(e){if(e.code!==lt.FAILED_PRECONDITION||e.message!==wNt)throw e;Jt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Vn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new vt((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof vt?n:vt.resolve(n)}catch(n){return vt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):vt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):vt.reject(n)}static resolve(t){return new vt((n,r)=>{n(t)})}static reject(t){return new vt((n,r)=>{r(t)})}static waitFor(t){return new vt((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=vt.resolve(!1);for(const r of t)n=n.next(i=>i?vt.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new vt((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new vt((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function ENt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function UR(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bJ{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}bJ.oe=-1;function B6(e){return e==null}function f$(e){return e===0&&1/e==-1/0}function SNt(e){return typeof e=="number"&&Number.isInteger(e)&&!f$(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gpe(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function l_(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function APe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(t,n){this.comparator=t,this.root=n||ha.EMPTY}insert(t,n){return new vs(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ha.BLACK,null,null))}remove(t){return new vs(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ha.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new mO(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new mO(this.root,t,this.comparator,!1)}getReverseIterator(){return new mO(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new mO(this.root,t,this.comparator,!0)}}class mO{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ha{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??ha.RED,this.left=i??ha.EMPTY,this.right=s??ha.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new ha(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ha.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return ha.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ha.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ha.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Vn();const t=this.left.check();if(t!==this.right.check())throw Vn();return t+(this.isRed()?0:1)}}ha.EMPTY=null,ha.RED=!0,ha.BLACK=!1;ha.EMPTY=new class{constructor(){this.size=0}get key(){throw Vn()}get value(){throw Vn()}get color(){throw Vn()}get left(){throw Vn()}get right(){throw Vn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new ha(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(t){this.comparator=t,this.data=new vs(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ype(this.data.getIterator())}getIteratorFrom(t){return new Ype(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof _a)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new _a(this.comparator);return n.data=t,n}}class Ype{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(t){this.fields=t,t.sort(ga.comparator)}static empty(){return new dc([])}unionWith(t){let n=new _a(ga.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new dc(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return xE(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IPe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new IPe("Invalid base64 string: "+s):s}}(t);return new nu(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new nu(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ai(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}nu.EMPTY_BYTE_STRING=new nu("");const TNt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function By(e){if(Vi(!!e),typeof e=="string"){let t=0;const n=TNt.exec(e);if(Vi(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ro(e.seconds),nanos:ro(e.nanos)}}function ro(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Ab(e){return typeof e=="string"?nu.fromBase64String(e):nu.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _J(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function wJ(e){const t=e.mapValue.fields.__previous_value__;return _J(t)?wJ(t):t}function lI(e){const t=By(e.mapValue.fields.__local_write_time__.timestampValue);return new ko(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CNt{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class cI{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new cI("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof cI&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO={mapValue:{}};function Ib(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?_J(e)?4:ANt(e)?9007199254740991:10:Vn()}function Sp(e,t){if(e===t)return!0;const n=Ib(e);if(n!==Ib(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return lI(e).isEqual(lI(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=By(i.timestampValue),a=By(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return Ab(i.bytesValue).isEqual(Ab(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return ro(i.geoPointValue.latitude)===ro(s.geoPointValue.latitude)&&ro(i.geoPointValue.longitude)===ro(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ro(i.integerValue)===ro(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ro(i.doubleValue),a=ro(s.doubleValue);return o===a?f$(o)===f$(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return xE(e.arrayValue.values||[],t.arrayValue.values||[],Sp);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Gpe(o)!==Gpe(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Sp(o[u],a[u])))return!1;return!0}(e,t);default:return Vn()}}function dI(e,t){return(e.values||[]).find(n=>Sp(n,t))!==void 0}function EE(e,t){if(e===t)return 0;const n=Ib(e),r=Ib(t);if(n!==r)return ai(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ai(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=ro(s.integerValue||s.doubleValue),u=ro(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return Kpe(e.timestampValue,t.timestampValue);case 4:return Kpe(lI(e),lI(t));case 5:return ai(e.stringValue,t.stringValue);case 6:return function(s,o){const a=Ab(s),u=Ab(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=ai(a[l],u[l]);if(c!==0)return c}return ai(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=ai(ro(s.latitude),ro(o.latitude));return a!==0?a:ai(ro(s.longitude),ro(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=EE(a[l],u[l]);if(c)return c}return ai(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===gO.mapValue&&o===gO.mapValue)return 0;if(s===gO.mapValue)return 1;if(o===gO.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let d=0;d<u.length&&d<c.length;++d){const f=ai(u[d],c[d]);if(f!==0)return f;const h=EE(a[u[d]],l[c[d]]);if(h!==0)return h}return ai(u.length,c.length)}(e.mapValue,t.mapValue);default:throw Vn()}}function Kpe(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ai(e,t);const n=By(e),r=By(t),i=ai(n.seconds,r.seconds);return i!==0?i:ai(n.nanos,r.nanos)}function SE(e){return SH(e)}function SH(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=By(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Ab(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return gn.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=SH(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${SH(n.fields[o])}`;return i+"}"}(e.mapValue):Vn()}function Xpe(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function TH(e){return!!e&&"integerValue"in e}function xJ(e){return!!e&&"arrayValue"in e}function Qpe(e){return!!e&&"nullValue"in e}function Jpe(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function OD(e){return!!e&&"mapValue"in e}function XA(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return l_(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=XA(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=XA(e.arrayValue.values[n]);return t}return Object.assign({},e)}function ANt(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(t){this.value=t}static empty(){return new pl({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!OD(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=XA(n)}setAll(t){let n=ga.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=XA(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());OD(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Sp(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];OD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){l_(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new pl(XA(this.value))}}function RPe(e){const t=[];return l_(e.fields,(n,r)=>{const i=new ga([n]);if(OD(r)){const s=RPe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new dc(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new qa(t,0,Jn.min(),Jn.min(),Jn.min(),pl.empty(),0)}static newFoundDocument(t,n,r,i){return new qa(t,1,n,Jn.min(),r,i,0)}static newNoDocument(t,n){return new qa(t,2,n,Jn.min(),Jn.min(),pl.empty(),0)}static newUnknownDocument(t,n){return new qa(t,3,n,Jn.min(),Jn.min(),pl.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Jn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=pl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=pl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Jn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof qa&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new qa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h$=class{constructor(t,n){this.position=t,this.inclusive=n}};function Zpe(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=gn.comparator(gn.fromName(o.referenceValue),n.key):r=EE(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function eme(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Sp(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(t,n="asc"){this.field=t,this.dir=n}}function INt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kPe=class{};class oo extends kPe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new kNt(t,n,r):n==="array-contains"?new ONt(t,r):n==="in"?new DNt(t,r):n==="not-in"?new MNt(t,r):n==="array-contains-any"?new $Nt(t,r):new oo(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new PNt(t,r):new NNt(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(EE(n,this.value)):n!==null&&Ib(this.value)===Ib(n)&&this.matchesComparison(EE(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Vn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vf extends kPe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Vf(t,n)}matches(t){return PPe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function PPe(e){return e.op==="and"}function NPe(e){return RNt(e)&&PPe(e)}function RNt(e){for(const t of e.filters)if(t instanceof Vf)return!1;return!0}function CH(e){if(e instanceof oo)return e.field.canonicalString()+e.op.toString()+SE(e.value);if(NPe(e))return e.filters.map(t=>CH(t)).join(",");{const t=e.filters.map(n=>CH(n)).join(",");return`${e.op}(${t})`}}function OPe(e,t){return e instanceof oo?function(r,i){return i instanceof oo&&r.op===i.op&&r.field.isEqual(i.field)&&Sp(r.value,i.value)}(e,t):e instanceof Vf?function(r,i){return i instanceof Vf&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&OPe(o,i.filters[a]),!0):!1}(e,t):void Vn()}function DPe(e){return e instanceof oo?function(n){return`${n.field.canonicalString()} ${n.op} ${SE(n.value)}`}(e):e instanceof Vf?function(n){return n.op.toString()+" {"+n.getFilters().map(DPe).join(" ,")+"}"}(e):"Filter"}class kNt extends oo{constructor(t,n,r){super(t,n,r),this.key=gn.fromName(r.referenceValue)}matches(t){const n=gn.comparator(t.key,this.key);return this.matchesComparison(n)}}class PNt extends oo{constructor(t,n){super(t,"in",n),this.keys=MPe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class NNt extends oo{constructor(t,n){super(t,"not-in",n),this.keys=MPe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function MPe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>gn.fromName(r.referenceValue))}class ONt extends oo{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return xJ(n)&&dI(n.arrayValue,this.value)}}class DNt extends oo{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&dI(this.value.arrayValue,n)}}class MNt extends oo{constructor(t,n){super(t,"not-in",n)}matches(t){if(dI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!dI(this.value.arrayValue,n)}}class $Nt extends oo{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!xJ(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>dI(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LNt{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function tme(e,t=null,n=[],r=[],i=null,s=null,o=null){return new LNt(e,t,n,r,i,s,o)}function EJ(e){const t=er(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>CH(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),B6(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>SE(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>SE(r)).join(",")),t.ue=n}return t.ue}function SJ(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!INt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!OPe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!eme(e.startAt,t.startAt)&&eme(e.endAt,t.endAt)}function AH(e){return gn.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function FNt(e,t,n,r,i,s,o,a){return new FS(e,t,n,r,i,s,o,a)}function TJ(e){return new FS(e)}function nme(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function $Pe(e){return e.collectionGroup!==null}function QA(e){const t=er(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new _a(ga.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new fI(s,r))}),n.has(ga.keyField().canonicalString())||t.ce.push(new fI(ga.keyField(),r))}return t.ce}function cp(e){const t=er(e);return t.le||(t.le=jNt(t,QA(e))),t.le}function jNt(e,t){if(e.limitType==="F")return tme(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new fI(i.field,s)});const n=e.endAt?new h$(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new h$(e.startAt.position,e.startAt.inclusive):null;return tme(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function IH(e,t){const n=e.filters.concat([t]);return new FS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function RH(e,t,n){return new FS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function z6(e,t){return SJ(cp(e),cp(t))&&e.limitType===t.limitType}function LPe(e){return`${EJ(cp(e))}|lt:${e.limitType}`}function qw(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>DPe(i)).join(", ")}]`),B6(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>SE(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>SE(i)).join(",")),`Target(${r})`}(cp(e))}; limitType=${e.limitType})`}function U6(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):gn.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of QA(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Zpe(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,QA(r),i)||r.endAt&&!function(o,a,u){const l=Zpe(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,QA(r),i))}(e,t)}function BNt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function FPe(e){return(t,n)=>{let r=!1;for(const i of QA(e)){const s=zNt(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function zNt(e,t,n){const r=e.field.isKeyField()?gn.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?EE(u,l):Vn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Vn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){l_(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return APe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UNt=new vs(gn.comparator);function bg(){return UNt}const jPe=new vs(gn.comparator);function uA(...e){let t=jPe;for(const n of e)t=t.insert(n.key,n);return t}function BPe(e){let t=jPe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function H1(){return JA()}function zPe(){return JA()}function JA(){return new jS(e=>e.toString(),(e,t)=>e.isEqual(t))}const VNt=new vs(gn.comparator),HNt=new _a(gn.comparator);function Cr(...e){let t=HNt;for(const n of e)t=t.add(n);return t}const qNt=new _a(ai);function WNt(){return qNt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UPe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:f$(t)?"-0":t}}function VPe(e){return{integerValue:""+e}}function GNt(e,t){return SNt(t)?VPe(t):UPe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(){this._=void 0}}function YNt(e,t,n){return e instanceof hI?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&_J(s)&&(s=wJ(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof pI?qPe(e,t):e instanceof mI?WPe(e,t):function(i,s){const o=HPe(i,s),a=rme(o)+rme(i.Pe);return TH(o)&&TH(i.Pe)?VPe(a):UPe(i.serializer,a)}(e,t)}function KNt(e,t,n){return e instanceof pI?qPe(e,t):e instanceof mI?WPe(e,t):n}function HPe(e,t){return e instanceof p$?function(r){return TH(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class hI extends V6{}class pI extends V6{constructor(t){super(),this.elements=t}}function qPe(e,t){const n=GPe(t);for(const r of e.elements)n.some(i=>Sp(i,r))||n.push(r);return{arrayValue:{values:n}}}class mI extends V6{constructor(t){super(),this.elements=t}}function WPe(e,t){let n=GPe(t);for(const r of e.elements)n=n.filter(i=>!Sp(i,r));return{arrayValue:{values:n}}}class p$ extends V6{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function rme(e){return ro(e.integerValue||e.doubleValue)}function GPe(e){return xJ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XNt{constructor(t,n){this.field=t,this.transform=n}}function QNt(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof pI&&i instanceof pI||r instanceof mI&&i instanceof mI?xE(r.elements,i.elements,Sp):r instanceof p$&&i instanceof p$?Sp(r.Pe,i.Pe):r instanceof hI&&i instanceof hI}(e.transform,t.transform)}class JNt{constructor(t,n){this.version=t,this.transformResults=n}}class El{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new El}static exists(t){return new El(void 0,t)}static updateTime(t){return new El(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function DD(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class H6{}function YPe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new q6(e.key,El.none()):new VR(e.key,e.data,El.none());{const n=e.data,r=pl.empty();let i=new _a(ga.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new bv(e.key,r,new dc(i.toArray()),El.none())}}function ZNt(e,t,n){e instanceof VR?function(i,s,o){const a=i.value.clone(),u=sme(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof bv?function(i,s,o){if(!DD(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=sme(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(KPe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function ZA(e,t,n,r){return e instanceof VR?function(s,o,a,u){if(!DD(s.precondition,o))return a;const l=s.value.clone(),c=ome(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof bv?function(s,o,a,u){if(!DD(s.precondition,o))return a;const l=ome(s.fieldTransforms,u,o),c=o.data;return c.setAll(KPe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(e,t,n,r):function(s,o,a){return DD(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function eOt(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=HPe(r.transform,i||null);s!=null&&(n===null&&(n=pl.empty()),n.set(r.field,s))}return n||null}function ime(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&xE(r,i,(s,o)=>QNt(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class VR extends H6{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class bv extends H6{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function KPe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function sme(e,t,n){const r=new Map;Vi(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,KNt(o,a,n[i]))}return r}function ome(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,YNt(s,o,t))}return r}class q6 extends H6{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tOt extends H6{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nOt{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&ZNt(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=ZA(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=ZA(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=zPe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=YPe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Jn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Cr())}isEqual(t){return this.batchId===t.batchId&&xE(this.mutations,t.mutations,(n,r)=>ime(n,r))&&xE(this.baseMutations,t.baseMutations,(n,r)=>ime(n,r))}}class CJ{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){Vi(t.mutations.length===r.length);let i=function(){return VNt}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new CJ(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rOt{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iOt{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var to,jr;function sOt(e){switch(e){default:return Vn();case lt.CANCELLED:case lt.UNKNOWN:case lt.DEADLINE_EXCEEDED:case lt.RESOURCE_EXHAUSTED:case lt.INTERNAL:case lt.UNAVAILABLE:case lt.UNAUTHENTICATED:return!1;case lt.INVALID_ARGUMENT:case lt.NOT_FOUND:case lt.ALREADY_EXISTS:case lt.PERMISSION_DENIED:case lt.FAILED_PRECONDITION:case lt.ABORTED:case lt.OUT_OF_RANGE:case lt.UNIMPLEMENTED:case lt.DATA_LOSS:return!0}}function XPe(e){if(e===void 0)return vg("GRPC error has no .code"),lt.UNKNOWN;switch(e){case to.OK:return lt.OK;case to.CANCELLED:return lt.CANCELLED;case to.UNKNOWN:return lt.UNKNOWN;case to.DEADLINE_EXCEEDED:return lt.DEADLINE_EXCEEDED;case to.RESOURCE_EXHAUSTED:return lt.RESOURCE_EXHAUSTED;case to.INTERNAL:return lt.INTERNAL;case to.UNAVAILABLE:return lt.UNAVAILABLE;case to.UNAUTHENTICATED:return lt.UNAUTHENTICATED;case to.INVALID_ARGUMENT:return lt.INVALID_ARGUMENT;case to.NOT_FOUND:return lt.NOT_FOUND;case to.ALREADY_EXISTS:return lt.ALREADY_EXISTS;case to.PERMISSION_DENIED:return lt.PERMISSION_DENIED;case to.FAILED_PRECONDITION:return lt.FAILED_PRECONDITION;case to.ABORTED:return lt.ABORTED;case to.OUT_OF_RANGE:return lt.OUT_OF_RANGE;case to.UNIMPLEMENTED:return lt.UNIMPLEMENTED;case to.DATA_LOSS:return lt.DATA_LOSS;default:return Vn()}}(jr=to||(to={}))[jr.OK=0]="OK",jr[jr.CANCELLED=1]="CANCELLED",jr[jr.UNKNOWN=2]="UNKNOWN",jr[jr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jr[jr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jr[jr.NOT_FOUND=5]="NOT_FOUND",jr[jr.ALREADY_EXISTS=6]="ALREADY_EXISTS",jr[jr.PERMISSION_DENIED=7]="PERMISSION_DENIED",jr[jr.UNAUTHENTICATED=16]="UNAUTHENTICATED",jr[jr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jr[jr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jr[jr.ABORTED=10]="ABORTED",jr[jr.OUT_OF_RANGE=11]="OUT_OF_RANGE",jr[jr.UNIMPLEMENTED=12]="UNIMPLEMENTED",jr[jr.INTERNAL=13]="INTERNAL",jr[jr.UNAVAILABLE=14]="UNAVAILABLE",jr[jr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oOt(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aOt=new eb([4294967295,4294967295],0);function ame(e){const t=oOt().encode(e),n=new bPe;return n.update(t),new Uint8Array(n.digest())}function ume(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new eb([n,r],0),new eb([i,s],0)]}class AJ{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new lA(`Invalid padding: ${n}`);if(r<0)throw new lA(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new lA(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new lA(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=eb.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(eb.fromNumber(r)));return i.compare(aOt)===1&&(i=new eb([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=ame(t),[r,i]=ume(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new AJ(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=ame(t),[r,i]=ume(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class lA extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,HR.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new W6(Jn.min(),i,new vs(ai),bg(),Cr())}}class HR{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new HR(r,n,Cr(),Cr(),Cr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class QPe{constructor(t,n){this.targetId=t,this.me=n}}class JPe{constructor(t,n,r=nu.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class lme{constructor(){this.fe=0,this.ge=dme(),this.pe=nu.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=Cr(),n=Cr(),r=Cr();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Vn()}}),new HR(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=dme()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Vi(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class uOt{constructor(t){this.Le=t,this.Be=new Map,this.ke=bg(),this.qe=cme(),this.Qe=new vs(ai)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:Vn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(AH(s))if(r===0){const o=new gn(s.path);this.Ue(n,o,qa.newNoDocument(o,Jn.min()))}else Vi(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ab(r).toUint8Array()}catch(u){if(u instanceof IPe)return aI("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new AJ(o,i,s)}catch(u){return aI(u instanceof lA?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&AH(a.target)){const u=new gn(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,qa.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=Cr();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new W6(t,n,this.Qe,this.ke,r);return this.ke=bg(),this.qe=cme(),this.Qe=new vs(ai),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new lme,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new _a(ai),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||Jt("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new lme),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function cme(){return new vs(gn.comparator)}function dme(){return new vs(gn.comparator)}const lOt={asc:"ASCENDING",desc:"DESCENDING"},cOt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dOt={and:"AND",or:"OR"};class fOt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function kH(e,t){return e.useProto3Json||B6(t)?t:{value:t}}function m$(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ZPe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function hOt(e,t){return m$(e,t.toTimestamp())}function dp(e){return Vi(!!e),Jn.fromTimestamp(function(n){const r=By(n);return new ko(r.seconds,r.nanos)}(e))}function IJ(e,t){return PH(e,t).canonicalString()}function PH(e,t){const n=function(i){return new Xi(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function eNe(e){const t=Xi.fromString(e);return Vi(sNe(t)),t}function NH(e,t){return IJ(e.databaseId,t.path)}function rz(e,t){const n=eNe(t);if(n.get(1)!==e.databaseId.projectId)throw new Ut(lt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ut(lt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new gn(nNe(n))}function tNe(e,t){return IJ(e.databaseId,t)}function pOt(e){const t=eNe(e);return t.length===4?Xi.emptyPath():nNe(t)}function OH(e){return new Xi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function nNe(e){return Vi(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function fme(e,t,n){return{name:NH(e,t),fields:n.value.mapValue.fields}}function mOt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Vn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(Vi(c===void 0||typeof c=="string"),nu.fromBase64String(c||"")):(Vi(c===void 0||c instanceof Buffer||c instanceof Uint8Array),nu.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?lt.UNKNOWN:XPe(l.code);return new Ut(c,l.message||"")}(o);n=new JPe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=rz(e,r.document.name),s=dp(r.document.updateTime),o=r.document.createTime?dp(r.document.createTime):Jn.min(),a=new pl({mapValue:{fields:r.document.fields}}),u=qa.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new MD(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=rz(e,r.document),s=r.readTime?dp(r.readTime):Jn.min(),o=qa.newNoDocument(i,s),a=r.removedTargetIds||[];n=new MD([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=rz(e,r.document),s=r.removedTargetIds||[];n=new MD([],s,i,null)}else{if(!("filter"in t))return Vn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new iOt(i,s),a=r.targetId;n=new QPe(a,o)}}return n}function gOt(e,t){let n;if(t instanceof VR)n={update:fme(e,t.key,t.value)};else if(t instanceof q6)n={delete:NH(e,t.key)};else if(t instanceof bv)n={update:fme(e,t.key,t.data),updateMask:TOt(t.fieldMask)};else{if(!(t instanceof tOt))return Vn();n={verify:NH(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof hI)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof pI)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof mI)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof p$)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Vn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:hOt(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Vn()}(e,t.precondition)),n}function yOt(e,t){return e&&e.length>0?(Vi(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?dp(i.updateTime):dp(s);return o.isEqual(Jn.min())&&(o=dp(s)),new JNt(o,i.transformResults||[])}(n,t))):[]}function vOt(e,t){return{documents:[tNe(e,t.path)]}}function bOt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=tNe(e,i);const s=function(l){if(l.length!==0)return iNe(Vf.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(f){return{field:Ww(f.field),direction:xOt(f.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=kH(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function _Ot(e){let t=pOt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Vi(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(d){const f=rNe(d);return f instanceof Vf&&NPe(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(p){return new fI(Gw(p.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,B6(f)?null:f}(n.limit));let u=null;n.startAt&&(u=function(d){const f=!!d.before,h=d.values||[];return new h$(h,f)}(n.startAt));let l=null;return n.endAt&&(l=function(d){const f=!d.before,h=d.values||[];return new h$(h,f)}(n.endAt)),FNt(t,i,o,s,a,"F",u,l)}function wOt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Vn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function rNe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Gw(n.unaryFilter.field);return oo.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Gw(n.unaryFilter.field);return oo.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Gw(n.unaryFilter.field);return oo.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Gw(n.unaryFilter.field);return oo.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Vn()}}(e):e.fieldFilter!==void 0?function(n){return oo.create(Gw(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Vn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Vf.create(n.compositeFilter.filters.map(r=>rNe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Vn()}}(n.compositeFilter.op))}(e):Vn()}function xOt(e){return lOt[e]}function EOt(e){return cOt[e]}function SOt(e){return dOt[e]}function Ww(e){return{fieldPath:e.canonicalString()}}function Gw(e){return ga.fromServerFormat(e.fieldPath)}function iNe(e){return e instanceof oo?function(n){if(n.op==="=="){if(Jpe(n.value))return{unaryFilter:{field:Ww(n.field),op:"IS_NAN"}};if(Qpe(n.value))return{unaryFilter:{field:Ww(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Jpe(n.value))return{unaryFilter:{field:Ww(n.field),op:"IS_NOT_NAN"}};if(Qpe(n.value))return{unaryFilter:{field:Ww(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ww(n.field),op:EOt(n.op),value:n.value}}}(e):e instanceof Vf?function(n){const r=n.getFilters().map(i=>iNe(i));return r.length===1?r[0]:{compositeFilter:{op:SOt(n.op),filters:r}}}(e):Vn()}function TOt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function sNe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(t,n,r,i,s=Jn.min(),o=Jn.min(),a=nu.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new q0(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new q0(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new q0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new q0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class COt{constructor(t){this.ct=t}}function AOt(e){const t=_Ot({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?RH(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IOt{constructor(){this._n=new ROt}addToCollectionParentIndex(t,n){return this._n.add(n),vt.resolve()}getCollectionParents(t,n){return vt.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return vt.resolve()}deleteFieldIndex(t,n){return vt.resolve()}deleteAllFieldIndexes(t){return vt.resolve()}createTargetIndexes(t,n){return vt.resolve()}getDocumentsMatchingTarget(t,n){return vt.resolve(null)}getIndexType(t,n){return vt.resolve(0)}getFieldIndexes(t,n){return vt.resolve([])}getNextCollectionGroupToUpdate(t){return vt.resolve(null)}getMinOffset(t,n){return vt.resolve(jy.min())}getMinOffsetFromCollectionGroup(t,n){return vt.resolve(jy.min())}updateCollectionGroup(t,n,r){return vt.resolve()}updateIndexEntries(t,n){return vt.resolve()}}class ROt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new _a(Xi.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new _a(Xi.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new TE(0)}static Ln(){return new TE(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kOt{constructor(){this.changes=new jS(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,qa.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?vt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class POt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NOt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&ZA(r.mutation,i,dc.empty(),ko.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Cr()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Cr()){const i=H1();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=uA();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=H1();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Cr()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=bg();const o=JA(),a=function(){return JA()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof bv)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),ZA(c.mutation,l,c.mutation.getFieldMask(),ko.now())):o.set(l.key,dc.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var d;return a.set(l,new POt(c,(d=o.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(t,n){const r=JA();let i=new vs((o,a)=>o-a),s=Cr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||dc.empty();c=a.applyToLocalView(l,c),r.set(u,c);const d=(i.get(a.batchId)||Cr()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,d=zPe();c.forEach(f=>{if(!s.has(f)){const h=YPe(n.get(f),r.get(f));h!==null&&d.set(f,h),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,d))}return vt.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return gn.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):$Pe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):vt.resolve(H1());let a=-1,u=s;return o.next(l=>vt.forEach(l,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?vt.resolve():this.remoteDocumentCache.getEntry(t,c).next(f=>{u=u.insert(c,f)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,Cr())).next(c=>({batchId:a,changes:BPe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new gn(n)).next(r=>{let i=uA();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=uA();return this.indexManager.getCollectionParents(t,s).next(a=>vt.forEach(a,u=>{const l=function(d,f){return new FS(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,qa.newInvalidDocument(c)))});let a=uA();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&ZA(c.mutation,l,dc.empty(),ko.now()),U6(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OOt{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return vt.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:dp(i.createTime)}}(n)),vt.resolve()}getNamedQuery(t,n){return vt.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:AOt(i.bundledQuery),readTime:dp(i.readTime)}}(n)),vt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DOt{constructor(){this.overlays=new vs(gn.comparator),this.hr=new Map}getOverlay(t,n){return vt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=H1();return vt.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),vt.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),vt.resolve()}getOverlaysForCollection(t,n,r){const i=H1(),s=n.length+1,o=new gn(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return vt.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new vs((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=H1(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=H1(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return vt.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new rOt(n,r));let s=this.hr.get(n);s===void 0&&(s=Cr(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RJ{constructor(){this.Pr=new _a(Vo.Ir),this.Tr=new _a(Vo.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Vo(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Vo(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new gn(new Xi([])),r=new Vo(n,t),i=new Vo(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new gn(new Xi([])),r=new Vo(n,t),i=new Vo(n,t+1);let s=Cr();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Vo(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Vo{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return gn.comparator(t.key,n.key)||ai(t.pr,n.pr)}static Er(t,n){return ai(t.pr,n.pr)||gn.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MOt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new _a(Vo.Ir)}checkEmpty(t){return vt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new nOt(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Vo(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return vt.resolve(o)}lookupMutationBatch(t,n){return vt.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return vt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return vt.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return vt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Vo(n,0),i=new Vo(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),vt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new _a(ai);return n.forEach(i=>{const s=new Vo(i,0),o=new Vo(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),vt.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;gn.isDocumentKey(s)||(s=s.child(""));const o=new Vo(new gn(s),0);let a=new _a(ai);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),vt.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Vi(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return vt.forEach(n.mutations,i=>{const s=new Vo(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Vo(n,0),i=this.wr.firstAfterOrEqual(r);return vt.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,vt.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Ot{constructor(t){this.vr=t,this.docs=function(){return new vs(gn.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return vt.resolve(r?r.document.mutableCopy():qa.newInvalidDocument(n))}getEntries(t,n){let r=bg();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():qa.newInvalidDocument(i))}),vt.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=bg();const o=n.path,a=new gn(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||_Nt(bNt(c),r)<=0||(i.has(c.key)||U6(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return vt.resolve(s)}getAllFromCollectionGroup(t,n,r,i){Vn()}Fr(t,n){return vt.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new LOt(this)}getSize(t){return vt.resolve(this.size)}}class LOt extends kOt{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),vt.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FOt{constructor(t){this.persistence=t,this.Mr=new jS(n=>EJ(n),SJ),this.lastRemoteSnapshotVersion=Jn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new RJ,this.targetCount=0,this.Lr=TE.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),vt.resolve()}getLastRemoteSnapshotVersion(t){return vt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return vt.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),vt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),vt.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new TE(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,vt.resolve()}updateTargetData(t,n){return this.qn(n),vt.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,vt.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),vt.waitFor(s).next(()=>i)}getTargetCount(t){return vt.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return vt.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),vt.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),vt.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),vt.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return vt.resolve(r)}containsKey(t,n){return vt.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jOt{constructor(t,n){this.Br={},this.overlays={},this.kr=new bJ(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new FOt(this),this.indexManager=new IOt,this.remoteDocumentCache=function(i){return new $Ot(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new COt(n),this.$r=new OOt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new DOt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new MOt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){Jt("MemoryPersistence","Starting transaction:",t);const i=new BOt(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return vt.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class BOt extends xNt{constructor(t){super(),this.currentSequenceNumber=t}}class kJ{constructor(t){this.persistence=t,this.zr=new RJ,this.jr=null}static Hr(t){return new kJ(t)}get Jr(){if(this.jr)return this.jr;throw Vn()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),vt.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),vt.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),vt.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return vt.forEach(this.Jr,r=>{const i=gn.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,Jn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return vt.or([()=>vt.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PJ{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=Cr(),i=Cr();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new PJ(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zOt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UOt{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return x2t()?8:ENt(Ta())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new zOt;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(oC()<=Pr.DEBUG&&Jt("QueryEngine","SDK will not create cache indexes for query:",qw(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),vt.resolve()):(oC()<=Pr.DEBUG&&Jt("QueryEngine","Query:",qw(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(oC()<=Pr.DEBUG&&Jt("QueryEngine","The SDK decides to create cache indexes for query:",qw(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,cp(n))):vt.resolve())}ji(t,n){if(nme(n))return vt.resolve(null);let r=cp(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=RH(n,null,"F"),r=cp(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=Cr(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,RH(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return nme(n)||i.isEqual(Jn.min())?vt.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?vt.resolve(null):(oC()<=Pr.DEBUG&&Jt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qw(n)),this.es(t,o,n,vNt(i,-1)).next(a=>a))})}Zi(t,n){let r=new _a(FPe(t));return n.forEach((i,s)=>{U6(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return oC()<=Pr.DEBUG&&Jt("QueryEngine","Using full collection scan to execute query:",qw(n)),this.zi.getDocumentsMatchingQuery(t,n,jy.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VOt{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new vs(ai),this.rs=new jS(s=>EJ(s),SJ),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new NOt(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function HOt(e,t,n,r){return new VOt(e,t,n,r)}async function oNe(e,t){const n=er(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Cr();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function qOt(e,t){const n=er(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const d=l.batch,f=d.keys();let h=vt.resolve();return f.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const y=l.docVersions.get(p);Vi(y!==null),m.version.compareTo(y)<0&&(d.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,d))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Cr();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function aNe(e){const t=er(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function WOt(e,t){const n=er(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,d)=>{const f=i.get(d);if(!f)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,d)));let h=f.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(d)!==null?h=h.withResumeToken(nu.EMPTY_BYTE_STRING,Jn.min()).withLastLimboFreeSnapshotVersion(Jn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(d,h),function(m,y,v){return m.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(f,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=bg(),l=Cr();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(GOt(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(Jn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(d=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return vt.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function GOt(e,t,n){let r=Cr(),i=Cr();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=bg();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Jn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):Jt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function YOt(e,t){const n=er(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function KOt(e,t){const n=er(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,vt.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new q0(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function DH(e,t,n){const r=er(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!UR(o))throw o;Jt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function hme(e,t,n){const r=er(e);let i=Jn.min(),s=Cr();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const d=er(u),f=d.rs.get(c);return f!==void 0?vt.resolve(d.ns.get(f)):d.Qr.getTargetData(l,c)}(r,o,cp(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:Jn.min(),n?s:Cr())).next(a=>(XOt(r,BNt(t),a),{documents:a,hs:s})))}function XOt(e,t,n){let r=e.ss.get(t)||Jn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class pme{constructor(){this.activeTargetIds=WNt()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class QOt{constructor(){this.no=new pme,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new pme,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JOt{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mme{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Jt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){Jt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yO=null;function iz(){return yO===null?yO=function(){return 268435456+Math.round(2147483648*Math.random())}():yO++,"0x"+yO.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZOt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eDt{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a="WebChannelConnection";class tDt extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=iz(),u=this.vo(n,r.toUriEncodedString());Jt("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(Jt("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw aI("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+LS}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=ZOt[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=iz();return new Promise((o,a)=>{const u=new _Pe;u.setWithCredentials(!0),u.listenOnce(xPe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ND.NO_ERROR:const c=u.getResponseJson();Jt($a,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case ND.TIMEOUT:Jt($a,`RPC '${t}' ${s} timed out`),a(new Ut(lt.DEADLINE_EXCEEDED,"Request time out"));break;case ND.HTTP_ERROR:const d=u.getStatus();if(Jt($a,`RPC '${t}' ${s} failed with status:`,d,"response text:",u.getResponseText()),d>0){let f=u.getResponseJson();Array.isArray(f)&&(f=f[0]);const h=f==null?void 0:f.error;if(h&&h.status&&h.message){const p=function(y){const v=y.toLowerCase().replace(/_/g,"-");return Object.values(lt).indexOf(v)>=0?v:lt.UNKNOWN}(h.status);a(new Ut(p,h.message))}else a(new Ut(lt.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Ut(lt.UNAVAILABLE,"Connection failed."));break;default:Vn()}}finally{Jt($a,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);Jt($a,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=iz(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=TPe(),a=SPe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new wPe({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");Jt($a,`Creating RPC '${t}' stream ${i}: ${c}`,u);const d=o.createWebChannel(c,u);let f=!1,h=!1;const p=new eDt({lo:y=>{h?Jt($a,`Not sending because RPC '${t}' stream ${i} is closed:`,y):(f||(Jt($a,`Opening RPC '${t}' stream ${i} transport.`),d.open(),f=!0),Jt($a,`RPC '${t}' stream ${i} sending:`,y),d.send(y))},ho:()=>d.close()}),m=(y,v,w)=>{y.listen(v,x=>{try{w(x)}catch(S){setTimeout(()=>{throw S},0)}})};return m(d,aA.EventType.OPEN,()=>{h||(Jt($a,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(d,aA.EventType.CLOSE,()=>{h||(h=!0,Jt($a,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(d,aA.EventType.ERROR,y=>{h||(h=!0,aI($a,`RPC '${t}' stream ${i} transport errored:`,y),p.po(new Ut(lt.UNAVAILABLE,"The operation could not be completed")))}),m(d,aA.EventType.MESSAGE,y=>{var v;if(!h){const w=y.data[0];Vi(!!w);const x=w,S=x.error||((v=x[0])===null||v===void 0?void 0:v.error);if(S){Jt($a,`RPC '${t}' stream ${i} received error:`,S);const E=S.status;let T=function(k){const D=to[k];if(D!==void 0)return XPe(D)}(E),A=S.message;T===void 0&&(T=lt.INTERNAL,A="Unknown error status: "+E+" with message "+S.message),h=!0,p.po(new Ut(T,A)),d.close()}else Jt($a,`RPC '${t}' stream ${i} received:`,w),p.yo(w)}}),m(a,EPe.STAT_EVENT,y=>{y.stat===EH.PROXY?Jt($a,`RPC '${t}' stream ${i} detected buffering proxy`):y.stat===EH.NOPROXY&&Jt($a,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function sz(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(e){return new fOt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uNe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&Jt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lNe{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new uNe(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===lt.RESOURCE_EXHAUSTED?(vg(n.toString()),vg("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===lt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new Ut(lt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return Jt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(Jt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nDt extends lNe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=mOt(this.serializer,t),r=function(s){if(!("targetChange"in s))return Jn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Jn.min():o.readTime?dp(o.readTime):Jn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=OH(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=AH(u)?{documents:vOt(s,u)}:{query:bOt(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ZPe(s,o.resumeToken);const l=kH(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Jn.min())>0){a.readTime=m$(s,o.snapshotVersion.toTimestamp());const l=kH(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=wOt(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=OH(this.serializer),n.removeTarget=t,this.i_(n)}}class rDt extends lNe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(Vi(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=yOt(t.writeResults,t.commitTime),r=dp(t.commitTime);return this.listener.A_(r,n)}return Vi(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=OH(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>gOt(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iDt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Ut(lt.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,PH(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ut(lt.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,PH(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ut(lt.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class sDt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(vg(n),this.y_=!1):Jt("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oDt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{c_(this)&&(Jt("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=er(u);l.M_.add(4),await WR(l),l.N_.set("Unknown"),l.M_.delete(4),await qR(l)}(this))})}),this.N_=new sDt(r,i)}}async function qR(e){if(c_(e))for(const t of e.x_)await t(!0)}async function WR(e){for(const t of e.x_)await t(!1)}function cNe(e,t){const n=er(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),MJ(n)?DJ(n):BS(n).Xo()&&OJ(n,t))}function NJ(e,t){const n=er(e),r=BS(n);n.F_.delete(t),r.Xo()&&dNe(n,t),n.F_.size===0&&(r.Xo()?r.n_():c_(n)&&n.N_.set("Unknown"))}function OJ(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Jn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}BS(e).P_(t)}function dNe(e,t){e.L_.xe(t),BS(e).I_(t)}function DJ(e){e.L_=new uOt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),BS(e).start(),e.N_.w_()}function MJ(e){return c_(e)&&!BS(e).Zo()&&e.F_.size>0}function c_(e){return er(e).M_.size===0}function fNe(e){e.L_=void 0}async function aDt(e){e.N_.set("Online")}async function uDt(e){e.F_.forEach((t,n)=>{OJ(e,t)})}async function lDt(e,t){fNe(e),MJ(e)?(e.N_.D_(t),DJ(e)):e.N_.set("Unknown")}async function cDt(e,t,n){if(e.N_.set("Online"),t instanceof JPe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){Jt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await g$(e,r)}else if(t instanceof MD?e.L_.Ke(t):t instanceof QPe?e.L_.He(t):e.L_.We(t),!n.isEqual(Jn.min()))try{const r=await aNe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(nu.EMPTY_BYTE_STRING,c.snapshotVersion)),dNe(s,u);const d=new q0(c.target,u,l,c.sequenceNumber);OJ(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){Jt("RemoteStore","Failed to raise snapshot:",r),await g$(e,r)}}async function g$(e,t,n){if(!UR(t))throw t;e.M_.add(1),await WR(e),e.N_.set("Offline"),n||(n=()=>aNe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Jt("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await qR(e)})}function hNe(e,t){return t().catch(n=>g$(e,n,t))}async function Y6(e){const t=er(e),n=zy(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;dDt(t);)try{const i=await YOt(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,fDt(t,i)}catch(i){await g$(t,i)}pNe(t)&&mNe(t)}function dDt(e){return c_(e)&&e.v_.length<10}function fDt(e,t){e.v_.push(t);const n=zy(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function pNe(e){return c_(e)&&!zy(e).Zo()&&e.v_.length>0}function mNe(e){zy(e).start()}async function hDt(e){zy(e).V_()}async function pDt(e){const t=zy(e);for(const n of e.v_)t.d_(n.mutations)}async function mDt(e,t,n){const r=e.v_.shift(),i=CJ.from(r,t,n);await hNe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Y6(e)}async function gDt(e,t){t&&zy(e).E_&&await async function(r,i){if(function(o){return sOt(o)&&o!==lt.ABORTED}(i.code)){const s=r.v_.shift();zy(r).t_(),await hNe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Y6(r)}}(e,t),pNe(e)&&mNe(e)}async function gme(e,t){const n=er(e);n.asyncQueue.verifyOperationInProgress(),Jt("RemoteStore","RemoteStore received new credentials");const r=c_(n);n.M_.add(3),await WR(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await qR(n)}async function yDt(e,t){const n=er(e);t?(n.M_.delete(2),await qR(n)):t||(n.M_.add(2),await WR(n),n.N_.set("Unknown"))}function BS(e){return e.B_||(e.B_=function(n,r,i){const s=er(n);return s.f_(),new nDt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:aDt.bind(null,e),To:uDt.bind(null,e),Ao:lDt.bind(null,e),h_:cDt.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),MJ(e)?DJ(e):e.N_.set("Unknown")):(await e.B_.stop(),fNe(e))})),e.B_}function zy(e){return e.k_||(e.k_=function(n,r,i){const s=er(n);return s.f_(),new rDt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:hDt.bind(null,e),Ao:gDt.bind(null,e),R_:pDt.bind(null,e),A_:mDt.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await Y6(e)):(await e.k_.stop(),e.v_.length>0&&(Jt("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $J{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Gm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new $J(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ut(lt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function LJ(e,t){if(vg("AsyncQueue",`${t}: ${e}`),UR(e))return new Ut(lt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(t){this.comparator=t?(n,r)=>t(n,r)||gn.comparator(n.key,r.key):(n,r)=>gn.comparator(n.key,r.key),this.keyedMap=uA(),this.sortedSet=new vs(this.comparator)}static emptySet(t){return new Nx(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Nx)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Nx;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yme{constructor(){this.q_=new vs(gn.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):Vn():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class CE{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new CE(t,n,Nx.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&z6(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vDt{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class bDt{constructor(){this.queries=new jS(t=>LPe(t),z6),this.onlineState="Unknown",this.z_=new Set}}async function gNe(e,t){const n=er(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new vDt,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=LJ(o,`Initialization of query '${qw(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&FJ(n)}async function yNe(e,t){const n=er(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _Dt(e,t){const n=er(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&FJ(n)}function wDt(e,t,n){const r=er(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function FJ(e){e.z_.forEach(t=>{t.next()})}var MH,vme;(vme=MH||(MH={})).J_="default",vme.Cache="cache";class vNe{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new CE(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=CE.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==MH.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bNe{constructor(t){this.key=t}}class _Ne{constructor(t){this.key=t}}class xDt{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Cr(),this.mutatedKeys=Cr(),this.Ia=FPe(t),this.Ta=new Nx(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new yme,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,d)=>{const f=i.get(c),h=U6(this.query,d)?d:null,p=!!f&&this.mutatedKeys.has(f.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let y=!1;f&&h?f.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),y=!0):this.Ra(f,h)||(r.track({type:2,doc:h}),y=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!f&&h?(r.track({type:0,doc:h}),y=!0):f&&!h&&(r.track({type:1,doc:f}),y=!0,(u||l)&&(a=!0)),y&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,d)=>function(h,p){const m=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Vn()}};return m(h)-m(p)}(c.type,d.type)||this.Ia(c.doc,d.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new CE(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new yme,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=Cr(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new _Ne(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new bNe(r))}),n}pa(t){this.la=t.hs,this.Pa=Cr();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return CE.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class EDt{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class SDt{constructor(t){this.key=t,this.wa=!1}}class TDt{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new jS(a=>LPe(a),z6),this.Da=new Map,this.Ca=new Set,this.va=new vs(gn.comparator),this.Fa=new Map,this.Ma=new RJ,this.xa={},this.Oa=new Map,this.Na=TE.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function CDt(e,t,n=!0){const r=CNe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await wNe(r,t,n,!0),i}async function ADt(e,t){const n=CNe(e);await wNe(n,t,!0,!1)}async function wNe(e,t,n,r){const i=await KOt(e.localStore,cp(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await IDt(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&cNe(e.remoteStore,i),a}async function IDt(e,t,n,r,i){e.Ba=(d,f,h)=>async function(m,y,v,w){let x=y.view.da(v);x.Xi&&(x=await hme(m.localStore,y.query,!1).then(({documents:A})=>y.view.da(A,x)));const S=w&&w.targetChanges.get(y.targetId),E=w&&w.targetMismatches.get(y.targetId)!=null,T=y.view.applyChanges(x,m.isPrimaryClient,S,E);return _me(m,y.targetId,T.fa),T.snapshot}(e,d,f,h);const s=await hme(e.localStore,t,!0),o=new xDt(t,s.hs),a=o.da(s.documents),u=HR.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);_me(e,n,l.fa);const c=new EDt(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function RDt(e,t,n){const r=er(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!z6(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await DH(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&NJ(r.remoteStore,i.targetId),$H(r,i.targetId)}).catch(zR)):($H(r,i.targetId),await DH(r.localStore,i.targetId,!0))}async function kDt(e,t){const n=er(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),NJ(n.remoteStore,r.targetId))}async function PDt(e,t,n){const r=FDt(e);try{const i=await function(o,a){const u=er(o),l=ko.now(),c=a.reduce((h,p)=>h.add(p.key),Cr());let d,f;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=bg(),m=Cr();return u.os.getEntries(h,c).next(y=>{p=y,p.forEach((v,w)=>{w.isValidDocument()||(m=m.add(v))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(y=>{d=y;const v=[];for(const w of a){const x=eOt(w,d.get(w.key).overlayedDocument);x!=null&&v.push(new bv(w.key,x,RPe(x.value.mapValue),El.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,v,a)}).next(y=>{f=y;const v=y.applyToLocalDocumentSet(d,m);return u.documentOverlayCache.saveOverlays(h,y.batchId,v)})}).then(()=>({batchId:f.batchId,changes:BPe(d)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new vs(ai)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await GR(r,i.changes),await Y6(r.remoteStore)}catch(i){const s=LJ(i,"Failed to persist write");n.reject(s)}}async function xNe(e,t){const n=er(e);try{const r=await WOt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(Vi(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?Vi(o.wa):i.removedDocuments.size>0&&(Vi(o.wa),o.wa=!1))}),await GR(n,r,t)}catch(r){await zR(r)}}function bme(e,t,n){const r=er(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=er(o);u.onlineState=a;let l=!1;u.queries.forEach((c,d)=>{for(const f of d.U_)f.j_(a)&&(l=!0)}),l&&FJ(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function NDt(e,t,n){const r=er(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new vs(gn.comparator);o=o.insert(s,qa.newNoDocument(s,Jn.min()));const a=Cr().add(s),u=new W6(Jn.min(),new Map,new vs(ai),o,a);await xNe(r,u),r.va=r.va.remove(s),r.Fa.delete(t),jJ(r)}else await DH(r.localStore,t,!1).then(()=>$H(r,t,n)).catch(zR)}async function ODt(e,t){const n=er(e),r=t.batch.batchId;try{const i=await qOt(n.localStore,t);SNe(n,r,null),ENe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await GR(n,i)}catch(i){await zR(i)}}async function DDt(e,t,n){const r=er(e);try{const i=await function(o,a){const u=er(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(d=>(Vi(d!==null),c=d.keys(),u.mutationQueue.removeMutationBatch(l,d))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);SNe(r,t,n),ENe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await GR(r,i)}catch(i){await zR(i)}}function ENe(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function SNe(e,t,n){const r=er(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function $H(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||TNe(e,r)})}function TNe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(NJ(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),jJ(e))}function _me(e,t,n){for(const r of n)r instanceof bNe?(e.Ma.addReference(r.key,t),MDt(e,r)):r instanceof _Ne?(Jt("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||TNe(e,r.key)):Vn()}function MDt(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(Jt("SyncEngine","New document in limbo: "+n),e.Ca.add(r),jJ(e))}function jJ(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new gn(Xi.fromString(t)),r=e.Na.next();e.Fa.set(r,new SDt(n)),e.va=e.va.insert(n,r),cNe(e.remoteStore,new q0(cp(TJ(n.path)),r,"TargetPurposeLimboResolution",bJ.oe))}}async function GR(e,t,n){const r=er(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{var c;if((l||n)&&r.isPrimaryClient){const d=l?!l.fromCache:(c=n==null?void 0:n.targetChanges.get(u.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(u.targetId,d?"current":"not-current")}if(l){i.push(l);const d=PJ.Ki(u.targetId,l);s.push(d)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=er(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>vt.forEach(l,f=>vt.forEach(f.qi,h=>c.persistence.referenceDelegate.addReference(d,f.targetId,h)).next(()=>vt.forEach(f.Qi,h=>c.persistence.referenceDelegate.removeReference(d,f.targetId,h)))))}catch(d){if(!UR(d))throw d;Jt("LocalStore","Failed to update sequence numbers: "+d)}for(const d of l){const f=d.targetId;if(!d.fromCache){const h=c.ns.get(f),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(f,m)}}}(r.localStore,s))}async function $Dt(e,t){const n=er(e);if(!n.currentUser.isEqual(t)){Jt("SyncEngine","User change. New user:",t.toKey());const r=await oNe(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new Ut(lt.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await GR(n,r.us)}}function LDt(e,t){const n=er(e),r=n.Fa.get(t);if(r&&r.wa)return Cr().add(r.key);{let i=Cr();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function CNe(e){const t=er(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=xNe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=LDt.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=NDt.bind(null,t),t.Sa.h_=_Dt.bind(null,t.eventManager),t.Sa.ka=wDt.bind(null,t.eventManager),t}function FDt(e){const t=er(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ODt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=DDt.bind(null,t),t}class wme{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=G6(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return HOt(this.persistence,new UOt,t.initialUser,this.serializer)}createPersistence(t){return new jOt(kJ.Hr,this.serializer)}createSharedClientState(t){return new QOt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class jDt{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bme(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$Dt.bind(null,this.syncEngine),await yDt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new bDt}()}createDatastore(t){const n=G6(t.databaseInfo.databaseId),r=function(s){return new tDt(s)}(t.databaseInfo);return function(s,o,a,u){return new iDt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new oDt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>bme(this.syncEngine,n,0),function(){return mme.D()?new mme:new JOt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const d=new TDt(i,s,o,a,u,l);return c&&(d.La=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=er(r);Jt("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await WR(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ANe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):vg("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BDt{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ul.UNAUTHENTICATED,this.clientId=CPe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Jt("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Jt("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ut(lt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Gm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=LJ(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function oz(e,t){e.asyncQueue.verifyOperationInProgress(),Jt("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await oNe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function xme(e,t){e.asyncQueue.verifyOperationInProgress();const n=await INe(e);Jt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>gme(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>gme(t.remoteStore,i)),e._onlineComponents=t}function zDt(e){return e.name==="FirebaseError"?e.code===lt.FAILED_PRECONDITION||e.code===lt.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function INe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Jt("FirestoreClient","Using user provided OfflineComponentProvider");try{await oz(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!zDt(n))throw n;aI("Error using user provided cache. Falling back to memory cache: "+n),await oz(e,new wme)}}else Jt("FirestoreClient","Using default OfflineComponentProvider"),await oz(e,new wme);return e._offlineComponents}async function BJ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Jt("FirestoreClient","Using user provided OnlineComponentProvider"),await xme(e,e._uninitializedComponentsProvider._online)):(Jt("FirestoreClient","Using default OnlineComponentProvider"),await xme(e,new jDt))),e._onlineComponents}function UDt(e){return INe(e).then(t=>t.persistence)}function VDt(e){return BJ(e).then(t=>t.remoteStore)}function HDt(e){return BJ(e).then(t=>t.syncEngine)}async function RNe(e){const t=await BJ(e),n=t.eventManager;return n.onListen=CDt.bind(null,t.syncEngine),n.onUnlisten=RDt.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=ADt.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=kDt.bind(null,t.syncEngine),n}function qDt(e){return e.asyncQueue.enqueue(async()=>{const t=await UDt(e),n=await VDt(e);return t.setNetworkEnabled(!0),function(i){const s=er(i);return s.M_.delete(0),qR(s)}(n)})}function WDt(e,t,n={}){const r=new Gm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new ANe({next:f=>{o.enqueueAndForget(()=>yNe(s,d));const h=f.docs.has(a);!h&&f.fromCache?l.reject(new Ut(lt.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&f.fromCache&&u&&u.source==="server"?l.reject(new Ut(lt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(f)},error:f=>l.reject(f)}),d=new vNe(TJ(a.path),c,{includeMetadataChanges:!0,ra:!0});return gNe(s,d)}(await RNe(e),e.asyncQueue,t,n,r)),r.promise}function GDt(e,t,n={}){const r=new Gm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new ANe({next:f=>{o.enqueueAndForget(()=>yNe(s,d)),f.fromCache&&u.source==="server"?l.reject(new Ut(lt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(f)},error:f=>l.reject(f)}),d=new vNe(a,c,{includeMetadataChanges:!0,ra:!0});return gNe(s,d)}(await RNe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kNe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eme=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PNe(e,t,n){if(!n)throw new Ut(lt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function YDt(e,t,n,r){if(t===!0&&r===!0)throw new Ut(lt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Sme(e){if(!gn.isDocumentKey(e))throw new Ut(lt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Tme(e){if(gn.isDocumentKey(e))throw new Ut(lt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function K6(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Vn()}function Hf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ut(lt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=K6(e);throw new Ut(lt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cme{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Ut(lt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Ut(lt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}YDt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kNe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ut(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ut(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ut(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class zJ{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cme({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ut(lt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new Ut(lt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cme(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new cNt;switch(r.type){case"firstParty":return new hNt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ut(lt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Eme.get(n);r&&(Jt("ComponentProvider","Removing Datastore"),Eme.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new d_(this.firestore,t,this._query)}}class Pu{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dy(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Pu(this.firestore,t,this._key)}}class dy extends d_{constructor(t,n,r){super(t,n,TJ(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Pu(this.firestore,null,new gn(t))}withConverter(t){return new dy(this.firestore,t,this._path)}}function Jd(e,t,...n){if(e=Hi(e),PNe("collection","path",t),e instanceof zJ){const r=Xi.fromString(t,...n);return Tme(r),new dy(e,null,r)}{if(!(e instanceof Pu||e instanceof dy))throw new Ut(lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Xi.fromString(t,...n));return Tme(r),new dy(e.firestore,null,r)}}function vo(e,t,...n){if(e=Hi(e),arguments.length===1&&(t=CPe.newId()),PNe("doc","path",t),e instanceof zJ){const r=Xi.fromString(t,...n);return Sme(r),new Pu(e,null,new gn(r))}{if(!(e instanceof Pu||e instanceof dy))throw new Ut(lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Xi.fromString(t,...n));return Sme(r),new Pu(e.firestore,e instanceof dy?e.converter:null,new gn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KDt{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new uNe(this,"async_queue_retry"),this.hu=()=>{const n=sz();n&&Jt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=sz();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=sz();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Gm;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!UR(t))throw t;Jt("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw vg("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=$J.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Vn()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class _v extends zJ{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new KDt}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||NNe(this),this._firestoreClient.terminate()}}function XDt(e,t,n){n||(n="(default)");const r=MS(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(iI(s,t))return i;throw new Ut(lt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new Ut(lt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Ut(lt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function YR(e){return e._firestoreClient||NNe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function NNe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new CNt(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,kNe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new BDt(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function QDt(e){return qDt(YR(e=Hf(e,_v)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(t){this._byteString=t}static fromBase64String(t){try{return new AE(nu.fromBase64String(t))}catch(n){throw new Ut(lt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new AE(nu.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Ut(lt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ga(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let UJ=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Ut(lt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Ut(lt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ai(this._lat,t._lat)||ai(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JDt=/^__.*__$/;class ZDt{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new bv(t,this.data,this.fieldMask,n,this.fieldTransforms):new VR(t,this.data,n,this.fieldTransforms)}}class ONe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new bv(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function DNe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Vn()}}class VJ{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new VJ(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return y$(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(DNe(this.fu)&&JDt.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class eMt{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||G6(t)}Fu(t,n,r,i=!1){return new VJ({fu:t,methodName:n,vu:r,path:ga.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Q6(e){const t=e._freezeSettings(),n=G6(e._databaseId);return new eMt(e._databaseId,!!t.ignoreUndefinedProperties,n)}function MNe(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);qJ("Data must be an object, but it was:",o,r);const a=FNe(r,o);let u,l;if(s.merge)u=new dc(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const f=LH(t,d,n);if(!o.contains(f))throw new Ut(lt.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);BNe(c,f)||c.push(f)}u=new dc(c),l=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,l=o.fieldTransforms;return new ZDt(new pl(a),u,l)}class J6 extends X6{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof J6}}class HJ extends X6{_toFieldTransform(t){return new XNt(t.path,new hI)}isEqual(t){return t instanceof HJ}}function $Ne(e,t,n,r){const i=e.Fu(1,t,n);qJ("Data must be an object, but it was:",i,r);const s=[],o=pl.empty();l_(r,(u,l)=>{const c=WJ(t,u,n);l=Hi(l);const d=i.Su(c);if(l instanceof J6)s.push(c);else{const f=XR(l,d);f!=null&&(s.push(c),o.set(c,f))}});const a=new dc(s);return new ONe(o,a,i.fieldTransforms)}function LNe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[LH(t,r,n)],u=[i];if(s.length%2!=0)throw new Ut(lt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(LH(t,s[f])),u.push(s[f+1]);const l=[],c=pl.empty();for(let f=a.length-1;f>=0;--f)if(!BNe(l,a[f])){const h=a[f];let p=u[f];p=Hi(p);const m=o.Su(h);if(p instanceof J6)l.push(h);else{const y=XR(p,m);y!=null&&(l.push(h),c.set(h,y))}}const d=new dc(l);return new ONe(c,d,o.fieldTransforms)}function tMt(e,t,n,r=!1){return XR(n,e.Fu(r?4:3,t))}function XR(e,t){if(jNe(e=Hi(e)))return qJ("Unsupported field value:",t,e),FNe(e,t);if(e instanceof X6)return function(r,i){if(!DNe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=XR(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=Hi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return GNt(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ko.fromDate(r);return{timestampValue:m$(i.serializer,s)}}if(r instanceof ko){const s=new ko(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:m$(i.serializer,s)}}if(r instanceof UJ)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof AE)return{bytesValue:ZPe(i.serializer,r._byteString)};if(r instanceof Pu){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:IJ(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${K6(r)}`)}(e,t)}function FNe(e,t){const n={};return APe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):l_(e,(r,i)=>{const s=XR(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function jNe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof ko||e instanceof UJ||e instanceof AE||e instanceof Pu||e instanceof X6)}function qJ(e,t,n){if(!jNe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=K6(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function LH(e,t,n){if((t=Hi(t))instanceof KR)return t._internalPath;if(typeof t=="string")return WJ(e,t);throw y$("Field path arguments must be of type string or ",e,!1,void 0,n)}const nMt=new RegExp("[~\\*/\\[\\]]");function WJ(e,t,n){if(t.search(nMt)>=0)throw y$(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new KR(...t.split("."))._internalPath}catch{throw y$(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function y$(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Ut(lt.INVALID_ARGUMENT,a+e+u)}function BNe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zNe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Pu(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new rMt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Z6("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class rMt extends zNe{data(){return super.data()}}function Z6(e,t){return typeof t=="string"?WJ(e,t):t instanceof KR?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iMt(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Ut(lt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class GJ{}class UNe extends GJ{}function Ame(e,t,...n){let r=[];t instanceof GJ&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof YJ).length,a=s.filter(u=>u instanceof e4).length;if(o>1||o>0&&a>0)throw new Ut(lt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class e4 extends UNe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new e4(t,n,r)}_apply(t){const n=this._parse(t);return VNe(t._query,n),new d_(t.firestore,t.converter,IH(t._query,n))}_parse(t){const n=Q6(t.firestore);return function(s,o,a,u,l,c,d){let f;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Ut(lt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){Rme(d,c);const h=[];for(const p of d)h.push(Ime(u,s,p));f={arrayValue:{values:h}}}else f=Ime(u,s,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Rme(d,c),f=tMt(a,o,d,c==="in"||c==="not-in");return oo.create(l,c,f)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function sMt(e,t,n){const r=t,i=Z6("where",e);return e4._create(i,r,n)}class YJ extends GJ{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new YJ(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Vf.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)VNe(o,u),o=IH(o,u)}(t._query,n),new d_(t.firestore,t.converter,IH(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class KJ extends UNe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new KJ(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new Ut(lt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ut(lt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fI(s,o)}(t._query,this._field,this._direction);return new d_(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new FS(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function oMt(e,t="asc"){const n=t,r=Z6("orderBy",e);return KJ._create(r,n)}function Ime(e,t,n){if(typeof(n=Hi(n))=="string"){if(n==="")throw new Ut(lt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$Pe(t)&&n.indexOf("/")!==-1)throw new Ut(lt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Xi.fromString(n));if(!gn.isDocumentKey(r))throw new Ut(lt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xpe(e,new gn(r))}if(n instanceof Pu)return Xpe(e,n._key);throw new Ut(lt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${K6(n)}.`)}function Rme(e,t){if(!Array.isArray(e)||e.length===0)throw new Ut(lt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function VNe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Ut(lt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ut(lt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class aMt{convertValue(t,n="none"){switch(Ib(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ro(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Ab(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw Vn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return l_(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new UJ(ro(t.latitude),ro(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=wJ(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(lI(t));default:return null}}convertTimestamp(t){const n=By(t);return new ko(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Xi.fromString(t);Vi(sNe(r));const i=new cI(r.get(1),r.get(3)),s=new gn(r.popFirst(5));return i.isEqual(n)||vg(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HNe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class qNe extends zNe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new $D(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Z6("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class $D extends qNe{data(t={}){return super.data(t)}}class uMt{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new cA(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new $D(this._firestore,this._userDataWriter,r.key,r,new cA(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ut(lt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new $D(i._firestore,i._userDataWriter,a.doc.key,a.doc,new cA(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new $D(i._firestore,i._userDataWriter,a.doc.key,a.doc,new cA(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:lMt(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function lMt(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Vn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function az(e){e=Hf(e,Pu);const t=Hf(e.firestore,_v);return WDt(YR(t),e._key).then(n=>fMt(t,e,n))}class WNe extends aMt{constructor(t){super(),this.firestore=t}convertBytes(t){return new AE(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Pu(this.firestore,null,n)}}function aC(e){e=Hf(e,d_);const t=Hf(e.firestore,_v),n=YR(t),r=new WNe(t);return iMt(e._query),GDt(n,e._query).then(i=>new uMt(t,r,e,i))}function Xl(e,t,n){e=Hf(e,Pu);const r=Hf(e.firestore,_v),i=HNe(e.converter,t,n);return t4(r,[MNe(Q6(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,El.none())])}function cMt(e,t,n,...r){e=Hf(e,Pu);const i=Hf(e.firestore,_v),s=Q6(i);let o;return o=typeof(t=Hi(t))=="string"||t instanceof KR?LNe(s,"updateDoc",e._key,t,n,r):$Ne(s,"updateDoc",e._key,t),t4(i,[o.toMutation(e._key,El.exists(!0))])}function dMt(e){return t4(Hf(e.firestore,_v),[new q6(e._key,El.none())])}function t4(e,t){return function(r,i){const s=new Gm;return r.asyncQueue.enqueueAndForget(async()=>PDt(await HDt(r),i,s)),s.promise}(YR(e),t)}function fMt(e,t,n){const r=n.docs.get(t._key),i=new WNe(e);return new qNe(e,i,t._key,r,new cA(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hMt{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Q6(t)}set(t,n,r){this._verifyNotCommitted();const i=uz(t,this._firestore),s=HNe(i.converter,n,r),o=MNe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,El.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=uz(t,this._firestore);let o;return o=typeof(n=Hi(n))=="string"||n instanceof KR?LNe(this._dataReader,"WriteBatch.update",s._key,n,r,i):$Ne(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,El.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=uz(t,this._firestore);return this._mutations=this._mutations.concat(new q6(n._key,El.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ut(lt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function uz(e,t){if((e=Hi(e)).firestore!==t)throw new Ut(lt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function pMt(){return new HJ("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kme(e){return YR(e=Hf(e,_v)),new hMt(e,t=>t4(e,t))}(function(t,n=!0){(function(i){LS=i})(u_),gg(new xp("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new _v(new dNt(r.getProvider("auth-internal")),new mNt(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Ut(lt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cI(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),kf(Wpe,"4.6.4",t),kf(Wpe,"4.6.4","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FH=new Map,GNe={activated:!1,tokenObservers:[]},mMt={initialized:!1,enabled:!1};function Po(e){return FH.get(e)||Object.assign({},GNe)}function gMt(e,t){return FH.set(e,t),FH.get(e)}function n4(){return mMt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YNe="https://content-firebaseappcheck.googleapis.com/v1",yMt="exchangeRecaptchaV3Token",vMt="exchangeDebugToken",Pme={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},bMt=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Mt{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new rI,this.pending.promise.catch(n=>{}),await wMt(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new rI,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function wMt(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xMt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},bl=new DS("appCheck","AppCheck",xMt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nme(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function XJ(e){if(!Po(e).activated)throw bl.create("use-before-activation",{appName:e.name})}function KNe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=vO(n)+"d:"),r&&(o+=vO(r)+"h:"),o+=vO(i)+"m:"+vO(s)+"s",o}function vO(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QJ({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(d){throw bl.create("fetch-network-error",{originalErrorMessage:d==null?void 0:d.message})}if(o.status!==200)throw bl.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(d){throw bl.create("fetch-parse-error",{originalErrorMessage:d==null?void 0:d.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw bl.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function EMt(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${YNe}/projects/${n}/apps/${r}:${yMt}?key=${i}`,body:{recaptcha_v3_token:t}}}function XNe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${YNe}/projects/${n}/apps/${r}:${vMt}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SMt="firebase-app-check-database",TMt=1,gI="firebase-app-check-store",QNe="debug-token";let bO=null;function JNe(){return bO||(bO=new Promise((e,t)=>{try{const n=indexedDB.open(SMt,TMt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(bl.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(gI,{keyPath:"compositeKey"})}}}catch(n){t(bl.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),bO)}function CMt(e){return eOe(tOe(e))}function AMt(e,t){return ZNe(tOe(e),t)}function IMt(e){return ZNe(QNe,e)}function RMt(){return eOe(QNe)}async function ZNe(e,t){const r=(await JNe()).transaction(gI,"readwrite"),s=r.objectStore(gI).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(bl.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function eOe(e){const n=(await JNe()).transaction(gI,"readonly"),i=n.objectStore(gI).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(bl.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function tOe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=new O6("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kMt(e){if(ZQ()){let t;try{t=await CMt(e)}catch(n){yI.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function lz(e,t){return ZQ()?AMt(e,t).catch(n=>{yI.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function PMt(){let e;try{e=await RMt()}catch{}if(e)return e;{const t=P2t();return IMt(t).catch(n=>yI.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JJ(){return n4().enabled}async function ZJ(){const e=n4();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function NMt(){const e=vke(),t=n4();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new rI;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(PMt())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OMt={error:"UNKNOWN_ERROR"};function DMt(e){return JQ.encodeString(JSON.stringify(e),!1)}async function jH(e,t=!1){const n=e.app;XJ(n);const r=Po(n);let i=r.token,s;if(i&&!sx(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(sx(u)?i=u:await lz(n,void 0))}if(!t&&i&&sx(i))return{token:i.token};let o=!1;if(JJ()){r.exchangeTokenPromise||(r.exchangeTokenPromise=QJ(XNe(n,await ZJ()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await lz(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Po(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?yI.warn(u.message):yI.error(u),s=u}let a;return i?s?sx(i)?a={token:i.token,internalError:s}:a=Dme(s):(a={token:i.token},r.token=i,await lz(n,i)):a=Dme(s),o&&iOe(n,a),a}async function MMt(e){const t=e.app;XJ(t);const{provider:n}=Po(t);if(JJ()){const r=await ZJ(),{token:i}=await QJ(XNe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function nOe(e,t,n,r){const{app:i}=e,s=Po(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&sx(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),Ome(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Ome(e))}function rOe(e,t){const n=Po(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Ome(e){const{app:t}=e,n=Po(t);let r=n.tokenRefresher;r||(r=$Mt(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function $Mt(e){const{app:t}=e;return new _Mt(async()=>{const n=Po(t);let r;if(n.token?r=await jH(e,!0):r=await jH(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Po(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Pme.RETRIAL_MIN_WAIT,Pme.RETRIAL_MAX_WAIT)}function iOe(e,t){const n=Po(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function sx(e){return e.expireTimeMillis-Date.now()>0}function Dme(e){return{token:DMt(OMt),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LMt{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Po(this.app);for(const n of t)rOe(this.app,n.next);return Promise.resolve()}}function FMt(e,t){return new LMt(e,t)}function jMt(e){return{getToken:t=>jH(e,t),getLimitedUseToken:()=>MMt(e),addTokenListener:t=>nOe(e,"INTERNAL",t),removeTokenListener:t=>rOe(e.app,t)}}const BMt="@firebase/app-check",zMt="0.8.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UMt="https://www.google.com/recaptcha/api.js";function VMt(e,t){const n=new rI,r=Po(e);r.reCAPTCHAState={initialized:n};const i=HMt(e),s=Nme(!1);return s?Mme(e,t,s,i,n):GMt(()=>{const o=Nme(!1);if(!o)throw new Error("no recaptcha");Mme(e,t,o,i,n)}),n.promise}function Mme(e,t,n,r,i){n.ready(()=>{WMt(e,t,n,r),i.resolve(n)})}function HMt(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function qMt(e){XJ(e);const n=await Po(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Po(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function WMt(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Po(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Po(e).reCAPTCHAState.succeeded=!1}}),s=Po(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function GMt(e){const t=document.createElement("script");t.src=UMt,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eZ{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;KMt(this._throttleData);const i=await qMt(this._app).catch(o=>{throw bl.create("recaptcha-error")});if(!(!((t=Po(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw bl.create("recaptcha-error");let s;try{s=await QJ(EMt(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=YMt(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),bl.create("throttled",{time:KNe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=MS(t,"heartbeat"),VMt(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof eZ?this._siteKey===t._siteKey:!1}}function YMt(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+bMt,httpStatus:e};{const n=t?t.backoffCount:0,r=$2t(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function KMt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw bl.create("throttled",{time:KNe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XMt(e=tJ(),t){e=Hi(e);const n=MS(e,"app-check");if(n4().initialized||NMt(),JJ()&&ZJ().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw bl.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return QMt(e,t.provider,t.isTokenAutoRefreshEnabled),Po(e).isTokenAutoRefreshEnabled&&nOe(r,"INTERNAL",()=>{}),r}function QMt(e,t,n){const r=gMt(e,Object.assign({},GNe));r.activated=!0,r.provider=t,r.cachedTokenPromise=kMt(e).then(i=>(i&&sx(i)&&(r.token=i,iOe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const JMt="app-check",$me="app-check-internal";function ZMt(){gg(new xp(JMt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return FMt(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider($me).initialize()})),gg(new xp($me,e=>{const t=e.getProvider("app-check").getImmediate();return jMt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),kf(BMt,zMt)}ZMt();function _O(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var cz={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var Lme;function e3t(){return Lme||(Lme=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var d=typeof _O=="function"&&_O;if(!c&&d)return d(l,!0);if(a)return a(l,!0);var f=new Error("Cannot find module '"+l+"'");throw f.code="MODULE_NOT_FOUND",f}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof _O=="function"&&_O,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var d=new s.MessageChannel;d.port1.onmessage=p,a=function(){d.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var y=s.document.createElement("script");y.onreadystatechange=function(){p(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},s.document.documentElement.appendChild(y)}:a=function(){setTimeout(p,0)};var f,h=[];function p(){f=!0;for(var y,v,w=h.length;w;){for(v=h,h=[],y=-1;++y<w;)v[y]();w=h.length}f=!1}r.exports=m;function m(y){h.push(y)===1&&!f&&a()}}).call(this,typeof dd<"u"?dd:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=d;function d(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}d.prototype.catch=function(E){return this.then(null,E)},d.prototype.then=function(E,T){if(typeof E!="function"&&this.state===l||typeof T!="function"&&this.state===u)return this;var A=new this.constructor(o);if(this.state!==c){var I=this.state===l?E:T;h(A,I,this.outcome)}else this.queue.push(new f(A,E,T));return A};function f(E,T,A){this.promise=E,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof A=="function"&&(this.onRejected=A,this.callRejected=this.otherCallRejected)}f.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},f.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},f.prototype.callRejected=function(E){a.reject(this.promise,E)},f.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,T,A){s(function(){var I;try{I=T(A)}catch(k){return a.reject(E,k)}I===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,I)})}a.resolve=function(E,T){var A=y(p,T);if(A.status==="error")return a.reject(E,A.value);var I=A.value;if(I)m(E,I);else{E.state=l,E.outcome=T;for(var k=-1,D=E.queue.length;++k<D;)E.queue[k].callFulfilled(T)}return E},a.reject=function(E,T){E.state=u,E.outcome=T;for(var A=-1,I=E.queue.length;++A<I;)E.queue[A].callRejected(T);return E};function p(E){var T=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof T=="function")return function(){T.apply(E,arguments)}}function m(E,T){var A=!1;function I(z){A||(A=!0,a.reject(E,z))}function k(z){A||(A=!0,a.resolve(E,z))}function D(){T(k,I)}var M=y(D);M.status==="error"&&I(M.value)}function y(E,T){var A={};try{A.value=E(T),A.status="success"}catch(I){A.status="error",A.value=I}return A}d.resolve=v;function v(E){return E instanceof this?E:a.resolve(new this(o),E)}d.reject=w;function w(E){var T=new this(o);return a.reject(T,E)}d.all=x;function x(E){var T=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=E.length,I=!1;if(!A)return this.resolve([]);for(var k=new Array(A),D=0,M=-1,z=new this(o);++M<A;)O(E[M],M);return z;function O($,F){T.resolve($).then(B,function(q){I||(I=!0,a.reject(z,q))});function B(q){k[F]=q,++D===A&&!I&&(I=!0,a.resolve(z,k))}}}d.race=S;function S(E){var T=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=E.length,I=!1;if(!A)return this.resolve([]);for(var k=-1,D=new this(o);++k<A;)M(E[k]);return D;function M(z){T.resolve(z).then(function(O){I||(I=!0,a.resolve(D,O))},function(O){I||(I=!0,a.reject(D,O))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof dd<"u"?dd:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(re){return typeof re}:function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re};function o(re,_e){if(!(re instanceof _e))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var re=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),_e=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!re||_e)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(re,_e){re=re||[],_e=_e||{};try{return new Blob(re,_e)}catch(Ie){if(Ie.name!=="TypeError")throw Ie;for(var de=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,Pe=new de,Me=0;Me<re.length;Me+=1)Pe.append(re[Me]);return Pe.getBlob(_e.type)}}typeof Promise>"u"&&n(3);var d=Promise;function f(re,_e){_e&&re.then(function(de){_e(null,de)},function(de){_e(de)})}function h(re,_e,de){typeof _e=="function"&&re.then(_e),typeof de=="function"&&re.catch(de)}function p(re){return typeof re!="string"&&(console.warn(re+" used as a key, but it is not a string."),re=String(re)),re}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var y="local-forage-detect-blob-support",v=void 0,w={},x=Object.prototype.toString,S="readonly",E="readwrite";function T(re){for(var _e=re.length,de=new ArrayBuffer(_e),Pe=new Uint8Array(de),Me=0;Me<_e;Me++)Pe[Me]=re.charCodeAt(Me);return de}function A(re){return new d(function(_e){var de=re.transaction(y,E),Pe=c([""]);de.objectStore(y).put(Pe,"key"),de.onabort=function(Me){Me.preventDefault(),Me.stopPropagation(),_e(!1)},de.oncomplete=function(){var Me=navigator.userAgent.match(/Chrome\/(\d+)/),Ie=navigator.userAgent.match(/Edge\//);_e(Ie||!Me||parseInt(Me[1],10)>=43)}}).catch(function(){return!1})}function I(re){return typeof v=="boolean"?d.resolve(v):A(re).then(function(_e){return v=_e,v})}function k(re){var _e=w[re.name],de={};de.promise=new d(function(Pe,Me){de.resolve=Pe,de.reject=Me}),_e.deferredOperations.push(de),_e.dbReady?_e.dbReady=_e.dbReady.then(function(){return de.promise}):_e.dbReady=de.promise}function D(re){var _e=w[re.name],de=_e.deferredOperations.pop();if(de)return de.resolve(),de.promise}function M(re,_e){var de=w[re.name],Pe=de.deferredOperations.pop();if(Pe)return Pe.reject(_e),Pe.promise}function z(re,_e){return new d(function(de,Pe){if(w[re.name]=w[re.name]||X(),re.db)if(_e)k(re),re.db.close();else return de(re.db);var Me=[re.name];_e&&Me.push(re.version);var Ie=u.open.apply(u,Me);_e&&(Ie.onupgradeneeded=function(nt){var ft=Ie.result;try{ft.createObjectStore(re.storeName),nt.oldVersion<=1&&ft.createObjectStore(y)}catch(pt){if(pt.name==="ConstraintError")console.warn('The database "'+re.name+'" has been upgraded from version '+nt.oldVersion+" to version "+nt.newVersion+', but the storage "'+re.storeName+'" already exists.');else throw pt}}),Ie.onerror=function(nt){nt.preventDefault(),Pe(Ie.error)},Ie.onsuccess=function(){var nt=Ie.result;nt.onversionchange=function(ft){ft.target.close()},de(nt),D(re)}})}function O(re){return z(re,!1)}function $(re){return z(re,!0)}function F(re,_e){if(!re.db)return!0;var de=!re.db.objectStoreNames.contains(re.storeName),Pe=re.version<re.db.version,Me=re.version>re.db.version;if(Pe&&(re.version!==_e&&console.warn('The database "'+re.name+`" can't be downgraded from version `+re.db.version+" to version "+re.version+"."),re.version=re.db.version),Me||de){if(de){var Ie=re.db.version+1;Ie>re.version&&(re.version=Ie)}return!0}return!1}function B(re){return new d(function(_e,de){var Pe=new FileReader;Pe.onerror=de,Pe.onloadend=function(Me){var Ie=btoa(Me.target.result||"");_e({__local_forage_encoded_blob:!0,data:Ie,type:re.type})},Pe.readAsBinaryString(re)})}function q(re){var _e=T(atob(re.data));return c([_e],{type:re.type})}function G(re){return re&&re.__local_forage_encoded_blob}function K(re){var _e=this,de=_e._initReady().then(function(){var Pe=w[_e._dbInfo.name];if(Pe&&Pe.dbReady)return Pe.dbReady});return h(de,re,re),de}function L(re){k(re);for(var _e=w[re.name],de=_e.forages,Pe=0;Pe<de.length;Pe++){var Me=de[Pe];Me._dbInfo.db&&(Me._dbInfo.db.close(),Me._dbInfo.db=null)}return re.db=null,O(re).then(function(Ie){return re.db=Ie,F(re)?$(re):Ie}).then(function(Ie){re.db=_e.db=Ie;for(var nt=0;nt<de.length;nt++)de[nt]._dbInfo.db=Ie}).catch(function(Ie){throw M(re,Ie),Ie})}function V(re,_e,de,Pe){Pe===void 0&&(Pe=1);try{var Me=re.db.transaction(re.storeName,_e);de(null,Me)}catch(Ie){if(Pe>0&&(!re.db||Ie.name==="InvalidStateError"||Ie.name==="NotFoundError"))return d.resolve().then(function(){if(!re.db||Ie.name==="NotFoundError"&&!re.db.objectStoreNames.contains(re.storeName)&&re.version<=re.db.version)return re.db&&(re.version=re.db.version+1),$(re)}).then(function(){return L(re).then(function(){V(re,_e,de,Pe-1)})}).catch(de);de(Ie)}}function X(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function H(re){var _e=this,de={db:null};if(re)for(var Pe in re)de[Pe]=re[Pe];var Me=w[de.name];Me||(Me=X(),w[de.name]=Me),Me.forages.push(_e),_e._initReady||(_e._initReady=_e.ready,_e.ready=K);var Ie=[];function nt(){return d.resolve()}for(var ft=0;ft<Me.forages.length;ft++){var pt=Me.forages[ft];pt!==_e&&Ie.push(pt._initReady().catch(nt))}var ht=Me.forages.slice(0);return d.all(Ie).then(function(){return de.db=Me.db,O(de)}).then(function(xt){return de.db=xt,F(de,_e._defaultConfig.version)?$(de):xt}).then(function(xt){de.db=Me.db=xt,_e._dbInfo=de;for(var Bt=0;Bt<ht.length;Bt++){var On=ht[Bt];On!==_e&&(On._dbInfo.db=de.db,On._dbInfo.version=de.version)}})}function Q(re,_e){var de=this;re=p(re);var Pe=new d(function(Me,Ie){de.ready().then(function(){V(de._dbInfo,S,function(nt,ft){if(nt)return Ie(nt);try{var pt=ft.objectStore(de._dbInfo.storeName),ht=pt.get(re);ht.onsuccess=function(){var xt=ht.result;xt===void 0&&(xt=null),G(xt)&&(xt=q(xt)),Me(xt)},ht.onerror=function(){Ie(ht.error)}}catch(xt){Ie(xt)}})}).catch(Ie)});return f(Pe,_e),Pe}function Z(re,_e){var de=this,Pe=new d(function(Me,Ie){de.ready().then(function(){V(de._dbInfo,S,function(nt,ft){if(nt)return Ie(nt);try{var pt=ft.objectStore(de._dbInfo.storeName),ht=pt.openCursor(),xt=1;ht.onsuccess=function(){var Bt=ht.result;if(Bt){var On=Bt.value;G(On)&&(On=q(On));var tn=re(On,Bt.key,xt++);tn!==void 0?Me(tn):Bt.continue()}else Me()},ht.onerror=function(){Ie(ht.error)}}catch(Bt){Ie(Bt)}})}).catch(Ie)});return f(Pe,_e),Pe}function ne(re,_e,de){var Pe=this;re=p(re);var Me=new d(function(Ie,nt){var ft;Pe.ready().then(function(){return ft=Pe._dbInfo,x.call(_e)==="[object Blob]"?I(ft.db).then(function(pt){return pt?_e:B(_e)}):_e}).then(function(pt){V(Pe._dbInfo,E,function(ht,xt){if(ht)return nt(ht);try{var Bt=xt.objectStore(Pe._dbInfo.storeName);pt===null&&(pt=void 0);var On=Bt.put(pt,re);xt.oncomplete=function(){pt===void 0&&(pt=null),Ie(pt)},xt.onabort=xt.onerror=function(){var tn=On.error?On.error:On.transaction.error;nt(tn)}}catch(tn){nt(tn)}})}).catch(nt)});return f(Me,de),Me}function ue(re,_e){var de=this;re=p(re);var Pe=new d(function(Me,Ie){de.ready().then(function(){V(de._dbInfo,E,function(nt,ft){if(nt)return Ie(nt);try{var pt=ft.objectStore(de._dbInfo.storeName),ht=pt.delete(re);ft.oncomplete=function(){Me()},ft.onerror=function(){Ie(ht.error)},ft.onabort=function(){var xt=ht.error?ht.error:ht.transaction.error;Ie(xt)}}catch(xt){Ie(xt)}})}).catch(Ie)});return f(Pe,_e),Pe}function le(re){var _e=this,de=new d(function(Pe,Me){_e.ready().then(function(){V(_e._dbInfo,E,function(Ie,nt){if(Ie)return Me(Ie);try{var ft=nt.objectStore(_e._dbInfo.storeName),pt=ft.clear();nt.oncomplete=function(){Pe()},nt.onabort=nt.onerror=function(){var ht=pt.error?pt.error:pt.transaction.error;Me(ht)}}catch(ht){Me(ht)}})}).catch(Me)});return f(de,re),de}function ce(re){var _e=this,de=new d(function(Pe,Me){_e.ready().then(function(){V(_e._dbInfo,S,function(Ie,nt){if(Ie)return Me(Ie);try{var ft=nt.objectStore(_e._dbInfo.storeName),pt=ft.count();pt.onsuccess=function(){Pe(pt.result)},pt.onerror=function(){Me(pt.error)}}catch(ht){Me(ht)}})}).catch(Me)});return f(de,re),de}function ge(re,_e){var de=this,Pe=new d(function(Me,Ie){if(re<0){Me(null);return}de.ready().then(function(){V(de._dbInfo,S,function(nt,ft){if(nt)return Ie(nt);try{var pt=ft.objectStore(de._dbInfo.storeName),ht=!1,xt=pt.openKeyCursor();xt.onsuccess=function(){var Bt=xt.result;if(!Bt){Me(null);return}re===0||ht?Me(Bt.key):(ht=!0,Bt.advance(re))},xt.onerror=function(){Ie(xt.error)}}catch(Bt){Ie(Bt)}})}).catch(Ie)});return f(Pe,_e),Pe}function se(re){var _e=this,de=new d(function(Pe,Me){_e.ready().then(function(){V(_e._dbInfo,S,function(Ie,nt){if(Ie)return Me(Ie);try{var ft=nt.objectStore(_e._dbInfo.storeName),pt=ft.openKeyCursor(),ht=[];pt.onsuccess=function(){var xt=pt.result;if(!xt){Pe(ht);return}ht.push(xt.key),xt.continue()},pt.onerror=function(){Me(pt.error)}}catch(xt){Me(xt)}})}).catch(Me)});return f(de,re),de}function te(re,_e){_e=m.apply(this,arguments);var de=this.config();re=typeof re!="function"&&re||{},re.name||(re.name=re.name||de.name,re.storeName=re.storeName||de.storeName);var Pe=this,Me;if(!re.name)Me=d.reject("Invalid arguments");else{var Ie=re.name===de.name&&Pe._dbInfo.db,nt=Ie?d.resolve(Pe._dbInfo.db):O(re).then(function(ft){var pt=w[re.name],ht=pt.forages;pt.db=ft;for(var xt=0;xt<ht.length;xt++)ht[xt]._dbInfo.db=ft;return ft});re.storeName?Me=nt.then(function(ft){if(ft.objectStoreNames.contains(re.storeName)){var pt=ft.version+1;k(re);var ht=w[re.name],xt=ht.forages;ft.close();for(var Bt=0;Bt<xt.length;Bt++){var On=xt[Bt];On._dbInfo.db=null,On._dbInfo.version=pt}var tn=new d(function(ur,rn){var Kr=u.open(re.name,pt);Kr.onerror=function(fo){var Gu=Kr.result;Gu.close(),rn(fo)},Kr.onupgradeneeded=function(){var fo=Kr.result;fo.deleteObjectStore(re.storeName)},Kr.onsuccess=function(){var fo=Kr.result;fo.close(),ur(fo)}});return tn.then(function(ur){ht.db=ur;for(var rn=0;rn<xt.length;rn++){var Kr=xt[rn];Kr._dbInfo.db=ur,D(Kr._dbInfo)}}).catch(function(ur){throw(M(re,ur)||d.resolve()).catch(function(){}),ur})}}):Me=nt.then(function(ft){k(re);var pt=w[re.name],ht=pt.forages;ft.close();for(var xt=0;xt<ht.length;xt++){var Bt=ht[xt];Bt._dbInfo.db=null}var On=new d(function(tn,ur){var rn=u.deleteDatabase(re.name);rn.onerror=function(){var Kr=rn.result;Kr&&Kr.close(),ur(rn.error)},rn.onblocked=function(){console.warn('dropInstance blocked for database "'+re.name+'" until all open connections are closed')},rn.onsuccess=function(){var Kr=rn.result;Kr&&Kr.close(),tn(Kr)}});return On.then(function(tn){pt.db=tn;for(var ur=0;ur<ht.length;ur++){var rn=ht[ur];D(rn._dbInfo)}}).catch(function(tn){throw(M(re,tn)||d.resolve()).catch(function(){}),tn})})}return f(Me,_e),Me}var Ee={_driver:"asyncStorage",_initStorage:H,_support:l(),iterate:Z,getItem:Q,setItem:ne,removeItem:ue,clear:le,length:ce,key:ge,keys:se,dropInstance:te};function we(){return typeof openDatabase=="function"}var De="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Le="~~local_forage_type~",Ne=/^~~local_forage_type~([^~]+)~/,Te="__lfsc__:",qe=Te.length,Qe="arbf",Ue="blob",Ve="si08",Se="ui08",it="uic8",It="si16",Re="si32",Ge="ur16",ot="ui32",ct="fl32",Mt="fl64",Nn=qe+Qe.length,Rr=Object.prototype.toString;function xr(re){var _e=re.length*.75,de=re.length,Pe,Me=0,Ie,nt,ft,pt;re[re.length-1]==="="&&(_e--,re[re.length-2]==="="&&_e--);var ht=new ArrayBuffer(_e),xt=new Uint8Array(ht);for(Pe=0;Pe<de;Pe+=4)Ie=De.indexOf(re[Pe]),nt=De.indexOf(re[Pe+1]),ft=De.indexOf(re[Pe+2]),pt=De.indexOf(re[Pe+3]),xt[Me++]=Ie<<2|nt>>4,xt[Me++]=(nt&15)<<4|ft>>2,xt[Me++]=(ft&3)<<6|pt&63;return ht}function Mr(re){var _e=new Uint8Array(re),de="",Pe;for(Pe=0;Pe<_e.length;Pe+=3)de+=De[_e[Pe]>>2],de+=De[(_e[Pe]&3)<<4|_e[Pe+1]>>4],de+=De[(_e[Pe+1]&15)<<2|_e[Pe+2]>>6],de+=De[_e[Pe+2]&63];return _e.length%3===2?de=de.substring(0,de.length-1)+"=":_e.length%3===1&&(de=de.substring(0,de.length-2)+"=="),de}function fn(re,_e){var de="";if(re&&(de=Rr.call(re)),re&&(de==="[object ArrayBuffer]"||re.buffer&&Rr.call(re.buffer)==="[object ArrayBuffer]")){var Pe,Me=Te;re instanceof ArrayBuffer?(Pe=re,Me+=Qe):(Pe=re.buffer,de==="[object Int8Array]"?Me+=Ve:de==="[object Uint8Array]"?Me+=Se:de==="[object Uint8ClampedArray]"?Me+=it:de==="[object Int16Array]"?Me+=It:de==="[object Uint16Array]"?Me+=Ge:de==="[object Int32Array]"?Me+=Re:de==="[object Uint32Array]"?Me+=ot:de==="[object Float32Array]"?Me+=ct:de==="[object Float64Array]"?Me+=Mt:_e(new Error("Failed to get type for BinaryArray"))),_e(Me+Mr(Pe))}else if(de==="[object Blob]"){var Ie=new FileReader;Ie.onload=function(){var nt=Le+re.type+"~"+Mr(this.result);_e(Te+Ue+nt)},Ie.readAsArrayBuffer(re)}else try{_e(JSON.stringify(re))}catch(nt){console.error("Couldn't convert value into a JSON string: ",re),_e(null,nt)}}function qn(re){if(re.substring(0,qe)!==Te)return JSON.parse(re);var _e=re.substring(Nn),de=re.substring(qe,Nn),Pe;if(de===Ue&&Ne.test(_e)){var Me=_e.match(Ne);Pe=Me[1],_e=_e.substring(Me[0].length)}var Ie=xr(_e);switch(de){case Qe:return Ie;case Ue:return c([Ie],{type:Pe});case Ve:return new Int8Array(Ie);case Se:return new Uint8Array(Ie);case it:return new Uint8ClampedArray(Ie);case It:return new Int16Array(Ie);case Ge:return new Uint16Array(Ie);case Re:return new Int32Array(Ie);case ot:return new Uint32Array(Ie);case ct:return new Float32Array(Ie);case Mt:return new Float64Array(Ie);default:throw new Error("Unkown type: "+de)}}var lr={serialize:fn,deserialize:qn,stringToBuffer:xr,bufferToString:Mr};function cr(re,_e,de,Pe){re.executeSql("CREATE TABLE IF NOT EXISTS "+_e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],de,Pe)}function bs(re){var _e=this,de={db:null};if(re)for(var Pe in re)de[Pe]=typeof re[Pe]!="string"?re[Pe].toString():re[Pe];var Me=new d(function(Ie,nt){try{de.db=openDatabase(de.name,String(de.version),de.description,de.size)}catch(ft){return nt(ft)}de.db.transaction(function(ft){cr(ft,de,function(){_e._dbInfo=de,Ie()},function(pt,ht){nt(ht)})},nt)});return de.serializer=lr,Me}function Ai(re,_e,de,Pe,Me,Ie){re.executeSql(de,Pe,Me,function(nt,ft){ft.code===ft.SYNTAX_ERR?nt.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[_e.storeName],function(pt,ht){ht.rows.length?Ie(pt,ft):cr(pt,_e,function(){pt.executeSql(de,Pe,Me,Ie)},Ie)},Ie):Ie(nt,ft)},Ie)}function ci(re,_e){var de=this;re=p(re);var Pe=new d(function(Me,Ie){de.ready().then(function(){var nt=de._dbInfo;nt.db.transaction(function(ft){Ai(ft,nt,"SELECT * FROM "+nt.storeName+" WHERE key = ? LIMIT 1",[re],function(pt,ht){var xt=ht.rows.length?ht.rows.item(0).value:null;xt&&(xt=nt.serializer.deserialize(xt)),Me(xt)},function(pt,ht){Ie(ht)})})}).catch(Ie)});return f(Pe,_e),Pe}function Wn(re,_e){var de=this,Pe=new d(function(Me,Ie){de.ready().then(function(){var nt=de._dbInfo;nt.db.transaction(function(ft){Ai(ft,nt,"SELECT * FROM "+nt.storeName,[],function(pt,ht){for(var xt=ht.rows,Bt=xt.length,On=0;On<Bt;On++){var tn=xt.item(On),ur=tn.value;if(ur&&(ur=nt.serializer.deserialize(ur)),ur=re(ur,tn.key,On+1),ur!==void 0){Me(ur);return}}Me()},function(pt,ht){Ie(ht)})})}).catch(Ie)});return f(Pe,_e),Pe}function or(re,_e,de,Pe){var Me=this;re=p(re);var Ie=new d(function(nt,ft){Me.ready().then(function(){_e===void 0&&(_e=null);var pt=_e,ht=Me._dbInfo;ht.serializer.serialize(_e,function(xt,Bt){Bt?ft(Bt):ht.db.transaction(function(On){Ai(On,ht,"INSERT OR REPLACE INTO "+ht.storeName+" (key, value) VALUES (?, ?)",[re,xt],function(){nt(pt)},function(tn,ur){ft(ur)})},function(On){if(On.code===On.QUOTA_ERR){if(Pe>0){nt(or.apply(Me,[re,pt,de,Pe-1]));return}ft(On)}})})}).catch(ft)});return f(Ie,de),Ie}function Wi(re,_e,de){return or.apply(this,[re,_e,de,1])}function qu(re,_e){var de=this;re=p(re);var Pe=new d(function(Me,Ie){de.ready().then(function(){var nt=de._dbInfo;nt.db.transaction(function(ft){Ai(ft,nt,"DELETE FROM "+nt.storeName+" WHERE key = ?",[re],function(){Me()},function(pt,ht){Ie(ht)})})}).catch(Ie)});return f(Pe,_e),Pe}function $o(re){var _e=this,de=new d(function(Pe,Me){_e.ready().then(function(){var Ie=_e._dbInfo;Ie.db.transaction(function(nt){Ai(nt,Ie,"DELETE FROM "+Ie.storeName,[],function(){Pe()},function(ft,pt){Me(pt)})})}).catch(Me)});return f(de,re),de}function lu(re){var _e=this,de=new d(function(Pe,Me){_e.ready().then(function(){var Ie=_e._dbInfo;Ie.db.transaction(function(nt){Ai(nt,Ie,"SELECT COUNT(key) as c FROM "+Ie.storeName,[],function(ft,pt){var ht=pt.rows.item(0).c;Pe(ht)},function(ft,pt){Me(pt)})})}).catch(Me)});return f(de,re),de}function Rt(re,_e){var de=this,Pe=new d(function(Me,Ie){de.ready().then(function(){var nt=de._dbInfo;nt.db.transaction(function(ft){Ai(ft,nt,"SELECT key FROM "+nt.storeName+" WHERE id = ? LIMIT 1",[re+1],function(pt,ht){var xt=ht.rows.length?ht.rows.item(0).key:null;Me(xt)},function(pt,ht){Ie(ht)})})}).catch(Ie)});return f(Pe,_e),Pe}function yi(re){var _e=this,de=new d(function(Pe,Me){_e.ready().then(function(){var Ie=_e._dbInfo;Ie.db.transaction(function(nt){Ai(nt,Ie,"SELECT key FROM "+Ie.storeName,[],function(ft,pt){for(var ht=[],xt=0;xt<pt.rows.length;xt++)ht.push(pt.rows.item(xt).key);Pe(ht)},function(ft,pt){Me(pt)})})}).catch(Me)});return f(de,re),de}function xn(re){return new d(function(_e,de){re.transaction(function(Pe){Pe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Me,Ie){for(var nt=[],ft=0;ft<Ie.rows.length;ft++)nt.push(Ie.rows.item(ft).name);_e({db:re,storeNames:nt})},function(Me,Ie){de(Ie)})},function(Pe){de(Pe)})})}function $r(re,_e){_e=m.apply(this,arguments);var de=this.config();re=typeof re!="function"&&re||{},re.name||(re.name=re.name||de.name,re.storeName=re.storeName||de.storeName);var Pe=this,Me;return re.name?Me=new d(function(Ie){var nt;re.name===de.name?nt=Pe._dbInfo.db:nt=openDatabase(re.name,"","",0),re.storeName?Ie({db:nt,storeNames:[re.storeName]}):Ie(xn(nt))}).then(function(Ie){return new d(function(nt,ft){Ie.db.transaction(function(pt){function ht(tn){return new d(function(ur,rn){pt.executeSql("DROP TABLE IF EXISTS "+tn,[],function(){ur()},function(Kr,fo){rn(fo)})})}for(var xt=[],Bt=0,On=Ie.storeNames.length;Bt<On;Bt++)xt.push(ht(Ie.storeNames[Bt]));d.all(xt).then(function(){nt()}).catch(function(tn){ft(tn)})},function(pt){ft(pt)})})}):Me=d.reject("Invalid arguments"),f(Me,_e),Me}var Vr={_driver:"webSQLStorage",_initStorage:bs,_support:we(),iterate:Wn,getItem:ci,setItem:Wi,removeItem:qu,clear:$o,length:lu,key:Rt,keys:yi,dropInstance:$r};function vi(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ve(re,_e){var de=re.name+"/";return re.storeName!==_e.storeName&&(de+=re.storeName+"/"),de}function he(){var re="_localforage_support_test";try{return localStorage.setItem(re,!0),localStorage.removeItem(re),!1}catch{return!0}}function xe(){return!he()||localStorage.length>0}function We(re){var _e=this,de={};if(re)for(var Pe in re)de[Pe]=re[Pe];return de.keyPrefix=ve(re,_e._defaultConfig),xe()?(_e._dbInfo=de,de.serializer=lr,d.resolve()):d.reject()}function Ye(re){var _e=this,de=_e.ready().then(function(){for(var Pe=_e._dbInfo.keyPrefix,Me=localStorage.length-1;Me>=0;Me--){var Ie=localStorage.key(Me);Ie.indexOf(Pe)===0&&localStorage.removeItem(Ie)}});return f(de,re),de}function St(re,_e){var de=this;re=p(re);var Pe=de.ready().then(function(){var Me=de._dbInfo,Ie=localStorage.getItem(Me.keyPrefix+re);return Ie&&(Ie=Me.serializer.deserialize(Ie)),Ie});return f(Pe,_e),Pe}function Ht(re,_e){var de=this,Pe=de.ready().then(function(){for(var Me=de._dbInfo,Ie=Me.keyPrefix,nt=Ie.length,ft=localStorage.length,pt=1,ht=0;ht<ft;ht++){var xt=localStorage.key(ht);if(xt.indexOf(Ie)===0){var Bt=localStorage.getItem(xt);if(Bt&&(Bt=Me.serializer.deserialize(Bt)),Bt=re(Bt,xt.substring(nt),pt++),Bt!==void 0)return Bt}}});return f(Pe,_e),Pe}function sn(re,_e){var de=this,Pe=de.ready().then(function(){var Me=de._dbInfo,Ie;try{Ie=localStorage.key(re)}catch{Ie=null}return Ie&&(Ie=Ie.substring(Me.keyPrefix.length)),Ie});return f(Pe,_e),Pe}function ar(re){var _e=this,de=_e.ready().then(function(){for(var Pe=_e._dbInfo,Me=localStorage.length,Ie=[],nt=0;nt<Me;nt++){var ft=localStorage.key(nt);ft.indexOf(Pe.keyPrefix)===0&&Ie.push(ft.substring(Pe.keyPrefix.length))}return Ie});return f(de,re),de}function dr(re){var _e=this,de=_e.keys().then(function(Pe){return Pe.length});return f(de,re),de}function Gn(re,_e){var de=this;re=p(re);var Pe=de.ready().then(function(){var Me=de._dbInfo;localStorage.removeItem(Me.keyPrefix+re)});return f(Pe,_e),Pe}function Er(re,_e,de){var Pe=this;re=p(re);var Me=Pe.ready().then(function(){_e===void 0&&(_e=null);var Ie=_e;return new d(function(nt,ft){var pt=Pe._dbInfo;pt.serializer.serialize(_e,function(ht,xt){if(xt)ft(xt);else try{localStorage.setItem(pt.keyPrefix+re,ht),nt(Ie)}catch(Bt){(Bt.name==="QuotaExceededError"||Bt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&ft(Bt),ft(Bt)}})})});return f(Me,de),Me}function Yr(re,_e){if(_e=m.apply(this,arguments),re=typeof re!="function"&&re||{},!re.name){var de=this.config();re.name=re.name||de.name,re.storeName=re.storeName||de.storeName}var Pe=this,Me;return re.name?Me=new d(function(Ie){re.storeName?Ie(ve(re,Pe._defaultConfig)):Ie(re.name+"/")}).then(function(Ie){for(var nt=localStorage.length-1;nt>=0;nt--){var ft=localStorage.key(nt);ft.indexOf(Ie)===0&&localStorage.removeItem(ft)}}):Me=d.reject("Invalid arguments"),f(Me,_e),Me}var dn={_driver:"localStorageWrapper",_initStorage:We,_support:vi(),iterate:Ht,getItem:St,setItem:Er,removeItem:Gn,clear:Ye,length:dr,key:sn,keys:ar,dropInstance:Yr},Sr=function(_e,de){return _e===de||typeof _e=="number"&&typeof de=="number"&&isNaN(_e)&&isNaN(de)},bi=function(_e,de){for(var Pe=_e.length,Me=0;Me<Pe;){if(Sr(_e[Me],de))return!0;Me++}return!1},Tr=Array.isArray||function(re){return Object.prototype.toString.call(re)==="[object Array]"},Yn={},Ys={},di={INDEXEDDB:Ee,WEBSQL:Vr,LOCALSTORAGE:dn},Ks=[di.INDEXEDDB._driver,di.WEBSQL._driver,di.LOCALSTORAGE._driver],Oi=["dropInstance"],ts=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Oi),co={description:"",driver:Ks.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Xs(re,_e){re[_e]=function(){var de=arguments;return re.ready().then(function(){return re[_e].apply(re,de)})}}function _i(){for(var re=1;re<arguments.length;re++){var _e=arguments[re];if(_e)for(var de in _e)_e.hasOwnProperty(de)&&(Tr(_e[de])?arguments[0][de]=_e[de].slice():arguments[0][de]=_e[de])}return arguments[0]}var Wu=function(){function re(_e){o(this,re);for(var de in di)if(di.hasOwnProperty(de)){var Pe=di[de],Me=Pe._driver;this[de]=Me,Yn[Me]||this.defineDriver(Pe)}this._defaultConfig=_i({},co),this._config=_i({},this._defaultConfig,_e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return re.prototype.config=function(de){if((typeof de>"u"?"undefined":s(de))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var Pe in de){if(Pe==="storeName"&&(de[Pe]=de[Pe].replace(/\W/g,"_")),Pe==="version"&&typeof de[Pe]!="number")return new Error("Database version must be a number.");this._config[Pe]=de[Pe]}return"driver"in de&&de.driver?this.setDriver(this._config.driver):!0}else return typeof de=="string"?this._config[de]:this._config},re.prototype.defineDriver=function(de,Pe,Me){var Ie=new d(function(nt,ft){try{var pt=de._driver,ht=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!de._driver){ft(ht);return}for(var xt=ts.concat("_initStorage"),Bt=0,On=xt.length;Bt<On;Bt++){var tn=xt[Bt],ur=!bi(Oi,tn);if((ur||de[tn])&&typeof de[tn]!="function"){ft(ht);return}}var rn=function(){for(var Gu=function(na){return function(){var cs=new Error("Method "+na+" is not implemented by the current driver"),Lo=d.reject(cs);return f(Lo,arguments[arguments.length-1]),Lo}},Fc=0,qg=Oi.length;Fc<qg;Fc++){var ph=Oi[Fc];de[ph]||(de[ph]=Gu(ph))}};rn();var Kr=function(Gu){Yn[pt]&&console.info("Redefining LocalForage driver: "+pt),Yn[pt]=de,Ys[pt]=Gu,nt()};"_support"in de?de._support&&typeof de._support=="function"?de._support().then(Kr,ft):Kr(!!de._support):Kr(!0)}catch(fo){ft(fo)}});return h(Ie,Pe,Me),Ie},re.prototype.driver=function(){return this._driver||null},re.prototype.getDriver=function(de,Pe,Me){var Ie=Yn[de]?d.resolve(Yn[de]):d.reject(new Error("Driver not found."));return h(Ie,Pe,Me),Ie},re.prototype.getSerializer=function(de){var Pe=d.resolve(lr);return h(Pe,de),Pe},re.prototype.ready=function(de){var Pe=this,Me=Pe._driverSet.then(function(){return Pe._ready===null&&(Pe._ready=Pe._initDriver()),Pe._ready});return h(Me,de,de),Me},re.prototype.setDriver=function(de,Pe,Me){var Ie=this;Tr(de)||(de=[de]);var nt=this._getSupportedDrivers(de);function ft(){Ie._config.driver=Ie.driver()}function pt(Bt){return Ie._extend(Bt),ft(),Ie._ready=Ie._initStorage(Ie._config),Ie._ready}function ht(Bt){return function(){var On=0;function tn(){for(;On<Bt.length;){var ur=Bt[On];return On++,Ie._dbInfo=null,Ie._ready=null,Ie.getDriver(ur).then(pt).catch(tn)}ft();var rn=new Error("No available storage method found.");return Ie._driverSet=d.reject(rn),Ie._driverSet}return tn()}}var xt=this._driverSet!==null?this._driverSet.catch(function(){return d.resolve()}):d.resolve();return this._driverSet=xt.then(function(){var Bt=nt[0];return Ie._dbInfo=null,Ie._ready=null,Ie.getDriver(Bt).then(function(On){Ie._driver=On._driver,ft(),Ie._wrapLibraryMethodsWithReady(),Ie._initDriver=ht(nt)})}).catch(function(){ft();var Bt=new Error("No available storage method found.");return Ie._driverSet=d.reject(Bt),Ie._driverSet}),h(this._driverSet,Pe,Me),this._driverSet},re.prototype.supports=function(de){return!!Ys[de]},re.prototype._extend=function(de){_i(this,de)},re.prototype._getSupportedDrivers=function(de){for(var Pe=[],Me=0,Ie=de.length;Me<Ie;Me++){var nt=de[Me];this.supports(nt)&&Pe.push(nt)}return Pe},re.prototype._wrapLibraryMethodsWithReady=function(){for(var de=0,Pe=ts.length;de<Pe;de++)Xs(this,ts[de])},re.prototype.createInstance=function(de){return new re(de)},re}(),_s=new Wu;r.exports=_s},{3:3}]},{},[4])(4)})}(cz)),cz.exports}var t3t=e3t();const Yw=su(t3t);class sOe{constructor(t){nl(this,"engine");nl(this,"connected",!1);nl(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function v$(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function uC(e){return e.participantId!==void 0}class od extends sOe{constructor(){super("firebase");nl(this,"RECAPTCHAV3TOKEN","6LfdPyMrAAAAAHxUQ64Ak5qrgn-Qifg5TrFvRhtn");nl(this,"firestore");nl(this,"collectionPrefix","prod-");nl(this,"studyCollection");nl(this,"storage");nl(this,"studyId","");nl(this,"localForage",Yw.createInstance({name:"currentParticipantId"}));nl(this,"participantData",null);const n=vK.parse(`{
"apiKey":"AIzaSyCpiq36yxv5CBhUFXODVNjBLqVZhd5pWUY",
"authDomain":"ta-study.firebaseapp.com",
"databaseURL": "https://ta-study-default-rtdb.firebaseio.com",
"projectId": "ta-study",
"storageBucket":"ta-study.firebasestorage.app",
"messagingSenderId":"353460662955",
"appId":"1:353460662955:web:e2e7b7ea52b0b3265ebdee"
}
`),r=Ske(n);this.firestore=XDt(r,{}),this.storage=bw();try{XMt(r,{provider:new eZ(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async saveAllParticipantAndTaskTags(n){const r=mc(n);Object.values(r).forEach(o=>{o.partTags=o.partTags.map(a=>a.id),Object.values(o.taskTags).forEach(a=>{a=a.map(u=>u.id)})});const i=Mi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/_participantTags`),s=new Blob([JSON.stringify(r)],{type:"application/json"});await h0(i,s)}async getAllParticipantAndTaskTags(){const n=Mi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/_participantTags`),r=await this._getFromFirebaseStorageByRef(n,"config"),i=Mi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/participant/tags`),s=await this._getFromFirebaseStorageByRef(i,"config"),o=Mi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/task/tags`),a=await this._getFromFirebaseStorageByRef(o,"config");return Object.values(r).forEach(u=>{u.partTags=u.partTags.map(l=>s?s.find(c=>c.id===l):l),Object.values(u.taskTags).forEach(l=>{l=l.map(c=>a?a.find(d=>d.id===c):c)})}),Promise.resolve(r)}async saveTags(n,r){const i=Mi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/${r}/tags`),s=new Blob([JSON.stringify(n)],{type:"application/json"});await h0(i,s)}async getTags(n){const r=Mi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/${n}/tags`),i=await this._getFromFirebaseStorageByRef(r,"config");return Array.isArray(i)?Promise.resolve(i):Promise.resolve([])}async saveEditedTranscript(n,r,i,s){const o=s.map(d=>({...d,selectedTags:d.selectedTags.filter(f=>f!==void 0).map(f=>f.id)})),a=Mi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/${r}/${n}/${i}`),u=Mi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/transcriptOnly/${n}/${i}`),l=new Blob([JSON.stringify(o)],{type:"application/json"});await h0(a,l);const c=new Blob([JSON.stringify(o)],{type:"application/json"});await h0(u,c)}async getEditedTranscript(n,r,i){const s=Mi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/${r}/${n}/${i}`),o=await this._getFromFirebaseStorageByRef(s,"config");if(!Array.isArray(o))return[];const a=Mi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/text/tags`),u=await this._getFromFirebaseStorageByRef(a,"config"),l=o.map(c=>({...c,selectedTags:c.selectedTags.map(d=>u.find(f=>d===f.id))}));return Promise.resolve(l)}async connect(){try{await QDt(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=d$();if(!i.currentUser&&(await TRt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await v$(JSON.stringify(r));if(this.studyCollection=Jd(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n,await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.localForage.setItem("currentConfigHash",o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async _getFirebaseProvenance(n){const r=bw(),i=Mi(r,`${this.studyId}/${n}_provenance`);let s={};try{const o=await Zv(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`Participant ${n} does not have a provenance graph for ${this.studyId}.`)}return s}async _getFirebaseWindowEvents(n){const r=bw(),i=Mi(r,`${this.studyId}/${n}_windowEvents`);let s={};try{const o=await Zv(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`Participant ${n} does not have a provenance graph for ${this.studyId}.`)}return s}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(uC(a))return this.participantData=a,a;const l=await v$(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=Mi(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=nI(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async saveAudio(n,r){n.addEventListener("dataavailable",i=>{const s=bw(),o=Mi(s,`${this.studyId}/audio/${this.currentParticipantId}_${r}`);h0(o,i.data).then(()=>{console.warn("Uploaded a blob or file!")})}),n.stop(),n.stream.getTracks().forEach(i=>i.stop())}async getAudio(n,r){const i=bw(),s=await Promise.all(n.map(async a=>await Zv(Mi(i,`${this.studyId}/audio/${r}_${a}`))));return Promise.all(s.map(a=>new Promise(u=>{const l=new XMLHttpRequest;l.responseType="blob",l.onload=()=>{const c=l.response,d=URL.createObjectURL(c);u(d)},l.open("GET",a),l.send()})))}async getTranscription(n,r){const i=bw(),s=await Promise.all(n.map(async a=>await Zv(Mi(i,`${this.studyId}/audio/${r}_${a}.wav_transcription.txt`))));return Promise.all(s.map(a=>new Promise(u=>{const l=new XMLHttpRequest;l.responseType="blob",l.onload=()=>{l.response.text().then(d=>{u(d)})},l.open("GET",a),l.send()})))}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.getSequenceArray();if(!r)throw new Error("Latin square not initialized");const i=await this.getModes(this.studyId),s=vo(this.studyCollection,"sequenceAssignment");await Xl(s,{});const o=Jd(s,"sequenceAssignment"),a=vo(o,this.currentParticipantId),u=Ame(o,sMt("participantId","==","")),l=await aC(u);if(l.docs.length>0){const y=l.docs[0],v=y.data().timestamp;i.dataCollectionEnabled&&(await dMt(y.ref),await Xl(a,{participantId:this.currentParticipantId,timestamp:v}))}else i.dataCollectionEnabled&&await Xl(a,{participantId:this.currentParticipantId,timestamp:pMt()});const c=Ame(o,oMt("timestamp","asc")),h=(await aC(c)).docs.map(y=>y.data()).findIndex(y=>y.participantId===n||y.participantId===this.currentParticipantId)%r.length,p=h===-1?Math.floor(Math.random()*r.length-1):h,m=r[p];if(!m)throw new Error("Latin square is empty");return m}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Mi(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await sC(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");uC(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const r=await this._getFromFirebaseStorage(`participants/${n||this.currentParticipantId}`,"participantData");return uC(r)?r:null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=nI();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);return this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){const r=Jd(this.firestore,"user-management"),i=await aC(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.uid=n.user.uid),await Xl(vo(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await Xl(vo(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await Xl(vo(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await Xl(vo(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await Xl(vo(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=Mi(this.storage,`${this.collectionPrefix}${n}/participants`),i=await sC(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");uC(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=Jd(this.firestore,`${this.collectionPrefix}${n}`),s=Mi(this.storage,`${this.collectionPrefix}${n}/participants/${r}`),o=await this._getFromFirebaseStorageByRef(s,"participantData");try{if(!o||!uC(o)||o.rejected)return;o.rejected=!0,await this._pushToFirebaseStorageByRef(s,"participantData",o);const a=vo(i,"sequenceAssignment"),u=Jd(a,"sequenceAssignment"),l=vo(u,r);await cMt(l,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async setMode(n,r,i){const s=vo(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await Xl(s,{[r]:i},{merge:!0})}async getModes(n){const r=vo(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await az(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await Xl(r,s),s}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),!1;const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),d=s.getUTCSeconds().toString().padStart(2,"0"),f=`${o}-${a}-${u}T${l}:${c}:${d}`,h=`${this.collectionPrefix}${n}-snapshot-${f}`;return await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h),r&&await this.removeSnapshotOrLive(i,!1),!0}async removeSnapshotOrLive(n,r){const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i)}async getSnapshots(n){try{const r=vo(this.firestore,"metadata","collections"),i=await az(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(a=>a.startsWith(`${this.collectionPrefix}${n}-snapshot`)).sort().reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;await this.createSnapshot(n,!0),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i)}async _addDirectoryNameToMetadata(n){try{const r=vo(this.firestore,"metadata","collections");await Xl(r,{[n]:!0},{merge:!0})}catch(r){console.error("Error adding collection to metadata:",r)}}async _removeNameFromMetadata(n){try{const r=vo(this.firestore,"metadata","collections"),i=await az(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await Xl(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=Mi(this.storage,n),s=(await sC(r)).items.map(o=>Hpe(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=Mi(this.storage,n),o=(await sC(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=Mi(this.storage,n),s=Mi(this.storage,r),o=await Zv(i),u=await(await fetch(o)).blob();await h0(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=Jd(this.firestore,n),s=vo(i,"sequenceAssignment"),o=Jd(s,"sequenceAssignment"),a=Jd(this.firestore,r),u=vo(a,"sequenceAssignment");await Xl(u,{});const l=Jd(u,"sequenceAssignment"),c=await aC(o),d=kme(this.firestore);c.docs.forEach(f=>{const h=vo(l,f.id);d.set(h,f.data())}),await d.commit()}async _deleteCollection(n){const r=Jd(this.firestore,n),i=vo(r,"sequenceAssignment"),s=Jd(i,"sequenceAssignment"),o=await aC(s),a=kme(this.firestore);o.forEach(u=>{const l=vo(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=Mi(this.storage,n);return(await sC(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=Mi(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await Zv(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await Zv(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){if(Object.keys(i).length>0){const s=Mi(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`),o=new Blob([JSON.stringify(i)],{type:"application/json"});await h0(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await h0(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=Mi(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await Hpe(i)}}const oOe=P.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),Mg=()=>P.useContext(oOe);function n3t({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=P.useState(t),[o,a]=P.useState(!1),{storageEngine:u}=Zi(),l=async()=>{const h=d$();try{await NRt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},d=async h=>u?await u.validateUser(h):!1;P.useEffect(()=>{s(t);let h;if(u instanceof od)try{h=d$()}catch{console.warn("No firebase store.")}const p=async v=>{if(s(w=>({user:w.user,isAdmin:w.isAdmin,determiningStatus:!0,adminVerification:!1})),v){const w={user:v,determiningStatus:!1,isAdmin:!1,adminVerification:!0},x=await d(w);w.isAdmin=!!x,s(w)}else l()},y=(async()=>{if(u instanceof od){const v=await(u==null?void 0:u.getUserManagementData("authentication"));if(v!=null&&v.isEnabled){const w=PRt(h,async x=>await p(x));return()=>w()}s(r)}else u&&s(r);return()=>{}})();return()=>{y.then(v=>v())}},[u,o]);const f=P.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:d}),[i]);return _.jsx(oOe.Provider,{value:f,children:i.determiningStatus?_.jsx(xc,{visible:!0}):e})}async function r3t(e){return e?await e.getTags("text"):[]}function i3t({participant:e,playTime:t,setTranscriptLines:n,currentShownTranscription:r,setCurrentShownTranscription:i,transcriptList:s,setTranscriptList:o}){var z;const[a,u]=P.useState(null),l=Mg(),{trrackId:c,studyId:d,index:f}=Ff(),h=nh(),p=f?h:null,{storageEngine:m}=Zi(),{value:y,execute:v}=bf(r3t,[m]),w=P.useCallback(O=>{m&&m.saveTags(O,"text").then(()=>v(m))},[v,m]),x=jf(),S=P.useRef([]),E=P.useMemo(()=>!p||!e?null:Object.keys(e.answers).find(O=>O.startsWith(p))||null,[e,p]),T=Hw((O,$)=>{const F=[...s];F[O].text=$,o(F)}),A=Hw((O,$)=>{const F=[...s];F[O].selectedTags=$,o(F)}),I=Hw((O,$)=>{const F=[...s];F[O].annotation=$,o(F)}),k=Hw(O=>{if(O===0)return;const $=structuredClone(s);$[O-1].text=s[O-1].text+s[O].text,$[O-1].transcriptMappingEnd=s[O].transcriptMappingEnd,$[O-1].selectedTags=[...s[O-1].selectedTags,...s[O].selectedTags.filter(F=>!s[O-1].selectedTags.find(B=>B.id===F.id))],$.splice(O,1),$.filter(F=>F.transcriptMappingStart===$[O-1].transcriptMappingStart).forEach(F=>{F.transcriptMappingEnd=$[O-1].transcriptMappingEnd}),o($),setTimeout(()=>{S.current[O-1].focus(),S.current[O-1].setSelectionRange(s[O-1].text.length,s[O-1].text.length,"none")})}),D=Hw((O,$)=>{const F=structuredClone(s),B=F[O];F.splice(O+1,0,{transcriptMappingEnd:B.transcriptMappingEnd,transcriptMappingStart:B.transcriptMappingStart,text:B.text.slice($),selectedTags:B.selectedTags,annotation:""}),F[O].text=F[O].text.slice(0,$),o(F),setTimeout(()=>{S.current[O+1].focus(),S.current[O+1].setSelectionRange(0,0)})});P.useEffect(()=>{const O=[];a&&s.length>a.results.length||(s.forEach(($,F)=>{a&&(F===0||$.transcriptMappingStart!==s[F-1].transcriptMappingStart)&&O.push({start:F===0?0:a.results[$.transcriptMappingStart-1].resultEndTime,end:a.results[$.transcriptMappingEnd].resultEndTime,lineStart:$.transcriptMappingStart,lineEnd:$.transcriptMappingEnd,tags:s.filter(B=>B.transcriptMappingStart===$.transcriptMappingStart&&B.transcriptMappingEnd===$.transcriptMappingEnd).map(B=>B.selectedTags)})}),n(O))},[s,n,a]),P.useEffect(()=>{d&&c&&e&&(m==null||m.getTranscription(pc(e.sequence).filter(O=>x.tasksToNotRecordAudio===void 0||!x.tasksToNotRecordAudio.includes(O)).filter(O=>p?O===p:!0),c).then(O=>{const $=O.map(q=>JSON.parse(q));let F=0;const B=$.map(q=>{const G=q.results.map(K=>({...K,resultEndTime:+K.resultEndTime.split("s")[0]+F}));return F+=+q.results[q.results.length-1].resultEndTime.split("s")[0],G}).flat();u({results:B}),s.length===0&&o(B.map((q,G)=>{var K;return{transcriptMappingStart:G,transcriptMappingEnd:G,text:((K=q.alternatives[0].transcript)==null?void 0:K.trim())||"",selectedTags:[],annotation:""}})),i(0)}))},[m,d,c,x.tasksToNotRecordAudio,e,p,o,i,s.length]),P.useEffect(()=>{if(a&&a.results.length>0&&r!==null&&e&&t>0&&(!E||e.answers[E])){let O=r;const $=E?e.answers[E].startTime:e.answers.audioTest_2.startTime,F=Math.abs(t-$)/1e3;if(F>a.results[O].resultEndTime){for(;F>a.results[O].resultEndTime;)if(O+=1,O>a.results.length-1){O=a.results.length-1;break}}else if(O>0&&F<a.results[O-1].resultEndTime)for(;O>0&&F<a.results[O-1].resultEndTime;)O-=1;if(r===O)return;i(O)}},[r,e,t,i,a,E]);const M=P.useCallback((O,$)=>{if(!y)return;const F=y.findIndex(G=>G.id===O.id),B=Array.from(y);B[F]=$;const q=Array.from(s);q.forEach(G=>{G.selectedTags=G.selectedTags.map(K=>K.id===O.id?$:K)}),o(q),w(B)},[w,o,y,s]);return _.jsxs(ao,{gap:0,children:[_.jsxs(gr,{mb:"sm",justify:"space-between",wrap:"nowrap",children:[_.jsx(dt,{style:{flexGrow:1,textAlign:"center"},children:"Transcript"}),_.jsx(fH,{createTagCallback:O=>{w([...y||[],O])},editTagCallback:M,tags:y||[],email:((z=l.user.user)==null?void 0:z.email)||""})]}),_.jsx(ao,{gap:5,children:y?s.map((O,$)=>_.jsx(i2t,{annotation:O.annotation,setAnnotation:F=>I($,F),addRef:F=>{S.current[$]=F},onSelectTags:F=>A($,F),addRowCallback:F=>D($,F),deleteRowCallback:()=>k($),onTextChange:F=>T($,F),tags:y,selectedTags:O.selectedTags,text:O.text,start:O.transcriptMappingStart,end:O.transcriptMappingEnd,current:r===null?0:r},$)):_.jsx(io,{})})]})}const dz={left:5,right:5};function s3t(e,t){return t?t.getParticipantData(e):null}async function o3t(e,t,n,r){return e&&t&&n&&r?await e.getEditedTranscript(t,r,n):null}async function a3t(e,t){return t&&e?await t.getAllParticipantAndTaskTags():null}async function u3t(e,t){return e?await e.getTags(t):[]}const Fme=["61268bfae35dcb011f6081b5","6659cba171cfa5c88e0f2f2d","5bcbb1963c6f9f0001cc747a","66af9c58a260607ed281b3d3","606492360e422d12dc63000e","66b20cecdaa58257b695232e","637e31794e63dcbc52047f13","5bfed68b7f1cfd0001d3a16b","5f035c7ce9d86254e87992e4","669aae6d0c2d9e337c393103","66b0cee16f892ca232478aa9","5b99663d4cefb60001e7a214","65ccc7e766127e24c9e313a2","62c8391cd913ab9b5317d5f9","6658b23217b161dc426bd14d","64135cd06bb7dc980f8cbd93","6658d49af0f0787f8c8132b9","5f653cb18aad310a9ee7c32d","60fff225fb2da6129caf029a","6690e84b526c802d080e8d7b"];function aOe({mini:e}){var qe,Qe;const{trrackId:t,index:n}=Ff(),r=nh(),i=Mg(),s=P.useMemo(()=>n?r:null,[r,n]),{storageEngine:o}=Zi(),[a,u]=P.useState(0),[l,{width:c}]=_L(),[d,f]=P.useState(null),{value:h,status:p}=bf(s3t,[t,o]),{value:m,execute:y}=bf(a3t,[t,o]),{saveAnalysisState:v}=Rl(),w=Tc(),[x,S]=P.useState(!1),[E,T]=_9e(0,200),A=P.useRef(null),I=jf(),k=Mc(),{analysisTrialName:D,analysisWaveformTime:M}=Ea(Ue=>Ue),{setAnalysisTrialName:z,setAnalysisParticipantName:O,setAnalysisWaveformTime:$}=Rl(),{value:F}=bf(u3t,[o,"task"]),[B,q]=P.useState(!0),G=P.useRef(null),[K,L]=P.useState([]),[V,X]=P.useState(null),H=P.useMemo(()=>o&&t&&r?of(Ue=>{var Ve;return o.saveEditedTranscript(t,((Ve=i.user.user)==null?void 0:Ve.email)||"temp",r,Ue)},1e3,{maxWait:5e3}):Ue=>null,[r,(qe=i.user.user)==null?void 0:qe.email,o,t]),Q=P.useCallback(Ue=>{X(Ue),H(Ue)},[H]),{value:Z,status:ne}=bf(o3t,[o,h==null?void 0:h.participantId,r,(Qe=i.user.user)==null?void 0:Qe.email]),ue=P.useMemo(()=>!s||!h?null:Object.keys(h.answers).find(Ue=>Ue.startsWith(s))||null,[h,s]);P.useEffect(()=>{if(Z&&ne==="success")if(Z.length===0&&ue&&h&&ue.split("-").length===4&&h.answers[ue]!==void 0){const Ue=h.answers[ue].answer.explain;X([{text:Ue,transcriptMappingEnd:0,transcriptMappingStart:0,annotation:"",selectedTags:[]}])}else X(Z);else X(null)},[Z,h,ne,ue]);const le=P.useMemo(()=>[...Fme],[]);P.useEffect(()=>{if(ue&&h){const Ue=H2.create(),Ve=LV({registry:Ue,initialState:{}});h.answers[ue].provenanceGraph&&(Ve.importObject(mc(h.answers[ue].provenanceGraph)),G.current=Ve)}},[h,ue]);const ce=P.useCallback(Ue=>{var Ve;Ue&&(ue&&h&&G.current&&(w(v(G.current.getState((Ve=h.answers[ue].provenanceGraph)==null?void 0:Ve.nodes[Ue]))),G.current.to(Ue)),f(Ue))},[h,v,w,ue]),ge=P.useCallback(Ue=>{var Ve;if(!e){w(z(Ue)),w(v(null)),u(0);const Se=h?Object.keys(h.answers).find(it=>it.startsWith(Ue)):"";if(h&&Se&&h.answers[Se].provenanceGraph){const it=H2.create(),It=LV({registry:it,initialState:{}});It.importObject(mc(h.answers[Se].provenanceGraph)),G.current=It,ce(((Ve=h.answers[Se].provenanceGraph)==null?void 0:Ve.root)||"")}else w(v(null)),f(null),G.current=null}},[ce,e,h,v,z,w]);P.useEffect(()=>{s&&ge(s)},[ge,s]);const se=Hw((Ue,Ve=!0)=>{if(h&&s&&ue&&(h.answers[ue].endTime-h.answers.audioTest_2.startTime)/1e3<Ue){const Se=pc(h.sequence);ge(Se[Se.indexOf(s)+1])}else h&&s&&G.current&&G.current.current.children.length>0&&(G.current.graph.backend.nodes[G.current.current.children[0]].createdOn-h.answers.audioTest_2.startTime)/1e3<Ue&&ce(G.current.current.children[0]);if(h&&s){const Se=ue?h.answers[ue].startTime:h.answers.audioTest_2.startTime;T(Ue*1e3+Se)}Ve&&w($(Ue))}),te=P.useCallback(Ue=>{if(Ue&&h&&t){const Ve=new XAt;o==null||o.getAudio(pc(h.sequence).filter(Se=>I.tasksToNotRecordAudio===void 0||!I.tasksToNotRecordAudio.includes(Se)).filter(Se=>s?Se===s:!0),t).then(Se=>{Ue&&Ve.fetchAudio(...Se).then(it=>Ve.concatAudio(it)).then(it=>Ve.export(it,"audio/mp3")).then(it=>Ue.loadBlob(it.blob).then(()=>{q(!1)})).catch(it=>{throw new Error(it)}),Ue.on("timeupdate",se)})}},[I.tasksToNotRecordAudio,h,o,se,s,t]),Ee=P.useMemo(()=>[],[]),we=ZEe({container:A.current,plugins:Ee,onMount:te,progressColor:"cornflowerblue",waveColor:"lightgray"}),De=P.useCallback((Ue,Ve)=>{T(Ue),we&&Ve&&setTimeout(()=>{we.seekTo(Ve)})},[T,we]),Le=P.useCallback(Ue=>{S(Ue),we&&(Ue?we.play():we.pause())},[we]);P.useEffect(()=>{se(M,!1),we&&Math.abs(we.getCurrentTime()-M)>.8&&e&&setTimeout(()=>{we.setTime(M)})},[M,e,se,we]);const Ne=P.useMemo(()=>{if(!h)return null;const Ue=Object.values(h.answers||{}).map(it=>[it.startTime,it.endTime]).flat(),Ve=nc(Ue);return ld([dz.left,c+dz.left+dz.right]).domain(ue?[h.answers[ue].startTime,h.answers[ue].endTime]:Ve).clamp(!0)},[h,ue,c]);P.useEffect(()=>{te(we)},[te,h,we]),P.useCallback(Ue=>{var Ve;if(Ue&&ue&&h&&G.current&&Ne){const Se=h.answers[ue].provenanceGraph.nodes[Ue];w(v(G.current.getState((Ve=h.answers[ue].provenanceGraph)==null?void 0:Ve.nodes[Ue]))),G.current.to(Ue);const it=Ne.domain()[1]-Ne.domain()[0];De(Se.createdOn+1,(Se.createdOn-Ne.domain()[0])/it)}},[De,h,v,w,ue,Ne]);const Te=P.useCallback(Ue=>{if(!h)return;const Ve=le.indexOf(h.participantId);Ue?k(`../../${s?"../":""}${le[Ve+1]}/ui/reviewer-${s||""}`,{relative:"path"}):k(`../../${s?"../":""}${le[Ve-1]}/ui/reviewer-${s||""}`,{relative:"path"})},[le,k,h,s]);return _.jsx(gr,{wrap:"nowrap",gap:25,children:_.jsxs(ao,{ref:l,style:{width:"100%"},gap:e?0:25,children:[e?null:_.jsx(Il,{children:_.jsxs(gr,{children:[_.jsx(mr,{children:_.jsx(JKe,{onClick:()=>Te(!1)})}),_.jsx(mp,{style:{width:"300px"},value:h==null?void 0:h.participantId,onChange:Ue=>{w(O(Ue)),k(`../../${s?"../":""}${Ue}/ui/reviewer-${s||""}`,{relative:"path"})},data:[...Fme]}),_.jsx(mp,{style:{width:"300px"},clearable:!0,value:s,data:h?[...new Set([...pc(h.sequence)])]:[],onChange:Ue=>k(`${s?"../":""}reviewer-${Ue||""}`,{relative:"path"})}),_.jsx(mr,{children:_.jsx(ZKe,{onClick:()=>Te(!0)})})]})}),p==="success"&&h&&Ne?e?null:_.jsx(pke,{trialFilter:ue,xScale:Ne,setSelectedTask:ge,participantData:h,width:c,height:200}):e?null:_.jsx(Il,{style:{height:"275px"},children:_.jsx(io,{})}),Ne&&h!==null&&(!ue||h.answers[ue]!==void 0)?_.jsxs(_.Fragment,{children:[_.jsxs(ke,{ref:A,ml:h&&Ne?Ne(h.answers.audioTest_2.startTime):0,mr:h&&Ne?Ne(h.answers["post-study_19"].startTime):0,style:{overflow:"visible",width:`${h&&!s?Ne(h.answers["post-study_19"].startTime)-Ne(h.answers.audioTest_2.startTime):Ne.range()[1]-Ne.range()[0]}px`},children:[_.jsx(KEe.Provider,{value:we,children:_.jsx(SK,{id:"waveform"})}),B?_.jsx(io,{}):null]}),e?null:_.jsx(r2t,{startTime:s?Ne.domain()[0]:h.answers.audioTest_2.startTime,xScale:Ne,transcriptLines:K,currentShownTranscription:a})]}):null,p==="success"&&h&&Ne?_.jsx(n2t,{xScale:Ne,setSelectedTask:ge,playTime:E-h.answers.introduction_0.startTime,setPlayTime:De,isPlaying:x,setIsPlaying:Le,currentNode:d,setCurrentNode:ce,participantData:h,width:c,height:50}):null,_.jsxs(gr,{align:"center",justify:"center",children:[_.jsx(mr,{variant:"light",size:50,onClick:()=>Le(!x),children:x?_.jsx(GXe,{}):_.jsx(YXe,{})}),F&&m&&s&&t?_.jsx(GA,{tags:F||[],onSelectTags:Ue=>{if(o&&m){const Ve=mc(m);Ve[t]||(Ve[t]={partTags:[],taskTags:{}}),Ve[t].taskTags[s]=Ue,o.saveAllParticipantAndTaskTags(Ve).then(()=>{y(t,o)})}},selectedTags:m&&m[t]?m[t].taskTags[s]||[]:[]}):null]}),s?_.jsx(ao,{children:h&&Z&&ne==="success"&&V&&!e&&(!ue||h.answers[ue]!==void 0)?_.jsx(i3t,{transcriptList:V,setTranscriptList:Q,setCurrentShownTranscription:u,currentShownTranscription:a,participant:h,playTime:E,setTranscriptLines:L}):e?null:_.jsx(io,{})}):null]})})}const jme=Object.assign({"../public/ZendoStudy/assets/ImageDisplay.tsx":Alt,"../public/ZendoStudy/assets/ImageDisplayEarlyGuess.tsx":Rlt,"../public/ZendoStudy/assets/ImageDisplayEarlyGuessCorrect.tsx":Dlt,"../public/ZendoStudy/assets/ImageDisplayIdeaTracker.tsx":$lt,"../public/ZendoStudy/assets/ParticipantIdDisplay.tsx":Flt,"../public/viz-guardrails/AudioTest.tsx":uct,"../public/viz-guardrails/Color.tsx":lct,"../public/viz-guardrails/DataExplorer.tsx":HAt,"../public/viz-guardrails/Help.tsx":WAt,"../public/viz-guardrails/LineChart.tsx":Lbt,"../public/viz-guardrails/RangeSelector.tsx":jbt,"../public/viz-guardrails/Selector.tsx":Bbt,"../public/viz-guardrails/Sidebar.tsx":Fbt,"../public/viz-guardrails/StripPlot.tsx":VAt,"../public/viz-guardrails/XAxis.tsx":Mbt,"../public/viz-guardrails/YAxis.tsx":$bt});function l3t({currentConfig:e,provState:t}){const n=$p(),r=nh(),i=`../public/${e.path}`,s=i in jme?jme[i].default:null,{trrackId:o}=Ff(),a=Tc(),{updateResponseBlockValidation:u,setIframeAnswers:l}=Rl(),c=P.useCallback(({status:d,provenanceGraph:f,answers:h})=>{a(u({location:"sidebar",identifier:`${r}_${n}`,status:d,values:h,provenanceGraph:f})),a(l(h))},[a,u,r,n,l]);return _.jsxs(P.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:[s?_.jsx(s,{parameters:e.parameters,setAnswer:c,provenanceState:t}):_.jsx(cR,{path:e.path}),n.toString().startsWith("reviewer-")&&o?_.jsx(ei.Footer,{p:"md",children:_.jsx(aOe,{mini:!0})}):null]})}function Bme({provState:e}){var k;const t=jf(),n=Zi(),r=$p(),i=nh()||"Notfound",s=t.components[i],o=gK(),a=s&&MF(s)&&t.baseComponents?pK({},(k=t.baseComponents)==null?void 0:k[s.baseComponent],s):s,u=(a==null?void 0:a.instruction)||"",l=a==null?void 0:a.instructionLocation,c=t.uiConfig.sidebar&&(l==="sidebar"||l===void 0),[d,f]=P.useState(null),h=Tc(),{setIsRecording:p}=Rl(),{analysisTrialName:m,analysisProvState:y,analysisParticipantName:v}=Ea(D=>D),{trrackId:w}=Ff(),x=Mc(),[S,E]=P.useState(null);P.useEffect(()=>{m&&w&&(i!==m||w!==v)&&x(`../../${v||w}/reviewer-${m}`,{relative:"path"})},[v,y,m,i,r,x,w]),P.useEffect(()=>{!r||!t||!t.recordStudyAudio||!n.storageEngine||(d&&S&&n.storageEngine.saveAudio(d,S),s&&!s.recordAudio?(d==null||d.stop(),E(null),f(null),h(p(!1))):(navigator.mediaDevices.getUserMedia({audio:!0}).then(M=>{const z=new MediaRecorder(M);z.start(),f(z),h(p(!0))}),E(i)))},[i]),zEe();const{storageEngine:T}=Zi(),A=Tc(),{setAlertModal:I}=Rl();return P.useEffect(()=>{(T==null?void 0:T.getEngine())!=="firebase"&&A(I({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[I,T,A]),i==="end"?_.jsx(VEe,{}):i==="Notfound"?_.jsx(cR,{email:t.uiConfig.contactEmail}):_.jsxs(_.Fragment,{children:[l==="aboveStimulus"&&_.jsx(Ou,{text:u}),_.jsx(MM,{status:o,config:a,location:"aboveStimulus"},`${r}-above-response-block`),_.jsxs(P.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:[a.type==="markdown"&&_.jsx(yat,{currentConfig:a}),a.type==="website"&&_.jsx(pat,{currentConfig:a}),a.type==="image"&&_.jsx(gat,{currentConfig:a}),a.type==="react-component"&&_.jsx(l3t,{currentConfig:a,provState:y})]},`${r}-stimulus`),(l==="belowStimulus"||l===void 0&&!c)&&_.jsx(Ou,{text:u}),_.jsx(MM,{status:o,config:a,location:"belowStimulus"},`${r}-below-response-block`)]})}function BH(e){const[t]=$Y();return _.jsx(DY,{...e,to:{pathname:e.to,search:t.toString()}})}function c3t(e,t=!1){return typeof e=="number"?zme(e,t):zme(e.length,t).map(r=>r.map(i=>e[i]))}function zme(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function uOe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=uOe(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function d3t(e,t){const n=mc(e);return uOe(n,t,"root")}function lOe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&lOe(s,t,i,o)})}function f3t(e){const t=[];return lOe(e,t,"",0),t}function Ume(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return c3t(i.sort(()=>.5-Math.random()),!0)}function h3t(e){const n=f3t(e.sequence).map(s=>({[s]:Ume(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=d3t(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=Ume(e,o))})}),i}function cOe(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=cOe(o,t,n,r),r.includes(o.orderPath))break}return i}function dOe(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=dOe(s,r)}}),n}function p3t(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function m3t({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,subSequence:s,participantView:o}){const a=e_(),u=Mc(),l=$p(),c=jf(),[d,{close:f,open:h}]=W1(!1),p=e in c.components&&c.components[e],m=s&&s.components.slice(r).includes(e)?cOe(n,e,r,s.orderPath):-1,y=o?l===m:l===`reviewer-${e}`;return _.jsxs(Ln,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[_.jsx(Ln.Target,{children:_.jsx(ke,{onMouseEnter:h,onMouseLeave:f,children:_.jsx(ZL,{active:y,style:{lineHeight:"32px",height:"32px"},label:_.jsxs(ke,{children:[i&&_.jsx(aXe,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),y?_.jsx(dt,{size:"sm",span:!0,fw:"700",display:"inline",children:e}):_.jsx(dt,{size:"sm",display:"inline",children:e})]}),onClick:()=>u(o?`/${a}/${m}`:`/${a}/reviewer-${e}`),disabled:t})})}),p&&(p.description||p.meta)&&_.jsx(Ln.Dropdown,{onMouseLeave:f,children:_.jsx(dt,{size:"sm",children:_.jsxs(ke,{children:[p.description&&_.jsxs(ke,{children:[_.jsx(dt,{fw:900,display:"inline-block",mr:2,children:"Description:"}),_.jsx(dt,{fw:400,component:"span",children:p.description})]}),p.meta&&_.jsxs(dt,{children:[_.jsx(dt,{fw:"900",component:"span",children:"Task Meta: "}),_.jsx(dt,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(p.meta,null,2)}`})]})]})})})]})}function fOe({configSequence:e,fullSequence:t,participantSequence:n,participantView:r}){var s;let i=mc(e.components);return n&&r&&(i=p3t(mc(e.components),mc(n.components))),r||(i=[...((s=e.interruptions)==null?void 0:s.flatMap(o=>o.components))||[],...i]),_.jsx("div",{children:i.map((o,a)=>{if(typeof o=="string")return r&&(n==null?void 0:n.components[a])!==o?null:_.jsx(m3t,{step:o,disabled:r&&(n==null?void 0:n.components[a])!==o,fullSequence:t,startIndex:a,interruption:e.interruptions&&e.interruptions.findIndex(d=>d.components.includes(o))>-1||!1,subSequence:n,participantView:r},a);const u=n==null?void 0:n.components.find(d=>typeof d!="string"&&d.orderPath===o.orderPath),l=u?pc(u).length-dOe(o,u):0,c=pc(o);return _.jsx(ZL,{label:_.jsxs(ke,{style:{opacity:l>0?1:.5},children:[_.jsx(dt,{size:"sm",display:"inline",children:o.order}),o.order==="random"||o.order==="latinSquare"?_.jsx(eXe,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&_.jsxs(Tf,{ml:5,variant:"light",children:[l,"/",c.length]}),r&&o.interruptions&&_.jsx(Tf,{ml:5,color:"orange",variant:"light",children:(u==null?void 0:u.components.filter(d=>{var f;return typeof d=="string"&&((f=o.interruptions)==null?void 0:f.flatMap(h=>h.components).includes(d))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:_.jsx(ke,{style:{borderLeft:"1px solid #e9ecef"},children:_.jsx(fOe,{configSequence:o,participantSequence:u,fullSequence:t,participantView:r})})},a)})})}function hOe(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function pOe(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>pOe(n,`${t}-${r}`))}}function Vme({text:e}){return _.jsx(jn,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:_.jsx(wwe,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function g3t(){const{sequence:e,metadata:t}=Ea(d=>d),{toggleStudyBrowser:n}=Rl(),r=jf(),i=Tc(),s=e_(),o=OY(`/${s}`),{storageEngine:a}=Zi(),u=P.useMemo(()=>{let d=mc(r.sequence);return d=pOe(d,"root"),d.components.push("end"),d},[r.sequence]),[l,c]=P.useState("participant");return _.jsxs(ei.Aside,{p:"0",children:[_.jsx(ei.Section,{children:_.jsxs(Gt,{direction:"row",p:"sm",justify:"space-between",pb:"xs",children:[_.jsx(dt,{size:"md",fw:700,pt:3,children:"Study Browser"}),_.jsx(Zn,{variant:"light",leftSection:_.jsx(FY,{size:14}),onClick:()=>hOe(a,r,t,o),size:"xs",disabled:l==="allTrials",children:"Next Participant"}),_.jsx(Sg,{onClick:()=>i(n()),mt:1})]})}),_.jsx(ei.Section,{grow:!0,component:sv,p:"xs",pt:0,children:_.jsxs(Fs,{value:l,onChange:c,children:[_.jsx(ke,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:_.jsxs(Fs.List,{grow:!0,children:[_.jsxs(Fs.Tab,{value:"participant",children:["Participant View",_.jsx(Vme,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),_.jsxs(Fs.Tab,{value:"allTrials",children:["All Trials View",_.jsx(Vme,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),_.jsx(Fs.Panel,{value:"participant",children:_.jsx(fOe,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!0})})]})})]})}function y3t({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const{config:n,metadata:r}=Ea(T=>T),i=hK(),s=Tc(),{toggleShowHelpText:o,toggleStudyBrowser:a}=Rl(),{storageEngine:u}=Zi(),l=Ea(T=>T.isRecording),c=$p(),d=i.length-1,f=typeof c=="number"?c/d*100:0,[h,p]=P.useState(!1),m=n==null?void 0:n.uiConfig.logoPath,y=n==null?void 0:n.uiConfig.withProgressBar,v=e_(),w=OY(`/${v}`),x=P.useRef(null),[S,E]=P.useState(!1);return P.useEffect(()=>{const T=x.current;T&&E(T.scrollWidth>T.offsetWidth)},[n]),_.jsx(ei.Header,{p:"md",children:_.jsxs(Au,{mt:-7,align:"center",children:[_.jsx(Au.Col,{span:4,children:_.jsxs(Gt,{align:"center",children:[_.jsx(av,{w:40,src:`${$c}${m}`,alt:"Study Logo"}),_.jsx(vd,{w:"md"}),_.jsx(Ki,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:n==null?void 0:n.studyMetadata.title}),l?_.jsxs(gr,{ml:"xl",gap:20,wrap:"nowrap",children:[_.jsx(dt,{color:"red",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Recording audio"}),_.jsx(nSe,{})]}):null]})}),_.jsx(Au.Col,{span:4,children:y&&_.jsx(Xb,{radius:"md",size:"lg",value:f})}),_.jsx(Au.Col,{span:4,children:_.jsxs(gr,{wrap:"nowrap",justify:"right",children:[!t&&_.jsx(jn,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:_.jsx(Tf,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&_.jsx(Zn,{variant:"outline",onClick:()=>s(o()),children:"Help"}),_.jsxs(Dn,{shadow:"md",width:200,withinPortal:!0,opened:h,onChange:p,children:[_.jsx(Dn.Target,{children:_.jsx(mr,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:_.jsx(bwe,{})})}),_.jsxs(Dn.Dropdown,{children:[e&&_.jsx(Dn.Item,{leftSection:_.jsx(jXe,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),_.jsx(Dn.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:_.jsx(PXe,{size:14}),children:"Contact"}),e&&_.jsx(Dn.Item,{leftSection:_.jsx(FY,{size:14}),onClick:()=>hOe(u,n,r,w),children:"Next Participant"})]})]})]})})]})})}function v3t(){var u;const e=(u=jf())==null?void 0:u.uiConfig.sidebar,t=jf(),n=nh(),r=t.components[n],i=P.useMemo(()=>{var l;return r?MF(r)&&t.baseComponents?pK({},(l=t.baseComponents)==null?void 0:l[r.baseComponent],r):r:null},[r,t.baseComponents]),s=gK(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?_.jsxs(ei.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&_.jsx(ei.Section,{bg:"gray.3",p:"md",children:_.jsxs(dt,{c:"gray.9",children:[_.jsx(dt,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),_.jsx(Ou,{text:o})]})}),_.jsx(ei.Section,{p:"md",children:_.jsx(MM,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):_.jsx(ei.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:_.jsx(MM,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function b3t(){const{showHelpText:e,config:t}=Ea(u=>u),n=Tc(),{toggleShowHelpText:r}=Rl(),[i,s]=P.useState(""),[o,a]=P.useState(!0);return P.useEffect(()=>{async function u(){const l=await mK(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),_.jsx(zs,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?_.jsx(Ou,{text:i}):_.jsx(cR,{path:t.uiConfig.helpTextPath})})}function _3t(){const{alertModal:e}=Ea(o=>o),{setAlertModal:t}=Rl(),n=Tc(),[r,i]=P.useState(e.show),s=P.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return P.useEffect(()=>i(e.show),[e.show]),_.jsx(zs,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:_.jsxs(iS,{color:"red",radius:"xs",title:"Alert",icon:_.jsx(XKe,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[_.jsx(dt,{my:"md",children:e.message}),_.jsx(gr,{w:"100%",justify:"end",children:_.jsx(Zn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function w3t(){const e=P.useRef([]),t=jf(),n=t.uiConfig.windowEventDebounceTime??100,r=Ea(f=>f.showStudyBrowser);P.useEffect(()=>{const f=of(E=>{e.current.push([Date.now(),"focus",E.target instanceof HTMLElement?E.target.tagName:""])},n,{maxWait:n}),h=of(E=>{e.current.push([Date.now(),"input",E.data??""])},n,{maxWait:n}),p=of(E=>{e.current.push([Date.now(),"keypress",E.key])},n,{maxWait:n}),m=of(E=>{e.current.push([Date.now(),"mousedown",[E.clientX,E.clientY]])},n,{maxWait:n}),y=of(E=>{e.current.push([Date.now(),"mouseup",[E.clientX,E.clientY]])},n,{maxWait:n}),v=of(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),w=of(E=>{e.current.push([Date.now(),"mousemove",[E.clientX,E.clientY]])},n,{maxWait:n}),x=of(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),S=of(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",f,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",y),window.addEventListener("resize",v),window.addEventListener("mousemove",w),window.addEventListener("scroll",x),document.addEventListener("visibilitychange",S),()=>{window.removeEventListener("focus",f,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",y),window.removeEventListener("resize",v),window.removeEventListener("mousemove",w),window.removeEventListener("scroll",x),document.removeEventListener("visibilitychange",S)}},[]);const i=t.uiConfig.sidebarWidth??300,{storageEngine:s}=Zi(),o=e_(),[a,u]=P.useState(!1),[l,c]=P.useState(!1);P.useEffect(()=>{(async()=>{if(s){const h=await s.getModes(o);u(h.studyNavigatorEnabled),c(h.dataCollectionEnabled)}})()},[s,o]);const d=P.useMemo(()=>a&&r,[a,r]);return _.jsx(HEe.Provider,{value:e,children:_.jsxs(ei,{padding:"md",header:{height:70},navbar:{width:i,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!d,mobile:!d}},children:[_.jsx(v3t,{}),_.jsx(g3t,{}),_.jsx(y3t,{studyNavigatorEnabled:a,dataCollectionEnabled:l}),_.jsx(b3t,{}),_.jsx(_3t,{}),_.jsx(ei.Main,{children:_.jsx(RKe,{})})]})})}const fz={left:5,right:5};function x3t(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,s=n<10?`0${n}`:`${n}`;return`${t<10?`0${t}`:`${t}`}h ${s}m ${i}s`}function E3t({participant:e,maxDuration:t}){const n=Mc(),r=Ig(),i=P.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const l=Object.values(e.answers).sort((c,d)=>c.startTime-d.startTime);return new Date(l[l.length-1].endTime-(l[1]?l[1].startTime:0)).getTime()},[e]),[s,{width:o}]=_L(),a=P.useMemo(()=>!e.answers||Object.entries(e.answers).length===0?0:A2(Object.values(e.answers).map(c=>c.provenanceGraph?Object.keys(c.provenanceGraph.nodes).length:0)),[e]),u=P.useMemo(()=>{if(!e)return null;const l=Object.values(e.answers||{}).map(f=>[f.startTime,f.endTime]).flat(),c=nc(l);return ld([fz.left,o+fz.left+fz.right]).domain(c).clamp(!0)},[e,o]);return _.jsx(Il,{children:_.jsxs(ao,{gap:25,ref:s,style:{width:"75%"},children:[_.jsxs(gr,{justify:"space-between",children:[_.jsx(Yb,{size:"25px",component:MY,target:"_blank",to:`${r.pathname}/${e.participantId}/ui`,onClick:()=>n(`${e.participantId}/reviewer-${pc(e.sequence)[0]}`),children:e.participantId}),_.jsx(dt,{size:"xl",children:`${a}`}),_.jsx(dt,{size:"xl",children:`${x3t(i)}`})]}),u?_.jsx(pke,{xScale:u,setSelectedTask:()=>null,participantData:e,width:o,height:250}):null]},e.participantId)})}function S3t(e){return e?e.getAllParticipantsData():null}function T3t(){const{storageEngine:e}=Zi(),{value:t,status:n}=bf(S3t,[e]),r=P.useMemo(()=>{if(!(n!=="success"||!t))return tp(t==null?void 0:t.map(i=>{if(!i.answers||Object.entries(i.answers).length===0)return 0;const s=Object.values(i.answers).sort((o,a)=>o.startTime-a.startTime);return new Date(s[s.length-1].endTime-s[0].startTime).getTime()}))},[t,n]);return n==="success"&&t?_.jsx(ao,{gap:50,style:{width:"100%"},children:t==null?void 0:t.map(i=>_.jsx(E3t,{maxDuration:r,participant:i},i.participantId))}):_.jsx(io,{})}function C3t({setProvState:e}){return _.jsx("div",{children:_.jsx(ei.Main,{p:"sm",children:_.jsx(aOe,{mini:!1})})})}async function A3t(e){const t=await(await fetch(`${$c}${e}`)).text();return zut(t)}async function r4(e,t){const n=t.configsList.find(r=>Twe(r)===e);if(n){const r=t.configs[n];return await A3t(`${r.path}`)}return null}async function I3t(e){const t={},n=e.configsList.filter(i=>!e.configs[i].test).map(async i=>r4(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function R3t({studyId:e,config:t}){const{sequence:n}=Ea(i=>i),r=P.useMemo(()=>{if(e&&t&&n){const i=[];return i.push({path:"/",element:_.jsx(BH,{to:"0",replace:!0})}),i.push({path:"/:index",element:t.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(Ki,{order:2,mb:8,children:"Error loading config"}),_.jsx(x7,{issues:t.errors,type:"error"})]}):_.jsx(Bme,{})}),i.push({path:"/analysis/:trrackId/:index/",element:_.jsx(Bme,{})}),i.push({path:"/analysis/:trrackId/ui/:index?/",element:_.jsx(ei,{header:{height:70},navbar:{collapsed:{desktop:!0,mobile:!0},width:0,breakpoint:"xs"},aside:{collapsed:{desktop:!0,mobile:!0},width:0,breakpoint:"xs"},children:_.jsx(C3t,{setProvState:()=>null})})}),i.push({path:"/analysis",element:_.jsx(T3t,{})}),i.push({path:"/end",element:_.jsx(VEe,{})}),[{element:_.jsx(w3t,{}),children:i}]}return[]},[t,n,e]);return mwe(r)}function k3t({globalConfig:e}){const t=e_(),[n,r]=P.useState(null);e.configsList.includes(t),P.useEffect(()=>{r4(t,e).then(l=>{r(l)})},[e,t]);const[i,s]=P.useState(null),{storageEngine:o}=Zi(),[a]=$Y();return P.useEffect(()=>{async function l(){if(!o||!n||!t)return;await o.initializeStudyDb(t,n),await o.getSequenceArray()||await o.setSequenceArray(await h3t(n));const d=n.uiConfig.urlParticipantIdParam&&a.get(n.uiConfig.urlParticipantIdParam)||void 0,f=Object.fromEntries(a.entries()),h=await fetch("https://api.ipify.org?format=json").catch(w=>""),p=h instanceof Response?await h.json():{ip:""},m={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:p.ip},y=await o.initializeParticipantSession(t,f,n,m,d),v=await lat(t,n,y.sequence,m,y.answers);s(v)}l()},[o,n,t,a]),i?_.jsx(PEe.Provider,{value:i,children:_.jsx(zit,{store:i.store,children:_.jsx(R3t,{studyId:t,config:n})})}):_.jsx(xc,{visible:!0})}function e2({studyIds:e}){const t=Mc(),{studyId:n}=Ff(),r=Ig(),i=e.map(f=>({value:f,label:f})),{storageEngine:s}=Zi(),{user:o,logout:a}=Mg(),[u,l]=P.useState(!1),c=r.pathname.includes("analysis"),d=[{name:"Studies",leftIcon:_.jsx(TXe,{}),href:"/",needAdmin:!1},{name:"Analysis",leftIcon:_.jsx(uXe,{}),href:"/analysis/dashboard",needAdmin:!1},{name:"Settings",leftIcon:_.jsx(xwe,{}),href:"/settings",needAdmin:!0}];return _.jsx(ei.Header,{p:"md",children:_.jsxs(Au,{mt:-7,align:"center",children:[_.jsx(Au.Col,{span:6,children:_.jsxs(Gt,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[_.jsx(av,{w:40,src:`${$c}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsx(vd,{w:"md"}),_.jsx(Ki,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),_.jsx(Au.Col,{span:6,children:_.jsxs(Gt,{justify:"flex-end",direction:"row",children:[c&&_.jsx(mp,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:f=>t(`/analysis/stats/${f}`),mr:16}),_.jsx(zG,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),_.jsx(Op,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:_.jsxs(Gt,{direction:"column",mt:20,children:[_.jsx(dt,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),d.map(f=>f.needAdmin?o.isAdmin?_.jsx(Zn,{leftSection:f.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(f.href),l(!1)},children:f.name},`menu-item-${f.name}`):null:_.jsx(Zn,{leftSection:f.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(f.href),l(!1)},children:f.name},`menu-item-${f.name}`)),_.jsxs(ke,{ml:10,children:[_.jsx(ty,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?_.jsx(dt,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{a(),t("/login"),l(!1)},children:"Logout"}):_.jsx(dt,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}const _w=14;function mOe({completed:e,inProgress:t,rejected:n,filteredCompleted:r}){return _.jsxs(Gt,{ml:4,gap:4,children:[_.jsx(jn,{label:"Completed",children:_.jsx(Tf,{variant:"light",color:"green",leftSection:_.jsx(dXe,{width:_w,height:_w,style:{paddingTop:1}}),pb:1,children:r&&r!==e?`${r}/${e}`:e})}),_.jsx(jn,{label:"In Progress",children:_.jsx(Tf,{variant:"light",color:"orange",leftSection:_.jsx(LXe,{width:_w,height:_w,style:{paddingTop:1}}),pb:1,children:t})}),_.jsx(jn,{label:"Rejected",children:_.jsx(Tf,{variant:"light",color:"red",leftSection:_.jsx(jY,{width:_w,height:_w,style:{paddingTop:1}}),pb:1,children:n})})]})}function P3t({studyId:e,refresh:t}){const[n,r]=P.useState(!1),[i,s]=P.useState(!1),[o,a]=P.useState(!1),[u,l]=P.useState(""),[c,d]=P.useState([]),[f,h]=P.useState(""),[p,m]=P.useState(!1),[y,v]=P.useState(!1),{storageEngine:w}=Zi(),x=w,S=P.useCallback(async()=>{v(!0);const z=await x.getSnapshots(e);d(z),v(!1)},[x,e]);P.useEffect(()=>{S()},[S]);const E=async()=>{m(!0),await x.createSnapshot(e,!1),S(),m(!1),await t()},T=async()=>{m(!0),h(""),r(!1),await x.createSnapshot(e,!0),S(),m(!1),await t()},A=async z=>{m(!0),await x.restoreSnapshot(e,z),S(),m(!1),await t()},I=async()=>{m(!0),h(""),s(!1),await x.removeSnapshotOrLive(u,!0),S(),m(!1),await t()},k=async()=>{m(!0),h(""),a(!1),await x.removeSnapshotOrLive(e,!0),S(),m(!1),await t()},D=()=>$ae({title:"Create a Snapshot",children:_.jsx(dt,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>E()}),M=z=>$ae({title:"Restore Snapshot",children:_.jsx(dt,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>A(z)});return _.jsxs(_.Fragment,{children:[_.jsx(xc,{visible:p}),_.jsxs(Gt,{justify:"space-between",align:"center",children:[_.jsxs(ke,{style:{width:"70%"},children:[_.jsx(Ki,{order:5,children:"Create a Snapshot"}),_.jsxs(dt,{children:["This will create a snapshot of the live"," ",_.jsx(dt,{span:!0,fw:700,children:e})," ","database. It will"," ",_.jsx(dt,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(jn,{label:"Create a snapshot",children:_.jsx(Zn,{onClick:D,children:"Snapshot"})})]}),_.jsx(vd,{h:"lg"}),_.jsxs(Gt,{justify:"space-between",align:"center",children:[_.jsxs(ke,{style:{width:"70%"},children:[_.jsx(Ki,{order:5,children:"Archive Data"}),_.jsxs(dt,{children:["This will create a snapshot of the live"," ",_.jsx(dt,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(jn,{label:"Snapshot and Delete Data",children:_.jsx(Zn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),_.jsx(vd,{h:"lg"}),_.jsxs(Gt,{justify:"space-between",align:"center",children:[_.jsxs(ke,{style:{width:"70%"},children:[_.jsx(Ki,{order:5,children:"Delete Data"}),_.jsxs(dt,{children:["This will delete the live"," ",_.jsx(dt,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),_.jsx(jn,{label:"Delete Data",children:_.jsx(Zn,{color:"red",onClick:()=>a(!0),children:"Delete"})})]}),_.jsx(vd,{h:"xl"}),_.jsxs(Gt,{direction:"column",children:[_.jsx(Gt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:_.jsx(Ki,{order:5,children:"Snapshots"})}),_.jsxs(ke,{style:{position:"relative"},children:[_.jsx(xc,{visible:y}),c.length>0?c.map(z=>_.jsxs(Gt,{justify:"space-between",mb:"xs",children:[_.jsx(dt,{children:z}),_.jsxs(Gt,{direction:"row",gap:"xs",children:[_.jsx(jn,{label:"Restore Snapshot",children:_.jsx(mr,{color:"blue",variant:"subtle",onClick:()=>{M(z)},children:_.jsx(FXe,{})})}),_.jsx(jn,{label:"Delete Snapshot",children:_.jsx(mr,{color:"red",variant:"subtle",onClick:()=>{s(!0),l(z)},children:_.jsx(Swe,{})})})]})]},z)):_.jsx(dt,{children:"No snapshots."})]})]}),_.jsxs(zs,{opened:n,onClose:()=>{r(!1),h("")},title:_.jsx(dt,{children:"Archive Data"}),children:[_.jsx(dt,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),_.jsx(Af,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:z=>h(z.target.value)}),_.jsxs(Gt,{mt:"sm",justify:"right",children:[_.jsx(Zn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),h("")},children:"Cancel"}),_.jsx(Zn,{color:"red",onClick:T,disabled:f!==e,children:"Archive"})]})]}),_.jsxs(zs,{opened:i,onClose:()=>{s(!1),h("")},title:_.jsx(dt,{children:"Delete Snapshot"}),children:[_.jsxs(dt,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",_.jsx(dt,{span:!0,fw:700,children:"irreversible"}),"."]}),_.jsx(Af,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:z=>h(z.target.value)}),_.jsxs(Gt,{mt:"sm",justify:"right",children:[_.jsx(Zn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),h("")},children:"Cancel"}),_.jsx(Zn,{color:"red",onClick:I,disabled:f!==e,children:"Delete"})]})]}),_.jsxs(zs,{opened:o,onClose:()=>{a(!1),h("")},title:_.jsx(dt,{children:"Delete Live Data"}),children:[_.jsxs(dt,{mb:"sm",children:["This will permanently delete the live"," ",_.jsx(dt,{span:!0,fw:700,children:e})," ","data. This action is"," ",_.jsx(dt,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),_.jsx(Af,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:z=>h(z.target.value)}),_.jsxs(Gt,{mt:"sm",justify:"right",children:[_.jsx(Zn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),h("")},children:"Cancel"}),_.jsx(Zn,{color:"red",onClick:k,disabled:f!==e,children:"Delete"})]})]})]})}function N3t({studyId:e}){const{storageEngine:t}=Zi(),[n,r]=P.useState(!1),[i,s]=P.useState(!1),[o,a]=P.useState(!1),[u,l]=P.useState(!1);P.useEffect(()=>{(async()=>{if(t){const f=await t.getModes(e);s(f.dataCollectionEnabled),a(f.studyNavigatorEnabled),l(f.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(d,f)=>{t&&(await t.setMode(e,d,f),d==="dataCollectionEnabled"?s(f):d==="studyNavigatorEnabled"?a(f):d==="analyticsInterfacePubliclyAccessible"&&l(f))};return n&&_.jsxs(ao,{children:[_.jsx(ny,{label:"Data Collection Enabled",checked:i,onChange:d=>c("dataCollectionEnabled",d.currentTarget.checked)}),_.jsx(ny,{label:"Study Navigator Enabled",checked:o,onChange:d=>c("studyNavigatorEnabled",d.currentTarget.checked)}),_.jsx(ny,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:d=>c("analyticsInterfacePubliclyAccessible",d.currentTarget.checked)})]})}function O3t({studyId:e,refresh:t}){const{storageEngine:n}=Zi();return _.jsx(Zf,{children:_.jsxs(ll,{multiple:!0,variant:"contained",children:[_.jsxs(ll.Item,{value:"ReVISit Modes",children:[_.jsx(ll.Control,{children:_.jsx(Ki,{order:5,children:"ReVISit Modes"})}),_.jsx(ll.Panel,{children:_.jsx(N3t,{studyId:e})})]},"modes"),_.jsxs(ll.Item,{value:"Data Management",children:[_.jsx(ll.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:_.jsx(Ki,{order:5,children:"Data Management"})}),_.jsx(ll.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&_.jsx(P3t,{studyId:e,refresh:t})})]},"dataManagement")]})})}/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function W0(e,t){return typeof e=="function"?e(t):e}function kc(e,t){return n=>{t.setState(r=>({...r,[e]:W0(n,r[e])}))}}function i4(e){return e instanceof Function}function D3t(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")}function gOe(e,t){const n=[],r=i=>{i.forEach(s=>{n.push(s);const o=t(s);o!=null&&o.length&&r(o)})};return r(e),n}function hn(e,t,n){let r=[],i;return s=>{let o;n.key&&n.debug&&(o=Date.now());const a=e(s);if(!(a.length!==r.length||a.some((c,d)=>r[d]!==c)))return i;r=a;let l;if(n.key&&n.debug&&(l=Date.now()),i=t(...a),n==null||n.onChange==null||n.onChange(i),n.key&&n.debug&&n!=null&&n.debug()){const c=Math.round((Date.now()-o)*100)/100,d=Math.round((Date.now()-l)*100)/100,f=d/16,h=(p,m)=>{for(p=String(p);p.length<m;)p=" "+p;return p};console.info(`%c ${h(d,5)} /${h(c,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*f,120))}deg 100% 31%);`,n==null?void 0:n.key)}return i}}function pn(e,t,n,r){return{debug:()=>{var i;return(i=e==null?void 0:e.debugAll)!=null?i:e[t]},key:!1,onChange:r}}function M3t(e,t,n,r){const i=()=>{var o;return(o=s.getValue())!=null?o:e.options.renderFallbackValue},s={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(r),renderValue:i,getContext:hn(()=>[e,n,t,s],(o,a,u,l)=>({table:o,column:a,row:u,cell:l,getValue:l.getValue,renderValue:l.renderValue}),pn(e.options,"debugCells"))};return e._features.forEach(o=>{o.createCell==null||o.createCell(s,n,t,e)},{}),s}function $3t(e,t,n,r){var i,s;const a={...e._getDefaultColumnDef(),...t},u=a.accessorKey;let l=(i=(s=a.id)!=null?s:u?u.replace(".","_"):void 0)!=null?i:typeof a.header=="string"?a.header:void 0,c;if(a.accessorFn?c=a.accessorFn:u&&(u.includes(".")?c=f=>{let h=f;for(const m of u.split(".")){var p;h=(p=h)==null?void 0:p[m]}return h}:c=f=>f[a.accessorKey]),!l)throw new Error;let d={id:`${String(l)}`,accessorFn:c,parent:r,depth:n,columnDef:a,columns:[],getFlatColumns:hn(()=>[!0],()=>{var f;return[d,...(f=d.columns)==null?void 0:f.flatMap(h=>h.getFlatColumns())]},pn(e.options,"debugColumns")),getLeafColumns:hn(()=>[e._getOrderColumnsFn()],f=>{var h;if((h=d.columns)!=null&&h.length){let p=d.columns.flatMap(m=>m.getLeafColumns());return f(p)}return[d]},pn(e.options,"debugColumns"))};for(const f of e._features)f.createColumn==null||f.createColumn(d,e);return d}const La="debugHeaders";function Hme(e,t,n){var r;let s={id:(r=n.id)!=null?r:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const o=[],a=u=>{u.subHeaders&&u.subHeaders.length&&u.subHeaders.map(a),o.push(u)};return a(s),o},getContext:()=>({table:e,header:s,column:t})};return e._features.forEach(o=>{o.createHeader==null||o.createHeader(s,e)}),s}const L3t={createTable:e=>{e.getHeaderGroups=hn(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,i)=>{var s,o;const a=(s=r==null?void 0:r.map(d=>n.find(f=>f.id===d)).filter(Boolean))!=null?s:[],u=(o=i==null?void 0:i.map(d=>n.find(f=>f.id===d)).filter(Boolean))!=null?o:[],l=n.filter(d=>!(r!=null&&r.includes(d.id))&&!(i!=null&&i.includes(d.id)));return wO(t,[...a,...l,...u],e)},pn(e.options,La)),e.getCenterHeaderGroups=hn(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,i)=>(n=n.filter(s=>!(r!=null&&r.includes(s.id))&&!(i!=null&&i.includes(s.id))),wO(t,n,e,"center")),pn(e.options,La)),e.getLeftHeaderGroups=hn(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,r)=>{var i;const s=(i=r==null?void 0:r.map(o=>n.find(a=>a.id===o)).filter(Boolean))!=null?i:[];return wO(t,s,e,"left")},pn(e.options,La)),e.getRightHeaderGroups=hn(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,r)=>{var i;const s=(i=r==null?void 0:r.map(o=>n.find(a=>a.id===o)).filter(Boolean))!=null?i:[];return wO(t,s,e,"right")},pn(e.options,La)),e.getFooterGroups=hn(()=>[e.getHeaderGroups()],t=>[...t].reverse(),pn(e.options,La)),e.getLeftFooterGroups=hn(()=>[e.getLeftHeaderGroups()],t=>[...t].reverse(),pn(e.options,La)),e.getCenterFooterGroups=hn(()=>[e.getCenterHeaderGroups()],t=>[...t].reverse(),pn(e.options,La)),e.getRightFooterGroups=hn(()=>[e.getRightHeaderGroups()],t=>[...t].reverse(),pn(e.options,La)),e.getFlatHeaders=hn(()=>[e.getHeaderGroups()],t=>t.map(n=>n.headers).flat(),pn(e.options,La)),e.getLeftFlatHeaders=hn(()=>[e.getLeftHeaderGroups()],t=>t.map(n=>n.headers).flat(),pn(e.options,La)),e.getCenterFlatHeaders=hn(()=>[e.getCenterHeaderGroups()],t=>t.map(n=>n.headers).flat(),pn(e.options,La)),e.getRightFlatHeaders=hn(()=>[e.getRightHeaderGroups()],t=>t.map(n=>n.headers).flat(),pn(e.options,La)),e.getCenterLeafHeaders=hn(()=>[e.getCenterFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),pn(e.options,La)),e.getLeftLeafHeaders=hn(()=>[e.getLeftFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),pn(e.options,La)),e.getRightLeafHeaders=hn(()=>[e.getRightFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),pn(e.options,La)),e.getLeafHeaders=hn(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(t,n,r)=>{var i,s,o,a,u,l;return[...(i=(s=t[0])==null?void 0:s.headers)!=null?i:[],...(o=(a=n[0])==null?void 0:a.headers)!=null?o:[],...(u=(l=r[0])==null?void 0:l.headers)!=null?u:[]].map(c=>c.getLeafHeaders()).flat()},pn(e.options,La))}};function wO(e,t,n,r){var i,s;let o=0;const a=function(f,h){h===void 0&&(h=1),o=Math.max(o,h),f.filter(p=>p.getIsVisible()).forEach(p=>{var m;(m=p.columns)!=null&&m.length&&a(p.columns,h+1)},0)};a(e);let u=[];const l=(f,h)=>{const p={depth:h,id:[r,`${h}`].filter(Boolean).join("_"),headers:[]},m=[];f.forEach(y=>{const v=[...m].reverse()[0],w=y.column.depth===p.depth;let x,S=!1;if(w&&y.column.parent?x=y.column.parent:(x=y.column,S=!0),v&&(v==null?void 0:v.column)===x)v.subHeaders.push(y);else{const E=Hme(n,x,{id:[r,h,x.id,y==null?void 0:y.id].filter(Boolean).join("_"),isPlaceholder:S,placeholderId:S?`${m.filter(T=>T.column===x).length}`:void 0,depth:h,index:m.length});E.subHeaders.push(y),m.push(E)}p.headers.push(y),y.headerGroup=p}),u.push(p),h>0&&l(m,h-1)},c=t.map((f,h)=>Hme(n,f,{depth:o,index:h}));l(c,o-1),u.reverse();const d=f=>f.filter(p=>p.column.getIsVisible()).map(p=>{let m=0,y=0,v=[0];p.subHeaders&&p.subHeaders.length?(v=[],d(p.subHeaders).forEach(x=>{let{colSpan:S,rowSpan:E}=x;m+=S,v.push(E)})):m=1;const w=Math.min(...v);return y=y+w,p.colSpan=m,p.rowSpan=y,{colSpan:m,rowSpan:y}});return d((i=(s=u[0])==null?void 0:s.headers)!=null?i:[]),u}const QR=(e,t,n,r,i,s,o)=>{let a={id:t,index:r,original:n,depth:i,parentId:o,_valuesCache:{},_uniqueValuesCache:{},getValue:u=>{if(a._valuesCache.hasOwnProperty(u))return a._valuesCache[u];const l=e.getColumn(u);if(l!=null&&l.accessorFn)return a._valuesCache[u]=l.accessorFn(a.original,r),a._valuesCache[u]},getUniqueValues:u=>{if(a._uniqueValuesCache.hasOwnProperty(u))return a._uniqueValuesCache[u];const l=e.getColumn(u);if(l!=null&&l.accessorFn)return l.columnDef.getUniqueValues?(a._uniqueValuesCache[u]=l.columnDef.getUniqueValues(a.original,r),a._uniqueValuesCache[u]):(a._uniqueValuesCache[u]=[a.getValue(u)],a._uniqueValuesCache[u])},renderValue:u=>{var l;return(l=a.getValue(u))!=null?l:e.options.renderFallbackValue},subRows:s??[],getLeafRows:()=>gOe(a.subRows,u=>u.subRows),getParentRow:()=>a.parentId?e.getRow(a.parentId,!0):void 0,getParentRows:()=>{let u=[],l=a;for(;;){const c=l.getParentRow();if(!c)break;u.push(c),l=c}return u.reverse()},getAllCells:hn(()=>[e.getAllLeafColumns()],u=>u.map(l=>M3t(e,a,l,l.id)),pn(e.options,"debugRows")),_getAllCellsByColumnId:hn(()=>[a.getAllCells()],u=>u.reduce((l,c)=>(l[c.column.id]=c,l),{}),pn(e.options,"debugRows"))};for(let u=0;u<e._features.length;u++){const l=e._features[u];l==null||l.createRow==null||l.createRow(a,e)}return a},F3t={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},yOe=(e,t,n)=>{var r;const i=n.toLowerCase();return!!(!((r=e.getValue(t))==null||(r=r.toString())==null||(r=r.toLowerCase())==null)&&r.includes(i))};yOe.autoRemove=e=>Nf(e);const vOe=(e,t,n)=>{var r;return!!(!((r=e.getValue(t))==null||(r=r.toString())==null)&&r.includes(n))};vOe.autoRemove=e=>Nf(e);const bOe=(e,t,n)=>{var r;return((r=e.getValue(t))==null||(r=r.toString())==null?void 0:r.toLowerCase())===(n==null?void 0:n.toLowerCase())};bOe.autoRemove=e=>Nf(e);const _Oe=(e,t,n)=>{var r;return(r=e.getValue(t))==null?void 0:r.includes(n)};_Oe.autoRemove=e=>Nf(e)||!(e!=null&&e.length);const wOe=(e,t,n)=>!n.some(r=>{var i;return!((i=e.getValue(t))!=null&&i.includes(r))});wOe.autoRemove=e=>Nf(e)||!(e!=null&&e.length);const xOe=(e,t,n)=>n.some(r=>{var i;return(i=e.getValue(t))==null?void 0:i.includes(r)});xOe.autoRemove=e=>Nf(e)||!(e!=null&&e.length);const EOe=(e,t,n)=>e.getValue(t)===n;EOe.autoRemove=e=>Nf(e);const SOe=(e,t,n)=>e.getValue(t)==n;SOe.autoRemove=e=>Nf(e);const tZ=(e,t,n)=>{let[r,i]=n;const s=e.getValue(t);return s>=r&&s<=i};tZ.resolveFilterValue=e=>{let[t,n]=e,r=typeof t!="number"?parseFloat(t):t,i=typeof n!="number"?parseFloat(n):n,s=t===null||Number.isNaN(r)?-1/0:r,o=n===null||Number.isNaN(i)?1/0:i;if(s>o){const a=s;s=o,o=a}return[s,o]};tZ.autoRemove=e=>Nf(e)||Nf(e[0])&&Nf(e[1]);const Dh={includesString:yOe,includesStringSensitive:vOe,equalsString:bOe,arrIncludes:_Oe,arrIncludesAll:wOe,arrIncludesSome:xOe,equals:EOe,weakEquals:SOe,inNumberRange:tZ};function Nf(e){return e==null||e===""}const j3t={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:kc("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const n=t.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(e.id);return typeof r=="string"?Dh.includesString:typeof r=="number"?Dh.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?Dh.equals:Array.isArray(r)?Dh.arrIncludes:Dh.weakEquals},e.getFilterFn=()=>{var n,r;return i4(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(n=(r=t.options.filterFns)==null?void 0:r[e.columnDef.filterFn])!=null?n:Dh[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,r,i;return((n=e.columnDef.enableColumnFilter)!=null?n:!0)&&((r=t.options.enableColumnFilters)!=null?r:!0)&&((i=t.options.enableFilters)!=null?i:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return(n=t.getState().columnFilters)==null||(n=n.find(r=>r.id===e.id))==null?void 0:n.value},e.getFilterIndex=()=>{var n,r;return(n=(r=t.getState().columnFilters)==null?void 0:r.findIndex(i=>i.id===e.id))!=null?n:-1},e.setFilterValue=n=>{t.setColumnFilters(r=>{const i=e.getFilterFn(),s=r==null?void 0:r.find(c=>c.id===e.id),o=W0(n,s?s.value:void 0);if(qme(i,o,e)){var a;return(a=r==null?void 0:r.filter(c=>c.id!==e.id))!=null?a:[]}const u={id:e.id,value:o};if(s){var l;return(l=r==null?void 0:r.map(c=>c.id===e.id?u:c))!=null?l:[]}return r!=null&&r.length?[...r,u]:[u]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const n=e.getAllLeafColumns(),r=i=>{var s;return(s=W0(t,i))==null?void 0:s.filter(o=>{const a=n.find(u=>u.id===o.id);if(a){const u=a.getFilterFn();if(qme(u,o.value,a))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(r)},e.resetColumnFilters=t=>{var n,r;e.setColumnFilters(t?[]:(n=(r=e.initialState)==null?void 0:r.columnFilters)!=null?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function qme(e,t,n){return(e&&e.autoRemove?e.autoRemove(t,n):!1)||typeof t>"u"||typeof t=="string"&&!t}const B3t=(e,t,n)=>n.reduce((r,i)=>{const s=i.getValue(e);return r+(typeof s=="number"?s:0)},0),z3t=(e,t,n)=>{let r;return n.forEach(i=>{const s=i.getValue(e);s!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}),r},U3t=(e,t,n)=>{let r;return n.forEach(i=>{const s=i.getValue(e);s!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}),r},V3t=(e,t,n)=>{let r,i;return n.forEach(s=>{const o=s.getValue(e);o!=null&&(r===void 0?o>=o&&(r=i=o):(r>o&&(r=o),i<o&&(i=o)))}),[r,i]},H3t=(e,t)=>{let n=0,r=0;if(t.forEach(i=>{let s=i.getValue(e);s!=null&&(s=+s)>=s&&(++n,r+=s)}),n)return r/n},q3t=(e,t)=>{if(!t.length)return;const n=t.map(s=>s.getValue(e));if(!D3t(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),i=n.sort((s,o)=>s-o);return n.length%2!==0?i[r]:(i[r-1]+i[r])/2},W3t=(e,t)=>Array.from(new Set(t.map(n=>n.getValue(e))).values()),G3t=(e,t)=>new Set(t.map(n=>n.getValue(e))).size,Y3t=(e,t)=>t.length,LD={sum:B3t,min:z3t,max:U3t,extent:V3t,mean:H3t,median:q3t,unique:W3t,uniqueCount:G3t,count:Y3t},K3t={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return(t=(n=e.getValue())==null||n.toString==null?void 0:n.toString())!=null?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:kc("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(n=>n!=null&&n.includes(e.id)?n.filter(r=>r!==e.id):[...n??[],e.id])},e.getCanGroup=()=>{var n,r;return((n=e.columnDef.enableGrouping)!=null?n:!0)&&((r=t.options.enableGrouping)!=null?r:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const n=e.getCanGroup();return()=>{n&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const n=t.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(e.id);if(typeof r=="number")return LD.sum;if(Object.prototype.toString.call(r)==="[object Date]")return LD.extent},e.getAggregationFn=()=>{var n,r;if(!e)throw new Error;return i4(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(n=(r=t.options.aggregationFns)==null?void 0:r[e.columnDef.aggregationFn])!=null?n:LD[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,r;e.setGrouping(t?[]:(n=(r=e.initialState)==null?void 0:r.grouping)!=null?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const r=t.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(e._groupingValuesCache[n]=r.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,r)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var i;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((i=n.subRows)!=null&&i.length)}}};function X3t(e,t,n){if(!(t!=null&&t.length)||!n)return e;const r=e.filter(s=>!t.includes(s.id));return n==="remove"?r:[...t.map(s=>e.find(o=>o.id===s)).filter(Boolean),...r]}const Q3t={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:kc("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=hn(n=>[t2(t,n)],n=>n.findIndex(r=>r.id===e.id),pn(t.options,"debugColumns")),e.getIsFirstColumn=n=>{var r;return((r=t2(t,n)[0])==null?void 0:r.id)===e.id},e.getIsLastColumn=n=>{var r;const i=t2(t,n);return((r=i[i.length-1])==null?void 0:r.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:(n=e.initialState.columnOrder)!=null?n:[])},e._getOrderColumnsFn=hn(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(t,n,r)=>i=>{let s=[];if(!(t!=null&&t.length))s=i;else{const o=[...t],a=[...i];for(;a.length&&o.length;){const u=o.shift(),l=a.findIndex(c=>c.id===u);l>-1&&s.push(a.splice(l,1)[0])}s=[...s,...a]}return X3t(s,n,r)},pn(e.options,"debugTable"))}},hz=()=>({left:[],right:[]}),J3t={getInitialState:e=>({columnPinning:hz(),...e}),getDefaultOptions:e=>({onColumnPinningChange:kc("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{const r=e.getLeafColumns().map(i=>i.id).filter(Boolean);t.setColumnPinning(i=>{var s,o;if(n==="right"){var a,u;return{left:((a=i==null?void 0:i.left)!=null?a:[]).filter(d=>!(r!=null&&r.includes(d))),right:[...((u=i==null?void 0:i.right)!=null?u:[]).filter(d=>!(r!=null&&r.includes(d))),...r]}}if(n==="left"){var l,c;return{left:[...((l=i==null?void 0:i.left)!=null?l:[]).filter(d=>!(r!=null&&r.includes(d))),...r],right:((c=i==null?void 0:i.right)!=null?c:[]).filter(d=>!(r!=null&&r.includes(d)))}}return{left:((s=i==null?void 0:i.left)!=null?s:[]).filter(d=>!(r!=null&&r.includes(d))),right:((o=i==null?void 0:i.right)!=null?o:[]).filter(d=>!(r!=null&&r.includes(d)))}})},e.getCanPin=()=>e.getLeafColumns().some(r=>{var i,s,o;return((i=r.columnDef.enablePinning)!=null?i:!0)&&((s=(o=t.options.enableColumnPinning)!=null?o:t.options.enablePinning)!=null?s:!0)}),e.getIsPinned=()=>{const n=e.getLeafColumns().map(a=>a.id),{left:r,right:i}=t.getState().columnPinning,s=n.some(a=>r==null?void 0:r.includes(a)),o=n.some(a=>i==null?void 0:i.includes(a));return s?"left":o?"right":!1},e.getPinnedIndex=()=>{var n,r;const i=e.getIsPinned();return i?(n=(r=t.getState().columnPinning)==null||(r=r[i])==null?void 0:r.indexOf(e.id))!=null?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=hn(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,r,i)=>{const s=[...r??[],...i??[]];return n.filter(o=>!s.includes(o.column.id))},pn(t.options,"debugRows")),e.getLeftVisibleCells=hn(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(n,r)=>(r??[]).map(s=>n.find(o=>o.column.id===s)).filter(Boolean).map(s=>({...s,position:"left"})),pn(t.options,"debugRows")),e.getRightVisibleCells=hn(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(n,r)=>(r??[]).map(s=>n.find(o=>o.column.id===s)).filter(Boolean).map(s=>({...s,position:"right"})),pn(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,r;return e.setColumnPinning(t?hz():(n=(r=e.initialState)==null?void 0:r.columnPinning)!=null?n:hz())},e.getIsSomeColumnsPinned=t=>{var n;const r=e.getState().columnPinning;if(!t){var i,s;return!!((i=r.left)!=null&&i.length||(s=r.right)!=null&&s.length)}return!!((n=r[t])!=null&&n.length)},e.getLeftLeafColumns=hn(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(t,n)=>(n??[]).map(r=>t.find(i=>i.id===r)).filter(Boolean),pn(e.options,"debugColumns")),e.getRightLeafColumns=hn(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(t,n)=>(n??[]).map(r=>t.find(i=>i.id===r)).filter(Boolean),pn(e.options,"debugColumns")),e.getCenterLeafColumns=hn(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r)=>{const i=[...n??[],...r??[]];return t.filter(s=>!i.includes(s.id))},pn(e.options,"debugColumns"))}},xO={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},pz=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),Z3t={getDefaultColumnDef:()=>xO,getInitialState:e=>({columnSizing:{},columnSizingInfo:pz(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:kc("columnSizing",e),onColumnSizingInfoChange:kc("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,r,i;const s=t.getState().columnSizing[e.id];return Math.min(Math.max((n=e.columnDef.minSize)!=null?n:xO.minSize,(r=s??e.columnDef.size)!=null?r:xO.size),(i=e.columnDef.maxSize)!=null?i:xO.maxSize)},e.getStart=hn(n=>[n,t2(t,n),t.getState().columnSizing],(n,r)=>r.slice(0,e.getIndex(n)).reduce((i,s)=>i+s.getSize(),0),pn(t.options,"debugColumns")),e.getAfter=hn(n=>[n,t2(t,n),t.getState().columnSizing],(n,r)=>r.slice(e.getIndex(n)+1).reduce((i,s)=>i+s.getSize(),0),pn(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing(n=>{let{[e.id]:r,...i}=n;return i})},e.getCanResize=()=>{var n,r;return((n=e.columnDef.enableResizing)!=null?n:!0)&&((r=t.options.enableColumnResizing)!=null?r:!0)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let n=0;const r=i=>{if(i.subHeaders.length)i.subHeaders.forEach(r);else{var s;n+=(s=i.column.getSize())!=null?s:0}};return r(e),n},e.getStart=()=>{if(e.index>0){const n=e.headerGroup.headers[e.index-1];return n.getStart()+n.getSize()}return 0},e.getResizeHandler=n=>{const r=t.getColumn(e.column.id),i=r==null?void 0:r.getCanResize();return s=>{if(!r||!i||(s.persist==null||s.persist(),mz(s)&&s.touches&&s.touches.length>1))return;const o=e.getSize(),a=e?e.getLeafHeaders().map(v=>[v.column.id,v.column.getSize()]):[[r.id,r.getSize()]],u=mz(s)?Math.round(s.touches[0].clientX):s.clientX,l={},c=(v,w)=>{typeof w=="number"&&(t.setColumnSizingInfo(x=>{var S,E;const T=t.options.columnResizeDirection==="rtl"?-1:1,A=(w-((S=x==null?void 0:x.startOffset)!=null?S:0))*T,I=Math.max(A/((E=x==null?void 0:x.startSize)!=null?E:0),-.999999);return x.columnSizingStart.forEach(k=>{let[D,M]=k;l[D]=Math.round(Math.max(M+M*I,0)*100)/100}),{...x,deltaOffset:A,deltaPercentage:I}}),(t.options.columnResizeMode==="onChange"||v==="end")&&t.setColumnSizing(x=>({...x,...l})))},d=v=>c("move",v),f=v=>{c("end",v),t.setColumnSizingInfo(w=>({...w,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},h=n||typeof document<"u"?document:null,p={moveHandler:v=>d(v.clientX),upHandler:v=>{h==null||h.removeEventListener("mousemove",p.moveHandler),h==null||h.removeEventListener("mouseup",p.upHandler),f(v.clientX)}},m={moveHandler:v=>(v.cancelable&&(v.preventDefault(),v.stopPropagation()),d(v.touches[0].clientX),!1),upHandler:v=>{var w;h==null||h.removeEventListener("touchmove",m.moveHandler),h==null||h.removeEventListener("touchend",m.upHandler),v.cancelable&&(v.preventDefault(),v.stopPropagation()),f((w=v.touches[0])==null?void 0:w.clientX)}},y=e$t()?{passive:!1}:!1;mz(s)?(h==null||h.addEventListener("touchmove",m.moveHandler,y),h==null||h.addEventListener("touchend",m.upHandler,y)):(h==null||h.addEventListener("mousemove",p.moveHandler,y),h==null||h.addEventListener("mouseup",p.upHandler,y)),t.setColumnSizingInfo(v=>({...v,startOffset:u,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:a,isResizingColumn:r.id}))}}},createTable:e=>{e.setColumnSizing=t=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:(n=e.initialState.columnSizing)!=null?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?pz():(n=e.initialState.columnSizingInfo)!=null?n:pz())},e.getTotalSize=()=>{var t,n;return(t=(n=e.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0},e.getLeftTotalSize=()=>{var t,n;return(t=(n=e.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0},e.getCenterTotalSize=()=>{var t,n;return(t=(n=e.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0},e.getRightTotalSize=()=>{var t,n;return(t=(n=e.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0}}};let EO=null;function e$t(){if(typeof EO=="boolean")return EO;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch{e=!1}return EO=e,EO}function mz(e){return e.type==="touchstart"}const t$t={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:kc("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(r=>({...r,[e.id]:n??!e.getIsVisible()}))},e.getIsVisible=()=>{var n,r;const i=e.columns;return(n=i.length?i.some(s=>s.getIsVisible()):(r=t.getState().columnVisibility)==null?void 0:r[e.id])!=null?n:!0},e.getCanHide=()=>{var n,r;return((n=e.columnDef.enableHiding)!=null?n:!0)&&((r=t.options.enableHiding)!=null?r:!0)},e.getToggleVisibilityHandler=()=>n=>{e.toggleVisibility==null||e.toggleVisibility(n.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=hn(()=>[e.getAllCells(),t.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),pn(t.options,"debugRows")),e.getVisibleCells=hn(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(n,r,i)=>[...n,...r,...i],pn(t.options,"debugRows"))},createTable:e=>{const t=(n,r)=>hn(()=>[r(),r().filter(i=>i.getIsVisible()).map(i=>i.id).join("_")],i=>i.filter(s=>s.getIsVisible==null?void 0:s.getIsVisible()),pn(e.options,"debugColumns"));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=n=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(n),e.resetColumnVisibility=n=>{var r;e.setColumnVisibility(n?{}:(r=e.initialState.columnVisibility)!=null?r:{})},e.toggleAllColumnsVisible=n=>{var r;n=(r=n)!=null?r:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((i,s)=>({...i,[s.id]:n||!(s.getCanHide!=null&&s.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>n=>{var r;e.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}};function t2(e,t){return t?t==="center"?e.getCenterVisibleLeafColumns():t==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const n$t={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},r$t={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:kc("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;const r=(n=e.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[t.id])==null?void 0:n.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,r,i,s;return((n=e.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=t.options.enableGlobalFilter)!=null?r:!0)&&((i=t.options.enableFilters)!=null?i:!0)&&((s=t.options.getColumnCanGlobalFilter==null?void 0:t.options.getColumnCanGlobalFilter(e))!=null?s:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>Dh.includesString,e.getGlobalFilterFn=()=>{var t,n;const{globalFilterFn:r}=e.options;return i4(r)?r:r==="auto"?e.getGlobalAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[r])!=null?t:Dh[r]},e.setGlobalFilter=t=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},i$t={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:kc("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var r,i;if(!t){e._queue(()=>{t=!0});return}if((r=(i=e.options.autoResetAll)!=null?i:e.options.autoResetExpanded)!=null?r:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=r=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(r),e.toggleAllRowsExpanded=r=>{r??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=r=>{var i,s;e.setExpanded(r?{}:(i=(s=e.initialState)==null?void 0:s.expanded)!=null?i:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const r=e.getState().expanded;return r===!0||Object.values(r).some(Boolean)},e.getIsAllRowsExpanded=()=>{const r=e.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||e.getRowModel().flatRows.some(i=>!i.getIsExpanded()))},e.getExpandedDepth=()=>{let r=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(s=>{const o=s.split(".");r=Math.max(r,o.length)}),r},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(r=>{var i;const s=r===!0?!0:!!(r!=null&&r[e.id]);let o={};if(r===!0?Object.keys(t.getRowModel().rowsById).forEach(a=>{o[a]=!0}):o=r,n=(i=n)!=null?i:!s,!s&&n)return{...o,[e.id]:!0};if(s&&!n){const{[e.id]:a,...u}=o;return u}return r})},e.getIsExpanded=()=>{var n;const r=t.getState().expanded;return!!((n=t.options.getIsRowExpanded==null?void 0:t.options.getIsRowExpanded(e))!=null?n:r===!0||r!=null&&r[e.id])},e.getCanExpand=()=>{var n,r,i;return(n=t.options.getRowCanExpand==null?void 0:t.options.getRowCanExpand(e))!=null?n:((r=t.options.enableExpanding)!=null?r:!0)&&!!((i=e.subRows)!=null&&i.length)},e.getIsAllParentsExpanded=()=>{let n=!0,r=e;for(;n&&r.parentId;)r=t.getRow(r.parentId,!0),n=r.getIsExpanded();return n},e.getToggleExpandedHandler=()=>{const n=e.getCanExpand();return()=>{n&&e.toggleExpanded()}}}},zH=0,UH=10,gz=()=>({pageIndex:zH,pageSize:UH}),s$t={getInitialState:e=>({...e,pagination:{...gz(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:kc("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var r,i;if(!t){e._queue(()=>{t=!0});return}if((r=(i=e.options.autoResetAll)!=null?i:e.options.autoResetPageIndex)!=null?r:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=r=>{const i=s=>W0(r,s);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(i)},e.resetPagination=r=>{var i;e.setPagination(r?gz():(i=e.initialState.pagination)!=null?i:gz())},e.setPageIndex=r=>{e.setPagination(i=>{let s=W0(r,i.pageIndex);const o=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return s=Math.max(0,Math.min(s,o)),{...i,pageIndex:s}})},e.resetPageIndex=r=>{var i,s;e.setPageIndex(r?zH:(i=(s=e.initialState)==null||(s=s.pagination)==null?void 0:s.pageIndex)!=null?i:zH)},e.resetPageSize=r=>{var i,s;e.setPageSize(r?UH:(i=(s=e.initialState)==null||(s=s.pagination)==null?void 0:s.pageSize)!=null?i:UH)},e.setPageSize=r=>{e.setPagination(i=>{const s=Math.max(1,W0(r,i.pageSize)),o=i.pageSize*i.pageIndex,a=Math.floor(o/s);return{...i,pageIndex:a,pageSize:s}})},e.setPageCount=r=>e.setPagination(i=>{var s;let o=W0(r,(s=e.options.pageCount)!=null?s:-1);return typeof o=="number"&&(o=Math.max(-1,o)),{...i,pageCount:o}}),e.getPageOptions=hn(()=>[e.getPageCount()],r=>{let i=[];return r&&r>0&&(i=[...new Array(r)].fill(null).map((s,o)=>o)),i},pn(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:r}=e.getState().pagination,i=e.getPageCount();return i===-1?!0:i===0?!1:r<i-1},e.previousPage=()=>e.setPageIndex(r=>r-1),e.nextPage=()=>e.setPageIndex(r=>r+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var r;return(r=e.options.pageCount)!=null?r:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var r;return(r=e.options.rowCount)!=null?r:e.getPrePaginationRowModel().rows.length}}},yz=()=>({top:[],bottom:[]}),o$t={getInitialState:e=>({rowPinning:yz(),...e}),getDefaultOptions:e=>({onRowPinningChange:kc("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,r,i)=>{const s=r?e.getLeafRows().map(u=>{let{id:l}=u;return l}):[],o=i?e.getParentRows().map(u=>{let{id:l}=u;return l}):[],a=new Set([...o,e.id,...s]);t.setRowPinning(u=>{var l,c;if(n==="bottom"){var d,f;return{top:((d=u==null?void 0:u.top)!=null?d:[]).filter(m=>!(a!=null&&a.has(m))),bottom:[...((f=u==null?void 0:u.bottom)!=null?f:[]).filter(m=>!(a!=null&&a.has(m))),...Array.from(a)]}}if(n==="top"){var h,p;return{top:[...((h=u==null?void 0:u.top)!=null?h:[]).filter(m=>!(a!=null&&a.has(m))),...Array.from(a)],bottom:((p=u==null?void 0:u.bottom)!=null?p:[]).filter(m=>!(a!=null&&a.has(m)))}}return{top:((l=u==null?void 0:u.top)!=null?l:[]).filter(m=>!(a!=null&&a.has(m))),bottom:((c=u==null?void 0:u.bottom)!=null?c:[]).filter(m=>!(a!=null&&a.has(m)))}})},e.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:i}=t.options;return typeof r=="function"?r(e):(n=r??i)!=null?n:!0},e.getIsPinned=()=>{const n=[e.id],{top:r,bottom:i}=t.getState().rowPinning,s=n.some(a=>r==null?void 0:r.includes(a)),o=n.some(a=>i==null?void 0:i.includes(a));return s?"top":o?"bottom":!1},e.getPinnedIndex=()=>{var n,r;const i=e.getIsPinned();if(!i)return-1;const s=(n=t._getPinnedRows(i))==null?void 0:n.map(o=>{let{id:a}=o;return a});return(r=s==null?void 0:s.indexOf(e.id))!=null?r:-1}},createTable:e=>{e.setRowPinning=t=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,r;return e.setRowPinning(t?yz():(n=(r=e.initialState)==null?void 0:r.rowPinning)!=null?n:yz())},e.getIsSomeRowsPinned=t=>{var n;const r=e.getState().rowPinning;if(!t){var i,s;return!!((i=r.top)!=null&&i.length||(s=r.bottom)!=null&&s.length)}return!!((n=r[t])!=null&&n.length)},e._getPinnedRows=hn(t=>[e.getRowModel().rows,e.getState().rowPinning[t],t],(t,n,r)=>{var i;return((i=e.options.keepPinnedRows)==null||i?(n??[]).map(o=>{const a=e.getRow(o,!0);return a.getIsAllParentsExpanded()?a:null}):(n??[]).map(o=>t.find(a=>a.id===o))).filter(Boolean).map(o=>({...o,position:r}))},pn(e.options,"debugRows")),e.getTopRows=()=>e._getPinnedRows("top"),e.getBottomRows=()=>e._getPinnedRows("bottom"),e.getCenterRows=hn(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(t,n,r)=>{const i=new Set([...n??[],...r??[]]);return t.filter(s=>!i.has(s.id))},pn(e.options,"debugRows"))}},a$t={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:kc("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:(n=e.initialState.rowSelection)!=null?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=typeof t<"u"?t:!e.getIsAllRowsSelected();const r={...n},i=e.getPreGroupedRowModel().flatRows;return t?i.forEach(s=>{s.getCanSelect()&&(r[s.id]=!0)}):i.forEach(s=>{delete r[s.id]}),r})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{const r=typeof t<"u"?t:!e.getIsAllPageRowsSelected(),i={...n};return e.getRowModel().rows.forEach(s=>{VH(i,s.id,r,!0,e)}),i}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=hn(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?vz(e,n):{rows:[],flatRows:[],rowsById:{}},pn(e.options,"debugTable")),e.getFilteredSelectedRowModel=hn(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?vz(e,n):{rows:[],flatRows:[],rowsById:{}},pn(e.options,"debugTable")),e.getGroupedSelectedRowModel=hn(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?vz(e,n):{rows:[],flatRows:[],rowsById:{}},pn(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let r=!!(t.length&&Object.keys(n).length);return r&&t.some(i=>i.getCanSelect()&&!n[i.id])&&(r=!1),r},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter(i=>i.getCanSelect()),{rowSelection:n}=e.getState();let r=!!t.length;return r&&t.some(i=>!n[i.id])&&(r=!1),r},e.getIsSomeRowsSelected=()=>{var t;const n=Object.keys((t=e.getState().rowSelection)!=null?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:t.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,r)=>{const i=e.getIsSelected();t.setRowSelection(s=>{var o;if(n=typeof n<"u"?n:!i,e.getCanSelect()&&i===n)return s;const a={...s};return VH(a,e.id,n,(o=r==null?void 0:r.selectChildren)!=null?o:!0,t),a})},e.getIsSelected=()=>{const{rowSelection:n}=t.getState();return nZ(e,n)},e.getIsSomeSelected=()=>{const{rowSelection:n}=t.getState();return HH(e,n)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=t.getState();return HH(e,n)==="all"},e.getCanSelect=()=>{var n;return typeof t.options.enableRowSelection=="function"?t.options.enableRowSelection(e):(n=t.options.enableRowSelection)!=null?n:!0},e.getCanSelectSubRows=()=>{var n;return typeof t.options.enableSubRowSelection=="function"?t.options.enableSubRowSelection(e):(n=t.options.enableSubRowSelection)!=null?n:!0},e.getCanMultiSelect=()=>{var n;return typeof t.options.enableMultiRowSelection=="function"?t.options.enableMultiRowSelection(e):(n=t.options.enableMultiRowSelection)!=null?n:!0},e.getToggleSelectedHandler=()=>{const n=e.getCanSelect();return r=>{var i;n&&e.toggleSelected((i=r.target)==null?void 0:i.checked)}}}},VH=(e,t,n,r,i)=>{var s;const o=i.getRow(t,!0);n?(o.getCanMultiSelect()||Object.keys(e).forEach(a=>delete e[a]),o.getCanSelect()&&(e[t]=!0)):delete e[t],r&&(s=o.subRows)!=null&&s.length&&o.getCanSelectSubRows()&&o.subRows.forEach(a=>VH(e,a.id,n,r,i))};function vz(e,t){const n=e.getState().rowSelection,r=[],i={},s=function(o,a){return o.map(u=>{var l;const c=nZ(u,n);if(c&&(r.push(u),i[u.id]=u),(l=u.subRows)!=null&&l.length&&(u={...u,subRows:s(u.subRows)}),c)return u}).filter(Boolean)};return{rows:s(t.rows),flatRows:r,rowsById:i}}function nZ(e,t){var n;return(n=t[e.id])!=null?n:!1}function HH(e,t,n){var r;if(!((r=e.subRows)!=null&&r.length))return!1;let i=!0,s=!1;return e.subRows.forEach(o=>{if(!(s&&!i)&&(o.getCanSelect()&&(nZ(o,t)?s=!0:i=!1),o.subRows&&o.subRows.length)){const a=HH(o,t);a==="all"?s=!0:(a==="some"&&(s=!0),i=!1)}}),i?"all":s?"some":!1}const qH=/([0-9]+)/gm,u$t=(e,t,n)=>TOe(Uy(e.getValue(n)).toLowerCase(),Uy(t.getValue(n)).toLowerCase()),l$t=(e,t,n)=>TOe(Uy(e.getValue(n)),Uy(t.getValue(n))),c$t=(e,t,n)=>rZ(Uy(e.getValue(n)).toLowerCase(),Uy(t.getValue(n)).toLowerCase()),d$t=(e,t,n)=>rZ(Uy(e.getValue(n)),Uy(t.getValue(n))),f$t=(e,t,n)=>{const r=e.getValue(n),i=t.getValue(n);return r>i?1:r<i?-1:0},h$t=(e,t,n)=>rZ(e.getValue(n),t.getValue(n));function rZ(e,t){return e===t?0:e>t?1:-1}function Uy(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function TOe(e,t){const n=e.split(qH).filter(Boolean),r=t.split(qH).filter(Boolean);for(;n.length&&r.length;){const i=n.shift(),s=r.shift(),o=parseInt(i,10),a=parseInt(s,10),u=[o,a].sort();if(isNaN(u[0])){if(i>s)return 1;if(s>i)return-1;continue}if(isNaN(u[1]))return isNaN(o)?-1:1;if(o>a)return 1;if(a>o)return-1}return n.length-r.length}const I1={alphanumeric:u$t,alphanumericCaseSensitive:l$t,text:c$t,textCaseSensitive:d$t,datetime:f$t,basic:h$t},p$t={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:kc("sorting",e),isMultiSortEvent:t=>t.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const i of n){const s=i==null?void 0:i.getValue(e.id);if(Object.prototype.toString.call(s)==="[object Date]")return I1.datetime;if(typeof s=="string"&&(r=!0,s.split(qH).length>1))return I1.alphanumeric}return r?I1.text:I1.basic},e.getAutoSortDir=()=>{const n=t.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(e.id))=="string"?"asc":"desc"},e.getSortingFn=()=>{var n,r;if(!e)throw new Error;return i4(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(n=(r=t.options.sortingFns)==null?void 0:r[e.columnDef.sortingFn])!=null?n:I1[e.columnDef.sortingFn]},e.toggleSorting=(n,r)=>{const i=e.getNextSortingOrder(),s=typeof n<"u"&&n!==null;t.setSorting(o=>{const a=o==null?void 0:o.find(h=>h.id===e.id),u=o==null?void 0:o.findIndex(h=>h.id===e.id);let l=[],c,d=s?n:i==="desc";if(o!=null&&o.length&&e.getCanMultiSort()&&r?a?c="toggle":c="add":o!=null&&o.length&&u!==o.length-1?c="replace":a?c="toggle":c="replace",c==="toggle"&&(s||i||(c="remove")),c==="add"){var f;l=[...o,{id:e.id,desc:d}],l.splice(0,l.length-((f=t.options.maxMultiSortColCount)!=null?f:Number.MAX_SAFE_INTEGER))}else c==="toggle"?l=o.map(h=>h.id===e.id?{...h,desc:d}:h):c==="remove"?l=o.filter(h=>h.id!==e.id):l=[{id:e.id,desc:d}];return l})},e.getFirstSortDir=()=>{var n,r;return((n=(r=e.columnDef.sortDescFirst)!=null?r:t.options.sortDescFirst)!=null?n:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=n=>{var r,i;const s=e.getFirstSortDir(),o=e.getIsSorted();return o?o!==s&&((r=t.options.enableSortingRemoval)==null||r)&&(!(n&&(i=t.options.enableMultiRemove)!=null)||i)?!1:o==="desc"?"asc":"desc":s},e.getCanSort=()=>{var n,r;return((n=e.columnDef.enableSorting)!=null?n:!0)&&((r=t.options.enableSorting)!=null?r:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,r;return(n=(r=e.columnDef.enableMultiSort)!=null?r:t.options.enableMultiSort)!=null?n:!!e.accessorFn},e.getIsSorted=()=>{var n;const r=(n=t.getState().sorting)==null?void 0:n.find(i=>i.id===e.id);return r?r.desc?"desc":"asc":!1},e.getSortIndex=()=>{var n,r;return(n=(r=t.getState().sorting)==null?void 0:r.findIndex(i=>i.id===e.id))!=null?n:-1},e.clearSorting=()=>{t.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==e.id):[])},e.getToggleSortingHandler=()=>{const n=e.getCanSort();return r=>{n&&(r.persist==null||r.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?t.options.isMultiSortEvent==null?void 0:t.options.isMultiSortEvent(r):!1))}}},createTable:e=>{e.setSorting=t=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,r;e.setSorting(t?[]:(n=(r=e.initialState)==null?void 0:r.sorting)!=null?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},m$t=[L3t,t$t,Q3t,J3t,F3t,j3t,n$t,r$t,p$t,K3t,i$t,s$t,o$t,a$t,Z3t];function g$t(e){var t,n;const r=[...m$t,...(t=e._features)!=null?t:[]];let i={_features:r};const s=i._features.reduce((f,h)=>Object.assign(f,h.getDefaultOptions==null?void 0:h.getDefaultOptions(i)),{}),o=f=>i.options.mergeOptions?i.options.mergeOptions(s,f):{...s,...f};let u={...{},...(n=e.initialState)!=null?n:{}};i._features.forEach(f=>{var h;u=(h=f.getInitialState==null?void 0:f.getInitialState(u))!=null?h:u});const l=[];let c=!1;const d={_features:r,options:{...s,...e},initialState:u,_queue:f=>{l.push(f),c||(c=!0,Promise.resolve().then(()=>{for(;l.length;)l.shift()();c=!1}).catch(h=>setTimeout(()=>{throw h})))},reset:()=>{i.setState(i.initialState)},setOptions:f=>{const h=W0(f,i.options);i.options=o(h)},getState:()=>i.options.state,setState:f=>{i.options.onStateChange==null||i.options.onStateChange(f)},_getRowId:(f,h,p)=>{var m;return(m=i.options.getRowId==null?void 0:i.options.getRowId(f,h,p))!=null?m:`${p?[p.id,h].join("."):h}`},getCoreRowModel:()=>(i._getCoreRowModel||(i._getCoreRowModel=i.options.getCoreRowModel(i)),i._getCoreRowModel()),getRowModel:()=>i.getPaginationRowModel(),getRow:(f,h)=>{let p=(h?i.getPrePaginationRowModel():i.getRowModel()).rowsById[f];if(!p&&(p=i.getCoreRowModel().rowsById[f],!p))throw new Error;return p},_getDefaultColumnDef:hn(()=>[i.options.defaultColumn],f=>{var h;return f=(h=f)!=null?h:{},{header:p=>{const m=p.header.column.columnDef;return m.accessorKey?m.accessorKey:m.accessorFn?m.id:null},cell:p=>{var m,y;return(m=(y=p.renderValue())==null||y.toString==null?void 0:y.toString())!=null?m:null},...i._features.reduce((p,m)=>Object.assign(p,m.getDefaultColumnDef==null?void 0:m.getDefaultColumnDef()),{}),...f}},pn(e,"debugColumns")),_getColumnDefs:()=>i.options.columns,getAllColumns:hn(()=>[i._getColumnDefs()],f=>{const h=function(p,m,y){return y===void 0&&(y=0),p.map(v=>{const w=$3t(i,v,y,m),x=v;return w.columns=x.columns?h(x.columns,w,y+1):[],w})};return h(f)},pn(e,"debugColumns")),getAllFlatColumns:hn(()=>[i.getAllColumns()],f=>f.flatMap(h=>h.getFlatColumns()),pn(e,"debugColumns")),_getAllFlatColumnsById:hn(()=>[i.getAllFlatColumns()],f=>f.reduce((h,p)=>(h[p.id]=p,h),{}),pn(e,"debugColumns")),getAllLeafColumns:hn(()=>[i.getAllColumns(),i._getOrderColumnsFn()],(f,h)=>{let p=f.flatMap(m=>m.getLeafColumns());return h(p)},pn(e,"debugColumns")),getColumn:f=>i._getAllFlatColumnsById()[f]};Object.assign(i,d);for(let f=0;f<i._features.length;f++){const h=i._features[f];h==null||h.createTable==null||h.createTable(i)}return i}function y$t(){return e=>hn(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(i,s,o){s===void 0&&(s=0);const a=[];for(let l=0;l<i.length;l++){const c=QR(e,e._getRowId(i[l],l,o),i[l],l,s,void 0,o==null?void 0:o.id);if(n.flatRows.push(c),n.rowsById[c.id]=c,a.push(c),e.options.getSubRows){var u;c.originalSubRows=e.options.getSubRows(i[l],l),(u=c.originalSubRows)!=null&&u.length&&(c.subRows=r(c.originalSubRows,s+1,c))}}return a};return n.rows=r(t),n},pn(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function v$t(){return e=>hn(()=>[e.getState().expanded,e.getPreExpandedRowModel(),e.options.paginateExpandedRows],(t,n,r)=>!n.rows.length||t!==!0&&!Object.keys(t??{}).length||!r?n:COe(n),pn(e.options,"debugTable"))}function COe(e){const t=[],n=r=>{var i;t.push(r),(i=r.subRows)!=null&&i.length&&r.getIsExpanded()&&r.subRows.forEach(n)};return e.rows.forEach(n),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}function b$t(){return(e,t)=>hn(()=>{var n;return[(n=e.getColumn(t))==null?void 0:n.getFacetedRowModel()]},n=>{var r;if(!n)return;const i=(r=n.flatRows[0])==null?void 0:r.getUniqueValues(t);if(typeof i>"u")return;let s=[i,i];for(let o=0;o<n.flatRows.length;o++){const a=n.flatRows[o].getUniqueValues(t);for(let u=0;u<a.length;u++){const l=a[u];l<s[0]?s[0]=l:l>s[1]&&(s[1]=l)}}return s},pn(e.options,"debugTable"))}function AOe(e,t,n){return n.options.filterFromLeafRows?_$t(e,t,n):w$t(e,t,n)}function _$t(e,t,n){var r;const i=[],s={},o=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,a=function(u,l){l===void 0&&(l=0);const c=[];for(let f=0;f<u.length;f++){var d;let h=u[f];const p=QR(n,h.id,h.original,h.index,h.depth,void 0,h.parentId);if(p.columnFilters=h.columnFilters,(d=h.subRows)!=null&&d.length&&l<o){if(p.subRows=a(h.subRows,l+1),h=p,t(h)&&!p.subRows.length){c.push(h),s[h.id]=h,i.push(h);continue}if(t(h)||p.subRows.length){c.push(h),s[h.id]=h,i.push(h);continue}}else h=p,t(h)&&(c.push(h),s[h.id]=h,i.push(h))}return c};return{rows:a(e),flatRows:i,rowsById:s}}function w$t(e,t,n){var r;const i=[],s={},o=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,a=function(u,l){l===void 0&&(l=0);const c=[];for(let f=0;f<u.length;f++){let h=u[f];if(t(h)){var d;if((d=h.subRows)!=null&&d.length&&l<o){const m=QR(n,h.id,h.original,h.index,h.depth,void 0,h.parentId);m.subRows=a(h.subRows,l+1),h=m}c.push(h),i.push(h),s[h.id]=h}}return c};return{rows:a(e),flatRows:i,rowsById:s}}function x$t(){return(e,t)=>hn(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter,e.getFilteredRowModel()],(n,r,i)=>{if(!n.rows.length||!(r!=null&&r.length)&&!i)return n;const s=[...r.map(a=>a.id).filter(a=>a!==t),i?"__global__":void 0].filter(Boolean),o=a=>{for(let u=0;u<s.length;u++)if(a.columnFilters[s[u]]===!1)return!1;return!0};return AOe(n.rows,o,e)},pn(e.options,"debugTable"))}function E$t(){return(e,t)=>hn(()=>{var n;return[(n=e.getColumn(t))==null?void 0:n.getFacetedRowModel()]},n=>{if(!n)return new Map;let r=new Map;for(let s=0;s<n.flatRows.length;s++){const o=n.flatRows[s].getUniqueValues(t);for(let a=0;a<o.length;a++){const u=o[a];if(r.has(u)){var i;r.set(u,((i=r.get(u))!=null?i:0)+1)}else r.set(u,1)}}return r},pn(e.options,"debugTable"))}function S$t(){return e=>hn(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,r)=>{if(!t.rows.length||!(n!=null&&n.length)&&!r){for(let f=0;f<t.flatRows.length;f++)t.flatRows[f].columnFilters={},t.flatRows[f].columnFiltersMeta={};return t}const i=[],s=[];(n??[]).forEach(f=>{var h;const p=e.getColumn(f.id);if(!p)return;const m=p.getFilterFn();m&&i.push({id:f.id,filterFn:m,resolvedValue:(h=m.resolveFilterValue==null?void 0:m.resolveFilterValue(f.value))!=null?h:f.value})});const o=(n??[]).map(f=>f.id),a=e.getGlobalFilterFn(),u=e.getAllLeafColumns().filter(f=>f.getCanGlobalFilter());r&&a&&u.length&&(o.push("__global__"),u.forEach(f=>{var h;s.push({id:f.id,filterFn:a,resolvedValue:(h=a.resolveFilterValue==null?void 0:a.resolveFilterValue(r))!=null?h:r})}));let l,c;for(let f=0;f<t.flatRows.length;f++){const h=t.flatRows[f];if(h.columnFilters={},i.length)for(let p=0;p<i.length;p++){l=i[p];const m=l.id;h.columnFilters[m]=l.filterFn(h,m,l.resolvedValue,y=>{h.columnFiltersMeta[m]=y})}if(s.length){for(let p=0;p<s.length;p++){c=s[p];const m=c.id;if(c.filterFn(h,m,c.resolvedValue,y=>{h.columnFiltersMeta[m]=y})){h.columnFilters.__global__=!0;break}}h.columnFilters.__global__!==!0&&(h.columnFilters.__global__=!1)}}const d=f=>{for(let h=0;h<o.length;h++)if(f.columnFilters[o[h]]===!1)return!1;return!0};return AOe(t.rows,d,e)},pn(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex()))}function T$t(){return e=>hn(()=>[e.getState().grouping,e.getPreGroupedRowModel()],(t,n)=>{if(!n.rows.length||!t.length)return n;const r=t.filter(u=>e.getColumn(u)),i=[],s={},o=function(u,l,c){if(l===void 0&&(l=0),l>=r.length)return u.map(p=>(p.depth=l,i.push(p),s[p.id]=p,p.subRows&&(p.subRows=o(p.subRows,l+1,p.id)),p));const d=r[l],f=C$t(u,d);return Array.from(f.entries()).map((p,m)=>{let[y,v]=p,w=`${d}:${y}`;w=c?`${c}>${w}`:w;const x=o(v,l+1,w),S=l?gOe(v,T=>T.subRows):v,E=QR(e,w,S[0].original,m,l,void 0,c);return Object.assign(E,{groupingColumnId:d,groupingValue:y,subRows:x,leafRows:S,getValue:T=>{if(r.includes(T)){if(E._valuesCache.hasOwnProperty(T))return E._valuesCache[T];if(v[0]){var A;E._valuesCache[T]=(A=v[0].getValue(T))!=null?A:void 0}return E._valuesCache[T]}if(E._groupingValuesCache.hasOwnProperty(T))return E._groupingValuesCache[T];const I=e.getColumn(T),k=I==null?void 0:I.getAggregationFn();if(k)return E._groupingValuesCache[T]=k(T,S,v),E._groupingValuesCache[T]}}),x.forEach(T=>{i.push(T),s[T.id]=T}),E})},a=o(n.rows,0);return a.forEach(u=>{i.push(u),s[u.id]=u}),{rows:a,flatRows:i,rowsById:s}},pn(e.options,"debugTable","getGroupedRowModel",()=>{e._queue(()=>{e._autoResetExpanded(),e._autoResetPageIndex()})}))}function C$t(e,t){const n=new Map;return e.reduce((r,i)=>{const s=`${i.getGroupingValue(t)}`,o=r.get(s);return o?o.push(i):r.set(s,[i]),r},n)}function A$t(e){return t=>hn(()=>[t.getState().pagination,t.getPrePaginationRowModel(),t.options.paginateExpandedRows?void 0:t.getState().expanded],(n,r)=>{if(!r.rows.length)return r;const{pageSize:i,pageIndex:s}=n;let{rows:o,flatRows:a,rowsById:u}=r;const l=i*s,c=l+i;o=o.slice(l,c);let d;t.options.paginateExpandedRows?d={rows:o,flatRows:a,rowsById:u}:d=COe({rows:o,flatRows:a,rowsById:u}),d.flatRows=[];const f=h=>{d.flatRows.push(h),h.subRows.length&&h.subRows.forEach(f)};return d.rows.forEach(f),d},pn(t.options,"debugTable"))}function I$t(){return e=>hn(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||!(t!=null&&t.length))return n;const r=e.getState().sorting,i=[],s=r.filter(u=>{var l;return(l=e.getColumn(u.id))==null?void 0:l.getCanSort()}),o={};s.forEach(u=>{const l=e.getColumn(u.id);l&&(o[u.id]={sortUndefined:l.columnDef.sortUndefined,invertSorting:l.columnDef.invertSorting,sortingFn:l.getSortingFn()})});const a=u=>{const l=u.map(c=>({...c}));return l.sort((c,d)=>{for(let h=0;h<s.length;h+=1){var f;const p=s[h],m=o[p.id],y=m.sortUndefined,v=(f=p==null?void 0:p.desc)!=null?f:!1;let w=0;if(y){const x=c.getValue(p.id),S=d.getValue(p.id),E=x===void 0,T=S===void 0;if(E||T){if(y==="first")return E?-1:1;if(y==="last")return E?1:-1;w=E&&T?0:E?y:-y}}if(w===0&&(w=m.sortingFn(c,d,p.id)),w!==0)return v&&(w*=-1),m.invertSorting&&(w*=-1),w}return c.index-d.index}),l.forEach(c=>{var d;i.push(c),(d=c.subRows)!=null&&d.length&&(c.subRows=a(c.subRows))}),l};return{rows:a(n.rows),flatRows:i,rowsById:n.rowsById}},pn(e.options,"debugTable","getSortedRowModel",()=>e._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function R$t(e){const t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=P.useState(()=>({current:g$t(t)})),[r,i]=P.useState(()=>n.current.initialState);return n.current.setOptions(s=>({...s,...e,state:{...r,...e.state},onStateChange:o=>{i(o),e.onStateChange==null||e.onStateChange(o)}})),n.current}/**
   * match-sorter-utils
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */const IOe={:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"AE",:"A",:"A",:"A",:"C",:"C",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"I",:"I",:"I",:"I",:"I",:"I",:"D",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"U",:"U",:"U",:"U",:"Y",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"ae",:"a",:"a",:"a",:"c",:"c",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"i",:"i",:"i",:"i",:"i",:"i",:"d",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"u",:"u",:"u",:"u",:"y",:"y",:"A",:"a",:"A",:"a",:"A",:"a",:"C",:"c",:"C",:"c",:"C",:"c",:"C",:"c",C:"C",c:"c",:"D",:"d",:"D",:"d",:"E",:"e",:"E",:"e",:"E",:"e",:"E",:"e",:"E",:"e",:"G",:"G",:"g",:"g",:"G",:"g",:"G",:"g",:"G",:"g",:"H",:"h",:"H",:"h",:"H",:"h",:"I",:"i",:"I",:"i",:"I",:"i",:"I",:"i",:"I",:"i",:"IJ",:"ij",:"J",:"j",:"K",:"k",:"K",:"k",K:"K",k:"k",:"L",:"l",:"L",:"l",:"L",:"l",:"L",:"l",:"l",:"l",:"M",:"m",M:"M",m:"m",:"N",:"n",:"N",:"n",:"N",:"n",:"n",N:"N",n:"n",:"O",:"o",:"O",:"o",:"O",:"o",:"OE",:"oe",P:"P",p:"p",:"R",:"r",:"R",:"r",:"R",:"r",R:"R",r:"r",:"R",:"r",:"S",:"s",:"S",:"s",:"S",:"S",:"s",:"s",:"S",:"s",:"T",:"t",:"t",:"T",:"T",:"t",:"T",:"t",T:"T",t:"t",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",V:"V",v:"v",:"W",:"w",:"W",:"w",X:"X",x:"x",:"Y",:"y",:"Y",Y:"Y",y:"y",:"Z",:"z",:"Z",:"z",:"Z",:"z",:"s",:"f",:"O",:"o",:"U",:"u",:"A",:"a",:"I",:"i",:"O",:"o",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"A",:"a",:"AE",:"ae",:"O",:"o",:"TH",:"th",:"P",:"p",:"S",:"s",X:"X",x:"x",:"",:"",:"",:"",A:"A",a:"a",E:"E",e:"e",I:"I",i:"i",:"N",:"n",:"O",:"o",:"O",:"o",:"U",:"u",:"W",:"w",:"Y",:"y",:"A",:"a",:"E",:"e",:"I",:"i",:"O",:"o",:"R",:"r",:"U",:"u",B:"B",b:"b",:"C",:"c",:"E",:"e",F:"F",f:"f",:"G",:"g",:"H",:"h",J:"J",:"j",:"K",:"k",M:"M",m:"m",P:"P",p:"p",Q:"Q",q:"q",:"R",:"r",:"S",:"s",V:"V",v:"v",W:"W",w:"w",X:"X",x:"x",Y:"Y",y:"y",A:"A",a:"a",B:"B",b:"b",:"D",:"d",:"E",:"e",:"E",:"e",:"H",:"h",I:"I",i:"i",:"I",:"i",M:"M",m:"m",O:"O",o:"o",Q:"Q",q:"q",U:"U",u:"u",X:"X",x:"x",Z:"Z",z:"z"},k$t=Object.keys(IOe).join("|"),P$t=new RegExp(k$t,"g");function N$t(e){return e.replace(P$t,t=>IOe[t])}/**
 * @name match-sorter
 * @license MIT license.
 * @copyright (c) 2099 Kent C. Dodds
 * @author Kent C. Dodds <me@kentcdodds.com> (https://kentcdodds.com)
 */const wu={CASE_SENSITIVE_EQUAL:7,EQUAL:6,STARTS_WITH:5,WORD_STARTS_WITH:4,CONTAINS:3,ACRONYM:2,MATCHES:1,NO_MATCH:0};function O$t(e,t,n){var r;if(n=n||{},n.threshold=(r=n.threshold)!=null?r:wu.MATCHES,!n.accessors){const o=Wme(e,t,n);return{rankedValue:e,rank:o,accessorIndex:-1,accessorThreshold:n.threshold,passed:o>=n.threshold}}const i=F$t(e,n.accessors),s={rankedValue:e,rank:wu.NO_MATCH,accessorIndex:-1,accessorThreshold:n.threshold,passed:!1};for(let o=0;o<i.length;o++){const a=i[o];let u=Wme(a.itemValue,t,n);const{minRanking:l,maxRanking:c,threshold:d=n.threshold}=a.attributes;u<l&&u>=wu.MATCHES?u=l:u>c&&(u=c),u=Math.min(u,c),u>=d&&u>s.rank&&(s.rank=u,s.passed=!0,s.accessorIndex=o,s.accessorThreshold=d,s.rankedValue=a.itemValue)}return s}function Wme(e,t,n){return e=Gme(e,n),t=Gme(t,n),t.length>e.length?wu.NO_MATCH:e===t?wu.CASE_SENSITIVE_EQUAL:(e=e.toLowerCase(),t=t.toLowerCase(),e===t?wu.EQUAL:e.startsWith(t)?wu.STARTS_WITH:e.includes(` ${t}`)?wu.WORD_STARTS_WITH:e.includes(t)?wu.CONTAINS:t.length===1?wu.NO_MATCH:D$t(e).includes(t)?wu.ACRONYM:M$t(e,t))}function D$t(e){let t="";return e.split(" ").forEach(r=>{r.split("-").forEach(s=>{t+=s.substr(0,1)})}),t}function M$t(e,t){let n=0,r=0;function i(u,l,c){for(let d=c,f=l.length;d<f;d++)if(l[d]===u)return n+=1,d+1;return-1}function s(u){const l=1/u,c=n/t.length;return wu.MATCHES+c*l}const o=i(t[0],e,0);if(o<0)return wu.NO_MATCH;r=o;for(let u=1,l=t.length;u<l;u++){const c=t[u];if(r=i(c,e,r),!(r>-1))return wu.NO_MATCH}const a=r-o;return s(a)}function $$t(e,t){return e.rank===t.rank?0:e.rank>t.rank?-1:1}function Gme(e,t){let{keepDiacritics:n}=t;return e=`${e}`,n||(e=N$t(e)),e}function L$t(e,t){let n=t;typeof t=="object"&&(n=t.accessor);const r=n(e);return r==null?[]:Array.isArray(r)?r:[String(r)]}function F$t(e,t){const n=[];for(let r=0,i=t.length;r<i;r++){const s=t[r],o=j$t(s),a=L$t(e,s);for(let u=0,l=a.length;u<l;u++)n.push({itemValue:a[u],attributes:o})}return n}const Yme={maxRanking:1/0,minRanking:-1/0};function j$t(e){return typeof e=="function"?Yme:{...Yme,...e}}function lC(e,t,n){let r=n.initialDeps??[],i;return()=>{var s,o,a,u;let l;n.key&&((s=n.debug)!=null&&s.call(n))&&(l=Date.now());const c=e();if(!(c.length!==r.length||c.some((h,p)=>r[p]!==h)))return i;r=c;let f;if(n.key&&((o=n.debug)!=null&&o.call(n))&&(f=Date.now()),i=t(...c),n.key&&((a=n.debug)!=null&&a.call(n))){const h=Math.round((Date.now()-l)*100)/100,p=Math.round((Date.now()-f)*100)/100,m=p/16,y=(v,w)=>{for(v=String(v);v.length<w;)v=" "+v;return v};console.info(`%c ${y(p,5)} /${y(h,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*m,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(u=n==null?void 0:n.onChange)==null||u.call(n,i),i}}function bz(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const B$t=(e,t)=>Math.abs(e-t)<1,z$t=(e,t,n)=>{let r;return function(...i){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,i),n)}},U$t=e=>e,ROe=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let i=t;i<=n;i++)r.push(i);return r},V$t=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const i=o=>{const{width:a,height:u}=o;t({width:Math.round(a),height:Math.round(u)})};if(i(n.getBoundingClientRect()),!r.ResizeObserver)return()=>{};const s=new r.ResizeObserver(o=>{const a=o[0];if(a!=null&&a.borderBoxSize){const u=a.borderBoxSize[0];if(u){i({width:u.inlineSize,height:u.blockSize});return}}i(n.getBoundingClientRect())});return s.observe(n,{box:"border-box"}),()=>{s.unobserve(n)}},Kme={passive:!0},H$t=typeof window>"u"?!0:"onscrollend"in window,q$t=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let i=0;const s=H$t?()=>{}:z$t(r,()=>{t(i,!1)},e.options.isScrollingResetDelay),o=l=>()=>{i=n[e.options.horizontal?"scrollLeft":"scrollTop"],s(),t(i,l)},a=o(!0),u=o(!1);return u(),n.addEventListener("scroll",a,Kme),n.addEventListener("scrollend",u,Kme),()=>{n.removeEventListener("scroll",a),n.removeEventListener("scrollend",u)}},W$t=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[n.options.horizontal?"width":"height"])},G$t=(e,{adjustments:t=0,behavior:n},r)=>{var i,s;const o=e+t;(s=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||s.call(i,{[r.options.horizontal?"left":"top"]:o,behavior:n})};class Y$t{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(s=>{this._measureElement(s.target,s)})}));return{disconnect:()=>{var i;return(i=r())==null?void 0:i.disconnect()},observe:i=>{var s;return(s=r())==null?void 0:s.observe(i,{box:"border-box"})},unobserve:i=>{var s;return(s=r())==null?void 0:s.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:U$t,rangeExtractor:ROe,onChange:()=>{},measureElement:W$t,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,...n}},this.notify=(n,r)=>{var i,s;const{startIndex:o,endIndex:a}=this.range??{startIndex:void 0,endIndex:void 0},u=this.calculateRange();(n||o!==(u==null?void 0:u.startIndex)||a!==(u==null?void 0:u.endIndex))&&((s=(i=this.options).onChange)==null||s.call(i,this,r))},this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.scrollElement=null},this._didMount=()=>(this.measureElementCache.forEach(this.observer.observe),()=>{this.observer.disconnect(),this.cleanup()}),this._willUpdate=()=>{var n;const r=this.options.getScrollElement();this.scrollElement!==r&&(this.cleanup(),this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this._scrollToOffset(this.scrollOffset,{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.notify(!1,!1)})),this.unsubs.push(this.options.observeElementOffset(this,(i,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.scrollOffset<i?"forward":"backward":null,this.scrollOffset=i;const o=this.isScrolling;this.isScrolling=s,this.notify(o!==s,s)})))},this.getSize=()=>this.scrollRect[this.options.horizontal?"width":"height"],this.getMeasurementOptions=lC(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey],(n,r,i,s)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:s}),{key:!1}),this.getFurthestMeasurement=(n,r)=>{const i=new Map,s=new Map;for(let o=r-1;o>=0;o--){const a=n[o];if(i.has(a.lane))continue;const u=s.get(a.lane);if(u==null||a.end>u.end?s.set(a.lane,a):a.end<u.end&&i.set(a.lane,!0),i.size===this.options.lanes)break}return s.size===this.options.lanes?Array.from(s.values()).sort((o,a)=>o.end===a.end?o.index-a.index:o.end-a.end)[0]:void 0},this.getMeasurements=lC(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:s},o)=>{const a=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,a);for(let l=a;l<n;l++){const c=s(l),d=this.options.lanes===1?u[l-1]:this.getFurthestMeasurement(u,l),f=d?d.end+this.options.gap:r+i,h=o.get(c),p=typeof h=="number"?h:this.options.estimateSize(l),m=f+p,y=d?d.lane:l%this.options.lanes;u[l]={index:l,start:f,size:p,end:m,key:c,lane:y}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=lC(()=>[this.getMeasurements(),this.getSize(),this.scrollOffset],(n,r,i)=>this.range=n.length>0&&r>0?K$t({measurements:n,outerSize:r,scrollOffset:i}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=lC(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(n,r,i,s)=>r===null?[]:n({startIndex:r.startIndex,endIndex:r.endIndex,overscan:i,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const i=this.measurementsCache[this.indexFromElement(n)];if(!i||!n.isConnected){this.measureElementCache.forEach((a,u)=>{a===n&&(this.observer.unobserve(n),this.measureElementCache.delete(u))});return}const s=this.measureElementCache.get(i.key);s!==n&&(s&&this.observer.unobserve(s),this.observer.observe(n),this.measureElementCache.set(i.key,n));const o=this.options.measureElement(n,r,this);this.resizeItem(i,o)},this.resizeItem=(n,r)=>{const i=this.itemSizeCache.get(n.key)??n.size,s=r-i;s!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(n,s,this):n.start<this.scrollOffset+this.scrollAdjustments)&&this._scrollToOffset(this.scrollOffset,{adjustments:this.scrollAdjustments+=s,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,r)),this.notify(!0,!1))},this.measureElement=n=>{n&&this._measureElement(n,void 0)},this.getVirtualItems=lC(()=>[this.getIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let s=0,o=n.length;s<o;s++){const a=n[s],u=r[a];i.push(u)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();return bz(r[kOe(0,r.length-1,i=>bz(r[i]).start,n)])},this.getOffsetForAlignment=(n,r)=>{const i=this.getSize();r==="auto"&&(n<=this.scrollOffset?r="start":n>=this.scrollOffset+i?r="end":r="start"),r==="start"?n=n:r==="end"?n=n-i:r==="center"&&(n=n-i/2);const s=this.options.horizontal?"scrollWidth":"scrollHeight",a=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[s]:this.scrollElement[s]:0)-this.getSize();return Math.max(Math.min(a,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=bz(this.getMeasurements()[n]);if(r==="auto")if(i.end>=this.scrollOffset+this.getSize()-this.options.scrollPaddingEnd)r="end";else if(i.start<=this.scrollOffset+this.options.scrollPaddingStart)r="start";else return[this.scrollOffset,r];const s=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(s,r),r]},this.isDynamicMode=()=>this.measureElementCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{n=Math.max(0,Math.min(n,this.options.count-1)),this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const[s,o]=this.getOffsetForIndex(n,r);this._scrollToOffset(s,{adjustments:void 0,behavior:i}),i!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.measureElementCache.has(this.options.getItemKey(n))){const[u]=this.getOffsetForIndex(n,o);B$t(u,this.scrollOffset)||this.scrollToIndex(n,{align:o,behavior:i})}else this.scrollToIndex(n,{align:o,behavior:i})}))},this.scrollBy=(n,{behavior:r}={})=>{this.cancelScrollToIndex(),r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.scrollOffset+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let i;return r.length===0?i=this.options.paddingStart:i=this.options.lanes===1?((n=r[r.length-1])==null?void 0:n.end)??0:Math.max(...r.slice(-this.options.lanes).map(s=>s.end)),i-this.options.scrollMargin+this.options.paddingEnd},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{var n,r;this.itemSizeCache=new Map,(r=(n=this.options).onChange)==null||r.call(n,this,!1)},this.setOptions(t),this.scrollRect=this.options.initialRect,this.scrollOffset=typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(n=>{this.itemSizeCache.set(n.key,n.size)}),this.notify(!1,!1)}}const kOe=(e,t,n,r)=>{for(;e<=t;){const i=(e+t)/2|0,s=n(i);if(s<r)e=i+1;else if(s>r)t=i-1;else return i}return e>0?e-1:0};function K$t({measurements:e,outerSize:t,scrollOffset:n}){const r=e.length-1,s=kOe(0,r,a=>e[a].start,n);let o=s;for(;o<r&&e[o].end<n+t;)o++;return{startIndex:s,endIndex:o}}const X$t=typeof document<"u"?P.useLayoutEffect:P.useEffect;function Q$t(e){const t=P.useReducer(()=>({}),{})[1],n={...e,onChange:(i,s)=>{var o;s?VI.flushSync(t):t(),(o=e.onChange)==null||o.call(e,i,s)}},[r]=P.useState(()=>new Y$t(n));return r.setOptions(n),P.useEffect(()=>r._didMount(),[]),X$t(()=>r._willUpdate()),r}function POe(e){return Q$t({observeElementRect:V$t,observeElementOffset:q$t,scrollToFn:G$t,...e})}var FD={exports:{}},J$t=FD.exports,Xme;function Z$t(){return Xme||(Xme=1,function(e,t){(function(n,r){e.exports=r()})(J$t,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",d="month",f="quarter",h="year",p="date",m="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,w={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var F=["th","st","nd","rd"],B=$%100;return"["+$+(F[(B-20)%10]||F[B]||F[0])+"]"}},x=function($,F,B){var q=String($);return!q||q.length>=F?$:""+Array(F+1-q.length).join(B)+$},S={s:x,z:function($){var F=-$.utcOffset(),B=Math.abs(F),q=Math.floor(B/60),G=B%60;return(F<=0?"+":"-")+x(q,2,"0")+":"+x(G,2,"0")},m:function $(F,B){if(F.date()<B.date())return-$(B,F);var q=12*(B.year()-F.year())+(B.month()-F.month()),G=F.clone().add(q,d),K=B-G<0,L=F.clone().add(q+(K?-1:1),d);return+(-(q+(B-G)/(K?G-L:L-G))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:d,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:f}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},E="en",T={};T[E]=w;var A="$isDayjsObject",I=function($){return $ instanceof z||!(!$||!$[A])},k=function $(F,B,q){var G;if(!F)return E;if(typeof F=="string"){var K=F.toLowerCase();T[K]&&(G=K),B&&(T[K]=B,G=K);var L=F.split("-");if(!G&&L.length>1)return $(L[0])}else{var V=F.name;T[V]=F,G=V}return!q&&G&&(E=G),G||!q&&E},D=function($,F){if(I($))return $.clone();var B=typeof F=="object"?F:{};return B.date=$,B.args=arguments,new z(B)},M=S;M.l=k,M.i=I,M.w=function($,F){return D($,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var z=function(){function $(B){this.$L=k(B.locale,null,!0),this.parse(B),this.$x=this.$x||B.x||{},this[A]=!0}var F=$.prototype;return F.parse=function(B){this.$d=function(q){var G=q.date,K=q.utc;if(G===null)return new Date(NaN);if(M.u(G))return new Date;if(G instanceof Date)return new Date(G);if(typeof G=="string"&&!/Z$/i.test(G)){var L=G.match(y);if(L){var V=L[2]-1||0,X=(L[7]||"0").substring(0,3);return K?new Date(Date.UTC(L[1],V,L[3]||1,L[4]||0,L[5]||0,L[6]||0,X)):new Date(L[1],V,L[3]||1,L[4]||0,L[5]||0,L[6]||0,X)}}return new Date(G)}(B),this.init()},F.init=function(){var B=this.$d;this.$y=B.getFullYear(),this.$M=B.getMonth(),this.$D=B.getDate(),this.$W=B.getDay(),this.$H=B.getHours(),this.$m=B.getMinutes(),this.$s=B.getSeconds(),this.$ms=B.getMilliseconds()},F.$utils=function(){return M},F.isValid=function(){return this.$d.toString()!==m},F.isSame=function(B,q){var G=D(B);return this.startOf(q)<=G&&G<=this.endOf(q)},F.isAfter=function(B,q){return D(B)<this.startOf(q)},F.isBefore=function(B,q){return this.endOf(q)<D(B)},F.$g=function(B,q,G){return M.u(B)?this[q]:this.set(G,B)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(B,q){var G=this,K=!!M.u(q)||q,L=M.p(B),V=function(ce,ge){var se=M.w(G.$u?Date.UTC(G.$y,ge,ce):new Date(G.$y,ge,ce),G);return K?se:se.endOf(l)},X=function(ce,ge){return M.w(G.toDate()[ce].apply(G.toDate("s"),(K?[0,0,0,0]:[23,59,59,999]).slice(ge)),G)},H=this.$W,Q=this.$M,Z=this.$D,ne="set"+(this.$u?"UTC":"");switch(L){case h:return K?V(1,0):V(31,11);case d:return K?V(1,Q):V(0,Q+1);case c:var ue=this.$locale().weekStart||0,le=(H<ue?H+7:H)-ue;return V(K?Z-le:Z+(6-le),Q);case l:case p:return X(ne+"Hours",0);case u:return X(ne+"Minutes",1);case a:return X(ne+"Seconds",2);case o:return X(ne+"Milliseconds",3);default:return this.clone()}},F.endOf=function(B){return this.startOf(B,!1)},F.$set=function(B,q){var G,K=M.p(B),L="set"+(this.$u?"UTC":""),V=(G={},G[l]=L+"Date",G[p]=L+"Date",G[d]=L+"Month",G[h]=L+"FullYear",G[u]=L+"Hours",G[a]=L+"Minutes",G[o]=L+"Seconds",G[s]=L+"Milliseconds",G)[K],X=K===l?this.$D+(q-this.$W):q;if(K===d||K===h){var H=this.clone().set(p,1);H.$d[V](X),H.init(),this.$d=H.set(p,Math.min(this.$D,H.daysInMonth())).$d}else V&&this.$d[V](X);return this.init(),this},F.set=function(B,q){return this.clone().$set(B,q)},F.get=function(B){return this[M.p(B)]()},F.add=function(B,q){var G,K=this;B=Number(B);var L=M.p(q),V=function(Q){var Z=D(K);return M.w(Z.date(Z.date()+Math.round(Q*B)),K)};if(L===d)return this.set(d,this.$M+B);if(L===h)return this.set(h,this.$y+B);if(L===l)return V(1);if(L===c)return V(7);var X=(G={},G[a]=r,G[u]=i,G[o]=n,G)[L]||1,H=this.$d.getTime()+B*X;return M.w(H,this)},F.subtract=function(B,q){return this.add(-1*B,q)},F.format=function(B){var q=this,G=this.$locale();if(!this.isValid())return G.invalidDate||m;var K=B||"YYYY-MM-DDTHH:mm:ssZ",L=M.z(this),V=this.$H,X=this.$m,H=this.$M,Q=G.weekdays,Z=G.months,ne=G.meridiem,ue=function(ge,se,te,Ee){return ge&&(ge[se]||ge(q,K))||te[se].slice(0,Ee)},le=function(ge){return M.s(V%12||12,ge,"0")},ce=ne||function(ge,se,te){var Ee=ge<12?"AM":"PM";return te?Ee.toLowerCase():Ee};return K.replace(v,function(ge,se){return se||function(te){switch(te){case"YY":return String(q.$y).slice(-2);case"YYYY":return M.s(q.$y,4,"0");case"M":return H+1;case"MM":return M.s(H+1,2,"0");case"MMM":return ue(G.monthsShort,H,Z,3);case"MMMM":return ue(Z,H);case"D":return q.$D;case"DD":return M.s(q.$D,2,"0");case"d":return String(q.$W);case"dd":return ue(G.weekdaysMin,q.$W,Q,2);case"ddd":return ue(G.weekdaysShort,q.$W,Q,3);case"dddd":return Q[q.$W];case"H":return String(V);case"HH":return M.s(V,2,"0");case"h":return le(1);case"hh":return le(2);case"a":return ce(V,X,!0);case"A":return ce(V,X,!1);case"m":return String(X);case"mm":return M.s(X,2,"0");case"s":return String(q.$s);case"ss":return M.s(q.$s,2,"0");case"SSS":return M.s(q.$ms,3,"0");case"Z":return L}return null}(ge)||L.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(B,q,G){var K,L=this,V=M.p(q),X=D(B),H=(X.utcOffset()-this.utcOffset())*r,Q=this-X,Z=function(){return M.m(L,X)};switch(V){case h:K=Z()/12;break;case d:K=Z();break;case f:K=Z()/3;break;case c:K=(Q-H)/6048e5;break;case l:K=(Q-H)/864e5;break;case u:K=Q/i;break;case a:K=Q/r;break;case o:K=Q/n;break;default:K=Q}return G?K:M.a(K)},F.daysInMonth=function(){return this.endOf(d).$D},F.$locale=function(){return T[this.$L]},F.locale=function(B,q){if(!B)return this.$L;var G=this.clone(),K=k(B,q,!0);return K&&(G.$L=K),G},F.clone=function(){return M.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},$}(),O=z.prototype;return D.prototype=O,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",d],["$y",h],["$D",p]].forEach(function($){O[$[1]]=function(F){return this.$g(F,$[0],$[1])}}),D.extend=function($,F){return $.$i||($(F,z,D),$.$i=!0),D},D.locale=k,D.isDayjs=I,D.unix=function($){return D(1e3*$)},D.en=T[E],D.Ls=T,D.p={},D})}(FD)),FD.exports}var eLt=Z$t();const zt=su(eLt);function tLt({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>zt(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function nLt({formatter:e,...t}){return(e||tLt)(t)}function rLt({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function NOe({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var u,l,c;const o=rLt({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(l=(u=e.current)==null?void 0:u[o.levelIndex])==null?void 0:l[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?NOe({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function iLt(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function sLt(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function iZ({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=iLt(i.key);if(s){i.preventDefault();const o=sLt(e);NOe({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}function oLt(e,t){if(!e||!t)return t;const n=e.getHours(),r=e.getMinutes(),i=e.getSeconds(),s=e.getMilliseconds(),o=new Date(t);return o.setHours(n),o.setMinutes(r),o.setSeconds(i),o.setMilliseconds(s),o}var jD={exports:{}},aLt=jD.exports,Qme;function uLt(){return Qme||(Qme=1,function(e,t){(function(n,r){e.exports=r()})(aLt,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,u=function(f,h,p){p===void 0&&(p={});var m=new Date(f),y=function(v,w){w===void 0&&(w={});var x=w.timeZoneName||"short",S=v+"|"+x,E=r[S];return E||(E=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:v,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:x}),r[S]=E),E}(h,p);return y.formatToParts(m)},l=function(f,h){for(var p=u(f,h),m=[],y=0;y<p.length;y+=1){var v=p[y],w=v.type,x=v.value,S=n[w];S>=0&&(m[S]=parseInt(x,10))}var E=m[3],T=E===24?0:E,A=m[0]+"-"+m[1]+"-"+m[2]+" "+T+":"+m[4]+":"+m[5]+":000",I=+f;return(o.utc(A).valueOf()-(I-=I%1e3))/6e4},c=s.prototype;c.tz=function(f,h){f===void 0&&(f=a);var p=this.utcOffset(),m=this.toDate(),y=m.toLocaleString("en-US",{timeZone:f}),v=Math.round((m-new Date(y))/1e3/60),w=o(y,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-v,!0);if(h){var x=w.utcOffset();w=w.add(p-x,"minute")}return w.$x.$timezone=f,w},c.offsetName=function(f){var h=this.$x.$timezone||o.tz.guess(),p=u(this.valueOf(),h,{timeZoneName:f}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var d=c.startOf;c.startOf=function(f,h){if(!this.$x||!this.$x.$timezone)return d.call(this,f,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return d.call(p,f,h).tz(this.$x.$timezone,!0)},o.tz=function(f,h,p){var m=p&&h,y=p||h||a,v=l(+o(),y);if(typeof f!="string")return o(f).tz(y);var w=function(T,A,I){var k=T-60*A*1e3,D=l(k,I);if(A===D)return[k,A];var M=l(k-=60*(D-A)*1e3,I);return D===M?[k,D]:[T-60*Math.min(D,M)*1e3,Math.max(D,M)]}(o.utc(f,m).valueOf(),v,y),x=w[0],S=w[1],E=o(x).utcOffset(S);return E.$x.$timezone=y,E},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(f){a=f}}})}(jD)),jD.exports}var lLt=uLt();const cLt=su(lLt);var BD={exports:{}},dLt=BD.exports,Jme;function fLt(){return Jme||(Jme=1,function(e,t){(function(n,r){e.exports=r()})(dLt,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var u=o.prototype;a.utc=function(m){var y={date:m,utc:!0,args:arguments};return new o(y)},u.utc=function(m){var y=a(this.toDate(),{locale:this.$L,utc:!0});return m?y.add(this.utcOffset(),n):y},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),l.call(this,m)};var c=u.init;u.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var d=u.utcOffset;u.utcOffset=function(m,y){var v=this.$utils().u;if(v(m))return this.$u?0:v(this.$offset)?d.call(this):this.$offset;if(typeof m=="string"&&(m=function(E){E===void 0&&(E="");var T=E.match(r);if(!T)return null;var A=(""+T[0]).match(i)||["-",0,0],I=A[0],k=60*+A[1]+ +A[2];return k===0?0:I==="+"?k:-k}(m),m===null))return this;var w=Math.abs(m)<=16?60*m:m,x=this;if(y)return x.$offset=w,x.$u=m===0,x;if(m!==0){var S=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(x=this.local().add(w+S,n)).$offset=w,x.$x.$localOffset=S}else x=this.utc();return x};var f=u.format;u.format=function(m){var y=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return f.call(this,y)},u.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var h=u.toDate;u.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=u.diff;u.diff=function(m,y,v){if(m&&this.$u===m.$u)return p.call(this,m,y,v);var w=this.local(),x=a(m).local();return p.call(w,x,y,v)}}})}(BD)),BD.exports}var hLt=fLt();const pLt=su(hLt);zt.extend(pLt);zt.extend(cLt);function mLt(e,t){return t?zt(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const Zme=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=mLt(e,t);return n==="remove"&&(r*=-1),zt(e).add(r,"minutes").toDate()};function Ym(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>Zme(i,n,e)):Zme(t,n,e)}function gLt({minDate:e,maxDate:t,timezone:n}){const r=Ym("add",new Date,n);return!e&&!t?r:e&&zt(r).isBefore(e)?e:t&&zt(r).isAfter(t)?t:r}const yLt={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"",consistentWeeks:!1},vLt=P.createContext(yLt);function zl(){const e=P.useContext(vLt),t=P.useCallback(o=>o||e.locale,[e.locale]),n=P.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=P.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=P.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=P.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function bLt(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()}  ${r.toISOString()}`:`${n.toISOString()} `:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function sZ({value:e,type:t,name:n,form:r}){return _.jsx("input",{type:"hidden",value:bLt(e,t),name:n,form:r})}sZ.displayName="@mantine/dates/HiddenDatesInput";var OOe={day:"m_396ce5cb"};const _Lt={},wLt=(e,{size:t})=>({day:{"--day-size":wn(t,"day-size")}}),oZ=tt((e,t)=>{const n=$e("Day",_Lt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,date:l,disabled:c,__staticSelector:d,weekend:f,outside:h,selected:p,renderDay:m,inRange:y,firstInRange:v,lastInRange:w,hidden:x,static:S,highlightToday:E,...T}=n,A=Ot({name:d||"Day",classes:OOe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:wLt,rootSelector:"day"}),I=zl();return _.jsx(Ps,{...A("day",{style:x?{display:"none"}:void 0}),component:S?"div":"button",ref:t,disabled:c,"data-today":zt(l).isSame(Ym("add",new Date,I.getTimezone()),"day")||void 0,"data-hidden":x||void 0,"data-highlight-today":E||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&f||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":y&&!c||void 0,"data-first-in-range":v&&!c||void 0,"data-last-in-range":w&&!c||void 0,"data-static":S||void 0,unstyled:a,...T,children:(m==null?void 0:m(l))||l.getDate()})});oZ.classes=OOe;oZ.displayName="@mantine/dates/Day";function xLt({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=zt().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(zt(r).add(s,"days").locale(e).format(t)):i.push(t(zt(r).add(s,"days").toDate()));return i}var DOe={weekday:"m_18a3eca"};const ELt={},SLt=(e,{size:t})=>({weekdaysRow:{"--wr-fz":Io(t),"--wr-spacing":Cl(t)}}),aZ=tt((e,t)=>{const n=$e("WeekdaysRow",ELt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,locale:l,firstDayOfWeek:c,weekdayFormat:d,cellComponent:f="th",__staticSelector:h,...p}=n,m=Ot({name:h||"WeekdaysRow",classes:DOe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:SLt,rootSelector:"weekdaysRow"}),y=zl(),v=xLt({locale:y.getLocale(l),format:d,firstDayOfWeek:y.getFirstDayOfWeek(c)}).map((w,x)=>_.jsx(f,{...m("weekday"),children:w},x));return _.jsx(ke,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:v})});aZ.classes=DOe;aZ.displayName="@mantine/dates/WeekdaysRow";function TLt(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function CLt(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function ALt({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=TLt(s,t),a=CLt(i,t),u=[];for(;a<=o;){const l=[];for(let c=0;c<7;c+=1)l.push(new Date(a)),a.setDate(a.getDate()+1);u.push(l)}if(n&&u.length<6){const l=u[u.length-1],c=l[l.length-1],d=new Date(c);for(d.setDate(d.getDate()+1);u.length<6;){const f=[];for(let h=0;h<7;h+=1)f.push(new Date(d)),d.setDate(d.getDate()+1);u.push(f)}}return u}function MOe(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function $Oe(e,t){return t instanceof Date?zt(e).isAfter(zt(t).subtract(1,"day"),"day"):!0}function LOe(e,t){return t instanceof Date?zt(e).isBefore(zt(t).add(1,"day"),"day"):!0}function ILt(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var d;return LOe(c,n)&&$Oe(c,t)&&!(i!=null&&i(c))&&!((d=r==null?void 0:r(c))!=null&&d.disabled)&&(!s||MOe(c,o))}),u=a.find(c=>{var d;return(d=r==null?void 0:r(c))==null?void 0:d.selected});if(u)return u;const l=a.find(c=>zt().isSame(c,"date"));return l||a[0]}var FOe={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const RLt={withCellSpacing:!0},s4=tt((e,t)=>{const n=$e("Month",RLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,locale:c,firstDayOfWeek:d,weekdayFormat:f,month:h,weekendDays:p,getDayProps:m,excludeDate:y,minDate:v,maxDate:w,renderDay:x,hideOutsideDates:S,hideWeekdays:E,getDayAriaLabel:T,static:A,__getDayRef:I,__onDayKeyDown:k,__onDayClick:D,__onDayMouseEnter:M,__preventFocus:z,__stopPropagation:O,withCellSpacing:$,size:F,highlightToday:B,...q}=n,G=Ot({name:l||"Month",classes:FOe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"month"}),K=zl(),L=ALt({month:h,firstDayOfWeek:K.getFirstDayOfWeek(d),consistentWeeks:K.consistentWeeks}),V=ILt(L,v,w,m,y,S,h),{resolvedClassNames:X,resolvedStyles:H}=Np({classNames:r,styles:o,props:n}),Q=L.map((Z,ne)=>{const ue=Z.map((le,ce)=>{const ge=!MOe(le,h),se=(T==null?void 0:T(le))||zt(le).locale(c||K.locale).format("D MMMM YYYY"),te=m==null?void 0:m(le),Ee=zt(le).isSame(V,"date");return _.jsx("td",{...G("monthCell"),"data-with-spacing":$||void 0,children:_.jsx(oZ,{__staticSelector:l||"Month",classNames:X,styles:H,unstyled:a,"data-mantine-stop-propagation":O||void 0,highlightToday:B,renderDay:x,date:le,size:F,weekend:K.getWeekendDays(p).includes(le.getDay()),outside:ge,hidden:S?ge:!1,"aria-label":se,static:A,disabled:(y==null?void 0:y(le))||!LOe(le,w)||!$Oe(le,v),ref:we=>I==null?void 0:I(ne,ce,we),...te,onKeyDown:we=>{var De;(De=te==null?void 0:te.onKeyDown)==null||De.call(te,we),k==null||k(we,{rowIndex:ne,cellIndex:ce,date:le})},onMouseEnter:we=>{var De;(De=te==null?void 0:te.onMouseEnter)==null||De.call(te,we),M==null||M(we,le)},onClick:we=>{var De;(De=te==null?void 0:te.onClick)==null||De.call(te,we),D==null||D(we,le)},onMouseDown:we=>{var De;(De=te==null?void 0:te.onMouseDown)==null||De.call(te,we),z&&we.preventDefault()},tabIndex:z||!Ee?-1:0})},le.toString())});return _.jsx("tr",{...G("monthRow"),children:ue},ne)});return _.jsxs(ke,{component:"table",...G("month"),size:F,ref:t,...q,children:[!E&&_.jsx("thead",{...G("monthThead"),children:_.jsx(aZ,{__staticSelector:l||"Month",locale:c,firstDayOfWeek:d,weekdayFormat:f,size:F,classNames:X,styles:H,unstyled:a})}),_.jsx("tbody",{...G("monthTbody"),children:Q})]})});s4.classes=FOe;s4.displayName="@mantine/dates/Month";var jOe={pickerControl:"m_dc6a3c71"};const kLt={},PLt=(e,{size:t})=>({pickerControl:{"--dpc-fz":Io(t),"--dpc-size":wn(t,"dpc-size")}}),o4=tt((e,t)=>{const n=$e("PickerControl",kLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,firstInRange:l,lastInRange:c,inRange:d,__staticSelector:f,selected:h,disabled:p,...m}=n,y=Ot({name:f||"PickerControl",classes:jOe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:PLt,rootSelector:"pickerControl"});return _.jsx(Ps,{...y("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":d&&!p&&!h||void 0,"data-first-in-range":l&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});o4.classes=jOe;o4.displayName="@mantine/dates/PickerControl";function BOe(e,t,n){return!t&&!n?!1:!!(t&&zt(e).isBefore(t,"year")||n&&zt(e).isAfter(n,"year"))}function NLt(e,t,n,r){const i=e.flat().filter(a=>{var u;return!BOe(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>zt().isSame(a,"year"));return o||i[0]}function zOe(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var UOe={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const OLt={yearsListFormat:"YYYY",withCellSpacing:!0},a4=tt((e,t)=>{const n=$e("YearsList",OLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,decade:l,yearsListFormat:c,locale:d,minDate:f,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:y,__onControlKeyDown:v,__onControlClick:w,__onControlMouseEnter:x,__preventFocus:S,__stopPropagation:E,withCellSpacing:T,size:A,...I}=n,k=Ot({name:m||"YearsList",classes:UOe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"yearsList"}),D=zl(),M=zOe(l),z=NLt(M,f,h,p),O=M.map(($,F)=>{const B=$.map((q,G)=>{const K=p==null?void 0:p(q),L=zt(q).isSame(z,"year");return _.jsx("td",{...k("yearsListCell"),"data-with-spacing":T||void 0,children:_.jsx(o4,{...k("yearsListControl"),size:A,unstyled:a,"data-mantine-stop-propagation":E||void 0,disabled:BOe(q,f,h),ref:V=>y==null?void 0:y(F,G,V),...K,onKeyDown:V=>{var X;(X=K==null?void 0:K.onKeyDown)==null||X.call(K,V),v==null||v(V,{rowIndex:F,cellIndex:G,date:q})},onClick:V=>{var X;(X=K==null?void 0:K.onClick)==null||X.call(K,V),w==null||w(V,q)},onMouseEnter:V=>{var X;(X=K==null?void 0:K.onMouseEnter)==null||X.call(K,V),x==null||x(V,q)},onMouseDown:V=>{var X;(X=K==null?void 0:K.onMouseDown)==null||X.call(K,V),S&&V.preventDefault()},tabIndex:S||!L?-1:0,children:zt(q).locale(D.getLocale(d)).format(c)})},G)});return _.jsx("tr",{...k("yearsListRow"),children:B},F)});return _.jsx(ke,{component:"table",ref:t,size:A,...k("yearsList"),...I,children:_.jsx("tbody",{children:O})})});a4.classes=UOe;a4.displayName="@mantine/dates/YearsList";function VOe(e,t,n){return!t&&!n?!1:!!(t&&zt(e).isBefore(t,"month")||n&&zt(e).isAfter(n,"month"))}function DLt(e,t,n,r){const i=e.flat().filter(a=>{var u;return!VOe(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>zt().isSame(a,"month"));return o||i[0]}function MLt(e){const t=zt(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(zt(t).add(r,"months").toDate()),r+=1;return n}var HOe={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const $Lt={monthsListFormat:"MMM",withCellSpacing:!0},u4=tt((e,t)=>{const n=$e("MonthsList",$Lt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,year:c,monthsListFormat:d,locale:f,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:y,__onControlKeyDown:v,__onControlClick:w,__onControlMouseEnter:x,__preventFocus:S,__stopPropagation:E,withCellSpacing:T,size:A,...I}=n,k=Ot({name:l||"MonthsList",classes:HOe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"monthsList"}),D=zl(),M=MLt(c),z=DLt(M,h,p,m),O=M.map(($,F)=>{const B=$.map((q,G)=>{const K=m==null?void 0:m(q),L=zt(q).isSame(z,"month");return _.jsx("td",{...k("monthsListCell"),"data-with-spacing":T||void 0,children:_.jsx(o4,{...k("monthsListControl"),size:A,unstyled:a,__staticSelector:l||"MonthsList","data-mantine-stop-propagation":E||void 0,disabled:VOe(q,h,p),ref:V=>y==null?void 0:y(F,G,V),...K,onKeyDown:V=>{var X;(X=K==null?void 0:K.onKeyDown)==null||X.call(K,V),v==null||v(V,{rowIndex:F,cellIndex:G,date:q})},onClick:V=>{var X;(X=K==null?void 0:K.onClick)==null||X.call(K,V),w==null||w(V,q)},onMouseEnter:V=>{var X;(X=K==null?void 0:K.onMouseEnter)==null||X.call(K,V),x==null||x(V,q)},onMouseDown:V=>{var X;(X=K==null?void 0:K.onMouseDown)==null||X.call(K,V),S&&V.preventDefault()},tabIndex:S||!L?-1:0,children:zt(q).locale(D.getLocale(f)).format(d)})},G)});return _.jsx("tr",{...k("monthsListRow"),children:B},F)});return _.jsx(ke,{component:"table",ref:t,size:A,...k("monthsList"),...I,children:_.jsx("tbody",{children:O})})});u4.classes=HOe;u4.displayName="@mantine/dates/MonthsList";var qOe={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const LLt={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},FLt=(e,{size:t})=>({calendarHeader:{"--dch-control-size":wn(t,"dch-control-size"),"--dch-fz":Io(t)}}),wv=tt((e,t)=>{const n=$e("CalendarHeader",LLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,nextIcon:l,previousIcon:c,nextLabel:d,previousLabel:f,onNext:h,onPrevious:p,onLevelClick:m,label:y,nextDisabled:v,previousDisabled:w,hasNextLevel:x,levelControlAriaLabel:S,withNext:E,withPrevious:T,__staticSelector:A,__preventFocus:I,__stopPropagation:k,...D}=n,M=Ot({name:A||"CalendarHeader",classes:qOe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:FLt,rootSelector:"calendarHeader"}),z=I?O=>O.preventDefault():void 0;return _.jsxs(ke,{...M("calendarHeader"),ref:t,...D,children:[T&&_.jsx(Ps,{...M("calendarHeaderControl"),"data-direction":"previous","aria-label":f,onClick:p,unstyled:a,onMouseDown:z,disabled:w,"data-disabled":w||void 0,tabIndex:I||w?-1:0,"data-mantine-stop-propagation":k||void 0,children:c||_.jsx(Hx,{...M("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),_.jsx(Ps,{component:x?"button":"div",...M("calendarHeaderLevel"),onClick:x?m:void 0,unstyled:a,onMouseDown:x?z:void 0,disabled:!x,"data-static":!x||void 0,"aria-label":S,tabIndex:I||!x?-1:0,"data-mantine-stop-propagation":k||void 0,children:y}),E&&_.jsx(Ps,{...M("calendarHeaderControl"),"data-direction":"next","aria-label":d,onClick:h,unstyled:a,onMouseDown:z,disabled:v,"data-disabled":v||void 0,tabIndex:I||v?-1:0,"data-mantine-stop-propagation":k||void 0,children:l||_.jsx(Hx,{...M("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});wv.classes=qOe;wv.displayName="@mantine/dates/CalendarHeader";function jLt(e){const t=zOe(e);return[t[0][0],t[3][0]]}const BLt={decadeLabelFormat:"YYYY"},l4=tt((e,t)=>{const n=$e("DecadeLevel",BLt,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:d,__onControlMouseEnter:f,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:y,nextLabel:v,previousLabel:w,onNext:x,onPrevious:S,nextDisabled:E,previousDisabled:T,levelControlAriaLabel:A,withNext:I,withPrevious:k,decadeLabelFormat:D,classNames:M,styles:z,unstyled:O,__staticSelector:$,__stopPropagation:F,size:B,...q}=n,G=zl(),[K,L]=jLt(r),V={__staticSelector:$||"DecadeLevel",classNames:M,styles:z,unstyled:O,size:B},X=typeof E=="boolean"?E:o?!zt(L).endOf("year").isBefore(o):!1,H=typeof T=="boolean"?T:s?!zt(K).startOf("year").isAfter(s):!1,Q=(Z,ne)=>zt(Z).locale(i||G.locale).format(ne);return _.jsxs(ke,{"data-decade-level":!0,size:B,ref:t,...q,children:[_.jsx(wv,{label:typeof D=="function"?D(K,L):`${Q(K,D)}  ${Q(L,D)}`,__preventFocus:p,__stopPropagation:F,nextIcon:m,previousIcon:y,nextLabel:v,previousLabel:w,onNext:x,onPrevious:S,nextDisabled:X,previousDisabled:H,hasNextLevel:!1,levelControlAriaLabel:A,withNext:I,withPrevious:k,...V}),_.jsx(a4,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:d,__onControlMouseEnter:f,__preventFocus:p,__stopPropagation:F,withCellSpacing:h,...V})]})});l4.classes={...a4.classes,...wv.classes};l4.displayName="@mantine/dates/DecadeLevel";const zLt={yearLabelFormat:"YYYY"},c4=tt((e,t)=>{const n=$e("YearLevel",zLt,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:d,__onControlMouseEnter:f,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:y,nextLabel:v,previousLabel:w,onNext:x,onPrevious:S,onLevelClick:E,nextDisabled:T,previousDisabled:A,hasNextLevel:I,levelControlAriaLabel:k,withNext:D,withPrevious:M,yearLabelFormat:z,__staticSelector:O,__stopPropagation:$,size:F,classNames:B,styles:q,unstyled:G,...K}=n,L=zl(),V={__staticSelector:O||"YearLevel",classNames:B,styles:q,unstyled:G,size:F},X=typeof T=="boolean"?T:o?!zt(r).endOf("year").isBefore(o):!1,H=typeof A=="boolean"?A:s?!zt(r).startOf("year").isAfter(s):!1;return _.jsxs(ke,{"data-year-level":!0,size:F,ref:t,...K,children:[_.jsx(wv,{label:typeof z=="function"?z(r):zt(r).locale(i||L.locale).format(z),__preventFocus:p,__stopPropagation:$,nextIcon:m,previousIcon:y,nextLabel:v,previousLabel:w,onNext:x,onPrevious:S,onLevelClick:E,nextDisabled:X,previousDisabled:H,hasNextLevel:I,levelControlAriaLabel:k,withNext:D,withPrevious:M,...V}),_.jsx(u4,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:d,__onControlMouseEnter:f,__preventFocus:p,__stopPropagation:$,withCellSpacing:h,...V})]})});c4.classes={...wv.classes,...u4.classes};c4.displayName="@mantine/dates/YearLevel";const ULt={monthLabelFormat:"MMMM YYYY"},d4=tt((e,t)=>{const n=$e("MonthLevel",ULt,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:d,renderDay:f,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:y,__onDayKeyDown:v,__onDayClick:w,__onDayMouseEnter:x,withCellSpacing:S,highlightToday:E,__preventFocus:T,__stopPropagation:A,nextIcon:I,previousIcon:k,nextLabel:D,previousLabel:M,onNext:z,onPrevious:O,onLevelClick:$,nextDisabled:F,previousDisabled:B,hasNextLevel:q,levelControlAriaLabel:G,withNext:K,withPrevious:L,monthLabelFormat:V,classNames:X,styles:H,unstyled:Q,__staticSelector:Z,size:ne,static:ue,...le}=n,ce=zl(),ge={__staticSelector:Z||"MonthLevel",classNames:X,styles:H,unstyled:Q,size:ne},se=typeof F=="boolean"?F:d?!zt(r).endOf("month").isBefore(d):!1,te=typeof B=="boolean"?B:c?!zt(r).startOf("month").isAfter(c):!1;return _.jsxs(ke,{"data-month-level":!0,size:ne,ref:t,...le,children:[_.jsx(wv,{label:typeof V=="function"?V(r):zt(r).locale(i||ce.locale).format(V),__preventFocus:T,__stopPropagation:A,nextIcon:I,previousIcon:k,nextLabel:D,previousLabel:M,onNext:z,onPrevious:O,onLevelClick:$,nextDisabled:se,previousDisabled:te,hasNextLevel:q,levelControlAriaLabel:G,withNext:K,withPrevious:L,...ge}),_.jsx(s4,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:d,renderDay:f,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:y,__onDayKeyDown:v,__onDayClick:w,__onDayMouseEnter:x,__preventFocus:T,__stopPropagation:A,static:ue,withCellSpacing:S,highlightToday:E,...ge})]})});d4.classes={...s4.classes,...wv.classes};d4.displayName="@mantine/dates/MonthLevel";var WOe={levelsGroup:"m_30b26e33"};const VLt={},xv=tt((e,t)=>{const n=$e("LevelsGroup",VLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,...c}=n,d=Ot({name:l||"LevelsGroup",classes:WOe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"levelsGroup"});return _.jsx(ke,{ref:t,...d("levelsGroup"),...c})});xv.classes=WOe;xv.displayName="@mantine/dates/LevelsGroup";const HLt={numberOfColumns:1},f4=tt((e,t)=>{const n=$e("DecadeLevelGroup",HLt,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:d,__preventFocus:f,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:y,onNext:v,onPrevious:w,nextDisabled:x,previousDisabled:S,classNames:E,styles:T,unstyled:A,__staticSelector:I,__stopPropagation:k,numberOfColumns:D,levelControlAriaLabel:M,decadeLabelFormat:z,size:O,vars:$,...F}=n,B=P.useRef([]),q=Array(D).fill(0).map((G,K)=>{const L=zt(r).add(K*10,"years").toDate();return _.jsx(l4,{size:O,yearsListFormat:a,decade:L,withNext:K===D-1,withPrevious:K===0,decadeLabelFormat:z,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(V,X)=>iZ({levelIndex:K,rowIndex:X.rowIndex,cellIndex:X.cellIndex,event:V,controlsRef:B}),__getControlRef:(V,X,H)=>{Array.isArray(B.current[K])||(B.current[K]=[]),Array.isArray(B.current[K][V])||(B.current[K][V]=[]),B.current[K][V][X]=H},levelControlAriaLabel:typeof M=="function"?M(L):M,locale:i,minDate:s,maxDate:o,__preventFocus:f,__stopPropagation:k,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:y,onNext:v,onPrevious:w,nextDisabled:x,previousDisabled:S,getYearControlProps:u,__staticSelector:I||"DecadeLevelGroup",classNames:E,styles:T,unstyled:A,withCellSpacing:d},K)});return _.jsx(xv,{classNames:E,styles:T,__staticSelector:I||"DecadeLevelGroup",ref:t,size:O,unstyled:A,...F,children:q})});f4.classes={...xv.classes,...l4.classes};f4.displayName="@mantine/dates/DecadeLevelGroup";const qLt={numberOfColumns:1},h4=tt((e,t)=>{const n=$e("YearLevelGroup",qLt,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:d,__preventFocus:f,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:y,onNext:v,onPrevious:w,onLevelClick:x,nextDisabled:S,previousDisabled:E,hasNextLevel:T,classNames:A,styles:I,unstyled:k,__staticSelector:D,__stopPropagation:M,numberOfColumns:z,levelControlAriaLabel:O,yearLabelFormat:$,size:F,vars:B,...q}=n,G=P.useRef([]),K=Array(z).fill(0).map((L,V)=>{const X=zt(r).add(V,"years").toDate();return _.jsx(c4,{size:F,monthsListFormat:a,year:X,withNext:V===z-1,withPrevious:V===0,yearLabelFormat:$,__stopPropagation:M,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(H,Q)=>iZ({levelIndex:V,rowIndex:Q.rowIndex,cellIndex:Q.cellIndex,event:H,controlsRef:G}),__getControlRef:(H,Q,Z)=>{Array.isArray(G.current[V])||(G.current[V]=[]),Array.isArray(G.current[V][H])||(G.current[V][H]=[]),G.current[V][H][Q]=Z},levelControlAriaLabel:typeof O=="function"?O(X):O,locale:i,minDate:s,maxDate:o,__preventFocus:f,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:y,onNext:v,onPrevious:w,onLevelClick:x,nextDisabled:S,previousDisabled:E,hasNextLevel:T,getMonthControlProps:u,classNames:A,styles:I,unstyled:k,__staticSelector:D||"YearLevelGroup",withCellSpacing:d},V)});return _.jsx(xv,{classNames:A,styles:I,__staticSelector:D||"YearLevelGroup",ref:t,size:F,unstyled:k,...q,children:K})});h4.classes={...c4.classes,...xv.classes};h4.displayName="@mantine/dates/YearLevelGroup";const WLt={numberOfColumns:1},p4=tt((e,t)=>{const n=$e("MonthLevelGroup",WLt,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:d,renderDay:f,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:y,__onDayMouseEnter:v,withCellSpacing:w,highlightToday:x,__preventFocus:S,nextIcon:E,previousIcon:T,nextLabel:A,previousLabel:I,onNext:k,onPrevious:D,onLevelClick:M,nextDisabled:z,previousDisabled:O,hasNextLevel:$,classNames:F,styles:B,unstyled:q,numberOfColumns:G,levelControlAriaLabel:K,monthLabelFormat:L,__staticSelector:V,__stopPropagation:X,size:H,static:Q,vars:Z,...ne}=n,ue=P.useRef([]),le=Array(G).fill(0).map((ce,ge)=>{const se=zt(r).add(ge,"months").toDate();return _.jsx(d4,{month:se,withNext:ge===G-1,withPrevious:ge===0,monthLabelFormat:L,__stopPropagation:X,__onDayClick:y,__onDayMouseEnter:v,__onDayKeyDown:(te,Ee)=>iZ({levelIndex:ge,rowIndex:Ee.rowIndex,cellIndex:Ee.cellIndex,event:te,controlsRef:ue}),__getDayRef:(te,Ee,we)=>{Array.isArray(ue.current[ge])||(ue.current[ge]=[]),Array.isArray(ue.current[ge][te])||(ue.current[ge][te]=[]),ue.current[ge][te][Ee]=we},levelControlAriaLabel:typeof K=="function"?K(se):K,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:d,renderDay:f,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:S,nextIcon:E,previousIcon:T,nextLabel:A,previousLabel:I,onNext:k,onPrevious:D,onLevelClick:M,nextDisabled:z,previousDisabled:O,hasNextLevel:$,classNames:F,styles:B,unstyled:q,__staticSelector:V||"MonthLevelGroup",size:H,static:Q,withCellSpacing:w,highlightToday:x},ge)});return _.jsx(xv,{classNames:F,styles:B,__staticSelector:V||"MonthLevelGroup",ref:t,size:H,...ne,children:le})});p4.classes={...xv.classes,...d4.classes};p4.displayName="@mantine/dates/MonthLevelGroup";var GOe={input:"m_6fa5e2aa"};const GLt={},m4=tt((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:u,modalProps:l,dropdownType:c,children:d,formattedValue:f,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:y,onClear:v,clearButtonProps:w,rightSection:x,shouldClear:S,readOnly:E,disabled:T,value:A,name:I,form:k,type:D,...M}=dG("PickerInputBase",GLt,e),z=x||(y&&S&&!E&&!T?_.jsx(Sg,{variant:"transparent",onClick:v,unstyled:a,size:n.size||"sm",...w}):null),O=()=>{D==="range"&&Array.isArray(A)&&A[0]&&!A[1]&&v(),h.close()};return _.jsxs(_.Fragment,{children:[c==="modal"&&!E&&_.jsx(zs,{opened:p,onClose:O,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...l,children:d}),_.jsx(Ti.Wrapper,{...r,children:_.jsxs(Ln,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...u,disabled:(u==null?void 0:u.disabled)||c==="modal"||E,onClose:()=>{var $;($=u==null?void 0:u.onClose)==null||$.call(u),O()},children:[_.jsx(Ln.Target,{children:_.jsx(Ti,{"aria-label":f||i,"data-dates-input":!0,"data-read-only":E||void 0,disabled:T,component:"button",type:"button",multiline:!0,onClick:$=>{m==null||m($),h.toggle()},rightSection:z,...n,ref:t,classNames:{...s,input:Dt(GOe.input,s==null?void 0:s.input)},...M,children:f||_.jsx(Ti.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),_.jsx(Ln.Dropdown,{"data-dates-dropdown":!0,children:d})]})}),_.jsx(sZ,{value:A,name:I,form:k,type:D})]})});m4.classes=GOe;m4.displayName="@mantine/dates/PickerInputBase";const ege=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function vI({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=P.useRef(e),o=zl(),[a,u,l]=gs({value:Ym("add",t,o.getTimezone(),!i),defaultValue:Ym("add",n,o.getTimezone(),!i),finalValue:ege(e),onChange:d=>{r==null||r(Ym("remove",d,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:ege(e),u(c))),[c,u,l]}function _z(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function YLt(e){return e===0?"month":e===1?"year":"decade"}function cC(e,t,n){return YLt(fd(_z(e,0),_z(t,0),_z(n,2)))}const KLt={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},zS=tt((e,t)=>{const n=$e("Calendar",KLt,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:u,date:l,defaultDate:c,onDateChange:d,numberOfColumns:f,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:y,onYearMouseEnter:v,onMonthMouseEnter:w,__updateDateOnYearSelect:x,__updateDateOnMonthSelect:S,firstDayOfWeek:E,weekdayFormat:T,weekendDays:A,getDayProps:I,excludeDate:k,renderDay:D,hideOutsideDates:M,hideWeekdays:z,getDayAriaLabel:O,monthLabelFormat:$,nextIcon:F,previousIcon:B,__onDayClick:q,__onDayMouseEnter:G,withCellSpacing:K,highlightToday:L,monthsListFormat:V,getMonthControlProps:X,yearLabelFormat:H,yearsListFormat:Q,getYearControlProps:Z,decadeLabelFormat:ne,classNames:ue,styles:le,unstyled:ce,minDate:ge,maxDate:se,locale:te,__staticSelector:Ee,size:we,__preventFocus:De,__stopPropagation:Le,onNextDecade:Ne,onPreviousDecade:Te,onNextYear:qe,onPreviousYear:Qe,onNextMonth:Ue,onPreviousMonth:Ve,static:Se,__timezoneApplied:it,...It}=n,{resolvedClassNames:Re,resolvedStyles:Ge}=Np({classNames:ue,styles:le,props:n}),[ot,ct]=gs({value:a?cC(a,s,i):void 0,defaultValue:o?cC(o,s,i):void 0,finalValue:cC(void 0,s,i),onChange:u}),[Mt,Nn]=vI({type:"default",value:l,defaultValue:c,onChange:d,applyTimezone:!it}),Rr={__staticSelector:Ee||"Calendar",styles:Ge,classNames:Re,unstyled:ce,size:we},xr=zl(),Mr=h||f||1,fn=Mt||Ym("add",new Date,xr.getTimezone()),qn=()=>{const Wn=zt(fn).add(Mr,"month").toDate();Ue==null||Ue(Wn),Nn(Wn)},lr=()=>{const Wn=zt(fn).subtract(Mr,"month").toDate();Ve==null||Ve(Wn),Nn(Wn)},cr=()=>{const Wn=zt(fn).add(Mr,"year").toDate();qe==null||qe(Wn),Nn(Wn)},bs=()=>{const Wn=zt(fn).subtract(Mr,"year").toDate();Qe==null||Qe(Wn),Nn(Wn)},Ai=()=>{const Wn=zt(fn).add(10*Mr,"year").toDate();Ne==null||Ne(Wn),Nn(Wn)},ci=()=>{const Wn=zt(fn).subtract(10*Mr,"year").toDate();Te==null||Te(Wn),Nn(Wn)};return _.jsxs(ke,{ref:t,size:we,"data-calendar":!0,...It,children:[ot==="month"&&_.jsx(p4,{month:fn,minDate:ge,maxDate:se,firstDayOfWeek:E,weekdayFormat:T,weekendDays:A,getDayProps:I,excludeDate:k,renderDay:D,hideOutsideDates:M,hideWeekdays:z,getDayAriaLabel:O,onNext:qn,onPrevious:lr,hasNextLevel:i!=="month",onLevelClick:()=>ct("year"),numberOfColumns:f,locale:te,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:F,previousLabel:p==null?void 0:p.previousMonth,previousIcon:B,monthLabelFormat:$,__onDayClick:q,__onDayMouseEnter:G,__preventFocus:De,__stopPropagation:Le,static:Se,withCellSpacing:K,highlightToday:L,...Rr}),ot==="year"&&_.jsx(h4,{year:fn,numberOfColumns:f,minDate:ge,maxDate:se,monthsListFormat:V,getMonthControlProps:X,locale:te,onNext:cr,onPrevious:bs,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>ct("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:F,previousLabel:p==null?void 0:p.previousYear,previousIcon:B,yearLabelFormat:H,__onControlMouseEnter:w,__onControlClick:(Wn,or)=>{S&&Nn(or),ct(cC("month",s,i)),y==null||y(or)},__preventFocus:De,__stopPropagation:Le,withCellSpacing:K,...Rr}),ot==="decade"&&_.jsx(f4,{decade:fn,minDate:ge,maxDate:se,yearsListFormat:Q,getYearControlProps:Z,locale:te,onNext:Ai,onPrevious:ci,numberOfColumns:f,nextLabel:p==null?void 0:p.nextDecade,nextIcon:F,previousLabel:p==null?void 0:p.previousDecade,previousIcon:B,decadeLabelFormat:ne,__onControlMouseEnter:v,__onControlClick:(Wn,or)=>{x&&Nn(or),ct(cC("year",s,i)),m==null||m(or)},__preventFocus:De,__stopPropagation:Le,withCellSpacing:K,...Rr})]})});zS.classes={...f4.classes,...h4.classes,...p4.classes};zS.displayName="@mantine/dates/Calendar";function YOe(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:d,columnsToScroll:f,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:y,onMonthMouseEnter:v,onNextMonth:w,onPreviousMonth:x,onNextYear:S,onPreviousYear:E,onNextDecade:T,onPreviousDecade:A,withCellSpacing:I,highlightToday:k,__updateDateOnYearSelect:D,__updateDateOnMonthSelect:M,firstDayOfWeek:z,weekdayFormat:O,weekendDays:$,getDayProps:F,excludeDate:B,renderDay:q,hideOutsideDates:G,hideWeekdays:K,getDayAriaLabel:L,monthLabelFormat:V,monthsListFormat:X,getMonthControlProps:H,yearLabelFormat:Q,yearsListFormat:Z,getYearControlProps:ne,decadeLabelFormat:ue,allowSingleDateInRange:le,allowDeselect:ce,minDate:ge,maxDate:se,locale:te,...Ee}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:d,columnsToScroll:f,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:y,onMonthMouseEnter:v,onNextMonth:w,onPreviousMonth:x,onNextYear:S,onPreviousYear:E,onNextDecade:T,onPreviousDecade:A,withCellSpacing:I,highlightToday:k,__updateDateOnYearSelect:D,__updateDateOnMonthSelect:M,firstDayOfWeek:z,weekdayFormat:O,weekendDays:$,getDayProps:F,excludeDate:B,renderDay:q,hideOutsideDates:G,hideWeekdays:K,getDayAriaLabel:L,monthLabelFormat:V,monthsListFormat:X,getMonthControlProps:H,yearLabelFormat:Q,yearsListFormat:Z,getYearControlProps:ne,decadeLabelFormat:ue,allowSingleDateInRange:le,allowDeselect:ce,minDate:ge,maxDate:se,locale:te},others:Ee}}function tge(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return zt(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&zt(n[1]).endOf("day").add(1,"ms").isAfter(e)}function XLt({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:u=!0}){const[l,c]=vI({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:u}),[d,f]=P.useState(e==="range"&&l[0]&&!l[1]?l[0]:null),[h,p]=P.useState(null),m=T=>{if(e==="range"){if(d instanceof Date&&!l[1]){if(zt(T).isSame(d,t)&&!s){f(null),p(null),c([null,null]);return}const A=[T,d];A.sort((I,k)=>I.getTime()-k.getTime()),c(A),p(null),f(null);return}if(l[0]&&!l[1]&&zt(T).isSame(l[0],t)&&!s){f(null),p(null),c([null,null]);return}c([T,null]),p(null),f(T);return}if(e==="multiple"){l.some(A=>zt(A).isSame(T,t))?c(l.filter(A=>!zt(A).isSame(T,t))):c([...l,T]);return}l&&o&&zt(T).isSame(l,t)?c(null):c(T)},y=T=>d instanceof Date&&h instanceof Date?tge(T,[h,d]):l[0]instanceof Date&&l[1]instanceof Date?tge(T,l):!1,v=e==="range"?T=>{a==null||a(T),p(null)}:a,w=T=>l[0]instanceof Date&&zt(T).isSame(l[0],t)?!(h&&zt(h).isBefore(l[0])):!1,x=T=>l[1]instanceof Date?zt(T).isSame(l[1],t):!(l[0]instanceof Date)||!h?!1:zt(h).isBefore(l[0])&&zt(T).isSame(l[0],t),S=T=>{if(e==="range")return{selected:l.some(I=>I&&zt(I).isSame(T,t)),inRange:y(T),firstInRange:w(T),lastInRange:x(T),"data-autofocus":!!l[0]&&zt(l[0]).isSame(T,t)||void 0};if(e==="multiple")return{selected:l.some(I=>I&&zt(I).isSame(T,t)),"data-autofocus":!!l[0]&&zt(l[0]).isSame(T,t)||void 0};const A=zt(l).isSame(T,t);return{selected:A,"data-autofocus":A||void 0}},E=e==="range"&&d?p:()=>{};return P.useEffect(()=>{e==="range"&&!l[0]&&!l[1]&&f(null)},[n]),{onDateChange:m,onRootMouseLeave:v,onHoveredDateChange:E,getControlProps:S,_value:l,setValue:c}}const QLt={type:"default",defaultLevel:"month",numberOfColumns:1},g4=tt((e,t)=>{const n=$e("DatePicker",QLt,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:u,onChange:l,__staticSelector:c,getDayProps:d,allowSingleDateInRange:f,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:y,__onDayMouseEnter:v,__onDayClick:w,__timezoneApplied:x,...S}=n,{onDateChange:E,onRootMouseLeave:T,onHoveredDateChange:A,getControlProps:I}=XLt({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:f,value:u,defaultValue:a,onChange:l,onMouseLeave:p,applyTimezone:!x}),{resolvedClassNames:k,resolvedStyles:D}=Np({classNames:r,styles:i,props:n}),M=zl();return _.jsx(zS,{ref:t,minLevel:"month",classNames:k,styles:D,__staticSelector:c||"DatePicker",onMouseLeave:T,numberOfColumns:m,hideOutsideDates:y??m!==1,__onDayMouseEnter:(z,O)=>{A(O),v==null||v(z,O)},__onDayClick:(z,O)=>{E(O),w==null||w(z,O)},getDayProps:z=>({...I(z),...d==null?void 0:d(z)}),...S,date:Ym("add",S.date,M.getTimezone(),x),__timezoneApplied:!0})});g4.classes=zS.classes;g4.displayName="@mantine/dates/DatePicker";function JLt(e,t){if(e===null)return null;const n=Ym("add",new Date(e),t);return Number.isNaN(n.getTime())||!e?null:n}function ZLt({date:e,maxDate:t,minDate:n}){return!(e==null||Number.isNaN(e.getTime())||t&&zt(e).isAfter(t,"date")||n&&zt(e).isBefore(n,"date"))}const eFt={valueFormat:"MMMM D, YYYY",fixOnBlur:!0,preserveTime:!0},uZ=tt((e,t)=>{const n=dG("DateInput",eFt,e),{inputProps:r,wrapperProps:i,value:s,defaultValue:o,onChange:a,clearable:u,clearButtonProps:l,popoverProps:c,getDayProps:d,locale:f,valueFormat:h,dateParser:p,minDate:m,maxDate:y,fixOnBlur:v,onFocus:w,onBlur:x,onClick:S,readOnly:E,name:T,form:A,rightSection:I,unstyled:k,classNames:D,styles:M,allowDeselect:z,preserveTime:O,date:$,defaultDate:F,onDateChange:B,...q}=n,[G,K]=P.useState(!1),{calendarProps:L,others:V}=YOe(q),X=zl(),Q=p||(Qe=>{const Ue=zt(Qe,h,X.getLocale(f)).toDate();return Number.isNaN(Ue.getTime())?JLt(Qe,X.getTimezone()):Ue}),Z=z!==void 0?z:u,ne=Qe=>Qe?zt(Qe).locale(X.getLocale(f)).format(h):"",[ue,le,ce]=vI({type:"default",value:s,defaultValue:o,onChange:a}),[ge,se]=vI({type:"default",value:$,defaultValue:o||F,onChange:B});P.useEffect(()=>{ce&&se(s)},[ce,s]);const[te,Ee]=P.useState(ne(ue));P.useEffect(()=>{Ee(ne(ue))},[X.getLocale(f)]);const we=Qe=>{const Ue=Qe.currentTarget.value;if(Ee(Ue),K(!0),Ue.trim()===""&&u)le(null);else{const Ve=Q(Ue);ZLt({date:Ve,minDate:m,maxDate:y})&&(le(Ve),se(Ve))}},De=Qe=>{x==null||x(Qe),K(!1),v&&Ee(ne(ue))},Le=Qe=>{w==null||w(Qe),K(!0)},Ne=Qe=>{S==null||S(Qe),K(!0)},Te=Qe=>({...d==null?void 0:d(Qe),selected:zt(ue).isSame(Qe,"day"),onClick:()=>{const Ue=O?oLt(ue,Qe):Qe,Ve=u&&Z&&zt(ue).isSame(Qe,"day")?null:Ue;le(Ve),!ce&&Ee(ne(Ve)),K(!1)}}),qe=I||(u&&ue&&!E?_.jsx(Sg,{variant:"transparent",onMouseDown:Qe=>Qe.preventDefault(),tabIndex:-1,onClick:()=>{le(null),!ce&&Ee(""),K(!1)},unstyled:k,size:r.size||"sm",...l}):null);return bc(()=>{s!==void 0&&!G&&Ee(ne(s))},[s]),_.jsxs(_.Fragment,{children:[_.jsx(Ti.Wrapper,{...i,__staticSelector:"DateInput",children:_.jsxs(Ln,{opened:G,trapFocus:!1,position:"bottom-start",disabled:E,withRoles:!1,unstyled:k,...c,children:[_.jsx(Ln.Target,{children:_.jsx(Ti,{"data-dates-input":!0,"data-read-only":E||void 0,autoComplete:"off",ref:t,value:te,onChange:we,onBlur:De,onFocus:Le,onClick:Ne,readOnly:E,rightSection:qe,...r,...V,__staticSelector:"DateInput"})}),_.jsx(Ln.Dropdown,{onMouseDown:Qe=>Qe.preventDefault(),"data-dates-dropdown":!0,children:_.jsx(zS,{__staticSelector:"DateInput",__timezoneApplied:!0,...L,classNames:D,styles:M,unstyled:k,__preventFocus:!0,minDate:m,maxDate:y,locale:f,getDayProps:Te,size:r.size,date:ge,onDateChange:se})})]})}),_.jsx(sZ,{name:T,form:A,value:ue,type:"default"})]})});uZ.classes={...Ti.classes,...zS.classes};uZ.displayName="@mantine/dates/DateInput";function tFt({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:u,valueFormatter:l}){const c=zl(),[d,f]=W1(!1),[h,p]=vI({type:e,value:t,defaultValue:n,onChange:r}),m=nLt({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(u),formatter:l}),y=x=>{o&&(e==="default"&&f.close(),e==="range"&&x[0]&&x[1]&&f.close()),p(a&&e==="multiple"?[...x].sort((S,E)=>S.getTime()-E.getTime()):x)},v=()=>y(e==="range"?[null,null]:e==="multiple"?[]:null),w=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:y,onClear:v,shouldClear:w,formattedValue:m,dropdownOpened:d,dropdownHandlers:f}}const nFt={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},lZ=tt((e,t)=>{const n=$e("DatePickerInput",nFt,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:u,locale:l,classNames:c,styles:d,unstyled:f,closeOnChange:h,size:p,variant:m,dropdownType:y,sortDates:v,minDate:w,maxDate:x,vars:S,defaultDate:E,valueFormatter:T,...A}=n,{resolvedClassNames:I,resolvedStyles:k}=Np({classNames:c,styles:d,props:n}),{calendarProps:D,others:M}=YOe(A),{_value:z,setValue:O,formattedValue:$,dropdownHandlers:F,dropdownOpened:B,onClear:q,shouldClear:G}=tFt({type:r,value:i,defaultValue:s,onChange:o,locale:l,format:a,labelSeparator:u,closeOnChange:h,sortDates:v,valueFormatter:T}),K=Array.isArray(z)?z[0]||E:z||E,L=zl();return _.jsx(m4,{formattedValue:$,dropdownOpened:B,dropdownHandlers:F,classNames:I,styles:k,unstyled:f,ref:t,onClear:q,shouldClear:G,value:z,size:p,variant:m,dropdownType:y,...M,type:r,__staticSelector:"DatePickerInput",children:_.jsx(g4,{...D,size:p,variant:m,type:r,value:z,defaultDate:K||gLt({maxDate:x,minDate:w,timezone:L.getTimezone()}),onChange:O,locale:l,classNames:I,styles:k,unstyled:f,__staticSelector:"DatePickerInput",__stopPropagation:y==="popover",minDate:w,maxDate:x,date:Ym("add",D.date,L.getTimezone()),__timezoneApplied:!0})})});lZ.classes={...m4.classes,...g4.classes};lZ.displayName="@mantine/dates/DatePickerInput";const Ox=e=>{var t,n,r,i;return(i=(t=e.id)!==null&&t!==void 0?t:(r=(n=e.accessorKey)===null||n===void 0?void 0:n.toString)===null||r===void 0?void 0:r.call(n))!==null&&i!==void 0?i:e.header},b$=e=>{const t=[],n=r=>{r.forEach(i=>{i.columns?n(i.columns):t.push(i)})};return n(e),t},KOe=({columnDefs:e,tableOptions:t})=>{const{aggregationFns:n={},defaultDisplayColumn:r,filterFns:i={},sortingFns:s={},state:{columnFilterFns:o={}}={}}=t;return e.map(a=>{var u,l;if(a.id||(a.id=Ox(a)),a.columnDefType||(a.columnDefType="data"),!((u=a.columns)===null||u===void 0)&&u.length)a.columnDefType="group",a.columns=KOe({columnDefs:a.columns,tableOptions:t});else if(a.columnDefType==="data"){if(Array.isArray(a.aggregationFn)){const c=a.aggregationFn;a.aggregationFn=(d,f,h)=>c.map(p=>{var m;return(m=n[p])===null||m===void 0?void 0:m.call(n,d,f,h)})}Object.keys(i).includes(o[a.id])&&(a.filterFn=(l=i[o[a.id]])!==null&&l!==void 0?l:i.fuzzy,a._filterFn=o[a.id]),Object.keys(s).includes(a.sortingFn)&&(a.sortingFn=s[a.sortingFn])}else a.columnDefType==="display"&&(a=Object.assign(Object.assign({},r),a));return a})},XOe=(e,t,n)=>{e.getCanPin()&&e.pin(t.getIsPinned());const r=[...n];return r.splice(r.indexOf(t.id),0,r.splice(r.indexOf(e.id),1)[0]),r},rFt=e=>{const{filterVariant:t}=e;return t==="multi-select"?"arrIncludesSome":t!=null&&t.includes("range")?"betweenInclusive":["checkbox","date","select"].includes(t||"")?"equals":"fuzzy"},iFt=(e,t,n=-1,r=0,i,s)=>QR(e,"mrt-row-create",Object.assign({},...b$(e.options.columns).map(o=>({[Ox(o)]:""}))),n,r,i,s);function f_({header:e,id:t,size:n,tableOptions:r}){const{defaultDisplayColumn:i,displayColumnDefOptions:s,localization:o}=r;return Object.assign(Object.assign(Object.assign(Object.assign({},i),{header:e?o[e]:"",size:n}),s==null?void 0:s[t]),{id:t})}const QOe=e=>{const{enableRowPinning:t,rowPinningDisplayMode:n}=e;return!!(t&&!(n!=null&&n.startsWith("select")))},JOe=e=>{const{enableRowDragging:t,enableRowOrdering:n}=e;return!!(t||n)},cZ=e=>{const{enableExpanding:t,enableGrouping:n,renderDetailPanel:r,state:{grouping:i}}=e;return!!(t||n&&(i!=null&&i.length)||r)},dZ=e=>{const{createDisplayMode:t,editDisplayMode:n,enableEditing:r,enableRowActions:i,state:{creatingRow:s}}=e;return!!(i||s&&t==="row"||r&&["modal","row"].includes(n??""))},ZOe=e=>!!e.enableRowSelection,eDe=e=>!!e.enableRowNumbers,tDe=e=>e.layoutMode==="grid-no-grow",sFt=e=>[QOe(e)&&"mrt-row-pin",JOe(e)&&"mrt-row-drag",e.positionActionsColumn==="first"&&dZ(e)&&"mrt-row-actions",e.positionExpandColumn==="first"&&cZ(e)&&"mrt-row-expand",ZOe(e)&&"mrt-row-select",eDe(e)&&"mrt-row-numbers"].filter(Boolean),oFt=e=>[e.positionActionsColumn==="last"&&dZ(e)&&"mrt-row-actions",e.positionExpandColumn==="last"&&cZ(e)&&"mrt-row-expand",tDe(e)&&"mrt-row-spacer"].filter(Boolean),fZ=(e,t=!1)=>{const{state:{columnOrder:n=[]}}=e,r=sFt(e),i=oFt(e),s=b$(e.columns).map(a=>Ox(a));let o=t?s:Array.from(new Set([...n,...s]));return o=o.filter(a=>!r.includes(a)&&!i.includes(a)),[...r,...o,...i]},aFt=(e,t,n)=>{let r=0;return e.columnFiltersMeta[n]&&(r=$$t(e.columnFiltersMeta[n],t.columnFiltersMeta[n])),r===0?I1.alphanumeric(e,t,n):r},uFt=Object.assign(Object.assign({},I1),{fuzzy:aFt}),lFt=(e,t)=>Math.max(...Object.values(t.columnFiltersMeta).map(n=>n.rank))-Math.max(...Object.values(e.columnFiltersMeta).map(n=>n.rank)),Lt=(e,t)=>e instanceof Function?e(t):e,nDe=(e,t)=>{const{getCenterRows:n,getPrePaginationRowModel:r,getRowModel:i,getState:s,getTopRows:o,options:{createDisplayMode:a,enablePagination:u,enableRowPinning:l,manualPagination:c,positionCreatingRow:d,rowPinningDisplayMode:f}}=e,{creatingRow:h,pagination:p}=s(),m=cFt(e);let y=[];if(!m)y=!l||f!=null&&f.includes("sticky")?t?r().rows:i().rows:n();else{if(y=r().rows.sort((v,w)=>lFt(v,w)),u&&!c&&!t){const v=p.pageIndex*p.pageSize;y=y.slice(v,v+p.pageSize)}l&&!(f!=null&&f.includes("sticky"))&&(y=y.filter(v=>!v.getIsPinned()))}if(l&&(f!=null&&f.includes("sticky"))){const v=y.filter(w=>w.getIsPinned()).map(w=>w.id);y=[...o().filter(w=>!v.includes(w.id)),...y]}if(d!==void 0&&h&&a==="row"){const v=isNaN(+d)?d==="top"?0:y.length:+d;y=[...y.slice(0,v),h,...y.slice(v)]}return y},rDe=e=>{const{getState:t,options:{enableGlobalFilterRankedResults:n,manualExpanding:r,manualFiltering:i,manualGrouping:s,manualSorting:o}}=e,{expanded:a,globalFilterFn:u}=t();return!r&&!i&&!s&&!o&&n&&u==="fuzzy"&&a!==!0&&!Object.values(a).some(Boolean)},cFt=e=>{const{globalFilter:t,sorting:n}=e.getState();return rDe(e)&&t&&!Object.values(n).some(Boolean)},_$=({row:e,table:t})=>{const{options:{enableRowSelection:n}}=t;return e.getIsSelected()||Lt(n,e)&&e.getCanSelectSubRows()&&e.getIsAllSubRowsSelected()},dFt=({renderedRowIndex:e=0,row:t,table:n})=>(r,i)=>{var s;const{getState:o,options:{enableBatchRowSelection:a,enableMultiRowSelection:u,enableRowPinning:l,manualPagination:c,rowPinningDisplayMode:d},refs:{lastSelectedRowId:f}}=n,{pagination:{pageIndex:h,pageSize:p}}=o(),m=c?0:p*h,y=_$({row:t,table:n});t.toggleSelected(i??!y);const v=new Set([t.id]);if(a&&u&&r.nativeEvent.shiftKey&&f.current!==null){const w=nDe(n,!0),x=w.findIndex(S=>S.id===f.current);if(x!==-1){const S=_$({row:w==null?void 0:w[x],table:n}),E=e+m,[T,A]=x<E?[x,E]:[E,x];if(y!==S)for(let I=T;I<=A;I++)w[I].toggleSelected(!y),v.add(w[I].id)}}f.current=t.id,t.getCanSelectSubRows()&&t.getIsAllSubRowsSelected()&&((s=t.subRows)===null||s===void 0||s.forEach(w=>w.toggleSelected(!1))),l&&(d!=null&&d.includes("select"))&&v.forEach(w=>{n.getRow(w).pin(y?!1:d!=null&&d.includes("bottom")?"bottom":"top")})},iDe=({table:e})=>(t,n,r)=>{const{options:{enableRowPinning:i,rowPinningDisplayMode:s,selectAllMode:o},refs:{lastSelectedRowId:a}}=e;o==="all"||r?e.toggleAllRowsSelected(n??t.target.checked):e.toggleAllPageRowsSelected(n??t.target.checked),i&&(s!=null&&s.includes("select"))&&e.setRowPinning({bottom:[],top:[]}),a.current=null},Of=e=>e.replace(/[^a-zA-Z0-9]/g,"_"),fFt=e=>{var t,n;return typeof e.primaryShade=="number"?e.primaryShade:(n=(t=e.primaryShade)===null||t===void 0?void 0:t.dark)!==null&&n!==void 0?n:7},hFt=(e,t)=>e.colors[e.primaryColor][fFt(e)];function w$(e,t){const n=`data-${e}`;switch(typeof t){case"boolean":return t?{[n]:""}:null;case"number":return{[n]:`${t}`};case"string":return{[n]:t};default:return null}}const pFt=Object.assign({},LD),sDe=(e,t,n,r)=>{const i=O$t(e.getValue(t),n,{threshold:wu.MATCHES});return r(i),i.passed};sDe.autoRemove=e=>!e;const oDe=(e,t,n)=>e.getValue(t).toString().toLowerCase().trim().includes(n.toString().toLowerCase().trim());oDe.autoRemove=e=>!e;const aDe=(e,t,n)=>e.getValue(t).toString().toLowerCase().trim().startsWith(n.toString().toLowerCase().trim());aDe.autoRemove=e=>!e;const uDe=(e,t,n)=>e.getValue(t).toString().toLowerCase().trim().endsWith(n.toString().toLowerCase().trim());uDe.autoRemove=e=>!e;const y4=(e,t,n)=>e.getValue(t).toString().toLowerCase().trim()===(n==null?void 0:n.toString().toLowerCase().trim());y4.autoRemove=e=>!e;const lDe=(e,t,n)=>e.getValue(t).toString().toLowerCase().trim()!==n.toString().toLowerCase().trim();lDe.autoRemove=e=>!e;const v4=(e,t,n)=>!isNaN(+n)&&!isNaN(+e.getValue(t))?+e.getValue(t)>+n:e.getValue(t).toString().toLowerCase().trim()>(n==null?void 0:n.toString().toLowerCase().trim());v4.autoRemove=e=>!e;const hZ=(e,t,n)=>y4(e,t,n)||v4(e,t,n);hZ.autoRemove=e=>!e;const b4=(e,t,n)=>!isNaN(+n)&&!isNaN(+e.getValue(t))?+e.getValue(t)<+n:e.getValue(t).toString().toLowerCase().trim()<(n==null?void 0:n.toString().toLowerCase().trim());b4.autoRemove=e=>!e;const pZ=(e,t,n)=>y4(e,t,n)||b4(e,t,n);pZ.autoRemove=e=>!e;const cDe=(e,t,n)=>(["",void 0].includes(n[0])||v4(e,t,n[0]))&&(!isNaN(+n[0])&&!isNaN(+n[1])&&+n[0]>+n[1]||["",void 0].includes(n[1])||b4(e,t,n[1]));cDe.autoRemove=e=>!e;const dDe=(e,t,n)=>(["",void 0].includes(n[0])||hZ(e,t,n[0]))&&(!isNaN(+n[0])&&!isNaN(+n[1])&&+n[0]>+n[1]||["",void 0].includes(n[1])||pZ(e,t,n[1]));dDe.autoRemove=e=>!e;const fDe=(e,t,n)=>!e.getValue(t).toString().trim();fDe.autoRemove=e=>!e;const hDe=(e,t,n)=>!!e.getValue(t).toString().trim();hDe.autoRemove=e=>!e;const mFt=Object.assign(Object.assign({},Dh),{between:cDe,betweenInclusive:dDe,contains:oDe,empty:fDe,endsWith:uDe,equals:y4,fuzzy:sDe,greaterThan:v4,greaterThanOrEqualTo:hZ,lessThan:b4,lessThanOrEqualTo:pZ,notEmpty:hDe,notEquals:lDe,startsWith:aDe});function mZ(e,t){var n;if(!t)return"";const r=`filter${t[0].toUpperCase()}${t.slice(1)}`;return(n=e[r])!==null&&n!==void 0?n:""}function In(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var gFt={root:"MRT_EditActionButtons-module_root__BfxVZ"};const pDe=e=>{var{row:t,table:n,variant:r="icon"}=e,i=In(e,["row","table","variant"]);const{getState:s,options:{icons:{IconCircleX:o,IconDeviceFloppy:a},localization:u,onCreatingRowCancel:l,onCreatingRowSave:c,onEditingRowCancel:d,onEditingRowSave:f},refs:{editInputRefs:h},setCreatingRow:p,setEditingRow:m}=n,{creatingRow:y,editingRow:v,isSaving:w}=s(),x=(y==null?void 0:y.id)===t.id,S=(v==null?void 0:v.id)===t.id,E=()=>{x?(l==null||l({row:t,table:n}),p(null)):S&&(d==null||d({row:t,table:n}),m(null)),t._valuesCache={}},T=()=>{var A;(A=Object.values(h==null?void 0:h.current).filter(I=>{var k,D;return t.id===((D=(k=I==null?void 0:I.name)===null||k===void 0?void 0:k.split("_"))===null||D===void 0?void 0:D[0])}))===null||A===void 0||A.forEach(I=>{I.value!==void 0&&Object.hasOwn(t==null?void 0:t._valuesCache,I.name)&&(t._valuesCache[I.name]=I.value)}),x?c==null||c({exitCreatingMode:()=>p(null),row:t,table:n,values:t._valuesCache}):S&&(f==null||f({exitEditingMode:()=>m(null),row:t,table:n,values:t==null?void 0:t._valuesCache}))};return _.jsx(ke,Object.assign({className:Dt("mrt-edit-action-buttons",gFt.root),onClick:A=>A.stopPropagation()},i,{children:r==="icon"?_.jsxs(_.Fragment,{children:[_.jsx(jn,{label:u.cancel,withinPortal:!0,children:_.jsx(mr,{"aria-label":u.cancel,color:"red",onClick:E,variant:"subtle",children:_.jsx(o,{})})}),_.jsx(jn,{label:u.save,withinPortal:!0,children:_.jsx(mr,{"aria-label":u.save,color:"blue",loading:w,onClick:T,variant:"subtle",children:_.jsx(a,{})})})]}):_.jsxs(_.Fragment,{children:[_.jsx(Zn,{onClick:E,variant:"subtle",children:u.cancel}),_.jsx(Zn,{loading:w,onClick:T,variant:"filled",children:u.save})]})}))},yFt=e=>{var{handleEdit:t,row:n,table:r}=e,i=In(e,["handleEdit","row","table"]);const{options:{editDisplayMode:s,enableEditing:o,icons:{IconDots:a,IconEdit:u},localization:l,positionActionsColumn:c,renderRowActionMenuItems:d}}=r;return _.jsxs(Dn,{closeOnItemClick:!0,position:c==="first"?"bottom-start":c==="last"?"bottom-end":void 0,withinPortal:!0,children:[_.jsx(jn,{label:l.rowActions,openDelay:1e3,withinPortal:!0,children:_.jsx(Dn.Target,{children:_.jsx(mr,Object.assign({"aria-label":l.rowActions,color:"gray",onClick:f=>f.stopPropagation(),size:"sm",variant:"subtle"},i,{children:_.jsx(a,{})}))})}),_.jsxs(Dn.Dropdown,{onClick:f=>f.stopPropagation(),children:[o&&s!=="table"&&_.jsx(Dn.Item,{leftSection:_.jsx(u,{}),onClick:t,children:l.edit}),d==null?void 0:d({row:n,table:r})]})]})},vFt=({cell:e,row:t,table:n})=>{const{getState:r,options:{createDisplayMode:i,editDisplayMode:s,enableEditing:o,icons:{IconEdit:a},localization:{edit:u},renderRowActionMenuItems:l,renderRowActions:c},setEditingRow:d}=n,{creatingRow:f,editingRow:h}=r(),p=(f==null?void 0:f.id)===t.id,m=(h==null?void 0:h.id)===t.id,y=w=>{w.stopPropagation(),d(Object.assign({},t))},v=p&&i==="row"||m&&s==="row";return _.jsx(_.Fragment,{children:c&&!v?c({cell:e,row:t,table:n}):v?_.jsx(pDe,{row:t,table:n}):!l&&Lt(o,t)?_.jsx(jn,{label:u,openDelay:1e3,position:"right",withinPortal:!0,children:_.jsx(mr,{"aria-label":u,color:"gray",disabled:!!h&&h.id!==t.id,onClick:y,size:"md",variant:"subtle",children:_.jsx(a,{})})}):l?_.jsx(yFt,{handleEdit:y,row:t,table:n}):null})},bFt=e=>Object.assign({Cell:({cell:t,row:n,table:r})=>_.jsx(vFt,{cell:t,row:n,table:r})},f_({header:"actions",id:"mrt-row-actions",size:70,tableOptions:e}));var _Ft={"grab-icon":"MRT_GrabHandleButton-module_grab-icon__mQimy"};const gZ=({actionIconProps:e,onDragEnd:t,onDragStart:n,table:{options:{icons:{IconGripHorizontal:r},localization:{move:i}}}})=>{var s,o;return _.jsx(jn,{label:(s=e==null?void 0:e.title)!==null&&s!==void 0?s:i,openDelay:1e3,withinPortal:!0,children:_.jsx(mr,Object.assign({"aria-label":(o=e==null?void 0:e.title)!==null&&o!==void 0?o:i,draggable:!0},e,{className:Dt("mrt-grab-handle-button",_Ft["grab-icon"],e==null?void 0:e.className),color:"gray",size:"sm",onClick:a=>{var u;a.stopPropagation(),(u=e==null?void 0:e.onClick)===null||u===void 0||u.call(e,a)},onDragEnd:t,onDragStart:n,title:void 0,variant:"transparent",children:_.jsx(r,{size:"100%"})}))})},wFt=e=>{var{row:t,rowRef:n,table:r}=e,i=In(e,["row","rowRef","table"]);const{options:{mantineRowDragHandleProps:s}}=r,o=Object.assign(Object.assign({},Lt(s,{row:t,table:r})),i),a=l=>{var c;(c=o==null?void 0:o.onDragStart)===null||c===void 0||c.call(o,l),l.dataTransfer.setDragImage(n.current,0,0),r.setDraggingRow(t)},u=l=>{var c;(c=o==null?void 0:o.onDragEnd)===null||c===void 0||c.call(o,l),r.setDraggingRow(null),r.setHoveredRow(null)};return _.jsx(gZ,{actionIconProps:o,onDragEnd:u,onDragStart:a,table:r})},xFt=e=>Object.assign({Cell:({row:t,rowRef:n,table:r})=>_.jsx(wFt,{row:t,rowRef:n,table:r}),grow:!1},f_({header:"move",id:"mrt-row-drag",size:60,tableOptions:e}));var SO={root:"MRT_ExpandAllButton-module_root__gkBZD",chevron:"MRT_ExpandAllButton-module_chevron__Iep0j",up:"MRT_ExpandAllButton-module_up__Xth3U",right:"MRT_ExpandAllButton-module_right__bS4L-"};const EFt=e=>{var t,n,{table:r}=e,i=In(e,["table"]);const{getCanSomeRowsExpand:s,getIsAllRowsExpanded:o,getIsSomeRowsExpanded:a,getState:u,options:{icons:{IconChevronsDown:l},localization:c,mantineExpandAllButtonProps:d,renderDetailPanel:f},toggleAllRowsExpanded:h}=r,{density:p,isLoading:m}=u(),y=Object.assign(Object.assign({},Lt(d,{table:r})),i),v=o();return _.jsx(jn,{label:((t=y==null?void 0:y.title)!==null&&t!==void 0?t:v)?c.collapseAll:c.expandAll,openDelay:1e3,withinPortal:!0,children:_.jsx(mr,Object.assign({"aria-label":c.expandAll,color:"gray",variant:"subtle"},y,{className:Dt("mrt-expand-all-button",SO.root,y==null?void 0:y.className,p),disabled:m||!f&&!s(),onClick:()=>h(!v),title:void 0,children:(n=y==null?void 0:y.children)!==null&&n!==void 0?n:_.jsx(l,{className:Dt(SO.chevron,v?SO.up:a()?SO.right:void 0)})}))})};var dC={root:"MRT_ExpandButton-module_root__IFYio","root-ltr":"MRT_ExpandButton-module_root-ltr__FHNnp",chevron:"MRT_ExpandButton-module_chevron__XzC5P",right:"MRT_ExpandButton-module_right__-pC-A",up:"MRT_ExpandButton-module_up__TZGBo","root-rtl":"MRT_ExpandButton-module_root-rtl__zoudS"};const nge=e=>{var t,n,{row:r,table:i}=e,s=In(e,["row","table"]);const o=Bu(),{options:{icons:{IconChevronDown:a},localization:u,mantineExpandButtonProps:l,positionExpandColumn:c,renderDetailPanel:d}}=i,f=Object.assign(Object.assign({},Lt(l,{row:r,table:i})),s),h=r.getCanExpand(),p=r.getIsExpanded(),m=!!(d!=null&&d({row:r,table:i})),y=w=>{var x;w.stopPropagation(),r.toggleExpanded(),(x=f==null?void 0:f.onClick)===null||x===void 0||x.call(f,w)},v=o.dir==="rtl"||c==="last";return _.jsx(jn,{disabled:!h&&!m,label:((t=f==null?void 0:f.title)!==null&&t!==void 0?t:p)?u.collapse:u.expand,openDelay:1e3,withinPortal:!0,children:_.jsx(mr,Object.assign({"aria-label":u.expand,color:"gray",disabled:!h&&!m,variant:"subtle"},f,{__vars:{"--mrt-row-depth":`${r.depth}`},className:Dt("mrt-expand-button",dC.root,dC[`root-${v?"rtl":"ltr"}`],f==null?void 0:f.className),onClick:y,title:void 0,children:(n=f==null?void 0:f.children)!==null&&n!==void 0?n:_.jsx(a,{className:Dt("mrt-expand-button-chevron",dC.chevron,!h&&!d?dC.right:p?dC.up:void 0)})}))})},SFt=e=>{var t;const{defaultColumn:n,enableExpandAll:r,groupedColumnMode:i,positionExpandColumn:s,renderDetailPanel:o,state:{grouping:a}}=e,u=s==="last"?{align:"right"}:void 0;return Object.assign({Cell:({cell:l,column:c,row:d,table:f})=>{var h,p,m;const y={row:d,table:f},v=(h=d.subRows)===null||h===void 0?void 0:h.length;return e.groupedColumnMode==="remove"&&d.groupingColumnId?_.jsxs(Gt,{align:"center",gap:"0.25rem",children:[_.jsx(nge,Object.assign({},y)),_.jsx(jn,{label:f.getColumn(d.groupingColumnId).columnDef.header,openDelay:1e3,position:"right",children:_.jsx("span",{children:d.groupingValue})}),!!v&&_.jsxs("span",{children:["(",v,")"]})]}):_.jsxs(_.Fragment,{children:[_.jsx(nge,Object.assign({},y)),(m=(p=c.columnDef).GroupedCell)===null||m===void 0?void 0:m.call(p,{cell:l,column:c,row:d,table:f})]})},Header:r?({table:l})=>{var c;return _.jsxs(Gt,{align:"center",children:[_.jsx(EFt,{table:l}),i==="remove"&&((c=a==null?void 0:a.map(d=>l.getColumn(d).columnDef.header))===null||c===void 0?void 0:c.join(", "))]})}:void 0,mantineTableBodyCellProps:u,mantineTableHeadCellProps:u},f_({header:"expand",id:"mrt-row-expand",size:i==="remove"?(t=n==null?void 0:n.size)!==null&&t!==void 0?t:180:o?r?60:70:100,tableOptions:e}))},TFt=e=>{const{localization:t,rowNumberDisplayMode:n}=e,{pagination:{pageIndex:r,pageSize:i}}=e.state;return Object.assign({Cell:({renderedRowIndex:s=0,row:o})=>{var a;return((a=n==="static"?s+i*r:o.index)!==null&&a!==void 0?a:0)+1},Header:()=>t.rowNumber,grow:!1},f_({header:"rowNumbers",id:"mrt-row-numbers",size:50,tableOptions:e}))},wz=e=>{var{pinningPosition:t,row:n,table:r}=e,i=In(e,["pinningPosition","row","table"]);const{options:{icons:{IconPinned:s,IconX:o},localization:a,rowPinningDisplayMode:u}}=r,l=n.getIsPinned(),[c,d]=P.useState(!1),f=h=>{d(!1),h.stopPropagation(),n.pin(l?!1:t)};return _.jsx(jn,{label:l?a.unpin:a.pin,openDelay:1e3,opened:c,children:_.jsx(mr,Object.assign({"aria-label":a.pin,color:"gray",onClick:f,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),size:"xs",style:{height:"24px",width:"24px"},variant:"subtle"},i,{children:l?_.jsx(o,{}):_.jsx(s,{fontSize:"small",style:{transform:`rotate(${u==="sticky"?135:t==="top"?180:0}deg)`}})}))})},CFt=e=>{var{row:t,table:n}=e,r=In(e,["row","table"]);const{getState:i,options:{enableRowPinning:s,rowPinningDisplayMode:o}}=n,{density:a}=i();if(!Lt(s,t))return null;const l=Object.assign({row:t,table:n},r);return o==="top-and-bottom"&&!t.getIsPinned()?_.jsxs(ke,{style:{display:"flex",flexDirection:a==="xs"?"row":"column"},children:[_.jsx(wz,Object.assign({pinningPosition:"top"},l)),_.jsx(wz,Object.assign({pinningPosition:"bottom"},l))]}):_.jsx(wz,Object.assign({pinningPosition:o==="bottom"?"bottom":"top"},l))},AFt=e=>Object.assign({Cell:({row:t,table:n})=>_.jsx(CFt,{row:t,table:n}),grow:!1},f_({header:"pin",id:"mrt-row-pin",size:60,tableOptions:e})),WH=e=>{var t,{renderedRowIndex:n=0,row:r,table:i}=e,s=In(e,["renderedRowIndex","row","table"]);const{getState:o,options:{enableMultiRowSelection:a,localization:u,mantineSelectAllCheckboxProps:l,mantineSelectCheckboxProps:c,selectAllMode:d,selectDisplayMode:f}}=i,{density:h,isLoading:p}=o(),m=!r,y=m?d==="page"?i.getIsAllPageRowsSelected():i.getIsAllRowsSelected():void 0,v=m?y:_$({row:r,table:i}),w=Object.assign(Object.assign({},m?Lt(l,{table:i}):Lt(c,{row:r,table:i})),s),x=r?dFt({renderedRowIndex:n,row:r,table:i}):void 0,S=iDe({table:i}),E=Object.assign(Object.assign({"aria-label":m?u.toggleSelectAll:u.toggleSelectRow,checked:v,disabled:p||r&&!r.getCanSelect()||(r==null?void 0:r.id)==="mrt-row-create",onChange:T=>{T.stopPropagation(),m?S(T):x(T)},size:h==="xs"?"sm":"md"},w),{onClick:T=>{var A;T.stopPropagation(),(A=w==null?void 0:w.onClick)===null||A===void 0||A.call(w,T)},title:void 0});return _.jsx(jn,{label:(t=w==null?void 0:w.title)!==null&&t!==void 0?t:m?u.toggleSelectAll:u.toggleSelectRow,openDelay:1e3,withinPortal:!0,children:_.jsx("span",{children:f==="switch"?_.jsx(ny,Object.assign({},E)):f==="radio"||a===!1?_.jsx(by,Object.assign({},E)):_.jsx(Lf,Object.assign({indeterminate:!v&&m?i.getIsSomeRowsSelected():(r==null?void 0:r.getIsSomeSelected())&&r.getCanSelectSubRows()},E))})})},IFt=e=>{const{enableMultiRowSelection:t,enableSelectAll:n}=e;return Object.assign({Cell:({renderedRowIndex:r,row:i,table:s})=>_.jsx(WH,{renderedRowIndex:r,row:i,table:s}),Header:n&&t?({table:r})=>_.jsx(WH,{table:r}):void 0,grow:!1},f_({header:"select",id:"mrt-row-select",size:n?60:70,tableOptions:e}))},RFt={IconArrowAutofitContent:QKe,IconArrowsSort:tXe,IconBaselineDensityLarge:rXe,IconBaselineDensityMedium:iXe,IconBaselineDensitySmall:sXe,IconBoxMultiple:oXe,IconChevronDown:fXe,IconChevronLeft:pXe,IconChevronLeftPipe:hXe,IconChevronRight:gXe,IconChevronRightPipe:mXe,IconChevronsDown:yXe,IconCircleX:vXe,IconClearAll:bXe,IconColumns:_Xe,IconDeviceFloppy:xXe,IconDots:EXe,IconDotsVertical:bwe,IconEdit:_we,IconEyeOff:SXe,IconFilter:IXe,IconFilterCog:CXe,IconFilterOff:AXe,IconGripHorizontal:RXe,IconMaximize:NXe,IconMinimize:OXe,IconPinned:MXe,IconPinnedOff:DXe,IconSearch:zXe,IconSearchOff:BXe,IconSortAscending:UXe,IconSortDescending:VXe,IconX:jY},kFt={actions:"Actions",and:"and",cancel:"Cancel",changeFilterMode:"Change filter mode",changeSearchMode:"Change search mode",clearFilter:"Clear filter",clearSearch:"Clear search",clearSelection:"Clear selection",clearSort:"Clear sort",clickToCopy:"Click to copy",copy:"Copy",collapse:"Collapse",collapseAll:"Collapse all",columnActions:"Column Actions",copiedToClipboard:"Copied to clipboard",dropToGroupBy:"Drop to group by {column}",edit:"Edit",expand:"Expand",expandAll:"Expand all",filterArrIncludes:"Includes",filterArrIncludesAll:"Includes all",filterArrIncludesSome:"Includes",filterBetween:"Between",filterBetweenInclusive:"Between Inclusive",filterByColumn:"Filter by {column}",filterContains:"Contains",filterEmpty:"Empty",filterEndsWith:"Ends With",filterEquals:"Equals",filterEqualsString:"Equals",filterFuzzy:"Fuzzy",filterGreaterThan:"Greater Than",filterGreaterThanOrEqualTo:"Greater Than Or Equal To",filterInNumberRange:"Between",filterIncludesString:"Contains",filterIncludesStringSensitive:"Contains",filterLessThan:"Less Than",filterLessThanOrEqualTo:"Less Than Or Equal To",filterMode:"Filter Mode: {filterType}",filterNotEmpty:"Not Empty",filterNotEquals:"Not Equals",filterStartsWith:"Starts With",filterWeakEquals:"Equals",filteringByColumn:"Filtering by {column} - {filterType} {filterValue}",goToFirstPage:"Go to first page",goToLastPage:"Go to last page",goToNextPage:"Go to next page",goToPreviousPage:"Go to previous page",grab:"Grab",groupByColumn:"Group by {column}",groupedBy:"Grouped by ",hideAll:"Hide all",hideColumn:"Hide {column} column",max:"Max",min:"Min",move:"Move",noRecordsToDisplay:"No records to display",noResultsFound:"No results found",of:"of",or:"or",pin:"Pin",pinToLeft:"Pin to left",pinToRight:"Pin to right",resetColumnSize:"Reset column size",resetOrder:"Reset order",rowActions:"Row Actions",rowNumber:"#",rowNumbers:"Row Numbers",rowsPerPage:"Rows per page",save:"Save",search:"Search",selectedCountOfRowCountRowsSelected:"{selectedCount} of {rowCount} row(s) selected",select:"Select",showAll:"Show all",showAllColumns:"Show all columns",showHideColumns:"Show/Hide columns",showHideFilters:"Show/Hide filters",showHideSearch:"Show/Hide search",sortByColumnAsc:"Sort by {column} ascending",sortByColumnDesc:"Sort by {column} descending",sortedByColumnAsc:"Sorted by {column} ascending",sortedByColumnDesc:"Sorted by {column} descending",thenBy:", then by ",toggleDensity:"Toggle density",toggleFullScreen:"Toggle full screen",toggleSelectAll:"Toggle select all",toggleSelectRow:"Toggle select row",toggleVisibility:"Toggle visibility",ungroupByColumn:"Ungroup by {column}",unpin:"Unpin",unpinAll:"Unpin all"},PFt={filterVariant:"text",maxSize:1e3,minSize:40,size:180},mDe={columnDefType:"display",enableClickToCopy:!1,enableColumnActions:!1,enableColumnDragging:!1,enableColumnFilter:!1,enableColumnOrdering:!1,enableEditing:!1,enableGlobalFilter:!1,enableGrouping:!1,enableHiding:!1,enableResizing:!1,enableSorting:!1},NFt=e=>{var t,{aggregationFns:n,autoResetExpanded:r=!1,columnFilterDisplayMode:i="subheader",columnResizeDirection:s,columnResizeMode:o="onChange",createDisplayMode:a="modal",defaultColumn:u,defaultDisplayColumn:l,editDisplayMode:c="modal",enableBatchRowSelection:d=!0,enableBottomToolbar:f=!0,enableColumnActions:h=!0,enableColumnFilters:p=!0,enableColumnOrdering:m=!1,enableColumnPinning:y=!1,enableColumnResizing:v=!1,enableColumnVirtualization:w,enableDensityToggle:x=!0,enableExpandAll:S=!0,enableExpanding:E,enableFacetedValues:T=!1,enableFilterMatchHighlighting:A=!0,enableFilters:I=!0,enableFullScreenToggle:k=!0,enableGlobalFilter:D=!0,enableGlobalFilterRankedResults:M=!0,enableGrouping:z=!1,enableHeaderActionsHoverReveal:O=!1,enableHiding:$=!0,enableMultiRowSelection:F=!0,enableMultiSort:B=!0,enablePagination:q=!0,enableRowPinning:G=!1,enableRowSelection:K=!1,enableRowVirtualization:L,enableSelectAll:V=!0,enableSorting:X=!0,enableStickyHeader:H=!1,enableTableFooter:Q=!0,enableTableHead:Z=!0,enableToolbarInternalActions:ne=!0,enableTopToolbar:ue=!0,filterFns:le,icons:ce,layoutMode:ge,localization:se,manualFiltering:te,manualGrouping:Ee,manualPagination:we,manualSorting:De,paginationDisplayMode:Le="default",positionActionsColumn:Ne="first",positionCreatingRow:Te="top",positionExpandColumn:qe="first",positionGlobalFilter:Qe="right",positionPagination:Ue="bottom",positionToolbarAlertBanner:Ve="top",positionToolbarDropZone:Se="top",rowNumberDisplayMode:it="static",rowPinningDisplayMode:It="sticky",selectAllMode:Re="page",sortingFns:Ge}=e,ot=In(e,["aggregationFns","autoResetExpanded","columnFilterDisplayMode","columnResizeDirection","columnResizeMode","createDisplayMode","defaultColumn","defaultDisplayColumn","editDisplayMode","enableBatchRowSelection","enableBottomToolbar","enableColumnActions","enableColumnFilters","enableColumnOrdering","enableColumnPinning","enableColumnResizing","enableColumnVirtualization","enableDensityToggle","enableExpandAll","enableExpanding","enableFacetedValues","enableFilterMatchHighlighting","enableFilters","enableFullScreenToggle","enableGlobalFilter","enableGlobalFilterRankedResults","enableGrouping","enableHeaderActionsHoverReveal","enableHiding","enableMultiRowSelection","enableMultiSort","enablePagination","enableRowPinning","enableRowSelection","enableRowVirtualization","enableSelectAll","enableSorting","enableStickyHeader","enableTableFooter","enableTableHead","enableToolbarInternalActions","enableTopToolbar","filterFns","icons","layoutMode","localization","manualFiltering","manualGrouping","manualPagination","manualSorting","paginationDisplayMode","positionActionsColumn","positionCreatingRow","positionExpandColumn","positionGlobalFilter","positionPagination","positionToolbarAlertBanner","positionToolbarDropZone","rowNumberDisplayMode","rowPinningDisplayMode","selectAllMode","sortingFns"]);const ct=Bu();return ce=P.useMemo(()=>Object.assign(Object.assign({},RFt),ce),[ce]),se=P.useMemo(()=>Object.assign(Object.assign({},kFt),se),[se]),n=P.useMemo(()=>Object.assign(Object.assign({},pFt),n),[]),le=P.useMemo(()=>Object.assign(Object.assign({},mFt),le),[]),Ge=P.useMemo(()=>Object.assign(Object.assign({},uFt),Ge),[]),u=P.useMemo(()=>Object.assign(Object.assign({},PFt),u),[u]),l=P.useMemo(()=>Object.assign(Object.assign({},mDe),l),[l]),[w,L]=P.useMemo(()=>[w,L],[]),s||(s=ct.dir||"ltr"),ge=ge||(v?"grid-no-grow":"semantic"),ge==="semantic"&&(L||w)&&(ge="grid"),L&&(H=!0),q===!1&&we===void 0&&(we=!0),!((t=ot.data)===null||t===void 0)&&t.length||(te=!0,Ee=!0,we=!0,De=!0),Object.assign({aggregationFns:n,autoResetExpanded:r,columnFilterDisplayMode:i,columnResizeDirection:s,columnResizeMode:o,createDisplayMode:a,defaultColumn:u,defaultDisplayColumn:l,editDisplayMode:c,enableBatchRowSelection:d,enableBottomToolbar:f,enableColumnActions:h,enableColumnFilters:p,enableColumnOrdering:m,enableColumnPinning:y,enableColumnResizing:v,enableColumnVirtualization:w,enableDensityToggle:x,enableExpandAll:S,enableExpanding:E,enableFacetedValues:T,enableFilterMatchHighlighting:A,enableFilters:I,enableFullScreenToggle:k,enableGlobalFilter:D,enableGlobalFilterRankedResults:M,enableGrouping:z,enableHeaderActionsHoverReveal:O,enableHiding:$,enableMultiRowSelection:F,enableMultiSort:B,enablePagination:q,enableRowPinning:G,enableRowSelection:K,enableRowVirtualization:L,enableSelectAll:V,enableSorting:X,enableStickyHeader:H,enableTableFooter:Q,enableTableHead:Z,enableToolbarInternalActions:ne,enableTopToolbar:ue,filterFns:le,getCoreRowModel:y$t(),getExpandedRowModel:E||z?v$t():void 0,getFacetedMinMaxValues:T?b$t():void 0,getFacetedRowModel:T?x$t():void 0,getFacetedUniqueValues:T?E$t():void 0,getFilteredRowModel:p||D||I?S$t():void 0,getGroupedRowModel:z?T$t():void 0,getPaginationRowModel:q?A$t():void 0,getSortedRowModel:X?I$t():void 0,getSubRows:Mt=>Mt==null?void 0:Mt.subRows,icons:ce,layoutMode:ge,localization:se,manualFiltering:te,manualGrouping:Ee,manualPagination:we,manualSorting:De,paginationDisplayMode:Le,positionActionsColumn:Ne,positionCreatingRow:Te,positionExpandColumn:qe,positionGlobalFilter:Qe,positionPagination:Ue,positionToolbarAlertBanner:Ve,positionToolbarDropZone:Se,rowNumberDisplayMode:it,rowPinningDisplayMode:It,selectAllMode:Re,sortingFns:Ge},ot)},xz={children:null,style:{minWidth:0,padding:0,width:0}},OFt=e=>Object.assign(Object.assign(Object.assign(Object.assign({},f_({id:"mrt-row-spacer",size:0,tableOptions:e})),{grow:!0}),mDe),{mantineTableBodyCellProps:xz,mantineTableFooterCellProps:xz,mantineTableHeadCellProps:xz}),DFt=e=>{const{getIsSomeRowsPinned:t,getPrePaginationRowModel:n,getState:r,options:{enablePagination:i,enableRowPinning:s,rowCount:o}}=e,{columnOrder:a,density:u,globalFilter:l,isFullScreen:c,isLoading:d,pagination:f,showSkeletons:h,sorting:p}=r(),m=e.options.columns.length,y=o??n().rows.length,v=P.useReducer(()=>({}),{})[1],w=P.useRef(),x=P.useRef();P.useEffect(()=>{typeof window<"u"&&(w.current=document.body.style.height)},[]),P.useEffect(()=>{if(typeof window<"u")if(c)x.current=document.body.getBoundingClientRect().top,document.body.style.height="100dvh";else{if(document.body.style.height=w.current,!x.current)return;window.scrollTo({behavior:"instant",top:-1*x.current})}},[c]),P.useEffect(()=>{m!==a.length&&e.setColumnOrder(fZ(e.options))},[m]),P.useEffect(()=>{if(!i||d||h)return;const{pageIndex:E,pageSize:T}=f;E*T>=y&&e.setPageIndex(Math.ceil(y/T)-1)},[y]);const S=P.useRef(p);P.useEffect(()=>{p.length&&(S.current=p)},[p]),P.useEffect(()=>{rDe(e)&&(l?e.setSorting([]):e.setSorting(()=>S.current||[]))},[l]),P.useEffect(()=>{s&&t()&&setTimeout(()=>{v()},150)},[u])},MFt=e=>{var t,n,r,i,s,o,a,u,l,c,d,f,h,p,m,y,v,w,x,S,E,T,A,I,k,D,M,z,O,$,F,B,q;const G=P.useRef(null),K=P.useRef(null),L=P.useRef({}),V=P.useRef({}),X=P.useRef(null),H=P.useRef(null),Q=P.useRef({}),Z=P.useRef(null),ne=P.useRef(null),ue=P.useRef(null),le=P.useRef(null),ce=P.useMemo(()=>{var $r,Vr,vi;const ve=($r=e.initialState)!==null&&$r!==void 0?$r:{};return ve.columnOrder=(Vr=ve.columnOrder)!==null&&Vr!==void 0?Vr:fZ(Object.assign(Object.assign({},e),{state:Object.assign(Object.assign({},e.initialState),e.state)})),ve.globalFilterFn=(vi=e.globalFilterFn)!==null&&vi!==void 0?vi:"fuzzy",ve},[]);e.initialState=ce;const[ge,se]=P.useState((t=ce.creatingRow)!==null&&t!==void 0?t:null),[te,Ee]=P.useState(()=>Object.assign({},...b$(e.columns).map($r=>{var Vr,vi,ve,he;return{[Ox($r)]:$r.filterFn instanceof Function?(Vr=$r.filterFn.name)!==null&&Vr!==void 0?Vr:"custom":(he=(vi=$r.filterFn)!==null&&vi!==void 0?vi:(ve=ce==null?void 0:ce.columnFilterFns)===null||ve===void 0?void 0:ve[Ox($r)])!==null&&he!==void 0?he:rFt($r)}}))),[we,De]=P.useState((n=ce.columnOrder)!==null&&n!==void 0?n:[]),[Le,Ne]=P.useState((r=ce.columnSizingInfo)!==null&&r!==void 0?r:{}),[Te,qe]=P.useState((i=ce==null?void 0:ce.density)!==null&&i!==void 0?i:"md"),[Qe,Ue]=P.useState((s=ce.draggingColumn)!==null&&s!==void 0?s:null),[Ve,Se]=P.useState((o=ce.draggingRow)!==null&&o!==void 0?o:null),[it,It]=P.useState((a=ce.editingCell)!==null&&a!==void 0?a:null),[Re,Ge]=P.useState((u=ce.editingRow)!==null&&u!==void 0?u:null),[ot,ct]=P.useState((l=ce.globalFilterFn)!==null&&l!==void 0?l:"fuzzy"),[Mt,Nn]=P.useState((c=ce.grouping)!==null&&c!==void 0?c:[]),[Rr,xr]=P.useState((d=ce.hoveredColumn)!==null&&d!==void 0?d:null),[Mr,fn]=P.useState((f=ce.hoveredRow)!==null&&f!==void 0?f:null),[qn,lr]=P.useState((h=ce==null?void 0:ce.isFullScreen)!==null&&h!==void 0?h:!1),[cr,bs]=P.useState((p=ce==null?void 0:ce.pagination)!==null&&p!==void 0?p:{pageIndex:0,pageSize:10}),[Ai,ci]=P.useState((m=ce==null?void 0:ce.showAlertBanner)!==null&&m!==void 0?m:!1),[Wn,or]=P.useState((y=ce==null?void 0:ce.showColumnFilters)!==null&&y!==void 0?y:!1),[Wi,qu]=P.useState((v=ce==null?void 0:ce.showGlobalFilter)!==null&&v!==void 0?v:!1),[$o,lu]=P.useState((w=ce==null?void 0:ce.showToolbarDropZone)!==null&&w!==void 0?w:!1);e.state=Object.assign({columnFilterFns:te,columnOrder:we,columnSizingInfo:Le,creatingRow:ge,density:Te,draggingColumn:Qe,draggingRow:Ve,editingCell:it,editingRow:Re,globalFilterFn:ot,grouping:Mt,hoveredColumn:Rr,hoveredRow:Mr,isFullScreen:qn,pagination:cr,showAlertBanner:Ai,showColumnFilters:Wn,showGlobalFilter:Wi,showToolbarDropZone:$o},e.state);const Rt=e,yi=P.useRef([]);Rt.columns=Rt.state.columnSizingInfo.isResizingColumn||Rt.state.draggingColumn||Rt.state.draggingRow?yi.current:KOe({columnDefs:[...[QOe(Rt)&&AFt(Rt),JOe(Rt)&&xFt(Rt),dZ(Rt)&&bFt(Rt),cZ(Rt)&&SFt(Rt),ZOe(Rt)&&IFt(Rt),eDe(Rt)&&TFt(Rt)].filter(Boolean),...Rt.columns,...[tDe(Rt)&&OFt(Rt)].filter(Boolean)],tableOptions:Rt}),yi.current=Rt.columns,Rt.data=P.useMemo(()=>(Rt.state.isLoading||Rt.state.showSkeletons)&&!Rt.data.length?[...Array(Math.min(Rt.state.pagination.pageSize,20)).fill(null)].map(()=>Object.assign({},...b$(Rt.columns).map($r=>({[Ox($r)]:null})))):Rt.data,[Rt.data,Rt.state.isLoading,Rt.state.showSkeletons]);const xn=R$t(Object.assign(Object.assign({onColumnOrderChange:De,onColumnSizingInfoChange:Ne,onGroupingChange:Nn,onPaginationChange:bs},Rt),{globalFilterFn:(x=Rt.filterFns)===null||x===void 0?void 0:x[ot??"fuzzy"]}));return xn.refs={bottomToolbarRef:K,editInputRefs:L,filterInputRefs:V,lastSelectedRowId:G,searchInputRef:X,tableContainerRef:H,tableFooterRef:le,tableHeadCellRefs:Q,tableHeadRef:ue,tablePaperRef:Z,topToolbarRef:ne},xn.setCreatingRow=$r=>{var Vr,vi;let ve=$r;$r===!0&&(ve=iFt(xn)),(vi=(Vr=Rt==null?void 0:Rt.onCreatingRowChange)===null||Vr===void 0?void 0:Vr.call(Rt,ve))!==null&&vi!==void 0||se(ve)},xn.setColumnFilterFns=(S=Rt.onColumnFilterFnsChange)!==null&&S!==void 0?S:Ee,xn.setDensity=(E=Rt.onDensityChange)!==null&&E!==void 0?E:qe,xn.setDraggingColumn=(T=Rt.onDraggingColumnChange)!==null&&T!==void 0?T:Ue,xn.setDraggingRow=(A=Rt.onDraggingRowChange)!==null&&A!==void 0?A:Se,xn.setEditingCell=(I=Rt.onEditingCellChange)!==null&&I!==void 0?I:It,xn.setEditingRow=(k=Rt.onEditingRowChange)!==null&&k!==void 0?k:Ge,xn.setGlobalFilterFn=(D=Rt.onGlobalFilterFnChange)!==null&&D!==void 0?D:ct,xn.setHoveredColumn=(M=Rt.onHoveredColumnChange)!==null&&M!==void 0?M:xr,xn.setHoveredRow=(z=Rt.onHoveredRowChange)!==null&&z!==void 0?z:fn,xn.setIsFullScreen=(O=Rt.onIsFullScreenChange)!==null&&O!==void 0?O:lr,xn.setShowAlertBanner=($=Rt.onShowAlertBannerChange)!==null&&$!==void 0?$:ci,xn.setShowColumnFilters=(F=Rt.onShowColumnFiltersChange)!==null&&F!==void 0?F:or,xn.setShowGlobalFilter=(B=Rt.onShowGlobalFilterChange)!==null&&B!==void 0?B:qu,xn.setShowToolbarDropZone=(q=Rt.onShowToolbarDropZoneChange)!==null&&q!==void 0?q:lu,DFt(xn),xn},gDe=e=>MFt(NFt(e)),yDe=(e,t)=>{const n=ROe(e);return t===void 0||(t>=0&&t<Math.max(e.startIndex-e.overscan,0)&&n.unshift(t),t>=0&&t>e.endIndex+e.overscan&&n.push(t)),n},$Ft=e=>{var t,n,r,i;const{getLeftLeafColumns:s,getRightLeafColumns:o,getState:a,getVisibleLeafColumns:u,options:{columnVirtualizerInstanceRef:l,columnVirtualizerOptions:c,enableColumnPinning:d,enableColumnVirtualization:f},refs:{tableContainerRef:h}}=e,{columnPinning:p,draggingColumn:m}=a();if(!f)return;const y=Lt(c,{table:e}),v=u(),[w,x]=P.useMemo(()=>d?[s().map(D=>D.getPinnedIndex()),o().map(D=>v.length-D.getPinnedIndex()-1).sort((D,M)=>D-M)]:[[],[]],[v.length,p,d]),S=w.length,E=x.length,T=P.useMemo(()=>m!=null&&m.id?v.findIndex(D=>D.id===(m==null?void 0:m.id)):void 0,[m==null?void 0:m.id]),A=POe(Object.assign({count:v.length,estimateSize:D=>v[D].getSize(),getScrollElement:()=>h.current,horizontal:!0,overscan:3,rangeExtractor:P.useCallback(D=>{const M=yDe(D,T);return!S&&!E?M:[...new Set([...w,...M,...x])]},[w,x,T])},y)),I=A.getVirtualItems();A.virtualColumns=I;const k=I.length;if(k){const D=A.getTotalSize(),M=((t=I[S])===null||t===void 0?void 0:t.start)||0,z=((n=I[w.length-1])===null||n===void 0?void 0:n.end)||0,O=((r=I[k-E])===null||r===void 0?void 0:r.start)||0,$=((i=I[k-E-1])===null||i===void 0?void 0:i.end)||0;A.virtualPaddingLeft=M-z,A.virtualPaddingRight=D-$-(E?D-O:0)}return l&&(l.current=A),A},LFt=(e,t)=>{var n;const{getRowModel:r,getState:i,options:{enableRowVirtualization:s,renderDetailPanel:o,rowVirtualizerInstanceRef:a,rowVirtualizerOptions:u},refs:{tableContainerRef:l}}=e,{density:c,draggingRow:d,expanded:f}=i();if(!s)return;const h=Lt(u,{table:e}),p=(n=t==null?void 0:t.length)!==null&&n!==void 0?n:r().rows.length,m=c==="xs"?42.7:c==="md"?54.7:70.7,y=POe(Object.assign({count:o?p*2:p,estimateSize:v=>o&&v%2===1?f===!0?100:0:m,getScrollElement:()=>l.current,measureElement:typeof window<"u"&&navigator.userAgent.indexOf("Firefox")===-1?v=>v==null?void 0:v.getBoundingClientRect().height:void 0,overscan:4,rangeExtractor:P.useCallback(v=>{var w;return yDe(v,(w=d==null?void 0:d.index)!==null&&w!==void 0?w:0)},[d])},h));return y.virtualRows=y.getVirtualItems(),a&&(a.current=y),y},FFt=e=>{const{getRowModel:t,getState:n,options:{data:r,enableGlobalFilterRankedResults:i,positionCreatingRow:s}}=e,{creatingRow:o,expanded:a,globalFilter:u,pagination:l,rowPinning:c,sorting:d}=n();return P.useMemo(()=>nDe(e),[o,r,i,a,t().rows,u,l.pageIndex,l.pageSize,s,c,d])};var jFt={root:"MRT_TablePaper-module_root__q0v5L"},Ez={root:"MRT_TableContainer-module_root__JIsGB","root-sticky":"MRT_TableContainer-module_root-sticky__uC4qx","root-fullscreen":"MRT_TableContainer-module_root-fullscreen__aM8Jg"},rge={root:"MRT_Table-module_root__ms2uS","root-grid":"MRT_Table-module_root-grid__2Pynz"},Zd={root:"MRT_TableBody-module_root__kGhRy","root-grid":"MRT_TableBody-module_root-grid__WdOGg","root-no-rows":"MRT_TableBody-module_root-no-rows__iyi9K","root-virtualized":"MRT_TableBody-module_root-virtualized__TxPAi","empty-row-tr-grid":"MRT_TableBody-module_empty-row-tr-grid__LTgxw","empty-row-td-grid":"MRT_TableBody-module_empty-row-td-grid__pzlgG","empty-row-td-content":"MRT_TableBody-module_empty-row-td-content__Cc2XW",pinned:"MRT_TableBody-module_pinned__XHpcs"},Sz={root:"MRT_TableBodyRow-module_root__2c3D4","root-grid":"MRT_TableBodyRow-module_root-grid__AwXTe","root-virtualized":"MRT_TableBodyRow-module_root-virtualized__zYgxq"},e1={root:"MRT_TableBodyCell-module_root__Wf-zi","root-grid":"MRT_TableBodyCell-module_root-grid__zIuC-","root-virtualized":"MRT_TableBodyCell-module_root-virtualized__jLl8R","root-data-col":"MRT_TableBodyCell-module_root-data-col__HHcxc","root-nowrap":"MRT_TableBodyCell-module_root-nowrap__-k1Jo","root-cursor-pointer":"MRT_TableBodyCell-module_root-cursor-pointer__4kw7J","root-editable-hover":"MRT_TableBodyCell-module_root-editable-hover__2DKSa"};const Tz=["string","number"],BFt=["text","autocomplete"],ige=({cell:e,renderedColumnIndex:t=0,renderedRowIndex:n=0,table:r})=>{var i,s;const{getState:o,options:{enableFilterMatchHighlighting:a,mantineHighlightProps:u}}=r,{column:l,row:c}=e,{columnDef:d}=l,{globalFilter:f,globalFilterFn:h}=o(),p=l.getFilterValue(),m=Lt(u,{cell:e,column:l,row:c,table:r});let y=e.getIsAggregated()&&d.AggregatedCell?d.AggregatedCell({cell:e,column:l,row:c,table:r}):c.getIsGrouped()&&!e.getIsGrouped()?null:e.getIsGrouped()&&d.GroupedCell?d.GroupedCell({cell:e,column:l,row:c,table:r}):void 0;const v=y!==void 0;if(v||(y=e.renderValue()),a&&d.enableFilterMatchHighlighting!==!1&&y&&Tz.includes(typeof y)&&(p&&Tz.includes(typeof p)&&BFt.includes(d.filterVariant)||f&&Tz.includes(typeof f)&&l.getCanGlobalFilter())){let w=((s=(i=l.getFilterValue())!==null&&i!==void 0?i:f)!==null&&s!==void 0?s:"").toString();(p?d._filterFn:h)==="fuzzy"&&(w=w.split(" ")),y=_.jsx(JG,Object.assign({color:"yellow.3",highlight:w},m,{children:y==null?void 0:y.toString()}))}return d.Cell&&!v&&(y=d.Cell({cell:e,column:l,renderedCellValue:y,renderedColumnIndex:t,renderedRowIndex:n,row:c,table:r})),y};var zFt={root:"MRT_CopyButton-module_root__mkXy4"};const UFt=e=>{var{cell:t,children:n,table:r}=e,i=In(e,["cell","children","table"]);const{options:{localization:{clickToCopy:s,copiedToClipboard:o},mantineCopyButtonProps:a}}=r,{column:u,row:l}=t,{columnDef:c}=u,d={cell:t,column:u,row:l,table:r},f=Object.assign(Object.assign(Object.assign({},Lt(a,d)),Lt(c.mantineCopyButtonProps,d)),i);return _.jsx(g_e,{value:t.getValue(),children:({copied:h,copy:p})=>{var m;return _.jsx(jn,{color:h?"green":void 0,label:(m=f==null?void 0:f.title)!==null&&m!==void 0?m:h?o:s,openDelay:1e3,withinPortal:!0,children:_.jsx(Ps,Object.assign({},f,{className:Dt("mrt-copy-button",zFt.root,f==null?void 0:f.className),onClick:y=>{y.stopPropagation(),p()},role:"presentation",title:void 0,children:n}))})}})},vDe=e=>{var t,{cell:n,table:r}=e,i=In(e,["cell","table"]);const{getState:s,options:{createDisplayMode:o,editDisplayMode:a,mantineEditSelectProps:u,mantineEditTextInputProps:l},refs:{editInputRefs:c},setCreatingRow:d,setEditingCell:f,setEditingRow:h}=r,{column:p,row:m}=n,{columnDef:y}=p,{creatingRow:v,editingRow:w}=s(),x=(v==null?void 0:v.id)===m.id,S=(w==null?void 0:w.id)===m.id,E=y.editVariant==="select",[T,A]=P.useState(()=>n.getValue()),I={cell:n,column:p,row:m,table:r},k=Object.assign(Object.assign(Object.assign({},Lt(l,I)),Lt(y.mantineEditTextInputProps,I)),i),D=Object.assign(Object.assign(Object.assign({},Lt(u,I)),Lt(y.mantineEditSelectProps,I)),i),M=F=>{m._valuesCache[p.id]=F,x?d(m):S&&h(m)},z=F=>{var B;(B=k.onBlur)===null||B===void 0||B.call(k,F),M(T),f(null)},O=F=>{var B,q;(B=k.onKeyDown)===null||B===void 0||B.call(k,F),F.key==="Enter"&&((q=c.current[n.id])===null||q===void 0||q.blur())};if(y.Edit)return(t=y.Edit)===null||t===void 0?void 0:t.call(y,{cell:n,column:p,row:m,table:r});const $={disabled:Lt(y.enableEditing,m)===!1,label:["custom","modal"].includes(x?o:a)?p.columnDef.header:void 0,name:n.id,onClick:F=>{var B;F.stopPropagation(),(B=k==null?void 0:k.onClick)===null||B===void 0||B.call(k,F)},placeholder:["custom","modal"].includes(x?o:a)?void 0:y.header,value:T,variant:a==="table"?"unstyled":"default"};return E?_.jsx(mp,Object.assign({},$,{searchable:!0,value:T},D,{onBlur:z,onChange:F=>{var B;(B=D.onChange)===null||B===void 0||B.call(D,F),A(F)},onClick:F=>{var B;F.stopPropagation(),(B=D==null?void 0:D.onClick)===null||B===void 0||B.call(D,F)},ref:F=>{F&&(c.current[n.id]=F,D.ref&&(D.ref.current=F))}})):_.jsx(Af,Object.assign({},$,{onKeyDown:O,value:T??""},k,{onBlur:z,onChange:F=>{var B;(B=k.onChange)===null||B===void 0||B.call(k,F),A(F.target.value)},onClick:F=>{var B;F.stopPropagation(),(B=k==null?void 0:k.onClick)===null||B===void 0||B.call(k,F)},ref:F=>{F&&(c.current[n.id]=F,k.ref&&(k.ref.current=F))}}))},bDe=e=>{var t,n,r,i,s,o,a,{cell:u,numRows:l=1,renderedColumnIndex:c=0,renderedRowIndex:d=0,rowRef:f,table:h,virtualCell:p}=e,m=In(e,["cell","numRows","renderedColumnIndex","renderedRowIndex","rowRef","table","virtualCell"]);const y=Bu(),{getState:v,options:{columnResizeDirection:w,columnResizeMode:x,createDisplayMode:S,editDisplayMode:E,enableClickToCopy:T,enableColumnOrdering:A,enableColumnPinning:I,enableEditing:k,enableGrouping:D,layoutMode:M,mantineSkeletonProps:z,mantineTableBodyCellProps:O},refs:{editInputRefs:$},setEditingCell:F,setHoveredColumn:B}=h,{columnSizingInfo:q,creatingRow:G,density:K,draggingColumn:L,editingCell:V,editingRow:X,hoveredColumn:H,isLoading:Q,showSkeletons:Z}=v(),{column:ne,row:ue}=u,{columnDef:le}=ne,{columnDefType:ce}=le,ge={cell:u,column:ne,renderedColumnIndex:c,renderedRowIndex:d,row:ue,table:h},se=Object.assign(Object.assign(Object.assign({},Lt(O,ge)),Lt(le.mantineTableBodyCellProps,ge)),m),te=Lt(z,ge),[Ee,we]=P.useState(100);P.useEffect(()=>{if(!Q&&!Z||Ee!==100)return;const Re=ne.getSize();we(ce==="display"?Re/2:Math.round(Math.random()*(Re-Re/3)+Re/3))},[Q,Z]);const De={minWidth:`max(calc(var(--col-${Of(ne==null?void 0:ne.id)}-size) * 1px), ${(t=le.minSize)!==null&&t!==void 0?t:30}px)`,width:`calc(var(--col-${Of(ne.id)}-size) * 1px)`};M==="grid"?De.flex=`${[0,!1].includes(le.grow)?0:`var(--col-${Of(ne.id)}-size)`} 0 auto`:M==="grid-no-grow"&&(De.flex=`${+(le.grow||0)} 0 auto`);const Le=(L==null?void 0:L.id)===ne.id,Ne=(H==null?void 0:H.id)===ne.id,Te=I&&le.columnDefType!=="group"&&ne.getIsPinned(),qe=!u.getIsPlaceholder()&&Lt(k,ue)&&Lt(le.enableEditing,ue)!==!1,Qe=qe&&!["custom","modal"].includes(E)&&(E==="table"||(X==null?void 0:X.id)===ue.id||(V==null?void 0:V.id)===u.id)&&!ue.getIsGrouped(),Ue=qe&&S==="row"&&(G==null?void 0:G.id)===ue.id,Ve=Lt(T,u)||Lt(le.enableClickToCopy,u)&&Lt(le.enableClickToCopy,u)!==!1,Se=Re=>{var Ge;(Ge=se==null?void 0:se.onDoubleClick)===null||Ge===void 0||Ge.call(se,Re),qe&&E==="cell"&&(F(u),setTimeout(()=>{var ot;const ct=$.current[u.id];ct&&(ct.focus(),(ot=ct.select)===null||ot===void 0||ot.call(ct))},100))},it=Re=>{var Ge;(Ge=se==null?void 0:se.onDragEnter)===null||Ge===void 0||Ge.call(se,Re),D&&(H==null?void 0:H.id)==="drop-zone"&&B(null),A&&L&&B(le.enableColumnOrdering!==!1?ne:null)},It={cell:u,renderedColumnIndex:c,renderedRowIndex:d,table:h};return _.jsx(dF,Object.assign({"data-column-pinned":Te||void 0,"data-dragging-column":Le||void 0,"data-first-right-pinned":Te==="right"&&ne.getIsFirstColumn(Te)||void 0,"data-hovered-column-target":Ne||void 0,"data-index":c,"data-last-left-pinned":Te==="left"&&ne.getIsLastColumn(Te)||void 0,"data-last-row":d===l-1||void 0,"data-resizing":x==="onChange"&&(q==null?void 0:q.isResizingColumn)===ne.id&&w||void 0},se,{__vars:Object.assign({"--mrt-cell-align":(n=se.align)!==null&&n!==void 0?n:y.dir==="rtl"?"right":"left","--mrt-table-cell-left":Te==="left"?`${ne.getStart(Te)}`:void 0,"--mrt-table-cell-right":Te==="right"?`${ne.getAfter(Te)}`:void 0},se.__vars),className:Dt(e1.root,(M==null?void 0:M.startsWith("grid"))&&e1["root-grid"],p&&e1["root-virtualized"],qe&&E==="cell"&&e1["root-cursor-pointer"],qe&&["cell","table"].includes(E??"")&&ce!=="display"&&e1["root-editable-hover"],ce==="data"&&e1["root-data-col"],K==="xs"&&e1["root-nowrap"],se==null?void 0:se.className),onDoubleClick:Se,onDragEnter:it,style:Re=>Object.assign(Object.assign({},De),Lt(se.style,Re)),children:(r=se.children)!==null&&r!==void 0?r:_.jsxs(_.Fragment,{children:[u.getIsPlaceholder()?(s=(i=le.PlaceholderCell)===null||i===void 0?void 0:i.call(le,{cell:u,column:ne,row:ue,table:h}))!==null&&s!==void 0?s:null:Z!==!1&&(Q||Z)?_.jsx(gY,Object.assign({height:20,width:Ee},te)):ce==="display"&&(["mrt-row-expand","mrt-row-numbers","mrt-row-select"].includes(ne.id)||!ue.getIsGrouped())?(o=le.Cell)===null||o===void 0?void 0:o.call(le,Object.assign({column:ne,renderedCellValue:u.renderValue(),row:ue,rowRef:f},It)):Ue||Qe?_.jsx(vDe,{cell:u,table:h}):Ve&&le.enableClickToCopy!==!1?_.jsx(UFt,{cell:u,table:h,children:_.jsx(ige,Object.assign({},It))}):_.jsx(ige,Object.assign({},It)),u.getIsGrouped()&&!le.GroupedCell&&_.jsxs(_.Fragment,{children:[" (",(a=ue.subRows)===null||a===void 0?void 0:a.length,")"]})]})}))},VFt=P.memo(bDe,(e,t)=>t.cell===e.cell);var t1={root:"MRT_TableDetailPanel-module_root__vQAlM","root-grid":"MRT_TableDetailPanel-module_root-grid__7UMC6","root-virtual-row":"MRT_TableDetailPanel-module_root-virtual-row__r-X4Z",inner:"MRT_TableDetailPanel-module_inner__o-Fk-","inner-grid":"MRT_TableDetailPanel-module_inner-grid__WLZgF","inner-expanded":"MRT_TableDetailPanel-module_inner-expanded__6tg9T","inner-virtual":"MRT_TableDetailPanel-module_inner-virtual__TItRy"};const HFt=e=>{var t,n,{parentRowRef:r,renderedRowIndex:i=0,row:s,rowVirtualizer:o,striped:a,table:u,virtualRow:l}=e,c=In(e,["parentRowRef","renderedRowIndex","row","rowVirtualizer","striped","table","virtualRow"]);const{getState:d,getVisibleLeafColumns:f,options:{layoutMode:h,mantineDetailPanelProps:p,mantineTableBodyRowProps:m,renderDetailPanel:y}}=u,{isLoading:v}=d(),w=Lt(m,{isDetailPanel:!0,row:s,table:u}),x=Object.assign(Object.assign({},Lt(p,{row:s,table:u})),c),S=!v&&s.getIsExpanded()&&(y==null?void 0:y({row:s,table:u}));return _.jsx(Vm,Object.assign({"data-index":y?i*2+1:i,"data-striped":a,ref:E=>{var T;E&&((T=o==null?void 0:o.measureElement)===null||T===void 0||T.call(o,E))}},w,{__vars:Object.assign({"--mrt-parent-row-height":l?`${(n=(t=r.current)===null||t===void 0?void 0:t.getBoundingClientRect())===null||n===void 0?void 0:n.height}px`:void 0,"--mrt-virtual-row-start":l?`${l.start}px`:void 0},w==null?void 0:w.__vars),className:Dt("mantine-Table-tr-detail-panel",t1.root,(h==null?void 0:h.startsWith("grid"))&&t1["root-grid"],l&&t1["root-virtual-row"],w==null?void 0:w.className),children:_.jsx(dF,Object.assign({colSpan:f().length,component:"td"},x,{__vars:{"--mrt-inner-width":`${u.getTotalSize()}px`},className:Dt("mantine-Table-td-detail-panel",t1.inner,(h==null?void 0:h.startsWith("grid"))&&t1["inner-grid"],s.getIsExpanded()&&t1["inner-expanded"],l&&t1["inner-virtual"]),p:s.getIsExpanded()&&S?"md":0,children:o?s.getIsExpanded()&&S:_.jsx(iv,{in:s.getIsExpanded(),children:S})}))}))},zD=e=>{var t,n,r,{columnVirtualizer:i,numRows:s,pinnedRowIds:o,renderedRowIndex:a=0,row:u,rowVirtualizer:l,table:c,tableProps:d,virtualRow:f}=e,h=In(e,["columnVirtualizer","numRows","pinnedRowIds","renderedRowIndex","row","rowVirtualizer","table","tableProps","virtualRow"]);const{getState:p,options:{enableRowOrdering:m,enableRowPinning:y,enableStickyFooter:v,enableStickyHeader:w,layoutMode:x,mantineTableBodyRowProps:S,memoMode:E,renderDetailPanel:T,rowPinningDisplayMode:A},refs:{tableFooterRef:I,tableHeadRef:k},setHoveredRow:D}=c,{density:M,draggingColumn:z,draggingRow:O,editingCell:$,editingRow:F,hoveredRow:B,isFullScreen:q,rowPinning:G}=p(),K=u.getVisibleCells(),{virtualColumns:L,virtualPaddingLeft:V,virtualPaddingRight:X}=i??{},H=_$({row:u,table:c}),Q=y&&u.getIsPinned(),Z=Q&&(A==null?void 0:A.includes("sticky"))&&"sticky",ne=(O==null?void 0:O.id)===u.id,ue=(B==null?void 0:B.id)===u.id,le=Object.assign(Object.assign({},Lt(S,{renderedRowIndex:a,row:u,table:c})),h),[ce,ge]=P.useMemo(()=>!y||!Z||!o||!u.getIsPinned()?[]:[[...o].reverse().indexOf(u.id),o.indexOf(u.id)],[o,G]),se=(w||q)&&((t=k.current)===null||t===void 0?void 0:t.clientHeight)||0,te=v&&((n=I.current)===null||n===void 0?void 0:n.clientHeight)||0,Ee=parseInt((r=le==null?void 0:le.style)===null||r===void 0?void 0:r.height,10)||(M==="xs"?37:M==="md"?53:69),we=Ne=>{m&&O&&D(u)},De=P.useRef(null);let Le=d.striped;return Le&&(Le===!0&&(Le="odd"),Le==="odd"&&a%2!==0&&(Le=!1),Le==="even"&&a%2===0&&(Le=!1)),_.jsxs(_.Fragment,{children:[_.jsxs(Vm,Object.assign({"data-dragging-row":ne||void 0,"data-hovered-row-target":ue||void 0,"data-index":T?a*2:a,"data-row-pinned":Z||Q||void 0,"data-selected":H||void 0,"data-striped":Le,onDragEnter:we,ref:Ne=>{Ne&&(De.current=Ne,l==null||l.measureElement(Ne))}},le,{__vars:Object.assign(Object.assign({},le==null?void 0:le.__vars),{"--mrt-pinned-row-bottom":!f&&ce!==void 0&&Q?`${ce*Ee+(v?te-1:0)}`:void 0,"--mrt-pinned-row-top":f?void 0:ge!==void 0&&Q?`${ge*Ee+(w||q?se-1:0)}`:void 0,"--mrt-virtual-row-start":f?`${f.start}`:void 0}),className:Dt(Sz.root,(x==null?void 0:x.startsWith("grid"))&&Sz["root-grid"],f&&Sz["root-virtualized"],le==null?void 0:le.className),children:[V?_.jsx(ke,{component:"td",display:"flex",w:V}):null,(L??u.getVisibleCells()).map((Ne,Te)=>{let qe=Ne;i&&(Te=Ne.index,qe=K[Te]);const Qe={cell:qe,numRows:s,renderedColumnIndex:Te,renderedRowIndex:a,rowRef:De,table:c,virtualCell:i?Ne:void 0};return E==="cells"&&qe.column.columnDef.columnDefType==="data"&&!z&&!O&&($==null?void 0:$.id)!==qe.id&&(F==null?void 0:F.id)!==u.id?_.jsx(VFt,Object.assign({},Qe),qe.id):_.jsx(bDe,Object.assign({},Qe),qe.id)}),X?_.jsx(ke,{component:"td",display:"flex",w:X}):null]})),T&&!u.getIsGrouped()&&_.jsx(HFt,{parentRowRef:De,renderedRowIndex:a,row:u,rowVirtualizer:l,striped:Le,table:c,virtualRow:f})]})},Cz=P.memo(zD,(e,t)=>e.row===t.row),_De=e=>{var t,n,r,i,s,{columnVirtualizer:o,table:a,tableProps:u}=e,l=In(e,["columnVirtualizer","table","tableProps"]);const{getBottomRows:c,getIsSomeRowsPinned:d,getRowModel:f,getState:h,getTopRows:p,options:{enableStickyFooter:m,enableStickyHeader:y,layoutMode:v,localization:w,mantineTableBodyProps:x,memoMode:S,renderDetailPanel:E,renderEmptyRowsFallback:T,rowPinningDisplayMode:A},refs:{tableFooterRef:I,tableHeadRef:k,tablePaperRef:D}}=a,{columnFilters:M,globalFilter:z,isFullScreen:O,rowPinning:$}=h(),F=Object.assign(Object.assign({},Lt(x,{table:a})),l),B=(y||O)&&((t=k.current)===null||t===void 0?void 0:t.clientHeight)||0,q=m&&((n=I.current)===null||n===void 0?void 0:n.clientHeight)||0,G=P.useMemo(()=>{var H,Q;return!(!((H=$.bottom)===null||H===void 0)&&H.length)&&!(!((Q=$.top)===null||Q===void 0)&&Q.length)?[]:f().rows.filter(Z=>Z.getIsPinned()).map(Z=>Z.id)},[$,f().rows]),K=FFt(a),L=LFt(a,K),{virtualRows:V}=L??{},X={columnVirtualizer:o,numRows:K.length,table:a,tableProps:u};return _.jsxs(_.Fragment,{children:[!(A!=null&&A.includes("sticky"))&&d("top")&&_.jsx(RA,Object.assign({},F,{__vars:Object.assign({"--mrt-table-head-height":`${B}`},F==null?void 0:F.__vars),className:Dt(Zd.pinned,(v==null?void 0:v.startsWith("grid"))&&Zd["root-grid"],F==null?void 0:F.className),children:p().map((H,Q)=>{const Z=Object.assign(Object.assign({},X),{renderedRowIndex:Q,row:H});return S==="rows"?_.jsx(Cz,Object.assign({},Z),H.id):_.jsx(zD,Object.assign({},Z),H.id)})})),_.jsx(RA,Object.assign({},F,{__vars:Object.assign({"--mrt-table-body-height":L?`${L.getTotalSize()}px`:void 0},F==null?void 0:F.__vars),className:Dt(Zd.root,(v==null?void 0:v.startsWith("grid"))&&Zd["root-grid"],!K.length&&Zd["root-no-rows"],L&&Zd["root-virtualized"],F==null?void 0:F.className),children:(r=F==null?void 0:F.children)!==null&&r!==void 0?r:K.length?_.jsx(_.Fragment,{children:(V??K).map((H,Q)=>{if(L)if(E){if(H.index%2===1)return null;Q=H.index/2}else Q=H.index;const Z=L?K[Q]:H,ne=Object.assign(Object.assign({},X),{pinnedRowIds:G,renderedRowIndex:Q,row:Z,rowVirtualizer:L,virtualRow:L?H:void 0}),ue=`${Z.id}-${Z.index}`;return S==="rows"?_.jsx(Cz,Object.assign({},ne),ue):_.jsx(zD,Object.assign({},ne),ue)})}):_.jsx("tr",{className:Dt("mrt-table-body-row",(v==null?void 0:v.startsWith("grid"))&&Zd["empty-row-tr-grid"]),children:_.jsx("td",{className:Dt("mrt-table-body-cell",(v==null?void 0:v.startsWith("grid"))&&Zd["empty-row-td-grid"]),colSpan:a.getVisibleLeafColumns().length,children:(i=T==null?void 0:T({table:a}))!==null&&i!==void 0?i:_.jsx(dt,{__vars:{"--mrt-paper-width":`${(s=D.current)===null||s===void 0?void 0:s.clientWidth}`},className:Dt(Zd["empty-row-td-content"]),children:z||M.length?w.noResultsFound:w.noRecordsToDisplay})})})})),!(A!=null&&A.includes("sticky"))&&d("bottom")&&_.jsx(RA,Object.assign({},F,{__vars:Object.assign({"--mrt-table-footer-height":`${q}`},F==null?void 0:F.__vars),className:Dt(Zd.pinned,(v==null?void 0:v.startsWith("grid"))&&Zd["root-grid"],F==null?void 0:F.className),children:c().map((H,Q)=>{const Z=Object.assign(Object.assign({},X),{renderedRowIndex:Q,row:H});return S==="rows"?_.jsx(Cz,Object.assign({},Z),H.id):_.jsx(zD,Object.assign({},Z),H.id)})}))]})},qFt=P.memo(_De,(e,t)=>e.table.options.data===t.table.options.data);var Az={root:"MRT_TableFooter-module_root__-JXpw",grid:"MRT_TableFooter-module_grid__J3Ga-",sticky:"MRT_TableFooter-module_sticky__GcoK6"},sge={root:"MRT_TableFooterRow-module_root__EuoPr","layout-mode-grid":"MRT_TableFooterRow-module_layout-mode-grid__dUEMF"},Iz={root:"MRT_TableFooterCell-module_root__d8Scs",grid:"MRT_TableFooterCell-module_grid__H9jLk",group:"MRT_TableFooterCell-module_group__l3-p-"};const WFt=e=>{var t,n,r,i,s,{footer:o,renderedColumnIndex:a,table:u}=e,l=In(e,["footer","renderedColumnIndex","table"]);const c=Bu(),{options:{enableColumnPinning:d,layoutMode:f,mantineTableFooterCellProps:h}}=u,{column:p}=o,{columnDef:m}=p,{columnDefType:y}=m,v=d&&m.columnDefType!=="group"&&p.getIsPinned(),w={column:p,table:u},x=Object.assign(Object.assign(Object.assign({},Lt(h,w)),Lt(m.mantineTableFooterCellProps,w)),l),S={minWidth:`max(calc(var(--header-${Of(o==null?void 0:o.id)}-size) * 1px), ${(t=m.minSize)!==null&&t!==void 0?t:30}px)`,width:`calc(var(--header-${Of(o.id)}-size) * 1px)`};return f==="grid"?S.flex=`${[0,!1].includes(m.grow)?0:`var(--header-${Of(o.id)}-size)`} 0 auto`:f==="grid-no-grow"&&(S.flex=`${+(m.grow||0)} 0 auto`),_.jsx(Gx,Object.assign({colSpan:o.colSpan,"data-column-pinned":v||void 0,"data-first-right-pinned":v==="right"&&p.getIsFirstColumn(v)||void 0,"data-index":a,"data-last-left-pinned":v==="left"&&p.getIsLastColumn(v)||void 0},x,{__vars:Object.assign({"--mrt-cell-align":(n=x.align)!==null&&n!==void 0?n:y==="group"?"center":c.dir==="rtl"?"right":"left","--mrt-table-cell-left":v==="left"?`${p.getStart(v)}`:void 0,"--mrt-table-cell-right":v==="right"?`${p.getAfter(v)}`:void 0},x==null?void 0:x.__vars),className:Dt(Iz.root,(f==null?void 0:f.startsWith("grid"))&&Iz.grid,y==="group"&&Iz.group,x==null?void 0:x.className),style:E=>Object.assign(Object.assign({},S),Lt(x.style,E)),children:(r=x.children)!==null&&r!==void 0?r:o.isPlaceholder?null:(s=(i=Lt(m.Footer,{column:p,footer:o,table:u}))!==null&&i!==void 0?i:m.footer)!==null&&s!==void 0?s:null}))},GFt=e=>{var t,{columnVirtualizer:n,footerGroup:r,table:i}=e,s=In(e,["columnVirtualizer","footerGroup","table"]);const{options:{layoutMode:o,mantineTableFooterRowProps:a}}=i,{virtualColumns:u,virtualPaddingLeft:l,virtualPaddingRight:c}=n??{};if(!(!((t=r.headers)===null||t===void 0)&&t.some(f=>typeof f.column.columnDef.footer=="string"&&!!f.column.columnDef.footer||f.column.columnDef.Footer)))return null;const d=Object.assign(Object.assign({},Lt(a,{footerGroup:r,table:i})),s);return _.jsxs(Vm,Object.assign({className:Dt(sge.root,(o==null?void 0:o.startsWith("grid"))&&sge["layout-mode-grid"])},d,{children:[l?_.jsx(ke,{component:"th",display:"flex",w:l}):null,(u??r.headers).map((f,h)=>{let p=f;return n&&(h=f.index,p=r.headers[h]),_.jsx(WFt,{footer:p,renderedColumnIndex:h,table:i},p.id)}),c?_.jsx(ke,{component:"th",display:"flex",w:c}):null]}))},YFt=e=>{var{columnVirtualizer:t,table:n}=e,r=In(e,["columnVirtualizer","table"]);const{getFooterGroups:i,getState:s,options:{enableStickyFooter:o,layoutMode:a,mantineTableFooterProps:u},refs:{tableFooterRef:l}}=n,{isFullScreen:c}=s(),d=Object.assign(Object.assign({},Lt(u,{table:n})),r),f=(c||o)&&o!==!1;return _.jsx(xY,Object.assign({},d,{className:Dt(Az.root,d==null?void 0:d.className,f&&Az.sticky,(a==null?void 0:a.startsWith("grid"))&&Az.grid),ref:h=>{l.current=h,d!=null&&d.ref&&(d.ref.current=h)},children:i().map(h=>_.jsx(GFt,{columnVirtualizer:t,footerGroup:h,table:n},h.id))}))};var p0={root:"MRT_TableHead-module_root__j9NkO","root-grid":"MRT_TableHead-module_root-grid__c3aGl","root-table-row-group":"MRT_TableHead-module_root-table-row-group__d9FO4","root-sticky":"MRT_TableHead-module_root-sticky__0kuDE","banner-tr":"MRT_TableHead-module_banner-tr__EhT-x","banner-th":"MRT_TableHead-module_banner-th__KwM5a",grid:"MRT_TableHead-module_grid__OJ-td"},Rz={root:"MRT_TableHeadRow-module_root__hUKv4","layout-mode-grid":"MRT_TableHeadRow-module_layout-mode-grid__4ZGri",sticky:"MRT_TableHeadRow-module_sticky__Ej7Ax"},ua={root:"MRT_TableHeadCell-module_root__6y50a","root-grid":"MRT_TableHeadCell-module_root-grid__bAf1d","root-virtualized":"MRT_TableHeadCell-module_root-virtualized__CWLit","root-no-select":"MRT_TableHeadCell-module_root-no-select__BEOVU",content:"MRT_TableHeadCell-module_content__-pzSK","content-spaced":"MRT_TableHeadCell-module_content-spaced__S85Aa","content-center":"MRT_TableHeadCell-module_content-center__c-17L","content-right":"MRT_TableHeadCell-module_content-right__NSRZU","content-wrapper":"MRT_TableHeadCell-module_content-wrapper__py6aJ","content-wrapper-hidden-overflow":"MRT_TableHeadCell-module_content-wrapper-hidden-overflow__QY40r","content-wrapper-nowrap":"MRT_TableHeadCell-module_content-wrapper-nowrap__-4aIg",labels:"MRT_TableHeadCell-module_labels__oiMSr","labels-right":"MRT_TableHeadCell-module_labels-right__6ZJp-","labels-center":"MRT_TableHeadCell-module_labels-center__MM9q8","labels-sortable":"MRT_TableHeadCell-module_labels-sortable__tyuLr","labels-data":"MRT_TableHeadCell-module_labels-data__PvFGO","content-actions":"MRT_TableHeadCell-module_content-actions__utxbm"},KFt={"filter-mode-label":"MRT_TableHeadCellFilterContainer-module_filter-mode-label__8reK-"},XFt={root:"MRT_FilterCheckBox-module_root__59h9r"};const QFt=e=>{var t,n,r,{column:i,table:s}=e,o=In(e,["column","table"]);const{getState:a,options:{localization:u,mantineFilterCheckboxProps:l}}=s,{density:c}=a(),{columnDef:d}=i,f={column:i,table:s},h=Object.assign(Object.assign(Object.assign({},Lt(l,f)),Lt(d.mantineFilterCheckboxProps,f)),o),p=(t=u.filterByColumn)===null||t===void 0?void 0:t.replace("{column}",d.header),m=i.getFilterValue();return _.jsx(jn,{label:(n=h==null?void 0:h.title)!==null&&n!==void 0?n:p,openDelay:1e3,withinPortal:!0,children:_.jsx(Lf,Object.assign({checked:m==="true",className:Dt("mrt-filter-checkbox",XFt.root),indeterminate:m===void 0,label:(r=h.title)!==null&&r!==void 0?r:p,size:c==="xs"?"sm":"md"},h,{onChange:y=>{var v;i.setFilterValue(i.getFilterValue()===void 0?"true":i.getFilterValue()==="true"?"false":void 0),(v=h==null?void 0:h.onChange)===null||v===void 0||v.call(h,y)},onClick:y=>{var v;y.stopPropagation(),(v=h==null?void 0:h.onClick)===null||v===void 0||v.call(h,y)},title:void 0}))})};var JFt={root:"MRT_FilterRangeFields-module_root__KfCcg"},fC={root:"MRT_FilterTextInput-module_root__Ss8Ql","date-filter":"MRT_FilterTextInput-module_date-filter__jOBLB","range-filter":"MRT_FilterTextInput-module_range-filter__JQHAL","not-filter-chip":"MRT_FilterTextInput-module_not-filter-chip__u8b1y","filter-chip-badge":"MRT_FilterTextInput-module_filter-chip-badge__Sel2k"};const GH=e=>{var t,n,r,i,s,o,a,u,{header:l,rangeFilterIndex:c,table:d}=e,f=In(e,["header","rangeFilterIndex","table"]);const{options:{columnFilterDisplayMode:h,columnFilterModeOptions:p,icons:{IconX:m},localization:y,mantineFilterAutocompleteProps:v,mantineFilterDateInputProps:w,mantineFilterMultiSelectProps:x={clearable:!0},mantineFilterSelectProps:S,mantineFilterTextInputProps:E,manualFiltering:T},refs:{filterInputRefs:A},setColumnFilterFns:I}=d,{column:k}=l,{columnDef:D}=k,M={column:k,rangeFilterIndex:c,table:d},z=Object.assign(Object.assign(Object.assign({},Lt(E,M)),Lt(D.mantineFilterTextInputProps,M)),f),O=Object.assign(Object.assign({},Lt(S,M)),Lt(D.mantineFilterSelectProps,M)),$=Object.assign(Object.assign({},Lt(x,M)),Lt(D.mantineFilterMultiSelectProps,M)),F=Object.assign(Object.assign({},Lt(w,M)),Lt(D.mantineFilterDateInputProps,M)),B=Object.assign(Object.assign({},Lt(v,M)),Lt(D.mantineFilterAutocompleteProps,M)),q=D.filterVariant==="range"||D.filterVariant==="date-range"||c!==void 0,G=D.filterVariant==="select",K=D.filterVariant==="multi-select",L=D.filterVariant==="date"||D.filterVariant==="date-range",V=D.filterVariant==="autocomplete",X=(t=D==null?void 0:D.columnFilterModeOptions)!==null&&t!==void 0?t:p,H=D._filterFn,Q=["empty","notEmpty"].includes(H)?mZ(y,H):"",Z=q?c===0?y.min:c===1?y.max:"":(n=z==null?void 0:z.placeholder)!==null&&n!==void 0?n:(r=y.filterByColumn)===null||r===void 0?void 0:r.replace("{column}",String(D.header)),ne=k.getFacetedUniqueValues(),ue=P.useMemo(()=>{var Te,qe,Qe;return((Qe=(qe=(Te=B==null?void 0:B.data)!==null&&Te!==void 0?Te:O==null?void 0:O.data)!==null&&qe!==void 0?qe:$==null?void 0:$.data)!==null&&Qe!==void 0?Qe:(V||G||K)&&ne?Array.from(ne.keys()).filter(Ue=>Ue!==null).sort((Ue,Ve)=>Ue.localeCompare(Ve)):[]).filter(Ue=>Ue!=null)},[B==null?void 0:B.data,ne,V,K,G,$==null?void 0:$.data,O==null?void 0:O.data]),le=P.useRef(!1),[ce,ge]=P.useState(()=>{var Te,qe;return K?k.getFilterValue()||[]:q?((Te=k.getFilterValue())===null||Te===void 0?void 0:Te[c])||"":(qe=k.getFilterValue())!==null&&qe!==void 0?qe:""}),[se]=S1e(ce,T?400:200);P.useEffect(()=>{le.current&&(q?k.setFilterValue(Te=>{const qe=Array.isArray(Te)?Te:["",""];return qe[c]=se,qe}):k.setFilterValue(se??void 0))},[se]),P.useEffect(()=>{if(!le.current){le.current=!0;return}const Te=k.getFilterValue();Te===void 0?te():ge(q&&c!==void 0?(Te??["",""])[c]:Te??"")},[k.getFilterValue()]);const te=()=>{K?(ge([]),k.setFilterValue([])):q?(ge(""),k.setFilterValue(Te=>{const qe=Array.isArray(Te)?Te:["",""];return qe[c]=void 0,qe})):(ge(""),k.setFilterValue(void 0))};if(D.Filter)return _.jsx(_.Fragment,{children:(i=D.Filter)===null||i===void 0?void 0:i.call(D,{column:k,header:l,rangeFilterIndex:c,table:d})});const Ee=()=>{ge(""),k.setFilterValue(void 0),I(Te=>{var qe;return Object.assign(Object.assign({},Te),{[l.id]:(qe=X==null?void 0:X[0])!==null&&qe!==void 0?qe:"fuzzy"})})},we={"aria-label":Z,className:Dt("mrt-filter-text-input",fC.root,L?fC["date-filter"]:q?fC["range-filter"]:!Q&&fC["not-filter-chip"]),disabled:!!Q,onChange:ge,onClick:Te=>Te.stopPropagation(),placeholder:Z,style:Object.assign({},K?$==null?void 0:$.style:G?O==null?void 0:O.style:L?F==null?void 0:F.style:z==null?void 0:z.style),title:Z,value:ce,variant:"unstyled"},{className:De}=we,Le=In(we,["className"]),Ne=ce?_.jsx(mr,{"aria-label":y.clearFilter,color:"var(--mantine-color-gray-7)",onClick:te,size:"sm",title:(s=y.clearFilter)!==null&&s!==void 0?s:"",variant:"transparent",children:_.jsx(m,{})}):null;return Q?_.jsx(ke,{style:Le.style,children:_.jsx(Tf,{className:fC["filter-chip-badge"],onClick:Ee,rightSection:Ne,size:"lg",children:Q})}):K?_.jsx(JL,Object.assign({},Le,{searchable:!0},$,{className:Dt(De,$.className),data:ue,onChange:Te=>ge(Te),ref:Te=>{Te&&(A.current[`${k.id}-${c??0}`]=Te,$.ref&&($.ref.current=Te))},rightSection:!((o=ce==null?void 0:ce.toString())===null||o===void 0)&&o.length&&($!=null&&$.clearable)?Ne:void 0,style:Le.style})):G?_.jsx(mp,Object.assign({},Le,{clearable:!0,searchable:!0},O,{className:Dt(De,O.className),clearButtonProps:{size:"md"},data:ue,ref:Te=>{Te&&(A.current[`${k.id}-${c??0}`]=Te,O.ref&&(O.ref.current=Te))},style:Le.style})):L?_.jsx(uZ,Object.assign({},Le,{allowDeselect:!0,clearable:!0,popoverProps:{withinPortal:h!=="popover"}},F,{className:Dt(De,F.className),onChange:Te=>Le.onChange(Te===null?"":Te),ref:Te=>{Te&&(A.current[`${k.id}-${c??0}`]=Te,F.ref&&(F.ref.current=Te))},style:Le.style})):V?_.jsx(jG,Object.assign({},Le,{onChange:Te=>ge(Te),rightSection:!((a=ce==null?void 0:ce.toString())===null||a===void 0)&&a.length?Ne:void 0},B,{className:Dt(De,B.className),data:ue,ref:Te=>{Te&&(A.current[`${k.id}-${c??0}`]=Te,B.ref&&(B.ref.current=Te))},style:Le.style})):_.jsx(Af,Object.assign({},Le,{onChange:Te=>ge(Te.target.value),rightSection:!((u=ce==null?void 0:ce.toString())===null||u===void 0)&&u.length?Ne:void 0},z,{className:Dt(De,z.className),mt:0,ref:Te=>{Te&&(A.current[`${k.id}-${c??0}`]=Te,z.ref&&(z.ref.current=Te))},style:Le.style}))},ZFt=e=>{var{header:t,table:n}=e,r=In(e,["header","table"]);return _.jsxs(ke,Object.assign({},r,{className:Dt("mrt-filter-range-fields",JFt.root,r.className),children:[_.jsx(GH,{header:t,rangeFilterIndex:0,table:n}),_.jsx(GH,{header:t,rangeFilterIndex:1,table:n})]}))};var e6t={root:"MRT_FilterRangeSlider-module_root__uwYEk"};const t6t=e=>{var t,{header:n,table:r}=e,i=In(e,["header","table"]);const{options:{mantineFilterRangeSliderProps:s},refs:{filterInputRefs:o}}=r,{column:a}=n,{columnDef:u}=a,l={column:a,table:r},c=Object.assign(Object.assign(Object.assign({},Lt(s,l)),Lt(u.mantineFilterRangeSliderProps,l)),i);let[d,f]=c.min!==void 0&&c.max!==void 0?[c.min,c.max]:(t=a.getFacetedMinMaxValues())!==null&&t!==void 0?t:[0,1];Array.isArray(d)&&(d=d[0]),Array.isArray(f)&&(f=f[0]),d===null&&(d=0),f===null&&(f=1);const[h,p]=P.useState([d,f]),m=a.getFilterValue(),y=P.useRef(!1);return P.useEffect(()=>{y.current&&(m===void 0?p([d,f]):Array.isArray(m)&&p(m)),y.current=!0},[m,d,f]),_.jsx(cF,Object.assign({className:Dt("mrt-filter-range-slider",e6t.root),max:f,min:d,onChange:v=>{p(v)},onChangeEnd:v=>{Array.isArray(v)&&(v[0]<=d&&v[1]>=f?a.setFilterValue(void 0):a.setFilterValue(v))},value:h},c,{ref:v=>{v&&(o.current[`${a.id}-0`]=v,c!=null&&c.ref&&(c.ref=v))}}))};var n6t={symbol:"MRT_FilterOptionMenu-module_symbol__a1Bsy"};const r6t=e=>[{divider:!1,label:e.filterFuzzy,option:"fuzzy",symbol:""},{divider:!1,label:e.filterContains,option:"contains",symbol:"*"},{divider:!1,label:e.filterStartsWith,option:"startsWith",symbol:"a"},{divider:!0,label:e.filterEndsWith,option:"endsWith",symbol:"z"},{divider:!1,label:e.filterEquals,option:"equals",symbol:"="},{divider:!0,label:e.filterNotEquals,option:"notEquals",symbol:""},{divider:!1,label:e.filterBetween,option:"between",symbol:""},{divider:!0,label:e.filterBetweenInclusive,option:"betweenInclusive",symbol:""},{divider:!1,label:e.filterGreaterThan,option:"greaterThan",symbol:">"},{divider:!1,label:e.filterGreaterThanOrEqualTo,option:"greaterThanOrEqualTo",symbol:""},{divider:!1,label:e.filterLessThan,option:"lessThan",symbol:"<"},{divider:!0,label:e.filterLessThanOrEqualTo,option:"lessThanOrEqualTo",symbol:""},{divider:!1,label:e.filterEmpty,option:"empty",symbol:""},{divider:!1,label:e.filterNotEmpty,option:"notEmpty",symbol:"!"}],TO=["between","betweenInclusive","inNumberRange"],kz=["empty","notEmpty"],i6t=["arrIncludesSome","arrIncludesAll","arrIncludes"],oge=["range-slider","date-range","range"],wDe=({header:e,onSelect:t,table:n})=>{var r,i,s,o;const{getState:a,options:{columnFilterModeOptions:u,globalFilterModeOptions:l,localization:c,renderColumnFilterModeMenuItems:d,renderGlobalFilterModeMenuItems:f},setColumnFilterFns:h,setGlobalFilterFn:p}=n,{globalFilterFn:m}=a(),{column:y}=e??{},{columnDef:v}=y??{},w=y==null?void 0:y.getFilterValue();let x=(r=v==null?void 0:v.columnFilterModeOptions)!==null&&r!==void 0?r:u;oge.includes(v==null?void 0:v.filterVariant)&&(x=[...TO,...x??[]].filter(A=>TO.includes(A)));const S=P.useMemo(()=>r6t(c).filter(A=>v?x===void 0||(x==null?void 0:x.includes(A.option)):(!l||l.includes(A.option))&&["contains","fuzzy","startsWith"].includes(A.option)),[]),E=A=>{var I;const k=(I=v==null?void 0:v._filterFn)!==null&&I!==void 0?I:"";!e||!y?p(A):A!==k&&(h(D=>Object.assign(Object.assign({},D),{[e.id]:A})),kz.includes(A)?w!==" "&&!kz.includes(k)?y.setFilterValue(" "):w&&y.setFilterValue(w):(v==null?void 0:v.filterVariant)==="multi-select"||i6t.includes(A)?w instanceof String||w!=null&&w.length?y.setFilterValue([]):w&&y.setFilterValue(w):oge.includes(v==null?void 0:v.filterVariant)||TO.includes(A)?!Array.isArray(w)||!(w!=null&&w.every(D=>D===""))&&!TO.includes(k)?y.setFilterValue(["",""]):y.setFilterValue(w):Array.isArray(w)?y.setFilterValue(""):w===" "&&kz.includes(k)?y.setFilterValue(void 0):y.setFilterValue(w)),t==null||t()},T=e&&v?v._filterFn:m;return _.jsx(Dn.Dropdown,{children:(o=e&&y&&v?(s=(i=v.renderColumnFilterModeMenuItems)===null||i===void 0?void 0:i.call(v,{column:y,internalFilterOptions:S,onSelectFilterMode:E,table:n}))!==null&&s!==void 0?s:d==null?void 0:d({column:y,internalFilterOptions:S,onSelectFilterMode:E,table:n}):f==null?void 0:f({internalFilterOptions:S,onSelectFilterMode:E,table:n}))!==null&&o!==void 0?o:S.map(({divider:A,label:I,option:k,symbol:D},M)=>_.jsxs(P.Fragment,{children:[_.jsx(Dn.Item,{color:k===T?"blue":void 0,leftSection:_.jsx("span",{className:n6t.symbol,children:D}),onClick:()=>E(k),value:k,children:I}),A&&_.jsx(Dn.Divider,{})]},M))})},xDe=e=>{var t,n,{header:r,table:i}=e,s=In(e,["header","table"]);const{getState:o,options:{columnFilterDisplayMode:a,columnFilterModeOptions:u,enableColumnFilterModes:l,icons:{IconFilterCog:c},localization:d},refs:{filterInputRefs:f}}=i,{showColumnFilters:h}=o(),{column:p}=r,{columnDef:m}=p,y=m._filterFn,v=(t=m==null?void 0:m.columnFilterModeOptions)!==null&&t!==void 0?t:u,w=l&&m.enableColumnFilterModes!==!1&&(v===void 0||!!(v!=null&&v.length));return _.jsx(iv,{in:h||a==="popover",children:_.jsxs(Gt,Object.assign({direction:"column"},s,{children:[_.jsxs(Gt,{align:"flex-end",children:[m.filterVariant==="checkbox"?_.jsx(QFt,{column:p,table:i}):m.filterVariant==="range-slider"?_.jsx(t6t,{header:r,table:i}):["date-range","range"].includes((n=m.filterVariant)!==null&&n!==void 0?n:"")||["between","betweenInclusive","inNumberRange"].includes(m._filterFn)?_.jsx(ZFt,{header:r,table:i}):_.jsx(GH,{header:r,table:i}),w&&_.jsxs(Dn,{withinPortal:a!=="popover",children:[_.jsx(jn,{label:d.changeFilterMode,position:"bottom-start",withinPortal:!0,children:_.jsx(Dn.Target,{children:_.jsx(mr,{"aria-label":d.changeFilterMode,color:"gray",size:"md",variant:"subtle",children:_.jsx(c,{})})})}),_.jsx(wDe,{header:r,onSelect:()=>setTimeout(()=>{var x;return(x=f.current[`${p.id}-0`])===null||x===void 0?void 0:x.focus()},100),table:i})]})]}),w?_.jsx(dt,{c:"dimmed",className:KFt["filter-mode-label"],component:"label",children:d.filterMode.replace("{filterType}",mZ(d,y))}):null]}))})};var s6t={root:"MRT_TableHeadCellFilterLabel-module_root__Rur2R"};const o6t=e=>{var t,n,r,{header:i,table:s}=e,o=In(e,["header","table"]);const{options:{columnFilterDisplayMode:a,icons:{IconFilter:u},localization:l},refs:{filterInputRefs:c},setShowColumnFilters:d}=s,{column:f}=i,{columnDef:h}=f,p=f.getFilterValue(),[m,y]=P.useState(!1),v=Array.isArray(p)&&p.some(Boolean)||!!p&&!Array.isArray(p),w=h.filterVariant==="range"||["between","betweenInclusive","inNumberRange"].includes(h._filterFn),x=h._filterFn,S=a==="popover"&&!v?(t=l.filterByColumn)===null||t===void 0?void 0:t.replace("{column}",String(h.header)):l.filteringByColumn.replace("{column}",String(h.header)).replace("{filterType}",mZ(l,x)).replace("{filterValue}",`"${Array.isArray(f.getFilterValue())?f.getFilterValue().join(`" ${w?l.and:l.or} "`):f.getFilterValue()}"`).replace('" "',"");return _.jsx(_.Fragment,{children:_.jsxs(Ln,{keepMounted:h.filterVariant==="range-slider",onClose:()=>y(!1),opened:m,position:"top",shadow:"xl",width:360,withinPortal:!0,children:[_.jsx(Jf,{mounted:a==="popover"||!!f.getFilterValue()&&!w||w&&(!!(!((n=f.getFilterValue())===null||n===void 0)&&n[0])||!!(!((r=f.getFilterValue())===null||r===void 0)&&r[1])),transition:"scale",children:()=>_.jsx(Ln.Target,{children:_.jsx(jn,{disabled:m,label:S,multiline:!0,w:S.length>40?300:void 0,withinPortal:!0,children:_.jsx(mr,Object.assign({className:Dt("mrt-table-head-cell-filter-label-icon",s6t.root),size:18},w$("active",v),{onClick:E=>{E.stopPropagation(),a==="popover"?y(T=>!T):d(!0),setTimeout(()=>{const T=c.current[`${f.id}-0`];T==null||T.focus(),T==null||T.select()},100)}},o,{children:_.jsx(u,{size:"100%"})}))})})}),a==="popover"&&_.jsx(Ln.Dropdown,{onClick:E=>E.stopPropagation(),onKeyDown:E=>E.key==="Enter"&&y(!1),onMouseDown:E=>E.stopPropagation(),children:_.jsx(xDe,{header:i,table:s})})]})})},a6t=e=>{var{column:t,table:n,tableHeadCellRef:r}=e,i=In(e,["column","table","tableHeadCellRef"]);const{getState:s,options:{enableColumnOrdering:o,mantineColumnDragHandleProps:a},setColumnOrder:u,setDraggingColumn:l,setHoveredColumn:c}=n,{columnDef:d}=t,{columnOrder:f,draggingColumn:h,hoveredColumn:p}=s(),m={column:t,table:n},y=Object.assign(Object.assign(Object.assign({},Lt(a,m)),Lt(d.mantineColumnDragHandleProps,m)),i),v=x=>{var S;(S=y==null?void 0:y.onDragStart)===null||S===void 0||S.call(y,x),l(t),x.dataTransfer.setDragImage(r.current,0,0)},w=x=>{var S;(S=y==null?void 0:y.onDragEnd)===null||S===void 0||S.call(y,x),(p==null?void 0:p.id)==="drop-zone"?t.toggleGrouping():o&&p&&(p==null?void 0:p.id)!==(h==null?void 0:h.id)&&u(XOe(t,p,f)),l(null),c(null)};return _.jsx(gZ,{actionIconProps:y,onDragEnd:w,onDragStart:v,table:n})};var Pz={root:"MRT_TableHeadCellResizeHandle-module_root__paufe","root-ltr":"MRT_TableHeadCellResizeHandle-module_root-ltr__652AZ","root-rtl":"MRT_TableHeadCellResizeHandle-module_root-rtl__5VlSo","root-hide":"MRT_TableHeadCellResizeHandle-module_root-hide__-ILlD"};const u6t=e=>{var t,{header:n,table:r}=e,i=In(e,["header","table"]);const{getState:s,options:{columnResizeDirection:o,columnResizeMode:a},setColumnSizingInfo:u}=r,{density:l}=s(),{column:c}=n,d=n.getResizeHandler(),f=c.getIsResizing()&&a==="onEnd"?`translateX(${(o==="rtl"?-1:1)*((t=s().columnSizingInfo.deltaOffset)!==null&&t!==void 0?t:0)}px)`:void 0;return _.jsx(ke,Object.assign({onDoubleClick:()=>{u(h=>Object.assign(Object.assign({},h),{isResizingColumn:!1})),c.resetSize()},onMouseDown:d,onTouchStart:d,role:"separator"},i,{__vars:Object.assign({"--mrt-transform":f},i.__vars),className:Dt("mrt-table-head-cell-resize-handle",Pz.root,Pz[`root-${o}`],!n.subHeaders.length&&a==="onChange"&&Pz["root-hide"],l,i.className)}))};var age={"sort-icon":"MRT_TableHeadCellSortLabel-module_sort-icon__zs1xA","multi-sort-indicator":"MRT_TableHeadCellSortLabel-module_multi-sort-indicator__MGBj2"};const l6t=e=>{var{header:t,table:n}=e,r=In(e,["header","table"]);const{getState:i,options:{icons:{IconArrowsSort:s,IconSortAscending:o,IconSortDescending:a},localization:u}}=n,l=t.column,{columnDef:c}=l,{sorting:d}=i(),f=l.getIsSorted(),h=l.getSortIndex(),p=f?f==="desc"?u.sortedByColumnDesc.replace("{column}",c.header):u.sortedByColumnAsc.replace("{column}",c.header):l.getNextSortingOrder()==="desc"?u.sortByColumnDesc.replace("{column}",c.header):u.sortByColumnAsc.replace("{column}",c.header),m=_.jsx(mr,Object.assign({"aria-label":p},w$("sorted",f),r,{className:Dt("mrt-table-head-sort-button",age["sort-icon"],r.className),children:f==="desc"?_.jsx(a,{size:"100%"}):f==="asc"?_.jsx(o,{size:"100%"}):_.jsx(s,{size:"100%"})}));return _.jsx(jn,{label:p,openDelay:1e3,withinPortal:!0,children:d.length<2||h===-1?m:_.jsx(ZG,{className:Dt("mrt-table-head-multi-sort-indicator",age["multi-sort-indicator"]),inline:!0,label:h+1,offset:4,children:m})})};var uge={left:"MRT_ColumnActionMenu-module_left__cfNmY",right:"MRT_ColumnActionMenu-module_right__-nK56"};const c6t=e=>{var t,n,r,i,s,o,a,u,l,c,{header:d,table:f}=e,h=In(e,["header","table"]);const{getState:p,options:{columnFilterDisplayMode:m,enableColumnFilters:y,enableColumnPinning:v,enableColumnResizing:w,enableGrouping:x,enableHiding:S,enableSorting:E,enableSortingRemoval:T,icons:{IconArrowAutofitContent:A,IconBoxMultiple:I,IconClearAll:k,IconColumns:D,IconDotsVertical:M,IconEyeOff:z,IconFilter:O,IconFilterOff:$,IconPinned:F,IconPinnedOff:B,IconSortAscending:q,IconSortDescending:G},localization:K,mantineColumnActionsButtonProps:L,renderColumnActionsMenuItems:V},refs:{filterInputRefs:X},setColumnOrder:H,setColumnSizingInfo:Q,setShowColumnFilters:Z,toggleAllColumnsVisible:ne}=f,{column:ue}=d,{columnDef:le}=ue,{columnSizing:ce,columnVisibility:ge}=p(),se={column:ue,table:f},te=Object.assign(Object.assign({},Lt(L,se)),Lt(le.mantineColumnActionsButtonProps,se)),Ee=()=>{ue.clearSorting()},we=()=>{ue.toggleSorting(!1)},De=()=>{ue.toggleSorting(!0)},Le=()=>{Q(it=>Object.assign(Object.assign({},it),{isResizingColumn:!1})),ue.resetSize()},Ne=()=>{ue.toggleVisibility(!1)},Te=it=>{ue.pin(it)},qe=()=>{ue.toggleGrouping(),H(it=>["mrt-row-expand",...it])},Qe=()=>{ue.setFilterValue("")},Ue=()=>{Z(!0),setTimeout(()=>{var it;return(it=X.current[`${ue.id}-0`])===null||it===void 0?void 0:it.focus()},100)},Ve=()=>{ne(!0)},Se=_.jsxs(_.Fragment,{children:[E&&ue.getCanSort()&&_.jsxs(_.Fragment,{children:[T!==!1&&_.jsx(Dn.Item,{disabled:!ue.getIsSorted(),leftSection:_.jsx(k,{}),onClick:Ee,children:K.clearSort}),_.jsx(Dn.Item,{disabled:ue.getIsSorted()==="asc",leftSection:_.jsx(q,{}),onClick:we,children:(t=K.sortByColumnAsc)===null||t===void 0?void 0:t.replace("{column}",String(le.header))}),_.jsx(Dn.Item,{disabled:ue.getIsSorted()==="desc",leftSection:_.jsx(G,{}),onClick:De,children:(n=K.sortByColumnDesc)===null||n===void 0?void 0:n.replace("{column}",String(le.header))}),(y||x||S)&&_.jsx(Dn.Divider,{},3)]}),y&&m!=="popover"&&ue.getCanFilter()&&_.jsxs(_.Fragment,{children:[_.jsx(Dn.Item,{disabled:!ue.getFilterValue(),leftSection:_.jsx($,{}),onClick:Qe,children:K.clearFilter}),_.jsx(Dn.Item,{leftSection:_.jsx(O,{}),onClick:Ue,children:(r=K.filterByColumn)===null||r===void 0?void 0:r.replace("{column}",String(le.header))}),(x||S)&&_.jsx(Dn.Divider,{},2)]}),x&&ue.getCanGroup()&&_.jsxs(_.Fragment,{children:[_.jsx(Dn.Item,{leftSection:_.jsx(I,{}),onClick:qe,children:(i=K[ue.getIsGrouped()?"ungroupByColumn":"groupByColumn"])===null||i===void 0?void 0:i.replace("{column}",String(le.header))}),v&&_.jsx(Dn.Divider,{})]}),v&&ue.getCanPin()&&_.jsxs(_.Fragment,{children:[_.jsx(Dn.Item,{disabled:ue.getIsPinned()==="left"||!ue.getCanPin(),leftSection:_.jsx(F,{className:uge.left}),onClick:()=>Te("left"),children:K.pinToLeft}),_.jsx(Dn.Item,{disabled:ue.getIsPinned()==="right"||!ue.getCanPin(),leftSection:_.jsx(F,{className:uge.right}),onClick:()=>Te("right"),children:K.pinToRight}),_.jsx(Dn.Item,{disabled:!ue.getIsPinned(),leftSection:_.jsx(B,{}),onClick:()=>Te(!1),children:K.unpin}),S&&_.jsx(Dn.Divider,{})]}),w&&ue.getCanResize()&&_.jsx(Dn.Item,{disabled:!ce[ue.id],leftSection:_.jsx(A,{}),onClick:Le,children:K.resetColumnSize},0),S&&_.jsxs(_.Fragment,{children:[_.jsx(Dn.Item,{disabled:!ue.getCanHide(),leftSection:_.jsx(z,{}),onClick:Ne,children:(s=K.hideColumn)===null||s===void 0?void 0:s.replace("{column}",String(le.header))},0),_.jsx(Dn.Item,{disabled:!Object.values(ge).filter(it=>!it).length,leftSection:_.jsx(D,{}),onClick:Ve,children:(o=K.showAllColumns)===null||o===void 0?void 0:o.replace("{column}",String(le.header))},1)]})]});return _.jsxs(Dn,Object.assign({closeOnItemClick:!0,position:"bottom-start",withinPortal:!0},h,{children:[_.jsx(jn,{label:(a=te==null?void 0:te.title)!==null&&a!==void 0?a:K.columnActions,openDelay:1e3,withinPortal:!0,children:_.jsx(Dn.Target,{children:_.jsx(mr,Object.assign({"aria-label":K.columnActions,color:"gray",size:"sm",variant:"subtle"},te,{children:_.jsx(M,{size:"100%"})}))})}),_.jsx(Dn.Dropdown,{children:(c=(l=(u=le.renderColumnActionsMenuItems)===null||u===void 0?void 0:u.call(le,{column:ue,internalColumnMenuItems:Se,table:f}))!==null&&l!==void 0?l:V==null?void 0:V({column:ue,internalColumnMenuItems:Se,table:f}))!==null&&c!==void 0?c:Se})]}))},d6t=e=>{var t,n,r,i,s,o,{columnVirtualizer:a,header:u,renderedHeaderIndex:l=0,table:c}=e,d=In(e,["columnVirtualizer","header","renderedHeaderIndex","table"]);const f=Bu(),{getState:h,options:{columnFilterDisplayMode:p,columnResizeDirection:m,columnResizeMode:y,enableColumnActions:v,enableColumnDragging:w,enableColumnOrdering:x,enableColumnPinning:S,enableGrouping:E,enableHeaderActionsHoverReveal:T,enableMultiSort:A,layoutMode:I,mantineTableHeadCellProps:k},refs:{tableHeadCellRefs:D},setHoveredColumn:M}=c,{columnSizingInfo:z,draggingColumn:O,grouping:$,hoveredColumn:F}=h(),{column:B}=u,{columnDef:q}=B,{columnDefType:G}=q,K={column:B,table:c},L=Object.assign(Object.assign(Object.assign({},Lt(k,K)),Lt(q.mantineTableHeadCellProps,K)),d),V={minWidth:`max(calc(var(--header-${Of(u==null?void 0:u.id)}-size) * 1px), ${(t=q.minSize)!==null&&t!==void 0?t:30}px)`,width:`calc(var(--header-${Of(u.id)}-size) * 1px)`};I==="grid"?V.flex=`${[0,!1].includes(q.grow)?0:`var(--header-${Of(u.id)}-size)`} 0 auto`:I==="grid-no-grow"&&(V.flex=`${+(q.grow||0)} 0 auto`);const X=S&&q.columnDefType!=="group"&&B.getIsPinned(),H=(O==null?void 0:O.id)===B.id,Q=(F==null?void 0:F.id)===B.id,{hovered:Z,ref:ne}=p9e(),[ue,le]=P.useState(!1),ce=(v||q.enableColumnActions)&&q.enableColumnActions!==!1,ge=!T||ue||Z&&!c.getVisibleFlatColumns().find(De=>De.getIsResizing()),se=w!==!1&&q.enableColumnDragging!==!1&&(w||x&&q.enableColumnOrdering!==!1||E&&q.enableGrouping!==!1&&!$.includes(B.id))&&ge,te=P.useMemo(()=>{let De=0;return B.getCanSort()&&De++,ge&&(De+=1.75),se&&(De+=1.25),De},[ge,se]),Ee=De=>{E&&(F==null?void 0:F.id)==="drop-zone"&&M(null),x&&O&&G!=="group"&&M(q.enableColumnOrdering!==!1?B:null)},we=(q==null?void 0:q.Header)instanceof Function?(n=q==null?void 0:q.Header)===null||n===void 0?void 0:n.call(q,{column:B,header:u,table:c}):(r=q==null?void 0:q.Header)!==null&&r!==void 0?r:q.header;return _.jsxs(Gx,Object.assign({colSpan:u.colSpan,"data-column-pinned":X||void 0,"data-dragging-column":H||void 0,"data-first-right-pinned":X==="right"&&B.getIsFirstColumn(X)||void 0,"data-hovered-column-target":Q||void 0,"data-index":l,"data-last-left-pinned":X==="left"&&B.getIsLastColumn(X)||void 0,"data-resizing":y==="onChange"&&(z==null?void 0:z.isResizingColumn)===B.id&&m||void 0},L,{__vars:{"--mrt-table-cell-left":X==="left"?`${B.getStart(X)}`:void 0,"--mrt-table-cell-right":X==="right"?`${B.getAfter(X)}`:void 0},align:G==="group"?"center":f.dir==="rtl"?"right":"left",className:Dt(ua.root,(I==null?void 0:I.startsWith("grid"))&&ua["root-grid"],A&&B.getCanSort()&&ua["root-no-select"],a&&ua["root-virtualized"],L==null?void 0:L.className),onDragEnter:Ee,ref:De=>{var Le;De&&(D.current[B.id]=De,ne.current=De,G!=="group"&&((Le=a==null?void 0:a.measureElement)===null||Le===void 0||Le.call(a,De)))},style:De=>Object.assign(Object.assign({},V),Lt(L==null?void 0:L.style,De)),children:[u.isPlaceholder?null:(i=L.children)!==null&&i!==void 0?i:_.jsxs(Gt,{className:Dt("mrt-table-head-cell-content",ua.content,(G==="group"||(L==null?void 0:L.align)==="center")&&ua["content-center"],(L==null?void 0:L.align)==="right"&&ua["content-right"],B.getCanResize()&&ua["content-spaced"]),children:[_.jsxs(Gt,{__vars:{"--mrt-table-head-cell-labels-padding-left":`${te}`},className:Dt("mrt-table-head-cell-labels",ua.labels,B.getCanSort()&&G!=="group"&&ua["labels-sortable"],(L==null?void 0:L.align)==="right"?ua["labels-right"]:(L==null?void 0:L.align)==="center"&&ua["labels-center"],G==="data"&&ua["labels-data"]),onClick:B.getToggleSortingHandler(),children:[_.jsx(Gt,{className:Dt("mrt-table-head-cell-content-wrapper",ua["content-wrapper"],G==="data"&&ua["content-wrapper-hidden-overflow"],((o=(s=q.header)===null||s===void 0?void 0:s.length)!==null&&o!==void 0?o:0)<20&&ua["content-wrapper-nowrap"]),children:we}),B.getCanFilter()&&(B.getIsFiltered()||ge)&&_.jsx(o6t,{header:u,table:c}),B.getCanSort()&&(B.getIsSorted()||ge)&&_.jsx(l6t,{header:u,table:c})]}),G!=="group"&&_.jsxs(Gt,{className:Dt("mrt-table-head-cell-content-actions",ua["content-actions"]),children:[se&&_.jsx(a6t,{column:B,table:c,tableHeadCellRef:{current:D.current[B.id]}}),ce&&ge&&_.jsx(c6t,{header:u,table:c,opened:ue,onChange:le})]}),B.getCanResize()&&_.jsx(u6t,{header:u,table:c})]}),p==="subheader"&&B.getCanFilter()&&_.jsx(xDe,{header:u,table:c})]}))},f6t=e=>{var{columnVirtualizer:t,headerGroup:n,table:r}=e,i=In(e,["columnVirtualizer","headerGroup","table"]);const{getState:s,options:{enableStickyHeader:o,layoutMode:a,mantineTableHeadRowProps:u}}=r,{isFullScreen:l}=s(),{virtualColumns:c,virtualPaddingLeft:d,virtualPaddingRight:f}=t??{},h=Object.assign(Object.assign({},Lt(u,{headerGroup:n,table:r})),i);return _.jsxs(Vm,Object.assign({},h,{className:Dt(Rz.root,(o||l)&&Rz.sticky,(a==null?void 0:a.startsWith("grid"))&&Rz["layout-mode-grid"],h==null?void 0:h.className),children:[d?_.jsx(ke,{component:"th",display:"flex",w:d}):null,(c??n.headers).map((p,m)=>{let y=p;return t&&(m=p.index,y=n.headers[m]),_.jsx(d6t,{columnVirtualizer:t,header:y,renderedHeaderIndex:m,table:r},y.id)}),f?_.jsx(ke,{component:"th",display:"flex",w:f}):null]}))};var ww={alert:"MRT_ToolbarAlertBanner-module_alert__PAhUK","alert-stacked":"MRT_ToolbarAlertBanner-module_alert-stacked__HR7Nq","alert-bottom":"MRT_ToolbarAlertBanner-module_alert-bottom__u9L-S","alert-badge":"MRT_ToolbarAlertBanner-module_alert-badge__GwDmX","toolbar-alert":"MRT_ToolbarAlertBanner-module_toolbar-alert__3sJGU","head-overlay":"MRT_ToolbarAlertBanner-module_head-overlay__Hw7jK"};const yZ=e=>{var t,n,r,{stackAlertBanner:i,table:s}=e,o=In(e,["stackAlertBanner","table"]);const{getFilteredSelectedRowModel:a,getPrePaginationRowModel:u,getState:l,options:{enableRowSelection:c,enableSelectAll:d,icons:{IconX:f},localization:h,mantineToolbarAlertBannerBadgeProps:p,mantineToolbarAlertBannerProps:m,manualPagination:y,positionToolbarAlertBanner:v,renderToolbarAlertBannerContent:w,rowCount:x}}=s,{density:S,grouping:E,rowSelection:T,showAlertBanner:A}=l(),I=Object.assign(Object.assign({},Lt(m,{table:s})),o),k=Lt(p,{table:s}),D=x??u().flatRows.length,M=P.useMemo(()=>y?Object.values(T).filter(Boolean).length:a().rows.length,[T,D,y]),z=M?_.jsxs(Gt,{align:"center",gap:"sm",children:[(n=(t=h.selectedCountOfRowCountRowsSelected)===null||t===void 0?void 0:t.replace("{selectedCount}",M.toString()))===null||n===void 0?void 0:n.replace("{rowCount}",D.toString()),_.jsx(Zn,{onClick:$=>iDe({table:s})($,!1,!0),size:"compact-xs",variant:"subtle",children:h.clearSelection})]}):null,O=E.length>0?_.jsxs(Gt,{children:[h.groupedBy," ",E.map(($,F)=>_.jsxs(P.Fragment,{children:[F>0?h.thenBy:"",_.jsxs(Tf,Object.assign({className:ww["alert-badge"],rightSection:_.jsx(mr,{color:"white",onClick:()=>s.getColumn($).toggleGrouping(),size:"xs",variant:"subtle",children:_.jsx(f,{style:{transform:"scale(0.8)"}})}),variant:"filled"},k,{children:[s.getColumn($).columnDef.header," "]}))]},`${F}-${$}`))]}):null;return _.jsx(iv,{in:A||!!z||!!O,transitionDuration:i?200:0,children:_.jsx(iS,Object.assign({color:"blue",icon:!1},I,{className:Dt(ww.alert,i&&!v&&ww["alert-stacked"],!i&&v==="bottom"&&ww["alert-bottom"],I==null?void 0:I.className),children:(r=w==null?void 0:w({groupedAlert:O,selectedAlert:z,table:s}))!==null&&r!==void 0?r:_.jsxs(Gt,{className:Dt(ww["toolbar-alert"],v==="head-overlay"&&ww["head-overlay"],S),children:[c&&d&&v==="head-overlay"&&_.jsx(WH,{table:s}),_.jsxs(ao,{children:[I==null?void 0:I.children,z,O]})]})}))})},h6t=e=>{var{columnVirtualizer:t,table:n}=e,r=In(e,["columnVirtualizer","table"]);const{getHeaderGroups:i,getSelectedRowModel:s,getState:o,options:{enableStickyHeader:a,layoutMode:u,mantineTableHeadProps:l,positionToolbarAlertBanner:c},refs:{tableHeadRef:d}}=n,{isFullScreen:f,showAlertBanner:h}=o(),p=Object.assign(Object.assign({},Lt(l,{table:n})),r),m=a||f;return _.jsx(wY,Object.assign({},p,{className:Dt(p0.root,u!=null&&u.startsWith("grid")?p0["root-grid"]:p0["root-table-row-group"],m&&p0["root-sticky"],p==null?void 0:p.className),pos:m&&(u!=null&&u.startsWith("grid"))?"sticky":"relative",ref:y=>{d.current=y,p!=null&&p.ref&&(p.ref.current=y)},children:c==="head-overlay"&&(h||s().rows.length>0)?_.jsx(Vm,{className:Dt(p0["banner-tr"],(u==null?void 0:u.startsWith("grid"))&&p0.grid),children:_.jsx(Gx,{className:Dt(p0["banner-th"],(u==null?void 0:u.startsWith("grid"))&&p0.grid),colSpan:n.getVisibleLeafColumns().length,children:_.jsx(yZ,{table:n})})}):i().map(y=>_.jsx(f6t,{columnVirtualizer:t,headerGroup:y,table:n},y.id))}))},p6t=e=>{var{table:t}=e,n=In(e,["table"]);const{getFlatHeaders:r,getState:i,options:{columns:s,enableTableFooter:o,enableTableHead:a,layoutMode:u,mantineTableProps:l,memoMode:c}}=t,{columnSizing:d,columnSizingInfo:f,columnVisibility:h,density:p}=i(),m=Object.assign(Object.assign({highlightOnHover:!0,horizontalSpacing:p,verticalSpacing:p},Lt(l,{table:t})),n),y=P.useMemo(()=>{const E=r(),T={};for(let A=0;A<E.length;A++){const I=E[A],k=I.getSize();T[`--header-${Of(I.id)}-size`]=k,T[`--col-${Of(I.column.id)}-size`]=k}return T},[s,d,f,h]),w={columnVirtualizer:$Ft(t),table:t},{colorScheme:x}=pze(),{stripedColor:S}=m;return _.jsxs(_o,Object.assign({className:Dt("mrt-table",rge.root,(u==null?void 0:u.startsWith("grid"))&&rge["root-grid"],m.className)},m,{__vars:Object.assign(Object.assign(Object.assign({},y),{"--mrt-striped-row-background-color":S,"--mrt-striped-row-hover-background-color":S?x==="dark"?hze(S,.08):OC(S,.12):void 0}),m.__vars),children:[a&&_.jsx(h6t,Object.assign({},w)),c==="table-body"||f.isResizingColumn?_.jsx(qFt,Object.assign({},w,{tableProps:m})):_.jsx(_De,Object.assign({},w,{tableProps:m})),o&&_.jsx(YFt,Object.assign({},w))]}))},m6t=e=>{var t,{open:n,table:r}=e,i=In(e,["open","table"]);const{getState:s,options:{mantineCreateRowModalProps:o,mantineEditRowModalProps:a,onCreatingRowCancel:u,onEditingRowCancel:l,renderCreateRowModalContent:c,renderEditRowModalContent:d},setCreatingRow:f,setEditingRow:h}=r,{creatingRow:p,editingRow:m}=s(),y=p??m,v={row:y,table:r},w=Object.assign(Object.assign(Object.assign({},Lt(a,v)),p&&Lt(o,v)),i),x=y.getAllCells().filter(E=>E.column.columnDef.columnDefType==="data").map(E=>_.jsx(vDe,{cell:E,table:r},E.id)),S=()=>{var E;p?(u==null||u({row:y,table:r}),f(null)):(l==null||l({row:y,table:r}),h(null)),y._valuesCache={},(E=w.onClose)===null||E===void 0||E.call(w)};return P.createElement(zs,Object.assign({opened:n,withCloseButton:!1},w,{key:y.id,onClose:S}),(t=p&&(c==null?void 0:c({internalEditComponents:x,row:y,table:r}))||(d==null?void 0:d({internalEditComponents:x,row:y,table:r})))!==null&&t!==void 0?t:_.jsxs(_.Fragment,{children:[_.jsx("form",{onSubmit:E=>E.preventDefault(),children:_.jsx(ao,{gap:"lg",pb:24,pt:16,children:x})}),_.jsx(Gt,{justify:"flex-end",children:_.jsx(pDe,{row:y,table:r,variant:"text"})})]}))},g6t=typeof window<"u"?P.useLayoutEffect:P.useEffect,y6t=e=>{var{table:t}=e,n=In(e,["table"]);const{getState:r,options:{createDisplayMode:i,editDisplayMode:s,enableStickyHeader:o,mantineLoadingOverlayProps:a,mantineTableContainerProps:u},refs:{bottomToolbarRef:l,tableContainerRef:c,topToolbarRef:d}}=t,{creatingRow:f,editingRow:h,isFullScreen:p,isLoading:m,showLoadingOverlay:y}=r(),[v,w]=P.useState(0),x=Object.assign(Object.assign({},Lt(u,{table:t})),n),S=Lt(a,{table:t});g6t(()=>{var A,I,k,D;const M=typeof document<"u"&&(I=(A=d.current)===null||A===void 0?void 0:A.offsetHeight)!==null&&I!==void 0?I:0,z=typeof document<"u"&&(D=(k=l==null?void 0:l.current)===null||k===void 0?void 0:k.offsetHeight)!==null&&D!==void 0?D:0;w(M+z)});const E=i==="modal"&&f,T=s==="modal"&&h;return _.jsxs(ke,Object.assign({},x,{__vars:Object.assign({"--mrt-top-toolbar-height":`${v}`},x==null?void 0:x.__vars),className:Dt("mrt-table-container",Ez.root,o&&Ez["root-sticky"],p&&Ez["root-fullscreen"],x==null?void 0:x.className),ref:A=>{A&&(c.current=A,x!=null&&x.ref&&(x.ref.current=A))},children:[_.jsx(xc,Object.assign({visible:m||y,zIndex:2},S)),_.jsx(p6t,{table:t}),(E||T)&&_.jsx(m6t,{open:!0,table:t})]}))};var hC={root:"MRT_BottomToolbar-module_root__VDeWo","root-fullscreen":"MRT_BottomToolbar-module_root-fullscreen__esE15","custom-toolbar-container":"MRT_BottomToolbar-module_custom-toolbar-container__XcDRF","paginator-container":"MRT_BottomToolbar-module_paginator-container__A3eWY","paginator-container-alert-banner":"MRT_BottomToolbar-module_paginator-container-alert-banner__gyqtO"},EDe={"common-toolbar-styles":"common-styles-module_common-toolbar-styles__DnjR8"},lge={collapse:"MRT_ProgressBar-module_collapse__rOLJH","collapse-top":"MRT_ProgressBar-module_collapse-top__oCi0h"};const SDe=e=>{var{isTopToolbar:t,table:n}=e,r=In(e,["isTopToolbar","table"]);const{getState:i,options:{mantineProgressProps:s}}=n,{isSaving:o,showProgressBars:a}=i(),u=Object.assign(Object.assign({},Lt(s,{isTopToolbar:t,table:n})),r);return _.jsx(iv,{className:Dt(lge.collapse,t&&lge["collapse-top"]),in:o||a,children:_.jsx(Xb,Object.assign({animated:!0,"aria-busy":"true","aria-label":"Loading",radius:0,value:100},u))})};var Nz={root:"MRT_TablePagination-module_root__yZ8pm",pagesize:"MRT_TablePagination-module_pagesize__-vmTn","with-top-margin":"MRT_TablePagination-module_with-top-margin__aM5-m"};const cge=[5,10,15,20,25,30,50,100].map(e=>e.toString()),TDe=e=>{var t,{position:n="bottom",table:r}=e,i=In(e,["position","table"]);const{getPrePaginationRowModel:s,getState:o,options:{enableToolbarInternalActions:a,icons:{IconChevronLeft:u,IconChevronLeftPipe:l,IconChevronRight:c,IconChevronRightPipe:d},localization:f,mantinePaginationProps:h,paginationDisplayMode:p,rowCount:m},setPageIndex:y,setPageSize:v}=r,{pagination:{pageIndex:w=0,pageSize:x=10},showGlobalFilter:S}=o(),E=Object.assign(Object.assign({},Lt(h,{table:r})),i),T=m??s().rows.length,A=Math.ceil(T/x),I=A>2,k=w*x,D=Math.min(w*x+x,T),M=E??{},{rowsPerPageOptions:z=cge,showRowsPerPage:O=!0,withEdges:$=I}=M,F=In(M,["rowsPerPageOptions","showRowsPerPage","withEdges"]),B=n==="top"&&a&&!S;return _.jsxs(ke,{className:Dt("mrt-table-pagination",Nz.root,B&&Nz["with-top-margin"]),children:[(E==null?void 0:E.showRowsPerPage)!==!1&&_.jsxs(gr,{gap:"xs",children:[_.jsx(dt,{id:"rpp-label",children:f.rowsPerPage}),_.jsx(mp,{allowDeselect:!1,"aria-labelledby":"rpp-label",className:Nz.pagesize,data:(t=E==null?void 0:E.rowsPerPageOptions)!==null&&t!==void 0?t:cge,onChange:q=>v(+q),value:x.toString()})]}),p==="pages"?_.jsx(eh,Object.assign({firstIcon:l,lastIcon:d,nextIcon:c,onChange:q=>y(q-1),previousIcon:u,total:A,value:w+1,withEdges:$},F)):p==="default"?_.jsxs(_.Fragment,{children:[_.jsx(dt,{children:`${D===0?0:(k+1).toLocaleString()}-${D.toLocaleString()} ${f.of} ${T.toLocaleString()}`}),_.jsxs(gr,{gap:6,children:[$&&_.jsx(mr,{"aria-label":f.goToFirstPage,color:"gray",disabled:w<=0,onClick:()=>y(0),variant:"subtle",children:_.jsx(l,{})}),_.jsx(mr,{"aria-label":f.goToPreviousPage,color:"gray",disabled:w<=0,onClick:()=>y(w-1),variant:"subtle",children:_.jsx(u,{})}),_.jsx(mr,{"aria-label":f.goToNextPage,color:"gray",disabled:D>=T,onClick:()=>y(w+1),variant:"subtle",children:_.jsx(c,{})}),$&&_.jsx(mr,{"aria-label":f.goToLastPage,color:"gray",disabled:D>=T,onClick:()=>y(A-1),variant:"subtle",children:_.jsx(d,{})})]})]}):null]})};var dge={root:"MRT_ToolbarDropZone-module_root__eGTXb",hovered:"MRT_ToolbarDropZone-module_hovered__g7PeJ"};const CDe=e=>{var{table:t}=e,n=In(e,["table"]);const{getState:r,options:{enableGrouping:i,localization:s},setHoveredColumn:o,setShowToolbarDropZone:a}=t,{draggingColumn:u,grouping:l,hoveredColumn:c,showToolbarDropZone:d}=r(),f=h=>{o({id:"drop-zone"})};return P.useEffect(()=>{var h;((h=t.options.state)===null||h===void 0?void 0:h.showToolbarDropZone)!==void 0&&a(!!i&&!!u&&u.columnDef.enableGrouping!==!1&&!l.includes(u.id))},[i,u,l]),_.jsx(Jf,{mounted:d,transition:"fade",children:()=>{var h,p;return _.jsx(Gt,Object.assign({className:Dt("mrt-toolbar-dropzone",dge.root,(c==null?void 0:c.id)==="drop-zone"&&dge.hovered),onDragEnter:f},n,{children:_.jsx(dt,{children:s.dropToGroupBy.replace("{column}",(p=(h=u==null?void 0:u.columnDef)===null||h===void 0?void 0:h.header)!==null&&p!==void 0?p:"")})}))}})},v6t=e=>{var{table:t}=e,n=In(e,["table"]);const{getState:r,options:{enablePagination:i,mantineBottomToolbarProps:s,positionPagination:o,positionToolbarAlertBanner:a,positionToolbarDropZone:u,renderBottomToolbarCustomActions:l},refs:{bottomToolbarRef:c}}=t,{isFullScreen:d}=r(),f=d2("(max-width: 720px)"),h=Object.assign(Object.assign({},Lt(s,{table:t})),n),p=f||!!l;return _.jsxs(ke,Object.assign({},h,{className:Dt("mrt-bottom-toolbar",hC.root,EDe["common-toolbar-styles"],d&&hC["root-fullscreen"],h==null?void 0:h.className),ref:m=>{m&&(c.current=m,h!=null&&h.ref&&(h.ref.current=m))},children:[_.jsx(SDe,{isTopToolbar:!1,table:t}),a==="bottom"&&_.jsx(yZ,{stackAlertBanner:p,table:t}),["both","bottom"].includes(u??"")&&_.jsx(CDe,{table:t}),_.jsxs(ke,{className:hC["custom-toolbar-container"],children:[l?l({table:t}):_.jsx("span",{}),_.jsx(ke,{className:Dt(hC["paginator-container"],p&&hC["paginator-container-alert-banner"]),children:i&&["both","bottom"].includes(o??"")&&_.jsx(TDe,{position:"bottom",table:t})})]})]}))};var CO={root:"MRT_TopToolbar-module_root__r4-V9","root-fullscreen":"MRT_TopToolbar-module_root-fullscreen__3itT8","actions-container":"MRT_TopToolbar-module_actions-container__-uL0u","actions-container-stack-alert":"MRT_TopToolbar-module_actions-container-stack-alert__OYDL6"},b6t={root:"MRT_ToolbarInternalButtons-module_root__NKoUG"},fge={root:"MRT_ShowHideColumnsMenu-module_root__2UWak",content:"MRT_ShowHideColumnsMenu-module_content__ehkWQ"},xw={root:"MRT_ShowHideColumnsMenuItems-module_root__wYgv-",menu:"MRT_ShowHideColumnsMenuItems-module_menu__CeATR",grab:"MRT_ShowHideColumnsMenuItems-module_grab__a-d-y",pin:"MRT_ShowHideColumnsMenuItems-module_pin__P437b",switch:"MRT_ShowHideColumnsMenuItems-module_switch__tMsdt",header:"MRT_ShowHideColumnsMenuItems-module_header__xVkKb"},Oz={root:"MRT_ColumnPinningButtons-module_root__scTtW",left:"MRT_ColumnPinningButtons-module_left__W6Aog",right:"MRT_ColumnPinningButtons-module_right__7AJE3"};const _6t=({column:e,table:t})=>{const{options:{icons:{IconPinned:n,IconPinnedOff:r},localization:i}}=t;return _.jsx(Gt,{className:Dt("mrt-column-pinning-buttons",Oz.root),children:e.getIsPinned()?_.jsx(jn,{label:i.unpin,withinPortal:!0,children:_.jsx(mr,{color:"gray",onClick:()=>e.pin(!1),size:"md",variant:"subtle",children:_.jsx(r,{})})}):_.jsxs(_.Fragment,{children:[_.jsx(jn,{label:i.pinToLeft,withinPortal:!0,children:_.jsx(mr,{color:"gray",onClick:()=>e.pin("left"),size:"md",variant:"subtle",children:_.jsx(n,{className:Oz.left})})}),_.jsx(jn,{label:i.pinToRight,withinPortal:!0,children:_.jsx(mr,{color:"gray",onClick:()=>e.pin("right"),size:"md",variant:"subtle",children:_.jsx(n,{className:Oz.right})})})]})})},ADe=({allColumns:e,column:t,hoveredColumn:n,setHoveredColumn:r,table:i})=>{var s;const o=qs(),{getState:a,options:{enableColumnOrdering:u,enableColumnPinning:l,enableHiding:c,localization:d},setColumnOrder:f}=i,{columnOrder:h}=a(),{columnDef:p}=t,{columnDefType:m}=p,y=m!=="group"&&t.getIsVisible()||m==="group"&&t.getLeafColumns().some(I=>I.getIsVisible()),v=I=>{var k,D;m==="group"?(D=(k=I==null?void 0:I.columns)===null||k===void 0?void 0:k.forEach)===null||D===void 0||D.call(k,M=>{M.toggleVisibility(!y)}):I.toggleVisibility()},w=P.useRef(null),[x,S]=P.useState(!1),E=I=>{S(!0),I.dataTransfer.setDragImage(w.current,0,0)},T=I=>{S(!1),r(null),n&&f(XOe(t,n,h))},A=I=>{!x&&p.enableColumnOrdering!==!1&&r(t)};return!p.header||p.visibleInShowHideMenu===!1?null:_.jsxs(_.Fragment,{children:[_.jsx(Dn.Item,Object.assign({className:xw.root,component:"span",onDragEnter:A,ref:w,style:{"--_column-depth":`${(t.depth+.5)*2}rem`,"--_hover-color":hFt(o)}},w$("dragging",x),w$("order-hovered",(n==null?void 0:n.id)===t.id),{children:_.jsxs(ke,{className:xw.menu,children:[m!=="group"&&u&&!e.some(I=>I.columnDef.columnDefType==="group")&&(p.enableColumnOrdering!==!1?_.jsx(gZ,{onDragEnd:T,onDragStart:E,table:i}):_.jsx(ke,{className:xw.grab})),l&&(t.getCanPin()?_.jsx(_6t,{column:t,table:i}):_.jsx(ke,{className:xw.pin})),c?_.jsx(jn,{label:d.toggleVisibility,openDelay:1e3,withinPortal:!0,children:_.jsx(ny,{checked:y,className:xw.switch,disabled:!t.getCanHide(),label:p.header,onChange:()=>v(t)})}):_.jsx(dt,{className:xw.header,children:p.header})]})})),(s=t.columns)===null||s===void 0?void 0:s.map((I,k)=>_.jsx(ADe,{allColumns:e,column:I,hoveredColumn:n,setHoveredColumn:r,table:i},`${k}-${I.id}`))]})},w6t=({table:e})=>{const{getAllColumns:t,getAllLeafColumns:n,getCenterLeafColumns:r,getIsAllColumnsVisible:i,getIsSomeColumnsPinned:s,getIsSomeColumnsVisible:o,getLeftLeafColumns:a,getRightLeafColumns:u,getState:l,options:{enableColumnOrdering:c,enableColumnPinning:d,enableHiding:f,localization:h}}=e,{columnOrder:p,columnPinning:m}=l(),y=S=>{n().filter(E=>E.columnDef.enableHiding!==!1).forEach(E=>E.toggleVisibility(S))},v=P.useMemo(()=>{const S=t();return p.length>0&&!S.some(E=>E.columnDef.columnDefType==="group")?[...a(),...Array.from(new Set(p)).map(E=>r().find(T=>(T==null?void 0:T.id)===E)),...u()].filter(Boolean):S},[p,m,t(),r(),a(),u()]),[w,x]=P.useState(null);return _.jsxs(Dn.Dropdown,{className:Dt("mrt-show-hide-columns-menu",fge.root),children:[_.jsxs(Gt,{className:fge.content,children:[f&&_.jsx(Zn,{disabled:!o(),onClick:()=>y(!1),variant:"subtle",children:h.hideAll}),c&&_.jsx(Zn,{onClick:()=>e.setColumnOrder(fZ(e.options)),variant:"subtle",children:h.resetOrder}),d&&_.jsx(Zn,{disabled:!s(),onClick:()=>e.resetColumnPinning(!0),variant:"subtle",children:h.unpinAll}),f&&_.jsx(Zn,{disabled:i(),onClick:()=>y(!0),variant:"subtle",children:h.showAll})]}),_.jsx(Dn.Divider,{}),v.map((S,E)=>_.jsx(ADe,{allColumns:v,column:S,hoveredColumn:w,setHoveredColumn:x,table:e},`${E}-${S.id}`))]})},x6t=e=>{var{table:t,title:n}=e,r=In(e,["table","title"]);const{icons:{IconColumns:i},localization:{showHideColumns:s}}=t.options;return _.jsxs(Dn,{closeOnItemClick:!1,withinPortal:!0,children:[_.jsx(jn,{label:n??s,withinPortal:!0,children:_.jsx(Dn.Target,{children:_.jsx(mr,Object.assign({"aria-label":n??s,color:"gray",size:"lg",variant:"subtle"},r,{children:_.jsx(i,{})}))})}),_.jsx(w6t,{table:t})]})},E6t={md:"xs",xl:"md",xs:"xl"},S6t=e=>{var{table:{getState:t,options:{icons:{IconBaselineDensityLarge:n,IconBaselineDensityMedium:r,IconBaselineDensitySmall:i},localization:{toggleDensity:s}},setDensity:o},title:a}=e,u=In(e,["table","title"]);const{density:l}=t();return _.jsx(jn,{label:a??s,withinPortal:!0,children:_.jsx(mr,Object.assign({"aria-label":a??s,color:"gray",onClick:()=>o(c=>E6t[c]),size:"lg",variant:"subtle"},u,{children:l==="xs"?_.jsx(i,{}):l==="md"?_.jsx(r,{}):_.jsx(n,{})}))})},T6t=e=>{var{table:{getState:t,options:{icons:{IconFilter:n,IconFilterOff:r},localization:{showHideFilters:i}},setShowColumnFilters:s},title:o}=e,a=In(e,["table","title"]);const{showColumnFilters:u}=t();return _.jsx(jn,{label:o??i,withinPortal:!0,children:_.jsx(mr,Object.assign({"aria-label":o??i,color:"gray",onClick:()=>s(l=>!l),size:"lg",variant:"subtle"},a,{children:u?_.jsx(r,{}):_.jsx(n,{})}))})},C6t=e=>{var{table:{getState:t,options:{icons:{IconMaximize:n,IconMinimize:r},localization:{toggleFullScreen:i}},setIsFullScreen:s},title:o}=e,a=In(e,["table","title"]);const{isFullScreen:u}=t(),[l,c]=P.useState(!1),d=()=>{c(!1),s(f=>!f)};return _.jsx(jn,{label:o??i,opened:l,withinPortal:!0,children:_.jsx(mr,Object.assign({"aria-label":o??i,color:"gray",onClick:d,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),size:"lg",variant:"subtle"},a,{children:u?_.jsx(r,{}):_.jsx(n,{})}))})},A6t=e=>{var{table:{getState:t,options:{icons:{IconSearch:n,IconSearchOff:r},localization:{showHideSearch:i}},refs:{searchInputRef:s},setShowGlobalFilter:o},title:a}=e,u=In(e,["table","title"]);const{globalFilter:l,showGlobalFilter:c}=t(),d=()=>{o(!c),setTimeout(()=>{var f;return(f=s.current)===null||f===void 0?void 0:f.focus()},100)};return _.jsx(jn,{label:a??i,withinPortal:!0,children:_.jsx(mr,Object.assign({"aria-label":a??i,color:"gray",disabled:!!l,onClick:d,size:"lg",variant:"subtle"},u,{children:c?_.jsx(r,{}):_.jsx(n,{})}))})},I6t=e=>{var t,{table:n}=e,r=In(e,["table"]);const{options:{columnFilterDisplayMode:i,enableColumnFilters:s,enableColumnOrdering:o,enableColumnPinning:a,enableDensityToggle:u,enableFilters:l,enableFullScreenToggle:c,enableGlobalFilter:d,enableHiding:f,initialState:h,renderToolbarInternalActions:p}}=n;return _.jsx(Gt,Object.assign({},r,{className:Dt("mrt-toolbar-internal-buttons",b6t.root,r==null?void 0:r.className),children:(t=p==null?void 0:p({table:n}))!==null&&t!==void 0?t:_.jsxs(_.Fragment,{children:[l&&d&&!(h!=null&&h.showGlobalFilter)&&_.jsx(A6t,{table:n}),l&&s&&i!=="popover"&&_.jsx(T6t,{table:n}),(f||o||a)&&_.jsx(x6t,{table:n}),u&&_.jsx(S6t,{table:n}),c&&_.jsx(C6t,{table:n})]})}))};var hge={root:"MRT_GlobalFilterTextInput-module_root__Xmcpv",collapse:"MRT_GlobalFilterTextInput-module_collapse__v311d"};const Dz=e=>{var{table:t}=e,n=In(e,["table"]);const{getState:r,options:{enableGlobalFilterModes:i,icons:{IconSearch:s,IconX:o},localization:a,mantineSearchTextInputProps:u,manualFiltering:l},refs:{searchInputRef:c},setGlobalFilter:d}=t,{globalFilter:f,showGlobalFilter:h}=r(),p=Object.assign(Object.assign({},Lt(u,{table:t})),n),m=P.useRef(!1),[y,v]=P.useState(f??""),[w]=S1e(y,l?500:250);P.useEffect(()=>{d(w||void 0)},[w]);const x=()=>{v(""),d(void 0)};return P.useEffect(()=>{m.current&&(f===void 0?x():v(f)),m.current=!0},[f]),_.jsxs(iv,{className:hge.collapse,in:h,children:[i&&_.jsxs(Dn,{withinPortal:!0,children:[_.jsx(Dn.Target,{children:_.jsx(mr,{"aria-label":a.changeSearchMode,color:"gray",size:"sm",variant:"transparent",children:_.jsx(s,{})})}),_.jsx(wDe,{onSelect:x,table:t})]}),_.jsx(Af,Object.assign({leftSection:!i&&_.jsx(s,{}),mt:0,mx:"sm",onChange:S=>v(S.target.value),placeholder:a.search,rightSection:y?_.jsx(mr,{"aria-label":a.clearSearch,color:"gray",disabled:!(y!=null&&y.length),onClick:x,size:"sm",variant:"transparent",children:_.jsx(jn,{label:a.clearSearch,withinPortal:!0,children:_.jsx(o,{})})}):null,value:y??"",variant:"filled"},p,{className:Dt("mrt-global-filter-text-input",hge.root,p==null?void 0:p.className),ref:S=>{S&&(c.current=S,p!=null&&p.ref&&(p.ref=S))}}))]})},R6t=e=>{var t,{table:n}=e,r=In(e,["table"]);const{getState:i,options:{enableGlobalFilter:s,enablePagination:o,enableToolbarInternalActions:a,mantineTopToolbarProps:u,positionGlobalFilter:l,positionPagination:c,positionToolbarAlertBanner:d,positionToolbarDropZone:f,renderTopToolbarCustomActions:h},refs:{topToolbarRef:p}}=n,{isFullScreen:m,showGlobalFilter:y}=i(),v=d2("(max-width:720px)"),w=d2("(max-width:1024px)"),x=Object.assign(Object.assign({},Lt(u,{table:n})),r),S=v||!!h||y&&w,E={style:w?void 0:{zIndex:3},table:n};return _.jsxs(ke,Object.assign({},x,{className:Dt(EDe["common-toolbar-styles"],CO.root,m&&CO["root-fullscreen"],x==null?void 0:x.className),ref:T=>{T&&(p.current=T,x!=null&&x.ref&&(x.ref.current=T))},children:[d==="top"&&_.jsx(yZ,{stackAlertBanner:S,table:n}),["both","top"].includes(f??"")&&_.jsx(CDe,{table:n}),_.jsxs(Gt,{className:Dt(CO["actions-container"],S&&CO["actions-container-stack-alert"]),children:[s&&l==="left"&&_.jsx(Dz,Object.assign({},E)),(t=h==null?void 0:h({table:n}))!==null&&t!==void 0?t:_.jsx("span",{}),a?_.jsxs(Gt,{justify:"end",wrap:"wrap-reverse",children:[s&&l==="right"&&_.jsx(Dz,Object.assign({},E)),_.jsx(I6t,{table:n})]}):s&&l==="right"&&_.jsx(Dz,Object.assign({},E))]}),o&&["both","top"].includes(c??"")&&_.jsx(Gt,{justify:"end",children:_.jsx(TDe,{position:"top",table:n})}),_.jsx(SDe,{isTopToolbar:!0,table:n})]}))},k6t=e=>{var t,n,{table:r}=e,i=In(e,["table"]);const{getState:s,options:{enableBottomToolbar:o,enableTopToolbar:a,mantinePaperProps:u,renderBottomToolbar:l,renderTopToolbar:c},refs:{tablePaperRef:d}}=r,{isFullScreen:f}=s(),h=Object.assign(Object.assign({},Lt(u,{table:r})),i);return _.jsxs(ub,Object.assign({shadow:"xs",withBorder:!0},h,{className:Dt("mrt-table-paper",jFt.root,f&&"mrt-table-paper-fullscreen",h==null?void 0:h.className),ref:p=>{d.current=p,h!=null&&h.ref&&(h.ref.current=p)},style:p=>Object.assign(Object.assign({zIndex:f?200:void 0},Lt(h==null?void 0:h.style,p)),f?{border:0,borderRadius:0,bottom:0,height:"100vh",left:0,margin:0,maxHeight:"100vh",maxWidth:"100vw",padding:0,position:"fixed",right:0,top:0,width:"100vw"}:null),children:[a&&((t=Lt(c,{table:r}))!==null&&t!==void 0?t:_.jsx(R6t,{table:r})),_.jsx(y6t,{table:r}),o&&((n=Lt(l,{table:r}))!==null&&n!==void 0?n:_.jsx(v6t,{table:r}))]}))},P6t=e=>e.table!==void 0,N6t=e=>{let t;return P6t(e)?t=e.table:t=gDe(e),_.jsx(k6t,{table:t})};function pge(e){const t=Math.floor(e/6e4),n=(e%6e4/1e3).toFixed(0);return n==="60"?`${t+1}:00`:`${t}:${+n<10?"0":""}${n}`}async function O6t(e,t,n,r){return e&&t&&n&&r?await e.getEditedTranscript(t,r,n):null}async function Mz(e,t){return e?await e.getTags(t):[]}async function D6t(e){return e?await e.getAllParticipantAndTaskTags():{}}function M6t({completed:e,studyConfig:t}){const{storageEngine:n}=Zi(),[r,i]=P.useState(null),s=P.useMemo(()=>[...new Set(kEe(t.sequence).map(O=>O.componentName))],[t.sequence]),o=Mg(),{value:a,execute:u}=bf(Mz,[n,"text"]),{value:l,execute:c}=bf(Mz,[n,"task"]),{value:d,execute:f}=bf(Mz,[n,"participant"]),{value:h,execute:p}=bf(D6t,[n]),[m,y]=P.useState([]),[v,w]=P.useState([]),[x,S]=P.useState([]),[E,T]=P.useState(150),A=P.useMemo(()=>{if(!r)return null;const O=nc(m.map($=>$.tasks[r].wordCount||0));return ld([0,E]).domain(O)},[r,m,E]),I=P.useMemo(()=>{if(!r){const $=nc(m.map(F=>F.interactionCount||0));return ld([0,E]).domain($)}const O=nc(m.map($=>$.tasks[r].interactionCount||0));return ld([0,E]).domain(O)},[r,m,E]),k=P.useMemo(()=>{if(!r){const $=nc(m.map(F=>F.timeSpent||0));return ld([0,E]).domain($)}const O=nc(m.map($=>$.tasks[r].timeSpent||0));return ld([0,E]).domain(O)},[r,m,E]),D=P.useCallback((O,$)=>{n&&n.saveTags(O,$).then(()=>{p(n),u(n,"text"),c(n,"task"),f(n,"participant")})},[f,p,c,u,n]);P.useEffect(()=>{if(!o||!n)return;const O=e.map($=>{const F=Object.values($.answers),B=nc(F.map(K=>[K.startTime,K.endTime]).flat()),q=A2(F.map(K=>K.provenanceGraph?Object.keys(K.provenanceGraph.nodes).length-1:0)),G={};return Object.entries($.answers).forEach(K=>{const[L,V]=K,X=L.slice(0,L.lastIndexOf("_"));G[X]={interactionCount:V.provenanceGraph?Object.keys(V.provenanceGraph.nodes).length-1:0,wordCount:null,timeSpent:V.endTime-V.startTime,tags:[]}}),{timeSpent:B[1]-B[0],wordCount:null,interactionCount:q,id:$.participantId,tasks:G}});y(O)},[o,e,n]),P.useEffect(()=>{if(r&&o.user.user){const O=[...m];Promise.all(m.map(($,F)=>{var B;return O6t(n,$.id,r,(B=o.user.user)==null?void 0:B.email).then(q=>{if(q&&q.length>0){const G=A2(q.map(L=>L.text.length)),K=q.map(L=>L.selectedTags.map(V=>({...V,startTime:L.transcriptMappingStart}))).flat();O[F].tasks[r].tags=K,O[F].tasks[r].wordCount=G}else O[F].tasks[r].wordCount=0})})).then(()=>y(O))}},[o.user.user,r,n]),P.useEffect(()=>{if(x.length===0){w(m);return}w(m.filter(O=>{if(h&&h[O.id]){if(h[O.id].partTags.find(F=>!!x.find(B=>B===F.name)))return!0;if(r){const F=h[O.id].taskTags[r];if(F&&F.find(B=>!!x.find(q=>q===B.name)))return!0}}return!!(r&&O.tasks[r].tags.find($=>!!x.find(F=>F===$.name)))}))},[r,x,m,h]);const M=P.useMemo(()=>r===null?[{accessorKey:"id",header:"Participant Id"},{accessorKey:"timeSpent",header:"Time Spent",id:"timeSpent",mantineTableBodyCellProps:{style:{padding:0}},Cell:({cell:O})=>O.getValue()===null||O.getValue()===void 0?_.jsx(io,{}):_.jsxs("svg",{style:{width:O.column.getSize(),height:"60px"},children:[_.jsx("rect",{x:0,y:0,height:200,fill:"cornflowerblue",width:k(O.getValue())}),_.jsx("text",{x:5,y:30,style:{textAnchor:"start",dominantBaseline:"middle"},children:pge(O.getValue())})]}),size:150},{accessorKey:"interactionCount",header:"Interaction Count",id:"interactionCount",mantineTableBodyCellProps:{style:{padding:0}},Cell:({cell:O})=>O.getValue()===null||O.getValue()===void 0?_.jsx(io,{}):_.jsxs("svg",{style:{width:O.column.getSize(),height:"60px"},children:[_.jsx("rect",{x:0,y:0,height:200,fill:"cornflowerblue",width:I(O.getValue())}),_.jsx("text",{x:5,y:30,style:{textAnchor:"start",dominantBaseline:"middle"},children:O.getValue()})]}),size:150},{accessorKey:"id",id:"participantTags",header:"Participant Tags",renderColumnActionsMenuItems({internalColumnMenuItems:O}){return _.jsxs(_.Fragment,{children:[O,_.jsx(g2,{closeMenuOnClick:!1,children:_.jsx(fH,{tags:d||[],createTagCallback:$=>{D([...d||[],$],"participant")},editTagCallback:()=>null})})]})},Cell:({cell:O})=>_.jsx(GA,{tags:d||[],onSelectTags:$=>{if(n&&h){const F=mc(h);F[O.getValue()]||(F[O.getValue()]={partTags:[],taskTags:{}}),F[O.getValue()].partTags=$,n.saveAllParticipantAndTaskTags(F).then(()=>{p(n)})}},selectedTags:h&&h[O.getValue()]?h[O.getValue()].partTags:[]}),size:150}]:[{accessorKey:"id",id:"id",header:"Participant Id",Cell:({cell:O})=>_.jsx(Yb,{size:"12px",component:MY,target:"_blank",to:`${$c}stage-2/analysis/${O.getValue()}/ui/reviewer-${r}`,children:O.getValue()}),size:150},{accessorKey:`tasks.${r}.timeSpent`,header:"Time Spent",id:"timeSpent",mantineTableBodyCellProps:{style:{padding:0}},Cell:({cell:O})=>O.getValue()===null||O.getValue()===void 0?_.jsx(io,{}):_.jsxs("svg",{style:{width:O.column.getSize(),height:"60px"},children:[_.jsx("rect",{x:0,y:0,height:200,fill:"cornflowerblue",width:k(O.getValue())}),_.jsx("text",{x:5,y:30,style:{textAnchor:"start",dominantBaseline:"middle"},children:pge(O.getValue())})]}),size:150},{accessorKey:`tasks.${r}.wordCount`,header:"Word Count",id:"wordCount",mantineTableBodyCellProps:{style:{padding:0}},Cell:({cell:O})=>O.getValue()===null||O.getValue()===void 0?_.jsx(io,{}):_.jsxs("svg",{style:{width:O.column.getSize(),height:"60px"},children:[_.jsx("rect",{x:0,y:0,height:200,fill:"cornflowerblue",width:A?A(O.getValue()):0}),_.jsx("text",{x:5,y:30,style:{textAnchor:"start",dominantBaseline:"middle"},children:O.getValue()})]}),size:150},{accessorKey:`tasks.${r}.interactionCount`,header:"Interaction Count",id:"interactionCount",mantineTableBodyCellProps:{style:{padding:0}},Cell:({cell:O})=>O.getValue()===null||O.getValue()===void 0?_.jsx(io,{}):_.jsxs("svg",{style:{width:O.column.getSize(),height:"60px"},children:[_.jsx("rect",{x:0,y:0,height:200,fill:"cornflowerblue",width:I(O.getValue())}),_.jsx("text",{x:5,y:30,style:{textAnchor:"start",dominantBaseline:"middle"},children:O.getValue()})]}),size:150},{accessorKey:`tasks.${r}.tags`,header:"Tags",Cell:({cell:O,row:$})=>_.jsx(sv,{type:"auto",h:40,children:_.jsx(gr,{gap:2,children:_.jsx(mke,{size:"xs",selectedTags:O.getValue().filter(F=>x.length>0?!!x.find(B=>B===F.name):!0),currentTask:r,isLink:!0,participantId:$.getValue("id")})})}),size:150},{accessorKey:"id",id:"taskTags",header:"Task Tags",renderColumnActionsMenuItems({internalColumnMenuItems:O}){return _.jsxs(_.Fragment,{children:[O,_.jsx(g2,{closeMenuOnClick:!1,children:_.jsx(fH,{tags:l||[],createTagCallback:$=>{D([...l||[],$],"task")},editTagCallback:()=>null})})]})},Cell:({cell:O})=>_.jsx(GA,{tags:l||[],onSelectTags:$=>{if(n&&h){const F=mc(h);F[O.getValue()]||(F[O.getValue()]={partTags:[],taskTags:{}}),F[O.getValue()].taskTags[r]=$,n.saveAllParticipantAndTaskTags(F).then(()=>{p(n)})}},selectedTags:h&&h[O.getValue()]?h[O.getValue()].taskTags[r]||[]:[]}),size:150}],[d,r,x,I,h,p,D,n,l,k,A]),z=gDe({columns:M,data:v,enableMultiSort:!0,enableDensityToggle:!1,enablePagination:!1,enableRowVirtualization:!0,initialState:{density:"xs"},mantineTableContainerProps:{style:{maxHeight:"77dvh"}},renderTopToolbarCustomActions:()=>_.jsxs(gr,{gap:"xl",children:[_.jsxs(gr,{children:[_.jsx(Ki,{order:5,children:"Select Task"}),_.jsx(mp,{clearable:!0,value:r,onChange:i,data:s})]}),_.jsxs(gr,{children:[_.jsx(Ki,{order:5,children:"Filter by tags"}),a&&l&&d&&a.length>0?_.jsx(GA,{tags:a,onSelectTags:O=>S(O.map($=>$.name)),selectedTags:[...a.filter(O=>x.includes(O.name)),...l.filter(O=>x.includes(O.name)),...d.filter(O=>x.includes(O.name))],partTags:d||[],taskTags:l||[]}):_.jsx(io,{})]})]})});return _.jsx(ke,{px:"sm",style:{height:"100%"},children:_.jsx(N6t,{table:z})})}function $6t(e){const{globalConfig:t}=e,{studyId:n}=Ff(),[r,i]=P.useState([]),[s,o]=P.useState(void 0),[a,u]=P.useState(!1),{storageEngine:l}=Zi(),c=Mc(),{tab:d}=Ff(),{user:f}=Mg(),h=P.useCallback(async()=>{if(u(!0),n){const v=await r4(n,t);if(!v||!l)return;await l.initializeStudyDb(n,v);const w=await l.getAllParticipantsData();i(w),o(v),u(!1)}},[t,l,n]);P.useEffect(()=>{h()},[t,l,n,h]);const[p,m,y]=P.useMemo(()=>{const v=r.filter(S=>!S.rejected&&S.completed),w=r.filter(S=>!S.rejected&&!S.completed),x=r.filter(S=>S.rejected);return[v,w,x]},[r]);return _.jsxs(ei,{style:{height:"100%"},children:[_.jsx(e2,{studyIds:e.globalConfig.configsList}),_.jsx(ei.Main,{children:_.jsxs(ke,{p:"sm",style:{height:"100%",minHeight:"100%",width:"100%"},children:[_.jsx(xc,{visible:a}),_.jsxs(Gt,{direction:"row",align:"center",children:[_.jsx(Ki,{order:5,children:n}),_.jsx(mOe,{completed:p.length,inProgress:m.length,rejected:y.length})]}),_.jsx(vd,{h:"xs"}),_.jsxs(Fs,{variant:"outline",value:d,onChange:v=>c(`./../${v}`),style:{height:"100%"},children:[_.jsxs(Fs.List,{children:[_.jsx(Fs.Tab,{value:"table",leftSection:_.jsx(qXe,{size:16}),children:"Table View"}),_.jsx(jn,{label:"Coming soon",position:"bottom",children:_.jsx(Fs.Tab,{value:"stats",leftSection:_.jsx(lXe,{size:16}),disabled:!0,children:"Trial Stats"})}),_.jsx(jn,{label:"Coming soon",position:"bottom",children:_.jsx(Fs.Tab,{value:"replay",leftSection:_.jsx(jae,{size:16}),disabled:!0,children:"Participant Replay"})}),_.jsx(Fs.Tab,{value:"thinkAloud",leftSection:_.jsx(jae,{size:16}),children:"Think Aloud"}),_.jsx(Fs.Tab,{value:"manage",leftSection:_.jsx(xwe,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),_.jsx(Fs.Panel,{value:"stats",pt:"xs",children:"statsboard"}),_.jsx(Fs.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),_.jsx(Fs.Panel,{value:"thinkAloud",pt:"xs",children:s&&_.jsx(M6t,{completed:p,studyConfig:s})}),_.jsx(Fs.Panel,{value:"manage",pt:"xs",children:n&&f.isAdmin?_.jsx(O3t,{studyId:n,refresh:h}):_.jsx(Zf,{mt:20,children:_.jsx(iS,{title:"Unauthorized Access",variant:"light",color:"red",icon:_.jsx(wwe,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function mge({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=Mg(),{storageEngine:o}=Zi(),[a,u]=P.useState(!1),l=Ff();return P.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const d=await n(l[t]);d&&u(d)}else u(!0);if(a)try{r&&await i(r)||s()}catch(d){s(),console.warn(d)}})()},[r.isAdmin,a]),r.determiningStatus||!o?_.jsx(xc,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?_.jsx(DY,{to:"/login"}):_.jsx(_.Fragment,{children:e})}async function IDe(e,t,n){if(e instanceof od){t(!0);const r=new Nm,i=d$();try{await ZRt(i,r,iPe)}catch(s){n&&n(s.message)}finally{t(!1)}return i.currentUser}return null}function L6t(){const{user:e}=Mg(),[t,n]=P.useState(null),[r,i]=P.useState(!1),{storageEngine:s}=Zi();return P.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&n("You are not authorized to use this application.")},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?_.jsx(DY,{to:"/"}):_.jsx(Zf,{children:_.jsx(Kb,{padding:"lg",children:_.jsxs(Gt,{align:"center",direction:"column",justify:"center",children:[_.jsx(av,{maw:200,mt:50,mb:100,src:`${$c}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsxs(_.Fragment,{children:[_.jsx(dt,{mb:20,children:"To access admin settings, please sign in using your Google account."}),_.jsx(Zn,{onClick:()=>IDe(s,i,n),leftSection:_.jsx(WXe,{}),variant:"filled",children:"Sign In With Google"})]}),t?_.jsx(Tf,{size:"lg",color:"red",mt:30,children:t}):null,_.jsx(xc,{visible:r})]})})})}var $z={exports:{}},Lz,gge;function F6t(){if(gge)return Lz;gge=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Lz=e,Lz}var Fz,yge;function j6t(){if(yge)return Fz;yge=1;var e=F6t();function t(){}function n(){}return n.resetWarningCache=t,Fz=function(){function r(o,a,u,l,c,d){if(d!==e){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return s.PropTypes=s,s},Fz}var vge;function B6t(){return vge||(vge=1,$z.exports=j6t()()),$z.exports}var z6t=B6t();const bge=su(z6t),_ge={};function YH(e,t){e===void 0&&(e=_ge),t===void 0&&(t=_ge);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var U6t=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),V6t=Object.prototype.hasOwnProperty;function KH(e,t){return V6t.call(e,t)}function XH(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)KH(e,i)&&r.push(i);return r}function fc(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function QH(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function E1(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function RDe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function JH(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(JH(e[t]))return!0}else if(typeof e=="object"){for(var r=XH(e),i=r.length,s=0;s<i;s++)if(JH(e[r[s]]))return!0}}return!1}function wge(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var kDe=function(e){U6t(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,wge(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=wge(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Ss=kDe,H6t=fc,ox={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=x$(n,this.path);r&&(r=fc(r));var i=tb(n,{op:"remove",path:this.from}).removed;return tb(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=x$(n,this.from);return tb(n,{op:"add",path:this.path,value:fc(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:bI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},q6t={add:function(e,t,n){return QH(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:ox.move,copy:ox.copy,test:ox.test,_get:ox._get};function x$(e,t){if(t=="")return e;var n={op:"_get",path:t};return tb(e,n),n.value}function tb(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):E$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=x$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=bI(e,t.value),o.test===!1)throw new Ss("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Ss("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=fc(e));var a=t.path||"",u=a.split("/"),l=e,c=1,d=u.length,f=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=E$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=RDe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&f===void 0&&(l[h]===void 0?f=u.slice(0,c).join("/"):c==d-1&&(f=t.path),f!==void 0&&p(t,0,e,f)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!QH(h))throw new Ss("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);QH(h)&&(h=~~h)}if(c>=d){if(n&&t.op==="add"&&h>l.length)throw new Ss("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=q6t[t.op].call(t,l,h,e);if(o.test===!1)throw new Ss("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=d){var o=ox[t.op].call(t,l,h,e);if(o.test===!1)throw new Ss("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<d&&(!l||typeof l!="object"))throw new Ss("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function _4(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Ss("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=fc(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=tb(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function W6t(e,t,n){var r=tb(e,t);if(r.test===!1)throw new Ss("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function E$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ss("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(ox[e.op]){if(typeof e.path!="string")throw new Ss("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ss('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ss("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ss("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&JH(e.value))throw new Ss("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Ss("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ss("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=PDe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ss("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ss("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function PDe(e,t,n){try{if(!Array.isArray(e))throw new Ss("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)_4(fc(t),fc(e),n||!0);else{n=n||E$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Ss)return i;throw i}}function bI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!bI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!bI(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const G6t=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Ss,_areEquals:bI,applyOperation:tb,applyPatch:_4,applyReducer:W6t,deepClone:H6t,getValueByPointer:x$,validate:PDe,validator:E$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var vZ=new WeakMap,Y6t=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),K6t=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function X6t(e){return vZ.get(e)}function Q6t(e,t){return e.observers.get(t)}function J6t(e,t){e.observers.delete(t.callback)}function Z6t(e,t){t.unobserve()}function e4t(e,t){var n=[],r,i=X6t(e);if(!i)i=new Y6t(e),vZ.set(e,i);else{var s=Q6t(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=fc(e),t){r.callback=t,r.next=null;var o=function(){ZH(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){ZH(r),clearTimeout(r.next),J6t(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new K6t(t,r)),r}function ZH(e,t){t===void 0&&(t=!1);var n=vZ.get(e.object);bZ(n.value,e.object,e.patches,"",t),e.patches.length&&_4(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function bZ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=XH(t),o=XH(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(KH(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var d=t[l];typeof c=="object"&&c!=null&&typeof d=="object"&&d!=null&&Array.isArray(c)===Array.isArray(d)?bZ(c,d,n,r+"/"+E1(l),i):c!==d&&(i&&n.push({op:"test",path:r+"/"+E1(l),value:fc(c)}),n.push({op:"replace",path:r+"/"+E1(l),value:fc(d)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+E1(l),value:fc(c)}),n.push({op:"remove",path:r+"/"+E1(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!KH(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+E1(l),value:fc(t[l])})}}}function t4t(e,t,n){n===void 0&&(n=!1);var r=[];return bZ(e,t,r,"",n),r}const n4t=Object.freeze(Object.defineProperty({__proto__:null,compare:t4t,generate:ZH,observe:e4t,unobserve:Z6t},Symbol.toStringTag,{value:"Module"}));Object.assign({},G6t,n4t,{JsonPatchError:kDe,deepClone:fc,escapePathComponent:E1,unescapePathComponent:RDe});var jz,xge;function r4t(){if(xge)return jz;xge=1;var e=/("(?:[^\\"]|\\.)*")|[:,]/g;return jz=function(n,r){var i,s,o;return r=r||{},i=JSON.stringify([1],void 0,r.indent===void 0?2:r.indent).slice(2,-3),s=i===""?1/0:r.maxLength===void 0?80:r.maxLength,o=r.replacer,function a(u,l,c){var d,f,h,p,m,y,v,w,x,S,E,T;if(u&&typeof u.toJSON=="function"&&(u=u.toJSON()),E=JSON.stringify(u,o),E===void 0)return E;if(v=s-l.length-c,E.length<=v&&(x=E.replace(e,function(A,I){return I||A+" "}),x.length<=v))return x;if(o!=null&&(u=JSON.parse(E),o=void 0),typeof u=="object"&&u!==null){if(w=l+i,h=[],f=0,Array.isArray(u))for(S="[",d="]",v=u.length;f<v;f++)h.push(a(u[f],w,f===v-1?0:1)||"null");else for(S="{",d="}",y=Object.keys(u),v=y.length;f<v;f++)p=y[f],m=JSON.stringify(p)+": ",T=a(u[p],w,m.length+(f===v-1?0:1)),T!==void 0&&h.push(m+T);if(h.length>0)return[S,i+h.join(`,
`+w),d].join(`
`+l)}return E}(n,"",0)},jz}var i4t=r4t();const Bz=su(i4t);function Ul(e,t,n){return e.fields=t||[],e.fname=n,e}function Ns(e){return e==null?null:e.fname}function Qa(e){return e==null?null:e.fields}function NDe(e){return e.length===1?s4t(e[0]):o4t(e)}const s4t=e=>function(t){return t[e]},o4t=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function st(e){throw Error(e)}function Hp(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||st("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&st("Access path missing closing bracket: "+e),r&&st("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function Cd(e,t,n){const r=Hp(e);return e=r.length===1?r[0]:e,Ul((n&&n.get||NDe)(r),[e],t||e)}const JR=Cd("id"),ru=Ul(e=>e,[],"identity"),B0=Ul(()=>0,[],"zero"),US=Ul(()=>1,[],"one"),Ad=Ul(()=>!0,[],"true"),w0=Ul(()=>!1,[],"false");function a4t(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const ODe=0,_Z=1,wZ=2,DDe=3,MDe=4;function xZ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a4t,r=e||ODe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=_Z&&n(t||"error","ERROR",arguments),this},warn(){return r>=wZ&&n(t||"warn","WARN",arguments),this},info(){return r>=DDe&&n(t||"log","INFO",arguments),this},debug(){return r>=MDe&&n(t||"log","DEBUG",arguments),this}}}var ut=Array.isArray;function $t(e){return e===Object(e)}const Ege=e=>e!=="__proto__";function VS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=u4t(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;HS(r,s,i[s],o)}return r},{})}function HS(e,t,n,r){if(!Ege(t))return;let i,s;if($t(n)&&!ut(n)){s=$t(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?HS(s,i,n[i]):Ege(i)&&(s[i]=n[i])}else e[t]=n}function u4t(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Dr(e){return e[e.length-1]}function Ya(e){return e==null||e===""?null:+e}const $De=e=>t=>e*Math.exp(t),LDe=e=>t=>Math.log(e*t),FDe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),jDe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,S$=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function w4(e,t,n,r){const i=n(e[0]),s=n(Dr(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function BDe(e,t){return w4(e,t,Ya,ru)}function zDe(e,t){var n=Math.sign(e[0]);return w4(e,t,LDe(n),$De(n))}function UDe(e,t,n){return w4(e,t,S$(n),S$(1/n))}function VDe(e,t,n){return w4(e,t,FDe(n),jDe(n))}function x4(e,t,n,r,i){const s=r(e[0]),o=r(Dr(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function EZ(e,t,n){return x4(e,t,n,Ya,ru)}function SZ(e,t,n){const r=Math.sign(e[0]);return x4(e,t,n,LDe(r),$De(r))}function T$(e,t,n,r){return x4(e,t,n,S$(r),S$(1/r))}function TZ(e,t,n,r){return x4(e,t,n,FDe(r),jDe(r))}function HDe(e){return 1+~~(new Date(e).getMonth()/3)}function qDe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Ft(e){return e!=null?ut(e)?e:[e]:[]}function WDe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function ir(e){return typeof e=="function"}const l4t="descending";function CZ(e,t,n){n=n||{},t=Ft(t)||[];const r=[],i=[],s={},o=n.comparator||c4t;return Ft(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===l4t?-1:1),i.push(a=ir(a)?a:Cd(a,null,n)),(Qa(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:Ul(o(i,r),Object.keys(s))}const E4=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),c4t=(e,t)=>e.length===1?d4t(e[0],t[0]):f4t(e,t,e.length),d4t=(e,t)=>function(n,r){return E4(e(n),e(r))*t},f4t=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=E4(s(r),s(i));return o*t[a]});function iu(e){return ir(e)?e:()=>e}function AZ(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function rr(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Tp(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function GDe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const h4t=Object.prototype.hasOwnProperty;function cn(e,t){return h4t.call(e,t)}const AO={};function qS(e){let t={},n;function r(s){return cn(t,s)&&t[s]!==AO}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===AO&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=AO),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==AO&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function YDe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Dr(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function kt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),rr(r,n)}function ax(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Ev(e){return typeof e=="boolean"}function fy(e){return Object.prototype.toString.call(e)==="[object Date]"}function KDe(e){return e&&ir(e[Symbol.iterator])}function Gr(e){return typeof e=="number"}function XDe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function jt(e){return typeof e=="string"}function IZ(e,t,n){e&&(e=t?Ft(e).map(a=>a.replace(/\\(.)/g,"$1")):Ft(e));const r=e&&e.length,i=n&&n.get||NDe,s=a=>i(t?[a]:Hp(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return Ul(o,e,"key")}function QDe(e,t){const n=e[0],r=Dr(e),i=+t;return i?i===1?r:n+i*(r-n):n}const p4t=1e4;function JDe(e){e=+e||p4t;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>cn(t,o)||cn(n,o),get:o=>cn(t,o)?t[o]:cn(n,o)?s(o,n[o]):void 0,set:(o,a)=>cn(t,o)?t[o]=a:s(o,a)}}function ZDe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function dA(e,t){let n="";for(;--t>=0;)n+=e;return n}function eMe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?dA(i,o)+s:r==="center"?dA(i,~~(o/2))+s+dA(i,Math.ceil(o/2)):s+dA(i,o)}function ZR(e){return e&&Dr(e)-e[0]||0}function Ct(e){return ut(e)?"["+e.map(Ct)+"]":$t(e)||jt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function RZ(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const m4t=e=>Gr(e)||fy(e)?e:Date.parse(e);function kZ(e,t){return t=t||m4t,e==null||e===""?null:t(e)}function PZ(e){return e==null||e===""?null:e+""}function qf(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function tMe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function A0(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function g4t(e){return e}function y4t(e){if(e==null)return g4t;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,d=new Array(c);for(d[0]=(t+=a[0])*r+s,d[1]=(n+=a[1])*i+o;l<c;)d[l]=a[l],++l;return d}}function v4t(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function b4t(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Sge(e,n)})}:Sge(e,t)}function Sge(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=nMe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function nMe(e,t){var n=y4t(e.transform),r=e.arcs;function i(c,d){d.length&&d.pop();for(var f=r[c<0?~c:c],h=0,p=f.length;h<p;++h)d.push(n(f[h],h));c<0&&v4t(d,p)}function s(c){return n(c)}function o(c){for(var d=[],f=0,h=c.length;f<h;++f)i(c[f],d);return d.length<2&&d.push(d[0]),d}function a(c){for(var d=o(c);d.length<4;)d.push(d[0]);return d}function u(c){return c.map(a)}function l(c){var d=c.type,f;switch(d){case"GeometryCollection":return{type:d,geometries:c.geometries.map(l)};case"Point":f=s(c.coordinates);break;case"MultiPoint":f=c.coordinates.map(s);break;case"LineString":f=o(c.arcs);break;case"MultiLineString":f=c.arcs.map(o);break;case"Polygon":f=u(c.arcs);break;case"MultiPolygon":f=c.arcs.map(u);break;default:return null}return{type:d,coordinates:f}}return l(t)}function _4t(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var d=e.arcs[l<0?~l:l],f;d.length<3&&!d[1][0]&&!d[1][1]&&(f=t[++o],t[o]=l,t[c]=f)}),t.forEach(function(l){var c=a(l),d=c[0],f=c[1],h,p;if(h=i[d])if(delete i[h.end],h.push(l),h.end=f,p=r[f]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[f])if(delete r[h.start],h.unshift(l),h.start=d,p=i[d]){delete i[p.end];var y=p===h?h:p.concat(h);r[y.start=p.start]=i[y.end=h.end]=y}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=d]=i[h.end=f]=h});function a(l){var c=e.arcs[l<0?~l:l],d=c[0],f;return e.transform?(f=[0,0],c.forEach(function(h){f[0]+=h[0],f[1]+=h[1]})):f=c[c.length-1],l<0?[f,d]:[d,f]}function u(l,c){for(var d in l){var f=l[d];delete c[f.start],delete f.start,delete f.end,f.forEach(function(h){n[h<0?~h:h]=1}),s.push(f)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function w4t(e){return nMe(e,x4t.apply(this,arguments))}function x4t(e,t,n){var r,i,s;if(arguments.length>1)r=E4t(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:_4t(e,r)}}function E4t(e,t,n){var r=[],i=[],s;function o(d){var f=d<0?~d:d;(i[f]||(i[f]=[])).push({i:d,g:s})}function a(d){d.forEach(o)}function u(d){d.forEach(a)}function l(d){d.forEach(u)}function c(d){switch(s=d,d.type){case"GeometryCollection":d.geometries.forEach(c);break;case"LineString":a(d.arcs);break;case"MultiLineString":case"Polygon":u(d.arcs);break;case"MultiPolygon":l(d.arcs);break}}return c(t),i.forEach(n==null?function(d){r.push(d[0].i)}:function(d){n(d[0].g,d[d.length-1].g)&&r.push(d[0].i)}),r}const wa="year",Dl="quarter",Ja="month",Co="week",Ml="date",Ga="day",Cp="dayofyear",Pc="hours",Nc="minutes",Id="seconds",Wf="milliseconds",NZ=[wa,Dl,Ja,Co,Ml,Ga,Cp,Pc,Nc,Id,Wf],zz=NZ.reduce((e,t,n)=>(e[t]=1+n,e),{});function OZ(e){const t=Ft(e).slice(),n={};return t.length||st("Missing time unit."),t.forEach(i=>{cn(zz,i)?n[i]=1:st(`Invalid time unit: ${i}.`)}),(n[Co]||n[Ga]?1:0)+(n[Dl]||n[Ja]||n[Ml]?1:0)+(n[Cp]?1:0)>1&&st(`Incompatible time units: ${e}`),t.sort((i,s)=>zz[i]-zz[s]),t}const S4t={[wa]:"%Y ",[Dl]:"Q%q ",[Ja]:"%b ",[Ml]:"%d ",[Co]:"W%U ",[Ga]:"%a ",[Cp]:"%j ",[Pc]:"%H:00",[Nc]:"00:%M",[Id]:":%S",[Wf]:".%L",[`${wa}-${Ja}`]:"%Y-%m ",[`${wa}-${Ja}-${Ml}`]:"%Y-%m-%d ",[`${Pc}-${Nc}`]:"%H:%M"};function rMe(e,t){const n=rr({},S4t,t),r=OZ(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const R1=new Date;function DZ(e){return R1.setFullYear(e),R1.setMonth(0),R1.setDate(1),R1.setHours(0,0,0,0),R1}function iMe(e){return oMe(new Date(e))}function sMe(e){return eq(new Date(e))}function oMe(e){return Wm.count(DZ(e.getFullYear())-1,e)}function eq(e){return bS.count(DZ(e.getFullYear())-1,e)}function tq(e){return DZ(e).getDay()}function T4t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function aMe(e){return lMe(new Date(e))}function uMe(e){return nq(new Date(e))}function lMe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return sy.count(t-1,e)}function nq(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return _S.count(t-1,e)}function rq(e){return R1.setTime(Date.UTC(e,0,1)),R1.getUTCDay()}function C4t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function cMe(e,t,n,r,i){const s=t||1,o=Dr(e),a=(v,w,x)=>(x=x||v,A4t(n[x],r[x],v===o&&s,w)),u=new Date,l=qf(e),c=l[wa]?a(wa):iu(2012),d=l[Ja]?a(Ja):l[Dl]?a(Dl):B0,f=l[Co]&&l[Ga]?a(Ga,1,Co+Ga):l[Co]?a(Co,1):l[Ga]?a(Ga,1):l[Ml]?a(Ml,1):l[Cp]?a(Cp,1):US,h=l[Pc]?a(Pc):B0,p=l[Nc]?a(Nc):B0,m=l[Id]?a(Id):B0,y=l[Wf]?a(Wf):B0;return function(v){u.setTime(+v);const w=c(u);return i(w,d(u),f(u,w),h(u),p(u),m(u),y(u))}}function A4t(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function IE(e,t,n){return t+e*7-(n+6)%7}const I4t={[wa]:e=>e.getFullYear(),[Dl]:e=>Math.floor(e.getMonth()/3),[Ja]:e=>e.getMonth(),[Ml]:e=>e.getDate(),[Pc]:e=>e.getHours(),[Nc]:e=>e.getMinutes(),[Id]:e=>e.getSeconds(),[Wf]:e=>e.getMilliseconds(),[Cp]:e=>oMe(e),[Co]:e=>eq(e),[Co+Ga]:(e,t)=>IE(eq(e),e.getDay(),tq(t)),[Ga]:(e,t)=>IE(1,e.getDay(),tq(t))},R4t={[Dl]:e=>3*e,[Co]:(e,t)=>IE(e,0,tq(t))};function dMe(e,t){return cMe(e,t||1,I4t,R4t,T4t)}const k4t={[wa]:e=>e.getUTCFullYear(),[Dl]:e=>Math.floor(e.getUTCMonth()/3),[Ja]:e=>e.getUTCMonth(),[Ml]:e=>e.getUTCDate(),[Pc]:e=>e.getUTCHours(),[Nc]:e=>e.getUTCMinutes(),[Id]:e=>e.getUTCSeconds(),[Wf]:e=>e.getUTCMilliseconds(),[Cp]:e=>lMe(e),[Co]:e=>nq(e),[Ga]:(e,t)=>IE(1,e.getUTCDay(),rq(t)),[Co+Ga]:(e,t)=>IE(nq(e),e.getUTCDay(),rq(t))},P4t={[Dl]:e=>3*e,[Co]:(e,t)=>IE(e,0,rq(t))};function fMe(e,t){return cMe(e,t||1,k4t,P4t,C4t)}const N4t={[wa]:yp,[Dl]:L2.every(3),[Ja]:L2,[Co]:bS,[Ml]:Wm,[Ga]:Wm,[Cp]:Wm,[Pc]:ZF,[Nc]:QF,[Id]:$m,[Wf]:sE},O4t={[wa]:vp,[Dl]:F2.every(3),[Ja]:F2,[Co]:_S,[Ml]:sy,[Ga]:sy,[Cp]:sy,[Pc]:e6,[Nc]:JF,[Id]:$m,[Wf]:sE};function WS(e){return N4t[e]}function GS(e){return O4t[e]}function hMe(e,t,n){return e?e.offset(t,n):void 0}function pMe(e,t,n){return hMe(WS(e),t,n)}function mMe(e,t,n){return hMe(GS(e),t,n)}function gMe(e,t,n,r){return e?e.range(t,n,r):void 0}function yMe(e,t,n,r){return gMe(WS(e),t,n,r)}function vMe(e,t,n,r){return gMe(GS(e),t,n,r)}const fA=1e3,hA=fA*60,pA=hA*60,S4=pA*24,D4t=S4*7,Tge=S4*30,iq=S4*365,bMe=[wa,Ja,Ml,Pc,Nc,Id,Wf],mA=bMe.slice(0,-1),gA=mA.slice(0,-1),yA=gA.slice(0,-1),M4t=yA.slice(0,-1),$4t=[wa,Co],Cge=[wa,Ja],_Me=[wa],pC=[[mA,1,fA],[mA,5,5*fA],[mA,15,15*fA],[mA,30,30*fA],[gA,1,hA],[gA,5,5*hA],[gA,15,15*hA],[gA,30,30*hA],[yA,1,pA],[yA,3,3*pA],[yA,6,6*pA],[yA,12,12*pA],[M4t,1,S4],[$4t,1,D4t],[Cge,1,Tge],[Cge,3,3*Tge],[_Me,1,iq]];function wMe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(ZR(t))/n;let i=gS(a=>a[2]).right(pC,r),s,o;return i===pC.length?(s=_Me,o=Ey(t[0]/iq,t[1]/iq,n)):i?(i=pC[r/pC[i-1][2]<pC[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=bMe,o=Math.max(Ey(t[0],t[1],n),1)),{units:s,step:o}}function vA(e){const t={};return n=>t[n]||(t[n]=e(n))}function L4t(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=F4t(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function F4t(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function xMe(e){const t=vA(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=mb(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return L4t(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=mb(o??",f");const a=Ey(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=cTe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=dTe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=lTe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let sq;EMe();function EMe(){return sq=xMe({format:ip,formatPrefix:VK})}function SMe(e){return xMe(uTe(e))}function C$(e){return arguments.length?sq=SMe(e):sq}function Age(e,t,n){n=n||{},$t(n)||st(`Invalid time multi-format specifier: ${n}`);const r=t(Id),i=t(Nc),s=t(Pc),o=t(Ml),a=t(Co),u=t(Ja),l=t(Dl),c=t(wa),d=e(n[Wf]||".%L"),f=e(n[Id]||":%S"),h=e(n[Nc]||"%I:%M"),p=e(n[Pc]||"%I %p"),m=e(n[Ml]||n[Ga]||"%a %d"),y=e(n[Co]||"%b %d"),v=e(n[Ja]||"%B"),w=e(n[Dl]||"%B"),x=e(n[wa]||"%Y");return S=>(r(S)<S?d:i(S)<S?f:s(S)<S?h:o(S)<S?p:u(S)<S?a(S)<S?m:y:c(S)<S?l(S)<S?v:w:x)(S)}function TMe(e){const t=vA(e.format),n=vA(e.utcFormat);return{timeFormat:r=>jt(r)?t(r):Age(t,WS,r),utcFormat:r=>jt(r)?n(r):Age(n,GS,r),timeParse:vA(e.parse),utcParse:vA(e.utcParse)}}let oq;CMe();function CMe(){return oq=TMe({format:rX,parse:V0,utcFormat:_R,utcParse:ECe})}function AMe(e){return TMe(vCe(e))}function _I(e){return arguments.length?oq=AMe(e):oq}const aq=(e,t)=>rr({},e,t);function IMe(e,t){const n=e?SMe(e):C$(),r=t?AMe(t):_I();return aq(n,r)}function MZ(e,t){const n=arguments.length;return n&&n!==2&&st("defaultLocale expects either zero or two arguments."),n?aq(C$(e),_I(t)):aq(C$(),_I())}function j4t(){return EMe(),CMe(),MZ()}const B4t=/^(data:|([A-Za-z]+:)?\/\/)/,z4t=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,U4t=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Ige="file://";function V4t(e,t){return n=>({options:n||{},sanitize:q4t,load:H4t,fileAccess:!1,file:W4t(t),http:Y4t(e)})}async function H4t(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function q4t(e,t){t=rr({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=z4t.test(e.replace(U4t,""));(e==null||typeof e!="string"||!a)&&st("Sanitize failure, invalid URI: "+Ct(e));const u=B4t.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(Ige))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(Ige.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function W4t(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):G4t}async function G4t(){st("No file system access.")}function Y4t(e){return e?async function(t,n){const r=rr({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?ir(s[i])?s[i]():s.text():st(s.status+""+s.statusText)}:K4t}async function K4t(){st("No HTTP fetch method available.")}const X4t=e=>e!=null&&e===e,Q4t=e=>e==="true"||e==="false"||e===!0||e===!1,J4t=e=>!Number.isNaN(Date.parse(e)),RMe=e=>!Number.isNaN(+e)&&!(e instanceof Date),Z4t=e=>RMe(e)&&Number.isInteger(+e),uq={boolean:RZ,integer:Ya,number:Ya,date:kZ,string:PZ,unknown:ru},IO=[Q4t,Z4t,RMe,J4t],ejt=["boolean","integer","number","date"];function kMe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=IO.length,i=IO.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&X4t(u)&&!IO[a](u)&&(i[a]=0,++o,o===IO.length))return"string";return ejt[i.reduce((s,o)=>s===0?o:s,0)-1]}function PMe(e,t){return t.reduce((n,r)=>(n[r]=kMe(e,r),n),{})}function Rge(e){const t=function(n,r){const i={delimiter:e};return $Z(n,r?rr(r,i):i)};return t.responseType="text",t}function $Z(e,t){return t.header&&(e=t.header.map(Ct).join(t.delimiter)+`
`+e),sTe(t.delimiter).parse(e+"")}$Z.responseType="text";function tjt(e){return typeof Buffer=="function"&&ir(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function LZ(e,t){const n=t&&t.property?Cd(t.property):ru;return $t(e)&&!tjt(e)?njt(n(e),t):n(JSON.parse(e))}LZ.responseType="json";function njt(e,t){return!ut(e)&&KDe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const rjt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function NMe(e,t){let n,r,i,s;return e=LZ(e,t),t&&t.feature?(n=b4t,i=t.feature):t&&t.mesh?(n=w4t,i=t.mesh,s=rjt[t.filter]):st("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):st("Invalid TopoJSON object: "+i),r&&r.features||[r]}NMe.responseType="json";const UD={dsv:$Z,csv:Rge(","),tsv:Rge("	"),json:LZ,topojson:NMe};function FZ(e,t){return arguments.length>1?(UD[e]=t,this):cn(UD,e)?UD[e]:null}function OMe(e){const t=FZ(e);return t&&t.responseType||"text"}function DMe(e,t,n,r){t=t||{};const i=FZ(t.type||"json");return i||st("Unknown data format type: "+t.type),e=i(e,t),t.parse&&ijt(e,t.parse,n,r),cn(e,"columns")&&delete e.columns,e}function ijt(e,t,n,r){if(!e.length)return;const i=_I();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,d;t==="auto"&&(t=PMe(e,s)),s=Object.keys(t);const f=s.map(h=>{const p=t[h];let m,y;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),y=m[1],(y[0]==="'"&&y[y.length-1]==="'"||y[0]==='"'&&y[y.length-1]==='"')&&(y=y.slice(1,-1)),(m[0]==="utc"?r:n)(y);if(!uq[p])throw Error("Illegal format pattern: "+h+":"+p);return uq[p]});for(u=0,c=e.length,d=s.length;u<c;++u)for(o=e[u],l=0;l<d;++l)a=s[l],o[a]=f[l](o[a])}const T4=V4t(typeof fetch<"u"&&fetch,null);function C4(e){const t=e||ru,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function VD(e,t){try{await t(e)}catch(n){e.error(n)}}const MMe=Symbol("vega_id");let sjt=1;function A4(e){return!!(e&&un(e))}function un(e){return e[MMe]}function $Me(e,t){return e[MMe]=t,e}function li(e){const t=e===Object(e)?e:{data:e};return un(t)?t:$Me(t,sjt++)}function jZ(e){return I4(e,li({}))}function I4(e,t){for(const n in e)t[n]=e[n];return t}function LMe(e,t){return $Me(t,un(e))}function h_(e,t){return e?t?(n,r)=>e(n,r)||un(t(n))-un(t(r)):(n,r)=>e(n,r)||un(n)-un(r):null}function FMe(e){return e&&e.constructor===p_}function p_(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:p_,insert(a){const u=Ft(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=ir(a)?r:t,l=Ft(a),c=l.length;for(let d=0;d<c;++d)u.push(l[d]);return this},modify(a,u,l){const c={field:u,value:iu(l)};return ir(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return ir(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let d,f,h,p,m,y;for(d=0,f=u.length;d<f;++d)l[un(u[d])]=1;for(d=0,f=t.length;d<f;++d)m=t[d],l[un(m)]=-1;for(d=0,f=r.length;d<f;++d)p=r[d],u.forEach(w=>{p(w)&&(l[un(w)]=-1)});for(d=0,f=e.length;d<f;++d)m=e[d],y=un(m),l[y]?l[y]=1:a.add.push(li(e[d]));for(d=0,f=u.length;d<f;++d)m=u[d],l[un(m)]<0&&a.rem.push(m);function v(w,x,S){S?w[x]=S(w):a.encode=x,o||(c[un(w)]=w)}for(d=0,f=n.length;d<f;++d)h=n[d],m=h.tuple,p=h.field,y=l[un(m)],y>0&&(v(m,p,h.value),a.modifies(p));for(d=0,f=i.length;d<f;++d)h=i[d],p=h.filter,u.forEach(w=>{p(w)&&l[un(w)]>0&&v(w,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(w=>l[un(w)]>0):u.slice();else for(y in c)a.mod.push(c[y]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const HD="_:mod:_";function R4(){Object.defineProperty(this,HD,{writable:!0,value:{}})}R4.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[HD];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=ut(n)?1+n.length:-1),i},modified(e,t){const n=this[HD];if(arguments.length){if(ut(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[HD]={},this}};let ojt=0;const ajt="pulse",ujt=new R4,ljt=1,cjt=2;function $i(e,t,n,r){this.id=++ojt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function kge(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}$i.prototype={targets(){return this._targets||(this._targets=C4(JR))},set(e){return this.value!==e?(this.value=e,1):0},skip:kge(ljt),modified:kge(cjt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new R4,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(d,f,h)=>{h instanceof $i?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:d,index:f})):r.set(d,f,h)};for(o in e)if(a=e[o],o===ajt)Ft(a).forEach(d=>{d instanceof $i?d!==this&&(d.targets().add(this),s.push(d)):st("Pulse parameters must be operator instances.")}),this.source=a;else if(ut(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||ujt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function djt(e,t,n,r){let i=1,s;return e instanceof $i?s=e:e&&e.prototype instanceof $i?s=new e:ir(e)?s=new $i(null,e):(i=0,s=new $i(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function fjt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let hjt=0;function k4(e,t,n){this.id=++hjt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function x0(e,t,n){return new k4(e,t,n)}k4.prototype={_filter:Ad,_apply:ru,targets(){return this._targets||(this._targets=C4(JR))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=x0(e);return this.targets().add(t),t},apply(e){const t=x0(null,e);return this.targets().add(t),t},merge(){const e=x0();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=x0();return this.targets().add(x0(null,null,AZ(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(x0(null,null,()=>n=!0)),t.targets().add(x0(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Ad,this._targets=null}};function pjt(e,t,n,r){const i=this,s=x0(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=Ft(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function mjt(e,t){const n=this.locale();return DMe(e,t,n.timeParse,n.utcParse)}function gjt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function yjt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:OMe(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function vjt(e,t,n){const r=this,i=r._pending||bjt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(Ad).insert(s.data||[])),i.done(),s}function bjt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const _jt={skip:!0};function wjt(e,t,n,r,i){return(e instanceof $i?Ejt:xjt)(this,e,t,n,r,i),this}function xjt(e,t,n,r,i,s){const o=rr({},s,_jt);let a,u;ir(n)||(n=iu(n)),r===void 0?a=l=>e.touch(n(l)):ir(r)?(u=new $i(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),d=u.value;FMe(d)?e.pulse(c,d,s):e.update(c,d,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function Ejt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new $i(null,Sjt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function Sjt(e,t){return t=ir(t)?t:iu(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function Tjt(e){e.rank=++this._rank}function Cjt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&st("Cycle detected in dataflow graph.")}const A$={},Mh=1,I0=2,Em=4,Ajt=Mh|I0,Pge=Mh|Em,Ew=Mh|I0|Em,Nge=8,mC=16,Oge=32,Dge=64;function hy(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Uz(e,t){const n=[];return A0(e,t,r=>n.push(r)),n}function Mge(e,t){const n={};return e.visit(t,r=>{n[un(r)]=1}),r=>n[un(r)]?null:r}function RO(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}hy.prototype={StopPropagation:A$,ADD:Mh,REM:I0,MOD:Em,ADD_REM:Ajt,ADD_MOD:Pge,ALL:Ew,REFLOW:Nge,SOURCE:mC,NO_SOURCE:Oge,NO_FIELDS:Dge,fork(e){return new hy(this.dataflow).init(this,e)},clone(){const e=this.fork(Ew);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(Ew|mC)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new hy(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Dge)&&(n.fields=e.fields),t&Mh?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&I0?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Em?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Oge?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||Ew;return t&Mh&&this.add.length||t&I0&&this.rem.length||t&Em&&this.mod.length},reflow(e){if(e)return this.fork(Ew).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Em,Mge(this,Mh))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return ut(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?ut(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Mh&&(n.addF=RO(n.addF,t)),e&I0&&(n.remF=RO(n.remF,t)),e&Em&&(n.modF=RO(n.modF,t)),e&mC&&(n.srcF=RO(n.srcF,t)),n},materialize(e){e=e||Ew;const t=this;return e&Mh&&t.addF&&(t.add=Uz(t.add,t.addF),t.addF=null),e&I0&&t.remF&&(t.rem=Uz(t.rem,t.remF),t.remF=null),e&Em&&t.modF&&(t.mod=Uz(t.mod,t.modF),t.modF=null),e&mC&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&mC)return A0(n.source,n.srcF,r),n;e&Mh&&A0(n.add,n.addF,r),e&I0&&A0(n.rem,n.remF,r),e&Em&&A0(n.mod,n.modF,r);const i=n.source;if(e&Nge&&i){const s=n.add.length+n.mod.length;s===i.length||(s?A0(i,Mge(n,Pge),r):A0(i,n.srcF,r))}return n}};function BZ(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}kt(BZ,hy,{fork(e){const t=new hy(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?ut(e)?e.some(r=>n[r]):n[e]:0},filter(){st("MultiPulse does not support filtering.")},materialize(){st("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function Ijt(e,t,n){const r=this,i=[];if(r._pulse)return jMe(r);if(r._pending&&await r._pending,t&&await VD(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new hy(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=C4(JR);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=A$),u!==A$&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((d,f)=>f.priority-d.priority);r._postrun=[];for(let d=0;d<c.length;++d)await VD(r,c[d].callback)}return n&&await VD(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(d=>{try{d(r)}catch(f){r.error(f)}})})),r}async function Rjt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function kjt(e,t,n){return this._pulse?jMe(this):(this.evaluate(e,t,n),this)}function Pjt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function jMe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Njt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Ojt(e,t){const n=e.source,r=this._clock;return n&&ut(n)?new BZ(this,r,n.map(i=>i.pulse),t):this._input[e.id]||Djt(this._pulse,n&&n.pulse)}function Djt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==A$&&(e.source=t.source),e)}const zZ={skip:!1,force:!1};function Mjt(e,t){const n=t||zZ;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function $jt(e,t,n){const r=n||zZ;return(e.set(t)||r.force)&&this.touch(e,r),this}function Ljt(e,t,n){this.touch(e,n||zZ);const r=new hy(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function Fjt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),BMe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,jjt(t,0,e)):r=n,r}}}function BMe(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function jjt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,BMe(e,r,t,n)}function Dx(){this.logger(xZ()),this.logLevel(_Z),this._clock=0,this._rank=0,this._locale=MZ();try{this._loader=T4()}catch{}this._touched=C4(JR),this._input={},this._pulse=null,this._heap=Fjt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function gC(e){return function(){return this._log[e].apply(this,arguments)}}Dx.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:gC("error"),warn:gC("warn"),info:gC("info"),debug:gC("debug"),logLevel:gC("level"),cleanThreshold:1e4,add:djt,connect:fjt,rank:Tjt,rerank:Cjt,pulse:Ljt,touch:Mjt,update:$jt,changeset:p_,ingest:gjt,parse:mjt,preload:vjt,request:yjt,events:pjt,on:wjt,evaluate:Ijt,run:kjt,runAsync:Rjt,runAfter:Pjt,_enqueue:Njt,_getPulse:Ojt};function et(e,t){$i.call(this,e,null,t)}kt(et,$i,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const RE={};function zMe(e){const t=UMe(e);return t&&t.Definition||null}function UMe(e){return e=e&&e.toLowerCase(),cn(RE,e)?RE[e]:null}function*VMe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function UZ(e,t,n){const r=Float64Array.from(VMe(e,n));return r.sort(Hm),t.map(i=>cSe(r,i))}function VZ(e,t){return UZ(e,[.25,.5,.75],t)}function HZ(e,t){const n=e.length,r=mct(e,t),i=VZ(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function HMe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,d,f;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,d=0,f=e.steps.length;d<f&&e.steps[d]<c;++d);a=e.steps[Math.max(0,d-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(d=0,f=i.length;d<f;++d)c=a/i[d],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var Rd=Math.random;function Bjt(e){Rd=e}function qMe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(VMe(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(Rd()*s)];c[l]=a/s}return c.sort(Hm),[gx(c,n/2),gx(c,1-n/2)]}function WMe(e,t,n,r){r=r||(f=>f);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,d;for(;a<i;++a){if(d=r(e[a]),d>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=d+t,u=d}l=d}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?zjt(s,t+t/4):s}function zjt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function Ujt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function Vjt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*Rd())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const GMe=Math.sqrt(2*Math.PI),Hjt=Math.SQRT2;let yC=NaN;function P4(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(yC===yC)n=yC,yC=NaN;else{do n=Rd()*2-1,r=Rd()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,yC=r*s}return e+n*t}function qZ(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*GMe)}function N4(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function O4(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*Hjt*qjt(2*e-1)}function qjt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function WZ(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>P4(n,r),pdf:s=>qZ(s,n,r),cdf:s=>N4(s,n,r),icdf:s=>O4(s,n,r)};return i.mean(e).stdev(t)}function GZ(e,t){const n=WZ();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=HZ(e)),i):t},sample(){return e[~~(Rd()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function YZ(e,t){return e=e||0,t=t??1,Math.exp(e+P4()*t)}function KZ(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*GMe*e)}function XZ(e,t,n){return N4(Math.log(e),t,n)}function QZ(e,t,n){return Math.exp(O4(e,t,n))}function YMe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>YZ(n,r),pdf:s=>KZ(s,n,r),cdf:s=>XZ(s,n,r),icdf:s=>QZ(s,n,r)};return i.mean(e).stdev(t)}function KMe(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=Rd();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function JZ(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Rd()}function ZZ(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function eee(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function tee(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function XMe(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>JZ(n,r),pdf:s=>ZZ(s,n,r),cdf:s=>eee(s,n,r),icdf:s=>tee(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function nee(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function ek(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function D4(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,d,f;for(f of e)s[a]=c=+t(f),o[a]=d=+n(f),++a,u+=(c-u)/a,l+=(d-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function tk(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function YS(e,t,n,r,i){let s=0,o=0;return tk(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function ree(e,t,n){let r=0,i=0,s=0,o=0,a=0;tk(e,t,n,(c,d)=>{++a,r+=(c-r)/a,i+=(d-i)/a,s+=(c*d-s)/a,o+=(c*c-o)/a});const u=ek(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:YS(e,t,n,i,l)}}function QMe(e,t,n){let r=0,i=0,s=0,o=0,a=0;tk(e,t,n,(c,d)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(d-i)/a,s+=(c*d-s)/a,o+=(c*c-o)/a});const u=ek(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:YS(e,t,n,i,l)}}function JMe(e,t,n){const[r,i,s,o]=D4(e,t,n);let a=0,u=0,l=0,c=0,d=0,f,h,p;tk(e,t,n,(w,x)=>{f=r[d++],h=Math.log(x),p=f*x,a+=(x*h-a)/d,u+=(p-u)/d,l+=(p*h-l)/d,c+=(f*p-c)/d});const[m,y]=ek(u/o,a/o,l/o,c/o),v=w=>Math.exp(m+y*(w-s));return{coef:[Math.exp(m-y*s),y],predict:v,rSquared:YS(e,t,n,o,v)}}function ZMe(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;tk(e,t,n,(d,f)=>{const h=Math.log(d),p=Math.log(f);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(f-a)/u});const l=ek(r,i,s,o),c=d=>l[0]*Math.pow(d,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:YS(e,t,n,a,c)}}function iee(e,t,n){const[r,i,s,o]=D4(e,t,n),a=r.length;let u=0,l=0,c=0,d=0,f=0,h,p,m,y;for(h=0;h<a;)p=r[h],m=i[h++],y=p*p,u+=(y-u)/h,l+=(y*p-l)/h,c+=(y*y-c)/h,d+=(p*m-d)/h,f+=(y*m-f)/h;const v=c-u*u,w=u*v-l*l,x=(f*u-d*l)/w,S=(d*v-f*l)/w,E=-x*u,T=A=>(A=A-s,x*A*A+S*A+E+o);return{coef:[E-S*s+x*s*s+o,S-2*x*s,x],predict:T,rSquared:YS(e,t,n,o,T)}}function e3e(e,t,n,r){if(r===0)return nee(e,t,n);if(r===1)return ree(e,t,n);if(r===2)return iee(e,t,n);const[i,s,o,a]=D4(e,t,n),u=i.length,l=[],c=[],d=r+1;let f,h,p,m,y;for(f=0;f<d;++f){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],f)*s[p];for(l.push(m),y=new Float64Array(d),h=0;h<d;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],f+h);y[h]=m}c.push(y)}c.push(l);const v=Gjt(c),w=x=>{x-=o;let S=a+v[0]+v[1]*x+v[2]*x*x;for(f=3;f<d;++f)S+=v[f]*Math.pow(x,f);return S};return{coef:Wjt(d,v,-o,a),predict:w,rSquared:YS(e,t,n,a,w)}}function Wjt(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function Gjt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const $ge=2,Lge=1e-12;function t3e(e,t,n,r){const[i,s,o,a]=D4(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),d=new Float64Array(u),f=new Float64Array(u).fill(1);for(let h=-1;++h<=$ge;){const p=[0,l-1];for(let y=0;y<u;++y){const v=i[y],w=p[0],x=p[1],S=v-i[w]>i[x]-v?w:x;let E=0,T=0,A=0,I=0,k=0;const D=1/Math.abs(i[S]-v||1);for(let O=w;O<=x;++O){const $=i[O],F=s[O],B=Yjt(Math.abs(v-$)*D)*f[O],q=$*B;E+=B,T+=q,A+=F*B,I+=F*q,k+=$*q}const[M,z]=ek(T/E,A/E,I/E,k/E);c[y]=M+z*v,d[y]=Math.abs(s[y]-c[y]),Kjt(i,y+1,p)}if(h===$ge)break;const m=dSe(d);if(Math.abs(m)<Lge)break;for(let y=0,v,w;y<u;++y)v=d[y]/(6*m),f[y]=v>=1?Lge:(w=1-v*v)*w}return Xjt(i,c,o,a)}function Yjt(e){return(e=1-e*e*e)*e*e}function Kjt(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function Xjt(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const Qjt=.5*Math.PI/180;function M4(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let d=l[0],f=c[c.length-1];const h=1/a,p=Jjt(d[1],c);for(;f;){const m=i((d[0]+f[0])/2);m[0]-d[0]>=u&&Zjt(d,m,f,h,p)>Qjt?c.push(m):(d=f,l.push(f),c.pop()),f=c[c.length-1]}return l}function Jjt(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function Zjt(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function e5t(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function lq(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:e5t(e)}function n3e(e,t,n){return n||e+(t?"_"+t:"")}const Vz=()=>{},t5t={init:Vz,add:Vz,rem:Vz,idx:0},wI={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},nk=Object.keys(wI).filter(e=>e!=="__count__");function n5t(e,t){return(n,r)=>rr({name:e,aggregate_param:r,out:n||e},t5t,t)}[...nk,"__count__"].forEach(e=>{wI[e]=n5t(e,wI[e])});function r3e(e,t,n){return wI[e](n,t)}function i3e(e,t){return e.idx-t.idx}function r5t(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=wI[i]())})};return e.forEach(n),Object.values(t).sort(i3e)}function i5t(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function s5t(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function o5t(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function a5t(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function s3e(e,t){const n=t||ru,r=r5t(e),i=e.slice().sort(i3e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=i5t,s.prototype.add=s5t,s.prototype.rem=o5t,s.prototype.set=a5t,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function see(e){this._key=e?Cd(e):un,this.reset()}const Ia=see.prototype;Ia.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Ia.add=function(e){this._add.push(e)};Ia.rem=function(e){this._rem.push(e)};Ia.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Ia.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",cn(n,s)||(n[s]=1,++i);return i};Ia.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=GDe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Ia.argmin=function(e){return this.extent(e)[0]||{}};Ia.argmax=function(e){return this.extent(e)[1]||{}};Ia.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Ia.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Ia.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=VZ(this.values(),e),this._get=e),this._q};Ia.q1=function(e){return this.quartile(e)[0]};Ia.q2=function(e){return this.quartile(e)[1]};Ia.q3=function(e){return this.quartile(e)[2]};Ia.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=qMe(this.values(),1e3,.05,e),this._get=e),this._ci};Ia.ci0=function(e){return this.ci(e)[0]};Ia.ci1=function(e){return this.ci(e)[1]};function Vy(e){et.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Vy.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:nk},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};kt(Vy,et,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,d;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][d=c[n[l]]]=d}s(e._prev),s(t);function o(a,u,l){const c=n[l],d=r[l++];for(const f in d){const h=a?a+"|"+f:f;u[c]=d[f],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(w){const x=Ft(Qa(w)),S=x.length;let E=0,T;for(;E<S;++E)r[T=x[E]]||(r[T]=1,t.push(T))}this._dims=Ft(e.groupby),this._dnames=this._dims.map(w=>{const x=Ns(w);return i(w),n.push(x),x}),this.cellkey=e.key?e.key:lq(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let d,f,h,p,m,y,v;for(l!==o.length&&st("Unmatched number of fields and aggregate ops."),v=0;v<l;++v){if(d=s[v],f=o[v],h=a[v]||null,d==null&&f!=="count"&&st("Null aggregate field specified."),m=Ns(d),y=n3e(f,m,u[v]),n.push(y),f==="count"){this._counts.push(y);continue}p=c[m],p||(i(d),p=c[m]=[],p.field=d,this._measures.push(p)),f!=="count"&&(this._countOnly=!1),p.push(r3e(f,h,y))}return this._measures=this._measures.map(w=>s3e(w,w.field)),Object.create(null)},cellkey:lq(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new see),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?LMe(t.tuple,s):li(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,d;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,d=this._alen;c<d;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,d=this._mlen;c<d;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const u5t=1e-14;function oee(e){et.call(this,null,e)}oee.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};kt(oee,et,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(Qa(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const d=r(c);c[a]=d,c[u]=d==null?null:i+s*(1+(d-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=HMe(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=Ya(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(u5t+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=Ul(u,Qa(t),e.name||"bin_"+Ns(t))}});function o3e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?ZDe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function aee(e){et.call(this,[],e)}aee.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};kt(aee,et,{transform(e,t){const n=t.fork(t.ALL),r=o3e(un,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(h_(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function a3e(e){$i.call(this,null,l5t,e)}kt(a3e,$i);function l5t(e){return this.value&&!e.modified()?this.value:CZ(e.fields,e.orders)}function uee(e){et.call(this,null,e)}uee.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function c5t(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}kt(uee,et,{transform(e,t){const n=d=>f=>{for(var h=c5t(a(f),e.case,s)||[],p,m=0,y=h.length;m<y;++m)o.test(p=h[m])||d(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(d=>i[d]=1+(i[d]||0)),c=n(d=>i[d]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=li({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function lee(e){et.call(this,null,e)}lee.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};kt(lee,et,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=d5t(a,i,s,e.filter||Ad)):n.mod=a,n.source=this.value,n.modifies(r)}});function d5t(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(li(s)),s={},s[t]=l);return i}const Fge={kde:GZ,mixture:KMe,normal:WZ,lognormal:YMe,uniform:XMe},f5t="distributions",jge="function",h5t="field";function u3e(e,t){const n=e[jge];cn(Fge,n)||st("Unknown distribution function: "+n);const r=Fge[n]();for(const i in e)i===h5t?r.data((e.from||t()).map(e[i])):i===f5t?r[i](e[i].map(s=>u3e(s,t))):typeof r[i]===jge&&r[i](e[i]);return r}function cee(e){et.call(this,null,e)}const l3e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],p5t={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:l3e},{name:"weights",type:"number",array:!0}]};cee.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:l3e.concat(p5t)},{name:"as",type:"string",array:!0,default:["value","density"]}]};kt(cee,et,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=u3e(e.distribution,m5t(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&st("Invalid density method: "+o),!e.extent&&!r.data&&st("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||Tp(r.data()),l=M4(o,u,i,s).map(c=>{const d={};return d[a[0]]=c[0],d[a[1]]=c[1],li(d)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function m5t(e){return()=>e.materialize(e.SOURCE).source}function c3e(e,t){return e?e.map((n,r)=>t[r]||Ns(n)):null}function dee(e,t,n){const r=[],i=d=>d(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const d3e="bin";function fee(e){et.call(this,null,e)}fee.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:d3e}]};const g5t=(e,t)=>ZR(Tp(e,t))/30;kt(fee,et,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=dee(t.source,e.groupby,ru),i=e.smooth||!1,s=e.field,o=e.step||g5t(n,s),a=h_((p,m)=>s(p)-s(m)),u=e.as||d3e,l=r.length;let c=1/0,d=-1/0,f=0,h;for(;f<l;++f){const p=r[f].sort(a);h=-1;for(const m of WMe(p,o,i,s))m<c&&(c=m),m>d&&(d=m),p[++h][u]=m}return this.value={start:c,stop:d,step:o},t.reflow(!0).modifies(u)}});function f3e(e){$i.call(this,null,y5t,e),this.modified(!0)}kt(f3e,$i);function y5t(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Ul(n=>t(n,e),Qa(t),Ns(t))}function hee(e){et.call(this,[void 0,void 0],e)}hee.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};kt(hee,et,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=Ya(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Ns(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function pee(e,t){$i.call(this,e),this.parent=t,this.count=0}kt(pee,$i,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function $4(e){et.call(this,{},e),this._keys=qS();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}kt($4,et,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=cn(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new pee(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=un(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(un(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=un(u),c=s.get(l),d=r(u);c===d?a(d).mod(u):(s.set(l,d),a(c).rem(u),a(d).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(un(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=un(u),c=s.get(l),d=r(u);c!==d&&(s.set(l,d),a(c).rem(u),a(d).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function h3e(e){$i.call(this,null,v5t,e)}kt(h3e,$i);function v5t(e){return this.value&&!e.modified()?this.value:ut(e.name)?Ft(e.name).map(t=>Cd(t)):Cd(e.name,e.as)}function mee(e){et.call(this,qS(),e)}mee.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};kt(mee,et,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,d=>{const f=un(d);r.has(f)?r.delete(f):o.push(d)}),t.visit(t.ADD,d=>{u(d,e)?s.push(d):r.set(un(d),1)});function c(d){const f=un(d),h=u(d,e),p=r.get(f);h&&p?(r.delete(f),s.push(d)):!h&&!p?(r.set(f,1),o.push(d)):l&&h&&!p&&a.push(d)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function gee(e){et.call(this,[],e)}gee.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};kt(gee,et,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=c3e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,d,f,h;for(;c<l;++c){for(f=jZ(a),d=0;d<o;++d)f[i[d]]=(h=u[d][c])==null?null:h;s&&(f[s]=c),n.add.push(f)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function yee(e){et.call(this,[],e)}yee.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};kt(yee,et,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Ns),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,d;c<u;++c)d=jZ(l),d[o]=i[c],d[a]=r[c](l),n.add.push(d)}),this.value=n.source=n.add,n.modifies(s)}});function vee(e){et.call(this,null,e)}vee.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};kt(vee,et,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function p3e(e){et.call(this,[],e)}kt(p3e,et,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=li(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const kO={value:"value",median:dSe,mean:Sct,min:C2,max:tp},b5t=[];function bee(e){et.call(this,[],e)}bee.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function _5t(e){var t=e.method||kO.value,n;if(kO[t]==null)st("Unrecognized imputation method: "+t);else return t===kO.value?(n=e.value!==void 0?e.value:0,()=>n):kO[t]}function w5t(e){const t=e.field;return n=>n?t(n):NaN}kt(bee,et,{transform(e,t){var n=t.fork(t.ALL),r=_5t(e),i=w5t(e),s=Ns(e.field),o=Ns(e.key),a=(e.groupby||[]).map(Ns),u=x5t(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,d=u.domain.length,f,h,p,m,y,v,w,x,S,E;for(y=0,x=u.length;y<x;++y)for(f=u[y],p=f.values,h=NaN,w=0;w<d;++w)if(f[w]==null){for(m=u.domain[w],E={_impute:!0},v=0,S=p.length;v<S;++v)E[a[v]]=p[v];E[o]=m,E[s]=Number.isNaN(h)?h=r(f,i):h,l.push(li(E))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function x5t(e,t,n,r){var i=v=>v(y),s=[],o=r?r.slice():[],a={},u={},l,c,d,f,h,p,m,y;for(o.forEach((v,w)=>a[v]=w+1),f=0,m=e.length;f<m;++f)y=e[f],p=n(y),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):b5t)+"",(d=u[c])||(d=u[c]=[],s.push(d),d.values=l),d[h-1]=y;return s.domain=o,s}function _ee(e){Vy.call(this,e)}_ee.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:nk},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};kt(_ee,Vy,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{rr(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function wee(e){et.call(this,null,e)}wee.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};kt(wee,et,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=dee(r,e.groupby,e.field),s=(e.groupby||[]).map(Ns),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,d=e.steps||e.minsteps||25,f=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&st("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Tp(r,e.field)),d=f=e.steps||f),i.forEach(h=>{const p=GZ(h,o)[a],m=e.counts?h.length:1,y=c||Tp(h);M4(p,y,d,f).forEach(v=>{const w={};for(let x=0;x<s.length;++x)w[s[x]]=h.dims[x];w[u[0]]=v[0],w[u[1]]=v[1]*m,l.push(li(w))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function m3e(e){$i.call(this,null,E5t,e)}kt(m3e,$i);function E5t(e){return this.value&&!e.modified()?this.value:IZ(e.fields,e.flat)}function g3e(e){et.call(this,[],e),this._pending=null}kt(g3e,et,{transform(e,t){const n=t.dataflow;return this._pending?Hz(this,t,this._pending):S5t(e)?t.StopPropagation:e.values?Hz(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=Ft(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>Hz(this,t,Ft(r.data)))}});function S5t(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function Hz(e,t,n){n.forEach(li);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function xee(e){et.call(this,{},e)}xee.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};kt(xee,et,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,d,f,h;return i?(f=i.length,a>1&&!c&&st('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*f&&st('The "as" parameter has too few output field names.'),c=c||i.map(Ns),d=function(p){for(var m=0,y=0,v,w;m<a;++m)if(w=r.get(n[m](p)),w==null)for(v=0;v<f;++v,++y)p[c[y]]=s;else for(v=0;v<f;++v,++y)p[c[y]]=i[v](w)}):(c||st("Missing output field names."),d=function(p){for(var m=0,y;m<a;++m)y=r.get(n[m](p)),p[c[m]]=y??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,d),l.modifies(c)}});function y3e(e){$i.call(this,null,T5t,e)}kt(y3e,$i);function T5t(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function v3e(e){$i.call(this,null,C5t,e)}kt(v3e,$i);function C5t(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function b3e(e){et.call(this,null,e)}kt(b3e,et,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Eee(e){Vy.call(this,e)}Eee.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:nk,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};kt(Eee,Vy,{_transform:Vy.prototype.transform,transform(e,t){return this._transform(A5t(e,t),t)}});function A5t(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=Qa(n).concat(Qa(r)),o=R5t(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>I5t(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function I5t(e,t,n,r){return Ul(i=>t(i)===e?n(i):NaN,r,e+"")}function R5t(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(E4),t?i.slice(0,t):i}function _3e(e){$4.call(this,e)}kt(_3e,$4,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(un(s),n,t,s);return(e.modified("field")||r&&t.modified(Qa(r)))&&st("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(li(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function See(e){et.call(this,null,e)}See.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};kt(See,et,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=c3e(e.fields,e.as||[]),s=r?(a,u)=>k5t(a,u,r,i):I4;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=un(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,li({}));o[un(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[un(a)]))}),n}});function k5t(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function w3e(e){et.call(this,null,e)}kt(w3e,et,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Tee(e){et.call(this,null,e)}Tee.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const P5t=1e-14;kt(Tee,et,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=dee(i,e.groupby,e.field),o=(e.groupby||[]).map(Ns),a=[],u=e.step||.01,l=e.probs||cc(u/2,1-P5t,u),c=l.length;return s.forEach(d=>{const f=UZ(d,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=d.dims[m];p[r[0]]=l[h],p[r[1]]=f[h],a.push(li(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function x3e(e){et.call(this,null,e)}kt(x3e,et,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=un(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=jZ(i);r[un(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[un(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function Cee(e){et.call(this,[],e),this.count=0}Cee.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};kt(Cee,et,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,d)=>(c[un(d)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let d,f;o.length<i?o.push(c):(f=~~((a+1)*Rd()),f<o.length&&f>=u&&(d=o[f],s[un(d)]&&n.rem.push(d),o[f]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const d=un(c);s[d]&&(s[d]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[un(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[un(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let d=0;d<c;++d)s[un(o[d])]=-1,n.rem.push(o[d]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[un(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[un(c)])),this.count=a,this.value=n.source=o,n}});function Aee(e){et.call(this,null,e)}Aee.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};kt(Aee,et,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=cc(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,li(s)}),n.add=t.add.concat(this.value),n}});function E3e(e){et.call(this,null,e),this.modified(!0)}kt(E3e,et,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Iee(e){et.call(this,null,e)}const S3e=["unit0","unit1"];Iee.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:NZ,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:S3e}]};kt(Iee,et,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?GS:WS)(s.unit).offset,a=e.as||S3e,u=a[0],l=a[1],c=s.step;let d=s.start||1/0,f=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Qa(n)))&&(t=t.reflow(!0),h=t.SOURCE,d=1/0,f=-1/0),t.visit(h,p=>{const m=n(p);let y,v;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=y=v=s(m),r&&(p[l]=v=o(y,c)),y<d&&(d=y),v>f&&(f=v))}),s.start=d,s.stop=f,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:wMe({extent:e.extent||Tp(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=OZ(r),o=this.value||{},a=(n?fMe:dMe)(s,i);return a.unit=Dr(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function T3e(e){et.call(this,qS(),e)}kt(T3e,et,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function C3e(e){et.call(this,null,e)}kt(C3e,et,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(h_(e.sort)):t.source).map(e.field))}});function N5t(e,t,n,r){const i=xI[e](t,n);return{init:i.init||B0,update:function(s,o){o[r]=i.next(s)}}}const xI={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=xI.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||st("ntile num must be greater than zero.");const n=xI.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||st("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=O5t(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function O5t(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const D5t=Object.keys(xI);function A3e(e){const t=Ft(e.ops),n=Ft(e.fields),r=Ft(e.params),i=Ft(e.aggregate_params),s=Ft(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],d=[];let f=!0;function h(p){Ft(Qa(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const y=n[m],v=r[m],w=i[m]||null,x=Ns(y),S=n3e(p,x,s[m]);if(h(y),o.push(S),cn(xI,p))a.push(N5t(p,y,v,S));else{if(y==null&&p!=="count"&&st("Null aggregate field specified."),p==="count"){c.push(S);return}f=!1;let E=l[x];E||(E=l[x]=[],E.field=y,d.push(E)),E.push(r3e(p,w,S))}}),(c.length||d.length)&&(this.cell=M5t(d,c,f)),this.inputs=Object.keys(u)}const I3e=A3e.prototype;I3e.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};I3e.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function M5t(e,t,n){e=e.map(u=>s3e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new see;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function Ree(e){et.call(this,{},e),this._mlen=0,this._mods=[]}Ree.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:D5t.concat(nk)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};kt(Ree,et,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=h_(e.sort),i=lq(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new A3e(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)$5t(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=o3e(un),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function $5t(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?gS(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||iu(-1)};t.init();for(let d=0;d<u;++d)L5t(c,o,d,u),s&&F5t(c,l),t.update(c,a[d])}function L5t(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function F5t(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const j5t=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Vy,bin:oee,collect:aee,compare:a3e,countpattern:uee,cross:lee,density:cee,dotbin:fee,expression:f3e,extent:hee,facet:$4,field:h3e,filter:mee,flatten:gee,fold:yee,formula:vee,generate:p3e,impute:bee,joinaggregate:_ee,kde:wee,key:m3e,load:g3e,lookup:xee,multiextent:y3e,multivalues:v3e,params:b3e,pivot:Eee,prefacet:_3e,project:See,proxy:w3e,quantile:Tee,relay:x3e,sample:Cee,sequence:Aee,sieve:E3e,subflow:pee,timeunit:Iee,tupleindex:T3e,values:C3e,window:Ree},Symbol.toStringTag,{value:"Module"}));function py(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const B5t=()=>typeof Image<"u"?Image:null;function kee(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const z5t="identity",kE="linear",_g="log",rk="pow",ik="sqrt",L4="symlog",Rb="time",kb="utc",fp="sequential",KS="diverging",PE="quantile",F4="quantize",j4="threshold",Pee="ordinal",cq="point",R3e="band",Nee="bin-ordinal",Mo="continuous",sk="discrete",ok="discretizing",jd="interpolating",Oee="temporal";function U5t(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function V5t(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function Dee(){const e=vR().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const d=t().length,f=r[1]<r[0],h=r[1-f],p=kee(d,a,u);let m=r[f-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(d-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const y=cc(d).map(v=>m+i*v);return n(f?y.reverse():y)}return e.domain=function(d){return arguments.length?(t(d),c()):t()},e.range=function(d){return arguments.length?(r=[+d[0],+d[1]],c()):r.slice()},e.rangeRound=function(d){return r=[+d[0],+d[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(d){return arguments.length?(o=!!d,c()):o},e.padding=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),a=u,c()):a},e.paddingInner=function(d){return arguments.length?(a=Math.max(0,Math.min(1,d)),c()):a},e.paddingOuter=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),c()):u},e.align=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),c()):l},e.invertRange=function(d){if(d[0]==null||d[1]==null)return;const f=r[1]<r[0],h=f?n().reverse():n(),p=h.length-1;let m=+d[0],y=+d[1],v,w,x;if(!(m!==m||y!==y)&&(y<m&&(x=m,m=y,y=x),!(y<h[0]||m>r[1-f])))return v=Math.max(0,xy(h,m)-1),w=m===y?v:xy(h,y)-1,m-h[v]>s+1e-10&&++v,f&&(x=v,v=p-w,w=p-x),v>w?void 0:t().slice(v,w+1)},e.invert=function(d){const f=e.invertRange([d,d]);return f&&f[0]},e.copy=function(){return Dee().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function k3e(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return k3e(t())},e}function H5t(){return k3e(Dee().paddingInner(1))}var q5t=Array.prototype.map;function W5t(e){return q5t.call(e,Ya)}const G5t=Array.prototype.slice;function P3e(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(xy(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=W5t(r),n):e.slice()},n.range=function(r){return arguments.length?(t=G5t.call(r),n):t.slice()},n.tickFormat=function(r,i){return uCe(e[0],Dr(e),r??10,i)},n.copy=function(){return P3e().domain(n.domain()).range(n.range())},n}const I$=new Map,N3e=Symbol("vega_scale");function O3e(e){return e[N3e]=!0,e}function Y5t(e){return e&&e[N3e]===!0}function K5t(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?U5t(s):s.invertExtent?V5t(s):void 0),s.type=e,O3e(s)};return r.metadata=qf(Ft(n)),r}function ri(e,t,n){return arguments.length>1?(I$.set(e,K5t(e,t,n)),this):D3e(e)?I$.get(e):void 0}ri(z5t,lCe);ri(kE,ld,Mo);ri(_g,dCe,[Mo,_g]);ri(rk,tX,Mo);ri(ik,V0t,Mo);ri(L4,fCe,Mo);ri(Rb,uE,[Mo,Oee]);ri(kb,ivt,[Mo,Oee]);ri(fp,sX,[Mo,jd]);ri(`${fp}-${kE}`,sX,[Mo,jd]);ri(`${fp}-${_g}`,SCe,[Mo,jd,_g]);ri(`${fp}-${rk}`,oX,[Mo,jd]);ri(`${fp}-${ik}`,svt,[Mo,jd]);ri(`${fp}-${L4}`,TCe,[Mo,jd]);ri(`${KS}-${kE}`,CCe,[Mo,jd]);ri(`${KS}-${_g}`,ACe,[Mo,jd,_g]);ri(`${KS}-${rk}`,aX,[Mo,jd]);ri(`${KS}-${ik}`,ovt,[Mo,jd]);ri(`${KS}-${L4}`,ICe,[Mo,jd]);ri(PE,hCe,[ok,PE]);ri(F4,pCe,ok);ri(j4,mCe,ok);ri(Nee,P3e,[sk,ok]);ri(Pee,vR,sk);ri(R3e,Dee,sk);ri(cq,H5t,sk);function D3e(e){return I$.has(e)}function m_(e,t){const n=I$.get(e);return n&&n.metadata[t]}function Mee(e){return m_(e,Mo)}function NE(e){return m_(e,sk)}function dq(e){return m_(e,ok)}function M3e(e){return m_(e,_g)}function X5t(e){return m_(e,Oee)}function $3e(e){return m_(e,jd)}function L3e(e){return m_(e,PE)}const Q5t=["clamp","base","constant","exponent"];function F3e(e,t){const n=t[0],r=Dr(t)-n;return function(i){return e(n+i*r)}}function B4(e,t,n){return DK($ee(t||"rgb",n),e)}function j3e(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function B3e(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?iu(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=ri(s)().domain([t,n]).range([0,1]),Q5t.forEach(a=>e[a]?o[a](e[a]()):0),o)}function $ee(e,t){const n=Gft[J5t(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function J5t(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Z5t={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},e8t={accent:uvt,category10:avt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:lvt,observable10:cvt,paired:dvt,pastel1:fvt,pastel2:hvt,set1:pvt,set2:mvt,set3:gvt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function z3e(e){if(ut(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function U3e(e,t){for(const n in e)Lee(n,t(e[n]))}const Bge={};U3e(e8t,z3e);U3e(Z5t,e=>B4(z3e(e)));function Lee(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Bge[e]=t,this):Bge[e]}const qD="symbol",t8t="discrete",n8t="gradient",r8t=e=>ut(e)?e.map(t=>String(t)):String(e),i8t=(e,t)=>e[1]-t[1],s8t=(e,t)=>t[1]-e[1];function Fee(e,t,n){let r;return Gr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(ZR(e.domain())/n||1)+1))),$t(t)&&(r=t.step,t=t.interval),jt(t)&&(t=e.type===Rb?WS(t):e.type==kb?GS(t):st("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function V3e(e,t,n){let r=e.range(),i=r[0],s=Dr(r),o=i8t;if(i>s&&(r=s,s=i,i=r,o=s8t),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Dr(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function jee(e,t){return e.bins?V3e(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function H3e(e,t,n,r,i,s){const o=t.type;let a=r8t;if(o===Rb||i===Rb)a=e.timeFormat(r);else if(o===kb||i===kb)a=e.utcFormat(r);else if(M3e(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=q3e(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function q3e(e,t,n){const r=jee(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const fq={[PE]:"quantiles",[F4]:"thresholds",[j4]:"domain"},W3e={[PE]:"quantiles",[F4]:"domain"};function G3e(e,t){return e.bins?u8t(e.bins):e.type===_g?q3e(e,t,!0):fq[e.type]?a8t(e[fq[e.type]]()):jee(e,t)}function o8t(e,t,n){const r=t[W3e[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function a8t(e){const t=[-1/0].concat(e);return t.max=1/0,t}function u8t(e){const t=e.slice(0,-1);return t.max=Dr(e),t}const l8t=e=>fq[e.type]||e.bins;function Y3e(e,t,n,r,i,s,o){const a=W3e[t.type]&&s!==Rb&&s!==kb?o8t(e,t,i):H3e(e,t,n,i,s,o);return r===qD&&l8t(t)?c8t(a):r===t8t?d8t(a):f8t(a)}const c8t=e=>(t,n,r)=>{const i=zge(r[n+1],zge(r.max,1/0)),s=Uge(t,e),o=Uge(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},zge=(e,t)=>e??t,d8t=e=>(t,n)=>n?e(t):null,f8t=e=>t=>e(t),Uge=(e,t)=>Number.isFinite(e)?t(e):null;function h8t(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Dr(t),s=i-r;if(e.type===j4){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function p8t(e,t,n,r){const i=r||t.type;return jt(n)&&X5t(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===Rb?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===kb?e.utcFormat("%A, %d %B %Y, %X UTC"):Y3e(e,t,5,null,n,r,!0)}function K3e(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=p8t(e,t,n.format,n.formatType);if(dq(t.type)){const s=G3e(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(NE(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Dr(s))}`}}let X3e=0;function m8t(){X3e=0}const R$="p_";function Bee(e){return e&&e.gradient}function Q3e(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?R$:"";return i||(i=e.id="gradient_"+X3e++,r==="radial"?(e.x1=Th(e.x1,.5),e.y1=Th(e.y1,.5),e.r1=Th(e.r1,0),e.x2=Th(e.x2,.5),e.y2=Th(e.y2,.5),e.r2=Th(e.r2,.5),s=R$):(e.x1=Th(e.x1,0),e.y1=Th(e.y1,0),e.x2=Th(e.x2,1),e.y2=Th(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function Th(e,t){return e??t}function J3e(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const Vge={basis:{curve:B1},"basis-closed":{curve:Ivt},"basis-open":{curve:Rvt},bundle:{curve:kvt,tension:"beta",value:.85},cardinal:{curve:Pvt,tension:"tension",value:0},"cardinal-open":{curve:Ovt,tension:"tension",value:0},"cardinal-closed":{curve:Nvt,tension:"tension",value:0},"catmull-rom":{curve:Dvt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Mvt,tension:"alpha",value:.5},"catmull-rom-open":{curve:$vt,tension:"alpha",value:.5},linear:{curve:uX},"linear-closed":{curve:Lvt},monotone:{horizontal:jvt,vertical:Fvt},natural:{curve:Bvt},step:{curve:zvt},"step-after":{curve:Vvt},"step-before":{curve:Uvt}};function zee(e,t,n){var r=cn(Vge,e)&&Vge[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const g8t={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},y8t=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,v8t=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,b8t=/^((\s+,?\s*)|(,\s*))/,_8t=/^[01]/;function OE(e){const t=[];return(e.match(y8t)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=g8t[s],a=w8t(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function w8t(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?_8t:v8t,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(b8t);u!==null&&(i+=u[0].length)}return r}const Hy=Math.PI/180,x8t=1e-14,k1=Math.PI/2,Wh=Math.PI*2,Sw=Math.sqrt(3)/2;var qz={},Wz={},Z3e=[].join;function E8t(e,t,n,r,i,s,o,a,u){const l=Z3e.call(arguments);if(qz[l])return qz[l];const c=o*Hy,d=Math.sin(c),f=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=f*(a-e)*.5+d*(u-t)*.5,p=f*(u-t)*.5-d*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const y=f/n,v=d/n,w=-d/r,x=f/r,S=y*a+v*u,E=w*a+x*u,T=y*e+v*t,A=w*e+x*t;let k=1/((T-S)*(T-S)+(A-E)*(A-E))-.25;k<0&&(k=0);let D=Math.sqrt(k);s==i&&(D=-D);const M=.5*(S+T)-D*(A-E),z=.5*(E+A)+D*(T-S),O=Math.atan2(E-z,S-M);let F=Math.atan2(A-z,T-M)-O;F<0&&s===1?F+=Wh:F>0&&s===0&&(F-=Wh);const B=Math.ceil(Math.abs(F/(k1+.001))),q=[];for(let G=0;G<B;++G){const K=O+G*F/B,L=O+(G+1)*F/B;q[G]=[M,z,K,L,n,r,d,f]}return qz[l]=q}function S8t(e){const t=Z3e.call(e);if(Wz[t])return Wz[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,d=-u*a,f=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),y=Math.cos(s),v=Math.sin(s),w=.5*(s-i),x=Math.sin(w*.5),S=8/3*x*x/Math.sin(w),E=n+p-S*m,T=r+m+S*p,A=n+y,I=r+v,k=A+S*v,D=I-S*y;return Wz[t]=[c*E+d*T,f*E+h*T,c*k+d*D,f*k+h*D,c*A+d*I,f*A+h*I]}const Qc=["l",0,0,0,0,0,0,0];function T8t(e,t,n){const r=Qc[0]=e[0];if(r==="a"||r==="A")Qc[1]=t*e[1],Qc[2]=n*e[2],Qc[3]=e[3],Qc[4]=e[4],Qc[5]=e[5],Qc[6]=t*e[6],Qc[7]=n*e[7];else if(r==="h"||r==="H")Qc[1]=t*e[1];else if(r==="v"||r==="V")Qc[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)Qc[i]=(i%2==1?t:n)*e[i];return Qc}function EI(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,d=0,f,h,p,m,y=0,v=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var w=0,x=t.length;w<x;++w){switch(o=t[w],(i!==1||s!==1)&&(o=T8t(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],y=u,v=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],y=u,v=l,e.moveTo(u+n,l+r);break;case"c":f=u+o[5],h=l+o[6],c=u+o[3],d=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,d+r,f+n,h+r),u=f,l=h;break;case"C":u=o[5],l=o[6],c=o[3],d=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,d+r,u+n,l+r);break;case"s":f=u+o[3],h=l+o[4],c=2*u-c,d=2*l-d,e.bezierCurveTo(c+n,d+r,u+o[1]+n,l+o[2]+r,f+n,h+r),c=u+o[1],d=l+o[2],u=f,l=h;break;case"S":f=o[3],h=o[4],c=2*u-c,d=2*l-d,e.bezierCurveTo(c+n,d+r,o[1]+n,o[2]+r,f+n,h+r),u=f,l=h,c=o[1],d=o[2];break;case"q":f=u+o[3],h=l+o[4],c=u+o[1],d=l+o[2],e.quadraticCurveTo(c+n,d+r,f+n,h+r),u=f,l=h;break;case"Q":f=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,f+n,h+r),u=f,l=h,c=o[1],d=o[2];break;case"t":f=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,d=l):a[0]==="t"?(c=2*u-p,d=2*l-m):a[0]==="q"&&(c=2*u-c,d=2*l-d),p=c,m=d,e.quadraticCurveTo(c+n,d+r,f+n,h+r),u=f,l=h,c=u+o[1],d=l+o[2];break;case"T":f=o[1],h=o[2],c=2*u-c,d=2*l-d,e.quadraticCurveTo(c+n,d+r,f+n,h+r),u=f,l=h;break;case"a":Hge(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":Hge(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=y,l=v,e.closePath();break}a=o}}function Hge(e,t,n,r){const i=E8t(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=S8t(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const qge=.5773502691896257,Wge={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Wh)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Sw*n,i=r-n*qge,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Sw*n,i=r-n*qge;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Sw*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Sw*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Sw*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Sw*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function e$e(e){return cn(Wge,e)?Wge[e]:C8t(e)}var Gz={};function C8t(e){if(!cn(Gz,e)){const t=OE(e);Gz[e]={draw:function(n,r){EI(n,t,0,0,Math.sqrt(r)/2)}}}return Gz[e]}const m0=.448084975506;function A8t(e){return e.x}function I8t(e){return e.y}function R8t(e){return e.width}function k8t(e){return e.height}function mm(e){return typeof e=="function"?e:()=>+e}function PO(e,t,n){return Math.max(t,Math.min(e,n))}function t$e(){var e=A8t,t=I8t,n=R8t,r=k8t,i=mm(0),s=i,o=i,a=i,u=null;function l(c,d,f){var h,p=d??+e.call(this,c),m=f??+t.call(this,c),y=+n.call(this,c),v=+r.call(this,c),w=Math.min(y,v)/2,x=PO(+i.call(this,c),0,w),S=PO(+s.call(this,c),0,w),E=PO(+o.call(this,c),0,w),T=PO(+a.call(this,c),0,w);if(u||(u=h=qF()),x<=0&&S<=0&&E<=0&&T<=0)u.rect(p,m,y,v);else{var A=p+y,I=m+v;u.moveTo(p+x,m),u.lineTo(A-S,m),u.bezierCurveTo(A-m0*S,m,A,m+m0*S,A,m+S),u.lineTo(A,I-T),u.bezierCurveTo(A,I-m0*T,A-m0*T,I,A-T,I),u.lineTo(p+E,I),u.bezierCurveTo(p+m0*E,I,p,I-m0*E,p,I-E),u.lineTo(p,m+x),u.bezierCurveTo(p,m+m0*x,p+m0*x,m,p+x,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=mm(c),l):e},l.y=function(c){return arguments.length?(t=mm(c),l):t},l.width=function(c){return arguments.length?(n=mm(c),l):n},l.height=function(c){return arguments.length?(r=mm(c),l):r},l.cornerRadius=function(c,d,f,h){return arguments.length?(i=mm(c),s=d!=null?mm(d):i,a=f!=null?mm(f):i,o=h!=null?mm(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function n$e(){var e,t,n,r,i=null,s,o,a,u;function l(d,f,h){const p=h/2;if(s){var m=a-f,y=d-o;if(m||y){var v=Math.hypot(m,y),w=(m/=v)*u,x=(y/=v)*u,S=Math.atan2(y,m);i.moveTo(o-w,a-x),i.lineTo(d-m*p,f-y*p),i.arc(d,f,p,S-Math.PI,S),i.lineTo(o+w,a+x),i.arc(o,a,u,S,S+Math.PI)}else i.arc(d,f,p,0,Wh);i.closePath()}else s=1;o=d,a=f,u=p}function c(d){var f,h=d.length,p,m=!1,y;for(i==null&&(i=y=qF()),f=0;f<=h;++f)!(f<h&&r(p=d[f],f,d))===m&&(m=!m)&&(s=0),m&&l(+e(p,f,d),+t(p,f,d),+n(p,f,d));if(y)return i=null,y+""||null}return c.x=function(d){return arguments.length?(e=d,c):e},c.y=function(d){return arguments.length?(t=d,c):t},c.size=function(d){return arguments.length?(n=d,c):n},c.defined=function(d){return arguments.length?(r=d,c):r},c.context=function(d){return arguments.length?(d==null?i=null:i=d,c):i},c}function ak(e,t){return e??t}const uk=e=>e.x||0,lk=e=>e.y||0,P8t=e=>e.width||0,N8t=e=>e.height||0,O8t=e=>(e.x||0)+(e.width||0),D8t=e=>(e.y||0)+(e.height||0),M8t=e=>e.startAngle||0,$8t=e=>e.endAngle||0,L8t=e=>e.padAngle||0,F8t=e=>e.innerRadius||0,j8t=e=>e.outerRadius||0,B8t=e=>e.cornerRadius||0,z8t=e=>ak(e.cornerRadiusTopLeft,e.cornerRadius)||0,U8t=e=>ak(e.cornerRadiusTopRight,e.cornerRadius)||0,V8t=e=>ak(e.cornerRadiusBottomRight,e.cornerRadius)||0,H8t=e=>ak(e.cornerRadiusBottomLeft,e.cornerRadius)||0,q8t=e=>ak(e.size,64),W8t=e=>e.size||1,z4=e=>e.defined!==!1,G8t=e=>e$e(e.shape||"circle"),Y8t=Tvt().startAngle(M8t).endAngle($8t).padAngle(L8t).innerRadius(F8t).outerRadius(j8t).cornerRadius(B8t),K8t=i6().x(uk).y1(lk).y0(D8t).defined(z4),X8t=i6().y(lk).x1(uk).x0(O8t).defined(z4),Q8t=_x().x(uk).y(lk).defined(z4),J8t=t$e().x(uk).y(lk).width(P8t).height(N8t).cornerRadius(z8t,U8t,V8t,H8t),Z8t=Avt().type(G8t).size(q8t),eBt=n$e().x(uk).y(lk).defined(z4).size(W8t);function Uee(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function tBt(e,t){return Y8t.context(e)(t)}function nBt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?X8t:K8t).curve(zee(r,n.orient,n.tension)).context(e)(t)}function rBt(e,t){const n=t[0],r=n.interpolate||"linear";return Q8t.curve(zee(r,n.orient,n.tension)).context(e)(t)}function XS(e,t,n,r){return J8t.context(e)(t,n,r)}function iBt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function sBt(e,t){return Z8t.context(e)(t)}function oBt(e,t){return eBt.context(e)(t)}var r$e=1;function i$e(){r$e=1}function Vee(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+r$e++),o=i.clipping[s]||(i.clipping[s]={id:s});return ir(r)?o.path=r(null):Uee(n)?o.path=XS(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function uo(e){this.clear(),e&&this.union(e)}uo.prototype={clone(){return new uo(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function U4(e){this.mark=e,this.bounds=this.bounds||new uo}function V4(e){U4.call(this,e),this.items=this.items||[]}kt(V4,U4);class s$e{constructor(t){this._pending=0,this._loader=t||T4()}pending(){return this._pending}sanitizeURL(t){const n=this;return Gge(n),n._loader.sanitize(t,{context:"href"}).then(r=>(vC(n),r)).catch(()=>(vC(n),null))}loadImage(t){const n=this,r=B5t();return Gge(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=cn(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>vC(n),o.onerror=()=>vC(n),o.src=s,o}).catch(i=>(vC(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function Gge(e){e._pending+=1}function vC(e){e._pending-=1}function $g(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?aBt(t,r):0))}return e}function aBt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const uBt=Wh-1e-8;let H4,WD,GD,q1,hq,YD,pq,mq;const G0=(e,t)=>H4.add(e,t),KD=(e,t)=>G0(WD=e,GD=t),Yge=e=>G0(e,H4.y1),Kge=e=>G0(H4.x1,e),P1=(e,t)=>hq*e+pq*t,N1=(e,t)=>YD*e+mq*t,Yz=(e,t)=>G0(P1(e,t),N1(e,t)),Kz=(e,t)=>KD(P1(e,t),N1(e,t));function ck(e,t){return H4=e,t?(q1=t*Hy,hq=mq=Math.cos(q1),YD=Math.sin(q1),pq=-YD):(hq=mq=1,q1=YD=pq=0),lBt}const lBt={beginPath(){},closePath(){},moveTo:Kz,lineTo:Kz,rect(e,t,n,r){q1?(Yz(e+n,t),Yz(e+n,t+r),Yz(e,t+r),Kz(e,t)):(G0(e+n,t+r),KD(e,t))},quadraticCurveTo(e,t,n,r){const i=P1(e,t),s=N1(e,t),o=P1(n,r),a=N1(n,r);Xge(WD,i,o,Yge),Xge(GD,s,a,Kge),KD(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=P1(e,t),a=N1(e,t),u=P1(n,r),l=N1(n,r),c=P1(i,s),d=N1(i,s);Qge(WD,o,u,c,Yge),Qge(GD,a,l,d,Kge),KD(c,d)},arc(e,t,n,r,i,s){if(r+=q1,i+=q1,WD=n*Math.cos(i)+e,GD=n*Math.sin(i)+t,Math.abs(i-r)>uBt)G0(e-n,t-n),G0(e+n,t+n);else{const o=l=>G0(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%Wh,r<0&&(r+=Wh),i=i%Wh,i<0&&(i+=Wh),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=Wh,a=r-r%k1,u=0;u<4&&a>i;++u,a-=k1)o(a);else for(a=r-r%k1+k1,u=0;u<4&&a<i;++u,a=a+k1)o(a)}}};function Xge(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Qge(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>x8t?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(Jge(u,e,t,n,r)),0<l&&l<1&&i(Jge(l,e,t,n,r))}function Jge(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var my=(my=py(1,1))?my.getContext("2d"):null;const gq=new uo;function Hee(e){return function(t,n){if(!my)return!0;e(my,t),gq.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=gq;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(my.isPointInPath(u,a))return!0;return!1}}function qee(e,t){return t.contains(e.x||0,e.y||0)}function o$e(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(gq.set(n,r,n+i,r+s))}function a$e(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return ux(t,n,r,i,s)}function ux(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let d=0,f=1,h,p,m,y;for(y=0;y<4;++y){if(y===0&&(h=-l,p=-(s-t)),y===1&&(h=l,p=a-t),y===2&&(h=-c,p=-(o-n)),y===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>f)return!1;m>d&&(d=m)}else if(h>0){if(m<d)return!1;m<f&&(f=m)}}return!0}function DE(e,t){e.globalCompositeOperation=t.blend||"source-over"}function rf(e,t){return e??t}function Zge(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function cBt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+rf(t.x1,.5)*r,n.y1+rf(t.y1,.5)*i,Math.max(r,i)*rf(t.r1,0),n.x1+rf(t.x2,.5)*r,n.y1+rf(t.y2,.5)*i,Math.max(r,i)*rf(t.r2,.5));else{const o=rf(t.x1,0),a=rf(t.y1,0),u=rf(t.x2,1),l=rf(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=py(Math.ceil(r),Math.ceil(i)),d=c.getContext("2d");return d.scale(r,i),d.fillStyle=Zge(d.createLinearGradient(o,a,u,l),t.stops),d.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Zge(s,t.stops)}function u$e(e,t,n){return Bee(n)?cBt(e,n,t.bounds):n}function k$(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=u$e(e,t,t.fill),!0):!1}var dBt=[];function ME(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=u$e(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||dBt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function fBt(e,t){return e.zindex-t.zindex||e.index-t.index}function Wee(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(fBt)}function Gf(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=Wee(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function P$(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=Wee(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function Gee(e){return function(t,n,r){Gf(n,i=>{(!r||r.intersects(i.bounds))&&l$e(e,t,i,i)})}}function hBt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&l$e(e,t,n.items[0],n.items)}}function l$e(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(DE(t,n),n.fill&&k$(t,n,i)&&t.fill(),n.stroke&&ME(t,n,i)&&t.stroke()))}function q4(e){return e=e||Ad,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,P$(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function dk(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function Yee(e){return q4(dk(e))}function nb(e,t){return"translate("+e+","+t+")"}function Kee(e){return"rotate("+e+")"}function pBt(e,t){return"scale("+e+","+t+")"}function c$e(e){return nb(e.x||0,e.y||0)}function mBt(e){return nb(e.x||0,e.y||0)+(e.angle?" "+Kee(e.angle):"")}function gBt(e){return nb(e.x||0,e.y||0)+(e.angle?" "+Kee(e.angle):"")+(e.scaleX||e.scaleY?" "+pBt(e.scaleX||1,e.scaleY||1):"")}function Xee(e,t,n){function r(o,a){o("transform",mBt(a)),o("d",t(null,a))}function i(o,a){return t(ck(o,a.angle),a),$g(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=Hy),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:Gee(s),pick:Yee(s),isect:n||Hee(s)}}var yBt=Xee("arc",tBt);function vBt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function bBt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function _Bt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function Qee(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(ck(u),c),$g(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=dk(s);function a(u,l,c,d,f,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(f,h)?null:(c*=u.pixelRatio,d*=u.pixelRatio,o(u,p,c,d)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:hBt(s),pick:a,isect:qee,tip:n}}var wBt=Qee("area",nBt,vBt);function xBt(e,t){var n=t.clip;e.save(),ir(n)?(e.beginPath(),n(e),e.clip()):d$e(e,t.group)}function d$e(e,t){e.beginPath(),Uee(t)?XS(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function f$e(e){const t=rf(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function EBt(e,t){e("transform",c$e(t))}function h$e(e,t){const n=f$e(t);e("d",XS(null,t,n,n))}function SBt(e,t){e("class","background"),e("aria-hidden",!0),h$e(e,t)}function TBt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?h$e(e,t):e("d","")}function CBt(e,t,n){const r=t.clip?Vee(n,t,t):null;e("clip-path",r)}function ABt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),$g(e,t),e.translate(t.x||0,t.y||0)}function SI(e,t,n,r){const i=f$e(t);e.beginPath(),XS(e,t,(n||0)+i,(r||0)+i)}const IBt=dk(SI),RBt=dk(SI,!1),kBt=dk(SI,!0);function PBt(e,t,n,r){Gf(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(SI(e,i,s,o),DE(e,i),i.fill&&k$(e,i,u)&&e.fill(),i.stroke&&!a&&ME(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&d$e(e,i),n&&n.translate(-s,-o),Gf(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(SI(e,i,s,o),DE(e,i),ME(e,i,u)&&e.stroke())})}function NBt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return P$(t,u=>{let l,c,d;const f=u.bounds;if(f&&!f.contains(i,s))return;c=u.x||0,d=u.y||0;const h=c+(u.width||0),p=d+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<d||s>p))return;if(e.save(),e.translate(c,d),c=i-c,d=s-d,m&&Uee(u)&&!kBt(e,u,o,a))return e.restore(),null;const y=u.strokeForeground,v=t.interactive!==!1;return v&&y&&u.stroke&&RBt(e,u,o,a)?(e.restore(),u):(l=P$(u,w=>OBt(w,c,d)?this.pick(w,n,r,c,d):null),!l&&v&&(u.fill||!y&&u.stroke)&&IBt(e,u,o,a)&&(l=u),e.restore(),l||null)})}function OBt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var DBt={type:"group",tag:"g",nested:!1,attr:EBt,bound:ABt,draw:PBt,pick:NBt,isect:o$e,content:CBt,background:SBt,foreground:TBt},TI={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Jee(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function Zee(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function ete(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function W4(e,t){return e==="center"?t/2:e==="right"?t:0}function G4(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function MBt(e,t,n){const r=Jee(t,n),i=Zee(t,r),s=ete(t,r),o=(t.x||0)-W4(t.align,i),a=(t.y||0)-G4(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,TI["xmlns:xlink"],"xlink:href"),e("transform",nb(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function $Bt(e,t){const n=t.image,r=Zee(t,n),i=ete(t,n),s=(t.x||0)-W4(t.align,r),o=(t.y||0)-G4(t.baseline,i);return e.set(s,o,s+r,o+i)}function LBt(e,t,n){Gf(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=Jee(r,this);let s=Zee(r,i),o=ete(r,i);if(s===0||o===0)return;let a=(r.x||0)-W4(r.align,s),u=(r.y||0)-G4(r.baseline,o),l,c,d,f;r.aspect!==!1&&(c=i.width/i.height,d=r.width/r.height,c===c&&d===d&&c!==d&&(d<c?(f=s/c,u+=(o-f)/2,o=f):(f=o*c,a+=(s-f)/2,s=f))),(i.complete||i.toDataURL)&&(DE(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var FBt={type:"image",tag:"image",nested:!1,attr:MBt,bound:$Bt,draw:LBt,pick:q4(),isect:Ad,get:Jee,xOffset:W4,yOffset:G4},jBt=Qee("line",rBt,bBt);function BBt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",gBt(t)),e("d",t.path)}function XD(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*Hy,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=OE(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),EI(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):EI(e,u,r,i,s,o)}function zBt(e,t){return XD(ck(e,t.angle),t)?e.set(0,0,0,0):$g(e,t,!0)}var UBt={type:"path",tag:"path",nested:!1,attr:BBt,bound:zBt,draw:Gee(XD),pick:Yee(XD),isect:Hee(XD)};function VBt(e,t){e("d",XS(null,t))}function HBt(e,t){var n,r;return $g(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function e0e(e,t){e.beginPath(),XS(e,t)}var qBt={type:"rect",tag:"path",nested:!1,attr:VBt,bound:HBt,draw:Gee(e0e),pick:Yee(e0e),isect:o$e};function WBt(e,t){e("transform",c$e(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function GBt(e,t){var n,r;return $g(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function p$e(e,t,n){var r,i,s,o;return t.stroke&&ME(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function YBt(e,t,n){Gf(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&p$e(e,r,i)&&(DE(e,r),e.stroke())}})}function KBt(e,t,n,r){return e.isPointInStroke?p$e(e,t,1)&&e.isPointInStroke(n,r):!1}var XBt={type:"rule",tag:"line",nested:!1,attr:WBt,bound:GBt,draw:YBt,pick:q4(KBt),isect:a$e},QBt=Xee("shape",iBt),JBt=Xee("symbol",sBt,qee);const t0e=JDe();var gc={height:qp,measureWidth:tte,estimateWidth:N$,width:N$,canvas:m$e};m$e(!0);function m$e(e){gc.width=e&&my?tte:N$}function N$(e,t){return g$e(Wy(e,t),qp(e))}function g$e(e,t){return~~(.8*e.length*t)}function tte(e,t){return qp(e)<=0||!(t=Wy(e,t))?0:y$e(t,Y4(e))}function y$e(e,t){const n=`(${t}) ${e}`;let r=t0e.get(n);return r===void 0&&(my.font=t,r=my.measureText(e).width,t0e.set(n,r)),r}function qp(e){return e.fontSize!=null?+e.fontSize||0:11}function qy(e){return e.lineHeight!=null?e.lineHeight:qp(e)+2}function ZBt(e){return ut(e)?e.length>1?e:e[0]:e}function fk(e){return ZBt(e.lineBreak&&e.text&&!ut(e.text)?e.text.split(e.lineBreak):e.text)}function nte(e){const t=fk(e);return(ut(t)?t.length-1:0)*qy(e)}function Wy(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?t9t(e,n):n}function e9t(e){if(gc.width===tte){const t=Y4(e);return n=>y$e(n,t)}else if(gc.width===N$){const t=qp(e);return n=>g$e(n,t)}else return t=>gc.width(e,t)}function t9t(e,t){var n=+e.limit,r=e9t(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function hk(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Y4(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+qp(e)+"px "+hk(e,t)}function rte(e){var t=e.baseline,n=qp(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*qy(e):t==="line-bottom"?.29*n-.5*qy(e):0)}const n9t={left:"start",center:"middle",right:"end"},n2=new uo;function K4(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-k1,t+=r*Math.cos(i),n+=r*Math.sin(i)),n2.x1=t,n2.y1=n,n2}function r9t(e,t){var n=t.dx||0,r=(t.dy||0)+rte(t),i=K4(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",n9t[t.align]||"start"),a?(u=nb(s,o)+" "+Kee(a),(n||r)&&(u+=" "+nb(n,r))):u=nb(s+n,o+r),e("transform",u)}function ite(e,t,n){var r=gc.height(t),i=t.align,s=K4(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+rte(t)-Math.round(.8*r),c=fk(t),d;if(ut(c)?(r+=qy(t)*(c.length-1),d=c.reduce((f,h)=>Math.max(f,gc.width(t,h)),0)):d=gc.width(t,c),i==="center"?u-=d/2:i==="right"&&(u-=d),e.set(u+=o,l+=a,u+d,l+r),t.angle&&!n)e.rotate(t.angle*Hy,o,a);else if(n===2)return e.rotatedPoints(t.angle*Hy,o,a);return e}function i9t(e,t,n){Gf(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,d;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=Y4(r),e.textAlign=r.align||"left",s=K4(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*Hy),o=a=0),o+=r.dx||0,a+=(r.dy||0)+rte(r),c=fk(r),DE(e,r),ut(c))for(l=qy(r),u=0;u<c.length;++u)d=Wy(r,c[u]),r.fill&&k$(e,r,i)&&e.fillText(d,o,a),r.stroke&&ME(e,r,i)&&e.strokeText(d,o,a),a+=l;else d=Wy(r,c),r.fill&&k$(e,r,i)&&e.fillText(d,o,a),r.stroke&&ME(e,r,i)&&e.strokeText(d,o,a);r.angle&&e.restore()}})}function s9t(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=K4(t),a=o.x1,u=o.y1,l=ite(n2,t,1),c=-t.angle*Hy,d=Math.cos(c),f=Math.sin(c),h=d*i-f*s+(a-d*a+f*u),p=f*i+d*s+(u-f*a-d*u);return l.contains(h,p)}function o9t(e,t){const n=ite(n2,e,2);return ux(t,n[0],n[1],n[2],n[3])||ux(t,n[0],n[1],n[4],n[5])||ux(t,n[4],n[5],n[6],n[7])||ux(t,n[2],n[3],n[6],n[7])}var a9t={type:"text",tag:"text",nested:!1,attr:r9t,bound:ite,draw:i9t,pick:q4(s9t),isect:o9t},u9t=Qee("trail",oBt,_Bt),Oc={arc:yBt,area:wBt,group:DBt,image:FBt,line:jBt,path:UBt,rect:qBt,rule:XBt,shape:QBt,symbol:JBt,text:a9t,trail:u9t};function yq(e,t,n){var r=Oc[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new uo),e,n)}var n0e={mark:null};function v$e(e,t,n){var r=Oc[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(n0e.mark=e,l=n0e),c=yq(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new uo,o)for(a=0,u=s.length;a<u;++a)t.union(yq(s[a],i,n));return e.bounds=t}const l9t=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function b$e(e,t){return JSON.stringify(e,l9t,t)}function _$e(e){const t=typeof e=="string"?JSON.parse(e):e;return w$e(t)}function w$e(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&w$e(n[i]);return t&&v$e(e),e}class x$e{constructor(t){arguments.length?this.root=_$e(t):(this.root=r0e({marktype:"group",name:"root",role:"frame"}),this.root.items=[new V4(this.root)])}toJSON(t){return b$e(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=r0e(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function r0e(e,t){const n={bounds:new uo,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Y0(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function ste(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function To(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=Y0(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function ad(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function E$e(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function X4(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function c9t(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Oc[i.marktype]).tip){for(o=X4(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let ote=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||T4(),this._tooltip=n||d9t}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=Y0(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=c9t(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function d9t(e,t,n,r){e.element().setAttribute("title",r||"")}class pk{constructor(t){this._el=null,this._bgcolor=null,this._loader=new s$e(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const f9t="keydown",h9t="keypress",p9t="keyup",S$e="dragenter",QD="dragleave",T$e="dragover",vq="pointerdown",m9t="pointerup",O$="pointermove",JD="pointerout",C$e="pointerover",bq="mousedown",g9t="mouseup",A$e="mousemove",D$="mouseout",I$e="mouseover",M$="click",y9t="dblclick",v9t="wheel",R$e="mousewheel",$$="touchstart",L$="touchmove",F$="touchend",b9t=[f9t,h9t,p9t,S$e,QD,T$e,vq,m9t,O$,JD,C$e,bq,g9t,A$e,D$,I$e,M$,y9t,v9t,R$e,$$,L$,F$],_q=O$,r2=D$,wq=M$;class mk extends ote{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=b9t,this.pointermove=s0e([O$,A$e],[C$e,I$e],[JD,D$]),this.dragover=s0e([T$e],[S$e],[QD]),this.pointerout=o0e([JD,D$]),this.dragleave=o0e([QD])}initialize(t,n,r){return this._canvas=t&&ste(t,"canvas"),[M$,bq,vq,O$,JD,QD].forEach(i=>i0e(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(R$e,t)}pointerdown(t){this._down=this._active,this.fire(vq,t)}mousedown(t){this._down=this._active,this.fire(bq,t)}click(t){this._down===this._active&&(this.fire(M$,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire($$,t,!0)}touchmove(t){this.fire(L$,t,!0)}touchend(t){this.fire(F$,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===wq&&i&&i.href?this.handleHref(n,i,i.href):(t===_q||t===r2)&&this.handleTooltip(n,i,t!==r2),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(i0e(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=X4(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return Oc[t.marktype].pick.call(this,o,t,n,r,i,s)}}const _9t=e=>e===$$||e===L$||e===F$?[$$,L$,F$]:[e];function i0e(e,t){_9t(t).forEach(n=>w9t(e,n))}function w9t(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function bA(e,t,n){t.forEach(r=>e.fire(r,n))}function s0e(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?bA(this,e,r):((!i||!i.exit)&&bA(this,n,r),this._active=s,bA(this,t,r),bA(this,e,r))}}function o0e(e){return function(t){bA(this,e,t),this._active=null}}function x9t(){return typeof window<"u"&&window.devicePixelRatio||1}function E9t(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?x9t():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class j$ extends pk{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new uo,this._tempb=new uo}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:py(1,1,this._options.type),t&&this._canvas&&(ad(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)E9t(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||st("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=S9t(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):T9t(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Oc[n.marktype];n.clip&&xBt(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const S9t=(e,t,n)=>new uo().set(0,0,t,n).translate(-e[0],-e[1]);function T9t(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class k$e extends ote{constructor(t,n){super(t,n);const r=this;r._hrefHandler=Xz(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=Xz(r,(i,s)=>{r.handleTooltip(i,s,i.type!==r2)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(wq,this._hrefHandler),i.removeEventListener(_q,this._tooltipHandler),i.removeEventListener(r2,this._tooltipHandler)),this._svg=i=t&&ste(t,"svg"),i&&(i.addEventListener(wq,this._hrefHandler),i.addEventListener(_q,this._tooltipHandler),i.addEventListener(r2,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:Xz(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const Xz=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},P$e="aria-hidden",ate="aria-label",ute="role",lte="aria-roledescription",N$e="graphics-object",cte="graphics-symbol",O$e=(e,t,n)=>({[ute]:e,[lte]:t,[ate]:n||void 0}),C9t=qf(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),a0e={axis:{desc:"axis",caption:R9t},legend:{desc:"legend",caption:k9t},"title-text":{desc:"title",caption:e=>`Title text '${l0e(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${l0e(e)}'`}},u0e={ariaRole:ute,ariaRoleDescription:lte,description:ate};function D$e(e,t){const n=t.aria===!1;if(e(P$e,n||void 0),n||t.description==null)for(const r in u0e)e(u0e[r],void 0);else{const r=t.mark.marktype;e(ate,t.description),e(ute,t.ariaRole||(r==="group"?N$e:cte)),e(lte,t.ariaRoleDescription||`${r} mark`)}}function M$e(e){return e.aria===!1?{[P$e]:!0}:C9t[e.role]?null:a0e[e.role]?I9t(e,a0e[e.role]):A9t(e)}function A9t(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return O$e(n?N$e:cte,`${t} mark container`,e.description)}function I9t(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return O$e(t.role||cte,t.desc,n.description||r(n))}catch{return null}}function l0e(e){return Ft(e.text).join(" ")}function R9t(e){const t=e.datum,n=e.orient,r=t.title?$$e(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${NE(a)?"discrete":a} scale with ${K3e(o,s,e)}`}function k9t(e){const t=e.datum,n=t.title?$$e(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return N9t(r)+(n?` titled '${n}'`:"")+` for ${P9t(s)} with ${K3e(u,a,e)}`}function $$e(e){try{return Ft(Dr(e.items).items[0].text).join(" ")}catch{return null}}function P9t(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Dr(e)}function N9t(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const L$e=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),O9t=e=>L$e(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function dte(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${O9t(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),d=1;d<l;d++)c[d-1]=arguments[d];for(const f of c)for(const h in f)o(h,f[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=L$e(u),a),toString:()=>e};return a}const F$e=e=>j$e(dte(),e)+"";function j$e(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):j$e(e,r)}return e.close()}const B$={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},z$={blend:"mix-blend-mode"},B$e={fill:"none","stroke-miterlimit":10},bC=0,c0e="http://www.w3.org/2000/xmlns/",xo=TI.xmlns;class fte extends pk{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=To(t,0,"svg",xo),this._svg.setAttributeNS(c0e,"xmlns",xo),this._svg.setAttributeNS(c0e,"xmlns:xlink",TI["xmlns:xlink"]),this._svg.setAttribute("version",TI.version),this._svg.setAttribute("class","marks"),ad(t,1),this._root=To(this._svg,bC,"g",xo),K0(this._root,B$e),ad(this._svg,bC+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(K0(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=To(t,bC,"rect",xo),K0(r,{width:this._width,height:this._height,fill:n}));const i=F$e(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),ad(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=Oc[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,d0e(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,d0e(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=Oc[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=f0e(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return ad(c,0),n._svg;c.setAttribute("class",E$e(n));const d=M$e(n);for(const m in d)_u(c,m,d[m]);l||_u(c,"pointer-events",u),_u(c,"clip-path",n.clip?Vee(this,n,n.group):null);let f=null,h=0;const p=m=>{const y=this.isDirty(m),v=f0e(m,c,f,a.tag,s);y&&(this._update(a,v,m),l&&$9t(this,v,m,i)),f=v,++h};return a.nested?n.items.length&&p(n.items[0]):Gf(n,p),ad(c,h),c}_update(t,n,r){Bm=n,za=n.__values__,D$e(i2,r),t.attr(i2,r,this);const i=F9t[t.type];i&&i.call(this,t,n,r),Bm&&this.style(Bm,r)}style(t,n){if(n!=null){for(const r in B$){let i=r==="font"?hk(n):n[r];if(i===za[r])continue;const s=B$[r];i==null?t.removeAttribute(s):(Bee(i)&&(i=Q3e(i,this._defs.gradient,z$e())),t.setAttribute(s,i+"")),za[r]=i}for(const r in z$)ZD(t,z$[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=To(t,bC+1,"defs",xo)),i=D9t(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=To(t,bC+1,"defs",xo)),i=M9t(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):ad(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function d0e(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function D9t(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=To(e,n++,"pattern",xo);K0(o,{id:R$+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=To(o,0,"rect",xo),K0(o,{width:1,height:1,fill:`url(${z$e()}#${t.id})`}),e=To(e,n++,"radialGradient",xo),K0(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=To(e,n++,"linearGradient",xo),K0(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=To(e,r,"stop",xo),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return ad(e,r),n}function M9t(e,t,n){let r;return e=To(e,n,"clipPath",xo),e.setAttribute("id",t.id),t.path?(r=To(e,0,"path",xo),r.setAttribute("d",t.path)):(r=To(e,0,"rect",xo),K0(r,{x:0,y:0,width:t.width,height:t.height})),ad(e,1),n+1}function $9t(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;Gf(n,o=>{i=e.mark(t,o,i,r),++s}),ad(t,1+s)}function f0e(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=Y0(o,r,xo),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=Y0(o,"path",xo);s.appendChild(a),a.__data__=e;const u=Y0(o,"g",xo);s.appendChild(u),u.__data__=e;const l=Y0(o,"path",xo);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||L9t(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function L9t(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Bm=null,za=null;const F9t={group(e,t,n){const r=Bm=t.childNodes[2];za=r.__values__,e.foreground(i2,n,this),za=t.__values__,Bm=t.childNodes[1],e.content(i2,n,this);const i=Bm=t.childNodes[0];e.background(i2,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==za.events&&(_u(r,"pointer-events",s),_u(i,"pointer-events",s),za.events=s),n.strokeForeground&&n.stroke){const o=n.fill;_u(r,"display",null),this.style(i,n),_u(i,"stroke",null),o&&(n.fill=null),za=r.__values__,this.style(r,n),o&&(n.fill=o),Bm=null}else _u(r,"display","none")},image(e,t,n){n.smooth===!1?(ZD(t,"image-rendering","optimizeSpeed"),ZD(t,"image-rendering","pixelated")):ZD(t,"image-rendering",null)},text(e,t,n){const r=fk(n);let i,s,o,a;ut(r)?(s=r.map(u=>Wy(n,u)),i=s.join(`
`),i!==za.text&&(ad(t,0),o=t.ownerDocument,a=qy(n),s.forEach((u,l)=>{const c=Y0(o,"tspan",xo);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),za.text=i)):(s=Wy(n,r),s!==za.text&&(t.textContent=s,za.text=s)),_u(t,"font-family",hk(n)),_u(t,"font-size",qp(n)+"px"),_u(t,"font-style",n.fontStyle),_u(t,"font-variant",n.fontVariant),_u(t,"font-weight",n.fontWeight)}};function i2(e,t,n){t!==za[e]&&(n?j9t(Bm,e,t,n):_u(Bm,e,t),za[e]=t)}function ZD(e,t,n){n!==za[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),za[t]=n)}function K0(e,t){for(const n in t)_u(e,n,t[n])}function _u(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function j9t(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function z$e(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class U$e extends pk{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=dte();n.open("svg",rr({},TI,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",B$e,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Oc[n.marktype],i=r.tag,s=[D$e,r.attr];t.open("g",{class:E$e(n),"clip-path":n.clip?Vee(this,n,n.group):null},M$e(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=fk(a);if(ut(l)){const c={x:0,dy:qy(a)};for(let d=0;d<l.length;++d)t.open("tspan",d?c:null).text(Wy(a,l[d])).close()}else t.text(Wy(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,d=a.stroke;l&&d&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),Gf(a,f=>this.mark(t,f)),t.close(),l&&d?(c&&(a.fill=null),a.stroke=d,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):Gf(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&B9t(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:R$+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function B9t(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=hk(t),e["font-size"]=qp(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in B$){let a=t[o];const u=B$[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(Bee(a)&&(a=Q3e(a,i.gradient,"")),e[u]=a)}for(const o in z$){const a=t[o];a!=null&&(s=s||[],s.push(`${z$[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const lf={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function z9t(e){lf.svgMarkTypes=e.svgMarkTypes??["text"],lf.svgOnTop=e.svgOnTop??!0,lf.debug=e.debug??!1}class xq extends pk{constructor(t){super(t),this._svgRenderer=new fte(t),this._canvasRenderer=new j$(t)}initialize(t,n,r,i,s){this._root_el=To(t,0,"div");const o=To(this._root_el,0,"div"),a=To(this._root_el,1,"div");return this._root_el.style.position="relative",lf.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=lf.svgOnTop?a:o,this._canvasEl=lf.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return lf.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!lf.svgMarkTypes.includes(s));this._svgRenderer.render(t,lf.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return lf.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class V$e extends mk{constructor(t,n){super(t,n)}initialize(t,n,r){const i=To(To(t,0,"div"),lf.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const H$e="canvas",q$e="hybrid",W$e="png",G$e="svg",Y$e="none",X0={Canvas:H$e,PNG:W$e,SVG:G$e,Hybrid:q$e,None:Y$e},Pb={};Pb[H$e]=Pb[W$e]={renderer:j$,headless:j$,handler:mk};Pb[G$e]={renderer:fte,headless:U$e,handler:k$e};Pb[q$e]={renderer:xq,headless:xq,handler:V$e};Pb[Y$e]={};function Q4(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Pb[e]=t,this):Pb[e]}function K$e(e,t,n){const r=[],i=new uo().union(t),s=e.marktype;return s?X$e(e,i,n,r):s==="group"?Q$e(e,i,n,r):st("Intersect scene must be mark node or group item.")}function X$e(e,t,n,r){if(U9t(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)Q$e(i[a],t,n,r);else for(const u=Oc[s].isect;a<o;++a){const l=i[a];J$e(l,t,u)&&r.push(l)}}return r}function U9t(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function Q$e(e,t,n,r){n&&n(e.mark)&&J$e(e,t,Oc.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)X$e(i[u],t,n,r);t.translate(o,a)}return r}function J$e(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const Qz=new uo;function Z$e(e){const t=e.clip;if(ir(t))t(ck(Qz.clear()));else if(t)Qz.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(Qz)}const V9t=1e-9;function hte(e,t,n){return e===t?!0:n==="path"?eLe(e,t):e instanceof Date&&t instanceof Date?+e==+t:Gr(e)&&Gr(t)?Math.abs(e-t)<=V9t:!e||!t||!$t(e)&&!$t(t)?e==t:H9t(e,t)}function eLe(e,t){return hte(OE(e),OE(t))}function H9t(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!hte(e[i],t[i],i))return!1;return typeof e==typeof t}function q9t(){i$e(),m8t()}const $E="top",yf="left",xf="right",Gy="bottom",W9t="top-left",G9t="top-right",Y9t="bottom-left",K9t="bottom-right",pte="start",Eq="middle",xu="end",X9t="x",Q9t="y",J4="group",mte="axis",gte="title",J9t="frame",Z9t="scope",yte="legend",tLe="row-header",nLe="row-footer",rLe="row-title",iLe="column-header",sLe="column-footer",oLe="column-title",ezt="padding",tzt="symbol",aLe="fit",uLe="fit-x",lLe="fit-y",nzt="pad",vte="none",NO="all",Sq="each",bte="flush",Q0="column",J0="row";function cLe(e){et.call(this,null,e)}kt(cLe,et,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Oc[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=OO(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===J4||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(OO(l,o))),r.role){case mte:case yte:case gte:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(OO(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(OO(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return Z$e(r),t.modifies("bounds")}});function OO(e,t,n){return t(e.bounds.clear(),e,n)}const h0e=":vega_identifier:";function _te(e){et.call(this,0,e)}_te.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};kt(_te,et,{transform(e,t){const n=rzt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function rzt(e){return e._signals[h0e]||(e._signals[h0e]=e.add(0))}function dLe(e){et.call(this,null,e)}kt(dLe,et,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,izt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===J4?V4:U4;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function izt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function fLe(e){et.call(this,null,e)}const p0e={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!hLe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},hLe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),m0e=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(hLe(i,s=e[n].bounds,t))return!0},szt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},ozt=(e,t,n)=>{var r=e.range(),i=new uo;return t===$E||t===Gy?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},g0e=e=>(e.forEach(t=>t.opacity=1),e),y0e=(e,t)=>e.reflow(t.modified()).modifies("opacity");kt(fLe,et,{transform(e,t){const n=p0e[e.method]||p0e.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(g0e(i),t=y0e(t,e)),t;if(i=i.filter(szt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=g0e(i),t=y0e(t,e),s.length>=3&&m0e(s,r)){do s=n(s,r);while(s.length>=3&&m0e(s,r));s.length<3&&!Dr(i).opacity&&(s.length>1&&(Dr(s).opacity=0),Dr(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=ozt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function pLe(e){et.call(this,null,e)}kt(pLe,et,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const ja=new uo;function lx(e,t,n){return e[t]===n?0:(e[t]=n,1)}function azt(e){var t=e.items[0].orient;return t===yf||t===xf}function uzt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function lzt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=uzt(s),l=i.range,c=i.offset,d=i.position,f=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,y=i.bounds,v=p&&nte(p),w=0,x=0,S,E;switch(ja.clear().union(y),y.clear(),(S=u[0])>-1&&y.union(i.items[S].bounds),(S=u[1])>-1&&y.union(i.items[S].bounds),a){case $E:w=d||0,x=-c,E=Math.max(f,Math.min(h,-y.y1)),y.add(0,-E).add(l,0),p&&DO(e,p,E,m,v,0,-1,y);break;case yf:w=-c,x=d||0,E=Math.max(f,Math.min(h,-y.x1)),y.add(-E,0).add(0,l),p&&DO(e,p,E,m,v,1,-1,y);break;case xf:w=n+c,x=d||0,E=Math.max(f,Math.min(h,y.x2)),y.add(0,0).add(E,l),p&&DO(e,p,E,m,v,1,1,y);break;case Gy:w=d||0,x=r+c,E=Math.max(f,Math.min(h,y.y2)),y.add(0,0).add(l,E),p&&DO(e,p,E,m,0,0,1,y);break;default:w=i.x,x=i.y}return $g(y.translate(w,x),i),lx(i,"x",w+o)|lx(i,"y",x+o)&&(i.bounds=ja,e.dirty(i),i.bounds=y,e.dirty(i)),i.mark.bounds.clear().union(y)}function DO(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,d=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):d=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-d)),e.dirty(t)}a.union(u)}const v0e=(e,t)=>Math.floor(Math.min(e,t)),b0e=(e,t)=>Math.ceil(Math.max(e,t));function czt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===J4)switch(i.role){case mte:case yte:case gte:break;case tLe:o.rowheaders.push(...s);break;case nLe:o.rowfooters.push(...s);break;case iLe:o.colheaders.push(...s);break;case sLe:o.colfooters.push(...s);break;case rLe:o.rowtitle=s[0];break;case oLe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function dzt(e){return new uo().set(0,0,e.width||0,e.height||0)}function fzt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function is(e,t,n){const r=$t(e)?e[t]:e;return r??(n!==void 0?n:0)}function _0e(e){return e<0?Math.ceil(-e):0}function mLe(e,t,n){var r=!n.nodirty,i=n.bounds===bte?dzt:fzt,s=ja.set(0,0,0,0),o=is(n.align,Q0),a=is(n.align,J0),u=is(n.padding,Q0),l=is(n.padding,J0),c=n.columns||t.length,d=c<=0?1:Math.ceil(t.length/c),f=t.length,h=Array(f),p=Array(c),m=0,y=Array(f),v=Array(d),w=0,x=Array(f),S=Array(f),E=Array(f),T,A,I,k,D,M,z,O,$,F,B;for(A=0;A<c;++A)p[A]=0;for(A=0;A<d;++A)v[A]=0;for(A=0;A<f;++A)M=t[A],D=E[A]=i(M),M.x=M.x||0,x[A]=0,M.y=M.y||0,S[A]=0,I=A%c,k=~~(A/c),m=Math.max(m,z=Math.ceil(D.x2)),w=Math.max(w,O=Math.ceil(D.y2)),p[I]=Math.max(p[I],z),v[k]=Math.max(v[k],O),h[A]=u+_0e(D.x1),y[A]=l+_0e(D.y1),r&&e.dirty(t[A]);for(A=0;A<f;++A)A%c===0&&(h[A]=0),A<c&&(y[A]=0);if(o===Sq)for(I=1;I<c;++I){for(B=0,A=I;A<f;A+=c)B<h[A]&&(B=h[A]);for(A=I;A<f;A+=c)h[A]=B+p[I-1]}else if(o===NO){for(B=0,A=0;A<f;++A)A%c&&B<h[A]&&(B=h[A]);for(A=0;A<f;++A)A%c&&(h[A]=B+m)}else for(o=!1,I=1;I<c;++I)for(A=I;A<f;A+=c)h[A]+=p[I-1];if(a===Sq)for(k=1;k<d;++k){for(B=0,A=k*c,T=A+c;A<T;++A)B<y[A]&&(B=y[A]);for(A=k*c;A<T;++A)y[A]=B+v[k-1]}else if(a===NO){for(B=0,A=c;A<f;++A)B<y[A]&&(B=y[A]);for(A=c;A<f;++A)y[A]=B+w}else for(a=!1,k=1;k<d;++k)for(A=k*c,T=A+c;A<T;++A)y[A]+=v[k-1];for($=0,A=0;A<f;++A)$=h[A]+(A%c?$:0),x[A]+=$-t[A].x;for(I=0;I<c;++I)for(F=0,A=I;A<f;A+=c)F+=y[A],S[A]+=F-t[A].y;if(o&&is(n.center,Q0)&&d>1)for(A=0;A<f;++A)D=o===NO?m:p[A%c],$=D-E[A].x2-t[A].x-x[A],$>0&&(x[A]+=$/2);if(a&&is(n.center,J0)&&c!==1)for(A=0;A<f;++A)D=a===NO?w:v[~~(A/c)],F=D-E[A].y2-t[A].y-S[A],F>0&&(S[A]+=F/2);for(A=0;A<f;++A)s.union(E[A].translate(x[A],S[A]));switch($=is(n.anchor,X9t),F=is(n.anchor,Q9t),is(n.anchor,Q0)){case xu:$-=s.width();break;case Eq:$-=s.width()/2}switch(is(n.anchor,J0)){case xu:F-=s.height();break;case Eq:F-=s.height()/2}for($=Math.round($),F=Math.round(F),s.clear(),A=0;A<f;++A)t[A].mark.bounds.clear();for(A=0;A<f;++A)M=t[A],M.x+=x[A]+=$,M.y+=S[A]+=F,s.union(M.mark.bounds.union(M.bounds.translate(x[A],S[A]))),r&&e.dirty(M);return s}function hzt(e,t,n){var r=czt(t),i=r.marks,s=n.bounds===bte?pzt:mzt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,d,f,h,p,m,y;const v=mLe(e,i,n);v.empty()&&v.set(0,0,0,0),r.rowheaders&&(m=is(n.headerBand,J0,null),c=MO(e,r.rowheaders,i,a,u,-is(o,"rowHeader"),v0e,0,s,"x1",0,a,1,m)),r.colheaders&&(m=is(n.headerBand,Q0,null),d=MO(e,r.colheaders,i,a,a,-is(o,"columnHeader"),v0e,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=is(n.footerBand,J0,null),f=MO(e,r.rowfooters,i,a,u,is(o,"rowFooter"),b0e,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=is(n.footerBand,Q0,null),h=MO(e,r.colfooters,i,a,a,is(o,"columnFooter"),b0e,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=is(n.titleAnchor,J0),y=is(o,"rowTitle"),y=p===xu?f+y:c-y,m=is(n.titleBand,J0,.5),w0e(e,r.rowtitle,y,0,v,m)),r.coltitle&&(p=is(n.titleAnchor,Q0),y=is(o,"columnTitle"),y=p===xu?h+y:d-y,m=is(n.titleBand,Q0,.5),w0e(e,r.coltitle,y,1,v,m))}function pzt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function mzt(e,t){return e.bounds[t]}function MO(e,t,n,r,i,s,o,a,u,l,c,d,f,h){var p=n.length,m=0,y=0,v,w,x,S,E,T,A,I,k;if(!p)return m;for(v=c;v<p;v+=d)n[v]&&(m=o(m,u(n[v],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,w=0,S=t.length;w<S;++w)e.dirty(t[w]),t[w].mark.bounds.clear();for(v=c,w=0,S=t.length;w<S;++w,v+=d){for(T=t[w],E=T.mark.bounds,x=v;x>=0&&(A=n[x])==null;x-=f);a?(I=h==null?A.x:Math.round(A.bounds.x1+h*A.bounds.width()),k=m):(I=m,k=h==null?A.y:Math.round(A.bounds.y1+h*A.bounds.height())),E.union(T.bounds.translate(I-(T.x||0),k-(T.y||0))),T.x=I,T.y=k,e.dirty(T),y=o(y,E[l])}return y}function w0e(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function gzt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function yzt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function vzt(e,t,n,r,i,s,o){const a=gzt(n,t),u=yzt(e,a("offset",0)),l=a("anchor",pte),c=l===xu?1:l===Eq?.5:0,d={align:Sq,bounds:a("bounds",bte),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case yf:d.anchor={x:Math.floor(r.x1)-u,column:xu,y:c*(o||r.height()+2*r.y1),row:l};break;case xf:d.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case $E:d.anchor={y:Math.floor(i.y1)-u,row:xu,x:c*(s||i.width()+2*i.x1),column:l};break;case Gy:d.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case W9t:d.anchor={x:u,y:u};break;case G9t:d.anchor={x:s-u,y:u,column:xu};break;case Y9t:d.anchor={x:u,y:o-u,row:xu};break;case K9t:d.anchor={x:s-u,y:o-u,column:xu,row:xu};break}return d}function bzt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),wzt(e,n,n.items[0].items[0]),s=_zt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===tzt&&xzt(n.items[0].items[0].items[0].items),i!==vte&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,$g(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function _zt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function wzt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&_C(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case yf:i+=Math.ceil(o.bounds.width())+u;break;case xf:case Gy:break;default:s+=o.bounds.height()+u}switch((i||s)&&_C(e,n,i,s),o.orient){case yf:c+=Tw(t,n,o,a,1,1);break;case xf:l+=Tw(t,n,o,xu,0,0)+u,c+=Tw(t,n,o,a,1,1);break;case Gy:l+=Tw(t,n,o,a,0,0),c+=Tw(t,n,o,xu,-1,0,1)+u;break;default:l+=Tw(t,n,o,a,0,0)}(l||c)&&_C(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(_C(e,n,-l,0),_C(e,o,-l,0))}}function Tw(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,d=u&&s?c:0,f=u&&s?0:c,h=i<=0?0:nte(n);return Math.round(r===pte?d:r===xu?f-h:.5*(c-h))}function _C(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function xzt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function Ezt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,d=s.items[0].items[0],f=s.items[1]&&s.items[1].items[0],h=a===yf||a===xf?r:n,p=0,m=0,y=0,v=0,w=0,x;if(o!==J4?a===yf?(p=i.y2,h=i.y1):a===xf?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===yf&&(p=r,h=0),x=u===pte?p:u===xu?h:(p+h)/2,f&&f.text){switch(a){case $E:case Gy:w=d.bounds.height()+c;break;case yf:v=d.bounds.width()+c;break;case xf:v=-d.bounds.width()-c;break}ja.clear().union(f.bounds),ja.translate(v-(f.x||0),w-(f.y||0)),lx(f,"x",v)|lx(f,"y",w)&&(e.dirty(f),f.bounds.clear().union(ja),f.mark.bounds.clear().union(ja),e.dirty(f)),ja.clear().union(f.bounds)}else ja.clear();switch(ja.union(d.bounds),a){case $E:m=x,y=i.y1-ja.height()-l;break;case yf:m=i.x1-ja.width()-l,y=x;break;case xf:m=i.x2+ja.width()+l,y=x;break;case Gy:m=x,y=i.y2+l;break;default:m=s.x,y=s.y}return lx(s,"x",m)|lx(s,"y",y)&&(ja.translate(m,y),e.dirty(s),s.bounds.clear().union(ja),t.bounds.clear().union(ja),e.dirty(s)),s.bounds}function gLe(e){et.call(this,null,e)}kt(gLe,et,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&hzt(n,r,e.layout),Tzt(n,r,e)}),Szt(e.mark.group)?t.reflow():t}});function Szt(e){return e&&e.mark.role!=="legend-entry"}function Tzt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new uo().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,d,f,h,p,m;for(p=0,m=r.length;p<m;++p)switch(d=r[p],d.role){case mte:h=azt(d)?a:u,h.union(lzt(e,d,i,s));break;case gte:c=d;break;case yte:l.push(bzt(e,d));break;case J9t:case Z9t:case tLe:case nLe:case rLe:case iLe:case sLe:case oLe:a.union(d.bounds),u.union(d.bounds);break;default:o.union(d.bounds)}if(l.length){const y={};l.forEach(v=>{f=v.orient||xf,f!==vte&&(y[f]||(y[f]=[])).push(v)});for(const v in y){const w=y[v];mLe(e,w,vzt(w,v,n.legends,a,u,i,s))}l.forEach(v=>{const w=v.bounds;if(w.equals(v._bounds)||(v.bounds=v._bounds,e.dirty(v),v.bounds=w,e.dirty(v)),n.autosize&&(n.autosize.type===aLe||n.autosize.type===uLe||n.autosize.type===lLe))switch(v.orient){case yf:case xf:o.add(w.x1,0).add(w.x2,0);break;case $E:case Gy:o.add(0,w.y1).add(0,w.y2)}else o.union(w)})}o.union(a).union(u),c&&o.union(Ezt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),Czt(e,t,o,n)}function Czt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),d=Math.max(0,Math.ceil(-n.y1));const f=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===ezt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===vte?(l=0,d=0,u=o,c=a):s===aLe?(u=Math.max(0,o-l-f),c=Math.max(0,a-d-h)):s===uLe?(u=Math.max(0,o-l-f),a=c+d+h):s===lLe?(o=u+l+f,c=Math.max(0,a-d-h)):s===nzt&&(o=u+l+f,a=c+d+h),e._resizeView(o,a,u,c,[l,d],i.resize)}const Azt=Object.freeze(Object.defineProperty({__proto__:null,bound:cLe,identifier:_te,mark:dLe,overlap:fLe,render:pLe,viewlayout:gLe},Symbol.toStringTag,{value:"Module"}));function yLe(e){et.call(this,null,e)}kt(yLe,et,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=Fee(s,o,e.minstep),u=e.format||H3e(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?V3e(s,e.values,a):jee(s,a);return i&&(r.rem=i),i=l.map((c,d)=>li({index:d/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(li({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function vLe(e){et.call(this,null,e)}function Izt(){return li({})}function Rzt(e){const t=qS().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}kt(vLe,et,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||Izt,s=e.key||un,o=this.value;return ut(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&st("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=Rzt(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function bLe(e){et.call(this,null,e)}kt(bLe,et,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(ut(s))if(n.changed()||s.every(d=>i[d]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||w0,u=i.enter||w0,l=i.exit||w0,c=(s&&!o?i[s]:a)||w0;if(t.changed(t.ADD)&&(t.visit(t.ADD,d=>{u(d,e),a(d,e)}),n.modifies(u.output),n.modifies(a.output),c!==w0&&c!==a&&(t.visit(t.ADD,d=>{c(d,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==w0&&(t.visit(t.REM,d=>{l(d,e)}),n.modifies(l.output)),o||c!==w0){const d=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(d,f=>{const h=u(f,e)||r;(c(f,e)||h)&&n.mod.push(f)}),n.mod.length&&n.modifies(u.output)):t.visit(d,f=>{(c(f,e)||r)&&n.mod.push(f)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function _Le(e){et.call(this,[],e)}kt(_Le,et,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||qD,o=e.scale,a=+e.limit,u=Fee(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===qD,c=e.format||Y3e(n,o,u,s,e.formatSpecifier,e.formatType,l),d=e.values||G3e(o,u),f,h,p,m,y;return i&&(r.rem=i),s===qD?(a&&d.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=d.slice(0,a-1),y=!0):i=d,ir(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((v,w)=>Math.max(v,p(w,e)),0)):p=iu(m=p||8),i=i.map((v,w)=>li({index:w,label:c(v,w,i),value:v,offset:m,size:p(v,e)})),y&&(y=d[i.length],i.push(li({index:i.length,label:`${d.length-i.length} entries`,value:y,offset:m,size:p(y,e)})))):s===n8t?(f=o.domain(),h=B3e(o,f[0],Dr(f)),d.length<3&&!e.values&&f[0]!==Dr(f)&&(d=[f[0],Dr(f)]),i=d.map((v,w)=>li({index:w,label:c(v,w,d),value:v,perc:h(v)}))):(p=d.length-1,h=h8t(o),i=d.map((v,w)=>li({index:w,label:c(v,w,d),value:v,perc:w?h(v):0,perc2:w===p?1:h(d[w+1])}))),r.source=i,r.add=i,this.value=i,r}});const kzt=e=>e.source.x,Pzt=e=>e.source.y,Nzt=e=>e.target.x,Ozt=e=>e.target.y;function wte(e){et.call(this,{},e)}wte.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};kt(wte,et,{transform(e,t){var n=e.sourceX||kzt,r=e.sourceY||Pzt,i=e.targetX||Nzt,s=e.targetY||Ozt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=x0e.get(u+"-"+a)||x0e.get(u);return l||st("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const wLe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,Dzt=(e,t,n,r)=>wLe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),xLe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},Mzt=(e,t,n,r)=>xLe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),ELe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},$zt=(e,t,n,r)=>ELe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Lzt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,Fzt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,jzt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},Bzt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},zzt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},Uzt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},x0e=qS({line:wLe,"line-radial":Dzt,arc:xLe,"arc-radial":Mzt,curve:ELe,"curve-radial":$zt,"orthogonal-horizontal":Lzt,"orthogonal-vertical":Fzt,"orthogonal-radial":jzt,"diagonal-horizontal":Bzt,"diagonal-vertical":zzt,"diagonal-radial":Uzt});function xte(e){et.call(this,null,e)}xte.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};kt(xte,et,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||US,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,d=o,f=(a-o)/A2(l),h=cc(c),p,m,y;for(e.sort&&h.sort((v,w)=>l[v]-l[w]),p=0;p<c;++p)y=l[h[p]],m=u[h[p]],m[r]=d,m[i]=d+=y*f;return this.value=l,t.reflow(e.modified()).modifies(n)}});const Vzt=5;function Hzt(e){const t=e.type;return!e.bins&&(t===kE||t===rk||t===ik)}function SLe(e){return Mee(e)&&e!==fp}const qzt=qf(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function TLe(e){et.call(this,null,e),this.modified(!0)}kt(TLe,et,{transform(e,t){var n=t.dataflow,r=this.value,i=Wzt(e);(!r||i!==r.type)&&(this.value=r=ri(i)());for(i in e)if(!qzt[i]){if(i==="padding"&&SLe(r.type))continue;ir(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return Jzt(r,e,Qzt(r,e,Yzt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Wzt(e){var t=e.type,n="",r;return t===fp?fp+"-"+kE:(Gzt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?fp+"-":r===3?KS+"-":""),(n+t||kE).toLowerCase())}function Gzt(e){const t=e.type;return Mee(t)&&t!==Rb&&t!==kb&&(e.scheme||e.range&&e.range.length&&e.range.every(jt))}function Yzt(e,t,n){const r=Kzt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&Hzt(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return SLe(s)&&t.padding&&i[0]!==Dr(i)&&(i=Xzt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(CLe(s,i,n)),s===Pee&&e.unknown(t.domainImplicit?gV:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Fee(e,t.nice)||null),i.length}function Kzt(e,t,n){return t?(e.domain(CLe(e.type,t,n)),t.length):-1}function Xzt(e,t,n,r,i,s){var o=Math.abs(Dr(n)-n[0]),a=o/(o-2*r),u=e===_g?SZ(t,null,a):e===ik?T$(t,null,a,.5):e===rk?T$(t,null,a,i||1):e===L4?TZ(t,null,a,s||1):EZ(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function CLe(e,t,n){if(M3e(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Ct(t))}return t}function Qzt(e,t,n){let r=t.bins;if(r&&!ut(r)){const i=e.domain(),s=i[0],o=Dr(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||st("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=cc(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===Nee&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function Jzt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=Zzt(r,t,n);else if(t.scheme&&(s=eUt(r,t,n),ir(s))){if(e.interpolator)return e.interpolator(s);st(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&$3e(r))return e.interpolator(B4(Tq(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate($ee(t.interpolate,t.interpolateGamma)):ir(e.round)?e.round(i):ir(e.rangeRound)&&e.interpolate(i?hR:hv),s&&e.range(Tq(s,t.reverse))}function Zzt(e,t,n){e!==R3e&&e!==cq&&st("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===cq?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*kee(n,i,r)]}function eUt(e,t,n){var r=t.schemeExtent,i,s;return ut(t.scheme)?s=B4(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=Lee(i),s||st(`Unrecognized scheme name: ${t.scheme}`)),n=e===j4?n+1:e===Nee?n-1:e===PE||e===F4?+t.schemeCount||Vzt:n,$3e(e)?E0e(s,r,t.reverse):ir(s)?j3e(E0e(s,r),n):e===Pee?s:s.slice(0,n)}function E0e(e,t,n){return ir(e)&&(t||n)?F3e(e,Tq(t||[0,1],n)):e}function Tq(e,t){return t?e.slice().reverse():e}function ALe(e){et.call(this,null,e)}kt(ALe,et,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(h_(e.sort)),this.modified(n),t}});const S0e="zero",ILe="center",RLe="normalize",kLe=["y0","y1"];function Ete(e){et.call(this,null,e)}Ete.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:S0e,values:[S0e,ILe,RLe]},{name:"as",type:"string",array:!0,length:2,default:kLe}]};kt(Ete,et,{transform(e,t){var n=e.as||kLe,r=n[0],i=n[1],s=h_(e.sort),o=e.field||US,a=e.offset===ILe?tUt:e.offset===RLe?nUt:rUt,u,l,c,d;for(u=iUt(t.source,e.groupby,s,o),l=0,c=u.length,d=u.max;l<c;++l)a(u[l],d,o,r,i);return t.reflow(e.modified()).modifies(n)}});function tUt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function nUt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function rUt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function iUt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,d,f,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],d=t.map(s),f=o[d],f||(o[d]=f=[],i.push(f)),f.push(c);for(d=0,p=0,l=i.length;d<l;++d){for(f=i[d],a=0,h=0,u=f.length;a<u;++a)h+=Math.abs(r(f[a]));f.sum=h,h>p&&(p=h),n&&f.sort(n)}return i.max=p,i}const sUt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:yLe,datajoin:vLe,encode:bLe,legendentries:_Le,linkpath:wte,pie:xte,scale:TLe,sortitems:ALe,stack:Ete},Symbol.toStringTag,{value:"Module"}));var oUt=Math.abs,Cq=Math.cos,U$=Math.sin,aUt=1e-6,PLe=Math.PI,Aq=PLe/2,T0e=uUt(2);function C0e(e){return e>1?Aq:e<-1?-Aq:Math.asin(e)}function uUt(e){return e>0?Math.sqrt(e):0}function lUt(e,t){var n=e*U$(t),r=30,i;do t-=i=(t+U$(t)-n)/(1+Cq(t));while(oUt(i)>aUt&&--r>0);return t/2}function cUt(e,t,n){function r(i,s){return[e*i*Cq(s=lUt(n,s)),t*U$(s)]}return r.invert=function(i,s){return s=C0e(s/t),[i/(e*Cq(s)),C0e((2*s+U$(2*s))/n)]},r}var dUt=cUt(T0e/Aq,T0e,PLe);function fUt(){return Fp(dUt).scale(169.529)}const hUt=BTe(),Iq=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function pUt(e,t){return function n(){const r=t();return r.type=e,r.path=BTe().projection(r),r.copy=r.copy||function(){const i=n();return Iq.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},O3e(r)}}function Ste(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(V$[e]=pUt(e,t),this):V$[e]||null}function NLe(e){return e&&e.path||hUt}const V$={albers:UTe,albersusa:mgt,azimuthalequalarea:ggt,azimuthalequidistant:ygt,conicconformal:_gt,conicequalarea:h3,conicequidistant:Egt,equalEarth:Tgt,equirectangular:wgt,gnomonic:Cgt,identity:Agt,mercator:vgt,mollweide:fUt,naturalEarth1:Igt,orthographic:Rgt,stereographic:kgt,transversemercator:Pgt};for(const e in V$)Ste(e,V$[e]);function mUt(){}const gm=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function OLe(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],d=[];return s(u,l,f=>{n(f,u,l),gUt(f)>0?c.push([f]):d.push(f)}),d.forEach(f=>{for(var h=0,p=c.length,m;h<p;++h)if(yUt((m=c[h])[0],f)!==-1){m.push(f);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var d=[],f=[],h,p,m,y,v,w;for(h=p=-1,y=u[0]>=l,gm[y<<1].forEach(x);++h<e-1;)m=y,y=u[h+1]>=l,gm[m|y<<1].forEach(x);for(gm[y<<0].forEach(x);++p<t-1;){for(h=-1,y=u[p*e+e]>=l,v=u[p*e]>=l,gm[y<<1|v<<2].forEach(x);++h<e-1;)m=y,y=u[p*e+e+h+1]>=l,w=v,v=u[p*e+h+1]>=l,gm[m|y<<1|v<<2|w<<3].forEach(x);gm[y|v<<3].forEach(x)}for(h=-1,v=u[p*e]>=l,gm[v<<2].forEach(x);++h<e-1;)w=v,v=u[p*e+h+1]>=l,gm[v<<2|w<<3].forEach(x);gm[v<<3].forEach(x);function x(S){var E=[S[0][0]+h,S[0][1]+p],T=[S[1][0]+h,S[1][1]+p],A=o(E),I=o(T),k,D;(k=f[A])?(D=d[I])?(delete f[k.end],delete d[D.start],k===D?(k.ring.push(T),c(k.ring)):d[k.start]=f[D.end]={start:k.start,end:D.end,ring:k.ring.concat(D.ring)}):(delete f[k.end],k.ring.push(T),f[k.end=I]=k):(k=d[I])?(D=f[A])?(delete d[k.start],delete f[D.end],k===D?(k.ring.push(T),c(k.ring)):d[D.start]=f[k.end]={start:D.start,end:k.end,ring:D.ring.concat(k.ring)}):(delete d[k.start],k.ring.unshift(E),d[k.start=A]=k):d[A]=f[I]={start:A,end:I,ring:[E,T]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(d=>{var f=d[0],h=d[1],p=f|0,m=h|0,y,v=l[m*e+p];f>0&&f<e&&p===f&&(y=l[m*e+p-1],d[0]=f+(c-y)/(v-y)-.5),h>0&&h<t&&m===h&&(y=l[(m-1)*e+p],d[1]=h+(c-y)/(v-y)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||st("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:mUt,r):n===a},r}function gUt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function yUt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=vUt(e,t[n]))return i;return 0}function vUt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],d=e[a],f=d[0],h=d[1];if(bUt(u,d,t))return 0;c>r!=h>r&&n<(f-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function bUt(e,t,n){var r;return _Ut(e,t,n)&&wUt(e[r=+(e[0]===t[0])],n[r],t[r])}function _Ut(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function wUt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function DLe(e,t,n){return function(r){var i=Tp(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?Ey(s,o,e):a/(e+1);return cc(s+u,o,u)}}function Tte(e){et.call(this,null,e)}Tte.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};kt(Tte,et,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||ru,s=OLe().smooth(e.smooth!==!1),o=e.thresholds||xUt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),d=s.size([c.width,c.height])(c.values,ut(o)?o:o(c.values));EUt(d,c,l,e),d.forEach(f=>{u.push(I4(l,li(a!=null?{[a]:f}:f)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function xUt(e,t,n){const r=DLe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>tp(t(i).values)))}function EUt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(ir(i)&&(i=i(n,r)),ir(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(Gr(i)?i:i[0])||1,a=(Gr(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(MLe(t,o,a,u,l))}function MLe(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(d){d.forEach(l)}function l(d){a&&d.reverse(),d.forEach(c)}function c(d){d[0]=(d[0]-s)*t+r,d[1]=(d[1]-o)*n+i}return function(d){return d.coordinates.forEach(u),d}}function A0e(e,t,n){const r=e>=0?e:HZ(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function Jz(e){return ir(e)?e:iu(+e)}function $Le(){var e=u=>u[0],t=u=>u[1],n=US,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=A0e(r[0],u,e)>>o,d=A0e(r[1],u,t)>>o,f=c?c+2:0,h=d?d+2:0,p=2*f+(i>>o),m=2*h+(s>>o),y=new Float32Array(p*m),v=new Float32Array(p*m);let w=y;u.forEach(S=>{const E=f+(+e(S)>>o),T=h+(+t(S)>>o);E>=0&&E<p&&T>=0&&T<m&&(y[E+T*p]+=+n(S))}),c>0&&d>0?(Cw(p,m,y,v,c),Aw(p,m,v,y,d),Cw(p,m,y,v,c),Aw(p,m,v,y,d),Cw(p,m,y,v,c),Aw(p,m,v,y,d)):c>0?(Cw(p,m,y,v,c),Cw(p,m,v,y,c),Cw(p,m,y,v,c),w=v):d>0&&(Aw(p,m,y,v,d),Aw(p,m,v,y,d),Aw(p,m,y,v,d),w=v);const x=l?Math.pow(2,-2*o):1/A2(w);for(let S=0,E=p*m;S<E;++S)w[S]*=x;return{values:w,scale:1<<o,width:p,height:m,x1:f,y1:h,x2:f+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=Jz(u),a):e},a.y=function(u){return arguments.length?(t=Jz(u),a):t},a.weight=function(u){return arguments.length?(n=Jz(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||st("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||st("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=Ft(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&st("invalid bandwidth"),r=u,a):r},a}function Cw(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function Aw(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function Cte(e){et.call(this,null,e)}Cte.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const SUt=["x","y","weight","size","cellSize","bandwidth"];function LLe(e,t){return SUt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}kt(Cte,et,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=TUt(r,e.groupby),s=(e.groupby||[]).map(Ns),o=LLe($Le(),e),a=e.as||"grid",u=[];function l(c,d){for(let f=0;f<s.length;++f)c[s[f]]=d[f];return c}return u=i.map(c=>li(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function TUt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Ate(e){et.call(this,null,e)}Ate.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};kt(Ate,et,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=OLe().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||DLe(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=LLe($Le(),e)(i,!0),u=MLe(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=ut(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(li),n}});const Rq="Feature",Ite="FeatureCollection",CUt="MultiPoint";function Rte(e){et.call(this,null,e)}Rte.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};kt(Rte,et,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&ru,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(Qa(a))||s&&t.modified(Qa(s))||o&&t.modified(Qa(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var d=s(c),f=o(c);d!=null&&f!=null&&(d=+d)===d&&(f=+f)===f&&r.push([d,f])}),n=n.concat({type:Rq,geometry:{type:CUt,coordinates:r}})),this.value={type:Ite,features:n}}});function kte(e){et.call(this,null,e)}kte.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};kt(kte,et,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||ru,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=NLe(e.projection),n.materialize().reflow()):o=i===ru||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=AUt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function AUt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function Pte(e){et.call(this,null,e)}Pte.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};kt(Pte,et,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const d=n([r(c),i(c)]);d?(c[o]=d[0],c[a]=d[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function Nte(e){et.call(this,null,e)}Nte.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};kt(Nte,et,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=IUt(NLe(e.projection),e.field||Cd("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function IUt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function Ote(e){et.call(this,[],e),this.generator=Ymt()}Ote.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};kt(Ote,et,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)ir(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(LMe(n[0],i)):t.add.push(li(i)),n[0]=i,t}});function Dte(e){et.call(this,null,e)}Dte.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};kt(Dte,et,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||ru,s=kUt(e.opacity,e),o=RUt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?tp(n.map(l=>tp(i(l).values))):0};return n.forEach(l=>{const c=i(l),d=rr({},l,u);r||(d.$max=tp(c.values||[])),l[a]=PUt(c,d,o.dep?o:iu(o(d)),s.dep?s:iu(s(d)))}),t.reflow(!0).modifies(a)}});function RUt(e,t){let n;return ir(e)?(n=r=>Sy(e(r,t)),n.dep=FLe(e)):n=iu(Sy(e||"#888")),n}function kUt(e,t){let n;return ir(e)?(n=r=>e(r,t),n.dep=FLe(e)):e?n=iu(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function FLe(e){if(!ir(e))return!1;const t=qf(Qa(e));return t.$x||t.$y||t.$value||t.$max}function PUt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,d=c?y=>c[y]:B0,f=py(u-o,l-a),h=f.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let y=a,v=0;y<l;++y){t.$y=y-a;for(let w=o,x=y*i;w<u;++w,v+=4){t.$x=w-o,t.$value=d(w+x);const S=n(t);m[v+0]=S.r,m[v+1]=S.g,m[v+2]=S.b,m[v+3]=~~(255*r(t))}}return h.putImageData(p,0,0),f}function jLe(e){et.call(this,null,e),this.modified(!0)}kt(jLe,et,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=OUt(e.type),Iq.forEach(r=>{e[r]!=null&&I0e(n,r,e[r])})):Iq.forEach(r=>{e.modified(r)&&I0e(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&NUt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function NUt(e,t){const n=DUt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function OUt(e){const t=Ste((e||"mercator").toLowerCase());return t||st("Unrecognized projection type: "+e),t()}function I0e(e,t,n){ir(e[t])&&e[t](n)}function DUt(e){return e=Ft(e),e.length===1?e[0]:{type:Ite,features:e.reduce((t,n)=>t.concat(MUt(n)),[])}}function MUt(e){return e.type===Ite?e.features:Ft(e).filter(t=>t!=null).map(t=>t.type===Rq?t:{type:Rq,geometry:t})}const $Ut=Object.freeze(Object.defineProperty({__proto__:null,contour:Ate,geojson:Rte,geopath:kte,geopoint:Pte,geoshape:Nte,graticule:Ote,heatmap:Dte,isocontour:Tte,kde2d:Cte,projection:jLe},Symbol.toStringTag,{value:"Module"})),R0e={center:Fpt,collide:rmt,nbody:pmt,link:smt,x:mmt,y:gmt},_A="forces",kq=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],LUt=["static","iterations"],BLe=["x","y","vx","vy"];function Mte(e){et.call(this,null,e)}Mte.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:BLe}]};kt(Mte,et,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(kq),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&zLe(n,e,0,t)):(this.value=n=jUt(t.source,e),n.on("tick",FUt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(LUt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==_A||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(BLe)}});function FUt(e,t){return()=>e.touch(t).run()}function jUt(e,t){const n=hmt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),zLe(n,t,!0).on("end",()=>s=!0)}function zLe(e,t,n,r){var i=Ft(t.forces),s,o,a,u;for(s=0,o=kq.length;s<o;++s)a=kq[s],a!==_A&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=_A+s,a=n||t.modified(_A,s)?zUt(i[s]):r&&BUt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(_A+s,null);return e.numForces=i.length,e}function BUt(e,t){var n,r;for(n in e)if(ir(r=e[n])&&t.modified(Qa(r)))return 1;return 0}function zUt(e){var t,n;cn(R0e,e.force)||st("Unrecognized force: "+e.force),t=R0e[e.force]();for(n in e)ir(t[n])&&UUt(t[n],e[n],e);return t}function UUt(e,t,n){e(ir(t)?r=>t(r,n):t)}const VUt=Object.freeze(Object.defineProperty({__proto__:null,force:Mte},Symbol.toStringTag,{value:"Module"}));function Pq(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function $te(e){et.call(this,null,e)}$te.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const HUt=e=>e.values;kt($te,et,{transform(e,t){t.source||st("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&A4(o.data)&&i.rem.push(o.data)}),this.value=s=QK({values:Ft(e.keys).reduce((o,a)=>(o.key(a),o),qUt()).entries(i.source)},HUt),n&&s.each(o=>{o.children&&(o=li(o.data),i.add.push(o),i.source.push(o))}),Pq(s,un,un)),i.source.root=s,i}});function qUt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,d,f,h;for(;++c<o;)d=a(f=i[c])+"",(h=u[d])?h.push(f):u[d]=[f];for(d in u)l[d]=n(u[d],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function Lg(e){et.call(this,null,e)}const WUt=(e,t)=>e.parent===t.parent?1:2;kt(Lg,et,{transform(e,t){(!t.source||!t.source.root)&&st(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(h_(e.sort,o=>o.data)),GUt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?WUt:US);try{this.value=n(i)}catch(o){st(o)}return i.each(o=>YUt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function GUt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function YUt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const Nq=["x","y","r","depth","children"];function Lte(e){Lg.call(this,e)}Lte.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Nq.length,default:Nq}]};kt(Lte,Lg,{layout:g0t,params:["radius","size","padding"],fields:Nq});const Oq=["x0","y0","x1","y1","depth","children"];function Fte(e){Lg.call(this,e)}Fte.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Oq.length,default:Oq}]};kt(Fte,Lg,{layout:y0t,params:["size","round","padding"],fields:Oq});function jte(e){et.call(this,null,e)}jte.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};kt(jte,et,{transform(e,t){t.source||st("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?Pq(Zde().id(e.key).parentId(e.parentKey)(i.source),e.key,Ad):Pq(Zde()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const k0e={tidy:A0t,cluster:jgt},Dq=["x","y","depth","children"];function Bte(e){Lg.call(this,e)}Bte.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:Dq.length,default:Dq}]};kt(Bte,Lg,{layout(e){const t=e||"tidy";if(cn(k0e,t))return k0e[t]();st("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:Dq});function zte(e){et.call(this,[],e)}zte.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};kt(zte,et,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||st("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[un(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[un(a)]&&s[un(u)]&&i.add.push(li({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[un(o)]=1),n.forEach(o=>{(s[un(o.source)]||s[un(o.target)])&&i.mod.push(o)})),i}});const P0e={binary:R0t,dice:yR,slice:KF,slicedice:k0t,squarify:oCe,resquarify:P0t},Mq=["x0","y0","x1","y1","depth","children"];function Ute(e){Lg.call(this,e)}Ute.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Mq.length,default:Mq}]};kt(Ute,Lg,{layout(){const e=I0t();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{cn(P0e,t)?e.tile(P0e[t]):st("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:Mq});const KUt=Object.freeze(Object.defineProperty({__proto__:null,nest:$te,pack:Lte,partition:Fte,stratify:jte,tree:Bte,treelinks:zte,treemap:Ute},Symbol.toStringTag,{value:"Module"})),Zz=4278190080;function XUt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function QUt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=py(s,o).getContext("2d"),l=py(s,o).getContext("2d"),c=a&&py(s,o).getContext("2d");n.forEach(I=>eM(u,I,!1)),eM(l,t,!1),a&&eM(c,t,!0);const d=eU(u,s,o),f=eU(l,s,o),h=a&&eU(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let y,v,w,x,S,E,T,A;for(v=0;v<o;++v)for(y=0;y<s;++y)S=v*s+y,E=d[S]&Zz,A=f[S]&Zz,T=a&&h[S]&Zz,(E||T||A)&&(w=e(y),x=e(v),!i&&(E||A)&&p.set(w,x),a&&(E||T)&&m.set(w,x));return[p,m]}function eU(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function eM(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>eM(e,s.items,n))}):Oc[r].draw(e,{items:n?t.map(JUt):t})}function JUt(e){const t=I4(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const ym=5,bu=31,CI=32,R0=new Uint32Array(CI+1),ff=new Uint32Array(CI+1);ff[0]=0;R0[0]=~ff[0];for(let e=1;e<=CI;++e)ff[e]=ff[e-1]<<1|1,R0[e]=~ff[e];function ZUt(e,t){const n=new Uint32Array(~~((e*t+CI)/CI));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>ym]&1<<(a&bu)},set:(s,o)=>{const a=o*e+s;r(a>>>ym,1<<(a&bu))},clear:(s,o)=>{const a=o*e+s;i(a>>>ym,~(1<<(a&bu)))},getRange:(s,o,a,u)=>{let l=u,c,d,f,h;for(;l>=o;--l)if(c=l*e+s,d=l*e+a,f=c>>>ym,h=d>>>ym,f===h){if(n[f]&R0[c&bu]&ff[(d&bu)+1])return!0}else{if(n[f]&R0[c&bu]||n[h]&ff[(d&bu)+1])return!0;for(let p=f+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,d,f,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,d=l>>>ym,f=c>>>ym,d===f)r(d,R0[l&bu]&ff[(c&bu)+1]);else for(r(d,R0[l&bu]),r(f,ff[(c&bu)+1]),h=d+1;h<f;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,d,f,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,d=l>>>ym,f=c>>>ym,d===f)i(d,ff[l&bu]|R0[(c&bu)+1]);else for(i(d,ff[l&bu]),i(f,R0[(c&bu)+1]),h=d+1;h<f;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function e7t(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>ZUt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function t7t(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=gc.width(o.datum,o.datum.text);let d=0,f,h,p,m,y,v,w;for(let x=0;x<u;++x)f=a[x].x,p=a[x].y,h=a[x].x2===void 0?f:a[x].x2,m=a[x].y2===void 0?p:a[x].y2,y=(f+h)/2,v=(p+m)/2,w=Math.abs(h-f+m-p),w>=d&&(d=w,o.x=y,o.y=v);return y=c/2,v=l/2,f=o.x-y,h=o.x+y,p=o.y-v,m=o.y+v,o.align="center",f<0&&h<=i?o.align="left":0<=f&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function H$(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function Z0(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),d=e(n-(s=s/2)),f=e(n+s);return o.outOfBounds(l,d,c,f)||o.getRange(l,d,c,f)||a&&a.getRange(l,d,c,f)}function n7t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,d,f,h){const p=e.invert(l),m=e.invert(c);let y=d,v=s,w;if(!H$(p,m,f,h,i,s)&&!Z0(e,p,m,h,f,y,o,a)&&!Z0(e,p,m,h,f,h,o,null)){for(;v-y>=1;)w=(y+v)/2,Z0(e,p,m,h,f,w,o,a)?v=w:y=w;if(y>d)return[p,m,y,!0]}}return function(l){const c=l.datum.datum.items[r].items,d=c.length,f=l.datum.fontSize,h=gc.width(l.datum,l.datum.text);let p=n?f:0,m=!1,y=!1,v=0,w,x,S,E,T,A,I,k,D,M,z,O,$,F,B,q,G;for(let K=0;K<d;++K){for(w=c[K].x,S=c[K].y,x=c[K].x2===void 0?w:c[K].x2,E=c[K].y2===void 0?S:c[K].y2,w>x&&(G=w,w=x,x=G),S>E&&(G=S,S=E,E=G),D=e(w),z=e(x),M=~~((D+z)/2),O=e(S),F=e(E),$=~~((O+F)/2),I=M;I>=D;--I)for(k=$;k>=O;--k)q=u(I,k,p,h,f),q&&([l.x,l.y,p,m]=q);for(I=M;I<=z;++I)for(k=$;k<=F;++k)q=u(I,k,p,h,f),q&&([l.x,l.y,p,m]=q);!m&&!n&&(B=Math.abs(x-w+E-S),T=(w+x)/2,A=(S+E)/2,B>=v&&!H$(T,A,h,f,i,s)&&!Z0(e,T,A,f,h,f,o,null)&&(v=B,l.x=T,l.y=A,y=!0))}return m||y?(T=h/2,A=f/2,o.setRange(e(l.x-T),e(l.y-A),e(l.x+T),e(l.y+A)),l.align="center",l.baseline="middle",!0):!1}}const r7t=[-1,-1,1,1],i7t=[-1,1,-1,1];function s7t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,d=c.length,f=l.datum.fontSize,h=gc.width(l.datum,l.datum.text),p=[];let m=n?f:0,y=!1,v=!1,w=0,x,S,E,T,A,I,k,D,M,z,O,$;for(let F=0;F<d;++F){for(x=c[F].x,E=c[F].y,S=c[F].x2===void 0?x:c[F].x2,T=c[F].y2===void 0?E:c[F].y2,p.push([e((x+S)/2),e((E+T)/2)]);p.length;)if([k,D]=p.pop(),!(o.get(k,D)||a.get(k,D)||u.get(k,D))){u.set(k,D);for(let B=0;B<4;++B)A=k+r7t[B],I=D+i7t[B],u.outOfBounds(A,I,A,I)||p.push([A,I]);if(A=e.invert(k),I=e.invert(D),M=m,z=s,!H$(A,I,h,f,i,s)&&!Z0(e,A,I,f,h,M,o,a)&&!Z0(e,A,I,f,h,f,o,null)){for(;z-M>=1;)O=(M+z)/2,Z0(e,A,I,f,h,O,o,a)?z=O:M=O;M>m&&(l.x=A,l.y=I,m=M,y=!0)}}!y&&!n&&($=Math.abs(S-x+T-E),A=(x+S)/2,I=(E+T)/2,$>=w&&!H$(A,I,h,f,i,s)&&!Z0(e,A,I,f,h,f,o,null)&&(w=$,l.x=A,l.y=I,v=!0))}return y||v?(A=h/2,I=f/2,o.setRange(e(l.x-A),e(l.y-I),e(l.x+A),e(l.y+I)),l.align="center",l.baseline="middle",!0):!1}}const o7t=["right","center","left"],a7t=["bottom","middle","top"];function u7t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,d=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let f=l.textWidth??0,h,p,m,y,v,w,x,S,E,T,A,I,k,D,M;for(let z=0;z<u;++z){if(h=(n[z]&3)-1,p=(n[z]>>>2&3)-1,m=h===0&&p===0||r[z]<0,y=h&&p?Math.SQRT1_2:1,v=r[z]<0?-1:1,w=c[1+h]+r[z]*h*y,A=c[4+p]+v*d*p/2+r[z]*p*y,S=A-d/2,E=A+d/2,I=e(w),D=e(S),M=e(E),!f)if(N0e(I,I,D,M,o,a,w,w,S,E,c,m))f=gc.width(l.datum,l.datum.text);else continue;if(T=w+v*f*h/2,w=T-f/2,x=T+f/2,I=e(w),k=e(x),N0e(I,k,D,M,o,a,w,x,S,E,c,m))return l.x=h?h*v<0?x:w:T,l.y=p?p*v<0?E:S:A,l.align=o7t[h*v+1],l.baseline=a7t[p*v+1],o.setRange(I,D,k,M),!0}return!1}}function N0e(e,t,n,r,i,s,o,a,u,l,c,d){return!(i.outOfBounds(e,n,t,r)||(d&&s||i).getRange(e,n,t,r))}const tU=0,nU=4,rU=8,iU=0,sU=1,oU=2,l7t={"top-left":tU+iU,top:tU+sU,"top-right":tU+oU,left:nU+iU,middle:nU+sU,right:nU+oU,"bottom-left":rU+iU,bottom:rU+sU,"bottom-right":rU+oU},c7t={naive:t7t,"reduced-search":n7t,floodfill:s7t};function d7t(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const d=Math.max(r.length,i.length),f=f7t(r,d),h=h7t(i,d),p=p7t(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,y=m==="area",v=m7t(p,m,a,u),w=l===null||l===1/0,x=y&&c==="naive";let S=-1,E=-1;const T=e.map(D=>{const M=w?gc.width(D,D.text):void 0;return S=Math.max(S,M),E=Math.max(E,D.fontSize),{datum:D,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:v(D),textWidth:M}});l=l===null||l===1/0?Math.max(S,E)+Math.max(...r):l;const A=e7t(t[0],t[1],l);let I;if(!x){n&&T.sort((z,O)=>n(z.datum,O.datum));let D=!1;for(let z=0;z<h.length&&!D;++z)D=h[z]===5||f[z]<0;const M=(p&&o||y)&&e.map(z=>z.datum);I=s.length||M?QUt(A,M||[],s,D,y):XUt(A,o&&T)}const k=y?c7t[c](A,I,o,u):u7t(A,I,h,f);return T.forEach(D=>D.opacity=+k(D)),T}function f7t(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function h7t(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=l7t[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function p7t(e){return e&&e.mark&&e.mark.marktype}function m7t(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const $q=["x","y","opacity","align","baseline"],ULe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Vte(e){et.call(this,null,e)}Vte.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:ULe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:$q.length,default:$q}]};kt(Vte,et,{transform(e,t){function n(s){const o=e[s];return ir(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&st("Size parameter should be specified as a [width, height] array.");const i=e.as||$q;return d7t(t.materialize(t.SOURCE).source||[],e.size,e.sort,Ft(e.offset==null?1:e.offset),Ft(e.anchor||ULe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const g7t=Object.freeze(Object.defineProperty({__proto__:null,label:Vte},Symbol.toStringTag,{value:"Module"}));function VLe(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Hte(e){et.call(this,null,e)}Hte.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};kt(Hte,et,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=VLe(r,e.groupby),s=(e.groupby||[]).map(Ns),o=s.length,a=e.as||[Ns(e.x),Ns(e.y)],u=[];i.forEach(l=>{t3e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const d={};for(let f=0;f<o;++f)d[s[f]]=l.dims[f];d[a[0]]=c[0],d[a[1]]=c[1],u.push(li(d))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const Lq={constant:nee,linear:ree,log:QMe,exp:JMe,pow:ZMe,quad:iee,poly:e3e},y7t=(e,t)=>e==="poly"?t:e==="quad"?2:1;function qte(e){et.call(this,null,e)}qte.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(Lq)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};kt(qte,et,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=VLe(r,e.groupby),s=(e.groupby||[]).map(Ns),o=e.method||"linear",a=e.order==null?3:e.order,u=y7t(o,a),l=e.as||[Ns(e.x),Ns(e.y)],c=Lq[o],d=[];let f=e.extent;cn(Lq,o)||st("Invalid regression method: "+o),f!=null&&o==="log"&&f[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),f=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){d.push(li({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const y=f||Tp(h,e.x),v=w=>{const x={};for(let S=0;S<s.length;++S)x[s[S]]=h.dims[S];x[l[0]]=w[0],x[l[1]]=w[1],d.push(li(x))};o==="linear"||o==="constant"?y.forEach(w=>v([w,m.predict(w)])):M4(m.predict,y,25,200).forEach(v)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=d}return n}});const v7t=Object.freeze(Object.defineProperty({__proto__:null,loess:Hte,regression:qte},Symbol.toStringTag,{value:"Module"}));function Wte(e){et.call(this,null,e)}Wte.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const b7t=[-1e5,-1e5,1e5,1e5];kt(Wte,et,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:b7t;const s=this.value=jK.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!w7t(u)?_7t(u):null}return t.reflow(e.modified()).modifies(n)}});function _7t(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function w7t(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const x7t=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Wte},Symbol.toStringTag,{value:"Module"}));var aU=Math.PI/180,wA=64,tM=2048;function E7t(){var e=[256,256],t,n,r,i,s,o,a,u=HLe,l=[],c=Math.random,d={};d.layout=function(){for(var p=f(py()),m=R7t((e[0]>>5)*e[1]),y=null,v=l.length,w=-1,x=[],S=l.map(T=>({text:t(T),font:n(T),style:i(T),weight:s(T),rotate:o(T),size:~~(r(T)+1e-14),padding:a(T),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:T})).sort((T,A)=>A.size-T.size);++w<v;){var E=S[w];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,S7t(p,E,S,w),E.hasText&&h(m,E,y)&&(x.push(E),y?C7t(y,E):y=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return x};function f(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(wA<<5)/m,p.height=tM/m;var y=p.getContext("2d");return y.fillStyle=y.strokeStyle="red",y.textAlign="center",{context:y,ratio:m}}function h(p,m,y){for(var v=m.x,w=m.y,x=Math.hypot(e[0],e[1]),S=u(e),E=c()<.5?1:-1,T=-E,A,I,k;(A=S(T+=E))&&(I=~~A[0],k=~~A[1],!(Math.min(Math.abs(I),Math.abs(k))>=x));)if(m.x=v+I,m.y=w+k,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!y||!T7t(m,p,e[0]))&&(!y||A7t(m,y))){for(var D=m.sprite,M=m.width>>5,z=e[0]>>5,O=m.x-(M<<4),$=O&127,F=32-$,B=m.y1-m.y0,q=(m.y+m.y0)*z+(O>>5),G,K=0;K<B;K++){G=0;for(var L=0;L<=M;L++)p[q+L]|=G<<F|(L<M?(G=D[K*M+L])>>>$:0);q+=z}return m.sprite=null,!0}return!1}return d.words=function(p){return arguments.length?(l=p,d):l},d.size=function(p){return arguments.length?(e=[+p[0],+p[1]],d):e},d.font=function(p){return arguments.length?(n=n1(p),d):n},d.fontStyle=function(p){return arguments.length?(i=n1(p),d):i},d.fontWeight=function(p){return arguments.length?(s=n1(p),d):s},d.rotate=function(p){return arguments.length?(o=n1(p),d):o},d.text=function(p){return arguments.length?(t=n1(p),d):t},d.spiral=function(p){return arguments.length?(u=k7t[p]||p,d):u},d.fontSize=function(p){return arguments.length?(r=n1(p),d):r},d.padding=function(p){return arguments.length?(a=n1(p),d):a},d.random=function(p){return arguments.length?(c=p,d):c},d}function S7t(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(wA<<5)/s,tM/s);var o=0,a=0,u=0,l=n.length,c,d,f,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,f=t.size<<1,t.rotate){var m=Math.sin(t.rotate*aU),y=Math.cos(t.rotate*aU),v=c*y,w=c*m,x=f*y,S=f*m;c=Math.max(Math.abs(v+S),Math.abs(v-S))+31>>5<<5,f=~~Math.max(Math.abs(w+x),Math.abs(w-x))}else c=c+31>>5<<5;if(f>u&&(u=f),o+c>=wA<<5&&(o=0,a+=u,u=0),a+f>=tM)break;i.translate((o+(c>>1))/s,(a+(f>>1))/s),t.rotate&&i.rotate(t.rotate*aU),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=f,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=f>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,(wA<<5)/s,tM/s).data,T=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,d=c>>5,f=t.y1-t.y0,h=0;h<f*d;h++)T[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var A=0,I=-1;for(p=0;p<f;p++){for(h=0;h<c;h++){var k=d*p+(h>>5),D=E[(a+p)*(wA<<5)+(o+h)<<2]?1<<31-h%32:0;T[k]|=D,A|=D}A?I=p:(t.y0++,f--,p--,a++)}t.y1=t.y0+I,t.sprite=T.slice(0,(t.y1-t.y0)*d)}}}function T7t(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,d=0;d<u;d++){c=0;for(var f=0;f<=i;f++)if((c<<a|(f<i?(c=r[d*i+f])>>>o:0))&t[l+f])return!0;l+=n}return!1}function C7t(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function A7t(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function HLe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function I7t(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function R7t(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function n1(e){return typeof e=="function"?e:function(){return e}}var k7t={archimedean:HLe,rectangular:I7t};const qLe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],P7t=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Gte(e){et.call(this,E7t(),e)}Gte.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:qLe}]};kt(Gte,et,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&st("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return ir(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||P7t.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||qLe;let a=e.fontSize||14,u;if(ir(a)?u=e.fontSizeRange:a=iu(a),u){const p=a,m=ri("sqrt")().domain(Tp(i,p)).range(u);a=y=>m(p(y))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Rd).layout(),c=s.size(),d=c[0]>>1,f=c[1]>>1,h=l.length;for(let p=0,m,y;p<h;++p)m=l[p],y=m.datum,y[o[0]]=m.x+d,y[o[1]]=m.y+f,y[o[2]]=m.font,y[o[3]]=m.size,y[o[4]]=m.style,y[o[5]]=m.weight,y[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const N7t=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:Gte},Symbol.toStringTag,{value:"Module"})),O7t=e=>new Uint8Array(e),D7t=e=>new Uint16Array(e),s2=e=>new Uint32Array(e);function M7t(){let e=8,t=[],n=s2(0),r=$O(0,e),i=$O(0,e);return{data:()=>t,seen:()=>n=$7t(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,d,f;for(d=0;!o[d]&&d<a;++d)u[d]=t[d],l[d]=d;for(f=d;d<a;++d)c=t[d],o[d]?l[d]=-1:(l[d]=f,r[f]=r[d],i[f]=i[d],u[f]=c,c._index=f++),r[d]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=$O(s,e,r),i=$O(s,e))}}}function $7t(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function $O(e,t,n){const r=(t<257?O7t:t<65537?D7t:s2)(e);return n&&r.set(n),r}function O0e(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],d=u.length;let f;for(f=0;f<l;++f)s[u[f]]|=r;for(f=c;f<d;++f)s[u[f]]|=r;return o}}}function D0e(){let e=s2(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,d=u.length,f=s2(d);let h=Array(d),p,m,y;for(y=0;y<d;++y)h[y]=a(u[y]),f[y]=y;if(h=L7t(h,f),c)p=t,m=e,t=Array(c+d),e=s2(c+d),F7t(l,p,m,c,h,f,d,t,e);else{if(l>0)for(y=0;y<d;++y)f[y]+=l;t=h,e=f}return n=c+d,{index:f,value:h}}function i(a,u){const l=n;let c,d,f;for(d=0;!u[e[d]]&&d<l;++d);for(f=d;d<l;++d)u[c=e[d]]||(e[f]=c,t[f]=t[d],++f);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[hct(u,a[0],0,l),xy(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function L7t(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),bct(e,t)}function F7t(e,t,n,r,i,s,o,a,u){let l=0,c=0,d;for(d=0;l<r&&c<o;++d)t[l]<i[c]?(a[d]=t[l],u[d]=n[l++]):(a[d]=i[c],u[d]=s[c++]+e);for(;l<r;++l,++d)a[d]=t[l],u[d]=n[l];for(;c<o;++c,++d)a[d]=i[c],u[d]=s[c]+e}function Yte(e){et.call(this,M7t(),e),this._indices=null,this._dims=null}Yte.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};kt(Yte,et,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=D0e()),s.push(O0e(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),d=n.rem=n.add,f=n.mod,h=i.length,p={};let m,y,v,w,x,S,E,T,A;if(l.set(u),t.rem.length&&(x=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(S={},w=t.mod,E=0,T=w.length;E<T;++E)S[w[E]._index]=1;for(E=0;E<h;++E)A=r[E],(!o[E]||e.modified("fields",E)||t.modified(A.fields))&&(v=A.fname,(m=p[v])||(s[v]=y=D0e(),p[v]=m=y.insert(A,t.source,0)),o[E]=O0e(y,E,i[E]).onAdd(m,u));for(E=0,T=a.data().length;E<T;++E)x[E]||(l[E]!==u[E]?d.push(E):S[E]&&u[E]!==c&&f.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,d=s.length;let f=i.size(),h,p,m;i.resize(c,d),i.add(r);const y=i.curr(),v=i.prev(),w=i.all();for(h=0;h<d;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,f)),s[h].onAdd(m,y);for(;f<c;++f)v[f]=w,y[f]!==w&&l.push(f)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let d,f,h,p;for(d=0,f=c.length;d<f;++d)h=c[d]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(f,u);return this.reindex(t,f,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),d=c[0],f=c[1],h=l[0],p=l[1],m=e.one;let y,v,w;if(d<h)for(y=d,v=Math.min(h,f);y<v;++y)w=u[y],s[w]!==n&&(a[w]=o[w],s[w]=n,r.push(w)),o[w]^=m;else if(d>h)for(y=h,v=Math.min(d,p);y<v;++y)w=u[y],s[w]!==n&&(a[w]=o[w],s[w]=n,r.push(w)),o[w]^=m;if(f>p)for(y=Math.max(d,p),v=f;y<v;++y)w=u[y],s[w]!==n&&(a[w]=o[w],s[w]=n,r.push(w)),o[w]^=m;else if(f<p)for(y=Math.max(h,f),v=p;y<v;++y)w=u[y],s[w]!==n&&(a[w]=o[w],s[w]=n,r.push(w)),o[w]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],d=a[0],f=a[1],h=e.one;let p,m,y;if(l<d)for(p=l,m=Math.min(d,c);p<m;++p)y=o[p],s[y]^=h,n.push(y);else if(l>d)for(p=d,m=Math.min(l,f);p<m;++p)y=o[p],s[y]^=h,r.push(y);if(c>f)for(p=Math.max(l,f),m=c;p<m;++p)y=o[p],s[y]^=h,n.push(y);else if(c<f)for(p=Math.max(d,c),m=f;p<m;++p)y=o[p],s[y]^=h,r.push(y);e.range=t.slice()}});function Kte(e){et.call(this,null,e)}Kte.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};kt(Kte,et,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if((i&n)===0)return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const d=a[c]&n;return!d&&d^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const d=a[c]&n;return d&&!(d^(d^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const j7t=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Yte,resolvefilter:Kte},Symbol.toStringTag,{value:"Module"})),B7t="RawCode",Nb="Literal",z7t="Property",U7t="Identifier",V7t="ArrayExpression",H7t="BinaryExpression",WLe="CallExpression",q7t="ConditionalExpression",W7t="LogicalExpression",G7t="MemberExpression",Y7t="ObjectExpression",K7t="UnaryExpression";function oh(e){this.type=e}oh.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=X7t(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function X7t(e){switch(e.type){case V7t:return e.elements;case H7t:case W7t:return[e.left,e.right];case WLe:return[e.callee].concat(e.arguments);case q7t:return[e.test,e.consequent,e.alternate];case G7t:return[e.object,e.property];case Y7t:return e.properties;case z7t:return[e.key,e.value];case K7t:return[e.argument];case U7t:case Nb:case B7t:default:return[]}}var Wp,Zt,rt,Za,Ei,Z4=1,gk=2,Ob=3,Sv=4,ej=5,g_=6,dl=7,yk=8,Q7t=9;Wp={};Wp[Z4]="Boolean";Wp[gk]="<end>";Wp[Ob]="Identifier";Wp[Sv]="Keyword";Wp[ej]="Null";Wp[g_]="Numeric";Wp[dl]="Punctuator";Wp[yk]="String";Wp[Q7t]="RegularExpression";var J7t="ArrayExpression",Z7t="BinaryExpression",eVt="CallExpression",tVt="ConditionalExpression",GLe="Identifier",nVt="Literal",rVt="LogicalExpression",iVt="MemberExpression",sVt="ObjectExpression",oVt="Property",aVt="UnaryExpression",Ko="Unexpected token %0",uVt="Unexpected number",lVt="Unexpected string",cVt="Unexpected identifier",dVt="Unexpected reserved word",fVt="Unexpected end of input",Fq="Invalid regular expression",uU="Invalid regular expression: missing /",YLe="Octal literals are not allowed in strict mode.",hVt="Duplicate data property in object literal not allowed in strict mode",ba="ILLEGAL",AI="Disabled.",pVt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),mVt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function tj(e,t){if(!e)throw new Error("ASSERT: "+t)}function Cm(e){return e>=48&&e<=57}function Xte(e){return"0123456789abcdefABCDEF".includes(e)}function o2(e){return"01234567".includes(e)}function gVt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function II(e){return e===10||e===13||e===8232||e===8233}function vk(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&pVt.test(String.fromCharCode(e))}function q$(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&mVt.test(String.fromCharCode(e))}const yVt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function KLe(){for(;rt<Za;){const e=Zt.charCodeAt(rt);if(gVt(e)||II(e))++rt;else break}}function jq(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)rt<Za&&Xte(Zt[rt])?(r=Zt[rt++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Zr({},Ko,ba);return String.fromCharCode(i)}function vVt(){var e,t,n,r;for(e=Zt[rt],t=0,e==="}"&&Zr({},Ko,ba);rt<Za&&(e=Zt[rt++],!!Xte(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Zr({},Ko,ba),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function XLe(){var e,t;for(e=Zt.charCodeAt(rt++),t=String.fromCharCode(e),e===92&&(Zt.charCodeAt(rt)!==117&&Zr({},Ko,ba),++rt,e=jq("u"),(!e||e==="\\"||!vk(e.charCodeAt(0)))&&Zr({},Ko,ba),t=e);rt<Za&&(e=Zt.charCodeAt(rt),!!q$(e));)++rt,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Zt.charCodeAt(rt)!==117&&Zr({},Ko,ba),++rt,e=jq("u"),(!e||e==="\\"||!q$(e.charCodeAt(0)))&&Zr({},Ko,ba),t+=e);return t}function bVt(){var e,t;for(e=rt++;rt<Za;){if(t=Zt.charCodeAt(rt),t===92)return rt=e,XLe();if(q$(t))++rt;else break}return Zt.slice(e,rt)}function _Vt(){var e,t,n;return e=rt,t=Zt.charCodeAt(rt)===92?XLe():bVt(),t.length===1?n=Ob:yVt.hasOwnProperty(t)?n=Sv:t==="null"?n=ej:t==="true"||t==="false"?n=Z4:n=Ob,{type:n,value:t,start:e,end:rt}}function lU(){var e=rt,t=Zt.charCodeAt(rt),n,r=Zt[rt],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++rt,{type:dl,value:String.fromCharCode(t),start:e,end:rt};default:if(n=Zt.charCodeAt(rt+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return rt+=2,{type:dl,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:rt};case 33:case 61:return rt+=2,Zt.charCodeAt(rt)===61&&++rt,{type:dl,value:Zt.slice(e,rt),start:e,end:rt}}}if(o=Zt.substr(rt,4),o===">>>=")return rt+=4,{type:dl,value:o,start:e,end:rt};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return rt+=3,{type:dl,value:s,start:e,end:rt};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return rt+=2,{type:dl,value:i,start:e,end:rt};if(i==="//"&&Zr({},Ko,ba),"<>=!+-*%&|^/".includes(r))return++rt,{type:dl,value:r,start:e,end:rt};Zr({},Ko,ba)}function wVt(e){let t="";for(;rt<Za&&Xte(Zt[rt]);)t+=Zt[rt++];return t.length===0&&Zr({},Ko,ba),vk(Zt.charCodeAt(rt))&&Zr({},Ko,ba),{type:g_,value:parseInt("0x"+t,16),start:e,end:rt}}function xVt(e){let t="0"+Zt[rt++];for(;rt<Za&&o2(Zt[rt]);)t+=Zt[rt++];return(vk(Zt.charCodeAt(rt))||Cm(Zt.charCodeAt(rt)))&&Zr({},Ko,ba),{type:g_,value:parseInt(t,8),octal:!0,start:e,end:rt}}function M0e(){var e,t,n;if(n=Zt[rt],tj(Cm(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=rt,e="",n!=="."){if(e=Zt[rt++],n=Zt[rt],e==="0"){if(n==="x"||n==="X")return++rt,wVt(t);if(o2(n))return xVt(t);n&&Cm(n.charCodeAt(0))&&Zr({},Ko,ba)}for(;Cm(Zt.charCodeAt(rt));)e+=Zt[rt++];n=Zt[rt]}if(n==="."){for(e+=Zt[rt++];Cm(Zt.charCodeAt(rt));)e+=Zt[rt++];n=Zt[rt]}if(n==="e"||n==="E")if(e+=Zt[rt++],n=Zt[rt],(n==="+"||n==="-")&&(e+=Zt[rt++]),Cm(Zt.charCodeAt(rt)))for(;Cm(Zt.charCodeAt(rt));)e+=Zt[rt++];else Zr({},Ko,ba);return vk(Zt.charCodeAt(rt))&&Zr({},Ko,ba),{type:g_,value:parseFloat(e),start:t,end:rt}}function EVt(){var e="",t,n,r,i,s=!1;for(t=Zt[rt],tj(t==="'"||t==='"',"String literal must starts with a quote"),n=rt,++rt;rt<Za;)if(r=Zt[rt++],r===t){t="";break}else if(r==="\\")if(r=Zt[rt++],!r||!II(r.charCodeAt(0)))switch(r){case"u":case"x":Zt[rt]==="{"?(++rt,e+=vVt()):e+=jq(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:o2(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),rt<Za&&o2(Zt[rt])&&(s=!0,i=i*8+"01234567".indexOf(Zt[rt++]),"0123".includes(r)&&rt<Za&&o2(Zt[rt])&&(i=i*8+"01234567".indexOf(Zt[rt++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Zt[rt]===`
`&&++rt;else{if(II(r.charCodeAt(0)))break;e+=r}return t!==""&&Zr({},Ko,ba),{type:yk,value:e,octal:s,start:n,end:rt}}function SVt(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Zr({},Fq)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Zr({},Fq)}try{return new RegExp(e,t)}catch{return null}}function TVt(){var e,t,n,r,i;for(e=Zt[rt],tj(e==="/","Regular expression literal must start with a slash"),t=Zt[rt++],n=!1,r=!1;rt<Za;)if(e=Zt[rt++],t+=e,e==="\\")e=Zt[rt++],II(e.charCodeAt(0))&&Zr({},uU),t+=e;else if(II(e.charCodeAt(0)))Zr({},uU);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Zr({},uU),i=t.substr(1,t.length-2),{value:i,literal:t}}function CVt(){var e,t,n;for(t="",n="";rt<Za&&(e=Zt[rt],!!q$(e.charCodeAt(0)));)++rt,e==="\\"&&rt<Za?Zr({},Ko,ba):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Zr({},Fq,n),{value:n,literal:t}}function AVt(){var e,t,n,r;return Ei=null,KLe(),e=rt,t=TVt(),n=CVt(),r=SVt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:rt}}function IVt(e){return e.type===Ob||e.type===Sv||e.type===Z4||e.type===ej}function QLe(){if(KLe(),rt>=Za)return{type:gk,start:rt,end:rt};const e=Zt.charCodeAt(rt);return vk(e)?_Vt():e===40||e===41||e===59?lU():e===39||e===34?EVt():e===46?Cm(Zt.charCodeAt(rt+1))?M0e():lU():Cm(e)?M0e():lU()}function ml(){const e=Ei;return rt=e.end,Ei=QLe(),rt=e.end,e}function JLe(){const e=rt;Ei=QLe(),rt=e}function RVt(e){const t=new oh(J7t);return t.elements=e,t}function $0e(e,t,n){const r=new oh(e==="||"||e==="&&"?rVt:Z7t);return r.operator=e,r.left=t,r.right=n,r}function kVt(e,t){const n=new oh(eVt);return n.callee=e,n.arguments=t,n}function PVt(e,t,n){const r=new oh(tVt);return r.test=e,r.consequent=t,r.alternate=n,r}function Qte(e){const t=new oh(GLe);return t.name=e,t}function xA(e){const t=new oh(nVt);return t.value=e.value,t.raw=Zt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function L0e(e,t,n){const r=new oh(iVt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function NVt(e){const t=new oh(sVt);return t.properties=e,t}function F0e(e,t,n){const r=new oh(oVt);return r.key=t,r.value=n,r.kind=e,r}function OVt(e,t){const n=new oh(aVt);return n.operator=e,n.argument=t,n.prefix=!0,n}function Zr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(tj(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=rt,n.description=i,n}function nj(e){e.type===gk&&Zr(e,fVt),e.type===g_&&Zr(e,uVt),e.type===yk&&Zr(e,lVt),e.type===Ob&&Zr(e,cVt),e.type===Sv&&Zr(e,dVt),Zr(e,Ko,e.value)}function eu(e){const t=ml();(t.type!==dl||t.value!==e)&&nj(t)}function Qi(e){return Ei.type===dl&&Ei.value===e}function cU(e){return Ei.type===Sv&&Ei.value===e}function DVt(){const e=[];for(rt=Ei.start,eu("[");!Qi("]");)Qi(",")?(ml(),e.push(null)):(e.push(Db()),Qi("]")||eu(","));return ml(),RVt(e)}function j0e(){rt=Ei.start;const e=ml();return e.type===yk||e.type===g_?(e.octal&&Zr(e,YLe),xA(e)):Qte(e.value)}function MVt(){var e,t,n,r;if(rt=Ei.start,e=Ei,e.type===Ob)return n=j0e(),eu(":"),r=Db(),F0e("init",n,r);if(e.type===gk||e.type===dl)nj(e);else return t=j0e(),eu(":"),r=Db(),F0e("init",t,r)}function $Vt(){var e=[],t,n,r,i={},s=String;for(rt=Ei.start,eu("{");!Qi("}");)t=MVt(),t.key.type===GLe?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Zr({},hVt):i[r]=!0,e.push(t),Qi("}")||eu(",");return eu("}"),NVt(e)}function LVt(){eu("(");const e=Jte();return eu(")"),e}const FVt={if:1};function jVt(){var e,t,n;if(Qi("("))return LVt();if(Qi("["))return DVt();if(Qi("{"))return $Vt();if(e=Ei.type,rt=Ei.start,e===Ob||FVt[Ei.value])n=Qte(ml().value);else if(e===yk||e===g_)Ei.octal&&Zr(Ei,YLe),n=xA(ml());else{if(e===Sv)throw new Error(AI);e===Z4?(t=ml(),t.value=t.value==="true",n=xA(t)):e===ej?(t=ml(),t.value=null,n=xA(t)):Qi("/")||Qi("/=")?(n=xA(AVt()),JLe()):nj(ml())}return n}function BVt(){const e=[];if(eu("("),!Qi(")"))for(;rt<Za&&(e.push(Db()),!Qi(")"));)eu(",");return eu(")"),e}function zVt(){rt=Ei.start;const e=ml();return IVt(e)||nj(e),Qte(e.value)}function UVt(){return eu("."),zVt()}function VVt(){eu("[");const e=Jte();return eu("]"),e}function HVt(){var e,t,n;for(e=jVt();;)if(Qi("."))n=UVt(),e=L0e(".",e,n);else if(Qi("("))t=BVt(),e=kVt(e,t);else if(Qi("["))n=VVt(),e=L0e("[",e,n);else break;return e}function B0e(){const e=HVt();if(Ei.type===dl&&(Qi("++")||Qi("--")))throw new Error(AI);return e}function nM(){var e,t;if(Ei.type!==dl&&Ei.type!==Sv)t=B0e();else{if(Qi("++")||Qi("--"))throw new Error(AI);if(Qi("+")||Qi("-")||Qi("~")||Qi("!"))e=ml(),t=nM(),t=OVt(e.value,t);else{if(cU("delete")||cU("void")||cU("typeof"))throw new Error(AI);t=B0e()}}return t}function z0e(e){let t=0;if(e.type!==dl&&e.type!==Sv)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function qVt(){var e,t,n,r,i,s,o,a,u,l;if(e=Ei,u=nM(),r=Ei,i=z0e(r),i===0)return u;for(r.prec=i,ml(),t=[e,Ei],o=nM(),s=[u,r,o];(i=z0e(Ei))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=$0e(a,u,o),s.push(n);r=ml(),r.prec=i,s.push(r),t.push(Ei),n=nM(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=$0e(s[l-1].value,s[l-2],n),l-=2;return n}function Db(){var e,t,n;return e=qVt(),Qi("?")&&(ml(),t=Db(),eu(":"),n=Db(),e=PVt(e,t,n)),e}function Jte(){const e=Db();if(Qi(","))throw new Error(AI);return e}function Zte(e){Zt=e,rt=0,Za=Zt.length,Ei=null,JLe();const t=Jte();if(Ei.type!==gk)throw new Error("Unexpect token after expression.");return t}var ZLe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function eFe(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&st("Missing arguments to clamp function."),o.length>3&&st("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&st("Missing arguments to if function."),o.length>3&&st("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function WVt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function tFe(e){e=e||{};const t=e.allowed?qf(e.allowed):{},n=e.forbidden?qf(e.forbidden):{},r=e.constants||ZLe,i=(e.functions||eFe)(d),s=e.globalvar,o=e.fieldvar,a=ir(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function d(p){if(jt(p))return p;const m=f[p.type];return m==null&&st("Unsupported type: "+p.type),m(p)}const f={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:cn(n,m)?st("Illegal identifier: "+m):cn(r,m)?r[m]:cn(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,y=d(p.object);m&&(c+=1);const v=d(p.property);return y===o&&(l[WVt(v)]=1),m&&(c-=1),y+(m?"."+v:"["+v+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&st("Illegal callee type: "+p.callee.type);const m=p.callee.name,y=p.arguments,v=cn(i,m)&&i[m];return v||st("Unrecognized function: "+m),ir(v)?v(y):v+"("+y.map(d).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(d).join(",")+"]",BinaryExpression:p=>"("+d(p.left)+" "+p.operator+" "+d(p.right)+")",UnaryExpression:p=>"("+p.operator+d(p.argument)+")",ConditionalExpression:p=>"("+d(p.test)+"?"+d(p.consequent)+":"+d(p.alternate)+")",LogicalExpression:p=>"("+d(p.left)+p.operator+d(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(d).join(",")+"}",Property:p=>{c+=1;const m=d(p.key);return c-=1,m+":"+d(p.value)}};function h(p){const m={code:d(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const U0e=Symbol("vega_selection_getter");function nFe(e){return(!e.getter||!e.getter[U0e])&&(e.getter=Cd(e.field),e.getter[U0e]=!0),e.getter}const ene="intersect",V0e="union",GVt="vlMulti",YVt="vlPoint",H0e="or",KVt="and",Lh="_vgsid_",RI=Cd(Lh),XVt="E",QVt="R",JVt="R-E",ZVt="R-LE",eHt="R-RE",W$="index:unit";function q0e(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=nFe(a)(e),fy(o)&&(o=Ya(o)),fy(r[s])&&(r[s]=Ya(r[s])),ut(r[s])&&fy(r[s][0])&&(r[s]=r[s].map(Ya)),a.type===XVt){if(ut(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===QVt){if(!ax(o,r[s]))return!1}else if(a.type===eHt){if(!ax(o,r[s],!0,!1))return!1}else if(a.type===JVt){if(!ax(o,r[s],!1,!1))return!1}else if(a.type===ZVt&&!ax(o,r[s],!1,!0))return!1;return!0}function tHt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[W$]&&r[W$].value:void 0,o=n===ene,a=i.length,u=0,l,c,d,f,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},d=c[f=l.unit]||0,d===-1)continue;if(h=q0e(t,l),c[f]=h?-1:++d,h&&s.size===1)return!0;if(!h&&d===s.get(f).count)return!1}else if(h=q0e(t,l),o^h)return h;return a&&o}const rFe=gS(RI),nHt=rFe.left,rHt=rFe.right;function iHt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[W$]&&r[W$].value:void 0,o=n===ene,a=RI(t),u=nHt(i,a);if(u===i.length||RI(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(rHt(i,a)-u<s.size)return!1}return!0}function sHt(e,t){return e.map(n=>rr(t.fields?{values:t.fields.map(r=>nFe(r)(n.datum))}:{[Lh]:RI(n.datum)},t))}function oHt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,d,f,h,p,m,y,v,w,x=s.length,S=0,E,T;S<x;++S)if(l=s[S],f=l.unit,c=l.fields,d=l.values,c&&d){for(E=0,T=c.length;E<T;++E)h=c[E],m=o[h.field]||(o[h.field]={}),y=m[f]||(m[f]=[]),u[h.field]=v=h.type.charAt(0),w=dU[`${v}_union`],m[f]=w(y,Ft(d[E]));n&&(y=a[f]||(a[f]=[]),y.push(Ft(d).reduce((A,I,k)=>(A[c[k].field]=I,A),{})))}else h=Lh,p=RI(l),m=o[h]||(o[h]={}),y=m[f]||(m[f]=[]),y.push(p),n&&(y=a[f]||(a[f]=[]),y.push({[Lh]:p}));if(t=t||V0e,o[Lh]?o[Lh]=dU[`${Lh}_${t}`](...Object.values(o[Lh])):Object.keys(o).forEach(A=>{o[A]=Object.keys(o[A]).map(I=>o[A][I]).reduce((I,k)=>I===void 0?k:dU[`${u[A]}_${t}`](I,k))}),s=Object.keys(a),n&&s.length){const A=r?YVt:GVt;o[A]=t===V0e?{[H0e]:s.reduce((I,k)=>(I.push(...a[k]),I),[])}:{[KVt]:s.map(I=>({[H0e]:a[I]}))}}return o}var dU={[`${Lh}_union`]:Ict,[`${Lh}_intersect`]:Cct,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=Ya(t[0]),r=Ya(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Ya(t[0]),r=Ya(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const aHt=":",uHt="@";function tne(e,t,n,r){t[0].type!==Nb&&st("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Dr(t).value,o="unit",a=uHt+o,u=aHt+i;s===ene&&!cn(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),cn(r,u)||(r[u]=n.getData(i).tuplesRef())}function iFe(e){const t=this.context.data[e];return t?t.values.value:[]}function lHt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function cHt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Ad).insert(t)),1}function dHt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const bk=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},fHt=bk("format"),sFe=bk("timeFormat"),hHt=bk("utcFormat"),pHt=bk("timeParse"),mHt=bk("utcParse"),LO=new Date(2e3,0,1);function rj(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(LO.setYear(2e3),LO.setMonth(e),LO.setDate(t),sFe.call(this,LO,n))}function gHt(e){return rj.call(this,e,1,"%B")}function yHt(e){return rj.call(this,e,1,"%b")}function vHt(e){return rj.call(this,0,2+e,"%A")}function bHt(e){return rj.call(this,0,2+e,"%a")}const _Ht=":",wHt="@",Bq="%",oFe="$";function nne(e,t,n,r){t[0].type!==Nb&&st("First argument to data functions must be a string literal.");const i=t[0].value,s=_Ht+i;if(!cn(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function xHt(e,t,n,r){t[0].type!==Nb&&st("First argument to indata must be a string literal."),t[1].type!==Nb&&st("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=wHt+s;cn(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Nu(e,t,n,r){if(t[0].type===Nb)W0e(n,r,t[0].value);else for(e in n.scales)W0e(n,r,e)}function W0e(e,t,n){const r=Bq+n;if(!cn(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Gp(e,t){if(ir(e))return e;if(jt(e)){const n=t.scales[e];return n&&Y5t(n.value)?n.value:void 0}}function EHt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Nu,n._range=Nu,n._scale=Nu;const r=i=>"_["+(i.type===Nb?Ct(Bq+i.value):Ct(Bq)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function rne(e,t){return function(n,r,i){if(n){const s=Gp(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const SHt=rne("area",Amt),THt=rne("bounds",Pmt),CHt=rne("centroid",Lmt);function AHt(e,t){const n=Gp(e,(t||this).context);return n&&n.scale()}function IHt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function ine(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function RHt(){return ine(this.context.dataflow,"warn",arguments)}function kHt(){return ine(this.context.dataflow,"info",arguments)}function PHt(){return ine(this.context.dataflow,"debug",arguments)}function fU(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function zq(e){const t=Sy(e),n=fU(t.r),r=fU(t.g),i=fU(t.b);return .2126*n+.7152*r+.0722*i}function NHt(e,t){const n=zq(e),r=zq(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function OHt(){const e=[].slice.call(arguments);return e.unshift({}),rr(...e)}function aFe(e,t){return e===t||e!==e&&t!==t?!0:ut(e)?ut(t)&&e.length===t.length?DHt(e,t):!1:$t(e)&&$t(t)?uFe(e,t):!1}function DHt(e,t){for(let n=0,r=e.length;n<r;++n)if(!aFe(e[n],t[n]))return!1;return!0}function uFe(e,t){for(const n in e)if(!aFe(e[n],t[n]))return!1;return!0}function G0e(e){return t=>uFe(e,t)}function MHt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,d,f;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(d=n===!0?Ad:ut(n)||A4(n)?n:G0e(n),c.remove(d)),t&&c.insert(t),r&&(d=G0e(r),u.value.some(d)?c.remove(d):c.insert(r)),i)for(f in s)c.modify(i,f,s[f]);return 1}function $Ht(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function LHt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Y0e={};function FHt(e,t){const n=Y0e[t]||(Y0e[t]=Cd(t));return ut(e)?e.map(n):n(e)}function sne(e){return ut(e)||ArrayBuffer.isView(e)?e:null}function one(e){return sne(e)||(jt(e)?e:null)}function jHt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return sne(e).join(...n)}function BHt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return one(e).indexOf(...n)}function zHt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return one(e).lastIndexOf(...n)}function UHt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return one(e).slice(...n)}function VHt(e,t,n){return ir(n)&&st("Function argument passed to replace."),String(e).replace(t,n)}function HHt(e){return sne(e).slice().reverse()}function qHt(e,t,n){return kee(e||0,t||0,n||0)}function WHt(e,t){const n=Gp(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function GHt(e,t){const n=Gp(e,(t||this).context);return n?n.copy():void 0}function YHt(e,t){const n=Gp(e,(t||this).context);return n?n.domain():[]}function KHt(e,t,n){const r=Gp(e,(n||this).context);return r?ut(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function XHt(e,t){const n=Gp(e,(t||this).context);return n&&n.range?n.range():[]}function QHt(e,t,n){const r=Gp(e,(n||this).context);return r?r(t):void 0}function JHt(e,t,n,r,i){e=Gp(e,(i||this).context);const s=J3e(t,n);let o=e.domain(),a=o[0],u=Dr(o),l=ru;return u-a?l=B3e(e,a,u):e=(e.interpolator?ri("sequential")().interpolator(e.interpolator()):ri("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Dr(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function ZHt(e,t,n){const r=Gp(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function eqt(e){let t=null;return function(n){return n?EI(n,t=t||OE(e)):e}}const lFe=e=>e.data;function cFe(e,t){const n=iFe.call(t,e);return n.root&&n.root.lookup||{}}function tqt(e,t,n){const r=cFe(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(lFe):void 0}function nqt(e,t){const n=cFe(e,this)[t];return n?n.ancestors().map(lFe):void 0}const dFe=()=>typeof window<"u"&&window||null;function rqt(){const e=dFe();return e?e.screen:{}}function iqt(){const e=dFe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function sqt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function fFe(e,t,n){if(!e)return[];const[r,i]=e,s=new uo().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return K$e(o,s,oqt(t))}function oqt(e){let t=null;if(e){const n=Ft(e.marktype),r=Ft(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function aqt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Ft(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function uqt(e){return Ft(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function lqt(e,t,n){const{x:r,y:i,mark:s}=n,o=new uo().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),fFe([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>cqt(u.x,u.y,t))}function cqt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const kI={random(){return Rd()},cumulativeNormal:N4,cumulativeLogNormal:XZ,cumulativeUniform:eee,densityNormal:qZ,densityLogNormal:KZ,densityUniform:ZZ,quantileNormal:O4,quantileLogNormal:QZ,quantileUniform:tee,sampleNormal:P4,sampleLogNormal:YZ,sampleUniform:JZ,isArray:ut,isBoolean:Ev,isDate:fy,isDefined(e){return e!==void 0},isNumber:Gr,isObject:$t,isRegExp:XDe,isString:jt,isTuple:A4,isValid(e){return e!=null&&e===e},toBoolean:RZ,toDate(e){return kZ(e)},toNumber:Ya,toString:PZ,indexof:BHt,join:jHt,lastindexof:zHt,replace:VHt,reverse:HHt,slice:UHt,flush:YDe,lerp:QDe,merge:OHt,pad:eMe,peek:Dr,pluck:FHt,span:ZR,inrange:ax,truncate:tMe,rgb:Sy,lab:zM,hcl:UM,hsl:R2,luminance:zq,contrast:NHt,sequence:cc,format:fHt,utcFormat:hHt,utcParse:mHt,utcOffset:mMe,utcSequence:vMe,timeFormat:sFe,timeParse:pHt,timeOffset:pMe,timeSequence:yMe,timeUnitSpecifier:rMe,monthFormat:gHt,monthAbbrevFormat:yHt,dayFormat:vHt,dayAbbrevFormat:bHt,quarter:HDe,utcquarter:qDe,week:sMe,utcweek:uMe,dayofyear:iMe,utcdayofyear:aMe,warn:RHt,info:kHt,debug:PHt,extent(e){return Tp(e)},inScope:IHt,intersect:fFe,clampRange:WDe,pinchDistance:$Ht,pinchAngle:LHt,screen:rqt,containerSize:sqt,windowSize:iqt,bandspace:qHt,setdata:cHt,pathShape:eqt,panLinear:BDe,panLog:zDe,panPow:UDe,panSymlog:VDe,zoomLinear:EZ,zoomLog:SZ,zoomPow:T$,zoomSymlog:TZ,encode:dHt,modify:MHt,lassoAppend:aqt,lassoPath:uqt,intersectLasso:lqt},dqt=["view","item","group","xy","x","y"],fqt="event.vega.",hFe="this.",ane={},pFe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Ct(oFe+e)}]`,functions:hqt,constants:ZLe,visitors:ane},Uq=tFe(pFe);function hqt(e){const t=eFe(e);dqt.forEach(n=>t[n]=fqt+n);for(const n in kI)t[n]=hFe+n;return rr(t,EHt(e,kI,ane)),t}function Gs(e,t,n){return arguments.length===1?kI[e]:(kI[e]=t,n&&(ane[e]=n),Uq&&(Uq.functions[e]=hFe+e),this)}Gs("bandwidth",WHt,Nu);Gs("copy",GHt,Nu);Gs("domain",YHt,Nu);Gs("range",XHt,Nu);Gs("invert",KHt,Nu);Gs("scale",QHt,Nu);Gs("gradient",JHt,Nu);Gs("geoArea",SHt,Nu);Gs("geoBounds",THt,Nu);Gs("geoCentroid",CHt,Nu);Gs("geoShape",ZHt,Nu);Gs("geoScale",AHt,Nu);Gs("indata",lHt,xHt);Gs("data",iFe,nne);Gs("treePath",tqt,nne);Gs("treeAncestors",nqt,nne);Gs("vlSelectionTest",tHt,tne);Gs("vlSelectionIdTest",iHt,tne);Gs("vlSelectionResolve",oHt,tne);Gs("vlSelectionTuples",sHt);function Ap(e,t){const n={};let r;try{e=jt(e)?e:Ct(e)+"",r=Zte(e)}catch{st("Expression parse error: "+e)}r.visit(s=>{if(s.type!==WLe)return;const o=s.callee.name,a=pFe.visitors[o];a&&a(o,s.arguments,t,n)});const i=Uq(r);return i.globals.forEach(s=>{const o=oFe+s;!cn(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:rr({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function pqt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const mqt=qf(["rule"]),K0e=qf(["group","image","rect"]);function gqt(e,t){let n="";return mqt[t]||(e.x2&&(e.x?(K0e[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(K0e[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function une(e){return(e+"").toLowerCase()}function yqt(e){return une(e)==="operator"}function vqt(e){return une(e)==="collect"}function wC(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function bqt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var _qt={operator:(e,t)=>wC(e,["_"],t.code),parameter:(e,t)=>wC(e,["datum","_"],t.code),event:(e,t)=>wC(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return wC(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+Ct(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=gqt(r,n),i+="return m;",wC(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(Ct).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),bqt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function wqt(e){const t=this;yqt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function xqt(e){const t=this;if(e.params){const n=t.get(e.id);n||st("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function Eqt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=ut(i)?i.map(s=>X0e(s,n,t)):X0e(i,n,t)}return t}function X0e(e,t,n){if(!e||!$t(e))return e;for(let r=0,i=Q0e.length,s;r<i;++r)if(s=Q0e[r],cn(e,s.key))return s.parse(e,t,n);return e}var Q0e=[{key:"$ref",parse:Sqt},{key:"$key",parse:Cqt},{key:"$expr",parse:Tqt},{key:"$field",parse:Aqt},{key:"$encode",parse:Rqt},{key:"$compare",parse:Iqt},{key:"$context",parse:kqt},{key:"$subflow",parse:Pqt},{key:"$tupleid",parse:Nqt}];function Sqt(e,t){return t.get(e.$ref)||st("Operator not defined: "+e.$ref)}function Tqt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Ul(t.parameterExpression(e.$expr),e.$fields))}function Cqt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=IZ(e.$key,e.$flat,t.expr.codegen))}function Aqt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Cd(e.$field,e.$name,t.expr.codegen))}function Iqt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Ft(e.$compare).map(i=>i&&i.$tupleid?un:i);return t.fn[n]||(t.fn[n]=CZ(r,e.$order,t.expr.codegen))}function Rqt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=Ul(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function kqt(e,t){return t}function Pqt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function Nqt(){return un}function Oqt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&st("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function Dqt(e){var t=this,n=$t(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||st("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const Mqt={skip:!0};function $qt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function Lqt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],Mqt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(Ad).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function mFe(e,t,n,r){return new gFe(e,t,n,r)}function gFe(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||_qt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function J0e(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}gFe.prototype=J0e.prototype={fork(){const e=new J0e(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),vqt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[une(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:pqt,parseOperator:wqt,parseOperatorParameters:xqt,parseParameters:Eqt,parseStream:Oqt,parseUpdate:Dqt,getState:$qt,setState:Lqt};function Fqt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),yFe(t,e.description()))}function yFe(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function jqt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const hU="default";function Bqt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:hU,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?jt(i)?i:i.user:hU,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return jt(r)||(i=r.item,r=r.user),Vq(e,r&&r!==hU?r:i||r),i},{cursor:t})}function Vq(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function G$(e,t){var n=e._runtime.data;return cn(n,t)||st("Unrecognized data set: "+t),n[t]}function zqt(e,t){return arguments.length<2?G$(this,e).values.value:ij.call(this,e,p_().remove(Ad).insert(t))}function ij(e,t){FMe(t)||st("Second argument to changes must be a changeset.");const n=G$(this,e);return n.modified=!0,this.pulse(n.input,t)}function Uqt(e,t){return ij.call(this,e,p_().insert(t))}function Vqt(e,t){return ij.call(this,e,p_().remove(t))}function vFe(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function bFe(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function sj(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Hqt(e){var t=sj(e),n=vFe(e),r=bFe(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function qqt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=sj(e),o=t.changedTouches?t.changedTouches[0]:t,s=X4(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=Wqt(e,n,s),t}function Wqt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;jt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:iu(e),item:iu(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const Z0e="view",Gqt="timer",Yqt="window",Kqt={trap:!1};function Xqt(e){const t=rr({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{ut(r[s])&&(r[s]=qf(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function _Fe(e,t,n,r){e._eventListeners.push({type:n,sources:Ft(t),handler:r})}function Qqt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function FO(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||$t(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function Jqt(e,t,n){var r=this,i=new k4(n),s=function(l,c){r.runAsync(null,()=>{e===Z0e&&Qqt(r,t)&&l.preventDefault(),i.receive(qqt(r,l,c))})},o;if(e===Gqt)FO(r,"timer",t)&&r.timer(s,t);else if(e===Z0e)FO(r,"view",t)&&r.addEventListener(t,s,Kqt);else if(e===Yqt?FO(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&FO(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);_Fe(r,o,t,s)}return i}function eye(e){return e.item}function tye(e){return e.item.mark.source}function nye(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Zqt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",eye),tye,nye(e)),this.on(this.events("view","pointerout",eye),tye,nye(t)),this}function eWt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function yc(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const tWt="vega-bind",nWt="vega-bind-name",rWt="vega-bind-radio";function iWt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=AZ(r.debounce,i.update))),(r.input==null&&r.element?sWt:aWt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function sWt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),_Fe(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(oWt(i))}}function oWt(e){return typeof Event<"u"?new Event(e):{type:e}}function aWt(e,t,n,r){const i=r.signal(n.signal),s=yc("div",{class:tWt}),o=n.input==="radio"?s:s.appendChild(yc("label"));o.appendChild(yc("span",{class:nWt},n.name||n.signal)),t.appendChild(s);let a=uWt;switch(n.input){case"checkbox":a=lWt;break;case"select":a=cWt;break;case"radio":a=dWt;break;case"range":a=fWt;break}a(e,o,n,i)}function uWt(e,t,n,r){const i=yc("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function lWt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=yc("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function cWt(e,t,n,r){const i=yc("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};Y$(o,r)&&(u.selected=!0),i.appendChild(yc("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(Y$(n.options[a],o)){i.selectedIndex=a;return}}}function dWt(e,t,n,r){const i=yc("span",{class:rWt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};Y$(o,r)&&(u.checked=!0);const l=yc("input",u);l.addEventListener("change",()=>e.update(o));const c=yc("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)Y$(a[l].value,o)&&(a[l].checked=!0)}}function fWt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||Ey(s,i,100),a=yc("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=yc("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function Y$(e,t){return e===t||e+""==t+""}function wFe(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,vFe(e),bFe(e),sj(e),i,s).background(e.background())}function lne(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function hWt(e,t,n,r){const i=new r(e.loader(),lne(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,sj(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function pWt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=Q4(r);e=n._el=e?pU(n,e,!0):null,Fqt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||mk,a=e?s.renderer:s.headless;return n._renderer=a?wFe(n,n._renderer,e,a):null,n._handler=hWt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=pU(n,t,!0):e.appendChild(yc("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=pU(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{iWt(n,u.element||t,u)})),n}function pU(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const xC=e=>+e||0,mWt=e=>({top:e,bottom:e,left:e,right:e});function rye(e){return $t(e)?{top:xC(e.top),bottom:xC(e.bottom),left:xC(e.left),right:xC(e.right)}:mWt(xC(e))}async function cne(e,t,n,r){const i=Q4(t),s=i&&i.headless;return s||st("Unrecognized renderer type: "+t),await e.runAsync(),wFe(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function gWt(e,t){e!==X0.Canvas&&e!==X0.SVG&&e!==X0.PNG&&st("Unrecognized image type: "+e);const n=await cne(this,e,t);return e===X0.SVG?yWt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function yWt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function vWt(e,t){return(await cne(this,X0.Canvas,e,t)).canvas()}async function bWt(e){return(await cne(this,X0.SVG,e)).svg()}function _Wt(e,t,n){return mFe(e,RE,kI,n).parse(t)}function wWt(e){var t=this._runtime.scales;return cn(t,e)||st("Unrecognized scale or projection: "+e),t[e].value}var xFe="width",EFe="height",dne="padding",iye={skip:!0};function SFe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===dne?r.left+r.right:0)}function TFe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===dne?r.top+r.bottom:0)}function xWt(e){var t=e._signals,n=t[xFe],r=t[EFe],i=t[dne];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=SFe(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=TFe(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function EWt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(xFe,n,iye),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(EFe,r,iye),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function SWt(e){return this._runtime.getState(e||{data:TWt,signals:CWt,recurse:!0})}function TWt(e,t){return t.modified&&ut(t.input.value)&&!e.startsWith("_:vega:_")}function CWt(e,t){return!(e==="parent"||t instanceof RE.proxy)}function AWt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function IWt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Jft(n,t))}function RWt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",kWt(r))}function kWt(e){return e==null?"":ut(e)?CFe(e):$t(e)&&!fy(e)?PWt(e):e+""}function PWt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(ut(n)?CFe(n):AFe(n))}).join(`
`)}function CFe(e){return"["+e.map(AFe).join(", ")+"]"}function AFe(e){return ut(e)?"[]":$t(e)&&!fy(e)?"{}":e}function NWt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function IFe(e,t){const n=this;if(t=t||{},Dx.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=rr({},e.locale,t.locale);n.locale(IMe(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||X0.Canvas,n._scenegraph=new x$e;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||RWt,n._redraw=!0,n._handler=new mk().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Xqt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=_Wt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:rr({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=SFe(n,n._width),n._viewHeight=TFe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,xWt(n),jqt(n),Bqt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function jO(e,t){return cn(e._signals,t)?e._signals[t]:st("Unrecognized signal name: "+Ct(t))}function RFe(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function sye(e,t,n,r){let i=RFe(n,r);return i||(i=lne(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function oye(e,t,n){const r=RFe(t,n);return r&&t._targets.remove(r),e}kt(IFe,Dx,{async evaluate(e,t,n){if(await Dx.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Hqt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&VD(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&yFe(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=jO(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",rye(e)):rye(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(Q4(e)||st("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Dx.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(jO(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:EWt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=lne(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return sye(this,e,jO(this,e),t)},removeSignalListener(e,t){return oye(this,jO(this,e),t)},addDataListener(e,t){return sye(this,e,G$(this,e).values,t)},removeDataListener(e,t){return oye(this,G$(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=Vq(this,null);this._globalCursor=!!e,t&&Vq(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:IWt,events:Jqt,finalize:eWt,hover:Zqt,data:zqt,change:ij,insert:Uqt,remove:Vqt,scale:wWt,initialize:pWt,toImageURL:gWt,toCanvas:vWt,toSVG:bWt,getState:SWt,setState:AWt,_watchPixelRatio:NWt});const OWt="view",K$="[",X$="]",kFe="{",PFe="}",DWt=":",NFe=",",MWt="@",$Wt=">",LWt=/[[\]{}]/,FWt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let OFe,DFe;function Tv(e,t,n){return OFe=t||OWt,DFe=n||FWt,MFe(e.trim()).map(Hq)}function jWt(e){return DFe[e]}function a2(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function MFe(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=a2(e,i,NFe,K$+kFe,X$+PFe),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function Hq(e){return e[0]==="["?BWt(e):zWt(e)}function BWt(e){const t=e.length;let n=1,r;if(n=a2(e,n,X$,K$,X$),n===t)throw"Empty between selector: "+e;if(r=MFe(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==$Wt)throw"Expected '>' after between selector: "+e;r=r.map(Hq);const i=Hq(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function zWt(e){const t={source:OFe},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===PFe){if(a=e.lastIndexOf(kFe),a>=0){try{r=UWt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===MWt&&(i=++a),u=a2(e,a,DWt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=a2(e,a,K$),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=a2(e,a,X$),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==K$)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||LWt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):jWt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function UWt(e){const t=e.split(NFe);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function VWt(e){return $t(e)?e:{type:e||"pad"}}const EC=e=>+e||0,HWt=e=>({top:e,bottom:e,left:e,right:e});function qWt(e){return $t(e)?e.signal?e:{top:EC(e.top),bottom:EC(e.bottom),left:EC(e.left),right:EC(e.right)}:HWt(EC(e))}const Xo=e=>$t(e)&&!ut(e)?rr({},e):{value:e};function aye(e,t,n,r){return n!=null?($t(n)&&!ut(n)||ut(n)&&n.length&&$t(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Ca(e,t,n){for(const r in t)aye(e,r,t[r]);for(const r in n)aye(e,r,n[r],"update")}function QS(e,t,n){for(const r in t)n&&cn(n,r)||(e[r]=rr(e[r]||{},t[r]));return e}function Kw(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const fne="mark",hne="frame",pne="scope",WWt="axis",GWt="axis-domain",YWt="axis-grid",KWt="axis-label",XWt="axis-tick",QWt="axis-title",JWt="legend",ZWt="legend-band",eGt="legend-entry",tGt="legend-gradient",$Fe="legend-label",nGt="legend-symbol",rGt="legend-title",iGt="title",sGt="title-text",oGt="title-subtitle";function aGt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!Kw(u,e)&&mU(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===hne?i.group:n===fne?rr({},i.mark,i[t]):null;for(u in c)l=Kw(u,e)||(u==="fill"||u==="stroke")&&(Kw("fill",e)||Kw("stroke",e)),l||mU(s,u,c[u]);Ft(r).forEach(d=>{const f=i.style&&i.style[d];for(const h in f)Kw(h,e)||mU(s,h,f[h])}),e=rr({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=rr(o,e.enter),a&&(e.update=rr(a,e.update)),e}function mU(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const LFe=e=>jt(e)?Ct(e):e.signal?`(${e.signal})`:FFe(e);function oj(e){if(e.gradient!=null)return lGt(e);let t=e.signal?`(${e.signal})`:e.color?uGt(e.color):e.field!=null?FFe(e.field):e.value!==void 0?Ct(e.value):void 0;return e.scale!=null&&(t=cGt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${rM(e.exponent)})`),e.mult!=null&&(t+=`*${rM(e.mult)}`),e.offset!=null&&(t+=`+${rM(e.offset)}`),e.round&&(t=`round(${t})`),t}const BO=(e,t,n,r)=>`(${e}(${[t,n,r].map(oj).join(",")})+'')`;function uGt(e){return e.c?BO("hcl",e.h,e.c,e.l):e.h||e.s?BO("hsl",e.h,e.s,e.l):e.l||e.a?BO("lab",e.l,e.a,e.b):e.r||e.g||e.b?BO("rgb",e.r,e.g,e.b):null}function lGt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Ct(n));for(;t.length&&Dr(t)==null;)t.pop();return t.unshift(LFe(e.gradient)),`gradient(${t.join(",")})`}function rM(e){return $t(e)?"("+oj(e)+")":e}function FFe(e){return jFe($t(e)?e:{datum:e})}function jFe(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):st("Invalid field reference: "+Ct(e));return e.signal||(r=jt(r)?Hp(r).map(Ct).join("]["):jFe(r)),t+"["+r+"]"}function cGt(e,t){const n=LFe(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+rM(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function dGt(e){let t="";return e.forEach(n=>{const r=oj(n);t+=n.test?`(${n.test})?${r}:`:r}),Dr(t)===":"&&(t+="null"),t}function BFe(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=aGt(e,t,n,r,i.config);for(const a in e)o[a]=fGt(e[a],t,s,i);return s}function fGt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=pGt(hGt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function hGt(e){return ut(e)?dGt(e):oj(e)}function pGt(e,t,n,r){const i=Ap(e,t);return i.$fields.forEach(s=>r[s]=1),rr(n,i.$params),i.$expr}const mGt="outer",gGt=["value","update","init","react","bind"];function uye(e,t){st(e+' for "outer" push: '+Ct(t))}function zFe(e,t){const n=e.name;if(e.push===mGt)t.signals[n]||uye("No prior signal definition",n),gGt.forEach(r=>{e[r]!==void 0&&uye("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function qq(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function aj(e,t,n,r){return new qq(e,t,n,r)}function Q$(e,t){return aj("operator",e,t)}function an(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function PI(e,t){return t?{$field:e,$name:t}:{$field:e}}const Wq=PI("key");function lye(e,t){return{$compare:e,$order:t}}function yGt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const vGt="ascending",bGt="descending";function _Gt(e){return $t(e)?(e.order===bGt?"-":"+")+uj(e.op,e.field):""}function uj(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const mne="scope",Gq="view";function No(e){return e&&e.signal}function wGt(e){return e&&e.expr}function iM(e){if(No(e))return!0;if($t(e)){for(const t in e)if(iM(e[t]))return!0}return!1}function cf(e,t){return e??t}function rb(e){return e&&e.signal||e}const cye="timer";function NI(e,t){return(e.merge?EGt:e.stream?SGt:e.type?TGt:st("Invalid stream specification: "+Ct(e)))(e,t)}function xGt(e){return e===mne?Gq:e||Gq}function EGt(e,t){const n=e.merge.map(i=>NI(i,t)),r=gne({merge:n},e,t);return t.addStream(r).id}function SGt(e,t){const n=NI(e.stream,t),r=gne({stream:n},e,t);return t.addStream(r).id}function TGt(e,t){let n;e.type===cye?(n=t.event(cye,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(xGt(e.source),e.type);const r=gne({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function gne(e,t,n){let r=t.between;return r&&(r.length!==2&&st('Stream "between" parameter must have 2 entries: '+Ct(t)),e.between=[NI(r[0],n),NI(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(CGt(t.marktype,t.markname,t.markrole)),t.source===mne&&r.push("inScope(event.item)"),r.length&&(e.filter=Ap("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function CGt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const AGt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function IGt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||st("Signal update missing events specification."),jt(s)&&(s=Tv(s,t.isSubscope()?mne:Gq)),s=Ft(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[kGt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&st("Signal encode and update are mutually exclusive."),o="encode(item(),"+Ct(r)+")"),i.update=jt(o)?Ap(o,t):o.expr!=null?Ap(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:AGt,$params:{$value:t.signalRef(o.signal)}}:st("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(rr(RGt(u,t),i)))}function RGt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):NI(e,t)}}function kGt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function PGt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?st("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Ap(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>IGt(i,t,n.id))}const Ni=e=>(t,n,r)=>aj(e,n,t||void 0,r),UFe=Ni("aggregate"),NGt=Ni("axisticks"),VFe=Ni("bound"),ah=Ni("collect"),dye=Ni("compare"),OGt=Ni("datajoin"),HFe=Ni("encode"),DGt=Ni("expression"),MGt=Ni("facet"),$Gt=Ni("field"),LGt=Ni("key"),FGt=Ni("legendentries"),jGt=Ni("load"),BGt=Ni("mark"),zGt=Ni("multiextent"),UGt=Ni("multivalues"),VGt=Ni("overlap"),HGt=Ni("params"),qFe=Ni("prefacet"),qGt=Ni("projection"),WGt=Ni("proxy"),GGt=Ni("relay"),WFe=Ni("render"),YGt=Ni("scale"),y_=Ni("sieve"),KGt=Ni("sortitems"),GFe=Ni("viewlayout"),XGt=Ni("values");let QGt=0;const YFe={min:"min",max:"max",count:"sum"};function JGt(e,t){const n=e.type||"linear";D3e(n)||st("Unrecognized scale type: "+Ct(n)),t.addScale(e.name,{type:n,domain:void 0})}function ZGt(e,t){const n=t.getScale(e.name).params;let r;n.domain=KFe(e.domain,e,t),e.range!=null&&(n.range=QFe(e,t,n)),e.interpolate!=null&&lYt(e.interpolate,n),e.nice!=null&&(n.nice=uYt(e.nice,t)),e.bins!=null&&(n.bins=aYt(e.bins,t));for(r in e)cn(n,r)||r==="name"||(n[r]=gd(e[r],t))}function gd(e,t){return $t(e)?e.signal?t.signalRef(e.signal):st("Unsupported object: "+Ct(e)):e}function sM(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>gd(n,t))}function lj(e){st("Can not find data set: "+Ct(e))}function KFe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&st("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(ut(e)?eYt:e.fields?nYt:tYt)(e,t,n)}function eYt(e,t,n){return e.map(r=>gd(r,n))}function tYt(e,t,n){const r=n.getData(e.data);return r||lj(e.data),NE(t.type)?r.valuesRef(n,e.field,XFe(e.sort,!1)):L3e(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function nYt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=jt(o)?{data:r,field:o}:ut(o)||o.signal?rYt(o,n):o,s.push(o),s),[]);return(NE(t.type)?iYt:L3e(t.type)?sYt:oYt)(e,n,i)}function rYt(e,t){const n="_:vega:_"+QGt++,r=ah({});if(ut(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+Ct(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,y_({})]),{data:n,field:"data"}}function iYt(e,t,n){const r=XFe(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||lj(l.data),c.countsRef(t,l.field,r)}),a={groupby:Wq,pulse:o};r&&(i=r.op||"count",s=r.field?uj(i,r.field):"count",a.ops=[YFe[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(UFe(a));const u=t.add(ah({pulse:an(i)}));return s=t.add(XGt({field:Wq,sort:t.sortRef(r),pulse:an(u)})),an(s)}function XFe(e,t){return e&&(!e.field&&!e.op?$t(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?st("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!YFe[e.op]&&st("Multiple domain scales can not be sorted using "+e.op)),e}function sYt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||lj(i.data),s.domainRef(t,i.field)});return an(t.add(UGt({values:r})))}function oYt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||lj(i.data),s.extentRef(t,i.field)});return an(t.add(zGt({extents:r})))}function aYt(e,t){return e.signal||ut(e)?sM(e,t):t.objectProperty(e)}function uYt(e,t){return e.signal?t.signalRef(e.signal):$t(e)?{interval:gd(e.interval),step:gd(e.step)}:gd(e)}function lYt(e,t){t.interpolate=gd(e.type||e),e.gamma!=null&&(t.interpolateGamma=gd(e.gamma))}function QFe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(jt(i)){if(r&&cn(r,i))return e=rr({},e,{range:r[i]}),QFe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=NE(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:st("Unrecognized scale range value: "+Ct(i))}else if(i.scheme){n.scheme=ut(i.scheme)?sM(i.scheme,t):gd(i.scheme,t),i.extent&&(n.schemeExtent=sM(i.extent,t)),i.count&&(n.schemeCount=gd(i.count,t));return}else if(i.step){n.rangeStep=gd(i.step,t);return}else{if(NE(e.type)&&!ut(i))return KFe(i,e,t);ut(i)||st("Unsupported range type: "+Ct(i))}return i.map(s=>(ut(s)?sM:gd)(s,t))}function cYt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=Yq(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=Yq(n[i],i,t));t.addProjection(e.name,r)}function Yq(e,t,n){return ut(e)?e.map(r=>Yq(r,t,n)):$t(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:st("Unsupported parameter object: "+Ct(e)):e}const uh="top",JS="left",ZS="right",Yy="bottom",JFe="center",dYt="vertical",fYt="start",hYt="middle",pYt="end",Kq="index",yne="label",mYt="offset",LE="perc",gYt="perc2",bd="value",_k="guide-label",vne="guide-title",yYt="group-title",vYt="group-subtitle",fye="symbol",oM="gradient",Xq="discrete",Qq="size",bYt="shape",_Yt="fill",wYt="stroke",xYt="strokeWidth",EYt="strokeDash",SYt="opacity",bne=[Qq,bYt,_Yt,wYt,xYt,EYt,SYt],wk={name:1,style:1,interactive:1},Ur={value:0},_d={value:1},cj="group",ZFe="rect",_ne="rule",TYt="symbol",v_="text";function OI(e){return e.type=cj,e.interactive=e.interactive||!1,e}function Vl(e,t){const n=(r,i)=>cf(e[r],cf(t[r],i));return n.isVertical=r=>dYt===cf(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>cf(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>cf(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>cf(e.columns,cf(t.columns,+n.isVertical(!0))),n}function e6e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function CYt(e,t,n){const r=t.config.style[n];return r&&r[e]}function dj(e,t,n){return`item.anchor === '${fYt}' ? ${e} : item.anchor === '${pYt}' ? ${t} : ${n}`}const wne=dj(Ct(JS),Ct(ZS),Ct(JFe));function AYt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},$t(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function t6e(e,t){return t?e?$t(e)?Object.assign({},e,{offset:t6e(e.offset,t)}):{value:e,offset:t}:t:e}function Dc(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=QS(e.encode,t,wk)):e.interactive=!1,e}function IYt(e,t,n,r){const i=Vl(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,d,f;s?(l=[0,1],c=[0,0],d=o,f=a):(l=[0,0],c=[1,0],d=a,f=o);const h={enter:u={opacity:Ur,x:Ur,y:Ur,width:Xo(d),height:Xo(f)},update:rr({},u,{opacity:_d,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:Ur}};return Ca(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Dc({type:ZFe,role:tGt,encode:h},r)}function RYt(e,t,n,r,i){const s=Vl(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,d,f,h="";o?(l="y",d="y2",c="x",f="width",h="1-"):(l="x",d="x2",c="y",f="height");const p={opacity:Ur,fill:{scale:t,field:bd}};p[l]={signal:h+"datum."+LE,mult:u},p[c]=Ur,p[d]={signal:h+"datum."+gYt,mult:u},p[f]=Xo(a);const m={enter:p,update:rr({},p,{opacity:_d}),exit:{opacity:Ur}};return Ca(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Dc({type:ZFe,role:ZWt,key:bd,from:i,encode:m},r)}const kYt=`datum.${LE}<=0?"${JS}":datum.${LE}>=1?"${ZS}":"${JFe}"`,PYt=`datum.${LE}<=0?"${Yy}":datum.${LE}>=1?"${uh}":"${hYt}"`;function hye(e,t,n,r){const i=Vl(e,t),s=i.isVertical(),o=Xo(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,d,f,h="";const p={enter:l={opacity:Ur},update:c={opacity:_d,text:{field:yne}},exit:{opacity:Ur}};return Ca(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:cf(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:PYt},d="y",f="x",h="1-"):(l.align=c.align={signal:kYt},l.baseline={value:"top"},d="x",f="y"),l[d]=c[d]={signal:h+"datum."+LE,mult:a},l[f]=c[f]=o,o.offset=cf(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+Kq}:void 0,Dc({type:v_,role:$Fe,style:_k,key:bd,from:r,encode:p,overlap:u},n)}function NYt(e,t,n,r,i){const s=Vl(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),d={data:"value"},f=`(${i}) ? datum.${mYt} : datum.${Qq}`,h=l?Xo(l):{field:Qq},p=`datum.${Kq}`,m=`max(1, ${i})`;let y,v,w,x,S;h.mult=.5,y={enter:v={opacity:Ur,x:{signal:f,mult:.5,offset:c},y:h},update:w={opacity:_d,x:v.x,y:v.y},exit:{opacity:Ur}};let E=null,T=null;e.fill||(E=t.symbolBaseFillColor,T=t.symbolBaseStrokeColor),Ca(y,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",T),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),bne.forEach(D=>{e[D]&&(w[D]=v[D]={scale:e[D],field:bd})});const A=Dc({type:TYt,role:nGt,key:bd,from:d,clip:l?!0:void 0,encode:y},n.symbols),I=Xo(c);I.offset=s("labelOffset"),y={enter:v={opacity:Ur,x:{signal:f,offset:I},y:h},update:w={opacity:_d,text:{field:yne},x:v.x,y:v.y},exit:{opacity:Ur}},Ca(y,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const k=Dc({type:v_,role:$Fe,style:_k,key:bd,from:d,encode:y},n.labels);return y={enter:{noBound:{value:!l},width:Ur,height:l?Xo(l):Ur,opacity:Ur},exit:{opacity:Ur},update:w={opacity:_d,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(x=`ceil(item.mark.items.length / ${m})`,w.row.signal=`${p}%${x}`,w.column.signal=`floor(${p} / ${x})`,S={field:["row",p]}):(w.row.signal=`floor(${p} / ${m})`,w.column.signal=`${p} % ${m}`,S={field:p}),w.column.signal=`(${i})?${w.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:Kq}},OI({role:pne,from:r,encode:QS(y,o,wk),marks:[A,k],name:u,interactive:a,sort:S})}function OYt(e,t){const n=Vl(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const xne='item.orient === "left"',Ene='item.orient === "right"',fj=`(${xne} || ${Ene})`,DYt=`datum.vgrad && ${fj}`,MYt=dj('"top"','"bottom"','"middle"'),$Yt=dj('"right"','"left"','"center"'),LYt=`datum.vgrad && ${Ene} ? (${$Yt}) : (${fj} && !(datum.vgrad && ${xne})) ? "left" : ${wne}`,FYt=`item._anchor || (${fj} ? "middle" : "start")`,jYt=`${DYt} ? (${xne} ? -90 : 90) : 0`,BYt=`${fj} ? (datum.vgrad ? (${Ene} ? "bottom" : "top") : ${MYt}) : "top"`;function zYt(e,t,n,r){const i=Vl(e,t),s={enter:{opacity:Ur},update:{opacity:_d,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Ur}};return Ca(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:FYt},angle:{signal:jYt},align:{signal:LYt},baseline:{signal:BYt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Dc({type:v_,role:rGt,style:vne,from:r,encode:s},n)}function UYt(e,t){let n;return $t(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+pye(e.path)+")":e.sphere&&(n="geoShape("+pye(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function pye(e){return $t(e)&&e.signal?e.signal:Ct(e)}function n6e(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===cj?pne:t||fne}function VYt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||n6e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function HYt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function Sne(e,t){const n=zMe(e.type);n||st("Unrecognized transform type: "+Ct(e.type));const r=aj(n.type.toLowerCase(),null,r6e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function r6e(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=qYt(o,t,n)}return r}function qYt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return WYt(e,t,n);if(i===void 0){e.required&&st("Missing required "+Ct(t.type)+" parameter: "+Ct(e.name));return}else{if(r==="param")return GYt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!No(i)?i.map(s=>mye(e,s,n)):mye(e,i,n)}function mye(e,t,n){const r=e.type;if(No(t))return yye(r)?st("Expression references can not be signals."):gU(r)?n.fieldRef(t):vye(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||gU(r);return i&&YYt(t)?n.exprRef(t.expr,t.as):i&&KYt(t)?PI(t.field,t.as):yye(r)?Ap(t,n):XYt(r)?an(n.getData(t).values):gU(r)?PI(t):vye(r)?n.compareRef(t):t}}function WYt(e,t,n){return jt(t.from)||st('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function GYt(e,t,n){const r=t[e.name];return e.array?(ut(r)||st("Expected an array of sub-parameters. Instead: "+Ct(r)),r.map(i=>gye(e,i,n))):gye(e,r,n)}function gye(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||st("Unsupported parameter: "+Ct(t));const s=rr(r6e(i,t,n),i.key);return an(n.add(HGt(s)))}const YYt=e=>e&&e.expr,KYt=e=>e&&e.field,XYt=e=>e==="data",yye=e=>e==="expr",gU=e=>e==="field",vye=e=>e==="compare";function QYt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||st("Only group marks can be faceted."),r.field!=null?o=a=aM(r,n):(e.data?a=an(n.getData(e.data).aggregate):(s=Sne(rr({type:"aggregate",groupby:Ft(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=aM(r,n),o=a=an(n.add(s))),i=n.keyRef(r.groupby,!0))):o=an(n.add(ah(null,[{}]))),o||(o=aM(e,n)),{key:i,pulse:o,parent:a}}function aM(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:an(t.getData(e.data).output)}function Mb(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}Mb.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=an(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new Mb(e,s,i,r,o)};function i6e(e){return jt(e)?e:null}function bye(e,t,n){const r=uj(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function SC(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=_Gt(s);let l=i6e(i),c,d;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const f=s?{field:Wq,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:an(t.output)};u&&(f.sort=e.sortRef(s)),d=e.add(aj(r,void 0,f)),o&&(t.index[i]=d),c=an(d),l!=null&&(a[l]=c)}return c}Mb.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=i6e(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&bye(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:an(r.output)},n&&n.field&&bye(e,u,n),a=e.add(UFe(u)),o=e.add(ah({pulse:an(a)})),o={agg:a,ref:an(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return an(this.values)},extentRef(e,t){return SC(e,this,"extent","extent",t,!1)},domainRef(e,t){return SC(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return SC(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return SC(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return SC(e,this,"indata","tupleindex",t,!0,!0)}};function JYt(e,t,n){const r=e.from.facet,i=r.name,s=aM(r,t);let o;r.name||st("Facet must have a name: "+Ct(r)),r.data||st("Facet must reference a data set: "+Ct(r)),r.field?o=t.add(qFe({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(MGt({key:t.keyRef(r.groupby),group:an(t.proxy(n.parent)),pulse:s})):st("Facet must specify groupby or field: "+Ct(r));const a=t.fork(),u=a.add(ah()),l=a.add(y_({pulse:an(u)}));a.addData(i,new Mb(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function ZYt(e,t,n){const r=t.add(qFe({pulse:n.pulse})),i=t.fork();i.add(y_()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function s6e(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(Q$()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(d=>d??"null").join(",")+"),0)",c=Ap(l,t);u.update=c.$expr,u.params=c.$params}function hj(e,t){const n=n6e(e),r=e.type===cj,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===pne||n===hne,a,u,l,c,d,f,h;const p=n===fne||o||i,m=QYt(e.from,r,t);u=t.add(OGt({key:m.key||(e.key?PI(e.key):void 0),pulse:m.pulse,clean:!r}));const y=an(u);u=l=t.add(ah({pulse:y})),u=t.add(BGt({markdef:VYt(e),interactive:HYt(e.interactive,t),clip:UYt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:an(u)}));const v=an(u);u=c=t.add(HFe(BFe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:v}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(T=>{const A=Sne(T,t),I=A.metadata;(I.generates||I.changes)&&st("Mark transforms should not generate new data."),I.nomod||(c.params.mod=!0),A.params.pulse=an(u),t.add(u=A)}),e.sort&&(u=t.add(KGt({sort:t.compareRef(e.sort),pulse:an(u)})));const w=an(u);(i||o)&&(o=t.add(GFe({layout:t.objectProperty(e.layout),legends:t.legends,mark:v,pulse:w})),f=an(o));const x=t.add(VFe({mark:v,pulse:f||w}));h=an(x),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(w,f||h,y),i?JYt(e,t,m):p?ZYt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(x))),s&&(h=eKt(s,h,t));const S=t.add(WFe({pulse:h})),E=t.add(y_({pulse:an(S)},void 0,t.parent()));e.name!=null&&(d=e.name,t.addData(d,new Mb(t,l,S,E)),e.on&&e.on.forEach(T=>{(T.insert||T.remove||T.toggle)&&st("Marks only support modify triggers."),s6e(T,t,d)}))}function eKt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:No(s)?n.signalRef(s.signal):s,method:No(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=No(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return an(n.add(VGt(o)))}function tKt(e,t){const n=t.config.legend,r=e.encode||{},i=Vl(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,d,f,h;bne.forEach(x=>e[x]?(l[x]=e[x],c=c||e[x]):0),c||st("Missing valid scale for legend.");const p=nKt(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},y=an(t.add(ah(null,[m]))),v={enter:{x:{value:0},y:{value:0}}},w=an(t.add(FGt(f={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===oM?(h=[IYt(e,c,n,r.gradient),hye(e,n,r.labels,w)],f.count=f.count||t.signalRef(`max(2,2*floor((${rb(i.gradientLength())})/100))`)):p===Xq?h=[RYt(e,c,n,r.gradient,w),hye(e,n,r.labels,w)]:(d=OYt(e,n),h=[NYt(e,n,r,w,rb(d.columns))],f.size=sKt(e,t,h[0].marks)),h=[OI({role:eGt,from:y,encode:v,marks:h,layout:d,interactive:a})],m.title&&h.push(zYt(e,n,r.title,y)),hj(OI({role:JWt,from:y,encode:QS(iKt(i,e,n),s,wk),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function nKt(e,t){let n=e.type||fye;return!e.type&&rKt(e)===1&&(e.fill||e.stroke)&&(n=Mee(t)?oM:dq(t)?Xq:fye),n!==oM?n:dq(t)?Xq:oM}function rKt(e){return bne.reduce((t,n)=>t+(e[n]?1:0),0)}function iKt(e,t,n){const r={enter:{},update:{}};return Ca(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function sKt(e,t,n){const r=rb(_ye("size",e,n)),i=rb(_ye("strokeWidth",e,n)),s=rb(oKt(n[1].encode,t,_k));return Ap(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function _ye(e,t,n){return t[e]?`scale("${t[e]}",datum)`:e6e(e,n[0].encode)}function oKt(e,t,n){return e6e("fontSize",e)||CYt("fontSize",t,n)}const aKt=`item.orient==="${JS}"?-90:item.orient==="${ZS}"?90:0`;function uKt(e,t){e=jt(e)?{text:e}:e;const n=Vl(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=an(t.add(ah(null,[l])));return u.push(dKt(e,n,lKt(e),c)),e.subtitle&&u.push(fKt(e,n,r.subtitle,c)),hj(OI({role:iGt,from:c,encode:cKt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function lKt(e){const t=e.encode;return t&&t.title||rr({name:e.name,interactive:e.interactive,style:e.style},t)}function cKt(e,t){const n={enter:{},update:{}};return Ca(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:wne},angle:{signal:aKt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),QS(n,t,wk)}function dKt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Ca(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Dc({type:v_,role:sGt,style:yYt,from:r,encode:o},n)}function fKt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Ca(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Dc({type:v_,role:oGt,style:vYt,from:r,encode:o},n)}function hKt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(Sne(r,t))}),e.on&&e.on.forEach(r=>{s6e(r,t,e.name)}),t.addDataPipeline(e.name,pKt(e,t,n))}function pKt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,d;for(e.values?No(e.values)||iM(e.format)?(r.push(wye(t,e)),r.push(i=r1())):r.push(i=r1({$ingest:e.values,$format:e.format})):e.url?iM(e.url)||iM(e.format)?(r.push(wye(t,e)),r.push(i=r1())):r.push(i=r1({$request:e.url,$format:e.format})):e.source&&(i=a=Ft(e.source).map(f=>an(t.getData(f).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],d=c.metadata,!i&&!d.source&&r.push(i=r1()),r.push(c),d.generates&&(o=!0),d.modifies&&!o&&(s=!0),d.source?i=c:d.changes&&(i=null);return a&&(l=a.length-1,r[0]=GGt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,r1())),i||r.push(r1()),r.push(y_({})),r}function r1(e){const t=ah({},e);return t.metadata={source:!0},t}function wye(e,t){return jGt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const o6e=e=>e===Yy||e===uh,pj=(e,t,n)=>No(e)?vKt(e.signal,t,n):e===JS||e===uh?t:n,Qo=(e,t,n)=>No(e)?gKt(e.signal,t,n):o6e(e)?t:n,Df=(e,t,n)=>No(e)?yKt(e.signal,t,n):o6e(e)?n:t,a6e=(e,t,n)=>No(e)?bKt(e.signal,t,n):e===uh?{value:t}:{value:n},mKt=(e,t,n)=>No(e)?_Kt(e.signal,t,n):e===ZS?{value:t}:{value:n},gKt=(e,t,n)=>u6e(`${e} === '${uh}' || ${e} === '${Yy}'`,t,n),yKt=(e,t,n)=>u6e(`${e} !== '${uh}' && ${e} !== '${Yy}'`,t,n),vKt=(e,t,n)=>Tne(`${e} === '${JS}' || ${e} === '${uh}'`,t,n),bKt=(e,t,n)=>Tne(`${e} === '${uh}'`,t,n),_Kt=(e,t,n)=>Tne(`${e} === '${ZS}'`,t,n),u6e=(e,t,n)=>(t=t!=null?Xo(t):t,n=n!=null?Xo(n):n,xye(t)&&xye(n)?(t=t?t.signal||Ct(t.value):null,n=n?n.signal||Ct(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[rr({test:e},t)].concat(n||[])),xye=e=>e==null||Object.keys(e).length===1,Tne=(e,t,n)=>({signal:`${e} ? (${cx(t)}) : (${cx(n)})`}),wKt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${JS}' ? (${cx(r)}) : `:"")+(n!=null?`${e} === '${Yy}' ? (${cx(n)}) : `:"")+(i!=null?`${e} === '${ZS}' ? (${cx(i)}) : `:"")+(t!=null?`${e} === '${uh}' ? (${cx(t)}) : `:"")+"(null)"}),cx=e=>No(e)?e.signal:e==null?null:Ct(e),xKt=(e,t)=>t===0?0:No(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Mx=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Iw(e,t,n,r){let i;if(t&&cn(t,e))return t[e];if(cn(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[vne][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[_k][i]}return null}function Eye(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function EKt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(No(o)){const d=Eye([n.axisX,n.axisY]),f=Eye([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of d)a[l]=Qo(o,Iw(l,n.axisX,i,r),Iw(l,n.axisY,i,r));u={};for(l of f)u[l]=wKt(o.signal,Iw(l,n.axisTop,i,r),Iw(l,n.axisBottom,i,r),Iw(l,n.axisLeft,i,r),Iw(l,n.axisRight,i,r))}else a=o===uh||o===Yy?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?rr({},i,a,u,s):i}function SKt(e,t,n,r){const i=Vl(e,t),s=e.orient;let o,a;const u={enter:o={opacity:Ur},update:a={opacity:_d},exit:{opacity:Ur}};Ca(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=Sye(e,0),c=Sye(e,1);return o.x=a.x=Qo(s,l,Ur),o.x2=a.x2=Qo(s,c),o.y=a.y=Df(s,l,Ur),o.y2=a.y2=Df(s,c),Dc({type:_ne,role:GWt,from:r,encode:u},n)}function Sye(e,t){return{scale:e.scale,range:t}}function TKt(e,t,n,r,i){const s=Vl(e,t),o=e.orient,a=e.gridScale,u=pj(o,1,-1),l=CKt(e.offset,u);let c,d,f;const h={enter:c={opacity:Ur},update:f={opacity:_d},exit:d={opacity:Ur}};Ca(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:bd,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=Qo(o,{signal:"height"},{signal:"width"}),y=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},v=a?{scale:a,range:1,mult:u,offset:l}:rr(m,{mult:u,offset:l});return c.x=f.x=Qo(o,p,y),c.y=f.y=Df(o,p,y),c.x2=f.x2=Df(o,v),c.y2=f.y2=Qo(o,v),d.x=Qo(o,p),d.y=Df(o,p),Dc({type:_ne,role:YWt,key:bd,from:r,encode:h},n)}function CKt(e,t){if(t!==1)if(!$t(e))e=No(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=rr({},e);for(;n.mult!=null;)if($t(n.mult))n=n.mult=rr({},n.mult);else return n.mult=No(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function AKt(e,t,n,r,i,s){const o=Vl(e,t),a=e.orient,u=pj(a,-1,1);let l,c,d;const f={enter:l={opacity:Ur},update:d={opacity:_d},exit:c={opacity:Ur}};Ca(f,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=Xo(i);h.mult=u;const p={scale:e.scale,field:bd,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return d.y=l.y=Qo(a,Ur,p),d.y2=l.y2=Qo(a,h),c.x=Qo(a,p),d.x=l.x=Df(a,Ur,p),d.x2=l.x2=Df(a,h),c.y=Df(a,p),Dc({type:_ne,role:XWt,key:bd,from:r,encode:f},n)}function yU(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function IKt(e,t,n,r,i,s){const o=Vl(e,t),a=e.orient,u=e.scale,l=pj(a,-1,1),c=rb(o("labelFlush")),d=rb(o("labelFlushOffset")),f=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const y=Xo(i);y.mult=l,y.offset=Xo(o("labelPadding")||0),y.offset.mult=l;const v={scale:u,field:bd,band:.5,offset:t6e(s.offset,o("labelOffset"))},w=Qo(a,p?yU(u,c,'"left"','"right"','"center"'):{value:"center"},mKt(a,"left","right")),x=Qo(a,a6e(a,"bottom","top"),p?yU(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),S=yU(u,c,`-(${d})`,d,0);p=p&&d;const E={opacity:Ur,x:Qo(a,v,y),y:Df(a,v,y)},T={enter:E,update:m={opacity:_d,text:{field:yne},x:E.x,y:E.y,align:w,baseline:x},exit:{opacity:Ur,x:E.x,y:E.y}};Ca(T,{dx:!f&&p?Qo(a,S):null,dy:!h&&p?Df(a,S):null}),Ca(T,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:f,baseline:h});const A=o("labelBound");let I=o("labelOverlap");return I=I||A?{separation:o("labelSeparation"),method:I,order:"datum.index",bound:A?{scale:u,orient:a,tolerance:A}:null}:void 0,m.align!==w&&(m.align=Mx(m.align,w)),m.baseline!==x&&(m.baseline=Mx(m.baseline,x)),Dc({type:v_,role:KWt,style:_k,key:bd,from:r,encode:T,overlap:I},n)}function RKt(e,t,n,r){const i=Vl(e,t),s=e.orient,o=pj(s,-1,1);let a,u;const l={enter:a={opacity:Ur,anchor:Xo(i("titleAnchor",null)),align:{signal:wne}},update:u=rr({},a,{opacity:_d,text:Xo(e.title)}),exit:{opacity:Ur}},c={signal:`lerp(range("${e.scale}"), ${dj(0,1,.5)})`};return u.x=Qo(s,c),u.y=Df(s,c),a.angle=Qo(s,Ur,xKt(o,90)),a.baseline=Qo(s,a6e(s,Yy,uh),{value:Yy}),u.angle=a.angle,u.baseline=a.baseline,Ca(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),kKt(i,s,l,n),l.update.align=Mx(l.update.align,a.align),l.update.angle=Mx(l.update.angle,a.angle),l.update.baseline=Mx(l.update.baseline,a.baseline),Dc({type:v_,role:QWt,style:vne,from:r,encode:l},n)}function kKt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=Mx(Xo(a),n.update[u]),!1):!Kw(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?Xo(o):Qo(t,Xo(o),Xo(s))}function PKt(e,t){const n=EKt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=Vl(e,n),l=AYt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},d=an(t.add(ah({},[c]))),f=an(t.add(NGt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(TKt(e,n,r.grid,f,l)),c.ticks&&(p=u("tickSize"),h.push(AKt(e,n,r.ticks,f,p,l))),c.labels&&(p=c.ticks?p:0,h.push(IKt(e,n,r.labels,f,p,l))),c.domain&&h.push(SKt(e,n,r.domain,d)),c.title&&h.push(RKt(e,n,r.title,d)),hj(OI({role:WWt,from:d,encode:QS(NKt(u,e),i,wk),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function NKt(e,t){const n={enter:{},update:{}};return Ca(n,{orient:e("orient"),offset:e("offset")||0,position:cf(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function l6e(e,t,n){const r=Ft(e.signals),i=Ft(e.scales);return n||r.forEach(s=>zFe(s,t)),Ft(e.projections).forEach(s=>cYt(s,t)),i.forEach(s=>JGt(s,t)),Ft(e.data).forEach(s=>hKt(s,t)),i.forEach(s=>ZGt(s,t)),(n||r).forEach(s=>PGt(s,t)),Ft(e.axes).forEach(s=>PKt(s,t)),Ft(e.marks).forEach(s=>hj(s,t)),Ft(e.legends).forEach(s=>tKt(s,t)),e.title&&uKt(e.title,t),t.parseLambdas(),t}const OKt=e=>QS({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function DKt(e,t){const n=t.config,r=an(t.root=t.add(Q$())),i=MKt(e,n);i.forEach(l=>zFe(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(ah()),o=t.add(HFe(BFe(OKt(e.encode),cj,hne,e.style,t,{pulse:an(s)}))),a=t.add(GFe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:an(o)}));t.operators.pop(),t.pushState(an(o),an(a),null),l6e(e,t,i),t.operators.push(a);let u=t.add(VFe({mark:r,pulse:an(a)}));return u=t.add(WFe({pulse:an(u)})),u=t.add(y_({pulse:an(u)})),t.addData("root",new Mb(t,s,s,u)),t}function TC(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function MKt(e,t){const n=o=>cf(e[o],t[o]),r=[TC("background",n("background")),TC("autosize",VWt(n("autosize"))),TC("padding",qWt(n("padding"))),TC("width",n("width")||0),TC("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return Ft(e.signals).forEach(o=>{cn(i,o.name)?o=rr(i[o.name],o):r.push(o),s[o.name]=o}),Ft(t.signals).forEach(o=>{!cn(s,o.name)&&!cn(i,o.name)&&r.push(o)}),r}function c6e(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Tye(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}c6e.prototype=Tye.prototype={parse(e){return l6e(e,this)},fork(){return new Tye(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof qq?an(e):e;return this.add(WGt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(an(this.add(y_({pulse:e})))),this._parent.push(t),this._lookup.push(n?an(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Dr(this._parent)},encode(){return Dr(this._encode)},lookup(){return Dr(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(jt(e))return PI(e,t);e.signal||st("Unsupported field reference: "+Ct(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=an(this.add($Gt(i)))}return r},compareRef(e){let t=!1;const n=s=>No(s)?(t=!0,this.signalRef(s.signal)):wGt(s)?(t=!0,this.exprRef(s.expr)):s,r=Ft(e.field).map(n),i=Ft(e.order).map(n);return t?an(this.add(dye({fields:r,orders:i}))):lye(r,i)},keyRef(e,t){let n=!1;const r=s=>No(s)?(n=!0,an(i[s.signal])):s,i=this.signals;return e=Ft(e).map(r),n?an(this.add(LGt({fields:e,flat:t}))):yGt(e,t)},sortRef(e){if(!e)return e;const t=uj(e.op,e.field),n=e.order||vGt;return n.signal?an(this.add(dye({fields:t,orders:this.signalRef(n.signal)}))):lye(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return cn(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&st("Duplicate signal name: "+Ct(e));const n=t instanceof qq?t:this.add(Q$(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||st("Unrecognized signal name: "+Ct(e)),this.signals[e]},signalRef(e){return this.signals[e]?an(this.signals[e]):(cn(this.lambdas,e)||(this.lambdas[e]=this.add(Q$(null))),an(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Ap(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!$t(e)?e:this.signalRef(e.signal||Cne(e))},exprRef(e,t){const n={expr:Ap(e,this)};return t&&(n.expr.$name=t),an(this.add(DGt(n)))},addBinding(e,t){this.bindings||st("Nested signals do not support binding: "+Ct(e)),this.bindings.push(rr({signal:e},t))},addScaleProj(e,t){cn(this.scales,e)&&st("Duplicate scale or projection name: "+Ct(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,YGt(t))},addProjection(e,t){this.addScaleProj(e,qGt(t))},getScale(e){return this.scales[e]||st("Unrecognized scale name: "+Ct(e)),this.scales[e]},scaleRef(e){return an(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return cn(this.data,e)&&st("Duplicate data set name: "+Ct(e)),this.data[e]=t},getData(e){return this.data[e]||st("Undefined data set name: "+Ct(e)),this.data[e]},addDataPipeline(e,t){return cn(this.data,e)&&st("Duplicate data set name: "+Ct(e)),this.addData(e,Mb.fromEntries(this,t))}};function Cne(e){return(ut(e)?$Kt:LKt)(e)}function $Kt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+($t(i)?i.signal||Cne(i):Ct(i))}return n+"]"}function LKt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Ct(r)+":"+($t(i)?i.signal||Cne(i):Ct(i));return t+"}"}function FKt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function jKt(e,t,n){return $t(e)||st("Input Vega specification must be an object."),t=VS(FKt(),t,e.config),DKt(e,new c6e(t,n)).toRuntime()}var BKt="5.30.0";rr(RE,j5t,Azt,sUt,$Ut,VUt,g7t,KUt,v7t,x7t,N7t,j7t);const zKt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:uo,CanvasHandler:mk,CanvasRenderer:j$,DATE:Ml,DAY:Ga,DAYOFYEAR:Cp,Dataflow:Dx,Debug:MDe,Error:_Z,EventStream:k4,Gradient:J3e,GroupItem:V4,HOURS:Pc,Handler:ote,HybridHandler:V$e,HybridRenderer:xq,Info:DDe,Item:U4,MILLISECONDS:Wf,MINUTES:Nc,MONTH:Ja,Marks:Oc,MultiPulse:BZ,None:ODe,Operator:$i,Parameters:R4,Pulse:hy,QUARTER:Dl,RenderType:X0,Renderer:pk,ResourceLoader:s$e,SECONDS:Id,SVGHandler:k$e,SVGRenderer:fte,SVGStringRenderer:U$e,Scenegraph:x$e,TIME_UNITS:NZ,Transform:et,View:IFe,WEEK:Co,Warn:wZ,YEAR:wa,accessor:Ul,accessorFields:Qa,accessorName:Ns,array:Ft,ascending:E4,bandwidthNRD:HZ,bin:HMe,bootstrapCI:qMe,boundClip:Z$e,boundContext:ck,boundItem:yq,boundMark:v$e,boundStroke:$g,changeset:p_,clampRange:WDe,codegenExpression:tFe,compare:CZ,constant:iu,cumulativeLogNormal:XZ,cumulativeNormal:N4,cumulativeUniform:eee,dayofyear:iMe,debounce:AZ,defaultLocale:MZ,definition:zMe,densityLogNormal:KZ,densityNormal:qZ,densityUniform:ZZ,domChild:To,domClear:ad,domCreate:Y0,domFind:ste,dotbin:WMe,error:st,expressionFunction:Gs,extend:rr,extent:Tp,extentIndex:GDe,falsy:w0,fastmap:qS,field:Cd,flush:YDe,font:Y4,fontFamily:hk,fontSize:qp,format:UD,formatLocale:C$,formats:FZ,hasOwnProperty:cn,id:JR,identity:ru,inferType:kMe,inferTypes:PMe,ingest:li,inherits:kt,inrange:ax,interpolate:$ee,interpolateColors:B4,interpolateRange:F3e,intersect:K$e,intersectBoxLine:ux,intersectPath:Hee,intersectPoint:qee,intersectRule:a$e,isArray:ut,isBoolean:Ev,isDate:fy,isFunction:ir,isIterable:KDe,isNumber:Gr,isObject:$t,isRegExp:XDe,isString:jt,isTuple:A4,key:IZ,lerp:QDe,lineHeight:qy,loader:T4,locale:IMe,logger:xZ,lruCache:JDe,markup:dte,merge:ZDe,mergeConfig:VS,multiLineOffset:nte,one:US,pad:eMe,panLinear:BDe,panLog:zDe,panPow:UDe,panSymlog:VDe,parse:jKt,parseExpression:Zte,parseSelector:Tv,path:qF,pathCurves:zee,pathEqual:eLe,pathParse:OE,pathRectangle:t$e,pathRender:EI,pathSymbols:e$e,pathTrail:n$e,peek:Dr,point:X4,projection:Ste,quantileLogNormal:QZ,quantileNormal:O4,quantileUniform:tee,quantiles:UZ,quantizeInterpolator:j3e,quarter:HDe,quartiles:VZ,get random(){return Rd},randomInteger:Vjt,randomKDE:GZ,randomLCG:Ujt,randomLogNormal:YMe,randomMixture:KMe,randomNormal:WZ,randomUniform:XMe,read:DMe,regressionConstant:nee,regressionExp:JMe,regressionLinear:ree,regressionLoess:t3e,regressionLog:QMe,regressionPoly:e3e,regressionPow:ZMe,regressionQuad:iee,renderModule:Q4,repeat:dA,resetDefaultLocale:j4t,resetSVGClipId:i$e,resetSVGDefIds:q9t,responseType:OMe,runtimeContext:mFe,sampleCurve:M4,sampleLogNormal:YZ,sampleNormal:P4,sampleUniform:JZ,scale:ri,sceneEqual:hte,sceneFromJSON:_$e,scenePickVisit:P$,sceneToJSON:b$e,sceneVisit:Gf,sceneZOrder:Wee,scheme:Lee,serializeXML:F$e,setHybridRendererOptions:z9t,setRandom:Bjt,span:ZR,splitAccessPath:Hp,stringValue:Ct,textMetrics:gc,timeBin:wMe,timeFloor:dMe,timeFormatLocale:_I,timeInterval:WS,timeOffset:pMe,timeSequence:yMe,timeUnitSpecifier:rMe,timeUnits:OZ,toBoolean:RZ,toDate:kZ,toNumber:Ya,toSet:qf,toString:PZ,transform:UMe,transforms:RE,truncate:tMe,truthy:Ad,tupleid:un,typeParsers:uq,utcFloor:fMe,utcInterval:GS,utcOffset:mMe,utcSequence:vMe,utcdayofyear:aMe,utcquarter:qDe,utcweek:uMe,version:BKt,visitArray:A0,week:sMe,writeConfig:HS,zero:B0,zoomLinear:EZ,zoomLog:SZ,zoomPow:T$,zoomSymlog:TZ},Symbol.toStringTag,{value:"Module"}));function UKt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var VKt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},HKt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},qKt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const WKt=Array.prototype.slice,i1=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,WKt.call(t,1))},GKt=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var YKt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:GKt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return i1("join",arguments)},indexof:function(){return i1("indexOf",arguments)},lastindexof:function(){return i1("lastIndexOf",arguments)},slice:function(){return i1("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return i1("substring",arguments,String)},split:function(){return i1("split",arguments,String)},replace:function(){return i1("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const KKt=["view","item","group","xy","x","y"],Jq=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&Jq.add(setImmediate);const XKt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:VKt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),Jq.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||YKt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>HKt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>qKt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,Jq.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function CC(e,t,n,r,i,s){const o=a=>XKt[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,KKt.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var QKt={operator(e,t){const n=t.ast,r=e.functions;return i=>CC(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>CC(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>CC(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return CC(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const d in r)c=CC(r[d].ast,i,a,u,void 0,o),o[d]!==c&&(o[d]=c,l=1);return n!=="rule"&&UKt(o,r,s),l}}};const JKt="5.19.0",ZKt={version:JKt};function Ane(e){return!!e.or}function Ine(e){return!!e.and}function Rne(e){return!!e.not}function uM(e,t){if(Rne(e))uM(e.not,t);else if(Ine(e))for(const n of e.and)uM(n,t);else if(Ane(e))for(const n of e.or)uM(n,t);else t(e)}function $x(e,t){return Rne(e)?{not:$x(e.not,t)}:Ine(e)?{and:e.and.map(n=>$x(n,t))}:Ane(e)?{or:e.or.map(n=>$x(n,t))}:t(e)}const Bn=structuredClone;function d6e(e){throw new Error(e)}function FE(e,t){const n={};for(const r of t)cn(e,r)&&(n[r]=e[r]);return n}function Sl(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Pi(e)).join(",")})`};function Ar(e){if(Gr(e))return e;const t=jt(e)?e:Pi(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function Zq(e){return e===!1||e===null}function _r(e,t){return e.includes(t)}function jE(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function kne(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function f6e(e,...t){for(const n of t)eXt(e,n??{});return e}function eXt(e,t){for(const n of yt(t))HS(e,n,t[n],!0)}function Qh(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function tXt(e,t){const n=yt(e),r=yt(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function h6e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Pne(e,t){for(const n of e)if(t.has(n))return!0;return!1}function eW(e){const t=new Set;for(const n of e){const i=Hp(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function Nne(e,t){return e===void 0||t===void 0?!0:Pne(eW(e),eW(t))}function ki(e){return yt(e).length===0}const yt=Object.keys,xa=Object.values,Ky=Object.entries;function DI(e){return e===!0||e===!1}function us(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function u2(e,t){return Rne(e)?`!(${u2(e.not,t)})`:Ine(e)?`(${e.and.map(n=>u2(n,t)).join(") && (")})`:Ane(e)?`(${e.or.map(n=>u2(n,t)).join(") || (")})`:t(e)}function J$(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&J$(e[n],t)&&delete e[n],ki(e)}function xk(e){return e.charAt(0).toUpperCase()+e.substr(1)}function One(e,t="datum"){const n=Hp(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(Ct).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function p6e(e,t="datum"){return`${t}[${Ct(Hp(e).join("."))}]`}function nXt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function kd(e){return`${Hp(e).map(nXt).join("\\.")}`}function $b(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function eT(e){return`${Hp(e).join(".")}`}function BE(e){return e?Hp(e).length:0}function Vs(...e){for(const t of e)if(t!==void 0)return t}let m6e=42;function g6e(e){const t=++m6e;return e?String(e)+t:t}function rXt(){m6e=42}function y6e(e){return v6e(e)?e:`__${e}`}function v6e(e){return e.startsWith("__")}function MI(e){if(e!==void 0)return(e%360+360)%360}function mj(e){return Gr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Cye=Object.getPrototypeOf(structuredClone({}));function hc(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!hc(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!hc(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Cye.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Cye.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!hc(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Pi(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const Km="row",Xm="column",gj="facet",ls="x",ta="y",lh="x2",Yp="y2",Cv="xOffset",tT="yOffset",ch="radius",Fg="radius2",Bd="theta",jg="theta2",dh="latitude",fh="longitude",hh="latitude2",Pd="longitude2",$l="color",Kp="fill",Xp="stroke",Ll="shape",Bg="size",b_="angle",zg="opacity",Av="fillOpacity",Iv="strokeOpacity",Rv="strokeWidth",kv="strokeDash",Ek="text",zE="order",Sk="detail",yj="key",Lb="tooltip",vj="href",bj="url",_j="description",iXt={x:1,y:1,x2:1,y2:1},b6e={theta:1,theta2:1,radius:1,radius2:1};function _6e(e){return e in b6e}const Dne={longitude:1,longitude2:1,latitude:1,latitude2:1};function w6e(e){switch(e){case dh:return"y";case hh:return"y2";case fh:return"x";case Pd:return"x2"}}function x6e(e){return e in Dne}const sXt=yt(Dne),Mne={...iXt,...b6e,...Dne,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Lx(e){return e===$l||e===Kp||e===Xp}const E6e={row:1,column:1,facet:1},yd=yt(E6e),$ne={...Mne,...E6e},oXt=yt($ne),{order:lan,detail:can,tooltip:dan,...aXt}=$ne,{row:fan,column:han,facet:pan,...uXt}=aXt;function lXt(e){return!!uXt[e]}function S6e(e){return!!$ne[e]}const cXt=[lh,Yp,hh,Pd,jg,Fg];function T6e(e){return __(e)!==e}function __(e){switch(e){case lh:return ls;case Yp:return ta;case hh:return dh;case Pd:return fh;case jg:return Bd;case Fg:return ch}return e}function Xy(e){if(_6e(e))switch(e){case Bd:return"startAngle";case jg:return"endAngle";case ch:return"outerRadius";case Fg:return"innerRadius"}return e}function Qp(e){switch(e){case ls:return lh;case ta:return Yp;case dh:return hh;case fh:return Pd;case Bd:return jg;case ch:return Fg}}function Fl(e){switch(e){case ls:case lh:return"width";case ta:case Yp:return"height"}}function C6e(e){switch(e){case ls:return"xOffset";case ta:return"yOffset";case lh:return"x2Offset";case Yp:return"y2Offset";case Bd:return"thetaOffset";case ch:return"radiusOffset";case jg:return"theta2Offset";case Fg:return"radius2Offset"}}function Lne(e){switch(e){case ls:return"xOffset";case ta:return"yOffset"}}function dXt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const fXt=yt(Mne),{x:man,y:gan,x2:yan,y2:van,xOffset:ban,yOffset:_an,latitude:wan,longitude:xan,latitude2:Ean,longitude2:San,theta:Tan,theta2:Can,radius:Aan,radius2:Ian,...Fne}=Mne,hXt=yt(Fne),jne={x:1,y:1},Ug=yt(jne);function Hs(e){return e in jne}const Bne={theta:1,radius:1},pXt=yt(Bne);function wj(e){return e==="width"?ls:ta}const A6e={xOffset:1,yOffset:1};function Tk(e){return e in A6e}const{text:Ran,tooltip:kan,href:Pan,url:Nan,description:Oan,detail:Dan,key:Man,order:$an,...I6e}=Fne,mXt=yt(I6e);function gXt(e){return!!Fne[e]}function yXt(e){switch(e){case $l:case Kp:case Xp:case Bg:case Ll:case zg:case Rv:case kv:return!0;case Av:case Iv:case b_:return!1}}const R6e={...jne,...Bne,...A6e,...I6e},zne=yt(R6e);function Jp(e){return!!R6e[e]}function vXt(e,t){return _Xt(e)[t]}const k6e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:Lan,...bXt}=k6e;function _Xt(e){switch(e){case $l:case Kp:case Xp:case _j:case Sk:case yj:case Lb:case vj:case zE:case zg:case Av:case Iv:case Rv:case gj:case Km:case Xm:return k6e;case ls:case ta:case Cv:case tT:case dh:case fh:return bXt;case lh:case Yp:case hh:case Pd:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Bg:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case kv:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Ll:return{point:"always",geoshape:"always"};case Ek:return{text:"always"};case b_:return{point:"always",square:"always",text:"always"};case bj:return{image:"always"};case Bd:return{text:"always",arc:"always"};case ch:return{text:"always",arc:"always"};case jg:case Fg:return{arc:"always"}}}function vU(e){switch(e){case ls:case ta:case Bd:case ch:case Cv:case tT:case Bg:case b_:case Rv:case zg:case Av:case Iv:case lh:case Yp:case jg:case Fg:return;case gj:case Km:case Xm:case Ll:case kv:case Ek:case Lb:case vj:case bj:case _j:return"discrete";case $l:case Kp:case Xp:return"flexible";case dh:case fh:case hh:case Pd:case Sk:case yj:case zE:return}}const wXt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},xXt={count:1,min:1,max:1};function wg(e){return!!e&&!!e.argmin}function Pv(e){return!!e&&!!e.argmax}function Une(e){return jt(e)&&!!wXt[e]}const EXt=new Set(["count","valid","missing","distinct"]);function xj(e){return jt(e)&&EXt.has(e)}function SXt(e){return jt(e)&&_r(["min","max"],e)}const TXt=new Set(["count","sum","distinct","valid","missing"]),CXt=new Set(["mean","average","median","q1","q3","min","max"]);function P6e(e){return Ev(e)&&(e=Mj(e,void 0)),"bin"+yt(e).map(t=>Ej(e[t])?us(`_${t}_${Ky(e[t])}`):us(`_${t}_${e[t]}`)).join("")}function qi(e){return e===!0||w_(e)&&!e.binned}function pa(e){return e==="binned"||w_(e)&&e.binned===!0}function w_(e){return $t(e)}function Ej(e){return e==null?void 0:e.param}function Aye(e){switch(e){case Km:case Xm:case Bg:case $l:case Kp:case Xp:case Rv:case zg:case Av:case Iv:case Ll:return 6;case kv:return 4;default:return 10}}function Ck(e){return!!(e!=null&&e.expr)}function Va(e,{level:t}={level:0}){const n=yt(e||{}),r={};for(const i of n)r[i]=t===0?oc(e[i]):Va(e[i],{level:t-1});return r}function N6e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:d,subtitleFontWeight:f,subtitleLineHeight:h,subtitlePadding:p,...m}=e,y={...m,...a?{fill:a}:{}},v={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},w={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...d?{subtitleFontStyle:d}:{},...f?{subtitleFontWeight:f}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},x=FE(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:y,subtitleMarkConfig:x,nonMarkTitleProperties:v,subtitle:w}}function k0(e){return jt(e)||ut(e)&&jt(e[0])}function en(e){return!!(e!=null&&e.signal)}function Nv(e){return!!e.step}function AXt(e){return ut(e)?!1:"fields"in e&&!("data"in e)}function IXt(e){return ut(e)?!1:"fields"in e&&"data"in e}function zm(e){return ut(e)?!1:"field"in e&&"data"in e}const RXt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},kXt=yt(RXt),PXt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},tW=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function O6e(e){const t=ut(e.condition)?e.condition.map(Iye):Iye(e.condition);return{...oc(e),condition:t}}function oc(e){if(Ck(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Iye(e){if(Ck(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Ji(e){if(Ck(e)){const{expr:t,...n}=e;return{signal:t,...n}}return en(e)?e:e!==void 0?{value:e}:void 0}function NXt(e){return en(e)?e.signal:Ct(e)}function Rye(e){return en(e)?e.signal:Ct(e.value)}function Ef(e){return en(e)?e.signal:e==null?null:Ct(e)}function OXt(e,t,n){for(const r of n){const i=Ip(r,t.markDef,t.config);i!==void 0&&(e[r]=Ji(i))}return e}function D6e(e){return[].concat(e.type,e.style??[])}function Si(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Ip(e,t,n,r)}function Ip(e,t,n,{vgChannel:r}={}){return Vs(r?Z$(e,t,n.style):void 0,Z$(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function Z$(e,t,n){return M6e(e,D6e(t),n)}function M6e(e,t,n){t=Ft(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function $6e(e,t){return Ft(e).reduce((n,r)=>(n.field.push(Nt(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function L6e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(hc(i,r))return;n.push(r)}),n}function F6e(e,t){return hc(e,t)||!t?e:e?[...Ft(e),...Ft(t)].join(", "):t}function j6e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((k0(n)||en(n))&&(k0(r)||en(r)))return{explicit:e.explicit,value:F6e(n,r)};if(k0(n)||en(n))return{explicit:e.explicit,value:n};if(k0(r)||en(r))return{explicit:e.explicit,value:r};if(!k0(n)&&!en(n)&&!k0(r)&&!en(r))return{explicit:e.explicit,value:L6e(n,r)};throw new Error("It should never reach here")}function Vne(e){return`Invalid specification ${Pi(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const DXt='Autosize "fit" only works for single views and layered views.';function kye(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Pye(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Nye(e){return e?`Dropping "fit-${e}" because spec has discrete ${Fl(e)}.`:'Dropping "fit" because spec has discrete size.'}function Hne(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Oye(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function MXt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function $Xt(e){return`The "nearest" transform is not supported for ${e} marks.`}function B6e(e){return`Selection not supported for ${e} yet.`}function LXt(e){return`Cannot find a selection named "${e}".`}const FXt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",jXt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",BXt="Legend bindings are only supported for selections over an individual field or encoding channel.";function zXt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function UXt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const VXt="The same selection must be used to override scale domains in a layered view.",HXt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function qXt(e){return`Unknown repeated value "${e}".`}function Dye(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const WXt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function GXt(e){return`Unrecognized parse "${e}".`}function Mye(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const YXt="Attempt to add the same child twice.";function KXt(e){return`Ignoring an invalid transform: ${Pi(e)}.`}const XXt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function $ye(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function QXt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Pi(t)} is overridden by a child projection ${Pi(n)}.`}const JXt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function ZXt(e){return`${e}Offset dropped because ${e} is continuous`}function eQt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Pi(n)}}.`}function z6e(e){return`Invalid field type "${e}".`}function tQt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function nQt(e){return`Invalid aggregation operator "${e}".`}function U6e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function rQt(e){return`Position range does not support relative band size for ${e}.`}function nW(e,t){return`Dropping ${Pi(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const iQt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function Sj(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function sQt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function oQt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function aQt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function uQt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function bU(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function lQt(e){return`The ${e} for range marks cannot be an expression`}function cQt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function dQt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function fQt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function hQt(e){return`Cannot use the relative band size with ${e} scale.`}function pQt(e){return`Using unaggregated domain with raw field has no effect (${Pi(e)}).`}function mQt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function gQt(e){return`Unaggregated domain is currently unsupported for log scale (${Pi(e)}).`}function yQt(e){return`Cannot apply size to non-oriented mark "${e}".`}function vQt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function bQt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function V6e(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function H6e(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function _Qt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Pi(n)} and ${Pi(r)}). Using ${Pi(n)}.`}function wQt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Pi(n)} and ${Pi(r)}). Using the union of the two domains.`}function xQt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function EQt(e){return`Dropping sort property ${Pi(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Lye="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",SQt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",TQt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",CQt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function AQt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function IQt(e){return`Stack is applied to a non-linear scale (${e}).`}function RQt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function eL(e,t){return`Invalid ${e}: ${Pi(t)}.`}function kQt(e){return`Dropping day from datetime ${Pi(e)} as day cannot be combined with other units.`}function PQt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function NQt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function OQt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Fye(e){return`1D error band does not support ${e}.`}function q6e(e){return`Channel ${e} is required for "binned" bin.`}function DQt(e){return`Channel ${e} should not be used with "binned" bin.`}function MQt(e){return`Domain for ${e} is required for threshold scale.`}const W6e=xZ(wZ);let UE=W6e;function $Qt(e){return UE=e,UE}function LQt(){return UE=W6e,UE}function wt(...e){UE.warn(...e)}function FQt(...e){UE.debug(...e)}function x_(e){if(e&&$t(e)){for(const t of Wne)if(t in e)return!0}return!1}const G6e=["january","february","march","april","may","june","july","august","september","october","november","december"],jQt=G6e.map(e=>e.substr(0,3)),Y6e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],BQt=Y6e.map(e=>e.substr(0,3));function zQt(e){if(mj(e)&&(e=+e),Gr(e))return e>4&&wt(eL("quarter",e)),e-1;throw new Error(eL("quarter",e))}function UQt(e){if(mj(e)&&(e=+e),Gr(e))return e-1;{const t=e.toLowerCase(),n=G6e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=jQt.indexOf(r);if(i!==-1)return i;throw new Error(eL("month",e))}}function VQt(e){if(mj(e)&&(e=+e),Gr(e))return e%7;{const t=e.toLowerCase(),n=Y6e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=BQt.indexOf(r);if(i!==-1)return i;throw new Error(eL("day",e))}}function qne(e,t){const n=[];if(t&&e.day!==void 0&&yt(e).length>1&&(wt(kQt(e)),e=Bn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?UQt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?zQt(e.quarter):e.quarter;n.push(Gr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?VQt(e.day):e.day;n.push(Gr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function Fb(e){const n=qne(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function HQt(e){const n=qne(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function qQt(e){const t=qne(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const K6e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Wne=yt(K6e);function WQt(e){return!!K6e[e]}function E_(e){return $t(e)?e.binned:X6e(e)}function X6e(e){return e&&e.startsWith("binned")}function Gne(e){return e.startsWith("utc")}function GQt(e){return e.substring(3)}const YQt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function Tj(e){return Wne.filter(t=>J6e(e,t))}function Q6e(e){const t=Tj(e);return t[t.length-1]}function J6e(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function KQt(e,t,{end:n}={end:!1}){const r=One(t),i=Gne(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of Wne)J6e(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),HQt(a)}function Z6e(e){if(!e)return;const t=Tj(e);return`timeUnitSpecifier(${Pi(t)}, ${Pi(YQt)})`}function XQt(e,t,n){if(!e)return;const r=Z6e(e);return`${n||Gne(e)?"utc":"time"}Format(${t}, ${r})`}function Jo(e){if(!e)return;let t;return jt(e)?X6e(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:$t(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Gne(t.unit)&&(t.utc=!0,t.unit=GQt(t.unit)),t}function QQt(e){const{utc:t,...n}=Jo(e);return n.unit?(t?"utc":"")+yt(n).map(r=>us(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+yt(n).map(r=>us(`_${r}_${n[r]}`)).join("")}function e4e(e,t=n=>n){const n=Jo(e),r=Q6e(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=t4e(r,n.step),a={...i,[o]:+i[o]+s};return`${t(Fb(a))} - ${t(Fb(i))}`}}const JQt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function ZQt(e){return!!JQt[e]}function t4e(e,t=1){if(ZQt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function eJt(e){return e==null?void 0:e.param}function Yne(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function Kne(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function Xne(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function Qne(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function Jne(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function Zne(e){if(e!=null&&e.field){if(ut(e.range)&&e.range.length===2)return!0;if(en(e.range))return!0}return!1}function ere(e){return!!(e!=null&&e.field)&&(ut(e.oneOf)||ut(e.in))}function tJt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function n4e(e){return ere(e)||Yne(e)||Zne(e)||Kne(e)||Qne(e)||Xne(e)||Jne(e)}function Ah(e,t){return $j(e,{timeUnit:t,wrapTime:!0})}function nJt(e,t){return e.map(n=>Ah(n,t))}function r4e(e,t=!0){const{field:n}=e,r=Jo(e.timeUnit),{unit:i,binned:s}=r||{},o=Nt(e,{expr:"datum"}),a=i?`time(${s?o:KQt(i,n)})`:o;if(Yne(e))return`${a}===${Ah(e.equal,i)}`;if(Kne(e)){const u=e.lt;return`${a}<${Ah(u,i)}`}else if(Qne(e)){const u=e.gt;return`${a}>${Ah(u,i)}`}else if(Xne(e)){const u=e.lte;return`${a}<=${Ah(u,i)}`}else if(Jne(e)){const u=e.gte;return`${a}>=${Ah(u,i)}`}else{if(ere(e))return`indexof([${nJt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(tJt(e))return Cj(a,e.valid);if(Zne(e)){const{range:u}=e,l=en(u)?{signal:`${u.signal}[0]`}:u[0],c=en(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+Ah(l,i)+", "+Ah(c,i)+"])";const d=[];return l!==null&&d.push(`${a} >= ${Ah(l,i)}`),c!==null&&d.push(`${a} <= ${Ah(c,i)}`),d.length>0?d.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Pi(e)}`)}function Cj(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function rJt(e){return n4e(e)&&e.timeUnit?{...e,timeUnit:Jo(e.timeUnit)}:e}const Ak={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function iJt(e){return e==="quantitative"||e==="temporal"}function i4e(e){return e==="ordinal"||e==="nominal"}const jb=Ak.quantitative,tre=Ak.ordinal,VE=Ak.temporal,nre=Ak.nominal,nT=Ak.geojson;function sJt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case jb:return"quantitative";case"t":case VE:return"temporal";case"o":case tre:return"ordinal";case"n":case nre:return"nominal";case nT:return"geojson"}}const ma={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},rW={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function oJt(e,t){const n=rW[e],r=rW[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const aJt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function jye(e){return aJt[e]}const s4e=new Set(["linear","log","pow","sqrt","symlog"]),o4e=new Set([...s4e,"time","utc"]);function a4e(e){return s4e.has(e)}const u4e=new Set(["quantile","quantize","threshold"]),uJt=new Set([...o4e,...u4e,"sequential","identity"]),lJt=new Set(["ordinal","bin-ordinal","point","band"]);function Zo(e){return lJt.has(e)}function Yf(e){return uJt.has(e)}function Jh(e){return o4e.has(e)}function HE(e){return u4e.has(e)}const cJt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function dJt(e){return!jt(e)&&!!e.name}function l4e(e){return e==null?void 0:e.param}function fJt(e){return e==null?void 0:e.unionWith}function hJt(e){return $t(e)&&"field"in e}const pJt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:Fan,domain:jan,range:Ban,rangeMax:zan,rangeMin:Uan,scheme:Van,...mJt}=pJt,gJt=yt(mJt);function iW(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Jh(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Jh(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Jh(e);case"nice":return Jh(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Yf(e)&&!_r(["log","time","utc","threshold","quantile"],e)}}function c4e(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Lx(e)?void 0:fQt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function yJt(e,t){return _r([tre,nre],t)?e===void 0||Zo(e):t===VE?_r([ma.TIME,ma.UTC,void 0],e):t===jb?a4e(e)||HE(e)||e===void 0:!0}function vJt(e,t,n=!1){if(!Jp(e))return!1;switch(e){case ls:case ta:case Cv:case tT:case Bd:case ch:return Jh(t)||t==="band"?!0:t==="point"?!n:!1;case Bg:case Rv:case zg:case Av:case Iv:case b_:return Jh(t)||HE(t)||_r(["band","point","ordinal"],t);case $l:case Kp:case Xp:return t!=="band";case kv:case Ll:return t==="ordinal"||HE(t)}}function bJt(e){return $t(e)&&"value"in e}const Hu={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},d4e=Hu.arc,Aj=Hu.area,Ij=Hu.bar,_Jt=Hu.image,Rj=Hu.line,kj=Hu.point,wJt=Hu.rect,tL=Hu.rule,f4e=Hu.text,rre=Hu.tick,xJt=Hu.trail,ire=Hu.circle,sre=Hu.square,h4e=Hu.geoshape;function Ov(e){return["line","area","trail"].includes(e)}function $I(e){return["rect","bar","image","arc"].includes(e)}const EJt=new Set(yt(Hu));function Rp(e){return e.type}const SJt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],TJt=["fill","fillOpacity"],CJt=[...SJt,...TJt],AJt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Bye=yt(AJt),IJt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},RJt={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},kJt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},p4e=yt(kJt);function Bb(e){return e&&e.band!=null}const PJt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},m4e=5,NJt={binSpacing:1,continuousBandSize:m4e,minBandSize:.25,timeUnitBandPosition:.5},OJt={binSpacing:0,continuousBandSize:m4e,minBandSize:.25,timeUnitBandPosition:.5},DJt={thickness:1};function MJt(e){return Rp(e)?e.type:e}function g4e(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function ore({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,u;if(!r||!Yf(r)||i)return"always-valid";const s=g4e(Si("invalid",e,t),{isPath:Ov(e.type)});return((u=(a=t.scale)==null?void 0:a.invalid)==null?void 0:u[n])!==void 0?"show":s}function $Jt(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function y4e({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,s=`peek(${r})`,o=t.domainHasZero();return o==="definitely"?{scale:e,value:0}:o==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:s})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:s})`}}function v4e({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:s}){var c;const o=n==null?void 0:n.get("type"),a=Xf(t),u=xj(a==null?void 0:a.aggregate),l=ore({scaleChannel:e,markDef:i,config:s,scaleType:o,isCountAggregate:u});if(a&&l==="show"){const d=((c=s.scale.invalid)==null?void 0:c[e])??"zero-or-min";return{test:Cj(Nt(a,{expr:"datum"}),!1),...LJt(d,n,r)}}}function LJt(e,t,n){if(bJt(e)){const{value:r}=e;return en(r)?{signal:r.signal}:{value:r}}return y4e({scale:t,scaleName:n,mode:"zeroOrMin"})}function are(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:s,config:o}=e,a=__(t),u=ure(e),l=v4e({scaleChannel:a,channelDef:n,scale:i,scaleName:s,markDef:r,config:o});return l!==void 0?[l,u]:u}function FJt(e){const{datum:t}=e;return x_(t)?Fb(t):`${Pi(t)}`}function ib(e,t,n,r){const i={};if(t&&(i.scale=t),Zp(e)){const{datum:s}=e;x_(s)?i.signal=Fb(s):en(s)?i.signal=s.signal:Ck(s)?i.signal=s.expr:i.value=s}else i.field=Nt(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function nL({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!en(o)&&0<o&&o<1?"datum":void 0,u=Nt(t,{expr:a,suffix:i}),l=n!==void 0?Nt(n,{expr:a}):Nt(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const d=o===0?u:l;c.field=d}else{const d=en(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${d})`}return r&&(c.offset=r),c}function jJt({scaleName:e,fieldDef:t}){const n=Nt(t,{expr:"datum"}),r=Nt(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function ure({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(Xn(t)){const d=o==null?void 0:o.get("type");if(ju(t)){c??(c=Qy({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:f,timeUnit:h,type:p}=t;if(qi(f)||c&&h&&p===VE)return a!=null&&a.impute?ib(t,s,{binSuffix:"mid"},{offset:u}):c&&!Zo(d)?nL({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):ib(t,s,Pk(t,e)?{binSuffix:"range"}:{},{offset:u});if(pa(f)){if(Et(n))return nL({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});wt(q6e(e===ls?lh:Yp))}}return ib(t,s,Zo(d)?{binSuffix:"range"}:{},{offset:u,band:d==="band"?c??t.bandPosition??.5:void 0})}else if(Kf(t)){const d=t.value,f=u?{offset:u}:{};return{...l2(e,d),...f}}}return ir(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function l2(e,t){return _r(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:_r(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Ji(t)}function zb(e){return e&&e!=="number"&&e!=="time"}function b4e(e,t,n){return`${e}(${t}${n?`, ${Pi(n)}`:""})`}const BJt="  ";function lre({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(zb(n))return Sf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=_4e(e,r,i),a=qE(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Sf({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Sf({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&Et(e)&&e.timeUnit===void 0)return Sf({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(GE(e)){const c=UJt({field:o,timeUnit:Et(e)?(u=Jo(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:S_(e)&&((l=e.scale)==null?void 0:l.type)===ma.UTC});return c?{signal:c}:void 0}if(t=sW({type:a,specifiedFormat:t,config:s,normalizeStack:i}),Et(e)&&qi(e.bin)){const c=Nt(e,{expr:r,binSuffix:"end"});return{signal:Ik(o,c,t,n,s)}}else return t||qE(e)==="quantitative"?{signal:`${E4e(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function _4e(e,t,n){return Et(e)?n?`${Nt(e,{expr:t,suffix:"end"})}-${Nt(e,{expr:t,suffix:"start"})}`:Nt(e,{expr:t}):FJt(e)}function Sf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=_4e(e,r,i)),o!=="datum.value"&&Et(e)&&qi(e.bin)){const a=Nt(e,{expr:r,binSuffix:"end"});return{signal:Ik(o,a,t,n,s)}}return{signal:b4e(n,o,t)}}function w4e(e,t,n,r,i,s){var o;if(!(jt(r)&&zb(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&qE(e)==="quantitative"&&(i.normalizedNumberFormatType&&WE(e)&&e.stack==="normalize"||i.numberFormatType))){if(WE(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return sW({type:"quantitative",config:i,normalizeStack:!0});if(GE(e)){const a=Et(e)?(o=Jo(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:zJt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return sW({type:t,specifiedFormat:n,config:i})}}function x4e(e,t,n){var r;if(e&&(en(e)||e==="number"||e==="time"))return e;if(GE(t)&&n!=="time"&&n!=="utc")return Et(t)&&((r=Jo(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function sW({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(jt(t))return t;if(e===jb)return r?n.normalizedNumberFormat:n.numberFormat}function zJt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:Z6e(t)}:r?void 0:n.timeFormat)}function E4e(e,t){return`format(${e}, "${t||""}")`}function zye(e,t,n,r){return zb(n)?b4e(n,e,t):E4e(e,(jt(t)?t:void 0)??r.numberFormat)}function Ik(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return Ik(e,t,i.numberFormat,i.numberFormatType,i);const s=zye(e,n,r,i),o=zye(t,n,r,i);return`${Cj(e,!1)} ? "null" : ${s} + "${BJt}" + ${o}`}function UJt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=jt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):XQt(t,e,s)}const Pj="min",VJt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Uye(e){return e in VJt}function HJt(e){return!!(e!=null&&e.encoding)}function Qm(e){return e&&(e.op==="count"||!!e.field)}function S4e(e){return e&&ut(e)}function Rk(e){return"row"in e||"column"in e}function cre(e){return!!e&&"header"in e}function Nj(e){return"facet"in e}function qJt(e){return e.param}function WJt(e){return e&&!jt(e)&&"repeat"in e}function Vye(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function dre(e){return"sort"in e}function Qy({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Xn(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Et(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Ip("timeUnitBandPosition",n,r);if(qi(s))return .5}}function T4e({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,d;const a=Fl(e),u=Si(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(Et(t)){const{timeUnit:f,bin:h}=t;if(f&&!n)return{band:Ip("timeUnitBandSize",r,i)};if(qi(h)&&!Zo(s))return{band:1}}if($I(r.type))return s?Zo(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(d=i[r.type])==null?void 0:d.discreteBandSize}function C4e(e,t,n,r){return qi(e.bin)||e.timeUnit&&ju(e)&&e.type==="temporal"?Qy({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function A4e(e){return e&&!!e.sort&&!e.field}function Oj(e){return e&&"condition"in e}function Dj(e){const t=e==null?void 0:e.condition;return!!t&&!ut(t)&&Et(t)}function kk(e){const t=e==null?void 0:e.condition;return!!t&&!ut(t)&&Xn(t)}function GJt(e){const t=e==null?void 0:e.condition;return!!t&&(ut(t)||Kf(t))}function Et(e){return e&&(!!e.field||e.aggregate==="count")}function qE(e){return e==null?void 0:e.type}function Zp(e){return e&&"datum"in e}function ey(e){return ju(e)&&!iL(e)||rL(e)}function Hye(e){return ju(e)&&e.type==="quantitative"&&!e.bin||rL(e)}function rL(e){return Zp(e)&&Gr(e.datum)}function Xn(e){return Et(e)||Zp(e)}function ju(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function Kf(e){return e&&"value"in e&&"value"in e}function S_(e){return e&&("scale"in e||"sort"in e)}function WE(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function I4e(e){return e&&"legend"in e}function R4e(e){return e&&("format"in e||"formatType"in e)}function YJt(e){return Sl(e,["legend","axis","header","scale"])}function KJt(e){return"op"in e}function Nt(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(QJt(e))n=y6e("count");else{let o;if(!t.nofn)if(KJt(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;qi(a)?(o=P6e(a),i=(t.binSuffix??"")+(t.suffix??"")):u?Pv(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):wg(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!E_(l)&&(o=QQt(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?eT(n):t.expr?p6e(n,t.expr)+s:kd(n)+s}function iL(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Et(e)&&!!e.bin;case"temporal":return!1}throw new Error(z6e(e.type))}function XJt(e){var t;return S_(e)&&HE((t=e.scale)==null?void 0:t.type)}function QJt(e){return e.aggregate==="count"}function JJt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(qi(r))return`${n} (binned)`;if(i&&!E_(i)){const a=(o=Jo(i))==null?void 0:o.unit;if(a)return`${n} (${Tj(a).join("-")})`}else if(s)return Pv(s)?`${n} for max ${s.argmax}`:wg(s)?`${n} for min ${s.argmin}`:`${xk(s)} of ${n}`;return n}function ZJt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Pv(t))return`${i} for argmax(${t.argmax})`;if(wg(t))return`${i} for argmin(${t.argmin})`;const s=r&&!E_(r)?Jo(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||qi(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const k4e=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return ZJt(e);default:return JJt(e,t)}};let P4e=k4e;function N4e(e){P4e=e}function eZt(){N4e(k4e)}function Fx(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=fre(e))==null?void 0:a.title;if(!Et(e))return i??e.title;const s=e,o=r?hre(s,t):void 0;return n?Vs(i,s.title,o):i??s.title??o}function fre(e){if(WE(e)&&e.axis)return e.axis;if(I4e(e)&&e.legend)return e.legend;if(cre(e)&&e.header)return e.header}function hre(e,t){return P4e(e,t)}function sL(e){if(R4e(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=fre(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function tZt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(dre(e)&&ut(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Pv(n)&&!wg(n))return"quantitative";if(S_(e)&&((s=e.scale)!=null&&s.type))switch(rW[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Xf(e){if(Et(e))return e;if(Dj(e))return e.condition}function Ao(e){if(Xn(e))return e;if(kk(e))return e.condition}function O4e(e,t,n,r={}){if(jt(e)||Gr(e)||Ev(e)){const i=jt(e)?"string":Gr(e)?"number":"boolean";return wt(eQt(t,i,e)),{value:e}}return Xn(e)?oL(e,t,n,r):kk(e)?{...e,condition:oL(e.condition,t,n,r)}:e}function oL(e,t,n,r){if(R4e(e)){const{format:i,formatType:s,...o}=e;if(zb(s)&&!n.customFormatTypes)return wt($ye(t)),oL(o,t,n,r)}else{const i=WE(e)?"axis":I4e(e)?"legend":cre(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(zb(o)&&!n.customFormatTypes)return wt($ye(t)),oL({...e,[i]:a},t,n,r)}}return Et(e)?pre(e,t,r):nZt(e)}function nZt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Gr(n)?"quantitative":jt(n)?"nominal":x_(n)?"temporal":void 0,{...e,type:t}}function pre(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!Une(r)&&!Pv(r)&&!wg(r)&&(wt(nQt(r)),delete a.aggregate),i&&(a.timeUnit=Jo(i)),o&&(a.field=`${o}`),qi(s)&&(a.bin=Mj(s,t)),pa(s)&&!Hs(t)&&wt(DQt(t)),ju(a)){const{type:u}=a,l=sJt(u);u!==l&&(a.type=l),u!=="quantitative"&&xj(r)&&(wt(tQt(u,r)),a.type="quantitative")}else if(!T6e(t)){const u=tZt(a,t);a.type=u}if(ju(a)){const{compatible:u,warning:l}=rZt(a,t)||{};u===!1&&wt(l)}if(dre(a)&&jt(a.sort)){const{sort:u}=a;if(Uye(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&Uye(l))return{...a,sort:{encoding:l,order:"descending"}}}if(cre(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function Mj(e,t){return Ev(e)?{maxbins:Aye(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:Aye(t)}:e}const Rw={compatible:!0};function rZt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Km:case Xm:case gj:return iL(e)?Rw:{compatible:!1,warning:oQt(t)};case ls:case ta:case Cv:case tT:case $l:case Kp:case Xp:case Ek:case Sk:case yj:case Lb:case vj:case bj:case b_:case Bd:case ch:case _j:return Rw;case fh:case Pd:case dh:case hh:return n!==jb?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Rw;case zg:case Av:case Iv:case Rv:case Bg:case jg:case Fg:case lh:case Yp:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Rw;case Ll:case kv:return!iL(e)&&!XJt(e)?{compatible:!1,warning:aQt(t)}:Rw;case zE:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Rw}}function GE(e){const{formatType:t}=sL(e);return t==="time"||!t&&iZt(e)}function iZt(e){return e&&(e.type==="temporal"||Et(e)&&!!e.timeUnit)}function $j(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=Jo(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return Ck(e)?a=e.expr:en(e)?a=e.signal:x_(e)?(o=!0,a=Fb(e)):(jt(e)||Gr(e))&&o&&(a=`datetime(${Pi(e)})`,WQt(s)&&(Gr(e)&&e<1e4||jt(e)&&isNaN(Date.parse(e)))&&(a=Fb({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Pi(e)}function D4e(e,t){const{type:n}=e;return t.map(r=>{const i=Et(e)&&!E_(e.timeUnit)?e.timeUnit:void 0,s=$j(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function Pk(e,t){return qi(e.bin)?Jp(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const qye={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Nk(e){return e==null?void 0:e.condition}const M4e=["domain","grid","labels","ticks","title"],sZt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},$4e={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},oZt={...$4e,style:1,labelExpr:1,encoding:1};function Wye(e){return!!oZt[e]}const aZt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},L4e=yt(aZt);function Vg(e){return"mark"in e}class Lj{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Vg(t)?MJt(t.mark)===this.name:!1}}function sb(e,t){const n=e&&e[t];return n?ut(n)?jE(n,r=>!!r.field):Et(n)||Dj(n):!1}function F4e(e,t){const n=e&&e[t];return n?ut(n)?jE(n,r=>!!r.field):Et(n)||Zp(n)||kk(n):!1}function j4e(e,t){if(Hs(t)){const n=e[t];if((Et(n)||Zp(n))&&(i4e(n.type)||Et(n)&&n.timeUnit)){const r=Lne(t);return F4e(e,r)}}return!1}function B4e(e){return jE(oXt,t=>{if(sb(e,t)){const n=e[t];if(ut(n))return jE(n,r=>!!r.aggregate);{const r=Xf(n);return r&&!!r.aggregate}}return!1})}function z4e(e,t){const n=[],r=[],i=[],s=[],o={};return mre(e,(a,u)=>{if(Et(a)){const{field:l,aggregate:c,bin:d,timeUnit:f,...h}=a;if(c||f||d){const p=fre(a),m=p==null?void 0:p.title;let y=Nt(a,{forAs:!0});const v={...m?[]:{title:Fx(a,t,{allowDisabling:!0})},...h,field:y};if(c){let w;if(Pv(c)?(w="argmax",y=Nt({op:"argmax",field:c.argmax},{forAs:!0}),v.field=`${y}.${l}`):wg(c)?(w="argmin",y=Nt({op:"argmin",field:c.argmin},{forAs:!0}),v.field=`${y}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(w=c),w){const x={op:w,as:y};l&&(x.field=l),s.push(x)}}else if(n.push(y),ju(a)&&qi(d)){if(r.push({bin:d,field:l,as:y}),n.push(Nt(a,{binSuffix:"end"})),Pk(a,u)&&n.push(Nt(a,{binSuffix:"range"})),Hs(u)){const w={field:`${y}_end`};o[`${u}2`]=w}v.bin="binned",T6e(u)||(v.type=jb)}else if(f&&!E_(f)){i.push({timeUnit:f,field:l,as:y});const w=ju(a)&&a.type!==VE&&"time";w&&(u===Ek||u===Lb?v.formatType=w:gXt(u)?v.legend={formatType:w,...v.legend}:Hs(u)&&(v.axis={formatType:w,...v.axis}))}o[u]=v}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function uZt(e,t,n){const r=vXt(t,n);if(r){if(r==="binned"){const i=e[t===lh?ls:ta];return!!(Et(i)&&Et(e[t])&&pa(i.bin))}}else return!1;return!0}function lZt(e,t,n,r){const i={};for(const s of yt(e))S6e(s)||wt(sQt(s));for(let s of fXt){if(!e[s])continue;const o=e[s];if(Tk(s)){const a=dXt(s),u=i[a];if(Et(u)&&iJt(u.type)&&Et(o)&&!u.timeUnit){wt(ZXt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(wt(JXt),s=Bd),!uZt(e,s,t)){wt(Sj(s,t));continue}if(s===Bg&&t==="line"){const a=Xf(e[s]);if(a!=null&&a.aggregate){wt(iQt);continue}}if(s===$l&&(n?"fill"in e:"stroke"in e)){wt(U6e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===Sk||s===zE&&!ut(o)&&!Kf(o)||s===Lb&&ut(o)){if(o){if(s===zE){const a=e[s];if(A4e(a)){i[s]=a;continue}}i[s]=Ft(o).reduce((a,u)=>(Et(u)?a.push(pre(u,s)):wt(nW(u,s)),a),[])}}else{if(s===Lb&&o===null)i[s]=null;else if(!Et(o)&&!Zp(o)&&!Kf(o)&&!Oj(o)&&!en(o)){wt(nW(o,s));continue}i[s]=O4e(o,s,r)}}return i}function Fj(e,t){const n={};for(const r of yt(e)){const i=O4e(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function cZt(e){const t=[];for(const n of yt(e))if(sb(e,n)){const r=e[n],i=Ft(r);for(const s of i)Et(s)?t.push(s):Dj(s)&&t.push(s.condition)}return t}function mre(e,t,n){if(e)for(const r of yt(e)){const i=e[r];if(ut(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function dZt(e,t,n,r){return e?yt(e).reduce((i,s)=>{const o=e[s];return ut(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function U4e(e,t){return yt(t).reduce((n,r)=>{switch(r){case ls:case ta:case vj:case _j:case bj:case lh:case Yp:case Cv:case tT:case Bd:case jg:case ch:case Fg:case dh:case fh:case hh:case Pd:case Ek:case Ll:case b_:case Lb:return n;case zE:if(e==="line"||e==="trail")return n;case Sk:case yj:{const i=t[r];if(ut(i)||Et(i))for(const s of Ft(i))s.aggregate||n.push(Nt(s,{}));return n}case Bg:if(e==="trail")return n;case $l:case Kp:case Xp:case zg:case Av:case Iv:case kv:case Rv:{const i=Xf(t[r]);return i&&!i.aggregate&&n.push(Nt(i,{})),n}}},[])}function fZt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(ut(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return ut(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function oW(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${gre(t)}`:"";return{field:o+t.field,type:t.type,title:en(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=cZt(n).map(YJt);return{tooltip:[...i,...Qh(s,Ar)]}}function gre(e){const{title:t,field:n}=e;return Vs(t,n)}function yre(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:d={}})=>{const f=gre(n);return V4e(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...f!==void 0?{title:f}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...jt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...d}})}}function V4e(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Rp(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Ev(e[t])?{}:e[t]}}]:[]}function H4e(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:zO(s,n),continuousAxisChannelDef2:zO(o,n),continuousAxisChannelDefError:zO(a,n),continuousAxisChannelDefError2:zO(u,n),continuousAxis:i}}function zO(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&wt(OQt(n,t)),r}else return e}function q4e(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(Rp(n)&&n.orient)return n.orient;if(ey(i)){if(ey(s)){const o=Et(i)&&i.aggregate,a=Et(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return GE(s)&&!GE(i)?"horizontal":"vertical"}return"horizontal"}else{if(ey(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const aL="boxplot",hZt=["box","median","outliers","rule","ticks"],pZt=new Lj(aL,G4e);function W4e(e){return Gr(e)?"tukey":e}function G4e(e,{config:t}){e={...e,encoding:Fj(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=Rp(n)?n:{type:n};i&&wt(B6e("boxplot"));const u=a.extent??t.boxplot.extent,l=Si("size",a,t),c=a.invalid,d=W4e(u),{bins:f,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:y,groupby:v,aggregate:w,encodingWithoutContinuousAxis:x,ticksOrient:S,boxOrient:E,customTooltipWithoutAggregatedField:T}=mZt(e,u,t),A=eT(m.field),{color:I,size:k,...D}=x,M=Te=>yre(a,y,m,Te,t.boxplot),z=M(D),O=M(x),$=($t(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",F=M({...D,...k?{size:k}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...I||{value:$}}}}),B=oW([{fieldPrefix:d==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:d==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,x),q={type:"tick",color:"black",opacity:1,orient:S,invalid:c,aria:!1},G=d==="min-max"?B:oW([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,x),K=[...z({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:G}),...z({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:G}),...z({partName:"ticks",mark:q,positionPrefix:"lower_whisker",extraEncoding:G}),...z({partName:"ticks",mark:q,positionPrefix:"upper_whisker",extraEncoding:G})],L=[...d!=="tukey"?K:[],...O({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:B}),...F({partName:"median",mark:{type:"tick",invalid:c,...$t(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:S,aria:!1},positionPrefix:"mid_box",extraEncoding:B})];if(d==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:L};const V=`datum["lower_box_${m.field}"]`,X=`datum["upper_box_${m.field}"]`,H=`(${X} - ${V})`,Q=`${V} - ${u} * ${H}`,Z=`${X} + ${u} * ${H}`,ne=`datum["${m.field}"]`,ue={joinaggregate:Y4e(m.field),groupby:v},le={transform:[{filter:`(${Q} <= ${ne}) && (${ne} <= ${Z})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${A}`},{op:"max",field:m.field,as:`upper_whisker_${A}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${A}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${A}`},...w],groupby:v}],layer:K},{tooltip:ce,...ge}=D,{scale:se,axis:te}=m,Ee=gre(m),we=Sl(te,["title"]),De=V4e(a,"outliers",t.boxplot,{transform:[{filter:`(${ne} < ${Q}) || (${ne} > ${Z})`}],mark:"point",encoding:{[y]:{field:m.field,type:m.type,...Ee!==void 0?{title:Ee}:{},...se!==void 0?{scale:se}:{},...ki(we)?{}:{axis:we}},...ge,...I?{color:I}:{},...T?{tooltip:T}:{}}})[0];let Le;const Ne=[...f,...h,ue];return De?Le={transform:Ne,layer:[De,le]}:(Le=le,Le.transform.unshift(...Ne)),{...o,layer:[Le,{transform:p,layer:L}]}}function Y4e(e){const t=eT(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function mZt(e,t,n){const r=q4e(e,aL),{continuousAxisChannelDef:i,continuousAxis:s}=H4e(e,r,aL),o=i.field,a=eT(o),u=W4e(t),l=[...Y4e(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:d,...f}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=fZt(f),{bins:m,timeUnits:y,aggregate:v,groupby:w,encoding:x}=z4e(p,n),S=r==="vertical"?"horizontal":"vertical",E=r,T=[...m,...y,{aggregate:[...v,...l],groupby:w},...c];return{bins:m,timeUnits:y,transform:T,groupby:w,aggregate:v,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:x,ticksOrient:S,boxOrient:E,customTooltipWithoutAggregatedField:h}}const vre="errorbar",gZt=["ticks","rule"],yZt=new Lj(vre,K4e);function K4e(e,{config:t}){e={...e,encoding:Fj(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=X4e(e,vre,t);delete s.size;const c=yre(a,i,r,s,t.errorbar),d=a.thickness,f=a.size,h={type:"tick",orient:o,aria:!1,...d!==void 0?{thickness:d}:{},...f!==void 0?{size:f}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...d!==void 0?{size:d}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function vZt(e,t){const{encoding:n}=e;if(bZt(n))return{orient:q4e(e,t),inputType:"raw"};const r=_Zt(n),i=wZt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(Xn(a)&&Xn(u))throw new Error(`${t} cannot have both x2 and y2`);if(Xn(a)){if(ey(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Xn(u)){if(ey(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(Xn(u)&&!Xn(a))throw new Error(`${t} cannot have xError2 without xError`);if(Xn(c)&&!Xn(l))throw new Error(`${t} cannot have yError2 without yError`);if(Xn(a)&&Xn(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Xn(a)){if(ey(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Xn(l)){if(ey(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function bZt(e){return(Xn(e.x)||Xn(e.y))&&!Xn(e.x2)&&!Xn(e.y2)&&!Xn(e.xError)&&!Xn(e.xError2)&&!Xn(e.yError)&&!Xn(e.yError2)}function _Zt(e){return Xn(e.x2)||Xn(e.y2)}function wZt(e){return Xn(e.xError)||Xn(e.xError2)||Xn(e.yError)||Xn(e.yError2)}function X4e(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=Rp(r)?r:{type:r};s&&wt(B6e(t));const{orient:l,inputType:c}=vZt(e,t),{continuousAxisChannelDef:d,continuousAxisChannelDef2:f,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=H4e(e,l,t),{errorBarSpecificAggregate:y,postAggregateCalculates:v,tooltipSummary:w,tooltipTitleWithFieldName:x}=xZt(u,d,f,h,p,c,t,n),{[m]:S,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:T,[m==="x"?"xError2":"yError2"]:A,...I}=i,{bins:k,timeUnits:D,aggregate:M,groupby:z,encoding:O}=z4e(I,n),$=[...M,...y],F=c!=="raw"?[]:z,B=oW(w,d,O,x);return{transform:[...a.transform??[],...k,...D,...$.length===0?[]:[{aggregate:$,groupby:F}],...v],groupby:F,continuousAxisChannelDef:d,continuousAxis:m,encodingWithoutContinuousAxis:O,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:B}}function xZt(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let d,f=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&wt(NQt(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],d=[{fieldPrefix:"center_",titlePrefix:xk(h)},{fieldPrefix:"upper_",titlePrefix:Gye(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:Gye(h,p,"-")}],f=!0;else{let m,y,v;p==="ci"?(m="mean",y="ci0",v="ci1"):(m="median",y="q1",v="q3"),u=[{op:y,field:c,as:`lower_${c}`},{op:v,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],d=[{fieldPrefix:"upper_",titlePrefix:Fx({field:c,aggregate:v,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Fx({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Fx({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&wt(PQt(e.center,e.extent)),s==="aggregated-upper-lower"?(d=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(d=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)d.push({fieldPrefix:h.as.substring(0,6),titlePrefix:$b($b(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:d,tooltipTitleWithFieldName:f}}function Gye(e,t,n){return`${xk(e)} ${n} ${t}`}const bre="errorband",EZt=["band","borders"],SZt=new Lj(bre,Q4e);function Q4e(e,{config:t}){e={...e,encoding:Fj(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=X4e(e,bre,t),l=o,c=yre(l,i,r,s,t.errorband),d=e.encoding.x!==void 0&&e.encoding.y!==void 0;let f={type:d?"area":"rect"},h={type:d?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return d?(f={...f,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?wt(Fye("interpolate")):l.tension&&wt(Fye("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:f,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const J4e={};function _re(e,t,n){const r=new Lj(e,t);J4e[e]={normalizer:r,parts:n}}function TZt(){return yt(J4e)}_re(aL,G4e,hZt);_re(vre,K4e,gZt);_re(bre,Q4e,EZt);const CZt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],Z4e={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},eje={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},AZt=yt(Z4e),IZt=yt(eje),RZt={header:1,headerRow:1,headerColumn:1,headerFacet:1},tje=yt(RZt),nje=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],kZt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},PZt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Qf="_vgsid_",NZt={point:{on:"click",fields:[Qf],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function wre(e){return e==="legend"||!!(e!=null&&e.legend)}function _U(e){return wre(e)&&$t(e)}function xre(e){return!!(e!=null&&e.select)}function rje(e){const t=[];for(const n of e||[]){if(xre(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function OZt(e){return jj(e)||Sre(e)||Ere(e)}function Ere(e){return"concat"in e}function jj(e){return"vconcat"in e}function Sre(e){return"hconcat"in e}function ije({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function kp(e){return $t(e)&&e.step!==void 0}function Yye(e){return e.view||e.width||e.height}const Kye=20,DZt={align:1,bounds:1,center:1,columns:1,spacing:1},MZt=yt(DZt);function $Zt(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(Nj(e)&&!Rk(e.facet)||Ere(e))&&(i.columns=o),jj(e)&&(i.columns=1);for(const a of MZt)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=Gr(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function aW(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function uL(e,t){const n=lL(e,t);return kp(n)?n.step:sje}function lL(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Vs(n,{step:e.step})}const sje=20,LZt={continuousWidth:200,continuousHeight:200,step:sje},FZt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:LZt,mark:RJt,arc:{},area:{},bar:NJt,circle:{},geoshape:{},image:{},line:{},point:{},rect:OJt,rule:{color:"black"},square:{},text:{color:"black"},tick:DJt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:cJt,projection:{},legend:kZt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:NZt,style:{},title:{},facet:{spacing:Kye},concat:{spacing:Kye},normalizedNumberFormat:".0%"},vm=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Xye={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Qye={blue:vm[0],orange:vm[1],red:vm[2],teal:vm[3],green:vm[4],yellow:vm[5],purple:vm[6],pink:vm[7],brown:vm[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function jZt(e={}){return{signals:[{name:"color",value:$t(e)?{...Qye,...e}:Qye}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function BZt(e){return{signals:[{name:"fontSize",value:$t(e)?{...Xye,...e}:Xye}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function zZt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function oje(e){const t=yt(e||{}),n={};for(const r of t){const i=e[r];n[r]=Nk(i)?O6e(i):oc(i)}return n}function UZt(e){const t=yt(e),n={};for(const r of t)n[r]=oje(e[r]);return n}const VZt=[...p4e,...L4e,...tje,"background","padding","legend","lineBreak","scale","style","title","view"];function aje(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=VS({},Bn(FZt),n?zZt(n):{},t?jZt(t):{},r?BZt(r):{},s||{});i&&HS(o,"selection",i,!0);const a=Sl(o,VZt);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=oc(o[u]));for(const u of p4e)o[u]&&(a[u]=Va(o[u]));for(const u of L4e)o[u]&&(a[u]=oje(o[u]));for(const u of tje)o[u]&&(a[u]=Va(o[u]));if(o.legend&&(a.legend=Va(o.legend)),o.scale){const{invalid:u,...l}=o.scale,c=Va(u,{level:1});a.scale={...Va(l),...yt(c).length>0?{invalid:c}:{}}}return o.style&&(a.style=UZt(o.style)),o.title&&(a.title=Va(o.title)),o.view&&(a.view=Va(o.view)),a}const HZt=new Set(["view",...EJt]),qZt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],WZt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...IJt};function GZt(e){e=Bn(e);for(const t of qZt)delete e[t];if(e.axis)for(const t in e.axis)Nk(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of CZt)delete e.legend[t];if(e.mark){for(const t of Bye)delete e.mark[t];e.mark.tooltip&&$t(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(rje(e.params)),delete e.params);for(const t of HZt){for(const r of Bye)delete e[t][r];const n=WZt[t];if(n)for(const r of n)delete e[t][r];KZt(e,t)}for(const t of TZt())delete e[t];YZt(e);for(const t in e)$t(e[t])&&ki(e[t])&&delete e[t];return ki(e)?void 0:e}function YZt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=N6e(e.title);ki(t)||(e.style["group-title"]={...e.style["group-title"],...t}),ki(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),ki(r)?delete e.title:e.title=r}function KZt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};ki(s)||(e.style[n??t]=s),delete e[t]}function Bj(e){return"layer"in e}function XZt(e){return"repeat"in e}function QZt(e){return!ut(e.repeat)&&e.repeat.layer}class Tre{map(t,n){return Nj(t)?this.mapFacet(t,n):XZt(t)?this.mapRepeat(t,n):Sre(t)?this.mapHConcat(t,n):jj(t)?this.mapVConcat(t,n):Ere(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(Bj(t))return this.mapLayer(t,n);if(Vg(t))return this.mapUnit(t,n);throw new Error(Vne(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const JZt={zero:1,center:1,normalize:1};function ZZt(e){return e in JZt}const een=new Set([d4e,Ij,Aj,tL,kj,ire,sre,Rj,f4e,rre]),ten=new Set([Ij,Aj,d4e]);function kw(e){return Et(e)&&qE(e)==="quantitative"&&!e.bin}function Jye(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(Et(o)&&Et(a))if(kw(o)&&kw(a)){if(o.stack)return t;if(a.stack)return i;const u=Et(o)&&!!o.aggregate,l=Et(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(kw(o))return t;if(kw(a))return i}else{if(kw(o))return s&&n==="vertical"?void 0:t;if(kw(a))return s&&n==="horizontal"?void 0:i}}function nen(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function uje(e,t){var m,y;const n=Rp(e)?e:{type:e},r=n.type;if(!een.has(r))return null;const i=Jye(t,"x",n)||Jye(t,"theta",n);if(!i)return null;const s=t[i],o=Et(s)?Nt(s,{}):void 0,a=nen(i),u=[],l=new Set;if(t[a]){const v=t[a],w=Et(v)?Nt(v,{}):void 0;w&&w!==o&&(u.push(a),l.add(w))}const c=a==="x"?"xOffset":"yOffset",d=t[c],f=Et(d)?Nt(d,{}):void 0;f&&f!==o&&(u.push(c),l.add(f));const h=hXt.reduce((v,w)=>{if(w!=="tooltip"&&sb(t,w)){const x=t[w];for(const S of Ft(x)){const E=Xf(S);if(E.aggregate)continue;const T=Nt(E,{});(!T||!l.has(T))&&v.push({channel:w,fieldDef:E})}}return v},[]);let p;return s.stack!==void 0?Ev(s.stack)?p=s.stack?"zero":null:p=s.stack:ten.has(r)&&(p="zero"),!p||!ZZt(p)||B4e(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((y=s==null?void 0:s.scale)==null?void 0:y.type)!==ma.LINEAR&&s!=null&&s.stack&&wt(IQt(s.scale.type)),Xn(t[Qp(i)])?(s.stack!==void 0&&wt(AQt(i)),null):(Et(s)&&s.aggregate&&!TXt.has(s.aggregate)&&wt(RQt(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:Ov(r),stackBy:h,offset:p}))}function lje(e,t,n){const r=Va(e),i=Si("orient",r,n);if(r.orient=oen(r.type,t,i),i!==void 0&&i!==r.orient&&wt(dQt(r.orient,i)),r.type==="bar"&&r.orient){const u=Si("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:PJt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=Si("opacity",r,n),o=Si("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=ien(r.type,t)),Si("cursor",r,n)===void 0&&(r.cursor=ren(r,t,n)),r}function ren(e,t,n){return t.href||e.href||Si("href",e,n)?"pointer":e.cursor}function ien(e,t){if(_r([kj,rre,ire,sre],e)&&!B4e(t))return .7}function sen(e,t,{graticule:n}){if(n)return!1;const r=Ip("filled",e,t),i=e.type;return Vs(r,i!==kj&&i!==Rj&&i!==tL)}function oen(e,t,n){switch(e){case kj:case ire:case sre:case f4e:case wJt:case _Jt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case Ij:if(Et(r)&&(pa(r.bin)||Et(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Et(i)&&(pa(i.bin)||Et(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(Et(r)&&r.type===jb&&!qi(r.bin)||rL(r))&&Et(i)&&pa(i.bin)?"horizontal":"vertical";if(!o)return(Et(i)&&i.type===jb&&!qi(i.bin)||rL(i))&&Et(r)&&pa(r.bin)?"vertical":"horizontal"}case tL:if(s&&!(Et(r)&&pa(r.bin))&&o&&!(Et(i)&&pa(i.bin)))return;case Aj:if(o)return Et(i)&&pa(i.bin)?"horizontal":"vertical";if(s)return Et(r)&&pa(r.bin)?"vertical":"horizontal";if(e===tL){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case Rj:case rre:{const a=Hye(r),u=Hye(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=ju(r)&&r.type===VE,c=ju(i)&&i.type===VE;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function aen(e){const{point:t,line:n,...r}=e;return yt(r).length>1?r:r.type}function uen(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Sl(e[t],["point","line"])});return e}function wU(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?$t(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?$t(t.point)?t.point:{}:void 0}function Zye(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class len{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Vg(t)){const{mark:r,encoding:i}=t,s=Rp(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!wU(s,n[s.type],i);case"area":return!!wU(s,n[s.type],i)||!!Zye(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,d=Fj(l,i),f=Rp(a)?a:{type:a},h=wU(f,i[f.type],d),p=f.type==="area"&&Zye(f,i[f.type]),m=[{name:u,...s?{params:s}:{},mark:aen({...f.type==="area"&&f.opacity===void 0&&f.fillOpacity===void 0?{opacity:.7}:{},...f}),encoding:Sl(d,["shape"])}],y=uje(lje(f,d,i),d);let v=d;if(y){const{fieldChannel:w,offset:x}=y;v={...d,[w]:{...d[w],...x?{stack:x}:{}}}}return v=Sl(v,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...FE(f,["clip","interpolate","tension","tooltip"]),...p},encoding:v}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...FE(f,["clip","tooltip"]),...h},encoding:v}),r({...c,layer:m},{...n,config:uen(i)})}}function cen(e,t){return t?Rk(e)?dje(e,t):cje(e,t):e}function xU(e,t){return t?dje(e,t):e}function uW(e,t,n){const r=t[e];if(WJt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};wt(qXt(r.repeat));return}return t}function cje(e,t){if(e=uW("field",e,t),e!==void 0){if(e===null)return null;if(dre(e)&&Qm(e.sort)){const n=uW("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function eve(e,t){if(Et(e))return cje(e,t);{const n=uW("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function tve(e,t){if(Xn(e)){const n=eve(e,t);if(n)return n;if(Oj(e))return{condition:e.condition}}else{if(kk(e)){const n=eve(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function dje(e,t){const n={};for(const r in e)if(cn(e,r)){const i=e[r];if(ut(i))n[r]=i.map(s=>tve(s,t)).filter(s=>s);else{const s=tve(i,t);s!==void 0&&(n[r]=s)}}return n}class den{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Vg(t)){const{encoding:n,mark:r}=t;if(r==="line"||Rp(r)&&r.type==="line")for(const i of cXt){const s=__(i),o=n[s];if(n[i]&&(Et(o)&&!pa(o.bin)||Zp(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return wt(cQt(!!i.x2,!!i.y2)),r({...t,mark:$t(s)?{...s,type:"rule"}:"rule"},n)}}class fen extends Tre{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[pZt,yZt,SZt,new len,new den]}map(t,n){if(Vg(t)){const r=sb(t.encoding,Km),i=sb(t.encoding,Xm),s=sb(t.encoding,gj);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=xU(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return QZt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(d=>{const f={...l,layer:d},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${us(d)}`,p=this.mapLayerOrUnit(i,{...n,repeater:f,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!ut(r)&&t.columns&&(t=Sl(t,["columns"]),wt(Dye("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!ut(r)&&r.row||[u?u.row:null],d=!ut(r)&&r.column||[u?u.column:null],f=ut(r)&&r||[u?u.repeat:null];for(const p of f)for(const m of c)for(const y of d){const v={repeat:p,row:m,column:y,layer:u.layer},w=(i.name?`${i.name}_`:"")+l+"child__"+(ut(r)?`${us(p)}`:(r.row?`row_${us(m)}`:"")+(r.column?`column_${us(y)}`:"")),x=this.map(i,{...n,repeater:v,repeaterPrefix:w});x.name=w,a.push(Sl(x,["data"]))}const h=ut(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return Rk(r)&&t.columns&&(t=Sl(t,["columns"]),wt(Dye("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=rve({parentProjection:o,projection:i}),l=nve({parentEncoding:s,encoding:xU(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:d,params:f,encoding:h,...p}=t,{facetMapping:m,layout:y}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),v=xU(o,n.repeater);return this.mapFacet({...p,...y,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...d?{view:d}:{},...l?{projection:l}:{},mark:a,encoding:v,...f?{params:f}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&wt(uQt([...r?[Km]:[],...i?[Xm]:[]]));const o={},a={};for(const u of[Km,Xm]){const l=t[u];if(l){const{align:c,center:d,spacing:f,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:cen(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:nve({parentEncoding:n,encoding:s,layer:!0}),parentProjection:rve({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function nve({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...yt(e),...yt(t)]);for(const s of i){const o=t[s],a=e[s];if(Xn(o)){const u={...a,...o};r[s]=u}else kk(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||Kf(a)||en(a)||Xn(a)||ut(a))&&(r[s]=a)}}else r=t;return!r||ki(r)?void 0:r}function rve(e){const{parentProjection:t,projection:n}=e;return t&&n&&wt(QXt({parentProjection:t,projection:n})),n??t}function Cre(e){return"filter"in e}function hen(e){return(e==null?void 0:e.stop)!==void 0}function fje(e){return"lookup"in e}function pen(e){return"data"in e}function men(e){return"param"in e}function gen(e){return"pivot"in e}function yen(e){return"density"in e}function ven(e){return"quantile"in e}function ben(e){return"regression"in e}function _en(e){return"loess"in e}function wen(e){return"sample"in e}function xen(e){return"window"in e}function Een(e){return"joinaggregate"in e}function Sen(e){return"flatten"in e}function Ten(e){return"calculate"in e}function hje(e){return"bin"in e}function Cen(e){return"impute"in e}function Aen(e){return"timeUnit"in e}function Ien(e){return"aggregate"in e}function Ren(e){return"stack"in e}function ken(e){return"fold"in e}function Pen(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function Nen(e){return e.map(t=>Cre(t)?{filter:$x(t.filter,rJt)}:t)}class Oen extends Tre{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=ive(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=ive(t,n),t.encoding){const r={};for(const[i,s]of Ky(t.encoding))r[i]=pje(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:Ky(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const d of xa(n.selectionPredicates[s]??{}))d.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function ive(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(Cre(s))return{filter:lW(s,t)};if(hje(s)&&w_(s.bin))return{...s,bin:mje(s.bin)};if(fje(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function pje(e,t){var r,i;const n=Bn(e);if(Et(n)&&w_(n.bin)&&(n.bin=mje(n.bin)),S_(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(Oj(n))if(ut(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:lW(s,t)}});else{const{selection:s,param:o,test:a,...u}=pje(n.condition,t);n.condition=o?n.condition:{...u,test:lW(n.condition,t)}}return n}function mje(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function lW(e,t){const n=r=>$x(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):$x(e.test||e.filter,r=>r.selection?n(r.selection):r)}class cW extends Tre{map(t,n){const r=n.selections??[];if(t.params&&!Vg(t)){const i=[];for(const s of t.params)xre(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(jt(a)&&(a===t.name||i.includes(a))||ut(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=cW.prototype[e];cW.prototype[e]=function(n,r){return t.call(this,n,Den(n,r))}}function Den(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function gje(e,t){t===void 0&&(t=aje(e.config));const n=Fen(e,t),{width:r,height:i}=e,s=jen(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const Men=new fen,$en=new Oen,Len=new cW;function Fen(e,t={}){const n={config:t};return Len.map(Men.map($en.map(e,n),n),n)}function sve(e){return jt(e)?{type:e}:e??{}}function jen(e,t,n){let{width:r,height:i}=t;const s=Vg(e)||Bj(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(wt(kye("width")),r=void 0),i=="container"&&(wt(kye("height")),i=void 0));const a={type:"pad",...o,...n?sve(n.autosize):{},...sve(e.autosize)};if(a.type==="fit"&&!s&&(wt(DXt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&wt(Pye("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&wt(Pye("height")),!hc(a,{type:"pad"}))return a}function Ben(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function zen(e){return e?`fit-${wj(e)}`:"fit"}const Uen=["background","padding"];function ove(e,t){const n={};for(const r of Uen)e&&e[r]!==void 0&&(n[r]=oc(e[r]));return t&&(n.params=e.params),n}class Hg{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Hg(Bn(this.explicit),Bn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Vs(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of yt(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function $h(e){return{explicit:!0,value:e}}function Jl(e){return{explicit:!1,value:e}}function yje(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:zj(t,n,r,i)}}function zj(e,t,n,r){return e.explicit&&t.explicit&&wt(_Qt(n,r,e.value,t.value)),e}function Jy(e,t,n,r,i=zj){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:hc(e.value,t.value)?e:i(e,t,n,r)}class Ven extends Hg{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function YE(e){return"url"in e}function LI(e){return"values"in e}function vje(e){return"name"in e&&!YE(e)&&!LI(e)&&!gy(e)}function gy(e){return e&&(bje(e)||_je(e)||Are(e))}function bje(e){return"sequence"in e}function _je(e){return"sphere"in e}function Are(e){return"graticule"in e}var ks;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(ks||(ks={}));function wje({invalid:e,isPath:t}){switch(g4e(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function Hen(e){const{marks:t,scales:n}=wje(e);return t===n?ks.Main:n==="include-invalid-values"?ks.PreFilterInvalid:ks.PostFilterInvalid}function xje(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=kd(i.field),i}function Ub(e,t=!0,n=ru){if(ut(e)){const r=e.map(i=>Ub(i,t,n));return t?`[${r.join(", ")}]`:r}else if(x_(e))return n(t?Fb(e):qQt(e));return t?n(Pi(e)):e}function qen(e,t){for(const n of xa(e.component.selection??{})){const r=n.name;let i=`${r}${ev}, ${n.resolve==="global"?"true":`{unit: ${ob(e)}}`}`;for(const s of qj)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+wtn,on:[{events:{signal:n.name+ev},update:`modify(${Ct(n.name+Vb)}, ${i})`}]})}return Ire(t)}function Wen(e,t){if(e.component.selection&&yt(e.component.selection).length){const n=Ct(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Tv("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Ire(t)}function Gen(e,t){let n=!1;for(const r of xa(e.component.selection??{})){const i=r.name,s=Ct(i+Vb);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${Bje}(${s}, ${Ct(a)}${u}`})}n=!0;for(const a of qj)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),Ire(t)}function Yen(e,t){const n=[...t],r=ob(e,{escape:!1});for(const i of xa(e.component.selection??{})){const s={name:i.name+Vb};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:Qf}}]),i.init){const a=i.project.items.map(xje);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[Qf]:Ub(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:Ub(u,!1)}))}n.filter(a=>a.name===i.name+Vb).length||n.push(s)}return n}function Eje(e,t){for(const n of xa(e.component.selection??{}))for(const r of qj)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function Ken(e,t){for(const n of e.children)ps(n)&&(t=Eje(n,t));return t}function Xen(e,t,n,r){const i=qje(e,t.param,t);return{signal:Yf(n.get("type"))&&ut(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function Ire(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Ci{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){wt(YXt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Tl extends Ci{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${g6e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function EU(e){return e.as!==void 0}function ave(e){return`${e}_end`}class hp extends Ci{clone(){return new hp(null,Bn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(E_(u)){if(ps(n)){const{mark:c,markDef:d,config:f}=n,h=Qy({fieldDef:s,markDef:d,config:f});($I(c)||h)&&(l={timeUnit:Jo(u),field:a})}}else l={as:Nt(s,{forAs:!0}),field:a,timeUnit:u};if(ps(n)){const{mark:c,markDef:d,config:f}=n,h=Qy({fieldDef:s,markDef:d,config:f});$I(c)&&Hs(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[Ar(l)]=l)}return i},{});return ki(r)?null:new hp(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=Jo(r),o={...i,timeUnit:s};return new hp(t,{[Ar(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of Ky(this.timeUnits)){const s=EU(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(xa(this.timeUnits).map(t=>EU(t)?t.as:ave(t.field)))}dependentFields(){return new Set(xa(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Ar(this.timeUnits)}`}assemble(){const t=[];for(const n of xa(this.timeUnits)){const{rectBandPosition:r}=n,i=Jo(n.timeUnit);if(EU(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:kd(s),type:"timeunit",...a?{units:Tj(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...uve(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=Sje({timeUnit:i,field:o}),u=ave(o);t.push({type:"formula",expr:a,as:u}),t.push(...uve([o,u],r,i))}}return t}}const Uj="offsetted_rect_start",Vj="offsetted_rect_end";function Sje({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=Q6e(r),{part:o,step:a}=t4e(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function uve([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:lve([Sje({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${Uj}`},{type:"formula",expr:lve([i,s],n+.5),as:`${e}_${Vj}`}]}return[]}function lve([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const Ok="_tuple_fields";class Qen{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Jen={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Qen),s={},o={},a=new Set,u=(p,m)=>{const y=m==="visual"?p.channel:p.field;let v=us(`${r}_${y}`);for(let w=1;a.has(v);w++)v=us(`${r}_${y}_${w}`);return a.add(v),{[m]:v}},l=t.type,c=e.config.selection[l],d=n.value!==void 0?Ft(n.value):null;let{fields:f,encodings:h}=$t(n.select)?n.select:{};if(!f&&!h&&d){for(const p of d)if($t(p))for(const m of yt(p))lXt(m)?(h||(h=[])).push(m):l==="interval"?(wt(HXt),h=c.encodings):(f??(f=[])).push(m)}!f&&!h&&(h=c.encodings,"fields"in c&&(f=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let y=m.field;if(m.aggregate){wt(MXt(p,m.aggregate));continue}else if(!y){wt(Oye(p));continue}if(m.timeUnit&&!E_(m.timeUnit)){y=e.vgField(p);const v={timeUnit:m.timeUnit,as:y,field:m.field};o[Ar(v)]=v}if(!s[y]){const v=l==="interval"&&Jp(p)&&Yf(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",w={field:y,channel:p,type:v,index:i.items.length};w.signals={...u(w,"data"),...u(w,"visual")},i.items.push(s[y]=w),i.hasField[y]=s[y],i.hasSelectionId=i.hasSelectionId||y===Qf,x6e(p)?(w.geoChannel=p,w.channel=w6e(p),i.hasChannel[w.channel]=s[y]):i.hasChannel[p]=s[y]}}else wt(Oye(p))}for(const p of f??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===Qf}d&&(t.init=d.map(p=>i.items.map(m=>$t(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),ki(o)||(i.timeUnit=new hp(null,o))},signals:(e,t,n)=>{const r=t.name+Ok;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(xje)})}},Jm={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Jp(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&wt(jXt),!s||!Yf(o)){wt(FXt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||cve(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(Bje)>=0)i.update=`{${r.map(o=>`${Ct(kd(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${Ct(kd(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!cve(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function dW(e,t){return`domain(${Ct(e.scaleName(t))})`}function cve(e){return e.parent&&aT(e.parent)&&!e.parent.parent}const jx="_brush",Tje="_scale_trigger",AC="geo_interval_init_tick",Cje="_init",Zen="_center",etn={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...$t(n.select)?n.select:{}};i.fields=[Qf],i.encodings||(i.encodings=n.value?yt(n.value):[fh,dh]),n.select={type:"interval",...i}}if(t.translate&&!Jm.defined(t)){const i=`!event.item || event.item.mark.name !== ${Ct(t.name+jx)}`;for(const s of t.events){if(!s.between){wt(`${s} is not an ordered event stream for interval selections.`);continue}const o=Ft((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+ev,s=xa(t.project.hasChannel).filter(a=>a.channel===ls||a.channel===ta),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(ttn(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=Ct(e.projectionName()),u=e.projectionName()+Zen,{x:l,y:c}=t.project.hasChannel,d=l&&l.signals.visual,f=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=E=>e.getSizeSignalRef(E).signal,y=`[[${d?d+"[0]":"0"}, ${f?f+"[0]":"0"}],[${d?d+"[1]":m("width")}, ${f?f+"[1]":m("height")}]]`;o&&(n.unshift({name:r+Cje,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(T=>T.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const v=`intersect(${y}, {markname: ${Ct(e.getName("marks"))}}, unit.mark)`,w=`{unit: ${ob(e)}}`,x=`vlSelectionTuples(${v}, ${w})`,S=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...S.length?[{signal:S.join(" || ")}]:[],...o?[{signal:AC}]:[]],update:x}]})}else{if(!Jm.defined(t)){const l=r+Tje,c=s.map(d=>{const f=d.channel,{data:h,visual:p}=d.signals,m=Ct(e.scaleName(f)),y=e.getScaleComponent(f).get("type"),v=Yf(y)?"+":"";return`(!isArray(${h}) || (${v}invert(${m}, ${p})[0] === ${v}${h}[0] && ${v}invert(${m}, ${p})[1] === ${v}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(d=>({scale:e.scaleName(d.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${ob(e)}, fields: ${r+Ok}, values`;return n.concat({name:i,...o?{init:`{${u}: ${Ub(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(ps(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===AC).length||n.unshift({name:AC,value:null,on:[{events:"timer{1}",update:`${AC} === null ? {} : ${AC}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${Ct(t.name+Vb)})`;if(Jm.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const y of yt(l))l[y]=[{test:`${u}.length && ${u}[0].unit === ${ob(e)}`,...l[y]},{value:0}];const{fill:c,fillOpacity:d,cursor:f,...h}=t.mark,p=yt(h).reduce((y,v)=>(y[v]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(w=>w).join(" && "),value:h[v]},{value:null}],y),{}),m=f??(t.translate?"move":null);return[{name:`${r+jx}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:d}},update:l}},...n,{name:r+jx,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function ttn(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=Ct(i?e.scaleName(s):e.projectionName()),u=f=>`scale(${a}, ${f})`,l=e.getSizeSignalRef(s===ls?"width":"height").signal,c=`${s}(unit)`,d=t.events.reduce((f,h)=>[...f,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const f=n.signals.data,h=Jm.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,y=r?{init:Ub(r,!0,u)}:{value:[]};return d.push({events:{signal:t.name+Tje},update:Yf(m)?`[${u(`${f}[0]`)}, ${u(`${f}[1]`)}]`:"[0, 0]"}),h?[{name:f,on:[]}]:[{name:o,...y,on:d},{name:f,...r?{init:Ub(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const f=s===ls?0:1,h=t.name+Cje,p=r?{init:`[${h}[0][${f}], ${h}[1][${f}]]`}:{value:[]};return[{name:o,...p,on:d}]}}const ntn={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+Ok,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=xa(e.component.selection??{}).reduce((d,f)=>f.type==="interval"?d.concat(f.name+jx):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${ob(e)}, `;if(t.project.hasSelectionId)l+=`${Qf}: ${o}[${Ct(Qf)}]`;else{const d=s.items.map(f=>{const h=e.fieldDef(f.channel);return h!=null&&h.bin?`[${o}[${Ct(e.vgField(f.channel,{}))}], ${o}[${Ct(e.vgField(f.channel,{binSuffix:"end"}))}]]`:`${o}[${Ct(f.field)}]`}).join(", ");l+=`fields: ${i}, values: [${d}]`}const c=t.events;return n.concat([{name:r+ev,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function rT({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const s=Oj(t)&&t.condition;let o=[];s&&(o=Ft(s).map(l=>{const c=i(l);if(qJt(l)){const{param:d,empty:f}=l;return{test:Hje(e,{param:d,empty:f}),...c}}else return{test:fL(e,l.test),...c}})),r!==void 0&&o.push(r);const a=i(t);return a!==void 0&&o.push(a),o.length>1||o.length===1&&o[0].test?{[n]:o}:o.length===1?{[n]:o[0]}:{}}function Rre(e,t="text"){const n=e.encoding[t];return rT({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>Hj(r,e.config),invalidValueRef:void 0})}function Hj(e,t,n="datum"){if(e){if(Kf(e))return Ji(e.value);if(Xn(e)){const{format:r,formatType:i}=sL(e);return lre({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function Aje(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(ut(o))return{tooltip:dve({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return rT({model:e,channelDef:o,vgChannel:"tooltip",mainRefFn:l=>{const c=Hj(l,i,a);if(c)return c;if(l===null)return;let d=Si("tooltip",r,i);if(d===!0&&(d={content:"encoding"}),jt(d))return{value:d};if($t(d))return en(d)?d:d.content==="encoding"?dve(n,s,i,t):{signal:a}},invalidValueRef:void 0})}}function Ije(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,d){const f=__(d),h=ju(c)?c:{...c,type:e[f].type},p=h.title||hre(h,i),m=Ft(p).join(", ").replaceAll(/"/g,'\\"');let y;if(Hs(d)){const v=d==="x"?"x2":"y2",w=Xf(e[v]);if(pa(h.bin)&&w){const x=Nt(h,{expr:o}),S=Nt(w,{expr:o}),{format:E,formatType:T}=sL(h);y=Ik(x,S,E,T,i),s[v]=!0}}if((Hs(d)||d===Bd||d===ch)&&t&&t.fieldChannel===d&&t.offset==="normalize"){const{format:v,formatType:w}=sL(h);y=lre({fieldOrDatumDef:h,format:v,formatType:w,expr:o,config:i,normalizeStack:!0}).signal}y??(y=Hj(h,i,o).signal),a.push({channel:d,key:m,value:y})}mre(e,(c,d)=>{Et(c)?u(c,d):Dj(c)&&u(c.condition,d)});const l={};for(const{channel:c,key:d,value:f}of a)!s[c]&&!l[d]&&(l[d]=f);return l}function dve(e,t,n,{reactiveGeom:r}={}){const i=Ije(e,t,n,{reactiveGeom:r}),s=Ky(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function rtn(e){const{markDef:t,config:n}=e,r=Si("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...itn(e),...stn(e)}}function itn(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Si("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in PXt?{}:{ariaRoleDescription:{value:t}}}function stn(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return rT({model:e,channelDef:s,vgChannel:"description",mainRefFn:u=>Hj(u,e.config),invalidValueRef:void 0});const o=Si("description",n,r);if(o!=null)return{description:Ji(o)};if(r.aria===!1)return{};const a=Ije(t,i,r);if(!ki(a))return{description:{signal:Ky(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function Wo(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=Si(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=Ji(u)));const l=i[e],c={markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},d=v4e({...c,scaleChannel:e,channelDef:l});return rT({model:t,channelDef:l,vgChannel:o??e,invalidValueRef:d,mainRefFn:h=>ure({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function Rje(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??Si("filled",n,i),a=_r(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=Si(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=Si(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",d={...u?{fill:Ji(u)}:{},...l?{stroke:Ji(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&wt(U6e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...d,...Wo("color",e,{vgChannel:c,defaultValue:o?u:l}),...Wo("fill",e,{defaultValue:r.fill?u:void 0}),...Wo("stroke",e,{defaultValue:r.stroke?l:void 0})}}function otn(e){const{encoding:t,mark:n}=e,r=t.order;return!Ov(n)&&Kf(r)?rT({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>Ji(i.value),invalidValueRef:void 0}):{}}function KE({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:ure({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:Ji(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function Ka(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[Qp(e)],c=t.scaleName(e),d=t.getScaleComponent(e),{offset:f,offsetType:h}=KE({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=kre({model:t,defaultPos:n,channel:e,scaleName:c,scale:d}),m=!u&&Hs(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:atn({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:d,stack:a,offset:f,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function atn(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(Xn(n)&&i&&t===i.fieldChannel){if(Et(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return nL({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return ib(n,r,{suffix:"end"},{offset:s})}return are(e)}function kre({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=__(n),u=Xy(n),l=Si(n,s,o,{vgChannel:u});if(l!==void 0)return l2(n,l);switch(t){case"zeroOrMin":return fve({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:o});case"zeroOrMax":return fve({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:o});case"mid":return{...e[Fl(n)],mult:.5}}}}function fve({mainChannel:e,config:t,...n}){const r=y4e(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:s,heightSignal:o}=i.zeroOrMax;return{signal:`min(${s},${o})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const utn={left:"x",center:"xc",right:"x2"},ltn={top:"y",middle:"yc",bottom:"y2"};function kje(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Xy(e);const i=e==="x"?"align":"baseline",s=Si(i,t,n);let o;return en(s)?(wt(lQt(i)),o=void 0):o=s,e==="x"?utn[o||(r==="top"?"left":"center")]:ltn[o||r]}function cL(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?Pje(e,t,{defaultPos:n,defaultPos2:r}):Ka(e,t,{defaultPos:n})}function Pje(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=Qp(e),a=Fl(e),u=ctn(t,r,o),l=u[a]?kje(e,i,s):Xy(e);return{...Ka(e,t,{defaultPos:n,vgChannel:l}),...u}}function ctn(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=__(n),l=Fl(n),c=Xy(n),d=r[u],f=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?KE({channel:n,markDef:s,encoding:r,model:e}):KE({channel:u,markDef:s,encoding:r,model:e});if(!d&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const y=Fl(n),v=e.markDef[y];return v!=null?{[y]:{value:v}}:{[c]:{field:e.getName(n)}}}const m=dtn({channel:n,channelDef:d,channel2Def:r[n],markDef:s,config:a,scaleName:f,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:UO(n,s)||UO(n,{[n]:Z$(n,s,a.style),[l]:Z$(l,s,a.style)})||UO(n,a[i])||UO(n,a.mark)||{[c]:kre({model:e,defaultPos:t,channel:n,scaleName:f,scale:h})()}}function dtn({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return Xn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?ib(t,s,{suffix:"start"},{offset:u}):are({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function UO(e,t){const n=Fl(e),r=Xy(e);if(t[r]!==void 0)return{[r]:l2(e,t[r])};if(t[e]!==void 0)return{[r]:l2(e,t[e])};if(t[n]){const i=t[n];if(Bb(i))wt(rQt(n));else return{[n]:l2(e,i)}}}function Zy(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=Qp(t),a=Fl(t),u=r[t],l=r[o],c=e.getScaleComponent(t),d=c?c.get("type"):void 0,f=i.orient,h=r[a]??r.size??Si("size",i,n,{vgChannel:a}),p=C6e(t),m=s==="bar"&&(t==="x"?f==="vertical":f==="horizontal");return Et(u)&&(qi(u.bin)||pa(u.bin)||u.timeUnit&&!l)&&!(h&&!Bb(h))&&!r[p]&&!Zo(d)?ptn({fieldDef:u,fieldDef2:l,channel:t,model:e}):(Xn(u)&&Zo(d)||m)&&!l?htn(u,t,e):Pje(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function ftn(e,t,n,r,i,s,o){if(Bb(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=Ip("minBandSize",{type:o},r);return{signal:c?`max(${Ef(c)}, ${l})`:l}}else i.band!==1&&(wt(hQt(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(en(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(Nv(u)&&Gr(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,d=Vs(u,o==="bar"?l:c);if(en(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(Gr(d))return{signal:`${1-d} * ${e}`}}return{value:uL(r.view,e)-2}}function htn(e,t,n){var k,D;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=Fl(t),d=Qp(t),f=C6e(t),h=n.scaleName(f),p=n.getScaleComponent(Lne(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let y;(i.size||r.size)&&(m?y=Wo("size",n,{vgChannel:c,defaultRef:Ji(r.size)}):wt(yQt(r.type)));const v=!!y,w=T4e({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(k=l||p)==null?void 0:k.get("type"),useVlSizeChannel:m});y=y||{[c]:ftn(c,h||u,p||l,s,w,!!e,r.type)};const x=((D=l||p)==null?void 0:D.get("type"))==="band"&&Bb(w)&&!v?"top":"middle",S=kje(t,r,s,x),E=S==="xc"||S==="yc",{offset:T,offsetType:A}=KE({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),I=are({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:T,defaultRef:kre({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:E?A==="encoding"?0:.5:en(w)?{signal:`(1-${w})/2`}:Bb(w)?(1-w.band)/2:0});if(c)return{[S]:I,...y};{const M=Xy(d),z=y[c],O=T?{...z,offset:T}:z;return{[S]:I,[M]:ut(I)?[I[0],{...I[1],offset:O}]:{...I,offset:O}}}}function hve(e,t,n,r,i,s,o){if(_6e(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(en(n)||en(i)||en(r)||s){const l=Ef(n),c=Ef(i),d=Ef(r),f=Ef(s),p=s?`(${o} < ${f} ? ${a?"":"-"}0.5 * (${f} - (${o})) : ${u})`:u,m=d?`${d} + `:"",y=l?`(${l} ? -1 : 1) * `:"",v=c?`(${c} + ${p})`:p;return{signal:m+y+v}}else return i=i||0,r+(n?-i-u:+i+u)}function ptn({fieldDef:e,fieldDef2:t,channel:n,model:r}){var D;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),d=T4e({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),f=(D=r.component.axes[n])==null?void 0:D[0],h=(f==null?void 0:f.get("translate"))??.5,p=Hs(n)?Si("binSpacing",s,i)??0:0,m=Qp(n),y=Xy(n),v=Xy(m),w=Ip("minBandSize",s,i),{offset:x}=KE({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:S}=KE({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=jJt({fieldDef:e,scaleName:u}),T=hve(n,p,c,h,x,w,E),A=hve(m,p,c,h,S??x,w,E),I=en(d)?{signal:`(1-${d.signal})/2`}:Bb(d)?(1-d.band)/2:.5,k=Qy({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(qi(e.bin)||e.timeUnit){const M=e.timeUnit&&k!==.5;return{[v]:pve({fieldDef:e,scaleName:u,bandPosition:I,offset:A,useRectOffsetField:M}),[y]:pve({fieldDef:e,scaleName:u,bandPosition:en(I)?{signal:`1-${I.signal}`}:1-I,offset:T,useRectOffsetField:M})}}else if(pa(e.bin)){const M=ib(e,u,{},{offset:A});if(Et(t))return{[v]:M,[y]:ib(t,u,{},{offset:T})};if(w_(e.bin)&&e.bin.step)return{[v]:M,[y]:{signal:`scale("${u}", ${Nt(e,{expr:"datum"})} + ${e.bin.step})`,offset:T}}}wt(q6e(m))}function pve({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return nL({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:Uj,endSuffix:Vj}:{}})}const mtn=new Set(["aria","width","height"]);function zd(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?Rje(e):{};return{...gtn(e.markDef,t),...mve("fill",n),...mve("stroke",r),...Wo("opacity",e),...Wo("fillOpacity",e),...Wo("strokeOpacity",e),...Wo("strokeWidth",e),...Wo("strokeDash",e),...otn(e),...Aje(e),...Rre(e,"href"),...rtn(e)}}function mve(e,t){return t?{[e]:t}:{}}function gtn(e,t){return kXt.reduce((n,r)=>(!mtn.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=Ji(e[r])),n),{})}function Pre(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,s)=>{var l;let o;if(!Jp(s)||!(o=e.getScaleType(s)))return;const a=xj(i.aggregate),u=ore({scaleChannel:s,markDef:n,config:t,scaleType:o,isCountAggregate:a});if($Jt(u)){const c=e.vgField(s,{expr:"datum",binSuffix:(l=e.stack)!=null&&l.impute?"mid":void 0});c&&r.add(c)}}),r.size>0)return{defined:{signal:[...r].map(s=>Cj(s,!0)).join(" && ")}}}function gve(e,t){if(t!==void 0)return{[e]:Ji(t)}}const SU="voronoi",Nje={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(SU)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(Ov(s))return wt($Xt(s)),n;const o={name:e.getName(SU),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...Aje(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const d=l.name??"";d===e.component.mark[0].name?a=c:d.indexOf(SU)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},Oje={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!wre(e.bind),parse:(e,t,n)=>zje(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=Nje.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=us(`${r}_${u.field}`);n.filter(f=>f.name===c).length||n.unshift({name:c,...o?{init:Ub(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Ct(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+ev)[0],o=r+Ok,a=i.items.map(l=>us(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},dL="_toggle",Dje={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+dL,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+ev,r=t.name+dL;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${ob(e)}}, `)+`${r} ? ${n} : null`}},ytn={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=jt(t.clear)?Tv(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(Oje.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===us(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+ev);r(i,"null"),Dje.defined(t)&&(i=n.findIndex(s=>s.name===t.name+dL),r(i,"false"))}return n}},Mje={defined:e=>{const t=e.resolve==="global"&&e.bind&&wre(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Qf;return t&&!n&&wt(BXt),t&&n},parse:(e,t,n)=>{const r=Bn(n);if(r.select=jt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},zje(t,r),$t(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=Ft(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=_U(t.bind)?t.bind.legend:"click",s=jt(i)?Tv(i,"view"):Ft(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=_U(t.bind)&&t.bind.legend,s=o=>a=>{const u=Bn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${us(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(f=>f.name===r+ev),o=r+Ok,a=i.items.filter(f=>f.hasLegend).map(f=>us(`${r}_${us(f.field)}_legend`)),l=`${a.map(f=>`${f} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(f=>({signal:f})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(f=>f.name===r+dL),d=_U(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:d}):c.on[0].events=d),n}};function vtn(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of xa(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&Mje.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const $je="_translate_anchor",Lje="_translate_delta",btn={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Jm.defined(t),s=r+$je,{x:o,y:a}=t.project.hasChannel;let u=Tv(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+jx,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?dW(e,ls):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?dW(e,ta):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+Lje,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&yve(e,t,o,"width",n),a!==void 0&&yve(e,t,a,"height",n),n}};function yve(e,t,n,r,i){const s=t.name,o=s+$je,a=s+Lje,u=n.channel,l=Jm.defined(t),c=i.filter(E=>E.name===n.signals[l?"data":"visual"])[0],d=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(u),h=f&&f.get("type"),p=f&&f.get("reverse"),m=l?u===ls?p?"":"-":p?"-":"":"",y=`${o}.extent_${u}`,v=`${m}${a}.${u} / ${l?`${d}`:`span(${y})`}`,w=!l||!f?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",x=l?h==="pow"?`, ${f.get("exponent")??1}`:h==="symlog"?`, ${f.get("constant")??1}`:"":"",S=`${w}(${y}, ${v}${x})`;c.on.push({events:{signal:a},update:l?S:`clampRange(${S}, 0, ${d})`})}const Fje="_zoom_anchor",jje="_zoom_delta",_tn={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Jm.defined(t),s=r+jje,{x:o,y:a}=t.project.hasChannel,u=Ct(e.scaleName(ls)),l=Ct(e.scaleName(ta));let c=Tv(t.zoom,"scope");return i||(c=c.map(d=>(d.markname=r+jx,d))),n.push({name:r+Fje,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(d=>d).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&vve(e,t,o,"width",n),a!==void 0&&vve(e,t,a,"height",n),n}};function vve(e,t,n,r,i){const s=t.name,o=n.channel,a=Jm.defined(t),u=i.filter(w=>w.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),d=c&&c.get("type"),f=a?dW(e,o):u.name,h=s+jje,p=`${s}${Fje}.${o}`,m=!a||!c?"zoomLinear":d==="log"?"zoomLog":d==="symlog"?"zoomSymlog":d==="pow"?"zoomPow":"zoomLinear",y=a?d==="pow"?`, ${c.get("exponent")??1}`:d==="symlog"?`, ${c.get("constant")??1}`:"":"",v=`${m}(${f}, ${p}, ${h}${y})`;u.on.push({events:{signal:h},update:a?v:`clampRange(${v}, 0, ${l})`})}const Vb="_store",ev="_tuple",wtn="_modify",Bje="vlSelectionResolve",qj=[ntn,etn,Jen,Dje,Oje,Jm,Mje,ytn,btn,_tn,Nje];function xtn(e){let t=e.parent;for(;t&&!vc(t);)t=t.parent;return t}function ob(e,{escape:t}={escape:!0}){let n=t?Ct(e.name):e.name;const r=xtn(e);if(r){const{facet:i}=r;for(const s of yd)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Ct(r.vgField(s))}])`)}return n}function Nre(e){return xa(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function zje(e,t){(jt(t.select)||!t.select.on)&&delete e.events,(jt(t.select)||!t.select.clear)&&delete e.clear,(jt(t.select)||!t.select.toggle)&&delete e.toggle}function fW(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...fW(e.object)),t.push(...fW(e.property))),t)}function Uje(e){return e.object.type==="MemberExpression"?Uje(e.object):e.object.name==="datum"}function Vje(e){const t=Zte(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&Uje(r)&&n.add(fW(r).slice(1).join("."))}),n}class iT extends Ci{clone(){return new iT(null,this.model,Bn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=fL(this.model,this.filter,this),this._dependentFields=Vje(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Etn(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=us(i.name),o=i.select,a=jt(o)?o:o.type,u=$t(o)?Bn(o):{type:a},l=r[a];for(const f in l)f==="fields"||f==="encodings"||(f==="mark"&&(u[f]={...l[f],...u[f]}),(u[f]===void 0||u[f]===!0)&&(u[f]=Bn(l[f]??u[f])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:jt(u.on)?Tv(u.on,"scope"):Ft(Bn(u.on))},d=Bn(i);for(const f of qj)f.defined(c)&&f.parse&&f.parse(e,c,d)}return n}function Hje(e,t,n,r="datum"){const i=jt(t)?t:t.param,s=us(i),o=Ct(s+Vb);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const f=n??e.component.data.raw,h=a.project.timeUnit.clone();f.parent?h.insertAsParentOf(f):f.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${Ct(a.resolve)})`,c=`${u}${o}, ${r}${l}`,d=`length(data(${o}))`;return t.empty===!1?`${d} && ${c}`:`!${d} || ${c}`}function qje(e,t,n){const r=us(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&wt(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Ct(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,wt((a.length?"Multiple ":"No ")+`matching ${Ct(i)} encoding found for selection ${Ct(n.param)}. Using "field": ${Ct(s)}.`)):s=a[0].field}return`${o.name}[${Ct(kd(s))}]`}function Stn(e,t){for(const[n,r]of Ky(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Tl(new iT(t,e,{param:n}),i,ks.Lookup,e.component.data.outputNodeRefCounts)}}function fL(e,t,n){return u2(t,r=>jt(r)?r:eJt(r)?Hje(e,r,n):r4e(r))}function Ttn(e,t){if(e)return ut(e)&&!k0(e)?e.map(n=>hre(n,t)).join(", "):e}function TU(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function EA(e,t,n,r={header:!1}){var d,f;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=sZt[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(Nk(m)){const{condition:y,...v}=m,w=Ft(y),x=qye[h];if(x){const{vgProp:S,part:E}=x,T=[...w.map(A=>{const{test:I,...k}=A;return{test:fL(null,I),...k}}),v];TU(c,E,S,T),delete c[h]}else if(x===null){const S={signal:w.map(E=>{const{test:T,...A}=E;return`${fL(null,T)} ? ${Rye(A)} : `}).join("")+Rye(v)};c[h]=S}}else if(en(m)){const y=qye[h];if(y){const{vgProp:v,part:w}=y;TU(c,w,v,m),delete c[h]}}_r(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},ki(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Vs(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(f=(d=c.encode)==null?void 0:d.labels)!=null&&f.update&&en(c.encode.labels.update.text)&&(p=$b(a,"datum.label",c.encode.labels.update.text.signal)),TU(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of M4e)e.hasAxisPart(p)||delete c.encode[p];ki(c.encode)&&delete c.encode}const h=Ttn(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:Vs(l,0)}}}}function Wje(e){const{axes:t}=e.component,n=[];for(const r of Ug)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function Ctn(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>EA(i,"grid",t)),...r.map(i=>EA(i,"grid",t)),...n.map(i=>EA(i,"main",t)),...r.map(i=>EA(i,"main",t))].filter(i=>i)}function bve(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...yt(o),...yt(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${Ef(o[c])} : ${Ef(a[c])}`};return l}return t[i]})])}function Atn(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:a4e(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=en(n)?"axisOrient":`axis${xk(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:bve(a,r,e,n),vgAxisConfig:bve(u,r,e,n),axisConfigStyle:Itn([...u,...a],r)}}function Itn(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=Ft(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function hW(e,t,n,r={}){var s;const i=M6e(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const _ve={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??Rtn(n,e),gridScale:({model:e,channel:t})=>ktn(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||Yje(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||Gje(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??Ntn(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??Otn(t.type,n,Et(t)&&!!t.timeUnit,Et(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??Mtn({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:$tn,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=Kje(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return L6e(i?[Vye(i)]:[],Et(o)?[Vye(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Ltn(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Ftn(n,t)};function Rtn(e,t){return!Zo(e)&&Et(t)&&!qi(t==null?void 0:t.bin)&&!pa(t==null?void 0:t.bin)}function ktn(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function Ptn(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return en(s)?s:MI(s);{const{configValue:o}=hW("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?MI(o):n===ls&&_r([nre,tre],e.type)&&!(Et(e)&&e.timeUnit)?270:void 0}}function pW(e){return`(((${e.signal} % 360) + 360) % 360)`}function Gje(e,t,n,r){if(e!==void 0)if(n==="x"){if(en(e)){const i=pW(e),s=en(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(en(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(en(e)){const i=pW(e),s=en(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(en(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function Yje(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(en(e)){const o=pW(e),a=en(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(en(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function Ntn(e,t){if(t==="x"&&_r(["quantitative","temporal"],e))return!0}function Otn(e,t,n,r){if(n&&!$t(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function Dtn(e){return e==="x"?"bottom":"left"}function Mtn({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Zo(t)&&t!=="log"){if(Et(e)){if(qi(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&_r(["month","hours","day","quarter"],(i=Jo(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function $tn({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Et(t)){const{timeUnit:n}=t;if(n){const r=e4e(n);if(r)return{signal:r}}}}function Kje(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return F6e(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function Ltn(e,t){const n=e.values;if(ut(n))return D4e(t,n);if(en(n))return n}function Ftn(e,t){return e==="rect"&&iL(t)?1:0}class XE extends Ci{clone(){return new XE(null,Bn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=Vje(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(S_(r)&&S4e(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${r4e({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new XE(t,{calculate:u,as:QE(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Ar(this.transform)}`}}function QE(e,t,n){return Nt(e,{prefix:t,suffix:"sort_index",...n})}function Wj(e,t){return _r(["top","bottom"],t)?"column":_r(["left","right"],t)||e==="row"?"row":"column"}function JE(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Vs((t||{})[e],i[e],n.header[e])}function Gj(e,t,n,r){const i={};for(const s of e){const o=JE(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const Ore=["row","column"],Dre=["header","footer"];function jtn(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=Gj(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=Wj(t,a),l=MI(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...Qje(l,u),...Xje(u,l,s),...Jje(r,i,t,AZt,Z4e)}}}function Xje(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=Yje(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function Qje(e,t){const n=Gje(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Btn(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of Dre)if(n[i])for(const s of n[i]){const o=Utn(e,t,i,n,s);o!=null&&r.push(o)}return r}function ztn(e,t){const{sort:n}=e;return Qm(n)?{field:Nt(n,{expr:"datum"}),order:n.order??"ascending"}:ut(n)?{field:QE(e,t,{expr:"datum"}),order:"ascending"}:{field:Nt(e,{expr:"datum"}),order:n??"ascending"}}function mW(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=Gj(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=lre({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=Wj(t,a);return{text:{signal:u?$b($b(u,"datum.label",l),"datum.value",Nt(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...Qje(s,c),...Xje(c,s,o),...Jje(n,e,t,IZt,eje)}}function Utn(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:d}=Gj(["labelOrient"],o.header,a,t);(t==="row"&&!_r(["top","bottom"],d)||t==="column"&&!_r(["left","right"],d))&&(s=mW(o,t,a))}const u=vc(e)&&!Rk(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const d=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:ztn(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[d]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const Vtn={column:{start:0,end:1},row:{start:1,end:0}};function Htn(e,t){return Vtn[t][e]}function qtn(e,t){const n={};for(const r of yd){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=Gj(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=Wj(r,o),u=Htn(s,a);u!==void 0&&(n[a]=u)}}return ki(n)?void 0:n}function Jje(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=JE(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function Mre(e){return[...VO(e,"width"),...VO(e,"height"),...VO(e,"childWidth"),...VO(e,"childHeight")]}function VO(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(Zo(o)&&Nv(a)){const u=e.scaleName(n);return vc(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[wve(u,a)]:[wve(u,a),{name:i,update:Zje(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=aW(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function wve(e,t){const n=`${e}_step`;return en(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function Zje(e,t,n){const r=t.get("type"),i=t.get("padding"),s=Vs(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${Ef(o)}, ${Ef(s)}) * ${e}_step`}function e5e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function t5e(e,t){return yt(e).reduce((n,r)=>({...n,...rT({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>Ji(i.value),invalidValueRef:void 0})}),{})}function n5e(e,t){if(vc(t))return e==="theta"?"independent":"shared";if(aT(t))return"shared";if(Ure(t))return Hs(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function $re(e,t){const n=e.scale[t],r=Hs(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&wt(xQt(t)),"independent"):e[r][t]||"shared"}const Wtn={...PZt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},r5e=yt(Wtn);class Gtn extends Hg{}const xve={symbols:Ytn,gradient:Ktn,labels:Xtn,entries:Qtn};function Ytn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let d={...OXt({},n,CJt),...Rje(n,{filled:c})};const f=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=f===void 0?i5e(a.opacity)??o.opacity:void 0;if(d.fill){if(r==="fill"||c&&r===$l)delete d.fill;else if(d.fill.field)h?delete d.fill:(d.fill=Ji(u.legend.symbolBaseFillColor??"black"),d.fillOpacity=Ji(m??1));else if(ut(d.fill)){const y=gW(a.fill??a.color)??o.fill??(c&&o.color);y&&(d.fill=Ji(y))}}if(d.stroke){if(r==="stroke"||!c&&r===$l)delete d.stroke;else if(d.stroke.field||p)delete d.stroke;else if(ut(d.stroke)){const y=Vs(gW(a.stroke||a.color),o.stroke,c?o.color:void 0);y&&(d.stroke={value:y})}}if(r!==zg){const y=Et(t)&&o5e(n,i,t);y?d.opacity=[{test:y,...Ji(m??1)},Ji(u.legend.unselectedOpacity)]:m&&(d.opacity=Ji(m))}return d={...d,...e},ki(d)?void 0:d}function Ktn(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?i5e(o.opacity)||s.opacity:void 0;return l&&(a.opacity=Ji(l)),a={...a,...e},ki(a)?void 0:a}function Xtn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=Et(t)?o5e(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let d;zb(c)?d=Sf({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?d=Sf({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&Et(t)&&t.timeUnit===void 0&&(d=Sf({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const f={...u?{opacity:u}:{},...d?{text:d}:{},...e};return ki(f)?void 0:f}function Qtn(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function i5e(e){return s5e(e,(t,n)=>Math.max(t,n.value))}function gW(e){return s5e(e,(t,n)=>Vs(t,n.value))}function s5e(e,t){if(GJt(e))return Ft(e.condition).reduce(t,e.value);if(Kf(e))return e.value}function o5e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=Ct(n.field);return r.map(s=>`(!length(data(${Ct(us(s)+Vb)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const Eve={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return w4e(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return x4e(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??inn(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??snn(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??Ztn(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Fx(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Lx(n)&&Jh(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Jtn(t,e)};function Jtn(e,t){const n=e.values;if(ut(n))return D4e(t,n);if(en(n))return n}function Ztn(e,t,n,r){if(t!=="shape"){const i=gW(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function enn(e){const{legend:t}=e;return Vs(t.type,tnn(e))}function tnn({channel:e,timeUnit:t,scaleType:n}){if(Lx(e)){if(_r(["quarter","month","day"],t))return"symbol";if(Jh(n))return"gradient"}return"symbol"}function nnn({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??rnn(n,t)}function rnn(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function inn({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(Jh(i))return n==="horizontal"?r==="top"||r==="bottom"?Sve(t,"width",o,s):o:Sve(t,"height",u,a)}function Sve(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function snn(e){if(_r(["quantile","threshold","log","symlog"],e))return"greedy"}function a5e(e){const t=ps(e)?onn(e):cnn(e);return e.component.legends=t,t}function onn(e){const{encoding:t}=e,n={};for(const r of[$l,...nje]){const i=Ao(t[r]);!i||!e.getScaleComponent(r)||r===Ll&&Et(i)&&i.type===nT||(n[r]=lnn(e,r))}return n}function ann(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function unn(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function lnn(e,t){var S;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new Gtn({},ann(e,t));vtn(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=Ao(i[t]),d=Et(c)?(S=Jo(c.timeUnit))==null?void 0:S.unit:void 0,f=n.orient||s.legend.orient||"right",h=enn({legend:n,channel:t,timeUnit:d,scaleType:l}),p=nnn({legend:n,legendType:h,orient:f,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:f,legendType:h,direction:p};for(const E of r5e){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const T=E in Eve?Eve[E](m):n[E];if(T!==void 0){const A=unn(T,E,n,e.fieldDef(t));(A||s.legend[E]===void 0)&&a.set(E,T,A)}}const y=(n==null?void 0:n.encoding)??{},v=a.get("selections"),w={},x={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const T=t5e(y[E]??{},e),A=E in xve?xve[E](T,x):T;A!==void 0&&!ki(A)&&(w[E]={...v!=null&&v.length&&Et(c)?{name:`${us(c.field)}_legend_${E}`}:{},...v!=null&&v.length?{interactive:!!v}:{},update:A})}return ki(w)||a.set("encode",w,!!(n!=null&&n.encoding)),a}function cnn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){a5e(r);for(const i of yt(r.component.legends))n.legend[i]=$re(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=u5e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of yt(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function u5e(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of r5e){const c=Jy(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(d,f)=>{switch(l){case"symbolType":return dnn(d,f);case"title":return j6e(d,f);case"type":return i=!0,Jl("symbol")}return zj(d,f,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&J$(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&J$(e.explicit,["encode","gradient"])),e}function dnn(e,t){return t.value==="circle"?t:e}function fnn(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function l5e(e){const t=e.component.legends,n={};for(const i of yt(t)){const s=e.getScaleComponent(i),o=Pi(s.get("domains"));if(n[o])for(const a of n[o])u5e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return xa(n).flat().map(i=>hnn(i,e.config)).filter(i=>i!==void 0)}function hnn(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of nje)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&en(s.encode.labels.update.text)&&(l=$b(r,"datum.label",s.encode.labels.update.text.signal)),fnn(s,"labels","text",{signal:l})}return s}}function pnn(e){return aT(e)||Ure(e)?mnn(e):c5e(e)}function mnn(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),c5e(e))}function c5e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=en(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return _r(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const gnn=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class d5e extends Hg{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function f5e(e){e.component.projection=ps(e)?ynn(e):_nn(e)}function ynn(e){if(e.hasProjection){const t=Va(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?vnn(e):void 0,s=new d5e(e.projectionName(!0),{...Va(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function vnn(e){const t=[],{encoding:n}=e;for(const r of[[fh,dh],[Pd,hh]])(Ao(n[r[0]])||Ao(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Ll)&&e.typedFieldDef(Ll).type===nT&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(ks.Main)),t}function bnn(e,t){const n=kne(gnn,i=>!!(!cn(e.explicit,i)&&!cn(t.explicit,i)||cn(e.explicit,i)&&cn(t.explicit,i)&&hc(e.get(i),t.get(i))));if(hc(e.size,t.size)){if(n)return e;if(hc(e.explicit,{}))return t;if(hc(t.explicit,{}))return e}return null}function _nn(e){if(e.children.length===0)return;let t;for(const r of e.children)f5e(r);const n=kne(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=bnn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new d5e(r,t.specifiedProjection,t.size,Bn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function wnn(e,t,n,r){if(Pk(t,n)){const i=ps(e)?e.axis(n)??e.legend(n)??{}:{},s=Nt(t,{expr:"datum"}),o=Nt(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Nt(t,{binSuffix:"range",forAs:!0}),formula:Ik(s,o,i.format,i.formatType,r)}}return{}}function h5e(e,t){return`${P6e(e)}_${t}`}function xnn(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Lre(e,t,n){const r=Mj(n,void 0)??{},i=h5e(r,t);return e.getName(`${i}_bins`)}function Enn(e){return"as"in e}function Tve(e,t,n){let r,i;Enn(e)?r=jt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[Nt(e,{forAs:!0}),Nt(e,{binSuffix:"end",forAs:!0})];const s={...Mj(t,void 0)},o=h5e(s,e.field),{signal:a,extentSignal:u}=xnn(n,o);if(Ej(s.extent)){const c=s.extent;i=qje(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class pp extends Ci{clone(){return new pp(null,Bn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(ju(s)&&qi(s.bin)){const{key:a,binComponent:u}=Tve(s,s.bin,n);i[a]={...u,...i[a],...wnn(n,s,o,n.config)}}return i},{});return ki(r)?null:new pp(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=Tve(n,n.bin,r);return new pp(t,{[i]:s})}merge(t,n){for(const r of yt(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Qh([...this.bins[r].as,...t.bins[r].as],Ar)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(xa(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(xa(this.bins).map(t=>t.field))}hash(){return`Bin ${Ar(this.bins)}`}assemble(){return xa(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:kd(t.field),as:r,signal:t.signal,...Ej(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:kd(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:Nt({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function Snn(e,t,n,r){var s;const i=ps(r)?r.encoding[Qp(t)]:void 0;if(ju(n)&&ps(r)&&C4e(n,i,r.markDef,r.config)){e.add(Nt(n,{})),e.add(Nt(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=Qy({fieldDef:n,markDef:a,config:u});$I(o)&&l!==.5&&Hs(t)&&(e.add(Nt(n,{suffix:Uj})),e.add(Nt(n,{suffix:Vj}))),n.bin&&Pk(n,t)&&e.add(Nt(n,{binSuffix:"range"}))}else if(x6e(t)){const o=w6e(t);e.add(r.getName(o))}else e.add(Nt(n));return S_(n)&&hJt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function Tnn(e,t){for(const n of yt(t)){const r=t[n];for(const i of yt(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Mf extends Ci{clone(){return new Mf(null,new Set(this.dimensions),Bn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([Nt(o,{forAs:!0})]);else{if(wg(u)||Pv(u)){const c=wg(u)?"argmin":"argmax",d=u[c];i[d]??(i[d]={}),i[d][c]=new Set([Nt({op:c,field:d},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([Nt(o,{forAs:!0})]);Jp(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([Nt({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([Nt({field:l,aggregate:"max"},{forAs:!0})]))}else Snn(s,a,o,n)}),s.size+yt(i).length===0)?null:new Mf(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||Nt(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||Nt(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+yt(i).length===0?null:new Mf(t,r,i)}merge(t){return h6e(this.dimensions,t.dimensions)?(Tnn(this.measures,t.measures),!0):(FQt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...yt(this.measures)])}producedFields(){const t=new Set;for(const n of yt(this.measures))for(const r of yt(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Ar({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of yt(this.measures))for(const o of yt(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:kd(s));return{type:"aggregate",groupby:[...this.dimensions].map(kd),ops:t,fields:n,as:r}}}class sT extends Ci{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of yd){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[Nt(o),...qi(a)?[Nt(o,{binSuffix:"end"})]:[]],...Qm(u)?{sortField:u}:ut(u)?{sortIndexField:QE(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of yd)this[n]&&(t+=` ${n.charAt(0)}:${Ar(this[n])}`);return t}get fields(){var n;const t=[];for(const r of yd)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of yd)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Ug){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(Zo(i)&&Nv(s)){const o=Yj(this.childModel,n),a=zre(o);a?t[n]=a:wt(Hne(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=Pj,field:d}=u;s.push(d),o.push(c),a.push(Nt(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of Ore){for(const c of Dre){const d=(r[l]&&r[l][c])??[];for(const f of d)if(((u=f.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,d=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[Xm,Km])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function Cve(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function Cnn(e,t){const n=One(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=Cve(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=Cve(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return wt(GXt(t)),null}function Ann(e){const t={};return uM(e.filter,n=>{if(n4e(n)){let r=null;Yne(n)?r=oc(n.equal):Xne(n)?r=oc(n.lte):Kne(n)?r=oc(n.lt):Qne(n)?r=oc(n.gt):Jne(n)?r=oc(n.gte):Zne(n)?r=n.range[0]:ere(n)&&(r=(n.oneOf??n.in)[0]),r&&(x_(r)?t[n.field]="date":Gr(r)?t[n.field]="number":jt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function Inn(e){const t={};function n(r){GE(r)?t[r.field]="date":r.type==="quantitative"&&SXt(r.aggregate)?t[r.field]="number":BE(r.field)>1?r.field in t||(t[r.field]="flatten"):S_(r)&&Qm(r.sort)&&BE(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((ps(e)||vc(e))&&e.forEachFieldDef((r,i)=>{if(ju(r))n(r);else{const s=__(i),o=e.fieldDef(s);n({...r,type:o.type})}}),ps(e)){const{mark:r,markDef:i,encoding:s}=e;if(Ov(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];Et(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function Rnn(e){const t={};if(ps(e)&&e.component.selection)for(const n of yt(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&BE(i.field)>1&&(t[i.field]="flatten")}return t}class Xa extends Ci{clone(){return new Xa(null,Bn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Ar(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!gy(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of yt(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:wt(Mye(a,r[a],u.value)))}for(const a of yt(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:wt(Mye(a,n[a],u)))}const s=new Hg(n,r);i.copyAll(s);const o={};for(const a of yt(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return yt(o).length===0||i.parseNothing?null:new Xa(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of yt(this._parse)){const r=this._parse[n];BE(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(yt(this._parse))}dependentFields(){return new Set(yt(this._parse))}assembleTransforms(t=!1){return yt(this._parse).filter(n=>t?BE(n)>1:!0).map(n=>{const r=Cnn(n,this._parse[n]);return r?{type:"formula",expr:r,as:eT(n)}:null}).filter(n=>n!==null)}}class tv extends Ci{clone(){return new tv(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Qf])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Qf}}}class Dk extends Ci{clone(){return new Dk(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Ar(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class Mk extends Ci{clone(){return new Mk(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Ar(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Hb extends Ci{constructor(t){super(null),t??(t={name:"source"});let n;if(gy(t)||(n=t.format?{...Sl(t.format,["parse"])}:{}),LI(t))this._data={values:t.values};else if(YE(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];_r(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else _je(t)?this._data={values:[{type:"Sphere"}]}:(vje(t)||gy(t))&&(this._data={});this._generator=gy(t),t.name&&(this._name=t.name),n&&!ki(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var Ave=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},knn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},SA;function Fre(e){return e instanceof Hb||e instanceof Dk||e instanceof Mk}class jre{constructor(){SA.set(this,void 0),Ave(this,SA,!1,"f")}setModified(){Ave(this,SA,!0,"f")}get modifiedFlag(){return knn(this,SA,"f")}}SA=new WeakMap;class T_ extends jre{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Bre extends jre{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class Pnn extends Bre{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of yt(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class Nnn extends Bre{constructor(t){super(),this.requiresSelectionId=t&&Nre(t)}run(t){t instanceof tv&&(this.requiresSelectionId&&(Fre(t.parent)||t.parent instanceof Mf||t.parent instanceof Xa)||(this.setModified(),t.remove()))}}class Onn extends jre{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof hp&&(r=t.producedFields(),Pne(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class Dnn extends Bre{constructor(){super()}run(t){t instanceof Tl&&!t.isRequired()&&(this.setModified(),t.remove())}}class Mnn extends T_{run(t){if(!Fre(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Xa)if(t instanceof Xa)this.setModified(),t.merge(n);else{if(Nne(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class $nn extends T_{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Xa);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of yt(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!ki(i)){this.setModified();const o=new Xa(t,i);for(const a of n){if(a instanceof Xa)for(const u of yt(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof Xa&&yt(a.parse).length===0&&a.remove()}}}}}class Lnn extends T_{run(t){t instanceof Tl||t.numChildren()>0||t instanceof sT||t instanceof Hb||(this.setModified(),t.remove())}}class Fnn extends T_{run(t){const n=t.children.filter(i=>i instanceof hp),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class jnn extends T_{run(t){const n=t.children.filter(i=>i instanceof Mf),r={};for(const i of n){const s=Ar(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of yt(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class Bnn extends T_{constructor(t){super(),this.model=t}run(t){const n=!(Fre(t)||t instanceof iT||t instanceof Xa||t instanceof tv),r=[],i=[];for(const s of t.children)s instanceof pp&&(n&&!Nne(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof pp?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class znn extends T_{run(t){const n=[...t.children];if(!jE(n,o=>o instanceof Tl)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Tl){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Tl)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class C_ extends Ci{clone(){return new C_(null,Bn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Qh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Nt(t)}hash(){return`JoinAggregateTransform ${Ar(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class ZE extends Ci{clone(){return new ZE(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:s}=n,{marks:o,scales:a}=r;if(o==="include-invalid-values"&&a==="include-invalid-values")return null;const u=n.reduceFieldDef((l,c,d)=>{const f=Jp(d)&&n.getScaleComponent(d);if(f){const h=f.get("type"),{aggregate:p}=c,m=ore({scaleChannel:d,markDef:s,config:i,scaleType:h,isCountAggregate:xj(p)});m!=="show"&&m!=="always-valid"&&(l[c.field]=c)}return l},{});return yt(u).length?new ZE(t,u):null}dependentFields(){return new Set(yt(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Ar(this.filter)}`}assemble(){const t=yt(this.filter).reduce((n,r)=>{const i=this.filter[r],s=Nt(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (${yW(s)}))`):i.type==="quantitative"&&n.push(yW(s))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function yW(e){return`isValid(${e}) && isFinite(+${e})`}function Unn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=Nt(r);return i&&t.push(i),t},[])}function Vnn(e){return ut(e)&&e.every(t=>jt(t))&&e.length>1}class Zm extends Ci{clone(){return new Zm(null,Bn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const d of n.sort)a.push(d.field),u.push(Vs(d.order,"ascending"));const l={field:a,order:u};let c;return Vnn(s)?c=s:jt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new Zm(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return Xf(p)}).filter(h=>!!h),c=Unn(n),d=n.encoding.order;let f;if(ut(d)||Et(d))f=$6e(d);else{const h=A4e(d)?d.sort:o==="y"?"descending":"ascending";f=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new Zm(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:f,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Ar(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[Nt(i,{binSuffix:"mid"})]:[Nt(i,{}),Nt(i,{binSuffix:"end"})]:[Nt(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:d=.5,bin:f}=c;if(f){const h=Nt(c,{expr:"datum"}),p=Nt(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${yW(h)} ? ${d}*${h}+${1-d}*${p} : ${h}`,as:Nt(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:Nt(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class oT extends Ci{clone(){return new oT(null,Bn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Qh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Nt(t)}hash(){return`WindowTransform ${Ar(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const d of this.transform.window)n.push(d.op),r.push(this.getDefaultName(d)),i.push(d.param===void 0?null:d.param),t.push(d.field===void 0?null:d.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(d=>Une(d)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const d of this.transform.sort)a.push(d.field),u.push(d.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function Hnn(e){function t(n){if(!(n instanceof sT)){const r=n.clone();if(r instanceof Tl){const i=bW+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Mf||r instanceof Zm||r instanceof oT||r instanceof C_)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function vW(e){if(e instanceof sT)if(e.numChildren()===1&&!(e.children[0]instanceof Tl)){const t=e.children[0];(t instanceof Mf||t instanceof Zm||t instanceof oT||t instanceof C_)&&t.addDimensions(e.fields),t.swapWithParent(),vW(e)}else{const t=e.model.component.data.main;p5e(t);const n=Hnn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(vW)}function p5e(e){if(e instanceof Tl&&e.type===ks.Main&&e.numChildren()===1){const t=e.children[0];t instanceof sT||(t.swapWithParent(),p5e(e))}}const bW="scale_",HO=5;function _W(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!_W(t.children))return!1}return!0}function ef(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function Ive(e,t,n){let r=e.sources,i=!1;return i=ef(new Dnn,r)||i,i=ef(new Nnn(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=ef(new Lnn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=ef(new Mnn,r)||i,i=ef(new Bnn(t),r)||i,i=ef(new Onn,r)||i,i=ef(new $nn,r)||i,i=ef(new jnn,r)||i,i=ef(new Fnn,r)||i,i=ef(new Pnn,r)||i,i=ef(new znn,r)||i),e.sources=r,i}function qnn(e,t){_W(e.sources);let n=0,r=0;for(let i=0;i<HO&&Ive(e,t,!0);i++)n++;e.sources.map(vW);for(let i=0;i<HO&&Ive(e,t,!1);i++)r++;_W(e.sources),Math.max(n,r)===HO&&wt(`Maximum optimization runs(${HO}) reached.`)}class Ho{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Ho(()=>t(n))}}function m5e(e){ps(e)?Wnn(e):Gnn(e)}function Wnn(e){const t=e.component.scales;for(const n of yt(t)){const r=Knn(e,n);if(t[n].setWithExplicit("domains",r),Qnn(e,n),e.component.data.isFaceted){let s=e;for(;!vc(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)zm(a)&&(a.data=bW+a.data.replace(bW,""))}}}function Gnn(e){for(const n of e.children)m5e(n);const t=e.component.scales;for(const n of yt(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=Jy(r,o.getWithExplicit("domains"),"domains","scale",wW);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&wt(VXt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Ynn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=Rve(t,n);if(!i){wt(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=Rve(t,n);if(i)return"unaggregated"}return e}function Knn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Ynn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&Ao(r.x2)?Ao(r.x)?Jy(E0(n,i,e,"x"),E0(n,i,e,"x2"),"domain","scale",wW):E0(n,i,e,"x2"):t==="y"&&Ao(r.y2)?Ao(r.y)?Jy(E0(n,i,e,"y"),E0(n,i,e,"y2"),"domain","scale",wW):E0(n,i,e,"y2"):E0(n,i,e,t)}function Xnn(e,t,n){return e.map(r=>({signal:`{data: ${$j(r,{timeUnit:n,type:t})}}`}))}function CU(e,t,n){var i;const r=(i=Jo(n))==null?void 0:i.unit;return t==="temporal"||r?Xnn(e,t,r):[e]}function E0(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=Ao(i[r]),{type:c}=l,d=l.timeUnit,f=Hen({invalid:Ip("invalid",s,a),isPath:Ov(o)});if(fJt(t)){const m=E0(e,void 0,n,r),y=CU(t.unionWith,c,d);return $h([...y,...m.value])}else{if(en(t))return $h([t]);if(t&&t!=="unaggregated"&&!l4e(t))return $h(CU(t,c,d))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return Jl([[0,1]]);const m=n.requestDataName(f);return Jl([{data:m,field:n.vgField(r,{suffix:"start"})},{data:m,field:n.vgField(r,{suffix:"end"})}])}const h=Jp(r)&&Et(l)?Jnn(n,r,e):void 0;if(Zp(l)){const m=CU([l.datum],c,d);return Jl(m)}const p=l;if(t==="unaggregated"){const{field:m}=l;return Jl([{data:n.requestDataName(f),field:Nt({field:m,aggregate:"min"})},{data:n.requestDataName(f),field:Nt({field:m,aggregate:"max"})}])}else if(qi(p.bin)){if(Zo(e))return Jl(e==="bin-ordinal"?[]:[{data:DI(h)?n.requestDataName(f):n.requestDataName(ks.Raw),field:n.vgField(r,Pk(p,r)?{binSuffix:"range"}:{}),sort:h===!0||!$t(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:m}=p;if(qi(m)){const y=Lre(n,p.field,m);return Jl([new Ho(()=>{const v=n.getSignalName(y);return`[${v}.start, ${v}.stop]`})])}else return Jl([{data:n.requestDataName(f),field:n.vgField(r,{})}])}}else if(p.timeUnit&&_r(["time","utc"],e)){const m=i[Qp(r)];if(C4e(p,m,s,a)){const y=n.requestDataName(f),v=Qy({fieldDef:p,fieldDef2:m,markDef:s,config:a}),w=$I(o)&&v!==.5&&Hs(r);return Jl([{data:y,field:n.vgField(r,w?{suffix:Uj}:{})},{data:y,field:n.vgField(r,{suffix:w?Vj:"end"})}])}}return Jl(h?[{data:DI(h)?n.requestDataName(f):n.requestDataName(ks.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(f),field:n.vgField(r)}])}function AU(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":Pj),...r?{field:kd(r)}:{},...i?{order:i}:{}}}function Qnn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=l4e(r)&&r,o=w_(i)&&Ej(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function Jnn(e,t,n){if(!Zo(n))return;const r=e.fieldDef(t),i=r.sort;if(S4e(i))return{op:"min",field:QE(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Qm(i)){const a=s&&!o.has(i.field);return AU(i,a)}else if(HJt(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:d}=l,f=s&&!o.has(d);if(wg(c)||Pv(c))return AU({field:Nt(l),order:u},f);if(Une(c)||!c)return AU({op:c,field:d,order:u},f)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(_r(["ascending",void 0],i))return!0}}function Rve(e,t){const{aggregate:n,type:r}=e;return n?jt(n)&&!CXt.has(n)?{valid:!1,reason:mQt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:gQt(e)}:{valid:!0}:{valid:!1,reason:pQt(e)}}function wW(e,t,n,r){return e.explicit&&t.explicit&&wt(wQt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Znn(e){const t=Qh(e.map(o=>{if(zm(o)){const{sort:a,...u}=o;return u}return o}),Ar),n=Qh(e.map(o=>{if(zm(o)){const a=o.sort;return a!==void 0&&!DI(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Ar);if(t.length===0)return;if(t.length===1){const o=e[0];if(zm(o)&&n.length>0){let a=n[0];if(n.length>1){wt(Lye);const u=n.filter(l=>$t(l)&&"op"in l&&l.op!=="min");n.every(l=>$t(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if($t(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=Qh(n.map(o=>DI(o)||!("op"in o)||jt(o.op)&&o.op in xXt?o:(wt(EQt(o)),!0)),Ar);let i;r.length===1?i=r[0]:r.length>1&&(wt(Lye),i=!0);const s=Qh(e.map(o=>zm(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function zre(e){if(zm(e)&&jt(e.field))return e.field;if(AXt(e)){let t;for(const n of e.fields)if(zm(n)&&jt(n.field)){if(!t)t=n.field;else if(t!==n.field)return wt(SQt),t}return wt(TQt),t}else if(IXt(e)){wt(CQt);const t=e.fields[0];return jt(t)?t:void 0}}function Yj(e,t){const r=e.component.scales[t].get("domains").map(i=>(zm(i)&&(i.data=e.lookupDataSource(i.data)),i));return Znn(r)}function g5e(e){return aT(e)||Ure(e)?e.children.reduce((t,n)=>t.concat(g5e(n)),kve(e)):kve(e)}function kve(e){return yt(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...d}=i,f=ern(i.range,s,n,e),h=Yj(e,n),p=a?Xen(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:f,...c!==void 0?{reverse:c}:{},...d}),t},[])}function ern(e,t,n,r){if(Hs(n)){if(Nv(e))return{step:{signal:`${t}_step`}}}else if($t(e)&&zm(e))return{...e,data:r.lookupDataSource(e.data)};return e}class y5e extends Hg{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(_r([ma.LOG,ma.TIME,ma.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&_r([ma.LINEAR,ma.SQRT,ma.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,s=!1,o=!1;for(const a of r){if(ut(a)){const u=a[0],l=a[a.length-1];if(Gr(u)&&Gr(l))if(u<=0&&l>=0){i=!0;continue}else{s=!0;continue}}o=!0}if(i)return"definitely";if(s&&!o)return"definitely-not"}return"maybe"}}const trn=["range","scheme"];function nrn(e){const t=e.component.scales;for(const n of zne){const r=t[n];if(!r)continue;const i=rrn(n,e);r.setWithExplicit("range",i)}}function Pve(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=Fl(t),o=e.getName(s);if($t(r)&&r.binned&&r.step!==void 0)return new Ho(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(qi(r)){const a=Lre(e,i,r);return new Ho(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function rrn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const d of trn)if(n[d]!==void 0){const f=iW(s,d),h=c4e(e,d);if(!f)wt(V6e(s,d,e));else if(h)wt(h);else switch(d){case"range":{const p=n.range;if(ut(p)){if(Hs(e))return $h(p.map(m=>{if(m==="width"||m==="height"){const y=t.getName(m),v=t.getSignalName.bind(t);return Ho.fromName(v,y)}return m}))}else if($t(p))return $h({data:t.requestDataName(ks.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return $h(p)}case"scheme":return $h(irn(n[d]))}}const o=e===ls||e==="xOffset"?"width":"height",a=r[o];if(kp(a)){if(Hs(e))if(Zo(s)){const d=b5e(a,t,e);if(d)return $h({step:d})}else wt(H6e(o));else if(Tk(e)){const d=e===Cv?"x":"y";if(t.getScaleComponent(d).get("type")==="band"){const p=_5e(a,s);if(p)return $h(p)}}}const{rangeMin:u,rangeMax:l}=n,c=srn(e,t);return(u!==void 0||l!==void 0)&&iW(s,"rangeMin")&&ut(c)&&c.length===2?$h([u??c[0],l??c[1]]):Jl(c)}function irn(e){return dJt(e)?{scheme:e.name,...Sl(e,["name"])}:{scheme:e}}function v5e(e,t,n,{center:r}={}){const i=Fl(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===ta&&Yf(n)?r?[Ho.fromName(a=>`${o(a)}/2`,s),Ho.fromName(a=>`-${o(a)}/2`,s)]:[Ho.fromName(o,s),0]:r?[Ho.fromName(a=>`-${o(a)}/2`,s),Ho.fromName(a=>`${o(a)}/2`,s)]:[0,Ho.fromName(o,s)]}function srn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=Ao(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case ls:case ta:{if(_r(["point","band"],u)){const d=w5e(e,n,r.view);if(kp(d))return{step:b5e(d,t,e)}}return v5e(e,t,u)}case Cv:case tT:return orn(e,t,u);case Bg:{const d=lrn(i,r),f=crn(i,n,t,r);return HE(u)?urn(d,f,arn(u,r,l,e)):[d,f]}case Bd:return[0,Math.PI*2];case b_:return[0,360];case ch:return[0,new Ho(()=>{const d=t.getSignalName(vc(t.parent)?"child_width":"width"),f=t.getSignalName(vc(t.parent)?"child_height":"height");return`min(${d},${f})/2`})];case Rv:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case kv:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Ll:return"symbol";case $l:case Kp:case Xp:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case zg:case Av:case Iv:return[r.scale.minOpacity,r.scale.maxOpacity]}}function b5e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=Lne(n),o=r[s];if(ije({step:e,offsetIsDiscrete:Xn(o)&&i4e(o.type)})==="offset"&&F4e(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const f=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${f}, ${h})`}const d=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${NXt(d)})`}}else return e.step}function _5e(e,t){if(ije({step:e,offsetIsDiscrete:Zo(t)})==="offset")return{step:e.step}}function orn(e,t,n){const r=e===Cv?"x":"y",i=t.getScaleComponent(r);if(!i)return v5e(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=w5e(r,t.size,t.config.view);if(kp(l)){const c=_5e(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(Et(l)&&l.timeUnit){const c=e4e(l.timeUnit,p=>`scale('${o}', ${p})`),d=t.config.scale.bandWithNestedOffsetPaddingInner,f=Qy({fieldDef:l,markDef:a,config:u})-.5,h=f!==0?` + ${f}`:"";if(d){const p=en(d)?`${d.signal}/2`+h:`${d/2+f}`,m=en(d)?`(1 - ${d.signal}/2)`+h:`${1-d/2+f}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return d6e(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function w5e(e,t,n){const r=e===ls?"width":"height",i=t[r];return i||lL(n,r)}function arn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&ut(n)?n.length+1:(wt(MQt(r)),3)}}function urn(e,t,n){const r=()=>{const i=Ef(t),s=Ef(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return en(t)?new Ho(r):{signal:r()}}function lrn(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(Sj("size",e))}const Nve=.95;function crn(e,t,n,r){const i={x:Pve(n,"x"),y:Pve(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=Ove(t,i,r.view);return Gr(s)?s-1:new Ho(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=Ove(t,i,r.view);return Gr(s)?Math.pow(Nve*s,2):new Ho(()=>`pow(${Nve} * ${s.signal}, 2)`)}}throw new Error(Sj("size",e))}function Ove(e,t,n){const r=kp(e.width)?e.width.step:uL(n,"width"),i=kp(e.height)?e.height.step:uL(n,"height");return t.x||t.y?new Ho(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function x5e(e,t){ps(e)?drn(e,t):S5e(e,t)}function drn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of yt(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),d=Ao(i[a]),f=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),y=iW(h,t),v=c4e(a,t);if(f!==void 0&&(y?v&&wt(v):wt(V6e(h,t,a))),y&&v===void 0)if(f!==void 0){const w=d.timeUnit,x=d.type;switch(t){case"domainMax":case"domainMin":x_(u[t])||x==="temporal"||w?l.set(t,{signal:$j(u[t],{type:x,timeUnit:w})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const w=t in Dve?Dve[t]({model:e,channel:a,fieldOrDatumDef:d,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:j4e(i,a),hasSecondaryRangeChannel:!!i[Qp(a)]}):r.scale[t];w!==void 0&&l.set(t,w,!1)}}}const Dve={bins:({model:e,fieldOrDatumDef:t})=>Et(t)?frn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>hrn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>prn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>mrn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>grn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>yrn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Et(e)?e.sort:void 0;return vrn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>brn(e,t,n,r,i,s.scale,o)};function E5e(e){ps(e)?nrn(e):S5e(e,"range")}function S5e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?E5e(r):x5e(r,t);for(const r of yt(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=Jy(i,a,t,"scale",yje((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function frn(e,t){const n=t.bin;if(qi(n)){const r=Lre(e,t.field,n);return new Ho(()=>e.getSignalName(r))}else if(pa(n)&&w_(n)&&n.step!==void 0)return{step:n.step}}function hrn(e,t){if(_r([$l,Kp,Xp],e)&&t!=="nominal")return"hcl"}function prn(e,t,n,r,i,s){var o;if(!((o=Xf(s))!=null&&o.bin||ut(n)||i!=null||r!=null||_r([ma.TIME,ma.UTC],e)))return Hs(t)?!0:void 0}function mrn(e,t,n,r,i,s){if(Hs(e)){if(Jh(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(Et(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===ma.POINT)return n.pointPadding}}function grn(e,t,n,r,i,s=!1){if(e===void 0){if(Hs(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:Vs(o,n==="bar"?a:u)}else if(Tk(t)&&r===ma.BAND)return i.offsetBandPaddingInner}}function yrn(e,t,n,r,i,s=!1){if(e===void 0){if(Hs(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===ma.BAND)return Vs(o,en(r)?{signal:`${r.signal}/2`}:r/2)}else if(Tk(t)){if(n===ma.POINT)return .5;if(n===ma.BAND)return i.offsetBandPaddingOuter}}}function vrn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Yf(e)&&t==="descending"?en(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Yf(e)&&t==="descending")return!0}function brn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Yf(i)){if(ut(n)){const u=n[0],l=n[n.length-1];if(Gr(u)&&u<=0&&Gr(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!HE(i))return!0;if(!(Et(t)&&t.bin)&&_r([...Ug,...pXt],e)){const{orient:u,type:l}=r;return _r(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:_r(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function _rn(e,t,n,r,i=!1){const s=wrn(t,n,r,i),{type:o}=e;return Jp(t)?o!==void 0?vJt(t,o)?Et(n)&&!yJt(o,n.type)?(wt(bQt(o,s)),s):o:(wt(vQt(t,o,s)),s):s:null}function wrn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(Lx(e)||vU(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&wt(bU(e,"ordinal")),"ordinal";if(Hs(e)||Tk(e)){if(_r(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in Bne)return"band";const s=n[Fl(e)];return Bb(s)||WE(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return Lx(e)?"time":vU(e)==="discrete"?(wt(bU(e,"temporal")),"ordinal"):Et(t)&&t.timeUnit&&Jo(t.timeUnit).utc?"utc":"time";case"quantitative":return Lx(e)?Et(t)&&qi(t.bin)?"bin-ordinal":"linear":vU(e)==="discrete"?(wt(bU(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(z6e(t.type))}function xrn(e,{ignoreRange:t}={}){T5e(e),m5e(e);for(const n of gJt)x5e(e,n);t||E5e(e)}function T5e(e){ps(e)?e.component.scales=Ern(e):e.component.scales=Trn(e)}function Ern(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of zne){const o=Ao(t[s]);if(o&&n===h4e&&s===Ll&&o.type===nT)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=j4e(t,s),l=_rn(a,s,o,r,u);i[s]=new y5e(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const Srn=yje((e,t)=>jye(e)-jye(t));function Trn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){T5e(s);for(const o of yt(s.component.scales))if((t=i.scale)[o]??(t[o]=n5e(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?oJt(a.value,u.value)?r[o]=Jy(a,u,"type","scale",Srn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of yt(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new y5e(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class IU{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function ps(e){return(e==null?void 0:e.type)==="unit"}function vc(e){return(e==null?void 0:e.type)==="facet"}function Ure(e){return(e==null?void 0:e.type)==="concat"}function aT(e){return(e==null?void 0:e.type)==="layer"}class Vre{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,d;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(d=(c=u.from)==null?void 0:c.facet)!=null&&d.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=Va(a),this.name=t.name??i,this.title=k0(t.title)?{text:t.title}:t.title?Va(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new IU,this.projectionNameMap=r?r.projectionNameMap:new IU,this.signalNameMap=r?r.signalNameMap:new IU,this.data=t.data,this.description=t.description,this.transforms=Nen(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:$Zt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:Nj(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Hg,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?Bn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){xrn(this)}parseProjection(){f5e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){a5e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of yt(r)){const o=r[s];o!==void 0&&(i[s]=Ji(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Ji(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:ki(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=qtn(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of yd)t[r].title&&n.push(jtn(this,r));for(const r of Ore)n=n.concat(Btn(this,r));return n}assembleAxes(){return Ctn(this.component.axes,this.config)}assembleLegends(){return l5e(this)}assembleProjections(){return pnn(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...N6e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return _r(["unit","layer"],this.type)?_r(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),ki(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||vc(this.parent)?g5e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return us((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(ks[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(vc(this.parent)){const n=e5e(t),r=wj(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(Zo(s)&&Nv(o)){const a=i.get("name"),u=Yj(this,r),l=zre(u);if(l){const c=Nt({aggregate:"distinct",field:l},{expr:"datum"});return{signal:Zje(a,i,c)}}else return wt(Hne(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(S6e(t)&&Jp(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(LXt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class C5e extends Vre{vgField(t,n={}){const r=this.fieldDef(t);if(r)return Nt(r,n)}reduceFieldDef(t,n){return dZt(this.getMapping(),(r,i,s)=>{const o=Xf(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){mre(this.getMapping(),(r,i)=>{const s=Xf(r);s&&t(s,i)},n)}}class Kj extends Ci{clone(){return new Kj(null,Bn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Bn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Ar(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class Xj extends Ci{clone(){return new Xj(null,Bn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Bn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Ar(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class Qj extends Ci{clone(){return new Qj(this.parent,Bn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Bn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Ar(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class Jj extends Ci{clone(){return new Jj(null,Bn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Bn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Ar(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Bx extends Ci{clone(){return new Bx(null,Bn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[fh,dh],[Pd,hh]]){const s=i.map(o=>{const a=Ao(n.encoding[o]);return Et(a)?a.field:Zp(a)?{expr:`${a.datum}`}:Kf(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new Bx(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Ll)){const i=n.typedFieldDef(Ll);i.type===nT&&(t=new Bx(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(jt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Ar(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class FI extends Ci{clone(){return new FI(null,this.projection,Bn(this.fields),Bn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[fh,dh],[Pd,hh]]){const i=r.map(o=>{const a=Ao(n.encoding[o]);return Et(a)?a.field:Zp(a)?{expr:`${a.datum}`}:Kf(a)?{expr:`${a.value}`}:void 0}),s=r[0]===Pd?"2":"";(i[0]||i[1])&&(t=new FI(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(jt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Ar(this.fields)} ${Ar(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class ab extends Ci{clone(){return new ab(null,Bn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new ab(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(Et(i)&&Et(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:d}=o.impute,f=U4e(n.mark,r);return new ab(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...d!==void 0?{keyvals:d}:{},...f.length?{groupby:f}:{}})}return null}hash(){return`Impute ${Ar(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:hen(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class Zj extends Ci{clone(){return new Zj(null,Bn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Bn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Ar(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class jI extends Ci{clone(){return new jI(null,Bn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(pen(o)){let u=R5e(o.data,s);u||(u=new Hb(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Tl(u,l,ks.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(men(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(us(u),u)}catch{throw new Error(zXt(u))}if(a=l.materialized,!a)throw new Error(UXt(u))}return new jI(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Ft(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Ar({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Ft(this.transform.as)}:{}};else{let n=this.transform.as;jt(n)||(wt(XXt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class e5 extends Ci{clone(){return new e5(null,Bn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Bn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Ar(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class t5 extends Ci{clone(){return new t5(null,Bn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Bn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Ar(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class n5 extends Ci{clone(){return new n5(null,Bn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Qh((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Ar(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class r5 extends Ci{clone(){return new r5(null,Bn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Ar(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function A5e(e){let t=0;function n(r,i){if(r instanceof Hb&&!r.isGenerator&&!YE(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Xa&&(r.parent instanceof Hb&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof sT){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof Dk||r instanceof Mk||r instanceof ZE||r instanceof iT||r instanceof XE||r instanceof FI||r instanceof Mf||r instanceof jI||r instanceof oT||r instanceof C_||r instanceof Jj||r instanceof Qj||r instanceof Kj||r instanceof Zj||r instanceof e5||r instanceof t5||r instanceof tv||r instanceof r5||r instanceof n5||r instanceof Xj)&&i.transform.push(r.assemble()),(r instanceof pp||r instanceof hp||r instanceof ab||r instanceof Zm||r instanceof Bx)&&i.transform.push(...r.assemble()),r instanceof Tl&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Tl?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Tl&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function Crn(e){const t=[],n=A5e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function Arn(e,t){const n=[],r=A5e(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function Irn(e){return e==="top"||e==="left"||en(e)?"header":"footer"}function Rrn(e){for(const t of yd)krn(e,t);Mve(e,"x"),Mve(e,"y")}function krn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=JE("title",null,r,t);let l=Fx(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=ut(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=JE("labelOrient",a.header,r,t),d=a.header!==null?Vs((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,f=_r(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[f]:t==="facet"?[]:[I5e(e,t,d)]}}}function I5e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Mve(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=$re(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=Irn(a.get("orient"));o[u]??(o[u]=[I5e(e,s,!1)]);const l=EA(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function Prn(e){Hre(e),hL(e,"width"),hL(e,"height")}function Nrn(e){Hre(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";hL(e,t),hL(e,n)}function Hre(e){for(const t of e.children)t.parseLayoutSize()}function hL(e,t){const n=e5e(t),r=wj(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??n5e(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=Jy(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function Orn(e){const{size:t,component:n}=e;for(const r of Ug){const i=Fl(r);if(t[i]){const s=t[i];n.layoutSize.set(i,kp(s)?"step":s,!0)}else{const s=Drn(e,i);n.layoutSize.set(i,s,!1)}}}function Drn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(Zo(s)){const a=lL(r.view,t);return Nv(o)||kp(a)?"step":a}else return aW(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return aW(r.view,t);{const s=lL(r.view,t);return kp(s)?s.step:s}}}function xW(e,t,n){return Nt(t,{suffix:`by_${Nt(e)}`,...n})}class c2 extends C5e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Kre(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!Rk(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=yt(t),r={};for(const i of n){if(![Km,Xm].includes(i)){wt(Sj(i,"facet"));break}const s=t[i];if(s.field===void 0){wt(nW(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=pre(t,n);return r.header?r.header=Va(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=i5(this),this.child.parseData()}parseLayoutSize(){Hre(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Rrn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of yd)for(const r of Dre){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=JE("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=Wj(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof c2))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof c2?{...this.channelHasField("column")?{encode:{update:{columns:{field:Nt(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof c2){if(this.child.channelHasField("column")){const i=Nt(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Ug){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(Zo(o)&&Nv(a)){const u=Yj(this.child,i),l=zre(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):wt(Hne(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of yd){const d=this.facet[c];if(d){u.push(Nt(d));const{bin:f,sort:h}=d;if(qi(f)&&u.push(Nt(d,{binSuffix:"end"})),Qm(h)){const{field:p,op:m=Pj}=h,y=xW(d,h);r&&i?(s.push(y),o.push("max"),a.push(y)):(s.push(p),o.push(m),a.push(y))}else if(ut(h)){const p=QE(d,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Qm(r.sort)?[xW(r,r.sort,{expr:"datum"})]:ut(r.sort)?[QE(r,t,{expr:"datum"})]:[Nt(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Qm(i)?i.order:!ut(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return mW(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of Ore)if(t[s]){const o=JE("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return mW(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=Crn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:yd.map(u=>this.facetSortFields(u)).flat(),order:yd.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(Wen(this,[]))}]}getMapping(){return this.facet}}function Mrn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Qm(s.sort)){const{field:o,op:a=Pj}=s.sort;e=i=new C_(e,{joinaggregate:[{op:a,field:o,as:xW(s,s.sort,{forAs:!0})}],groupby:[Nt(s)]})}return i}return null}function R5e(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const d=(s=a.format)==null?void 0:s.mesh;if(!((u||d)&&u!==d)){if(LI(e)&&LI(a)){if(hc(e.values,a.values))return o}else if(YE(e)&&YE(a)){if(e.url===a.url)return o}else if(vje(e)&&e.name===o.dataName)return o}}return null}function $rn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new Hb({values:[]});return t.push(r),r}const n=R5e(e.data,t);if(n)return gy(e.data)||(n.data.format=f6e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new Hb(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Lrn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(Ten(i))o=e=new XE(e,i),s="derived";else if(Cre(i)){const a=Ann(i);o=e=Xa.makeWithAncestors(e,{},a,n)??e,e=new iT(e,t,i.filter)}else if(hje(i))o=e=pp.makeFromTransform(e,i,t),s="number";else if(Aen(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new Xa(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=hp.makeFromTransform(e,i);else if(Ien(i))o=e=Mf.makeFromTransform(e,i),s="number",Nre(t)&&(e=new tv(e));else if(fje(i))o=e=jI.make(e,t,i,r++),s="derived";else if(xen(i))o=e=new oT(e,i),s="number";else if(Een(i))o=e=new C_(e,i),s="number";else if(Ren(i))o=e=Zm.makeFromTransform(e,i),s="derived";else if(ken(i))o=e=new Jj(e,i),s="derived";else if(Pen(i))o=e=new Xj(e,i),s="derived";else if(Sen(i))o=e=new Qj(e,i),s="derived";else if(gen(i))o=e=new n5(e,i),s="derived";else if(wen(i))e=new r5(e,i);else if(Cen(i))o=e=ab.makeFromTransform(e,i),s="derived";else if(yen(i))o=e=new Kj(e,i),s="derived";else if(ven(i))o=e=new e5(e,i),s="derived";else if(ben(i))o=e=new t5(e,i),s="derived";else if(_en(i))o=e=new Zj(e,i),s="derived";else{wt(KXt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function i5(e){var y;let t=$rn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(gy(i)||YE(i)||LI(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new Ven;gy(i)?(bje(i)?t=new Mk(t,i.sequence):Are(i)&&(t=new Dk(t,i.graticule)),o.parseNothing=!0):((y=i==null?void 0:i.format)==null?void 0:y.parse)===null&&(o.parseNothing=!0),t=Xa.makeExplicit(t,e,o)??t,t=new tv(t);const a=e.parent&&aT(e.parent);(ps(e)||vc(e))&&a&&(t=pp.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=Lrn(t,e,o));const u=Rnn(e),l=Inn(e);t=Xa.makeWithAncestors(t,{},{...u,...l},o)??t,ps(e)&&(t=Bx.parseAll(t,e),t=FI.parseAll(t,e)),(ps(e)||vc(e))&&(a||(t=pp.makeFromEncoding(t,e)??t),t=hp.makeFromEncoding(t,e)??t,t=XE.parseAllForSortIndex(t,e));const c=t=qO(ks.Raw,e,t);if(ps(e)){const v=Mf.makeFromEncoding(t,e);v&&(t=v,Nre(e)&&(t=new tv(t))),t=ab.makeFromEncoding(t,e)??t,t=Zm.makeFromEncoding(t,e)??t}let d,f;if(ps(e)){const{markDef:v,mark:w,config:x}=e,S=Si("invalid",v,x),{marks:E,scales:T}=f=wje({invalid:S,isPath:Ov(w)});E!==T&&T==="include-invalid-values"&&(d=t=qO(ks.PreFilterInvalid,e,t)),E==="exclude-invalid-values"&&(t=ZE.make(t,e,f)??t)}const h=t=qO(ks.Main,e,t);let p;if(ps(e)&&f){const{marks:v,scales:w}=f;v==="include-invalid-values"&&w==="exclude-invalid-values"&&(t=ZE.make(t,e,f)??t,p=t=qO(ks.PostFilterInvalid,e,t))}ps(e)&&Stn(e,h);let m=null;if(vc(e)){const v=e.getName("facet");t=Mrn(t,e.facet)??t,m=new sT(t,e,v,h.getSource()),n[v]=m}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:h,facetRoot:m,ancestorParse:o,preFilterInvalid:d,postFilterInvalid:p}}function qO(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Tl(n,s,e,i);return r[s]=o,o}class Frn extends Vre{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&wt(WXt),this.children=this.getChildren(t).map((l,c)=>Kre(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=i5(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of yt(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return jj(t)?t.vconcat:Sre(t)?t.hconcat:t.concat}parseLayoutSize(){Nrn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Mre(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function jrn(e){return e===!1||e===null}const Brn={disable:1,gridScale:1,scale:1,...$4e,labelExpr:1,encode:1},k5e=yt(Brn);class qre extends Hg{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new qre(Bn(this.explicit),Bn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!jrn(this.get(t))}hasOrientSignalRef(){return en(this.explicit.orient)}}function zrn(e,t,n){const{encoding:r,config:i}=e,s=Ao(r[t])??Ao(r[Qp(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(zb(u))return{text:Sf({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(qE(s)==="quantitative"){if(WE(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Sf({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Sf({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(qE(s)==="temporal"&&i.timeFormatType&&Et(s)&&!s.timeUnit)return{text:Sf({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function Urn(e){return Ug.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Krn(n,e)]),t),{})}const Vrn={bottom:"top",top:"bottom",left:"right",right:"left"};function Hrn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of yt(i.component.axes))n.axis[s]=$re(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=qrn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of Ug){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!en(a)){if(r[a]>0&&!u){const l=Vrn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function qrn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=Wrn(i,s)}}}else return t.map(n=>n.clone());return e}function Wrn(e,t){for(const n of k5e){const r=Jy(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return j6e(i,s);case"gridScale":return{explicit:i.explicit,value:Vs(i.value,s.value)}}return zj(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function Grn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(en(n.labelAngle)?n.labelAngle:MI(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===Kje(r,i))return!0}return e===n[t]}const Yrn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Krn(e,t){var v,w;let n=t.axis(e);const r=new qre,i=Ao(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((v=o[e==="x"?"axisX":"axisY"])==null?void 0:v.orient)||((w=o.axis)==null?void 0:w.orient)||Dtn(e),u=t.getScaleComponent(e).get("type"),l=Atn(e,u,a,t.config),c=n!==void 0?!n:hW("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const d=Ptn(i,n,e,o.style,l),f=x4e(n.formatType,i,u),h=w4e(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:d,format:h,formatType:f,mark:s,config:o};for(const x of k5e){const S=x in _ve?_ve[x](p):Wye(x)?n[x]:void 0,E=S!==void 0,T=Grn(S,x,n,t,e);if(E&&T)r.set(x,S,T);else{const{configValue:A=void 0,configFrom:I=void 0}=Wye(x)&&x!=="values"?hW(x,o.style,n.style,l):{},k=A!==void 0;E&&!k?r.set(x,S,T):(I!=="vgAxisConfig"||Yrn.has(x)&&k||Nk(A)||en(A))&&r.set(x,A,!1)}}const m=n.encoding??{},y=M4e.reduce((x,S)=>{if(!r.hasAxisPart(S))return x;const E=t5e(m[S]??{},t),T=S==="labels"?zrn(t,e,E):E;return T!==void 0&&!ki(T)&&(x[S]={update:T}),x},{});return ki(y)||r.set("encode",y,!!n.encoding||n.labelAngle!==void 0),r}function Xrn({encoding:e,size:t}){for(const n of Ug){const r=Fl(n);kp(t[r])&&ey(e[n])&&(delete t[r],wt(H6e(r)))}return t}const Qrn={vgMark:"arc",encodeEntry:e=>({...zd(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Ka("x",e,{defaultPos:"mid"}),...Ka("y",e,{defaultPos:"mid"}),...Zy(e,"radius"),...Zy(e,"theta")})},Jrn={vgMark:"area",encodeEntry:e=>({...zd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...cL("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...cL("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...Pre(e)})},Zrn={vgMark:"rect",encodeEntry:e=>({...zd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Zy(e,"x"),...Zy(e,"y")})},ein={vgMark:"shape",encodeEntry:e=>({...zd(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Et(n)&&n.type===nT?{field:Nt(n,{expr:"datum"})}:{}}]}},tin={vgMark:"image",encodeEntry:e=>({...zd(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Zy(e,"x"),...Zy(e,"y"),...Rre(e,"url")})},nin={vgMark:"line",encodeEntry:e=>({...zd(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Ka("x",e,{defaultPos:"mid"}),...Ka("y",e,{defaultPos:"mid"}),...Wo("size",e,{vgChannel:"strokeWidth"}),...Pre(e)})},rin={vgMark:"trail",encodeEntry:e=>({...zd(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Ka("x",e,{defaultPos:"mid"}),...Ka("y",e,{defaultPos:"mid"}),...Wo("size",e),...Pre(e)})};function Wre(e,t){const{config:n}=e;return{...zd(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Ka("x",e,{defaultPos:"mid"}),...Ka("y",e,{defaultPos:"mid"}),...Wo("size",e),...Wo("angle",e),...iin(e,n,t)}}function iin(e,t,n){return n?{shape:{value:n}}:Wo("shape",e)}const sin={vgMark:"symbol",encodeEntry:e=>Wre(e)},oin={vgMark:"symbol",encodeEntry:e=>Wre(e,"circle")},ain={vgMark:"symbol",encodeEntry:e=>Wre(e,"square")},uin={vgMark:"rect",encodeEntry:e=>({...zd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Zy(e,"x"),...Zy(e,"y")})},lin={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...zd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...cL("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...cL("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Wo("size",e,{vgChannel:"strokeWidth"})}}},cin={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...zd(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Ka("x",e,{defaultPos:"mid"}),...Ka("y",e,{defaultPos:"mid"}),...Rre(e),...Wo("size",e,{vgChannel:"fontSize"}),...Wo("angle",e),...gve("align",din(e.markDef,n,t)),...gve("baseline",fin(e.markDef,n,t)),...Ka("radius",e,{defaultPos:null}),...Ka("theta",e,{defaultPos:null})}}};function din(e,t,n){if(Si("align",e,n)===void 0)return"center"}function fin(e,t,n){if(Si("baseline",e,n)===void 0)return"middle"}const hin={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...zd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Ka("x",e,{defaultPos:"mid",vgChannel:"xc"}),...Ka("y",e,{defaultPos:"mid",vgChannel:"yc"}),...Wo("size",e,{defaultValue:pin(e),vgChannel:i}),[s]:Ji(Si("thickness",n,t))}}};function pin(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=Si("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&Nv(a)&&Gr(a.step)?a.step*3/4:uL(t.view,i)*3/4}}const WO={arc:Qrn,area:Jrn,bar:Zrn,circle:oin,geoshape:ein,image:tin,line:nin,point:sin,rect:uin,rule:lin,square:ain,text:cin,tick:hin,trail:rin};function min(e){if(_r([Rj,Aj,xJt],e.mark)){const t=U4e(e.mark,e.encoding);if(t.length>0)return gin(e,t)}else if(e.mark===Ij){const t=tW.some(n=>Si(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return yin(e)}return Gre(e)}const $ve="faceted_path_";function gin(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:$ve+e.requestDataName(ks.Main),data:e.requestDataName(ks.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Gre(e,{fromPrefix:$ve})}]}const Lve="stack_group_";function yin(e){var l;const[t]=Gre(e,{fromPrefix:Lve}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,d)=>{const f=[r({prefix:"min",suffix:"start",expr:d}),r({prefix:"max",suffix:"start",expr:d}),r({prefix:"min",suffix:"end",expr:d}),r({prefix:"max",suffix:"end",expr:d})];return`${c}(${f.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...FE(t.encode.update,["y","yc","y2","height",...tW]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Sl(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...FE(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Sl(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of tW){const d=Ip(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):d&&(s[c]=Ji(d)),d&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const d=e.fieldDef(c),f=Nt(d);f&&a.push(f),(d!=null&&d.bin||d!=null&&d.timeUnit)&&a.push(Nt(d,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,d)=>{if(t.encode.update[d])return{...c,[d]:t.encode.update[d]};{const f=Ip(d,e.markDef,e.config);return f!==void 0?{...c,[d]:Ji(f)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(ks.Main),name:Lve+e.requestDataName(ks.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function vin(e){const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!ut(o)&&Kf(o)&&Zq(o.value)||!o&&Zq(Si("order",i,s)))){if((ut(o)||Et(o))&&!n)return $6e(o,{expr:"datum"});if(Ov(r)){const a=i.orient==="horizontal"?"y":"x",u=t[a];if(Et(u))return{field:a}}}}function Gre(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=Vs(r.clip,bin(e),_in(e)),a=D6e(r),u=i.key,l=vin(e),c=win(e),d=Si("aria",r,s),f=WO[n].postEncodingTransform?WO[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:WO[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...d===!1?{aria:d}:{},from:{data:t.fromPrefix+e.requestDataName(ks.Main)},encode:{update:WO[n].encodeEntry(e)},...f?{transform:f}:{}}]}function bin(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function _in(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function win(e){if(!e.component.selection)return null;const t=yt(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=yt(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class P5e extends C5e{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,Yye(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=Rp(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=sen(o,s,{graticule:t.data&&Are(t.data)}));const u=this.encoding=lZt(t.encoding||{},a,o.filled,s);this.markDef=lje(o,u,s),this.size=Xrn({encoding:u,size:Yye(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=uje(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>xre(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===h4e,r=t&&sXt.some(i=>Xn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return zne.reduce((r,i)=>{const s=Ao(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Va(t);return ut(n)&&(i.domain=n.map(oc)),ut(r)&&(i.range=r.map(oc)),i}initAxes(t){return Ug.reduce((n,r)=>{const i=t[r];if(Xn(i)||r===ls&&Xn(t.x2)||r===ta&&Xn(t.y2)){const s=Xn(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=yt(t),r={};for(const i of n){const s=t[i];r[i]=Nk(s)?O6e(s):oc(s)}return r}initLegends(t){return mXt.reduce((n,r)=>{const i=Ao(t[r]);if(i&&yXt(r)){const s=i.legend;n[r]=s&&Va(s)}return n},{})}parseData(){this.component.data=i5(this)}parseLayoutSize(){Orn(this)}parseSelections(){this.component.selection=Etn(this,this.selection)}parseMarkGroup(){this.component.mark=min(this)}parseAxesAndHeaders(){this.component.axes=Urn(this)}assembleSelectionTopLevelSignals(t){return Gen(this,t)}assembleSignals(){return[...Wje(this),...qen(this,[])]}assembleSelectionData(t){return Yen(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Mre(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!aT(this.parent))&&(t=Eje(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return sb(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Xf(n)}typedFieldDef(t){const n=this.fieldDef(t);return ju(n)?n:null}}class Yre extends Vre{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(Bj(a))return new Yre(a,this,this.getName(`layer_${u}`),o,s);if(Vg(a))return new P5e(a,this,this.getName(`layer_${u}`),o,s);throw new Error(Vne(a))})}parseData(){this.component.data=i5(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Prn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of yt(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Hrn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),Wje(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Mre(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of Ft(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Ken(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),l5e(this))}}function Kre(e,t,n,r,i){if(Nj(e))return new c2(e,t,n,i);if(Bj(e))return new Yre(e,t,n,r,i);if(Vg(e))return new P5e(e,t,n,r,i);if(OZt(e))return new Frn(e,t,n,i);throw new Error(Vne(e))}function xin(e,t={}){t.logger&&$Qt(t.logger),t.fieldTitle&&N4e(t.fieldTitle);try{const n=aje(VS(t.config,e.config)),r=gje(e,n),i=Kre(r,null,"",void 0,n);return i.parse(),qnn(i.component.data,i),{spec:Sin(i,Ein(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&LQt(),t.fieldTitle&&eZt()}}function Ein(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):jt(t)&&(t={type:t}),i&&s&&Ben(t.type)){if(i==="step"&&s==="step")wt(Nye()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";wt(Nye(wj(o)));const a=o==="width"?"height":"width";t.type=zen(a)}}return{...yt(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...ove(n,!1),...ove(e,!0)}}function Sin(e,t,n={},r){const i=e.config?GZt(e.config):void 0,s=[].concat(e.assembleSelectionData([]),Arn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:d,...f}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...f,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...rje(d)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const Tin=ZKt.version,Cin=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:BE,accessPathWithDatum:One,compile:xin,contains:_r,deepEqual:hc,deleteNestedProperty:J$,duplicate:Bn,entries:Ky,every:kne,fieldIntersection:Nne,flatAccessWithDatum:p6e,getFirstDefined:Vs,hasIntersection:Pne,hash:Ar,internalField:y6e,isBoolean:DI,isEmpty:ki,isEqual:tXt,isInternalField:v6e,isNullOrFalse:Zq,isNumeric:mj,keys:yt,logicalExpr:u2,mergeDeep:f6e,never:d6e,normalize:gje,normalizeAngle:MI,omit:Sl,pick:FE,prefixGenerator:eW,removePathFromField:eT,replaceAll:$b,replacePathInField:kd,resetIdCounter:rXt,setEqual:h6e,some:jE,stringify:Pi,titleCase:xk,unique:Qh,uniqueId:g6e,vals:xa,varName:us,version:Tin},Symbol.toStringTag,{value:"Module"}));function N5e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var Ain="2.15.0",Iin={version:Ain};const Pw="#fff",Fve="#888",Rin={background:"#333",view:{stroke:Fve},title:{color:Pw,subtitleColor:Pw},style:{"guide-label":{fill:Pw},"guide-title":{fill:Pw}},axis:{domainColor:Pw,gridColor:Fve,tickColor:Pw}},s1="#4572a7",kin={background:"#fff",arc:{fill:s1},area:{fill:s1},line:{stroke:s1,strokeWidth:2},path:{stroke:s1},rect:{fill:s1},shape:{stroke:s1},symbol:{fill:s1,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},o1="#30a2da",RU="#cbcbcb",Pin="#999",Nin="#333",jve="#f0f0f0",Bve="#333",Oin={arc:{fill:o1},area:{fill:o1},axis:{domainColor:RU,grid:!0,gridColor:RU,gridWidth:1,labelColor:Pin,labelFontSize:10,titleColor:Nin,tickColor:RU,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:jve,group:{fill:jve},legend:{labelColor:Bve,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Bve,titleFontSize:14,titlePadding:10},line:{stroke:o1,strokeWidth:2},path:{stroke:o1,strokeWidth:.5},rect:{fill:o1},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:o1},bar:{binSpacing:2,fill:o1,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},a1="#000",Din={group:{fill:"#e5e5e5"},arc:{fill:a1},area:{fill:a1},line:{stroke:a1},path:{stroke:a1},rect:{fill:a1},shape:{stroke:a1},symbol:{fill:a1,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Min=22,$in="normal",zve="Benton Gothic, sans-serif",Uve=11.5,Lin="normal",u1="#82c6df",kU="Benton Gothic Bold, sans-serif",Vve="normal",Hve=13,IC={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},Fin={background:"#ffffff",title:{anchor:"start",color:"#000000",font:kU,fontSize:Min,fontWeight:$in},arc:{fill:u1},area:{fill:u1},line:{stroke:u1,strokeWidth:2},path:{stroke:u1},rect:{fill:u1},shape:{stroke:u1},symbol:{fill:u1,size:30},axis:{labelFont:zve,labelFontSize:Uve,labelFontWeight:Lin,titleFont:kU,titleFontSize:Hve,titleFontWeight:Vve},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:zve,labelFontSize:Uve,symbolType:"square",titleFont:kU,titleFontSize:Hve,titleFontWeight:Vve},range:{category:IC["category-6"],diverging:IC["fireandice-6"],heatmap:IC["fire-7"],ordinal:IC["fire-7"],ramp:IC["fire-7"]}},l1="#ab5787",GO="#979797",jin={background:"#f9f9f9",arc:{fill:l1},area:{fill:l1},line:{stroke:l1},path:{stroke:l1},rect:{fill:l1},shape:{stroke:l1},symbol:{fill:l1,size:30},axis:{domainColor:GO,domainWidth:.5,gridWidth:.2,labelColor:GO,tickColor:GO,tickWidth:.2,titleColor:GO},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},c1="#3e5c69",Bin={background:"#fff",arc:{fill:c1},area:{fill:c1},line:{stroke:c1},path:{stroke:c1},rect:{fill:c1},shape:{stroke:c1},symbol:{fill:c1},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Jc="#1696d2",qve="#000000",zin="#FFFFFF",YO="Lato",PU="Lato",Uin="Lato",Vin="#DEDDDD",Hin=18,RC={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},qin={background:zin,title:{anchor:"start",fontSize:Hin,font:YO},axisX:{domain:!0,domainColor:qve,domainWidth:1,grid:!1,labelFontSize:12,labelFont:PU,labelAngle:0,tickColor:qve,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:YO},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Vin,gridWidth:1,labelFontSize:12,labelFont:PU,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:YO,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:PU,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:YO,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:RC["six-groups-cat-1"],diverging:RC["diverging-colors"],heatmap:RC["diverging-colors"],ordinal:RC["six-groups-seq"],ramp:RC["shades-blue"]},area:{fill:Jc},rect:{fill:Jc},line:{color:Jc,stroke:Jc,strokeWidth:5},trail:{color:Jc,stroke:Jc,strokeWidth:0,size:1},path:{stroke:Jc,strokeWidth:.5},point:{filled:!0},text:{font:Uin,color:Jc,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Jc,stroke:null}},arc:{fill:Jc},shape:{stroke:Jc},symbol:{fill:Jc,size:30}},d1="#3366CC",Wve="#ccc",KO="Arial, sans-serif",Win={arc:{fill:d1},area:{fill:d1},path:{stroke:d1},rect:{fill:d1},shape:{stroke:d1},symbol:{stroke:d1},circle:{fill:d1},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:KO,fontSize:12},"guide-title":{font:KO,fontSize:12},"group-title":{font:KO,fontSize:12}},title:{font:KO,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Wve,tickColor:Wve,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Xre=e=>e*(1/3+1),Gve=Xre(9),Yve=Xre(10),Kve=Xre(12),kC="Segoe UI",Xve="wf_standard-font, helvetica, arial, sans-serif",Qve="#252423",PC="#605E5C",Jve="transparent",Gin="#C8C6C4",sf="#118DFF",Yin="#12239E",Kin="#E66C37",Xin="#6B007B",Qin="#E044A7",Jin="#744EC2",Zin="#D9B300",esn="#D64550",O5e=sf,D5e="#DEEFFF",Zve=[D5e,O5e],tsn=[D5e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",O5e],nsn={view:{stroke:Jve},background:Jve,font:kC,header:{titleFont:Xve,titleFontSize:Kve,titleColor:Qve,labelFont:kC,labelFontSize:Yve,labelColor:PC},axis:{ticks:!1,grid:!1,domain:!1,labelColor:PC,labelFontSize:Gve,titleFont:Xve,titleColor:Qve,titleFontSize:Kve,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Gin,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:sf},line:{stroke:sf,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:kC,fontSize:Gve,fill:PC},arc:{fill:sf},area:{fill:sf,line:!0,opacity:.6},path:{stroke:sf},rect:{fill:sf},point:{fill:sf,filled:!0,size:75},shape:{stroke:sf},symbol:{fill:sf,strokeWidth:1.5,size:50},legend:{titleFont:kC,titleFontWeight:"bold",titleColor:PC,labelFont:kC,labelFontSize:Yve,labelColor:PC,symbolType:"circle",symbolSize:75},range:{category:[sf,Yin,Kin,Xin,Qin,Jin,Zin,esn],diverging:Zve,heatmap:Zve,ordinal:tsn}},NU='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',rsn='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',OU=400,XO={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},isn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],ssn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function s5({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=XO.gridBg[e],i=XO.textPrimary[e],s=XO.textSecondary[e],o=n==="dark"?isn:ssn,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:NU,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:rsn,labelFontWeight:OU,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:XO.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:NU,fill:s,fontWeight:OU},"guide-title":{font:NU,fill:s,fontWeight:OU}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const osn=s5({theme:"white",background:"#ffffff"}),asn=s5({theme:"g10",background:"#f4f4f4"}),usn=s5({theme:"g90",background:"#262626"}),lsn=s5({theme:"g100",background:"#161616"}),csn=Iin.version,dsn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:asn,carbong100:lsn,carbong90:usn,carbonwhite:osn,dark:Rin,excel:kin,fivethirtyeight:Oin,ggplot2:Din,googlecharts:Win,latimes:Fin,powerbi:nsn,quartz:jin,urbaninstitute:qin,version:csn,vox:Bin},Symbol.toStringTag,{value:"Module"}));function fsn(e,t,n,r){if(ut(e))return`[${e.map(i=>t(jt(i)?i:e1e(i,n))).join(", ")}]`;if($t(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&($t(c)&&(c=e1e(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function hsn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function e1e(e,t){return JSON.stringify(e,hsn(t))}var psn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const M5e="vg-tooltip-element",msn={offsetX:10,offsetY:10,id:M5e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:gsn,maxDepth:2,formatTooltip:fsn,baseURL:""};function gsn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function ysn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return psn.toString().replace(M5e,e)}function vsn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class bsn{constructor(t){this.options={...msn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=ysn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=vsn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var DU={};function _sn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}class wsn{constructor(){this.max=1e3,this.map=new Map}get(t){const n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(t,n)}return this}}var xsn=wsn;const Esn=Object.freeze({loose:!0}),Ssn=Object.freeze({}),Tsn=e=>e?typeof e!="object"?Esn:e:Ssn;var Qre=Tsn,EW={exports:{}};const $5e=256,Csn=Number.MAX_SAFE_INTEGER||9007199254740991,Asn=16,Isn=$5e-6;var Jre={MAX_LENGTH:$5e,MAX_SAFE_COMPONENT_LENGTH:Asn,MAX_SAFE_BUILD_LENGTH:Isn,MAX_SAFE_INTEGER:Csn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Rsn=typeof process=="object"&&DU&&DU.NODE_DEBUG&&/\bsemver\b/i.test(DU.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var o5=Rsn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Jre,s=o5;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const d="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",i],[d,r]],h=m=>{for(const[y,v]of f)m=m.split(`${y}*`).join(`${y}{0,${v}}`).split(`${y}+`).join(`${y}{1,${v}}`);return m},p=(m,y,v)=>{const w=h(y),x=c++;s(m,x,y),l[m]=x,u[x]=y,o[x]=new RegExp(y,v?"g":void 0),a[x]=new RegExp(w,v?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${d}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(EW,EW.exports);var Zre=EW.exports;const t1e=/^[0-9]+$/,ksn=(e,t)=>{const n=t1e.test(e),r=t1e.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1};var Psn={compareIdentifiers:ksn};const QO=o5,{MAX_LENGTH:n1e,MAX_SAFE_INTEGER:JO}=Jre,{safeRe:r1e,t:i1e}=Zre,Nsn=Qre,{compareIdentifiers:Nw}=Psn;let Osn=class Ih{constructor(t,n){if(n=Nsn(n),t instanceof Ih){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>n1e)throw new TypeError(`version is longer than ${n1e} characters`);QO("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?r1e[i1e.LOOSE]:r1e[i1e.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>JO||this.major<0)throw new TypeError("Invalid major version");if(this.minor>JO||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>JO||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<JO)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(QO("SemVer.compare",this.version,this.options,t),!(t instanceof Ih)){if(typeof t=="string"&&t===this.version)return 0;t=new Ih(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Ih||(t=new Ih(t,this.options)),Nw(this.major,t.major)||Nw(this.minor,t.minor)||Nw(this.patch,t.patch)}comparePre(t){if(t instanceof Ih||(t=new Ih(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(QO("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Nw(r,i)}while(++n)}compareBuild(t){t instanceof Ih||(t=new Ih(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(QO("build compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Nw(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),Nw(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var eie=Osn;const s1e=eie,Dsn=(e,t,n)=>new s1e(e,n).compare(new s1e(t,n));var uT=Dsn;const Msn=uT,$sn=(e,t,n)=>Msn(e,t,n)===0;var Lsn=$sn;const Fsn=uT,jsn=(e,t,n)=>Fsn(e,t,n)!==0;var Bsn=jsn;const zsn=uT,Usn=(e,t,n)=>zsn(e,t,n)>0;var Vsn=Usn;const Hsn=uT,qsn=(e,t,n)=>Hsn(e,t,n)>=0;var Wsn=qsn;const Gsn=uT,Ysn=(e,t,n)=>Gsn(e,t,n)<0;var Ksn=Ysn;const Xsn=uT,Qsn=(e,t,n)=>Xsn(e,t,n)<=0;var Jsn=Qsn;const Zsn=Lsn,eon=Bsn,ton=Vsn,non=Wsn,ron=Ksn,ion=Jsn,son=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return Zsn(e,n,r);case"!=":return eon(e,n,r);case">":return ton(e,n,r);case">=":return non(e,n,r);case"<":return ron(e,n,r);case"<=":return ion(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var oon=son,MU,o1e;function aon(){if(o1e)return MU;o1e=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,d){if(d=n(d),c instanceof t){if(c.loose===!!d.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,d),this.options=d,this.loose=!!d.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const d=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],f=c.match(d);if(!f)throw new TypeError(`Invalid comparator: ${c}`);this.operator=f[1]!==void 0?f[1]:"",this.operator==="="&&(this.operator=""),f[2]?this.semver=new a(f[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,d){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,d).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,d).test(c.semver):(d=n(d),d.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,d)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,d)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}MU=t;const n=Qre,{safeRe:r,t:i}=Zre,s=oon,o=o5,a=eie,u=L5e();return MU}var $U,a1e;function L5e(){if(a1e)return $U;a1e=1;class e{constructor($,F){if(F=r(F),$ instanceof e)return $.loose===!!F.loose&&$.includePrerelease===!!F.includePrerelease?$:new e($.raw,F);if($ instanceof i)return this.raw=$.value,this.set=[[$]],this.format(),this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=$.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(B=>this.parseRange(B.trim())).filter(B=>B.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const B=this.set[0];if(this.set=this.set.filter(q=>!p(q[0])),this.set.length===0)this.set=[B];else if(this.set.length>1){for(const q of this.set)if(q.length===1&&m(q[0])){this.set=[q];break}}}this.format()}format(){return this.range=this.set.map($=>$.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange($){const B=((this.options.includePrerelease&&f)|(this.options.loose&&h))+":"+$,q=n.get(B);if(q)return q;const G=this.options.loose,K=G?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];$=$.replace(K,M(this.options.includePrerelease)),s("hyphen replace",$),$=$.replace(a[u.COMPARATORTRIM],l),s("comparator trim",$),$=$.replace(a[u.TILDETRIM],c),s("tilde trim",$),$=$.replace(a[u.CARETTRIM],d),s("caret trim",$);let L=$.split(" ").map(Q=>v(Q,this.options)).join(" ").split(/\s+/).map(Q=>D(Q,this.options));G&&(L=L.filter(Q=>(s("loose invalid filter",Q,this.options),!!Q.match(a[u.COMPARATORLOOSE])))),s("range list",L);const V=new Map,X=L.map(Q=>new i(Q,this.options));for(const Q of X){if(p(Q))return[Q];V.set(Q.value,Q)}V.size>1&&V.has("")&&V.delete("");const H=[...V.values()];return n.set(B,H),H}intersects($,F){if(!($ instanceof e))throw new TypeError("a Range is required");return this.set.some(B=>y(B,F)&&$.set.some(q=>y(q,F)&&B.every(G=>q.every(K=>G.intersects(K,F)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new o($,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(z(this.set[F],$,this.options))return!0;return!1}}$U=e;const t=xsn,n=new t,r=Qre,i=aon(),s=o5,o=eie,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:d}=Zre,{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:h}=Jre,p=O=>O.value==="<0.0.0-0",m=O=>O.value==="",y=(O,$)=>{let F=!0;const B=O.slice();let q=B.pop();for(;F&&B.length;)F=B.every(G=>q.intersects(G,$)),q=B.pop();return F},v=(O,$)=>(s("comp",O,$),O=E(O,$),s("caret",O),O=x(O,$),s("tildes",O),O=A(O,$),s("xrange",O),O=k(O,$),s("stars",O),O),w=O=>!O||O.toLowerCase()==="x"||O==="*",x=(O,$)=>O.trim().split(/\s+/).map(F=>S(F,$)).join(" "),S=(O,$)=>{const F=$.loose?a[u.TILDELOOSE]:a[u.TILDE];return O.replace(F,(B,q,G,K,L)=>{s("tilde",O,B,q,G,K,L);let V;return w(q)?V="":w(G)?V=`>=${q}.0.0 <${+q+1}.0.0-0`:w(K)?V=`>=${q}.${G}.0 <${q}.${+G+1}.0-0`:L?(s("replaceTilde pr",L),V=`>=${q}.${G}.${K}-${L} <${q}.${+G+1}.0-0`):V=`>=${q}.${G}.${K} <${q}.${+G+1}.0-0`,s("tilde return",V),V})},E=(O,$)=>O.trim().split(/\s+/).map(F=>T(F,$)).join(" "),T=(O,$)=>{s("caret",O,$);const F=$.loose?a[u.CARETLOOSE]:a[u.CARET],B=$.includePrerelease?"-0":"";return O.replace(F,(q,G,K,L,V)=>{s("caret",O,q,G,K,L,V);let X;return w(G)?X="":w(K)?X=`>=${G}.0.0${B} <${+G+1}.0.0-0`:w(L)?G==="0"?X=`>=${G}.${K}.0${B} <${G}.${+K+1}.0-0`:X=`>=${G}.${K}.0${B} <${+G+1}.0.0-0`:V?(s("replaceCaret pr",V),G==="0"?K==="0"?X=`>=${G}.${K}.${L}-${V} <${G}.${K}.${+L+1}-0`:X=`>=${G}.${K}.${L}-${V} <${G}.${+K+1}.0-0`:X=`>=${G}.${K}.${L}-${V} <${+G+1}.0.0-0`):(s("no pr"),G==="0"?K==="0"?X=`>=${G}.${K}.${L}${B} <${G}.${K}.${+L+1}-0`:X=`>=${G}.${K}.${L}${B} <${G}.${+K+1}.0-0`:X=`>=${G}.${K}.${L} <${+G+1}.0.0-0`),s("caret return",X),X})},A=(O,$)=>(s("replaceXRanges",O,$),O.split(/\s+/).map(F=>I(F,$)).join(" ")),I=(O,$)=>{O=O.trim();const F=$.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return O.replace(F,(B,q,G,K,L,V)=>{s("xRange",O,B,q,G,K,L,V);const X=w(G),H=X||w(K),Q=H||w(L),Z=Q;return q==="="&&Z&&(q=""),V=$.includePrerelease?"-0":"",X?q===">"||q==="<"?B="<0.0.0-0":B="*":q&&Z?(H&&(K=0),L=0,q===">"?(q=">=",H?(G=+G+1,K=0,L=0):(K=+K+1,L=0)):q==="<="&&(q="<",H?G=+G+1:K=+K+1),q==="<"&&(V="-0"),B=`${q+G}.${K}.${L}${V}`):H?B=`>=${G}.0.0${V} <${+G+1}.0.0-0`:Q&&(B=`>=${G}.${K}.0${V} <${G}.${+K+1}.0-0`),s("xRange return",B),B})},k=(O,$)=>(s("replaceStars",O,$),O.trim().replace(a[u.STAR],"")),D=(O,$)=>(s("replaceGTE0",O,$),O.trim().replace(a[$.includePrerelease?u.GTE0PRE:u.GTE0],"")),M=O=>($,F,B,q,G,K,L,V,X,H,Q,Z)=>(w(B)?F="":w(q)?F=`>=${B}.0.0${O?"-0":""}`:w(G)?F=`>=${B}.${q}.0${O?"-0":""}`:K?F=`>=${F}`:F=`>=${F}${O?"-0":""}`,w(X)?V="":w(H)?V=`<${+X+1}.0.0-0`:w(Q)?V=`<${X}.${+H+1}.0-0`:Z?V=`<=${X}.${H}.${Q}-${Z}`:O?V=`<${X}.${H}.${+Q+1}-0`:V=`<=${V}`,`${F} ${V}`.trim()),z=(O,$,F)=>{for(let B=0;B<O.length;B++)if(!O[B].test($))return!1;if($.prerelease.length&&!F.includePrerelease){for(let B=0;B<O.length;B++)if(s(O[B].semver),O[B].semver!==i.ANY&&O[B].semver.prerelease.length>0){const q=O[B].semver;if(q.major===$.major&&q.minor===$.minor&&q.patch===$.patch)return!0}return!1}return!0};return $U}const uon=L5e(),lon=(e,t,n)=>{try{t=new uon(t,n)}catch{return!1}return t.test(e)};var con=lon,F5e=_sn(con);function don(e,t,n){const r=e.open(t),i=250,{origin:s}=new URL(t);let o=40;function a(l){l.source===r&&(o=0,e.removeEventListener("message",a,!1))}e.addEventListener("message",a,!1);function u(){o<=0||(r.postMessage(n,s),setTimeout(u,i),o-=1)}setTimeout(u,i)}var fon=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function j5e(e,...t){for(const n of t)hon(e,n);return e}function hon(e,t){for(const n of Object.keys(t))HS(e,n,t[n],!0)}const af=zKt;let BI=Cin;const ZO=typeof window<"u"?window:void 0;var f1e;BI===void 0&&((f1e=ZO==null?void 0:ZO.vl)!=null&&f1e.compile)&&(BI=ZO.vl);const pon={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},mon={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},TA={vega:"Vega","vega-lite":"Vega-Lite"},pL={vega:af.version,"vega-lite":BI?BI.version:"not available"},gon={vega:e=>e,"vega-lite":(e,t)=>BI.compile(e,{config:t}).spec},yon=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,von="chart-wrapper";function bon(e){return typeof e=="function"}function u1e(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${TA[r]} JSON Source`}function _on(e,t){if(e.$schema){const n=N5e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${TA[n.library]}, but mode argument sets ${TA[t]??t}.`);const r=n.library;return F5e(pL[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${TA[r]} ${n.version}, but the current version of ${TA[r]} is v${pL[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function B5e(e){return!!(e&&"load"in e)}function l1e(e){return B5e(e)?e:af.loader(e)}function won(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return jt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function xon(e,t,n={}){let r,i;jt(t)?(i=l1e(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=won(r),o=s.loader;(!i||o)&&(i=l1e(n.loader??o));const a=await c1e(s,i),u=await c1e(n,i),l={...j5e(u,a),config:VS(u.config??{},a.config??{})};return await Son(e,r,l,i)}async function c1e(e,t){const n=jt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=jt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function Eon(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Son(e,t,n={},r){const i=n.theme?VS(dsn[n.theme],n.config??{}):n.config,s=Ev(n.actions)?n.actions:j5e({},pon,n.actions??{}),o={...mon,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??af.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:T,rootContainer:A}=Eon(c);if(!T.getElementById(E)){const I=document.createElement("style");I.id=E,I.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?fon.toString():n.defaultStyle,A.appendChild(I)}}const d=_on(t,n.mode);let f=gon[d](t,i);if(d==="vega-lite"&&f.$schema){const E=N5e(f.$schema);F5e(pL.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${pL.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const E=document.createElement("div");E.classList.add(von),c.appendChild(E),h=E}const p=n.patch;if(p&&(f=p instanceof Function?p(f):_4(f,p,!0,!1).newDocument),n.formatLocale&&af.formatLocale(n.formatLocale),n.timeFormatLocale&&af.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const T=n.expressionFunctions[E];"fn"in T?af.expressionFunction(E,T.fn,T.visitor):T instanceof Function&&af.expressionFunction(E,T)}const{ast:m}=n,y=af.parse(f,d==="vega-lite"?{}:i,{ast:m}),v=new(n.viewClass||af.View)(y,{loader:r,logLevel:u,renderer:a,...m?{expr:af.expressionInterpreter??n.expr??QKt}:{}});if(v.addSignalListener("autosize",(E,T)=>{const{type:A}=T;A=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):A=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):A=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:T}=n,A=E&&!B5e(E)?E==null?void 0:E.baseURL:void 0,I=bon(T)?T:new bsn({baseURL:A,...T===!0?{}:T}).call;v.tooltip(I)}let{hover:w}=n;if(w===void 0&&(w=d==="vega"),w){const{hoverSet:E,updateSet:T}=typeof w=="boolean"?{}:w;v.hover(E,T)}n&&(n.width!=null&&v.width(n.width),n.height!=null&&v.height(n.height),n.padding!=null&&v.padding(n.padding)),await v.initialize(h,n.bind).runAsync();let x;if(s!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const A=document.createElement("details");A.title=o.CLICK_TO_VIEW_ACTIONS,c.append(A),E=A;const I=document.createElement("summary");I.innerHTML=yon,A.append(I),x=k=>{A.contains(k.target)||A.removeAttribute("open")},document.addEventListener("click",x)}const T=document.createElement("div");if(E.append(T),T.classList.add("vega-actions"),s===!0||s.export!==!1){for(const A of["svg","png"])if(s===!0||s.export===!0||s.export[A]){const I=o[`${A.toUpperCase()}_ACTION`],k=document.createElement("a"),D=$t(n.scaleFactor)?n.scaleFactor[A]:n.scaleFactor;k.text=I,k.href="#",k.target="_blank",k.download=`${l}.${A}`,k.addEventListener("mousedown",async function(M){M.preventDefault();const z=await v.toImageURL(A,D);this.href=z}),T.append(k)}}if(s===!0||s.source!==!1){const A=document.createElement("a");A.text=o.SOURCE_ACTION,A.href="#",A.addEventListener("click",function(I){u1e(Bz(t),n.sourceHeader??"",n.sourceFooter??"",d),I.preventDefault()}),T.append(A)}if(d==="vega-lite"&&(s===!0||s.compiled!==!1)){const A=document.createElement("a");A.text=o.COMPILED_ACTION,A.href="#",A.addEventListener("click",function(I){u1e(Bz(f),n.sourceHeader??"",n.sourceFooter??"","vega"),I.preventDefault()}),T.append(A)}if(s===!0||s.editor!==!1){const A=n.editorUrl??"https://vega.github.io/editor/",I=document.createElement("a");I.text=o.EDITOR_ACTION,I.href="#",I.addEventListener("click",function(k){don(window,A,{config:i,mode:p?"vega":d,renderer:a,spec:Bz(p?f:t)}),k.preventDefault()}),T.append(I)}}function S(){x&&document.removeEventListener("click",x),v.finalize()}return{view:v,spec:t,vgSpec:f,finalize:S,embedOptions:n}}function Ton(e){return!!e&&{}.toString.call(e)==="[object Function]"}function Con(e,t,n){n&&(Ton(n)?n(e.data(t)):e.change(t,af.changeset().remove(()=>!0).insert(n)))}function Aon(e,t){Object.keys(t).forEach(n=>{Con(e,n,t[n])})}function z5e(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const U5e=()=>{};function LU(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function Ion(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=z5e([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!uD(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function d1e(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function FU(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function CA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class V5e extends Is.PureComponent{constructor(){super(...arguments),CA(this,"containerRef",Is.createRef()),CA(this,"resultPromise",void 0),CA(this,"handleError",t=>{const{onError:n=U5e}=this.props;n(t,this.containerRef.current),console.warn(t)}),CA(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=z5e([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=Ion(FU(this.props),FU(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!YH(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&d1e(a,s),i&&LU(a,i)),a.run()})}else YH(i,s)||this.modifyView(o=>{s&&d1e(o,s),i&&LU(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=FU(this.props);this.resultPromise=xon(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;LU(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return Is.createElement("div",{ref:this.containerRef,className:t,style:n})}}CA(V5e,"propTypes",{className:bge.string,onError:bge.func});function SW(){return SW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SW.apply(this,arguments)}function TW(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ron={};class H5e extends Is.PureComponent{constructor(){super(...arguments),TW(this,"vegaEmbed",Is.createRef()),TW(this,"handleNewView",t=>{this.update();const{onNewView:n=U5e}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){YH(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{Aon(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return Is.createElement(V5e,SW({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}TW(H5e,"defaultProps",{data:Ron});function CW(){return CW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CW.apply(this,arguments)}function kon(e){return Is.createElement(H5e,CW({},e,{mode:"vega-lite"}))}function Pon({allParticipants:e,studyId:t}){const[n,{close:r,open:i}]=W1(!1),[s,{close:o,open:a}]=W1(!1),[u,{open:l,close:c}]=W1(!1);return _.jsxs(_.Fragment,{children:[_.jsxs(gr,{children:[_.jsxs(Ln,{opened:n,children:[_.jsx(Ln.Target,{children:_.jsx(Zn,{variant:"light",disabled:e.length===0,onClick:()=>{EK(JSON.stringify(e,null,2),`${t}_all.json`)},onMouseEnter:i,onMouseLeave:r,px:4,children:_.jsx(wXe,{})})}),_.jsx(Ln.Dropdown,{children:_.jsx(dt,{children:"Download all participants data as JSON"})})]}),_.jsxs(Ln,{opened:s,children:[_.jsx(Ln.Target,{children:_.jsx(Zn,{variant:"light",disabled:e.length===0,onClick:l,onMouseEnter:a,onMouseLeave:o,px:4,children:_.jsx(Ewe,{})})}),_.jsx(Ln.Dropdown,{children:_.jsx(dt,{children:"Download all participants data as a tidy CSV"})})]})]}),u&&_.jsx(Wut,{opened:u,close:c,filename:`${t}_all_tidy.csv`,data:e,studyId:t})]})}function Non(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function Oon(e){const{studyId:t,allParticipants:n,config:r}=e,i=Mc(),[s,o]=_L(),a=n.filter(x=>x.completed).map(x=>Math.max(...Object.values(x.answers).map(S=>S.endTime).filter(S=>S!==void 0))).filter(x=>Number.isFinite(x)),[u,l]=P.useState([new Date(new Date(Math.min(...a.length>0?a:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...a.length>0?a:[new Date().getTime()])).setHours(24,0,0,0))]),[c,d,f,h]=P.useMemo(()=>{const x=n.filter(T=>!T.rejected&&T.completed),S=n.filter(T=>!T.rejected&&!T.completed),E=n.filter(T=>T.rejected);return[x,S,E,x.filter(T=>Non(T.answers,u))]},[n,u]),p=P.useMemo(()=>{var x,S;return h.length>0?[{Date:(x=u[0])==null?void 0:x.getTime(),Participants:0},...h.map(E=>Math.max(...Object.values(E.answers).map(T=>T.endTime).flat())).sort((E,T)=>E-T).map((E,T)=>({Date:E,Participants:T})),{Date:(S=u[1])==null?void 0:S.getTime(),Participants:h.length}]:[]},[h,u]),m=P.useMemo(()=>{var x,S;return{width:o.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(x=u[0])==null?void 0:x.getTime(),(S=u[1])==null?void 0:S.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:p}}},[o.width,u,p]),[y,{close:v,open:w}]=W1(!1);return _.jsx(Zf,{children:_.jsxs(Kb,{ref:s,padding:"lg",shadow:"md",withBorder:!0,children:[_.jsxs(Gt,{align:"center",mb:"xs",justify:"space-between",children:[_.jsxs(Gt,{direction:"row",align:"center",children:[_.jsx(Ki,{order:5,children:t}),_.jsx(mOe,{completed:c.length,inProgress:d.length,rejected:f.length,filteredCompleted:h.length})]}),_.jsxs(gr,{children:[_.jsx(Pon,{allParticipants:n,studyId:t}),_.jsxs(Ln,{opened:y,children:[_.jsx(Ln.Target,{children:_.jsx(Zn,{onClick:()=>i(`/analysis/stats/${t}`),onMouseEnter:w,onMouseLeave:v,px:4,children:_.jsx(cXe,{})})}),_.jsx(Ln.Dropdown,{children:_.jsx(dt,{children:"Analyze and manage study data"})})]})]})]}),_.jsx(lZ,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:u,onChange:l}),p.length>0?_.jsxs(_.Fragment,{children:[_.jsx(dt,{mt:16,children:"Finished Participants"}),_.jsx(kon,{spec:m,actions:!1})]}):_.jsx(ke,{h:293.4,children:_.jsx(Il,{style:{height:"100%"},children:_.jsx(dt,{children:"Not enough participants for chart"})})})]})})}function Don(e){const{globalConfig:t}=e,[n,r]=P.useState(!1),[i,s]=P.useState({}),[o,a]=P.useState({}),[u,l]=P.useState({}),{storageEngine:c}=Zi(),{user:d}=Mg();P.useEffect(()=>{(async()=>{r(!0);const p={},m={},y={},v=async x=>{const S=await r4(x,t);if(c){if(p[x]=await c.getAllParticipantsDataByStudy(x),S===null)return;if(m[x]=S,c instanceof od){const E=await c.getModes(x);y[x]=E.analyticsInterfacePubliclyAccessible}}};await(async()=>{const x=t.configsList.map(S=>v(S));try{await Promise.all(x),s(p),a(m),l(y)}catch(S){console.error("Error fetching data:",S)}finally{r(!1)}})()})()},[t,c]);const f=t.configsList.map(h=>i[h]&&(u[h]||d.isAdmin?_.jsx(Au.Col,{span:{md:12,xl:6},children:_.jsx(Oon,{studyId:h,allParticipants:i[h],config:o[h]})},`${h}-panel`):null));return _.jsxs(ke,{children:[_.jsx(Ki,{mb:20,order:4,children:"Your Studies:"}),_.jsxs(Au,{children:[f.length>0?f:_.jsx(Zf,{mt:100,children:_.jsx(dt,{children:"No studies to show. If you believe that this is in error, make sure that you are logged in."})}),_.jsx(xc,{visible:n})]})]})}function Mon({globalConfig:e}){return _.jsxs(ei,{children:[_.jsx(e2,{studyIds:e.configsList}),_.jsx(ei.Main,{children:_.jsx(Zf,{fluid:!0,children:_.jsx(Don,{globalConfig:e})})})]})}function $on(){const{user:e,triggerAuth:t}=Mg(),{storageEngine:n}=Zi(),[r,i]=P.useState(!1),[s,o]=P.useState([]),[a,u]=P.useState(!1),[l,c]=P.useState(!1),[d,f]=P.useState(!1),[h,p]=P.useState(!1),[m,y]=P.useState(""),[v,w]=P.useState(null),x=GEe({initialValues:{email:""},validate:{email:flt("Invalid email")}});P.useEffect(()=>{(async()=>{if(u(!0),n instanceof od){const M=await(n==null?void 0:n.getUserManagementData("authentication"));i(M==null?void 0:M.isEnabled);const z=await(n==null?void 0:n.getUserManagementData("adminUsers"));z&&z.adminUsersList&&o(z==null?void 0:z.adminUsersList.map(O=>O.email))}else i(!1);u(!1)})()},[n]);const S=async()=>{if(u(!0),n instanceof od){const D=await IDe(n,u);D&&D.email&&w({email:D.email,uid:D.uid}),p(!0)}u(!1)},E=async D=>{u(!0),n instanceof od&&D&&(await n.changeAuth(!0),await n.addAdminUser(D),o([D.email]),i(!0),t()),p(!1),u(!1)},T=async()=>{if(u(!0),n instanceof od){await n.addAdminUser({email:x.values.email,uid:null});const D=await n.getUserManagementData("adminUsers");o(D==null?void 0:D.adminUsersList.map(M=>M.email))}u(!1),c(!1),x.setValues({email:""})},A=D=>{f(!0),y(D)},I=async()=>{if(u(!0),n instanceof od){await n.removeAdminUser(m);const D=await n.getUserManagementData("adminUsers");o(D==null?void 0:D.adminUsersList.map(M=>M.email))}f(!1),u(!1)},k=P.useMemo(()=>n instanceof od,[n]);return _.jsxs(_.Fragment,{children:[_.jsx(Zf,{children:_.jsxs(Kb,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[_.jsx(Ki,{mb:20,order:3,children:"Authentication"}),r?_.jsx(Gt,{children:_.jsx(dt,{children:"Authentication is enabled."})}):_.jsxs(Gt,{justify:"space-between",children:[_.jsx(ke,{children:_.jsx(dt,{children:"Authentication is currently disabled."})}),_.jsx(jn,{label:"You can only enable auth when using Firebase",disabled:k,children:_.jsx(Zn,{onClick:D=>k?S():D.preventDefault(),color:"green","data-disabled":k?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?_.jsxs(Gt,{mt:40,direction:"column",children:[_.jsxs(Gt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[_.jsx(Ki,{order:6,children:"Enabled Users"}),_.jsx(FY,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(D=>{var M;return _.jsxs(Gt,{justify:"space-between",mb:10,children:[_.jsx(dt,{children:D}),D===((M=e.user)==null?void 0:M.email)?_.jsx(dt,{color:"blue",size:"xs",children:"You"}):_.jsx(mr,{variant:"subtle",onClick:()=>A(D),children:_.jsx(Swe,{color:"red"})})]},D)}):null]}):null]})}),_.jsx(zs,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:_.jsxs(ke,{component:"form",onSubmit:x.onSubmit(()=>T()),children:[_.jsx(Af,{leftSection:_.jsx(nXe,{}),placeholder:"User Gmail Account",...x.getInputProps("email")}),_.jsxs(Gt,{mt:30,justify:"right",children:[_.jsx(Zn,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),_.jsx(Zn,{type:"submit",children:"Save"})]})]})}),_.jsxs(zs,{opened:d,size:"large",onClose:()=>f(!1),title:_.jsxs(dt,{fw:700,children:["Remove",m,"?"]}),children:[_.jsxs(dt,{mt:40,children:["Are you sure you want to remove",_.jsx("b",{children:m})," ","as an administrator?"]}),_.jsxs(Gt,{mt:40,justify:"right",children:[_.jsx(Zn,{mr:5,variant:"subtle",color:"red",onClick:()=>f(!1),children:"Cancel"}),_.jsx(Zn,{onClick:()=>I(),children:"Yes, I'm sure."})]})]}),_.jsxs(zs,{opened:h,size:"md",onClose:()=>f(!1),title:_.jsx(dt,{fw:700,children:"Enable Authentication?"}),children:[_.jsxs(dt,{mt:40,children:["User"," ",_.jsx("b",{children:v==null?void 0:v.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),_.jsxs(Gt,{mt:40,justify:"right",children:[_.jsx(Zn,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),_.jsx(Zn,{onClick:()=>E(v),children:"Yes, I'm sure."})]})]}),_.jsx(xc,{visible:a})]})}class Lon extends sOe{constructor(){super("localStorage");nl(this,"studyDatabase");nl(this,"studyId")}saveAllParticipantAndTaskTags(n){throw new Error("Method not implemented.")}getAllParticipantAndTaskTags(){throw new Error("Method not implemented.")}saveTags(n){throw new Error("Method not implemented.")}getTags(){throw new Error("Method not implemented.")}getEditedTranscript(n){throw new Error("Method not implemented.")}saveEditedTranscript(n,r,i,s){throw new Error("Method not implemented.")}getAudio(n,r){return console.warn("not yet implemented",r),Promise.resolve(["not implemented"])}getTranscription(n,r){return console.warn("not yet implemented",r),Promise.resolve(["not implemented"])}saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await Yw.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await v$(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s,o){var d;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await v$(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1};return u.dataCollectionEnabled&&await((d=this.studyDatabase)==null?void 0:d.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await Yw.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=nI();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=Yw.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=nI();this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}async setMode(n,r,i){this.studyDatabase=await Yw.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await Yw.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}_verifyStudyDatabase(n){return n!==void 0}}async function Fon(){let e,t=!1;{const n=new od;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new Lon;await n.connect(),e=n}return e}async function jon(){const t=await(await fetch(`${$c}global.json`)).text();return jut(t)}function Bon(){const[e,t]=P.useState(null),[n,r]=P.useState({});P.useEffect(()=>{async function a(){e&&r(await I3t(e))}a()},[e]),P.useEffect(()=>{e||jon().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=Zi();P.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await Fon();s(u)}a()},[s,i]);const o=async a=>i instanceof od?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?_.jsx(jKe,{basename:$c,children:_.jsx(n3t,{children:_.jsx(YKe,{children:_.jsx(ei,{padding:"md",header:{height:70},children:_.jsxs(PKe,{children:[_.jsx(bm,{path:"/",element:_.jsxs(_.Fragment,{children:[_.jsx(e2,{studyIds:e.configsList}),_.jsx(Sit,{globalConfig:e,studyConfigs:n})]})}),_.jsx(bm,{path:"/:studyId/*",element:_.jsx(k3t,{globalConfig:e})}),_.jsx(bm,{path:"/analysis/dashboard",element:_.jsx(Mon,{globalConfig:e})}),_.jsx(bm,{path:"/analysis",element:_.jsx(BH,{to:"/analysis/dashboard"})}),_.jsx(bm,{path:"/analysis/stats/:studyId/:tab",element:_.jsx(mge,{paramToCheck:"studyId",paramCallback:o,children:_.jsx($6t,{globalConfig:e})})}),_.jsx(bm,{path:"/analysis/stats/:studyId",element:_.jsx(BH,{to:"./table",replace:!0})}),_.jsx(bm,{path:"/settings",element:_.jsx(ei,{children:_.jsxs(mge,{children:[_.jsx(e2,{studyIds:e.configsList}),_.jsx(ei.Main,{children:_.jsx($on,{})})]})})}),_.jsx(bm,{path:"/login",element:_.jsxs(ei,{children:[_.jsx(e2,{studyIds:e.configsList}),_.jsx(ei.Main,{children:_.jsx(L6t,{})})]})})]})})})})}):null}sBe.createRoot(document.getElementById("root")).render(_.jsx(Is.StrictMode,{children:_.jsx(BYe,{children:_.jsx(L1e,{children:_.jsx(Bon,{})})})}));
